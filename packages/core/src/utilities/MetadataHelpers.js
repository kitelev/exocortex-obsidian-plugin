export class MetadataHelpers {
    static findAllReferencingProperties(metadata, currentFileName) {
        const properties = [];
        for (const [key, value] of Object.entries(metadata)) {
            if (this.containsReference(value, currentFileName)) {
                properties.push(key);
            }
        }
        return properties;
    }
    static findReferencingProperty(metadata, currentFileName) {
        for (const [key, value] of Object.entries(metadata)) {
            if (this.containsReference(value, currentFileName)) {
                return key;
            }
        }
        return undefined;
    }
    static containsReference(value, fileName) {
        if (!value)
            return false;
        const cleanName = fileName.replace(/\.md$/, "");
        if (typeof value === "string") {
            return value.includes(`[[${cleanName}]]`) || value.includes(cleanName);
        }
        if (Array.isArray(value)) {
            return value.some((v) => this.containsReference(v, fileName));
        }
        return false;
    }
    static isAssetArchived(metadata) {
        if (metadata?.exo__Asset_isArchived === true) {
            return true;
        }
        const archivedValue = metadata?.archived;
        if (archivedValue === undefined || archivedValue === null) {
            return false;
        }
        if (typeof archivedValue === "boolean") {
            return archivedValue;
        }
        if (typeof archivedValue === "number") {
            return archivedValue !== 0;
        }
        if (typeof archivedValue === "string") {
            const normalized = archivedValue.toLowerCase().trim();
            return (normalized === "true" || normalized === "yes" || normalized === "1");
        }
        return false;
    }
    static getPropertyValue(relation, propertyName) {
        if (propertyName === "Name")
            return relation.title;
        if (propertyName === "title")
            return relation.title;
        if (propertyName === "created")
            return relation.created;
        if (propertyName === "modified")
            return relation.modified;
        if (propertyName === "path")
            return relation.path;
        return relation.metadata?.[propertyName];
    }
    static ensureQuoted(value) {
        if (!value || value === '""')
            return '""';
        if (value.startsWith('"') && value.endsWith('"'))
            return value;
        return `"${value}"`;
    }
    static buildFileContent(frontmatter, bodyContent) {
        const frontmatterLines = Object.entries(frontmatter)
            .map(([key, value]) => {
            if (Array.isArray(value)) {
                const arrayItems = value.map((item) => `  - ${item}`).join("\n");
                return `${key}:\n${arrayItems}`;
            }
            return `${key}: ${value}`;
        })
            .join("\n");
        const body = bodyContent ? `\n${bodyContent}\n` : "\n";
        return `---\n${frontmatterLines}\n---\n${body}`;
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWV0YWRhdGFIZWxwZXJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiTWV0YWRhdGFIZWxwZXJzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE1BQU0sT0FBTyxlQUFlO0lBQzFCLE1BQU0sQ0FBQyw0QkFBNEIsQ0FDakMsUUFBNkIsRUFDN0IsZUFBdUI7UUFFdkIsTUFBTSxVQUFVLEdBQWEsRUFBRSxDQUFDO1FBQ2hDLEtBQUssTUFBTSxDQUFDLEdBQUcsRUFBRSxLQUFLLENBQUMsSUFBSSxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUM7WUFDcEQsSUFBSSxJQUFJLENBQUMsaUJBQWlCLENBQUMsS0FBSyxFQUFFLGVBQWUsQ0FBQyxFQUFFLENBQUM7Z0JBQ25ELFVBQVUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDdkIsQ0FBQztRQUNILENBQUM7UUFDRCxPQUFPLFVBQVUsQ0FBQztJQUNwQixDQUFDO0lBRUQsTUFBTSxDQUFDLHVCQUF1QixDQUM1QixRQUE2QixFQUM3QixlQUF1QjtRQUV2QixLQUFLLE1BQU0sQ0FBQyxHQUFHLEVBQUUsS0FBSyxDQUFDLElBQUksTUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsRUFBRSxDQUFDO1lBQ3BELElBQUksSUFBSSxDQUFDLGlCQUFpQixDQUFDLEtBQUssRUFBRSxlQUFlLENBQUMsRUFBRSxDQUFDO2dCQUNuRCxPQUFPLEdBQUcsQ0FBQztZQUNiLENBQUM7UUFDSCxDQUFDO1FBQ0QsT0FBTyxTQUFTLENBQUM7SUFDbkIsQ0FBQztJQUVELE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxLQUFVLEVBQUUsUUFBZ0I7UUFDbkQsSUFBSSxDQUFDLEtBQUs7WUFBRSxPQUFPLEtBQUssQ0FBQztRQUV6QixNQUFNLFNBQVMsR0FBRyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQztRQUVoRCxJQUFJLE9BQU8sS0FBSyxLQUFLLFFB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LEVBQUUsRUFBRSxDQUFDLE9BQU8sSUFBSSxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7Z0JBQ2pFLE9BQU8sR0FBRyxHQUFHLE1BQU0sVUFBVSxFQUFFLENBQUM7WUFDbEMsQ0FBQztZQUNELE9BQU8sR0FBRyxHQUFHLEtBQUssS0FBSyxFQUFFLENBQUM7UUFDNUIsQ0FBQyxDQUFDO2FBQ0QsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRWQsTUFBTSxJQUFJLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxLQUFLLFdBQVcsSUFBSSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFDdkQsT0FBTyxRQUFRLGdCQUFnQixVQUFVLElBQUksRUFBRSxDQUFDO0lBQ2xELENBQUM7Q0FDRiIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBNZXRhZGF0YUhlbHBlcnMge1xuICBzdGF0aWMgZmluZEFsbFJlZmVyZW5jaW5nUHJvcGVydGllcyhcbiAgICBtZXRhZGF0YTogUmVjb3JkPHN0cmluZywgYW55PixcbiAgICBjdXJyZW50RmlsZU5hbWU6IHN0cmluZyxcbiAgKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHByb3BlcnRpZXM6IHN0cmluZ1tdID0gW107XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMobWV0YWRhdGEpKSB7XG4gICAgICBpZiAodGhpcy5jb250YWluc1JlZmVyZW5jZSh2YWx1ZSwgY3VycmVudEZpbGVOYW1lKSkge1xuICAgICAgICBwcm9wZXJ0aWVzLnB1c2goa2V5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHByb3BlcnRpZXM7XG4gIH1cblxuICBzdGF0aWMgZmluZFJlZmVyZW5jaW5nUHJvcGVydHkoXG4gICAgbWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gICAgY3VycmVudEZpbGVOYW1lOiBzdHJpbmcsXG4gICk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMobWV0YWRhdGEpKSB7XG4gICAgICBpZiAodGhpcy5jb250YWluc1JlZmVyZW5jZSh2YWx1ZSwgY3VycmVudEZpbGVOYW1lKSkge1xuICAgICAgICByZXR1cm4ga2V5O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG5cbiAgc3RhdGljIGNvbnRhaW5zUmVmZXJlbmNlKHZhbHVlOiBhbnksIGZpbGVOYW1lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCBjbGVhbk5hbWUgPSBmaWxlTmFtZS5yZXBsYWNlKC9cXC5tZCQvLCBcIlwiKTtcblxuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgIHJldHVybiB2YWx1ZS5pbmNsdWRlcyhgW1ske2NsZWFuTmFtZX1dXWApIHx8IHZhbHVlLmluY2x1ZGVzKGNsZWFuTmFtZSk7XG4gICAgfVxuXG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWUuc29tZSgodikgPT4gdGhpcy5jb250YWluc1JlZmVyZW5jZSh2LCBmaWxlTmFtZSkpO1xuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0YXRpYyBpc0Fzc2V0QXJjaGl2ZWQobWV0YWRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBib29sZWFuIHtcbiAgICBpZiAobWV0YWRhdGE/LmV4b19fQXNzZXRfaXNBcmNoaXZlZCA9PT0gdHJ1ZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgY29uc3QgYXJjaGl2ZWRWYWx1ZSA9IG1ldGFkYXRhPy5hcmNoaXZlZDtcblxuICAgIGlmIChhcmNoaXZlZFZhbHVlID09PSB1bmRlZmluZWQgfHwgYXJjaGl2ZWRWYWx1ZSA9PT0gbnVsbCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgYXJjaGl2ZWRWYWx1ZSA9PT0gXCJib29sZWFuXCIpIHtcbiAgICAgIHJldHVybiBhcmNoaXZlZFZhbHVlO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgYXJjaGl2ZWRWYWx1ZSA9PT0gXCJudW1iZXJcIikge1xuICAgICAgcmV0dXJuIGFyY2hpdmVkVmFsdWUgIT09IDA7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBhcmNoaXZlZFZhbHVlID09PSBcInN0cmluZ1wiKSB7XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gYXJjaGl2ZWRWYWx1ZS50b0xvd2VyQ2FzZSgpLnRyaW0oKTtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIG5vcm1hbGl6ZWQgPT09IFwidHJ1ZVwiIHx8IG5vcm1hbGl6ZWQgPT09IFwieWVzXCIgfHwgbm9ybWFsaXplZCA9PT0gXCIxXCJcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3RhdGljIGdldFByb3BlcnR5VmFsdWUoXG4gICAgcmVsYXRpb246IHsgdGl0bGU6IHN0cmluZzsgY3JlYXRlZDogbnVtYmVyOyBtb2RpZmllZDogbnVtYmVyOyBwYXRoOiBzdHJpbmc7IG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgYW55PiB9LFxuICAgIHByb3BlcnR5TmFtZTogc3RyaW5nLFxuICApOiBhbnkge1xuICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09IFwiTmFtZVwiKSByZXR1cm4gcmVsYXRpb24udGl0bGU7XG4gICAgaWYgKHByb3BlcnR5TmFtZSA9PT0gXCJ0aXRsZVwiKSByZXR1cm4gcmVsYXRpb24udGl0bGU7XG4gICAgaWYgKHByb3BlcnR5TmFtZSA9PT0gXCJjcmVhdGVkXCIpIHJldHVybiByZWxhdGlvbi5jcmVhdGVkO1xuICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09IFwibW9kaWZpZWRcIikgcmV0dXJuIHJlbGF0aW9uLm1vZGlmaWVkO1xuICAgIGlmIChwcm9wZXJ0eU5hbWUgPT09IFwicGF0aFwiKSByZXR1cm4gcmVsYXRpb24ucGF0aDtcbiAgICByZXR1cm4gcmVsYXRpb24ubWV0YWRhdGE/Lltwcm9wZXJ0eU5hbWVdO1xuICB9XG5cbiAgc3RhdGljIGVuc3VyZVF1b3RlZCh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIXZhbHVlIHx8IHZhbHVlID09PSAnXCJcIicpIHJldHVybiAnXCJcIic7XG4gICAgaWYgKHZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgdmFsdWUuZW5kc1dpdGgoJ1wiJykpIHJldHVybiB2YWx1ZTtcbiAgICByZXR1cm4gYFwiJHt2YWx1ZX1cImA7XG4gIH1cblxuICBzdGF0aWMgYnVpbGRGaWxlQ29udGVudChmcm9udG1hdHRlcjogUmVjb3JkPHN0cmluZywgYW55PiwgYm9keUNvbnRlbnQ/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGZyb250bWF0dGVyTGluZXMgPSBPYmplY3QuZW50cmllcyhmcm9udG1hdHRlcilcbiAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICBjb25zdCBhcnJheUl0ZW1zID0gdmFsdWUubWFwKChpdGVtKSA9PiBgICAtICR7aXRlbX1gKS5qb2luKFwiXFxuXCIpO1xuICAgICAgICAgIHJldHVybiBgJHtrZXl9OlxcbiR7YXJyYXlJdGVtc31gO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBgJHtrZXl9OiAke3ZhbHVlfWA7XG4gICAgICB9KVxuICAgICAgLmpvaW4oXCJcXG5cIik7XG5cbiAgICBjb25zdCBib2R5ID0gYm9keUNvbnRlbnQgPyBgXFxuJHtib2R5Q29udGVudH1cXG5gIDogXCJcXG5cIjtcbiAgICByZXR1cm4gYC0tLVxcbiR7ZnJvbnRtYXR0ZXJMaW5lc31cXG4tLS1cXG4ke2JvZHl9YDtcbiAgfVxufVxuIl19