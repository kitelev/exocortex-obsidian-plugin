#!/usr/bin/env node
// exocortex-cli v0.1.0
// CLI tool for Exocortex knowledge management system - SPARQL queries, task management, and more
// License: MIT

"use strict";var gS=Object.create;var _a=Object.defineProperty;var yS=Object.getOwnPropertyDescriptor;var _S=Object.getOwnPropertyNames;var vS=Object.getPrototypeOf,SS=Object.prototype.hasOwnProperty;var o=(r,e)=>_a(r,"name",{value:e,configurable:!0});var bS=(r,e)=>()=>(r&&(e=r(r=0)),e);var y=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),wS=(r,e)=>{for(var t in e)_a(r,t,{get:e[t],enumerable:!0})},O1=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of _S(e))!SS.call(r,n)&&n!==t&&_a(r,n,{get:()=>e[n],enumerable:!(i=yS(e,n))||i.enumerable});return r};var Ye=(r,e,t)=>(t=r!=null?gS(vS(r)):{},O1(e||!r||!r.__esModule?_a(t,"default",{value:r,enumerable:!0}):t,r)),Kl=r=>O1(_a({},"__esModule",{value:!0}),r);var Yl=y(()=>{var C1;(function(r){(function(e){var t=typeof globalThis=="object"?globalThis:typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:c(),i=n(r);typeof t.Reflect<"u"&&(i=n(t.Reflect,i)),e(i,t),typeof t.Reflect>"u"&&(t.Reflect=r);function n(u,f){return function(l,h){Object.defineProperty(u,l,{configurable:!0,writable:!0,value:h}),f&&f(l,h)}}o(n,"makeExporter");function s(){try{return Function("return this;")()}catch{}}o(s,"functionThis");function a(){try{return(0,eval)("(function() { return this; })()")}catch{}}o(a,"indirectEvalThis");function c(){return s()||a()}o(c,"sloppyModeThis")})(function(e,t){var i=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",s=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",a=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",u={__proto__:[]}instanceof Array,f=!c&&!u,l={create:c?function(){return Ae(Object.create(null))}:u?function(){return Ae({__proto__:null})}:function(){return Ae({})},has:f?function(_,v){return i.call(_,v)}:function(_,v){return v in _},get:f?function(_,v){return i.call(_,v)?_[v]:void 0}:function(_,v){return _[v]}},h=Object.getPrototypeOf(Function),p=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ae(),g=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:De(),S=typeof WeakMap=="function"?WeakMap:Oe(),b=n?Symbol.for("@reflect-metadata:registry"):void 0,x=ne(),F=se(x);function P(_,v,w,C){if(j(w)){if(!ye(_))throw new TypeError;if(!_e(v))throw new TypeError;return Xe(_,v)}else{if(!ye(_))throw new TypeError;if(!U(v))throw new TypeError;if(!U(C)&&!j(C)&&!le(C))throw new TypeError;return le(C)&&(C=void 0),w=ue(w),$e(_,v,w,C)}}o(P,"decorate"),e("decorate",P);function V(_,v){function w(C,q){if(!U(C))throw new TypeError;if(!j(q)&&!Te(q))throw new TypeError;$(_,v,C,q)}return o(w,"decorator"),w}o(V,"metadata"),e("metadata",V);function H(_,v,w,C){if(!U(w))throw new TypeError;return j(C)||(C=ue(C)),$(_,v,w,C)}o(H,"defineMetadata"),e("defineMetadata",H);function K(_,v,w){if(!U(v))throw new TypeError;return j(w)||(w=ue(w)),He(_,v,w)}o(K,"hasMetadata"),e("hasMetadata",K);function Pe(_,v,w){if(!U(v))throw new TypeError;return j(w)||(w=ue(w)),Ie(_,v,w)}o(Pe,"hasOwnMetadata"),e("hasOwnMetadata",Pe);function Ze(_,v,w){if(!U(v))throw new TypeError;return j(w)||(w=ue(w)),Ne(_,v,w)}o(Ze,"getMetadata"),e("getMetadata",Ze);function ct(_,v,w){if(!U(v))throw new TypeError;return j(w)||(w=ue(w)),Ce(_,v,w)}o(ct,"getOwnMetadata"),e("getOwnMetadata",ct);function B(_,v){if(!U(_))throw new TypeError;return j(v)||(v=ue(v)),R(_,v)}o(B,"getMetadataKeys"),e("getMetadataKeys",B);function ce(_,v){if(!U(_))throw new TypeError;return j(v)||(v=ue(v)),ke(_,v)}o(ce,"getOwnMetadataKeys"),e("getOwnMetadataKeys",ce);function xe(_,v,w){if(!U(v))throw new TypeError;if(j(w)||(w=ue(w)),!U(v))throw new TypeError;j(w)||(w=ue(w));var C=W(v,w,!1);return j(C)?!1:C.OrdinaryDeleteMetadata(_,v,w)}o(xe,"deleteMetadata"),e("deleteMetadata",xe);function Xe(_,v){for(var w=_.length-1;w>=0;--w){var C=_[w],q=C(v);if(!j(q)&&!le(q)){if(!_e(q))throw new TypeError;v=q}}return v}o(Xe,"DecorateConstructor");function $e(_,v,w,C){for(var q=_.length-1;q>=0;--q){var Ge=_[q],Ke=Ge(v,w,C);if(!j(Ke)&&!le(Ke)){if(!U(Ke))throw new TypeError;C=Ke}}return C}o($e,"DecorateProperty");function He(_,v,w){var C=Ie(_,v,w);if(C)return!0;var q=Q(v);return le(q)?!1:He(_,q,w)}o(He,"OrdinaryHasMetadata");function Ie(_,v,w){var C=W(v,w,!1);return j(C)?!1:ge(C.OrdinaryHasOwnMetadata(_,v,w))}o(Ie,"OrdinaryHasOwnMetadata");function Ne(_,v,w){var C=Ie(_,v,w);if(C)return Ce(_,v,w);var q=Q(v);if(!le(q))return Ne(_,q,w)}o(Ne,"OrdinaryGetMetadata");function Ce(_,v,w){var C=W(v,w,!1);if(!j(C))return C.OrdinaryGetOwnMetadata(_,v,w)}o(Ce,"OrdinaryGetOwnMetadata");function $(_,v,w,C){var q=W(w,C,!0);q.OrdinaryDefineOwnMetadata(_,v,w,C)}o($,"OrdinaryDefineOwnMetadata");function R(_,v){var w=ke(_,v),C=Q(_);if(C===null)return w;var q=R(C,v);if(q.length<=0)return w;if(w.length<=0)return q;for(var Ge=new g,Ke=[],me=0,N=w;me<N.length;me++){var k=N[me],M=Ge.has(k);M||(Ge.add(k),Ke.push(k))}for(var L=0,de=q;L<de.length;L++){var k=de[L],M=Ge.has(k);M||(Ge.add(k),Ke.push(k))}return Ke}o(R,"OrdinaryMetadataKeys");function ke(_,v){var w=W(_,v,!1);return w?w.OrdinaryOwnMetadataKeys(_,v):[]}o(ke,"OrdinaryOwnMetadataKeys");function qe(_){if(_===null)return 1;switch(typeof _){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return _===null?1:6;default:return 6}}o(qe,"Type");function j(_){return _===void 0}o(j,"IsUndefined");function le(_){return _===null}o(le,"IsNull");function Se(_){return typeof _=="symbol"}o(Se,"IsSymbol");function U(_){return typeof _=="object"?_!==null:typeof _=="function"}o(U,"IsObject");function be(_,v){switch(qe(_)){case 0:return _;case 1:return _;case 2:return _;case 3:return _;case 4:return _;case 5:return _}var w=v===3?"string":v===5?"number":"default",C=te(_,s);if(C!==void 0){var q=C.call(_,w);if(U(q))throw new TypeError;return q}return we(_,w==="default"?"number":w)}o(be,"ToPrimitive");function we(_,v){if(v==="string"){var w=_.toString;if(fe(w)){var C=w.call(_);if(!U(C))return C}var q=_.valueOf;if(fe(q)){var C=q.call(_);if(!U(C))return C}}else{var q=_.valueOf;if(fe(q)){var C=q.call(_);if(!U(C))return C}var Ge=_.toString;if(fe(Ge)){var C=Ge.call(_);if(!U(C))return C}}throw new TypeError}o(we,"OrdinaryToPrimitive");function ge(_){return!!_}o(ge,"ToBoolean");function Ee(_){return""+_}o(Ee,"ToString");function ue(_){var v=be(_,3);return Se(v)?v:Ee(v)}o(ue,"ToPropertyKey");function ye(_){return Array.isArray?Array.isArray(_):_ instanceof Object?_ instanceof Array:Object.prototype.toString.call(_)==="[object Array]"}o(ye,"IsArray");function fe(_){return typeof _=="function"}o(fe,"IsCallable");function _e(_){return typeof _=="function"}o(_e,"IsConstructor");function Te(_){switch(qe(_)){case 3:return!0;case 4:return!0;default:return!1}}o(Te,"IsPropertyKey");function J(_,v){return _===v||_!==_&&v!==v}o(J,"SameValueZero");function te(_,v){var w=_[v];if(w!=null){if(!fe(w))throw new TypeError;return w}}o(te,"GetMethod");function re(_){var v=te(_,a);if(!fe(v))throw new TypeError;var w=v.call(_);if(!U(w))throw new TypeError;return w}o(re,"GetIterator");function X(_){return _.value}o(X,"IteratorValue");function Z(_){var v=_.next();return v.done?!1:v}o(Z,"IteratorStep");function ee(_){var v=_.return;v&&v.call(_)}o(ee,"IteratorClose");function Q(_){var v=Object.getPrototypeOf(_);if(typeof _!="function"||_===h||v!==h)return v;var w=_.prototype,C=w&&Object.getPrototypeOf(w);if(C==null||C===Object.prototype)return v;var q=C.constructor;return typeof q!="function"||q===_?v:q}o(Q,"OrdinaryGetPrototypeOf");function ie(){var _;!j(b)&&typeof t.Reflect<"u"&&!(b in t.Reflect)&&typeof t.Reflect.defineMetadata=="function"&&(_=G(t.Reflect));var v,w,C,q=new S,Ge={registerProvider:Ke,getProvider:N,setProvider:M};return Ge;function Ke(L){if(!Object.isExtensible(Ge))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case _===L:break;case j(v):v=L;break;case v===L:break;case j(w):w=L;break;case w===L:break;default:C===void 0&&(C=new g),C.add(L);break}}function me(L,de){if(!j(v)){if(v.isProviderFor(L,de))return v;if(!j(w)){if(w.isProviderFor(L,de))return v;if(!j(C))for(var je=re(C);;){var Me=Z(je);if(!Me)return;var Et=X(Me);if(Et.isProviderFor(L,de))return ee(je),Et}}}if(!j(_)&&_.isProviderFor(L,de))return _}function N(L,de){var je=q.get(L),Me;return j(je)||(Me=je.get(de)),j(Me)&&(Me=me(L,de),j(Me)||(j(je)&&(je=new p,q.set(L,je)),je.set(de,Me))),Me}function k(L){if(j(L))throw new TypeError;return v===L||w===L||!j(C)&&C.has(L)}function M(L,de,je){if(!k(je))throw new Error("Metadata provider not registered.");var Me=N(L,de);if(Me!==je){if(!j(Me))return!1;var Et=q.get(L);j(Et)&&(Et=new p,q.set(L,Et)),Et.set(de,je)}return!0}}o(ie,"CreateMetadataRegistry");function ne(){var _;return!j(b)&&U(t.Reflect)&&Object.isExtensible(t.Reflect)&&(_=t.Reflect[b]),j(_)&&(_=ie()),!j(b)&&U(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,b,{enumerable:!1,configurable:!1,writable:!1,value:_}),_}o(ne,"GetOrCreateMetadataRegistry");function se(_){var v=new S,w={isProviderFor:o(function(k,M){var L=v.get(k);return j(L)?!1:L.has(M)},"isProviderFor"),OrdinaryDefineOwnMetadata:Ke,OrdinaryHasOwnMetadata:q,OrdinaryGetOwnMetadata:Ge,OrdinaryOwnMetadataKeys:me,OrdinaryDeleteMetadata:N};return x.registerProvider(w),w;function C(k,M,L){var de=v.get(k),je=!1;if(j(de)){if(!L)return;de=new p,v.set(k,de),je=!0}var Me=de.get(M);if(j(Me)){if(!L)return;if(Me=new p,de.set(M,Me),!_.setProvider(k,M,w))throw de.delete(M),je&&v.delete(k),new Error("Wrong provider for target.")}return Me}o(C,"GetOrCreateMetadataMap");function q(k,M,L){var de=C(M,L,!1);return j(de)?!1:ge(de.has(k))}o(q,"OrdinaryHasOwnMetadata");function Ge(k,M,L){var de=C(M,L,!1);if(!j(de))return de.get(k)}o(Ge,"OrdinaryGetOwnMetadata");function Ke(k,M,L,de){var je=C(L,de,!0);je.set(k,M)}o(Ke,"OrdinaryDefineOwnMetadata");function me(k,M){var L=[],de=C(k,M,!1);if(j(de))return L;for(var je=de.keys(),Me=re(je),Et=0;;){var ir=Z(Me);if(!ir)return L.length=Et,L;var hr=X(ir);try{L[Et]=hr}catch(Ut){try{ee(Me)}finally{throw Ut}}Et++}}o(me,"OrdinaryOwnMetadataKeys");function N(k,M,L){var de=C(M,L,!1);if(j(de)||!de.delete(k))return!1;if(de.size===0){var je=v.get(M);j(je)||(je.delete(L),je.size===0&&v.delete(je))}return!0}o(N,"OrdinaryDeleteMetadata")}o(se,"CreateMetadataProvider");function G(_){var v=_.defineMetadata,w=_.hasOwnMetadata,C=_.getOwnMetadata,q=_.getOwnMetadataKeys,Ge=_.deleteMetadata,Ke=new S,me={isProviderFor:o(function(N,k){var M=Ke.get(N);return!j(M)&&M.has(k)?!0:q(N,k).length?(j(M)&&(M=new g,Ke.set(N,M)),M.add(k),!0):!1},"isProviderFor"),OrdinaryDefineOwnMetadata:v,OrdinaryHasOwnMetadata:w,OrdinaryGetOwnMetadata:C,OrdinaryOwnMetadataKeys:q,OrdinaryDeleteMetadata:Ge};return me}o(G,"CreateFallbackProvider");function W(_,v,w){var C=x.getProvider(_,v);if(!j(C))return C;if(w){if(x.setProvider(_,v,F))return F;throw new Error("Illegal state.")}}o(W,"GetMetadataProvider");function ae(){var _={},v=[],w=(function(){function me(N,k,M){this._index=0,this._keys=N,this._values=k,this._selector=M}return o(me,"MapIterator"),me.prototype["@@iterator"]=function(){return this},me.prototype[a]=function(){return this},me.prototype.next=function(){var N=this._index;if(N>=0&&N<this._keys.length){var k=this._selector(this._keys[N],this._values[N]);return N+1>=this._keys.length?(this._index=-1,this._keys=v,this._values=v):this._index++,{value:k,done:!1}}return{value:void 0,done:!0}},me.prototype.throw=function(N){throw this._index>=0&&(this._index=-1,this._keys=v,this._values=v),N},me.prototype.return=function(N){return this._index>=0&&(this._index=-1,this._keys=v,this._values=v),{value:N,done:!0}},me})(),C=(function(){function me(){this._keys=[],this._values=[],this._cacheKey=_,this._cacheIndex=-2}return o(me,"Map"),Object.defineProperty(me.prototype,"size",{get:o(function(){return this._keys.length},"get"),enumerable:!0,configurable:!0}),me.prototype.has=function(N){return this._find(N,!1)>=0},me.prototype.get=function(N){var k=this._find(N,!1);return k>=0?this._values[k]:void 0},me.prototype.set=function(N,k){var M=this._find(N,!0);return this._values[M]=k,this},me.prototype.delete=function(N){var k=this._find(N,!1);if(k>=0){for(var M=this._keys.length,L=k+1;L<M;L++)this._keys[L-1]=this._keys[L],this._values[L-1]=this._values[L];return this._keys.length--,this._values.length--,J(N,this._cacheKey)&&(this._cacheKey=_,this._cacheIndex=-2),!0}return!1},me.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=_,this._cacheIndex=-2},me.prototype.keys=function(){return new w(this._keys,this._values,q)},me.prototype.values=function(){return new w(this._keys,this._values,Ge)},me.prototype.entries=function(){return new w(this._keys,this._values,Ke)},me.prototype["@@iterator"]=function(){return this.entries()},me.prototype[a]=function(){return this.entries()},me.prototype._find=function(N,k){if(!J(this._cacheKey,N)){this._cacheIndex=-1;for(var M=0;M<this._keys.length;M++)if(J(this._keys[M],N)){this._cacheIndex=M;break}}return this._cacheIndex<0&&k&&(this._cacheIndex=this._keys.length,this._keys.push(N),this._values.push(void 0)),this._cacheIndex},me})();return C;function q(me,N){return me}function Ge(me,N){return N}function Ke(me,N){return[me,N]}}o(ae,"CreateMapPolyfill");function De(){var _=(function(){function v(){this._map=new p}return o(v,"Set"),Object.defineProperty(v.prototype,"size",{get:o(function(){return this._map.size},"get"),enumerable:!0,configurable:!0}),v.prototype.has=function(w){return this._map.has(w)},v.prototype.add=function(w){return this._map.set(w,w),this},v.prototype.delete=function(w){return this._map.delete(w)},v.prototype.clear=function(){this._map.clear()},v.prototype.keys=function(){return this._map.keys()},v.prototype.values=function(){return this._map.keys()},v.prototype.entries=function(){return this._map.entries()},v.prototype["@@iterator"]=function(){return this.keys()},v.prototype[a]=function(){return this.keys()},v})();return _}o(De,"CreateSetPolyfill");function Oe(){var _=16,v=l.create(),w=C();return(function(){function N(){this._key=C()}return o(N,"WeakMap"),N.prototype.has=function(k){var M=q(k,!1);return M!==void 0?l.has(M,this._key):!1},N.prototype.get=function(k){var M=q(k,!1);return M!==void 0?l.get(M,this._key):void 0},N.prototype.set=function(k,M){var L=q(k,!0);return L[this._key]=M,this},N.prototype.delete=function(k){var M=q(k,!1);return M!==void 0?delete M[this._key]:!1},N.prototype.clear=function(){this._key=C()},N})();function C(){var N;do N="@@WeakMap@@"+me();while(l.has(v,N));return v[N]=!0,N}function q(N,k){if(!i.call(N,w)){if(!k)return;Object.defineProperty(N,w,{value:l.create()})}return N[w]}function Ge(N,k){for(var M=0;M<k;++M)N[M]=Math.random()*255|0;return N}function Ke(N){if(typeof Uint8Array=="function"){var k=new Uint8Array(N);return typeof crypto<"u"?crypto.getRandomValues(k):typeof msCrypto<"u"?msCrypto.getRandomValues(k):Ge(k,N),k}return Ge(new Array(N),N)}function me(){var N=Ke(_);N[6]=N[6]&79|64,N[8]=N[8]&191|128;for(var k="",M=0;M<_;++M){var L=N[M];(M===4||M===6||M===8)&&(k+="-"),L<16&&(k+="0"),k+=L.toString(16).toLowerCase()}return k}}o(Oe,"CreateWeakMapPolyfill");function Ae(_){return _.__=void 0,delete _.__,_}o(Ae,"MakeDictionary")})})(C1||(C1={}))});var va=y(Jl=>{var Ko=class extends Error{static{o(this,"CommanderError")}constructor(e,t,i){super(i),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=t,this.exitCode=e,this.nestedError=void 0}},Ql=class extends Ko{static{o(this,"InvalidArgumentError")}constructor(e){super(1,"commander.invalidArgument",e),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};Jl.CommanderError=Ko;Jl.InvalidArgumentError=Ql});var Yo=y(Zl=>{var{InvalidArgumentError:ES}=va(),Xl=class{static{o(this,"Argument")}constructor(e,t){switch(this.description=t||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,e[0]){case"<":this.required=!0,this._name=e.slice(1,-1);break;case"[":this.required=!1,this._name=e.slice(1,-1);break;default:this.required=!0,this._name=e;break}this._name.endsWith("...")&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_collectValue(e,t){return t===this.defaultValue||!Array.isArray(t)?[e]:(t.push(e),t)}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}argParser(e){return this.parseArg=e,this}choices(e){return this.argChoices=e.slice(),this.parseArg=(t,i)=>{if(!this.argChoices.includes(t))throw new ES(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._collectValue(t,i):t},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}};function TS(r){let e=r.name()+(r.variadic===!0?"...":"");return r.required?"<"+e+">":"["+e+"]"}o(TS,"humanReadableArgName");Zl.Argument=Xl;Zl.humanReadableArgName=TS});var rf=y(tf=>{var{humanReadableArgName:AS}=Yo(),ef=class{static{o(this,"Help")}constructor(){this.helpWidth=void 0,this.minWidthToWrap=40,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}prepareContext(e){this.helpWidth=this.helpWidth??e.helpWidth??80}visibleCommands(e){let t=e.commands.filter(n=>!n._hidden),i=e._getHelpCommand();return i&&!i._hidden&&t.push(i),this.sortSubcommands&&t.sort((n,s)=>n.name().localeCompare(s.name())),t}compareOptions(e,t){let i=o(n=>n.short?n.short.replace(/^-/,""):n.long.replace(/^--/,""),"getSortKey");return i(e).localeCompare(i(t))}visibleOptions(e){let t=e.options.filter(n=>!n.hidden),i=e._getHelpOption();if(i&&!i.hidden){let n=i.short&&e._findOption(i.short),s=i.long&&e._findOption(i.long);!n&&!s?t.push(i):i.long&&!s?t.push(e.createOption(i.long,i.description)):i.short&&!n&&t.push(e.createOption(i.short,i.description))}return this.sortOptions&&t.sort(this.compareOptions),t}visibleGlobalOptions(e){if(!this.showGlobalOptions)return[];let t=[];for(let i=e.parent;i;i=i.parent){let n=i.options.filter(s=>!s.hidden);t.push(...n)}return this.sortOptions&&t.sort(this.compareOptions),t}visibleArguments(e){return e._argsDescription&&e.registeredArguments.forEach(t=>{t.description=t.description||e._argsDescription[t.name()]||""}),e.registeredArguments.find(t=>t.description)?e.registeredArguments:[]}subcommandTerm(e){let t=e.registeredArguments.map(i=>AS(i)).join(" ");return e._name+(e._aliases[0]?"|"+e._aliases[0]:"")+(e.options.length?" [options]":"")+(t?" "+t:"")}optionTerm(e){return e.flags}argumentTerm(e){return e.name()}longestSubcommandTermLength(e,t){return t.visibleCommands(e).reduce((i,n)=>Math.max(i,this.displayWidth(t.styleSubcommandTerm(t.subcommandTerm(n)))),0)}longestOptionTermLength(e,t){return t.visibleOptions(e).reduce((i,n)=>Math.max(i,this.displayWidth(t.styleOptionTerm(t.optionTerm(n)))),0)}longestGlobalOptionTermLength(e,t){return t.visibleGlobalOptions(e).reduce((i,n)=>Math.max(i,this.displayWidth(t.styleOptionTerm(t.optionTerm(n)))),0)}longestArgumentTermLength(e,t){return t.visibleArguments(e).reduce((i,n)=>Math.max(i,this.displayWidth(t.styleArgumentTerm(t.argumentTerm(n)))),0)}commandUsage(e){let t=e._name;e._aliases[0]&&(t=t+"|"+e._aliases[0]);let i="";for(let n=e.parent;n;n=n.parent)i=n.name()+" "+i;return i+t+" "+e.usage()}commandDescription(e){return e.description()}subcommandDescription(e){return e.summary()||e.description()}optionDescription(e){let t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map(i=>JSON.stringify(i)).join(", ")}`),e.defaultValue!==void 0&&(e.required||e.optional||e.isBoolean()&&typeof e.defaultValue=="boolean")&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),e.presetArg!==void 0&&e.optional&&t.push(`preset: ${JSON.stringify(e.presetArg)}`),e.envVar!==void 0&&t.push(`env: ${e.envVar}`),t.length>0){let i=`(${t.join(", ")})`;return e.description?`${e.description} ${i}`:i}return e.description}argumentDescription(e){let t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map(i=>JSON.stringify(i)).join(", ")}`),e.defaultValue!==void 0&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),t.length>0){let i=`(${t.join(", ")})`;return e.description?`${e.description} ${i}`:i}return e.description}formatItemList(e,t,i){return t.length===0?[]:[i.styleTitle(e),...t,""]}groupItems(e,t,i){let n=new Map;return e.forEach(s=>{let a=i(s);n.has(a)||n.set(a,[])}),t.forEach(s=>{let a=i(s);n.has(a)||n.set(a,[]),n.get(a).push(s)}),n}formatHelp(e,t){let i=t.padWidth(e,t),n=t.helpWidth??80;function s(h,p){return t.formatItem(h,i,p,t)}o(s,"callFormatItem");let a=[`${t.styleTitle("Usage:")} ${t.styleUsage(t.commandUsage(e))}`,""],c=t.commandDescription(e);c.length>0&&(a=a.concat([t.boxWrap(t.styleCommandDescription(c),n),""]));let u=t.visibleArguments(e).map(h=>s(t.styleArgumentTerm(t.argumentTerm(h)),t.styleArgumentDescription(t.argumentDescription(h))));if(a=a.concat(this.formatItemList("Arguments:",u,t)),this.groupItems(e.options,t.visibleOptions(e),h=>h.helpGroupHeading??"Options:").forEach((h,p)=>{let g=h.map(S=>s(t.styleOptionTerm(t.optionTerm(S)),t.styleOptionDescription(t.optionDescription(S))));a=a.concat(this.formatItemList(p,g,t))}),t.showGlobalOptions){let h=t.visibleGlobalOptions(e).map(p=>s(t.styleOptionTerm(t.optionTerm(p)),t.styleOptionDescription(t.optionDescription(p))));a=a.concat(this.formatItemList("Global Options:",h,t))}return this.groupItems(e.commands,t.visibleCommands(e),h=>h.helpGroup()||"Commands:").forEach((h,p)=>{let g=h.map(S=>s(t.styleSubcommandTerm(t.subcommandTerm(S)),t.styleSubcommandDescription(t.subcommandDescription(S))));a=a.concat(this.formatItemList(p,g,t))}),a.join(`
`)}displayWidth(e){return F1(e).length}styleTitle(e){return e}styleUsage(e){return e.split(" ").map(t=>t==="[options]"?this.styleOptionText(t):t==="[command]"?this.styleSubcommandText(t):t[0]==="["||t[0]==="<"?this.styleArgumentText(t):this.styleCommandText(t)).join(" ")}styleCommandDescription(e){return this.styleDescriptionText(e)}styleOptionDescription(e){return this.styleDescriptionText(e)}styleSubcommandDescription(e){return this.styleDescriptionText(e)}styleArgumentDescription(e){return this.styleDescriptionText(e)}styleDescriptionText(e){return e}styleOptionTerm(e){return this.styleOptionText(e)}styleSubcommandTerm(e){return e.split(" ").map(t=>t==="[options]"?this.styleOptionText(t):t[0]==="["||t[0]==="<"?this.styleArgumentText(t):this.styleSubcommandText(t)).join(" ")}styleArgumentTerm(e){return this.styleArgumentText(e)}styleOptionText(e){return e}styleArgumentText(e){return e}styleSubcommandText(e){return e}styleCommandText(e){return e}padWidth(e,t){return Math.max(t.longestOptionTermLength(e,t),t.longestGlobalOptionTermLength(e,t),t.longestSubcommandTermLength(e,t),t.longestArgumentTermLength(e,t))}preformatted(e){return/\n[^\S\r\n]/.test(e)}formatItem(e,t,i,n){let a=" ".repeat(2);if(!i)return a+e;let c=e.padEnd(t+e.length-n.displayWidth(e)),u=2,l=(this.helpWidth??80)-t-u-2,h;return l<this.minWidthToWrap||n.preformatted(i)?h=i:h=n.boxWrap(i,l).replace(/\n/g,`
`+" ".repeat(t+u)),a+c+" ".repeat(u)+h.replace(/\n/g,`
${a}`)}boxWrap(e,t){if(t<this.minWidthToWrap)return e;let i=e.split(/\r\n|\n/),n=/[\s]*[^\s]+/g,s=[];return i.forEach(a=>{let c=a.match(n);if(c===null){s.push("");return}let u=[c.shift()],f=this.displayWidth(u[0]);c.forEach(l=>{let h=this.displayWidth(l);if(f+h<=t){u.push(l),f+=h;return}s.push(u.join(""));let p=l.trimStart();u=[p],f=this.displayWidth(p)}),s.push(u.join(""))}),s.join(`
`)}};function F1(r){let e=/\x1b\[\d*(;\d*)*m/g;return r.replace(e,"")}o(F1,"stripColor");tf.Help=ef;tf.stripColor=F1});var of=y(af=>{var{InvalidArgumentError:xS}=va(),nf=class{static{o(this,"Option")}constructor(e,t){this.flags=e,this.description=t||"",this.required=e.includes("<"),this.optional=e.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(e),this.mandatory=!1;let i=OS(e);this.short=i.shortFlag,this.long=i.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0,this.helpGroupHeading=void 0}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}preset(e){return this.presetArg=e,this}conflicts(e){return this.conflictsWith=this.conflictsWith.concat(e),this}implies(e){let t=e;return typeof e=="string"&&(t={[e]:!0}),this.implied=Object.assign(this.implied||{},t),this}env(e){return this.envVar=e,this}argParser(e){return this.parseArg=e,this}makeOptionMandatory(e=!0){return this.mandatory=!!e,this}hideHelp(e=!0){return this.hidden=!!e,this}_collectValue(e,t){return t===this.defaultValue||!Array.isArray(t)?[e]:(t.push(e),t)}choices(e){return this.argChoices=e.slice(),this.parseArg=(t,i)=>{if(!this.argChoices.includes(t))throw new xS(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._collectValue(t,i):t},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.negate?P1(this.name().replace(/^no-/,"")):P1(this.name())}helpGroup(e){return this.helpGroupHeading=e,this}is(e){return this.short===e||this.long===e}isBoolean(){return!this.required&&!this.optional&&!this.negate}},sf=class{static{o(this,"DualOptions")}constructor(e){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,e.forEach(t=>{t.negate?this.negativeOptions.set(t.attributeName(),t):this.positiveOptions.set(t.attributeName(),t)}),this.negativeOptions.forEach((t,i)=>{this.positiveOptions.has(i)&&this.dualOptions.add(i)})}valueFromOption(e,t){let i=t.attributeName();if(!this.dualOptions.has(i))return!0;let n=this.negativeOptions.get(i).presetArg,s=n!==void 0?n:!1;return t.negate===(s===e)}};function P1(r){return r.split("-").reduce((e,t)=>e+t[0].toUpperCase()+t.slice(1))}o(P1,"camelcase");function OS(r){let e,t,i=/^-[^-]$/,n=/^--[^-]/,s=r.split(/[ |,]+/).concat("guard");if(i.test(s[0])&&(e=s.shift()),n.test(s[0])&&(t=s.shift()),!e&&i.test(s[0])&&(e=s.shift()),!e&&n.test(s[0])&&(e=t,t=s.shift()),s[0].startsWith("-")){let a=s[0],c=`option creation failed due to '${a}' in option flags '${r}'`;throw/^-[^-][^-]/.test(a)?new Error(`${c}
- a short flag is a single dash and a single character
  - either use a single dash and a single character (for a short flag)
  - or use a double dash for a long option (and can have two, like '--ws, --workspace')`):i.test(a)?new Error(`${c}
- too many short flags`):n.test(a)?new Error(`${c}
- too many long flags`):new Error(`${c}
- unrecognised flag format`)}if(e===void 0&&t===void 0)throw new Error(`option creation failed due to no flags found in '${r}'.`);return{shortFlag:e,longFlag:t}}o(OS,"splitOptionFlags");af.Option=nf;af.DualOptions=sf});var D1=y(I1=>{function CS(r,e){if(Math.abs(r.length-e.length)>3)return Math.max(r.length,e.length);let t=[];for(let i=0;i<=r.length;i++)t[i]=[i];for(let i=0;i<=e.length;i++)t[0][i]=i;for(let i=1;i<=e.length;i++)for(let n=1;n<=r.length;n++){let s=1;r[n-1]===e[i-1]?s=0:s=1,t[n][i]=Math.min(t[n-1][i]+1,t[n][i-1]+1,t[n-1][i-1]+s),n>1&&i>1&&r[n-1]===e[i-2]&&r[n-2]===e[i-1]&&(t[n][i]=Math.min(t[n][i],t[n-2][i-2]+1))}return t[r.length][e.length]}o(CS,"editDistance");function FS(r,e){if(!e||e.length===0)return"";e=Array.from(new Set(e));let t=r.startsWith("--");t&&(r=r.slice(2),e=e.map(a=>a.slice(2)));let i=[],n=3,s=.4;return e.forEach(a=>{if(a.length<=1)return;let c=CS(r,a),u=Math.max(r.length,a.length);(u-c)/u>s&&(c<n?(n=c,i=[a]):c===n&&i.push(a))}),i.sort((a,c)=>a.localeCompare(c)),t&&(i=i.map(a=>`--${a}`)),i.length>1?`
(Did you mean one of ${i.join(", ")}?)`:i.length===1?`
(Did you mean ${i[0]}?)`:""}o(FS,"suggestSimilar");I1.suggestSimilar=FS});var j1=y(hf=>{var PS=require("node:events").EventEmitter,cf=require("node:child_process"),Ni=require("node:path"),Qo=require("node:fs"),Ve=require("node:process"),{Argument:IS,humanReadableArgName:DS}=Yo(),{CommanderError:uf}=va(),{Help:RS,stripColor:NS}=rf(),{Option:R1,DualOptions:kS}=of(),{suggestSimilar:N1}=D1(),lf=class r extends PS{static{o(this,"Command")}constructor(e){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!1,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=e||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._savedState=null,this._outputConfiguration={writeOut:o(t=>Ve.stdout.write(t),"writeOut"),writeErr:o(t=>Ve.stderr.write(t),"writeErr"),outputError:o((t,i)=>i(t),"outputError"),getOutHelpWidth:o(()=>Ve.stdout.isTTY?Ve.stdout.columns:void 0,"getOutHelpWidth"),getErrHelpWidth:o(()=>Ve.stderr.isTTY?Ve.stderr.columns:void 0,"getErrHelpWidth"),getOutHasColors:o(()=>ff()??(Ve.stdout.isTTY&&Ve.stdout.hasColors?.()),"getOutHasColors"),getErrHasColors:o(()=>ff()??(Ve.stderr.isTTY&&Ve.stderr.hasColors?.()),"getErrHasColors"),stripColor:o(t=>NS(t),"stripColor")},this._hidden=!1,this._helpOption=void 0,this._addImplicitHelpCommand=void 0,this._helpCommand=void 0,this._helpConfiguration={},this._helpGroupHeading=void 0,this._defaultCommandGroup=void 0,this._defaultOptionGroup=void 0}copyInheritedSettings(e){return this._outputConfiguration=e._outputConfiguration,this._helpOption=e._helpOption,this._helpCommand=e._helpCommand,this._helpConfiguration=e._helpConfiguration,this._exitCallback=e._exitCallback,this._storeOptionsAsProperties=e._storeOptionsAsProperties,this._combineFlagAndOptionalValue=e._combineFlagAndOptionalValue,this._allowExcessArguments=e._allowExcessArguments,this._enablePositionalOptions=e._enablePositionalOptions,this._showHelpAfterError=e._showHelpAfterError,this._showSuggestionAfterError=e._showSuggestionAfterError,this}_getCommandAndAncestors(){let e=[];for(let t=this;t;t=t.parent)e.push(t);return e}command(e,t,i){let n=t,s=i;typeof n=="object"&&n!==null&&(s=n,n=null),s=s||{};let[,a,c]=e.match(/([^ ]+) *(.*)/),u=this.createCommand(a);return n&&(u.description(n),u._executableHandler=!0),s.isDefault&&(this._defaultCommandName=u._name),u._hidden=!!(s.noHelp||s.hidden),u._executableFile=s.executableFile||null,c&&u.arguments(c),this._registerCommand(u),u.parent=this,u.copyInheritedSettings(this),n?this:u}createCommand(e){return new r(e)}createHelp(){return Object.assign(new RS,this.configureHelp())}configureHelp(e){return e===void 0?this._helpConfiguration:(this._helpConfiguration=e,this)}configureOutput(e){return e===void 0?this._outputConfiguration:(this._outputConfiguration={...this._outputConfiguration,...e},this)}showHelpAfterError(e=!0){return typeof e!="string"&&(e=!!e),this._showHelpAfterError=e,this}showSuggestionAfterError(e=!0){return this._showSuggestionAfterError=!!e,this}addCommand(e,t){if(!e._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);return t=t||{},t.isDefault&&(this._defaultCommandName=e._name),(t.noHelp||t.hidden)&&(e._hidden=!0),this._registerCommand(e),e.parent=this,e._checkForBrokenPassThrough(),this}createArgument(e,t){return new IS(e,t)}argument(e,t,i,n){let s=this.createArgument(e,t);return typeof i=="function"?s.default(n).argParser(i):s.default(i),this.addArgument(s),this}arguments(e){return e.trim().split(/ +/).forEach(t=>{this.argument(t)}),this}addArgument(e){let t=this.registeredArguments.slice(-1)[0];if(t?.variadic)throw new Error(`only the last argument can be variadic '${t.name()}'`);if(e.required&&e.defaultValue!==void 0&&e.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${e.name()}'`);return this.registeredArguments.push(e),this}helpCommand(e,t){if(typeof e=="boolean")return this._addImplicitHelpCommand=e,e&&this._defaultCommandGroup&&this._initCommandGroup(this._getHelpCommand()),this;let i=e??"help [command]",[,n,s]=i.match(/([^ ]+) *(.*)/),a=t??"display help for command",c=this.createCommand(n);return c.helpOption(!1),s&&c.arguments(s),a&&c.description(a),this._addImplicitHelpCommand=!0,this._helpCommand=c,(e||t)&&this._initCommandGroup(c),this}addHelpCommand(e,t){return typeof e!="object"?(this.helpCommand(e,t),this):(this._addImplicitHelpCommand=!0,this._helpCommand=e,this._initCommandGroup(e),this)}_getHelpCommand(){return this._addImplicitHelpCommand??(this.commands.length&&!this._actionHandler&&!this._findCommand("help"))?(this._helpCommand===void 0&&this.helpCommand(void 0,void 0),this._helpCommand):null}hook(e,t){let i=["preSubcommand","preAction","postAction"];if(!i.includes(e))throw new Error(`Unexpected value for event passed to hook : '${e}'.
Expecting one of '${i.join("', '")}'`);return this._lifeCycleHooks[e]?this._lifeCycleHooks[e].push(t):this._lifeCycleHooks[e]=[t],this}exitOverride(e){return e?this._exitCallback=e:this._exitCallback=t=>{if(t.code!=="commander.executeSubCommandAsync")throw t},this}_exit(e,t,i){this._exitCallback&&this._exitCallback(new uf(e,t,i)),Ve.exit(e)}action(e){let t=o(i=>{let n=this.registeredArguments.length,s=i.slice(0,n);return this._storeOptionsAsProperties?s[n]=this:s[n]=this.opts(),s.push(this),e.apply(this,s)},"listener");return this._actionHandler=t,this}createOption(e,t){return new R1(e,t)}_callParseArg(e,t,i,n){try{return e.parseArg(t,i)}catch(s){if(s.code==="commander.invalidArgument"){let a=`${n} ${s.message}`;this.error(a,{exitCode:s.exitCode,code:s.code})}throw s}}_registerOption(e){let t=e.short&&this._findOption(e.short)||e.long&&this._findOption(e.long);if(t){let i=e.long&&this._findOption(e.long)?e.long:e.short;throw new Error(`Cannot add option '${e.flags}'${this._name&&` to command '${this._name}'`} due to conflicting flag '${i}'
-  already used by option '${t.flags}'`)}this._initOptionGroup(e),this.options.push(e)}_registerCommand(e){let t=o(n=>[n.name()].concat(n.aliases()),"knownBy"),i=t(e).find(n=>this._findCommand(n));if(i){let n=t(this._findCommand(i)).join("|"),s=t(e).join("|");throw new Error(`cannot add command '${s}' as already have command '${n}'`)}this._initCommandGroup(e),this.commands.push(e)}addOption(e){this._registerOption(e);let t=e.name(),i=e.attributeName();if(e.negate){let s=e.long.replace(/^--no-/,"--");this._findOption(s)||this.setOptionValueWithSource(i,e.defaultValue===void 0?!0:e.defaultValue,"default")}else e.defaultValue!==void 0&&this.setOptionValueWithSource(i,e.defaultValue,"default");let n=o((s,a,c)=>{s==null&&e.presetArg!==void 0&&(s=e.presetArg);let u=this.getOptionValue(i);s!==null&&e.parseArg?s=this._callParseArg(e,s,u,a):s!==null&&e.variadic&&(s=e._collectValue(s,u)),s==null&&(e.negate?s=!1:e.isBoolean()||e.optional?s=!0:s=""),this.setOptionValueWithSource(i,s,c)},"handleOptionValue");return this.on("option:"+t,s=>{let a=`error: option '${e.flags}' argument '${s}' is invalid.`;n(s,a,"cli")}),e.envVar&&this.on("optionEnv:"+t,s=>{let a=`error: option '${e.flags}' value '${s}' from env '${e.envVar}' is invalid.`;n(s,a,"env")}),this}_optionEx(e,t,i,n,s){if(typeof t=="object"&&t instanceof R1)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");let a=this.createOption(t,i);if(a.makeOptionMandatory(!!e.mandatory),typeof n=="function")a.default(s).argParser(n);else if(n instanceof RegExp){let c=n;n=o((u,f)=>{let l=c.exec(u);return l?l[0]:f},"fn"),a.default(s).argParser(n)}else a.default(n);return this.addOption(a)}option(e,t,i,n){return this._optionEx({},e,t,i,n)}requiredOption(e,t,i,n){return this._optionEx({mandatory:!0},e,t,i,n)}combineFlagAndOptionalValue(e=!0){return this._combineFlagAndOptionalValue=!!e,this}allowUnknownOption(e=!0){return this._allowUnknownOption=!!e,this}allowExcessArguments(e=!0){return this._allowExcessArguments=!!e,this}enablePositionalOptions(e=!0){return this._enablePositionalOptions=!!e,this}passThroughOptions(e=!0){return this._passThroughOptions=!!e,this._checkForBrokenPassThrough(),this}_checkForBrokenPassThrough(){if(this.parent&&this._passThroughOptions&&!this.parent._enablePositionalOptions)throw new Error(`passThroughOptions cannot be used for '${this._name}' without turning on enablePositionalOptions for parent command(s)`)}storeOptionsAsProperties(e=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");if(Object.keys(this._optionValues).length)throw new Error("call .storeOptionsAsProperties() before setting option values");return this._storeOptionsAsProperties=!!e,this}getOptionValue(e){return this._storeOptionsAsProperties?this[e]:this._optionValues[e]}setOptionValue(e,t){return this.setOptionValueWithSource(e,t,void 0)}setOptionValueWithSource(e,t,i){return this._storeOptionsAsProperties?this[e]=t:this._optionValues[e]=t,this._optionValueSources[e]=i,this}getOptionValueSource(e){return this._optionValueSources[e]}getOptionValueSourceWithGlobals(e){let t;return this._getCommandAndAncestors().forEach(i=>{i.getOptionValueSource(e)!==void 0&&(t=i.getOptionValueSource(e))}),t}_prepareUserArgs(e,t){if(e!==void 0&&!Array.isArray(e))throw new Error("first parameter to parse must be array or undefined");if(t=t||{},e===void 0&&t.from===void 0){Ve.versions?.electron&&(t.from="electron");let n=Ve.execArgv??[];(n.includes("-e")||n.includes("--eval")||n.includes("-p")||n.includes("--print"))&&(t.from="eval")}e===void 0&&(e=Ve.argv),this.rawArgs=e.slice();let i;switch(t.from){case void 0:case"node":this._scriptPath=e[1],i=e.slice(2);break;case"electron":Ve.defaultApp?(this._scriptPath=e[1],i=e.slice(2)):i=e.slice(1);break;case"user":i=e.slice(0);break;case"eval":i=e.slice(1);break;default:throw new Error(`unexpected parse option { from: '${t.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",i}parse(e,t){this._prepareForParse();let i=this._prepareUserArgs(e,t);return this._parseCommand([],i),this}async parseAsync(e,t){this._prepareForParse();let i=this._prepareUserArgs(e,t);return await this._parseCommand([],i),this}_prepareForParse(){this._savedState===null?this.saveStateBeforeParse():this.restoreStateBeforeParse()}saveStateBeforeParse(){this._savedState={_name:this._name,_optionValues:{...this._optionValues},_optionValueSources:{...this._optionValueSources}}}restoreStateBeforeParse(){if(this._storeOptionsAsProperties)throw new Error(`Can not call parse again when storeOptionsAsProperties is true.
- either make a new Command for each call to parse, or stop storing options as properties`);this._name=this._savedState._name,this._scriptPath=null,this.rawArgs=[],this._optionValues={...this._savedState._optionValues},this._optionValueSources={...this._savedState._optionValueSources},this.args=[],this.processedArgs=[]}_checkForMissingExecutable(e,t,i){if(Qo.existsSync(e))return;let n=t?`searched for local subcommand relative to directory '${t}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",s=`'${e}' does not exist
 - if '${i}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${n}`;throw new Error(s)}_executeSubCommand(e,t){t=t.slice();let i=!1,n=[".js",".ts",".tsx",".mjs",".cjs"];function s(l,h){let p=Ni.resolve(l,h);if(Qo.existsSync(p))return p;if(n.includes(Ni.extname(h)))return;let g=n.find(S=>Qo.existsSync(`${p}${S}`));if(g)return`${p}${g}`}o(s,"findFile"),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let a=e._executableFile||`${this._name}-${e._name}`,c=this._executableDir||"";if(this._scriptPath){let l;try{l=Qo.realpathSync(this._scriptPath)}catch{l=this._scriptPath}c=Ni.resolve(Ni.dirname(l),c)}if(c){let l=s(c,a);if(!l&&!e._executableFile&&this._scriptPath){let h=Ni.basename(this._scriptPath,Ni.extname(this._scriptPath));h!==this._name&&(l=s(c,`${h}-${e._name}`))}a=l||a}i=n.includes(Ni.extname(a));let u;Ve.platform!=="win32"?i?(t.unshift(a),t=k1(Ve.execArgv).concat(t),u=cf.spawn(Ve.argv[0],t,{stdio:"inherit"})):u=cf.spawn(a,t,{stdio:"inherit"}):(this._checkForMissingExecutable(a,c,e._name),t.unshift(a),t=k1(Ve.execArgv).concat(t),u=cf.spawn(Ve.execPath,t,{stdio:"inherit"})),u.killed||["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach(h=>{Ve.on(h,()=>{u.killed===!1&&u.exitCode===null&&u.kill(h)})});let f=this._exitCallback;u.on("close",l=>{l=l??1,f?f(new uf(l,"commander.executeSubCommandAsync","(close)")):Ve.exit(l)}),u.on("error",l=>{if(l.code==="ENOENT")this._checkForMissingExecutable(a,c,e._name);else if(l.code==="EACCES")throw new Error(`'${a}' not executable`);if(!f)Ve.exit(1);else{let h=new uf(1,"commander.executeSubCommandAsync","(error)");h.nestedError=l,f(h)}}),this.runningCommand=u}_dispatchSubcommand(e,t,i){let n=this._findCommand(e);n||this.help({error:!0}),n._prepareForParse();let s;return s=this._chainOrCallSubCommandHook(s,n,"preSubcommand"),s=this._chainOrCall(s,()=>{if(n._executableHandler)this._executeSubCommand(n,t.concat(i));else return n._parseCommand(t,i)}),s}_dispatchHelpCommand(e){e||this.help();let t=this._findCommand(e);return t&&!t._executableHandler&&t.help(),this._dispatchSubcommand(e,[],[this._getHelpOption()?.long??this._getHelpOption()?.short??"--help"])}_checkNumberOfArguments(){this.registeredArguments.forEach((e,t)=>{e.required&&this.args[t]==null&&this.missingArgument(e.name())}),!(this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic)&&this.args.length>this.registeredArguments.length&&this._excessArguments(this.args)}_processArguments(){let e=o((i,n,s)=>{let a=n;if(n!==null&&i.parseArg){let c=`error: command-argument value '${n}' is invalid for argument '${i.name()}'.`;a=this._callParseArg(i,n,s,c)}return a},"myParseArg");this._checkNumberOfArguments();let t=[];this.registeredArguments.forEach((i,n)=>{let s=i.defaultValue;i.variadic?n<this.args.length?(s=this.args.slice(n),i.parseArg&&(s=s.reduce((a,c)=>e(i,c,a),i.defaultValue))):s===void 0&&(s=[]):n<this.args.length&&(s=this.args[n],i.parseArg&&(s=e(i,s,i.defaultValue))),t[n]=s}),this.processedArgs=t}_chainOrCall(e,t){return e?.then&&typeof e.then=="function"?e.then(()=>t()):t()}_chainOrCallHooks(e,t){let i=e,n=[];return this._getCommandAndAncestors().reverse().filter(s=>s._lifeCycleHooks[t]!==void 0).forEach(s=>{s._lifeCycleHooks[t].forEach(a=>{n.push({hookedCommand:s,callback:a})})}),t==="postAction"&&n.reverse(),n.forEach(s=>{i=this._chainOrCall(i,()=>s.callback(s.hookedCommand,this))}),i}_chainOrCallSubCommandHook(e,t,i){let n=e;return this._lifeCycleHooks[i]!==void 0&&this._lifeCycleHooks[i].forEach(s=>{n=this._chainOrCall(n,()=>s(this,t))}),n}_parseCommand(e,t){let i=this.parseOptions(t);if(this._parseOptionsEnv(),this._parseOptionsImplied(),e=e.concat(i.operands),t=i.unknown,this.args=e.concat(t),e&&this._findCommand(e[0]))return this._dispatchSubcommand(e[0],e.slice(1),t);if(this._getHelpCommand()&&e[0]===this._getHelpCommand().name())return this._dispatchHelpCommand(e[1]);if(this._defaultCommandName)return this._outputHelpIfRequested(t),this._dispatchSubcommand(this._defaultCommandName,e,t);this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName&&this.help({error:!0}),this._outputHelpIfRequested(i.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let n=o(()=>{i.unknown.length>0&&this.unknownOption(i.unknown[0])},"checkForUnknownOptions"),s=`command:${this.name()}`;if(this._actionHandler){n(),this._processArguments();let a;return a=this._chainOrCallHooks(a,"preAction"),a=this._chainOrCall(a,()=>this._actionHandler(this.processedArgs)),this.parent&&(a=this._chainOrCall(a,()=>{this.parent.emit(s,e,t)})),a=this._chainOrCallHooks(a,"postAction"),a}if(this.parent?.listenerCount(s))n(),this._processArguments(),this.parent.emit(s,e,t);else if(e.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",e,t);this.listenerCount("command:*")?this.emit("command:*",e,t):this.commands.length?this.unknownCommand():(n(),this._processArguments())}else this.commands.length?(n(),this.help({error:!0})):(n(),this._processArguments())}_findCommand(e){if(e)return this.commands.find(t=>t._name===e||t._aliases.includes(e))}_findOption(e){return this.options.find(t=>t.is(e))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach(e=>{e.options.forEach(t=>{t.mandatory&&e.getOptionValue(t.attributeName())===void 0&&e.missingMandatoryOptionValue(t)})})}_checkForConflictingLocalOptions(){let e=this.options.filter(i=>{let n=i.attributeName();return this.getOptionValue(n)===void 0?!1:this.getOptionValueSource(n)!=="default"});e.filter(i=>i.conflictsWith.length>0).forEach(i=>{let n=e.find(s=>i.conflictsWith.includes(s.attributeName()));n&&this._conflictingOption(i,n)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach(e=>{e._checkForConflictingLocalOptions()})}parseOptions(e){let t=[],i=[],n=t;function s(l){return l.length>1&&l[0]==="-"}o(s,"maybeOption");let a=o(l=>/^-(\d+|\d*\.\d+)(e[+-]?\d+)?$/.test(l)?!this._getCommandAndAncestors().some(h=>h.options.map(p=>p.short).some(p=>/^-\d$/.test(p))):!1,"negativeNumberArg"),c=null,u=null,f=0;for(;f<e.length||u;){let l=u??e[f++];if(u=null,l==="--"){n===i&&n.push(l),n.push(...e.slice(f));break}if(c&&(!s(l)||a(l))){this.emit(`option:${c.name()}`,l);continue}if(c=null,s(l)){let h=this._findOption(l);if(h){if(h.required){let p=e[f++];p===void 0&&this.optionMissingArgument(h),this.emit(`option:${h.name()}`,p)}else if(h.optional){let p=null;f<e.length&&(!s(e[f])||a(e[f]))&&(p=e[f++]),this.emit(`option:${h.name()}`,p)}else this.emit(`option:${h.name()}`);c=h.variadic?h:null;continue}}if(l.length>2&&l[0]==="-"&&l[1]!=="-"){let h=this._findOption(`-${l[1]}`);if(h){h.required||h.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${h.name()}`,l.slice(2)):(this.emit(`option:${h.name()}`),u=`-${l.slice(2)}`);continue}}if(/^--[^=]+=/.test(l)){let h=l.indexOf("="),p=this._findOption(l.slice(0,h));if(p&&(p.required||p.optional)){this.emit(`option:${p.name()}`,l.slice(h+1));continue}}if(n===t&&s(l)&&!(this.commands.length===0&&a(l))&&(n=i),(this._enablePositionalOptions||this._passThroughOptions)&&t.length===0&&i.length===0){if(this._findCommand(l)){t.push(l),i.push(...e.slice(f));break}else if(this._getHelpCommand()&&l===this._getHelpCommand().name()){t.push(l,...e.slice(f));break}else if(this._defaultCommandName){i.push(l,...e.slice(f));break}}if(this._passThroughOptions){n.push(l,...e.slice(f));break}n.push(l)}return{operands:t,unknown:i}}opts(){if(this._storeOptionsAsProperties){let e={},t=this.options.length;for(let i=0;i<t;i++){let n=this.options[i].attributeName();e[n]=n===this._versionOptionName?this._version:this[n]}return e}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((e,t)=>Object.assign(e,t.opts()),{})}error(e,t){this._outputConfiguration.outputError(`${e}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError=="string"?this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`):this._showHelpAfterError&&(this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0}));let i=t||{},n=i.exitCode||1,s=i.code||"commander.error";this._exit(n,s,e)}_parseOptionsEnv(){this.options.forEach(e=>{if(e.envVar&&e.envVar in Ve.env){let t=e.attributeName();(this.getOptionValue(t)===void 0||["default","config","env"].includes(this.getOptionValueSource(t)))&&(e.required||e.optional?this.emit(`optionEnv:${e.name()}`,Ve.env[e.envVar]):this.emit(`optionEnv:${e.name()}`))}})}_parseOptionsImplied(){let e=new kS(this.options),t=o(i=>this.getOptionValue(i)!==void 0&&!["default","implied"].includes(this.getOptionValueSource(i)),"hasCustomOptionValue");this.options.filter(i=>i.implied!==void 0&&t(i.attributeName())&&e.valueFromOption(this.getOptionValue(i.attributeName()),i)).forEach(i=>{Object.keys(i.implied).filter(n=>!t(n)).forEach(n=>{this.setOptionValueWithSource(n,i.implied[n],"implied")})})}missingArgument(e){let t=`error: missing required argument '${e}'`;this.error(t,{code:"commander.missingArgument"})}optionMissingArgument(e){let t=`error: option '${e.flags}' argument missing`;this.error(t,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(e){let t=`error: required option '${e.flags}' not specified`;this.error(t,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(e,t){let i=o(a=>{let c=a.attributeName(),u=this.getOptionValue(c),f=this.options.find(h=>h.negate&&c===h.attributeName()),l=this.options.find(h=>!h.negate&&c===h.attributeName());return f&&(f.presetArg===void 0&&u===!1||f.presetArg!==void 0&&u===f.presetArg)?f:l||a},"findBestOptionFromValue"),n=o(a=>{let c=i(a),u=c.attributeName();return this.getOptionValueSource(u)==="env"?`environment variable '${c.envVar}'`:`option '${c.flags}'`},"getErrorMessage"),s=`error: ${n(e)} cannot be used with ${n(t)}`;this.error(s,{code:"commander.conflictingOption"})}unknownOption(e){if(this._allowUnknownOption)return;let t="";if(e.startsWith("--")&&this._showSuggestionAfterError){let n=[],s=this;do{let a=s.createHelp().visibleOptions(s).filter(c=>c.long).map(c=>c.long);n=n.concat(a),s=s.parent}while(s&&!s._enablePositionalOptions);t=N1(e,n)}let i=`error: unknown option '${e}'${t}`;this.error(i,{code:"commander.unknownOption"})}_excessArguments(e){if(this._allowExcessArguments)return;let t=this.registeredArguments.length,i=t===1?"":"s",s=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${t} argument${i} but got ${e.length}.`;this.error(s,{code:"commander.excessArguments"})}unknownCommand(){let e=this.args[0],t="";if(this._showSuggestionAfterError){let n=[];this.createHelp().visibleCommands(this).forEach(s=>{n.push(s.name()),s.alias()&&n.push(s.alias())}),t=N1(e,n)}let i=`error: unknown command '${e}'${t}`;this.error(i,{code:"commander.unknownCommand"})}version(e,t,i){if(e===void 0)return this._version;this._version=e,t=t||"-V, --version",i=i||"output the version number";let n=this.createOption(t,i);return this._versionOptionName=n.attributeName(),this._registerOption(n),this.on("option:"+n.name(),()=>{this._outputConfiguration.writeOut(`${e}
`),this._exit(0,"commander.version",e)}),this}description(e,t){return e===void 0&&t===void 0?this._description:(this._description=e,t&&(this._argsDescription=t),this)}summary(e){return e===void 0?this._summary:(this._summary=e,this)}alias(e){if(e===void 0)return this._aliases[0];let t=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler&&(t=this.commands[this.commands.length-1]),e===t._name)throw new Error("Command alias can't be the same as its name");let i=this.parent?._findCommand(e);if(i){let n=[i.name()].concat(i.aliases()).join("|");throw new Error(`cannot add alias '${e}' to command '${this.name()}' as already have command '${n}'`)}return t._aliases.push(e),this}aliases(e){return e===void 0?this._aliases:(e.forEach(t=>this.alias(t)),this)}usage(e){if(e===void 0){if(this._usage)return this._usage;let t=this.registeredArguments.map(i=>DS(i));return[].concat(this.options.length||this._helpOption!==null?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?t:[]).join(" ")}return this._usage=e,this}name(e){return e===void 0?this._name:(this._name=e,this)}helpGroup(e){return e===void 0?this._helpGroupHeading??"":(this._helpGroupHeading=e,this)}commandsGroup(e){return e===void 0?this._defaultCommandGroup??"":(this._defaultCommandGroup=e,this)}optionsGroup(e){return e===void 0?this._defaultOptionGroup??"":(this._defaultOptionGroup=e,this)}_initOptionGroup(e){this._defaultOptionGroup&&!e.helpGroupHeading&&e.helpGroup(this._defaultOptionGroup)}_initCommandGroup(e){this._defaultCommandGroup&&!e.helpGroup()&&e.helpGroup(this._defaultCommandGroup)}nameFromFilename(e){return this._name=Ni.basename(e,Ni.extname(e)),this}executableDir(e){return e===void 0?this._executableDir:(this._executableDir=e,this)}helpInformation(e){let t=this.createHelp(),i=this._getOutputContext(e);t.prepareContext({error:i.error,helpWidth:i.helpWidth,outputHasColors:i.hasColors});let n=t.formatHelp(this,t);return i.hasColors?n:this._outputConfiguration.stripColor(n)}_getOutputContext(e){e=e||{};let t=!!e.error,i,n,s;return t?(i=o(c=>this._outputConfiguration.writeErr(c),"baseWrite"),n=this._outputConfiguration.getErrHasColors(),s=this._outputConfiguration.getErrHelpWidth()):(i=o(c=>this._outputConfiguration.writeOut(c),"baseWrite"),n=this._outputConfiguration.getOutHasColors(),s=this._outputConfiguration.getOutHelpWidth()),{error:t,write:o(c=>(n||(c=this._outputConfiguration.stripColor(c)),i(c)),"write"),hasColors:n,helpWidth:s}}outputHelp(e){let t;typeof e=="function"&&(t=e,e=void 0);let i=this._getOutputContext(e),n={error:i.error,write:i.write,command:this};this._getCommandAndAncestors().reverse().forEach(a=>a.emit("beforeAllHelp",n)),this.emit("beforeHelp",n);let s=this.helpInformation({error:i.error});if(t&&(s=t(s),typeof s!="string"&&!Buffer.isBuffer(s)))throw new Error("outputHelp callback must return a string or a Buffer");i.write(s),this._getHelpOption()?.long&&this.emit(this._getHelpOption().long),this.emit("afterHelp",n),this._getCommandAndAncestors().forEach(a=>a.emit("afterAllHelp",n))}helpOption(e,t){return typeof e=="boolean"?(e?(this._helpOption===null&&(this._helpOption=void 0),this._defaultOptionGroup&&this._initOptionGroup(this._getHelpOption())):this._helpOption=null,this):(this._helpOption=this.createOption(e??"-h, --help",t??"display help for command"),(e||t)&&this._initOptionGroup(this._helpOption),this)}_getHelpOption(){return this._helpOption===void 0&&this.helpOption(void 0,void 0),this._helpOption}addHelpOption(e){return this._helpOption=e,this._initOptionGroup(e),this}help(e){this.outputHelp(e);let t=Number(Ve.exitCode??0);t===0&&e&&typeof e!="function"&&e.error&&(t=1),this._exit(t,"commander.help","(outputHelp)")}addHelpText(e,t){let i=["beforeAll","before","after","afterAll"];if(!i.includes(e))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${i.join("', '")}'`);let n=`${e}Help`;return this.on(n,s=>{let a;typeof t=="function"?a=t({error:s.error,command:s.command}):a=t,a&&s.write(`${a}
`)}),this}_outputHelpIfRequested(e){let t=this._getHelpOption();t&&e.find(n=>t.is(n))&&(this.outputHelp(),this._exit(0,"commander.helpDisplayed","(outputHelp)"))}};function k1(r){return r.map(e=>{if(!e.startsWith("--inspect"))return e;let t,i="127.0.0.1",n="9229",s;return(s=e.match(/^(--inspect(-brk)?)$/))!==null?t=s[1]:(s=e.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null?(t=s[1],/^\d+$/.test(s[3])?n=s[3]:i=s[3]):(s=e.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null&&(t=s[1],i=s[3],n=s[4]),t&&n!=="0"?`${t}=${i}:${parseInt(n)+1}`:e})}o(k1,"incrementNodeInspectorPort");function ff(){if(Ve.env.NO_COLOR||Ve.env.FORCE_COLOR==="0"||Ve.env.FORCE_COLOR==="false")return!1;if(Ve.env.FORCE_COLOR||Ve.env.CLICOLOR_FORCE!==void 0)return!0}o(ff,"useColor");hf.Command=lf;hf.useColor=ff});var q1=y(Er=>{var{Argument:M1}=Yo(),{Command:df}=j1(),{CommanderError:jS,InvalidArgumentError:L1}=va(),{Help:MS}=rf(),{Option:V1}=of();Er.program=new df;Er.createCommand=r=>new df(r);Er.createOption=(r,e)=>new V1(r,e);Er.createArgument=(r,e)=>new M1(r,e);Er.Command=df;Er.Option=V1;Er.Argument=M1;Er.Help=MS;Er.CommanderError=jS;Er.InvalidArgumentError=L1;Er.InvalidOptionArgumentError=L1});var pf=y(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.AssetClass=void 0;var U1;(function(r){r.AREA="ems__Area",r.TASK="ems__Task",r.PROJECT="ems__Project",r.MEETING="ems__Meeting",r.INITIATIVE="ems__Initiative",r.TASK_PROTOTYPE="ems__TaskPrototype",r.MEETING_PROTOTYPE="ems__MeetingPrototype",r.EVENT_PROTOTYPE="exo__EventPrototype",r.EVENT="exo__Event",r.DAILY_NOTE="pn__DailyNote",r.CONCEPT="ims__Concept",r.SESSION_START_EVENT="ems__SessionStartEvent",r.SESSION_END_EVENT="ems__SessionEndEvent"})(U1||(Jo.AssetClass=U1={}))});var mf=y(Xo=>{"use strict";Object.defineProperty(Xo,"__esModule",{value:!0});Xo.EffortStatus=void 0;var $1;(function(r){r.DRAFT="ems__EffortStatusDraft",r.BACKLOG="ems__EffortStatusBacklog",r.ANALYSIS="ems__EffortStatusAnalysis",r.TODO="ems__EffortStatusToDo",r.DOING="ems__EffortStatusDoing",r.DONE="ems__EffortStatusDone",r.TRASHED="ems__EffortStatusTrashed"})($1||(Xo.EffortStatus=$1={}))});var W1=y(G1=>{"use strict";Object.defineProperty(G1,"__esModule",{value:!0})});var z1=y(H1=>{"use strict";Object.defineProperty(H1,"__esModule",{value:!0})});var Y1=y(K1=>{"use strict";Object.defineProperty(K1,"__esModule",{value:!0})});var J1=y(Q1=>{"use strict";Object.defineProperty(Q1,"__esModule",{value:!0})});var xt=y(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.IRI=void 0;var gf=class r{static{o(this,"IRI")}constructor(e){let t=e.trim();if(t.length===0)throw new Error("IRI cannot be empty");if(!r.isValidIRI(t))throw new Error("Invalid IRI format");this._value=t}get value(){return this._value}equals(e){return this._value===e._value}toString(){return this._value}static isValidIRI(e){if(!e||e.trim().length===0||/\s/.test(e)||!/^[a-z][a-z0-9+.-]*:/i.test(e))return!1;let i=["http","https","ftp","ftps","file","mailto","tel","data","ws","wss","urn","obsidian"],n=e.match(/^([a-z][a-z0-9+.-]*?):/i);if(n){let s=n[1].toLowerCase();if(!i.includes(s))return!1}try{return new URL(e),!0}catch{return/^urn:[a-z0-9][a-z0-9-]{0,31}:[^\s]+$/i.test(e)}}};Zo.IRI=gf});var Ht=y(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.Literal=void 0;var yf=class{static{o(this,"Literal")}constructor(e,t,i){if(e.length===0)throw new Error("Literal value cannot be empty");if(t&&i)throw new Error("Literal cannot have both datatype and language tag");this._value=e,this._datatype=t,this._language=i?i.toLowerCase():void 0}get value(){return this._value}get datatype(){return this._datatype}get language(){return this._language}equals(e){if(this._value!==e._value)return!1;if(this._datatype&&e._datatype){if(!this._datatype.equals(e._datatype))return!1}else if(this._datatype||e._datatype)return!1;return this._language===e._language}toString(){let e=`"${this._value}"`;return this._datatype?e+=`^^<${this._datatype.value}>`:this._language&&(e+=`@${this._language}`),e}};ec.Literal=yf});var pi=y(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.BlankNode=void 0;var tc=class r{static{o(this,"BlankNode")}constructor(e){let t=e.trim();if(t.length===0)throw new Error("BlankNode id cannot be empty");this._id=t}get id(){return this._id}equals(e){return this._id===e._id}toString(){return`_:${this._id}`}static generateId(){return`b${++r.counter}`}static create(){return new r(r.generateId())}};rc.BlankNode=tc;tc.counter=0});var ki=y(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.Namespace=void 0;var X1=xt(),zt=class{static{o(this,"Namespace")}constructor(e,t){if(e.trim().length===0)throw new Error("Namespace prefix cannot be empty");this._prefix=e,this._iri=new X1.IRI(t)}get prefix(){return this._prefix}get iri(){return this._iri}term(e){return new X1.IRI(`${this._iri.value}${e}`)}expand(e){let t=e.split(":");if(t.length!==2)return null;let[i,n]=t;return i!==this._prefix?null:this.term(n)}};ic.Namespace=zt;zt.RDF=new zt("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");zt.RDFS=new zt("rdfs","http://www.w3.org/2000/01/rdf-schema#");zt.OWL=new zt("owl","http://www.w3.org/2002/07/owl#");zt.XSD=new zt("xsd","http://www.w3.org/2001/XMLSchema#");zt.EXO=new zt("exo","https://exocortex.my/ontology/exo#");zt.EMS=new zt("ems","https://exocortex.my/ontology/ems#")});var Dn=y(nc=>{"use strict";Object.defineProperty(nc,"__esModule",{value:!0});nc.Triple=void 0;var _f=xt(),vf=Ht(),Sf=pi(),bf=class{static{o(this,"Triple")}constructor(e,t,i){this._subject=e,this._predicate=t,this._object=i}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}equals(e){return!(!this.equalsNode(this._subject,e._subject)||!this._predicate.equals(e._predicate)||!this.equalsNode(this._object,e._object))}equalsNode(e,t){return e instanceof _f.IRI&&t instanceof _f.IRI||e instanceof Sf.BlankNode&&t instanceof Sf.BlankNode||e instanceof vf.Literal&&t instanceof vf.Literal?e.equals(t):!1}toString(){let e=this.nodeToString(this._subject),t=`<${this._predicate.value}>`,i=this.nodeToString(this._object);return`${e} ${t} ${i} .`}nodeToString(e){return e instanceof _f.IRI?`<${e.value}>`:e instanceof Sf.BlankNode||e instanceof vf.Literal?e.toString():""}};nc.Triple=bf});var Z1=y(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.Triple=Tr.Namespace=Tr.BlankNode=Tr.Literal=Tr.IRI=void 0;var LS=xt();Object.defineProperty(Tr,"IRI",{enumerable:!0,get:o(function(){return LS.IRI},"get")});var VS=Ht();Object.defineProperty(Tr,"Literal",{enumerable:!0,get:o(function(){return VS.Literal},"get")});var qS=pi();Object.defineProperty(Tr,"BlankNode",{enumerable:!0,get:o(function(){return qS.BlankNode},"get")});var BS=ki();Object.defineProperty(Tr,"Namespace",{enumerable:!0,get:o(function(){return BS.Namespace},"get")});var US=Dn();Object.defineProperty(Tr,"Triple",{enumerable:!0,get:o(function(){return US.Triple},"get")})});var Rn=y(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.WikiLinkHelpers=void 0;var sc=class{static{o(this,"WikiLinkHelpers")}static normalize(e){return e?e.replace(this.WIKI_LINK_PATTERN,"").trim():""}static normalizeArray(e){return e?(Array.isArray(e)?e:[e]).map(i=>this.normalize(i)).filter(i=>i.length>0):[]}static equals(e,t){return this.normalize(e)===this.normalize(t)}static includes(e,t){let i=this.normalizeArray(e),n=this.normalize(t);return i.includes(n)}};ac.WikiLinkHelpers=sc;sc.WIKI_LINK_PATTERN=/\[\[|\]\]/g});var kt=y(gs=>{"use strict";Object.defineProperty(gs,"__esModule",{value:!0});gs.EffortStatus=gs.AssetClass=void 0;var $S=pf();Object.defineProperty(gs,"AssetClass",{enumerable:!0,get:o(function(){return $S.AssetClass},"get")});var GS=mf();Object.defineProperty(gs,"EffortStatus",{enumerable:!0,get:o(function(){return GS.EffortStatus},"get")})});var Nn=y(sr=>{"use strict";Object.defineProperty(sr,"__esModule",{value:!0});sr.hasClass=ys;sr.isAreaOrProject=WS;sr.isEffort=HS;sr.hasStatus=zS;sr.isAssetArchived=KS;sr.hasEmptyProperties=YS;sr.needsFolderRepair=QS;sr.getTodayDateString=wf;sr.isPlannedForToday=JS;sr.hasPlannedStartTimestamp=XS;sr.extractDailyNoteDate=ZS;sr.isCurrentDateGteDay=eb;var e2=Rn(),Sa=kt();function ys(r,e){return r?(Array.isArray(r)?r:[r]).some(i=>e2.WikiLinkHelpers.normalize(i)===e):!1}o(ys,"hasClass");function WS(r){return ys(r,Sa.AssetClass.AREA)||ys(r,Sa.AssetClass.PROJECT)}o(WS,"isAreaOrProject");function HS(r){return ys(r,Sa.AssetClass.TASK)||ys(r,Sa.AssetClass.PROJECT)||ys(r,Sa.AssetClass.MEETING)}o(HS,"isEffort");function zS(r,e){if(!r)return!1;let t=Array.isArray(r)?r[0]:r;return t?e2.WikiLinkHelpers.normalize(t)===e:!1}o(zS,"hasStatus");function KS(r){if(r===!0||r===1)return!0;if(typeof r=="string"){let e=r.toLowerCase();return e==="true"||e==="yes"}return!1}o(KS,"isAssetArchived");function YS(r){return!r||Object.keys(r).length===0?!1:Object.values(r).some(e=>!!(e==null||typeof e=="string"&&e.trim()===""||Array.isArray(e)&&e.length===0||typeof e=="object"&&!Array.isArray(e)&&Object.keys(e).length===0))}o(YS,"hasEmptyProperties");function QS(r,e){if(!e)return!1;let t=r.replace(/\/$/,""),i=e.replace(/\/$/,"");return t!==i}o(QS,"needsFolderRepair");function wf(){let r=new Date,e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),i=String(r.getDate()).padStart(2,"0");return`${e}-${t}-${i}`}o(wf,"getTodayDateString");function JS(r){let e=r.ems__Effort_plannedStartTimestamp;if(!e)return!1;let t=wf();return typeof e=="string"?e.split("T")[0]===t:Array.isArray(e)&&e.length>0?String(e[0]).split("T")[0]===t:!1}o(JS,"isPlannedForToday");function XS(r){let e=r.ems__Effort_plannedStartTimestamp;return e?typeof e=="string"?e.trim().length>0:Array.isArray(e)&&e.length>0?String(e[0]).trim().length>0:!1:!1}o(XS,"hasPlannedStartTimestamp");function ZS(r){let e=r.pn__DailyNote_day;if(!e)return null;if(typeof e=="string"){let t=e.match(/\[\[(.+?)\]\]/);return t?t[1]:e}if(Array.isArray(e)&&e.length>0){let t=String(e[0]),i=t.match(/\[\[(.+?)\]\]/);return i?i[1]:t}return null}o(ZS,"extractDailyNoteDate");function eb(r){return wf()>=r}o(eb,"isCurrentDateGteDay")});var r2=y(ba=>{"use strict";Object.defineProperty(ba,"__esModule",{value:!0});ba.canCreateTask=tb;ba.canCreateRelatedTask=rb;ba.canConvertTaskToProject=ib;var oc=Nn(),t2=kt();function tb(r){return(0,oc.isAreaOrProject)(r.instanceClass)}o(tb,"canCreateTask");function rb(r){return!(!(0,oc.hasClass)(r.instanceClass,t2.AssetClass.TASK)||(0,oc.isAssetArchived)(r.isArchived))}o(rb,"canCreateRelatedTask");function ib(r){return(0,oc.hasClass)(r.instanceClass,t2.AssetClass.TASK)}o(ib,"canConvertTaskToProject")});var i2=y(_s=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.canCreateProject=nb;_s.canMoveToAnalysis=sb;_s.canMoveToToDo=ab;_s.canConvertProjectToTask=ob;var en=Nn(),tn=kt();function nb(r){return(0,en.hasClass)(r.instanceClass,tn.AssetClass.AREA)||(0,en.hasClass)(r.instanceClass,tn.AssetClass.INITIATIVE)||(0,en.hasClass)(r.instanceClass,tn.AssetClass.PROJECT)}o(nb,"canCreateProject");function sb(r){return(0,en.hasClass)(r.instanceClass,tn.AssetClass.PROJECT)?(0,en.hasStatus)(r.currentStatus,tn.EffortStatus.BACKLOG):!1}o(sb,"canMoveToAnalysis");function ab(r){return(0,en.hasClass)(r.instanceClass,tn.AssetClass.PROJECT)?(0,en.hasStatus)(r.currentStatus,tn.EffortStatus.ANALYSIS):!1}o(ab,"canMoveToToDo");function ob(r){return(0,en.hasClass)(r.instanceClass,tn.AssetClass.PROJECT)}o(ob,"canConvertProjectToTask")});var a2=y(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.canCreateChildArea=cb;cc.canSetActiveFocus=ub;var n2=Nn(),s2=kt();function cb(r){return(0,n2.hasClass)(r.instanceClass,s2.AssetClass.AREA)}o(cb,"canCreateChildArea");function ub(r){return(0,n2.hasClass)(r.instanceClass,s2.AssetClass.AREA)}o(ub,"canSetActiveFocus")});var c2=y(ar=>{"use strict";Object.defineProperty(ar,"__esModule",{value:!0});ar.canPlanOnToday=lb;ar.canPlanForEvening=fb;ar.canShiftDayBackward=hb;ar.canShiftDayForward=db;ar.canSetDraftStatus=pb;ar.canMoveToBacklog=mb;ar.canStartEffort=gb;ar.canMarkDone=yb;ar.canTrashEffort=_b;ar.canVoteOnEffort=vb;ar.canRollbackStatus=Sb;ar.canArchiveTask=bb;var o2=Rn(),ze=Nn(),dr=kt();function lb(r){return!(!(0,ze.isEffort)(r.instanceClass)||(0,ze.isPlannedForToday)(r.metadata))}o(lb,"canPlanOnToday");function fb(r){return!(0,ze.hasClass)(r.instanceClass,dr.AssetClass.TASK)&&!(0,ze.hasClass)(r.instanceClass,dr.AssetClass.MEETING)?!1:(0,ze.hasStatus)(r.currentStatus,dr.EffortStatus.BACKLOG)}o(fb,"canPlanForEvening");function hb(r){return(0,ze.isEffort)(r.instanceClass)?(0,ze.hasPlannedStartTimestamp)(r.metadata):!1}o(hb,"canShiftDayBackward");function db(r){return(0,ze.isEffort)(r.instanceClass)?(0,ze.hasPlannedStartTimestamp)(r.metadata):!1}o(db,"canShiftDayForward");function pb(r){return(0,ze.isEffort)(r.instanceClass)?!r.currentStatus:!1}o(pb,"canSetDraftStatus");function mb(r){return(0,ze.isEffort)(r.instanceClass)?(0,ze.hasStatus)(r.currentStatus,dr.EffortStatus.DRAFT):!1}o(mb,"canMoveToBacklog");function gb(r){return(0,ze.isEffort)(r.instanceClass)?(0,ze.hasClass)(r.instanceClass,dr.AssetClass.TASK)||(0,ze.hasClass)(r.instanceClass,dr.AssetClass.MEETING)?(0,ze.hasStatus)(r.currentStatus,dr.EffortStatus.BACKLOG):(0,ze.hasClass)(r.instanceClass,dr.AssetClass.PROJECT)?(0,ze.hasStatus)(r.currentStatus,dr.EffortStatus.TODO):!1:!1}o(gb,"canStartEffort");function yb(r){return(0,ze.isEffort)(r.instanceClass)?(0,ze.hasStatus)(r.currentStatus,dr.EffortStatus.DOING):!1}o(yb,"canMarkDone");function _b(r){return(0,ze.isEffort)(r.instanceClass)?r.currentStatus?!(Array.isArray(r.currentStatus)?r.currentStatus:[r.currentStatus]).some(i=>{let n=o2.WikiLinkHelpers.normalize(i);return n===dr.EffortStatus.TRASHED||n===dr.EffortStatus.DONE}):!0:!1}o(_b,"canTrashEffort");function vb(r){return!(!(0,ze.isEffort)(r.instanceClass)||(0,ze.isAssetArchived)(r.isArchived))}o(vb,"canVoteOnEffort");function Sb(r){if(!(0,ze.isEffort)(r.instanceClass)||(0,ze.isAssetArchived)(r.isArchived)||!r.currentStatus)return!1;let e=Array.isArray(r.currentStatus)?r.currentStatus[0]:r.currentStatus;return!(!e||o2.WikiLinkHelpers.normalize(e)===dr.EffortStatus.TRASHED)}o(Sb,"canRollbackStatus");function bb(r){return!(0,ze.isAssetArchived)(r.isArchived)}o(bb,"canArchiveTask")});var u2=y(Dr=>{"use strict";Object.defineProperty(Dr,"__esModule",{value:!0});Dr.canCreateEvent=wb;Dr.canCreateInstance=Eb;Dr.canCleanProperties=Tb;Dr.canRepairFolder=Ab;Dr.canRenameToUid=xb;Dr.canCopyLabelToAliases=Ob;Dr.canCreateNarrowerConcept=Cb;Dr.canCreateSubclass=Fb;Dr.canCreateTaskForDailyNote=Pb;var Ar=Nn(),vs=kt();function wb(r){return(0,Ar.isAreaOrProject)(r.instanceClass)}o(wb,"canCreateEvent");function Eb(r){return(0,Ar.hasClass)(r.instanceClass,vs.AssetClass.TASK_PROTOTYPE)||(0,Ar.hasClass)(r.instanceClass,vs.AssetClass.MEETING_PROTOTYPE)||(0,Ar.hasClass)(r.instanceClass,vs.AssetClass.EVENT_PROTOTYPE)}o(Eb,"canCreateInstance");function Tb(r){return(0,Ar.hasEmptyProperties)(r.metadata)}o(Tb,"canCleanProperties");function Ab(r){return(0,Ar.needsFolderRepair)(r.currentFolder,r.expectedFolder)}o(Ab,"canRepairFolder");function xb(r,e){let t=r.metadata.exo__Asset_uid;return!t||(0,Ar.hasClass)(r.instanceClass,vs.AssetClass.CONCEPT)?!1:e!==t}o(xb,"canRenameToUid");function Ob(r){let e=r.metadata.exo__Asset_label;if(!e||typeof e!="string"||e.trim()==="")return!1;let t=e.trim(),i=r.metadata.aliases;return!i||!Array.isArray(i)||i.length===0?!0:!i.some(n=>typeof n!="string"?!1:n.trim()===t)}o(Ob,"canCopyLabelToAliases");function Cb(r){return(0,Ar.hasClass)(r.instanceClass,vs.AssetClass.CONCEPT)}o(Cb,"canCreateNarrowerConcept");function Fb(r){return(0,Ar.hasClass)(r.instanceClass,"exo__Class")}o(Fb,"canCreateSubclass");function Pb(r){if(!(0,Ar.hasClass)(r.instanceClass,vs.AssetClass.DAILY_NOTE)||r.isArchived)return!1;let e=(0,Ar.extractDailyNoteDate)(r.metadata);return e?(0,Ar.isCurrentDateGteDay)(e):!1}o(Pb,"canCreateTaskForDailyNote")});var f2=y(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.canCreateTaskForDailyNote=D.canCreateSubclass=D.canCreateNarrowerConcept=D.canCopyLabelToAliases=D.canRenameToUid=D.canRepairFolder=D.canCleanProperties=D.canCreateInstance=D.canCreateEvent=D.canArchiveTask=D.canRollbackStatus=D.canVoteOnEffort=D.canTrashEffort=D.canMarkDone=D.canStartEffort=D.canMoveToBacklog=D.canSetDraftStatus=D.canShiftDayForward=D.canShiftDayBackward=D.canPlanForEvening=D.canPlanOnToday=D.canSetActiveFocus=D.canCreateChildArea=D.canConvertProjectToTask=D.canMoveToToDo=D.canMoveToAnalysis=D.canCreateProject=D.canConvertTaskToProject=D.canCreateRelatedTask=D.canCreateTask=D.isCurrentDateGteDay=D.extractDailyNoteDate=D.hasPlannedStartTimestamp=D.isPlannedForToday=D.getTodayDateString=D.needsFolderRepair=D.hasEmptyProperties=D.isAssetArchived=D.hasStatus=D.isEffort=D.isAreaOrProject=D.hasClass=void 0;var xr=Nn();Object.defineProperty(D,"hasClass",{enumerable:!0,get:o(function(){return xr.hasClass},"get")});Object.defineProperty(D,"isAreaOrProject",{enumerable:!0,get:o(function(){return xr.isAreaOrProject},"get")});Object.defineProperty(D,"isEffort",{enumerable:!0,get:o(function(){return xr.isEffort},"get")});Object.defineProperty(D,"hasStatus",{enumerable:!0,get:o(function(){return xr.hasStatus},"get")});Object.defineProperty(D,"isAssetArchived",{enumerable:!0,get:o(function(){return xr.isAssetArchived},"get")});Object.defineProperty(D,"hasEmptyProperties",{enumerable:!0,get:o(function(){return xr.hasEmptyProperties},"get")});Object.defineProperty(D,"needsFolderRepair",{enumerable:!0,get:o(function(){return xr.needsFolderRepair},"get")});Object.defineProperty(D,"getTodayDateString",{enumerable:!0,get:o(function(){return xr.getTodayDateString},"get")});Object.defineProperty(D,"isPlannedForToday",{enumerable:!0,get:o(function(){return xr.isPlannedForToday},"get")});Object.defineProperty(D,"hasPlannedStartTimestamp",{enumerable:!0,get:o(function(){return xr.hasPlannedStartTimestamp},"get")});Object.defineProperty(D,"extractDailyNoteDate",{enumerable:!0,get:o(function(){return xr.extractDailyNoteDate},"get")});Object.defineProperty(D,"isCurrentDateGteDay",{enumerable:!0,get:o(function(){return xr.isCurrentDateGteDay},"get")});var Ef=r2();Object.defineProperty(D,"canCreateTask",{enumerable:!0,get:o(function(){return Ef.canCreateTask},"get")});Object.defineProperty(D,"canCreateRelatedTask",{enumerable:!0,get:o(function(){return Ef.canCreateRelatedTask},"get")});Object.defineProperty(D,"canConvertTaskToProject",{enumerable:!0,get:o(function(){return Ef.canConvertTaskToProject},"get")});var uc=i2();Object.defineProperty(D,"canCreateProject",{enumerable:!0,get:o(function(){return uc.canCreateProject},"get")});Object.defineProperty(D,"canMoveToAnalysis",{enumerable:!0,get:o(function(){return uc.canMoveToAnalysis},"get")});Object.defineProperty(D,"canMoveToToDo",{enumerable:!0,get:o(function(){return uc.canMoveToToDo},"get")});Object.defineProperty(D,"canConvertProjectToTask",{enumerable:!0,get:o(function(){return uc.canConvertProjectToTask},"get")});var l2=a2();Object.defineProperty(D,"canCreateChildArea",{enumerable:!0,get:o(function(){return l2.canCreateChildArea},"get")});Object.defineProperty(D,"canSetActiveFocus",{enumerable:!0,get:o(function(){return l2.canSetActiveFocus},"get")});var Or=c2();Object.defineProperty(D,"canPlanOnToday",{enumerable:!0,get:o(function(){return Or.canPlanOnToday},"get")});Object.defineProperty(D,"canPlanForEvening",{enumerable:!0,get:o(function(){return Or.canPlanForEvening},"get")});Object.defineProperty(D,"canShiftDayBackward",{enumerable:!0,get:o(function(){return Or.canShiftDayBackward},"get")});Object.defineProperty(D,"canShiftDayForward",{enumerable:!0,get:o(function(){return Or.canShiftDayForward},"get")});Object.defineProperty(D,"canSetDraftStatus",{enumerable:!0,get:o(function(){return Or.canSetDraftStatus},"get")});Object.defineProperty(D,"canMoveToBacklog",{enumerable:!0,get:o(function(){return Or.canMoveToBacklog},"get")});Object.defineProperty(D,"canStartEffort",{enumerable:!0,get:o(function(){return Or.canStartEffort},"get")});Object.defineProperty(D,"canMarkDone",{enumerable:!0,get:o(function(){return Or.canMarkDone},"get")});Object.defineProperty(D,"canTrashEffort",{enumerable:!0,get:o(function(){return Or.canTrashEffort},"get")});Object.defineProperty(D,"canVoteOnEffort",{enumerable:!0,get:o(function(){return Or.canVoteOnEffort},"get")});Object.defineProperty(D,"canRollbackStatus",{enumerable:!0,get:o(function(){return Or.canRollbackStatus},"get")});Object.defineProperty(D,"canArchiveTask",{enumerable:!0,get:o(function(){return Or.canArchiveTask},"get")});var ji=u2();Object.defineProperty(D,"canCreateEvent",{enumerable:!0,get:o(function(){return ji.canCreateEvent},"get")});Object.defineProperty(D,"canCreateInstance",{enumerable:!0,get:o(function(){return ji.canCreateInstance},"get")});Object.defineProperty(D,"canCleanProperties",{enumerable:!0,get:o(function(){return ji.canCleanProperties},"get")});Object.defineProperty(D,"canRepairFolder",{enumerable:!0,get:o(function(){return ji.canRepairFolder},"get")});Object.defineProperty(D,"canRenameToUid",{enumerable:!0,get:o(function(){return ji.canRenameToUid},"get")});Object.defineProperty(D,"canCopyLabelToAliases",{enumerable:!0,get:o(function(){return ji.canCopyLabelToAliases},"get")});Object.defineProperty(D,"canCreateNarrowerConcept",{enumerable:!0,get:o(function(){return ji.canCreateNarrowerConcept},"get")});Object.defineProperty(D,"canCreateSubclass",{enumerable:!0,get:o(function(){return ji.canCreateSubclass},"get")});Object.defineProperty(D,"canCreateTaskForDailyNote",{enumerable:!0,get:o(function(){return ji.canCreateTaskForDailyNote},"get")})});var h2=y(kn=>{"use strict";var Ib=kn&&kn.__createBinding||(Object.create?(function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,i,n)}):(function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]})),Db=kn&&kn.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Ib(e,r,t)};Object.defineProperty(kn,"__esModule",{value:!0});Db(f2(),kn)});var lc={};wS(lc,{__assign:()=>Af,__asyncDelegator:()=>Wb,__asyncGenerator:()=>Gb,__asyncValues:()=>Hb,__await:()=>wa,__awaiter:()=>Lb,__classPrivateFieldGet:()=>Qb,__classPrivateFieldSet:()=>Jb,__createBinding:()=>qb,__decorate:()=>kb,__exportStar:()=>Bb,__extends:()=>Rb,__generator:()=>Vb,__importDefault:()=>Yb,__importStar:()=>Kb,__makeTemplateObject:()=>zb,__metadata:()=>Mb,__param:()=>jb,__read:()=>d2,__rest:()=>Nb,__spread:()=>Ub,__spreadArrays:()=>$b,__values:()=>xf});function Rb(r,e){Tf(r,e);function t(){this.constructor=r}o(t,"__"),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Nb(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t}function kb(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}function jb(r,e){return function(t,i){e(t,i,r)}}function Mb(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function Lb(r,e,t,i){function n(s){return s instanceof t?s:new t(function(a){a(s)})}return o(n,"adopt"),new(t||(t=Promise))(function(s,a){function c(l){try{f(i.next(l))}catch(h){a(h)}}o(c,"fulfilled");function u(l){try{f(i.throw(l))}catch(h){a(h)}}o(u,"rejected");function f(l){l.done?s(l.value):n(l.value).then(c,u)}o(f,"step"),f((i=i.apply(r,e||[])).next())})}function Vb(r,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},i,n,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(f){return function(l){return u([f,l])}}function u(f){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(s=f[0]&2?n.return:f[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,f[1])).done)return s;switch(n=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,n=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(r,t)}catch(l){f=[6,l],n=0}finally{i=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function qb(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function Bb(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function xf(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:o(function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d2(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],a;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(c){a={error:c}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return s}function Ub(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(d2(arguments[e]));return r}function $b(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),n=0,e=0;e<t;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,n++)i[n]=s[a];return i}function wa(r){return this instanceof wa?(this.v=r,this):new wa(r)}function Gb(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),n,s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(p){i[p]&&(n[p]=function(g){return new Promise(function(S,b){s.push([p,g,S,b])>1||c(p,g)})})}function c(p,g){try{u(i[p](g))}catch(S){h(s[0][3],S)}}function u(p){p.value instanceof wa?Promise.resolve(p.value.v).then(f,l):h(s[0][2],p)}function f(p){c("next",p)}function l(p){c("throw",p)}function h(p,g){p(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function Wb(r){var e,t;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=r[n]?function(a){return(t=!t)?{value:wa(r[n](a)),done:n==="return"}:s?s(a):a}:s}}function Hb(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof xf=="function"?xf(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=r[s]&&function(a){return new Promise(function(c,u){a=r[s](a),n(c,u,a.done,a.value)})}}function n(s,a,c,u){Promise.resolve(u).then(function(f){s({value:f,done:c})},a)}}function zb(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function Kb(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function Yb(r){return r&&r.__esModule?r:{default:r}}function Qb(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function Jb(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}var Tf,Af,fc=bS(()=>{Tf=o(function(r,e){return Tf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},Tf(r,e)},"extendStatics");o(Rb,"__extends");Af=o(function(){return Af=Object.assign||o(function(e){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},"__assign"),Af.apply(this,arguments)},"__assign");o(Nb,"__rest");o(kb,"__decorate");o(jb,"__param");o(Mb,"__metadata");o(Lb,"__awaiter");o(Vb,"__generator");o(qb,"__createBinding");o(Bb,"__exportStar");o(xf,"__values");o(d2,"__read");o(Ub,"__spread");o($b,"__spreadArrays");o(wa,"__await");o(Gb,"__asyncGenerator");o(Wb,"__asyncDelegator");o(Hb,"__asyncValues");o(zb,"__makeTemplateObject");o(Kb,"__importStar");o(Yb,"__importDefault");o(Qb,"__classPrivateFieldGet");o(Jb,"__classPrivateFieldSet")});var Ff=y(Cf=>{"use strict";Object.defineProperty(Cf,"__esModule",{value:!0});var Of;(function(r){r[r.Transient=0]="Transient",r[r.Singleton=1]="Singleton",r[r.ResolutionScoped=2]="ResolutionScoped",r[r.ContainerScoped=3]="ContainerScoped"})(Of||(Of={}));Cf.default=Of});var p2=y(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});var Xb=Ff();Object.defineProperty(Pf,"Lifecycle",{enumerable:!0,get:o(function(){return Xb.default},"get")})});var jn=y(Rr=>{"use strict";Object.defineProperty(Rr,"__esModule",{value:!0});Rr.defineInjectionTokenMetadata=Rr.getParamInfo=Rr.INJECTION_TOKEN_METADATA_KEY=void 0;Rr.INJECTION_TOKEN_METADATA_KEY="injectionTokens";function Zb(r){let e=Reflect.getMetadata("design:paramtypes",r)||[],t=Reflect.getOwnMetadata(Rr.INJECTION_TOKEN_METADATA_KEY,r)||{};return Object.keys(t).forEach(i=>{e[+i]=t[i]}),e}o(Zb,"getParamInfo");Rr.getParamInfo=Zb;function ew(r,e){return function(t,i,n){let s=Reflect.getOwnMetadata(Rr.INJECTION_TOKEN_METADATA_KEY,t)||{};s[n]=e?{token:r,transform:e.transformToken,transformArgs:e.args||[]}:r,Reflect.defineMetadata(Rr.INJECTION_TOKEN_METADATA_KEY,s,t)}}o(ew,"defineInjectionTokenMetadata");Rr.defineInjectionTokenMetadata=ew});var If=y(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.isClassProvider=void 0;function tw(r){return!!r.useClass}o(tw,"isClassProvider");hc.isClassProvider=tw});var Df=y(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.isFactoryProvider=void 0;function rw(r){return!!r.useFactory}o(rw,"isFactoryProvider");dc.isFactoryProvider=rw});var mc=y(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.delay=Ss.DelayedConstructor=void 0;var pc=class{static{o(this,"DelayedConstructor")}constructor(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}createProxy(e){let t={},i=!1,n,s=o(()=>(i||(n=e(this.wrap()),i=!0),n),"delayedObject");return new Proxy(t,this.createHandler(s))}createHandler(e){let t={},i=o(n=>{t[n]=(...s)=>{s[0]=e();let a=Reflect[n];return a(...s)}},"install");return this.reflectMethods.forEach(i),t}};Ss.DelayedConstructor=pc;function iw(r){if(typeof r>"u")throw new Error("Attempt to `delay` undefined. Constructor must be wrapped in a callback");return new pc(r)}o(iw,"delay");Ss.delay=iw});var gc=y(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});mi.isConstructorToken=mi.isTransformDescriptor=mi.isTokenDescriptor=mi.isNormalToken=void 0;var nw=mc();function sw(r){return typeof r=="string"||typeof r=="symbol"}o(sw,"isNormalToken");mi.isNormalToken=sw;function aw(r){return typeof r=="object"&&"token"in r&&"multiple"in r}o(aw,"isTokenDescriptor");mi.isTokenDescriptor=aw;function ow(r){return typeof r=="object"&&"token"in r&&"transform"in r}o(ow,"isTransformDescriptor");mi.isTransformDescriptor=ow;function cw(r){return typeof r=="function"||r instanceof nw.DelayedConstructor}o(cw,"isConstructorToken");mi.isConstructorToken=cw});var Rf=y(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.isTokenProvider=void 0;function uw(r){return!!r.useToken}o(uw,"isTokenProvider");yc.isTokenProvider=uw});var Nf=y(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.isValueProvider=void 0;function lw(r){return r.useValue!=null}o(lw,"isValueProvider");_c.isValueProvider=lw});var kf=y(Mn=>{"use strict";Object.defineProperty(Mn,"__esModule",{value:!0});var fw=If();Object.defineProperty(Mn,"isClassProvider",{enumerable:!0,get:o(function(){return fw.isClassProvider},"get")});var hw=Df();Object.defineProperty(Mn,"isFactoryProvider",{enumerable:!0,get:o(function(){return hw.isFactoryProvider},"get")});var dw=gc();Object.defineProperty(Mn,"isNormalToken",{enumerable:!0,get:o(function(){return dw.isNormalToken},"get")});var pw=Rf();Object.defineProperty(Mn,"isTokenProvider",{enumerable:!0,get:o(function(){return pw.isTokenProvider},"get")});var mw=Nf();Object.defineProperty(Mn,"isValueProvider",{enumerable:!0,get:o(function(){return mw.isValueProvider},"get")})});var m2=y(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.isProvider=void 0;var gw=If(),yw=Nf(),_w=Rf(),vw=Df();function Sw(r){return gw.isClassProvider(r)||yw.isValueProvider(r)||_w.isTokenProvider(r)||vw.isFactoryProvider(r)}o(Sw,"isProvider");vc.isProvider=Sw});var Lf=y(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});var jf=class{static{o(this,"RegistryBase")}constructor(){this._registryMap=new Map}entries(){return this._registryMap.entries()}getAll(e){return this.ensure(e),this._registryMap.get(e)}get(e){this.ensure(e);let t=this._registryMap.get(e);return t[t.length-1]||null}set(e,t){this.ensure(e),this._registryMap.get(e).push(t)}setAll(e,t){this._registryMap.set(e,t)}has(e){return this.ensure(e),this._registryMap.get(e).length>0}clear(){this._registryMap.clear()}ensure(e){this._registryMap.has(e)||this._registryMap.set(e,[])}};Mf.default=jf});var g2=y(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});var bw=Lf(),Vf=class extends bw.default{static{o(this,"Registry")}};qf.default=Vf});var y2=y(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});var Bf=class{static{o(this,"ResolutionContext")}constructor(){this.scopedResolutions=new Map}};Uf.default=Bf});var $f=y(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.formatErrorCtor=void 0;function ww(r,e){return r===null?`at position #${e}`:`"${r.split(",")[e].trim()}" at position #${e}`}o(ww,"formatDependency");function Ew(r,e,t="    "){return[r,...e.message.split(`
`).map(i=>t+i)].join(`
`)}o(Ew,"composeErrorMessage");function Tw(r,e,t){let[,i=null]=r.toString().match(/constructor\(([\w, ]+)\)/)||[],n=ww(i,e);return Ew(`Cannot inject the dependency ${n} of "${r.name}" constructor. Reason:`,t)}o(Tw,"formatErrorCtor");Sc.formatErrorCtor=Tw});var _2=y(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.isDisposable=void 0;function Aw(r){return!(typeof r.dispose!="function"||r.dispose.length>0)}o(Aw,"isDisposable");bc.isDisposable=Aw});var S2=y(Ln=>{"use strict";Object.defineProperty(Ln,"__esModule",{value:!0});Ln.PostResolutionInterceptors=Ln.PreResolutionInterceptors=void 0;var v2=Lf(),wc=class extends v2.default{static{o(this,"PreResolutionInterceptors")}};Ln.PreResolutionInterceptors=wc;var Ec=class extends v2.default{static{o(this,"PostResolutionInterceptors")}};Ln.PostResolutionInterceptors=Ec;var Gf=class{static{o(this,"Interceptors")}constructor(){this.preResolution=new wc,this.postResolution=new Ec}};Ln.default=Gf});var rn=y(Mi=>{"use strict";Object.defineProperty(Mi,"__esModule",{value:!0});Mi.instance=Mi.typeInfo=void 0;var xw=(fc(),Kl(lc)),Kt=kf(),Ow=m2(),Tc=gc(),Cw=g2(),or=Ff(),Ac=y2(),Fw=$f(),Pw=mc(),Iw=_2(),Dw=S2();Mi.typeInfo=new Map;var Wf=class r{static{o(this,"InternalDependencyContainer")}constructor(e){this.parent=e,this._registry=new Cw.default,this.interceptors=new Dw.default,this.disposed=!1,this.disposables=new Set}register(e,t,i={lifecycle:or.default.Transient}){this.ensureNotDisposed();let n;if(Ow.isProvider(t)?n=t:n={useClass:t},Kt.isTokenProvider(n)){let s=[e],a=n;for(;a!=null;){let c=a.useToken;if(s.includes(c))throw new Error(`Token registration cycle detected! ${[...s,c].join(" -> ")}`);s.push(c);let u=this._registry.get(c);u&&Kt.isTokenProvider(u.provider)?a=u.provider:a=null}}if((i.lifecycle===or.default.Singleton||i.lifecycle==or.default.ContainerScoped||i.lifecycle==or.default.ResolutionScoped)&&(Kt.isValueProvider(n)||Kt.isFactoryProvider(n)))throw new Error(`Cannot use lifecycle "${or.default[i.lifecycle]}" with ValueProviders or FactoryProviders`);return this._registry.set(e,{provider:n,options:i}),this}registerType(e,t){return this.ensureNotDisposed(),Kt.isNormalToken(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})}registerInstance(e,t){return this.ensureNotDisposed(),this.register(e,{useValue:t})}registerSingleton(e,t){if(this.ensureNotDisposed(),Kt.isNormalToken(e)){if(Kt.isNormalToken(t))return this.register(e,{useToken:t},{lifecycle:or.default.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:or.default.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}let i=e;return t&&!Kt.isNormalToken(t)&&(i=t),this.register(e,{useClass:i},{lifecycle:or.default.Singleton})}resolve(e,t=new Ac.default,i=!1){this.ensureNotDisposed();let n=this.getRegistration(e);if(!n&&Kt.isNormalToken(e)){if(i)return;throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}if(this.executePreResolutionInterceptor(e,"Single"),n){let s=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,s,"Single"),s}if(Tc.isConstructorToken(e)){let s=this.construct(e,t);return this.executePostResolutionInterceptor(e,s,"Single"),s}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")}executePreResolutionInterceptor(e,t){if(this.interceptors.preResolution.has(e)){let i=[];for(let n of this.interceptors.preResolution.getAll(e))n.options.frequency!="Once"&&i.push(n),n.callback(e,t);this.interceptors.preResolution.setAll(e,i)}}executePostResolutionInterceptor(e,t,i){if(this.interceptors.postResolution.has(e)){let n=[];for(let s of this.interceptors.postResolution.getAll(e))s.options.frequency!="Once"&&n.push(s),s.callback(e,t,i);this.interceptors.postResolution.setAll(e,n)}}resolveRegistration(e,t){if(this.ensureNotDisposed(),e.options.lifecycle===or.default.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);let i=e.options.lifecycle===or.default.Singleton,n=e.options.lifecycle===or.default.ContainerScoped,s=i||n,a;return Kt.isValueProvider(e.provider)?a=e.provider.useValue:Kt.isTokenProvider(e.provider)?a=s?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):Kt.isClassProvider(e.provider)?a=s?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):Kt.isFactoryProvider(e.provider)?a=e.provider.useFactory(this):a=this.construct(e.provider,t),e.options.lifecycle===or.default.ResolutionScoped&&t.scopedResolutions.set(e,a),a}resolveAll(e,t=new Ac.default,i=!1){this.ensureNotDisposed();let n=this.getAllRegistrations(e);if(!n&&Kt.isNormalToken(e)){if(i)return[];throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}if(this.executePreResolutionInterceptor(e,"All"),n){let a=n.map(c=>this.resolveRegistration(c,t));return this.executePostResolutionInterceptor(e,a,"All"),a}let s=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,s,"All"),s}isRegistered(e,t=!1){return this.ensureNotDisposed(),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)}reset(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()}clearInstances(){this.ensureNotDisposed();for(let[e,t]of this._registry.entries())this._registry.setAll(e,t.filter(i=>!Kt.isValueProvider(i.provider)).map(i=>(i.instance=void 0,i)))}createChildContainer(){this.ensureNotDisposed();let e=new r(this);for(let[t,i]of this._registry.entries())i.some(({options:n})=>n.lifecycle===or.default.ContainerScoped)&&e._registry.setAll(t,i.map(n=>n.options.lifecycle===or.default.ContainerScoped?{provider:n.provider,options:n.options}:n));return e}beforeResolution(e,t,i={frequency:"Always"}){this.interceptors.preResolution.set(e,{callback:t,options:i})}afterResolution(e,t,i={frequency:"Always"}){this.interceptors.postResolution.set(e,{callback:t,options:i})}dispose(){return xw.__awaiter(this,void 0,void 0,function*(){this.disposed=!0;let e=[];this.disposables.forEach(t=>{let i=t.dispose();i&&e.push(i)}),yield Promise.all(e)})}getRegistration(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null}getAllRegistrations(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null}construct(e,t){if(e instanceof Pw.DelayedConstructor)return e.createProxy(n=>this.resolve(n,t));let i=(()=>{let n=Mi.typeInfo.get(e);if(!n||n.length===0){if(e.length===0)return new e;throw new Error(`TypeInfo not known for "${e.name}"`)}let s=n.map(this.resolveParams(t,e));return new e(...s)})();return Iw.isDisposable(i)&&this.disposables.add(i),i}resolveParams(e,t){return(i,n)=>{try{return Tc.isTokenDescriptor(i)?Tc.isTransformDescriptor(i)?i.multiple?this.resolve(i.transform).transform(this.resolveAll(i.token,new Ac.default,i.isOptional),...i.transformArgs):this.resolve(i.transform).transform(this.resolve(i.token,e,i.isOptional),...i.transformArgs):i.multiple?this.resolveAll(i.token,new Ac.default,i.isOptional):this.resolve(i.token,e,i.isOptional):Tc.isTransformDescriptor(i)?this.resolve(i.transform,e).transform(this.resolve(i.token,e),...i.transformArgs):this.resolve(i,e)}catch(s){throw new Error(Fw.formatErrorCtor(t,n,s))}}}ensureNotDisposed(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")}};Mi.instance=new Wf;Mi.default=Mi.instance});var b2=y(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});var Rw=jn(),Li=rn(),Hf=gc(),Nw=$f();function kw(){return function(r){let e=Rw.getParamInfo(r);return class extends r{constructor(...t){super(...t.concat(e.slice(t.length).map((i,n)=>{try{return Hf.isTokenDescriptor(i)?Hf.isTransformDescriptor(i)?i.multiple?Li.instance.resolve(i.transform).transform(Li.instance.resolveAll(i.token),...i.transformArgs):Li.instance.resolve(i.transform).transform(Li.instance.resolve(i.token),...i.transformArgs):i.multiple?Li.instance.resolveAll(i.token):Li.instance.resolve(i.token):Hf.isTransformDescriptor(i)?Li.instance.resolve(i.transform).transform(Li.instance.resolve(i.token),...i.transformArgs):Li.instance.resolve(i)}catch(s){let a=n+t.length;throw new Error(Nw.formatErrorCtor(r,a,s))}})))}}}}o(kw,"autoInjectable");zf.default=kw});var w2=y(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});var jw=jn();function Mw(r,e){let t={token:r,multiple:!1,isOptional:e&&e.isOptional};return jw.defineInjectionTokenMetadata(t)}o(Mw,"inject");Kf.default=Mw});var xc=y(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});var Lw=jn(),Vw=rn(),E2=rn();function qw(r){return function(e){Vw.typeInfo.set(e,Lw.getParamInfo(e)),r&&r.token&&(Array.isArray(r.token)?r.token.forEach(t=>{E2.instance.register(t,e)}):E2.instance.register(r.token,e))}}o(qw,"injectable");Yf.default=qw});var T2=y(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});var Bw=(fc(),Kl(lc)),Uw=rn();function $w(r=[]){return function(e){return r.forEach(t=>{var{token:i,options:n}=t,s=Bw.__rest(t,["token","options"]);return Uw.instance.register(i,s,n)}),e}}o($w,"registry");Qf.default=$w});var A2=y(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});var Gw=xc(),Ww=rn();function Hw(){return function(r){Gw.default()(r),Ww.instance.registerSingleton(r)}}o(Hw,"singleton");Jf.default=Hw});var x2=y(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});var zw=jn();function Kw(r,e){let t={token:r,multiple:!0,isOptional:e&&e.isOptional};return zw.defineInjectionTokenMetadata(t)}o(Kw,"injectAll");Xf.default=Kw});var O2=y(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});var Yw=jn();function Qw(r,e,...t){let i={token:r,multiple:!0,transform:e,transformArgs:t};return Yw.defineInjectionTokenMetadata(i)}o(Qw,"injectAllWithTransform");Zf.default=Qw});var C2=y(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});var Jw=jn();function Xw(r,e,...t){return Jw.defineInjectionTokenMetadata(r,{transformToken:e,args:t})}o(Xw,"injectWithTransform");eh.default=Xw});var F2=y(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});var Zw=xc(),eE=rn();function tE(r,e){return function(t){Zw.default()(t),eE.instance.register(e||t,t,{lifecycle:r})}}o(tE,"scoped");th.default=tE});var P2=y(Nr=>{"use strict";Object.defineProperty(Nr,"__esModule",{value:!0});var rE=b2();Object.defineProperty(Nr,"autoInjectable",{enumerable:!0,get:o(function(){return rE.default},"get")});var iE=w2();Object.defineProperty(Nr,"inject",{enumerable:!0,get:o(function(){return iE.default},"get")});var nE=xc();Object.defineProperty(Nr,"injectable",{enumerable:!0,get:o(function(){return nE.default},"get")});var sE=T2();Object.defineProperty(Nr,"registry",{enumerable:!0,get:o(function(){return sE.default},"get")});var aE=A2();Object.defineProperty(Nr,"singleton",{enumerable:!0,get:o(function(){return aE.default},"get")});var oE=x2();Object.defineProperty(Nr,"injectAll",{enumerable:!0,get:o(function(){return oE.default},"get")});var cE=O2();Object.defineProperty(Nr,"injectAllWithTransform",{enumerable:!0,get:o(function(){return cE.default},"get")});var uE=C2();Object.defineProperty(Nr,"injectWithTransform",{enumerable:!0,get:o(function(){return uE.default},"get")});var lE=F2();Object.defineProperty(Nr,"scoped",{enumerable:!0,get:o(function(){return lE.default},"get")})});var I2=y(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});function fE(r){let e;return t=>(e==null&&(e=r(t)),e)}o(fE,"instanceCachingFactory");rh.default=fE});var D2=y(ih=>{"use strict";Object.defineProperty(ih,"__esModule",{value:!0});function hE(r){let e=new WeakMap;return t=>{let i=e.get(t);return i==null&&(i=r(t),e.set(t,i)),i}}o(hE,"instancePerContainerCachingFactory");ih.default=hE});var R2=y(nh=>{"use strict";Object.defineProperty(nh,"__esModule",{value:!0});function dE(r,e,t,i=!0){let n,s;return a=>{let c=r(a);return(!i||s!==c)&&((s=c)?n=a.resolve(e):n=a.resolve(t)),n}}o(dE,"predicateAwareClassFactory");nh.default=dE});var N2=y(Ea=>{"use strict";Object.defineProperty(Ea,"__esModule",{value:!0});var pE=I2();Object.defineProperty(Ea,"instanceCachingFactory",{enumerable:!0,get:o(function(){return pE.default},"get")});var mE=D2();Object.defineProperty(Ea,"instancePerContainerCachingFactory",{enumerable:!0,get:o(function(){return mE.default},"get")});var gE=R2();Object.defineProperty(Ea,"predicateAwareClassFactory",{enumerable:!0,get:o(function(){return gE.default},"get")})});var Qe=y(nn=>{"use strict";Object.defineProperty(nn,"__esModule",{value:!0});var sh=(fc(),Kl(lc));if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var yE=p2();Object.defineProperty(nn,"Lifecycle",{enumerable:!0,get:o(function(){return yE.Lifecycle},"get")});sh.__exportStar(P2(),nn);sh.__exportStar(N2(),nn);sh.__exportStar(kf(),nn);var _E=mc();Object.defineProperty(nn,"delay",{enumerable:!0,get:o(function(){return _E.delay},"get")});var vE=rn();Object.defineProperty(nn,"container",{enumerable:!0,get:o(function(){return vE.instance},"get")})});var k2=y(ah=>{"use strict";Object.defineProperty(ah,"__esModule",{value:!0});ah.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var j2=y(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});oh.default="00000000-0000-0000-0000-000000000000"});var M2=y(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});ch.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var Ta=y(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});var SE=M2();function bE(r){return typeof r=="string"&&SE.default.test(r)}o(bE,"validate");uh.default=bE});var Aa=y(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});var wE=Ta();function EE(r){if(!(0,wE.default)(r))throw TypeError("Invalid UUID");let e;return Uint8Array.of((e=parseInt(r.slice(0,8),16))>>>24,e>>>16&255,e>>>8&255,e&255,(e=parseInt(r.slice(9,13),16))>>>8,e&255,(e=parseInt(r.slice(14,18),16))>>>8,e&255,(e=parseInt(r.slice(19,23),16))>>>8,e&255,(e=parseInt(r.slice(24,36),16))/1099511627776&255,e/4294967296&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255)}o(EE,"parse");lh.default=EE});var Vi=y(xa=>{"use strict";Object.defineProperty(xa,"__esModule",{value:!0});xa.unsafeStringify=void 0;var TE=Ta(),Ot=[];for(let r=0;r<256;++r)Ot.push((r+256).toString(16).slice(1));function L2(r,e=0){return(Ot[r[e+0]]+Ot[r[e+1]]+Ot[r[e+2]]+Ot[r[e+3]]+"-"+Ot[r[e+4]]+Ot[r[e+5]]+"-"+Ot[r[e+6]]+Ot[r[e+7]]+"-"+Ot[r[e+8]]+Ot[r[e+9]]+"-"+Ot[r[e+10]]+Ot[r[e+11]]+Ot[r[e+12]]+Ot[r[e+13]]+Ot[r[e+14]]+Ot[r[e+15]]).toLowerCase()}o(L2,"unsafeStringify");xa.unsafeStringify=L2;function AE(r,e=0){let t=L2(r,e);if(!(0,TE.default)(t))throw TypeError("Stringified UUID is invalid");return t}o(AE,"stringify");xa.default=AE});var Fc=y(fh=>{"use strict";Object.defineProperty(fh,"__esModule",{value:!0});var xE=require("crypto"),Cc=new Uint8Array(256),Oc=Cc.length;function OE(){return Oc>Cc.length-16&&((0,xE.randomFillSync)(Cc),Oc=0),Cc.slice(Oc,Oc+=16)}o(OE,"rng");fh.default=OE});var hh=y(Ca=>{"use strict";Object.defineProperty(Ca,"__esModule",{value:!0});Ca.updateV1State=void 0;var V2=Fc(),CE=Vi(),Oa={};function FE(r,e,t){let i,n=r?._v6??!1;if(r){let s=Object.keys(r);s.length===1&&s[0]==="_v6"&&(r=void 0)}if(r)i=q2(r.random??r.rng?.()??(0,V2.default)(),r.msecs,r.nsecs,r.clockseq,r.node,e,t);else{let s=Date.now(),a=(0,V2.default)();B2(Oa,s,a),i=q2(a,Oa.msecs,Oa.nsecs,n?void 0:Oa.clockseq,n?void 0:Oa.node,e,t)}return e??(0,CE.unsafeStringify)(i)}o(FE,"v1");function B2(r,e,t){return r.msecs??=-1/0,r.nsecs??=0,e===r.msecs?(r.nsecs++,r.nsecs>=1e4&&(r.node=void 0,r.nsecs=0)):e>r.msecs?r.nsecs=0:e<r.msecs&&(r.node=void 0),r.node||(r.node=t.slice(10,16),r.node[0]|=1,r.clockseq=(t[8]<<8|t[9])&16383),r.msecs=e,r}o(B2,"updateV1State");Ca.updateV1State=B2;function q2(r,e,t,i,n,s,a=0){if(r.length<16)throw new Error("Random bytes length must be >= 16");if(!s)s=new Uint8Array(16),a=0;else if(a<0||a+16>s.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);e??=Date.now(),t??=0,i??=(r[8]<<8|r[9])&16383,n??=r.slice(10,16),e+=122192928e5;let c=((e&268435455)*1e4+t)%4294967296;s[a++]=c>>>24&255,s[a++]=c>>>16&255,s[a++]=c>>>8&255,s[a++]=c&255;let u=e/4294967296*1e4&268435455;s[a++]=u>>>8&255,s[a++]=u&255,s[a++]=u>>>24&15|16,s[a++]=u>>>16&255,s[a++]=i>>>8|128,s[a++]=i&255;for(let f=0;f<6;++f)s[a++]=n[f];return s}o(q2,"v1Bytes");Ca.default=FE});var ph=y(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});var PE=Aa(),IE=Vi();function DE(r){let e=typeof r=="string"?(0,PE.default)(r):r,t=RE(e);return typeof r=="string"?(0,IE.unsafeStringify)(t):t}o(DE,"v1ToV6");dh.default=DE;function RE(r){return Uint8Array.of((r[6]&15)<<4|r[7]>>4&15,(r[7]&15)<<4|(r[4]&240)>>4,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,(r[1]&15)<<4|(r[2]&240)>>4,96|r[2]&15,r[3],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}o(RE,"_v1ToV6")});var U2=y(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});var NE=require("crypto");function kE(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),(0,NE.createHash)("md5").update(r).digest()}o(kE,"md5");mh.default=kE});var Fa=y(qi=>{"use strict";Object.defineProperty(qi,"__esModule",{value:!0});qi.URL=qi.DNS=qi.stringToBytes=void 0;var $2=Aa(),jE=Vi();function G2(r){r=unescape(encodeURIComponent(r));let e=new Uint8Array(r.length);for(let t=0;t<r.length;++t)e[t]=r.charCodeAt(t);return e}o(G2,"stringToBytes");qi.stringToBytes=G2;qi.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";qi.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function ME(r,e,t,i,n,s){let a=typeof t=="string"?G2(t):t,c=typeof i=="string"?(0,$2.default)(i):i;if(typeof i=="string"&&(i=(0,$2.default)(i)),i?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+a.length);if(u.set(c),u.set(a,c.length),u=e(u),u[6]=u[6]&15|r,u[8]=u[8]&63|128,n){s=s||0;for(let f=0;f<16;++f)n[s+f]=u[f];return n}return(0,jE.unsafeStringify)(u)}o(ME,"v35");qi.default=ME});var H2=y(Vn=>{"use strict";Object.defineProperty(Vn,"__esModule",{value:!0});Vn.URL=Vn.DNS=void 0;var LE=U2(),gh=Fa(),W2=Fa();Object.defineProperty(Vn,"DNS",{enumerable:!0,get:o(function(){return W2.DNS},"get")});Object.defineProperty(Vn,"URL",{enumerable:!0,get:o(function(){return W2.URL},"get")});function yh(r,e,t,i){return(0,gh.default)(48,LE.default,r,e,t,i)}o(yh,"v3");yh.DNS=gh.DNS;yh.URL=gh.URL;Vn.default=yh});var z2=y(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});var VE=require("crypto");_h.default={randomUUID:VE.randomUUID}});var Y2=y(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});var K2=z2(),qE=Fc(),BE=Vi();function UE(r,e,t){if(K2.default.randomUUID&&!e&&!r)return K2.default.randomUUID();r=r||{};let i=r.random??r.rng?.()??(0,qE.default)();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let n=0;n<16;++n)e[t+n]=i[n];return e}return(0,BE.unsafeStringify)(i)}o(UE,"v4");vh.default=UE});var Q2=y(Sh=>{"use strict";Object.defineProperty(Sh,"__esModule",{value:!0});var $E=require("crypto");function GE(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),(0,$E.createHash)("sha1").update(r).digest()}o(GE,"sha1");Sh.default=GE});var X2=y(qn=>{"use strict";Object.defineProperty(qn,"__esModule",{value:!0});qn.URL=qn.DNS=void 0;var WE=Q2(),bh=Fa(),J2=Fa();Object.defineProperty(qn,"DNS",{enumerable:!0,get:o(function(){return J2.DNS},"get")});Object.defineProperty(qn,"URL",{enumerable:!0,get:o(function(){return J2.URL},"get")});function wh(r,e,t,i){return(0,bh.default)(80,WE.default,r,e,t,i)}o(wh,"v5");wh.DNS=bh.DNS;wh.URL=bh.URL;qn.default=wh});var Z2=y(Eh=>{"use strict";Object.defineProperty(Eh,"__esModule",{value:!0});var HE=Vi(),zE=hh(),KE=ph();function YE(r,e,t){r??={},t??=0;let i=(0,zE.default)({...r,_v6:!0},new Uint8Array(16));if(i=(0,KE.default)(i),e){for(let n=0;n<16;n++)e[t+n]=i[n];return e}return(0,HE.unsafeStringify)(i)}o(YE,"v6");Eh.default=YE});var e0=y(Th=>{"use strict";Object.defineProperty(Th,"__esModule",{value:!0});var QE=Aa(),JE=Vi();function XE(r){let e=typeof r=="string"?(0,QE.default)(r):r,t=ZE(e);return typeof r=="string"?(0,JE.unsafeStringify)(t):t}o(XE,"v6ToV1");Th.default=XE;function ZE(r){return Uint8Array.of((r[3]&15)<<4|r[4]>>4&15,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|r[6]&15,r[7],(r[1]&15)<<4|(r[2]&240)>>4,(r[2]&15)<<4|(r[3]&240)>>4,16|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}o(ZE,"_v6ToV1")});var n0=y(Pa=>{"use strict";Object.defineProperty(Pa,"__esModule",{value:!0});Pa.updateV7State=void 0;var t0=Fc(),e4=Vi(),Ah={};function t4(r,e,t){let i;if(r)i=r0(r.random??r.rng?.()??(0,t0.default)(),r.msecs,r.seq,e,t);else{let n=Date.now(),s=(0,t0.default)();i0(Ah,n,s),i=r0(s,Ah.msecs,Ah.seq,e,t)}return e??(0,e4.unsafeStringify)(i)}o(t4,"v7");function i0(r,e,t){return r.msecs??=-1/0,r.seq??=0,e>r.msecs?(r.seq=t[6]<<23|t[7]<<16|t[8]<<8|t[9],r.msecs=e):(r.seq=r.seq+1|0,r.seq===0&&r.msecs++),r}o(i0,"updateV7State");Pa.updateV7State=i0;function r0(r,e,t,i,n=0){if(r.length<16)throw new Error("Random bytes length must be >= 16");if(!i)i=new Uint8Array(16),n=0;else if(n<0||n+16>i.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);return e??=Date.now(),t??=r[6]*127<<24|r[7]<<16|r[8]<<8|r[9],i[n++]=e/1099511627776&255,i[n++]=e/4294967296&255,i[n++]=e/16777216&255,i[n++]=e/65536&255,i[n++]=e/256&255,i[n++]=e&255,i[n++]=112|t>>>28&15,i[n++]=t>>>20&255,i[n++]=128|t>>>14&63,i[n++]=t>>>6&255,i[n++]=t<<2&255|r[10]&3,i[n++]=r[11],i[n++]=r[12],i[n++]=r[13],i[n++]=r[14],i[n++]=r[15],i}o(r0,"v7Bytes");Pa.default=t4});var s0=y(xh=>{"use strict";Object.defineProperty(xh,"__esModule",{value:!0});var r4=Ta();function i4(r){if(!(0,r4.default)(r))throw TypeError("Invalid UUID");return parseInt(r.slice(14,15),16)}o(i4,"version");xh.default=i4});var gi=y(Be=>{"use strict";Object.defineProperty(Be,"__esModule",{value:!0});Be.version=Be.validate=Be.v7=Be.v6ToV1=Be.v6=Be.v5=Be.v4=Be.v3=Be.v1ToV6=Be.v1=Be.stringify=Be.parse=Be.NIL=Be.MAX=void 0;var n4=k2();Object.defineProperty(Be,"MAX",{enumerable:!0,get:o(function(){return n4.default},"get")});var s4=j2();Object.defineProperty(Be,"NIL",{enumerable:!0,get:o(function(){return s4.default},"get")});var a4=Aa();Object.defineProperty(Be,"parse",{enumerable:!0,get:o(function(){return a4.default},"get")});var o4=Vi();Object.defineProperty(Be,"stringify",{enumerable:!0,get:o(function(){return o4.default},"get")});var c4=hh();Object.defineProperty(Be,"v1",{enumerable:!0,get:o(function(){return c4.default},"get")});var u4=ph();Object.defineProperty(Be,"v1ToV6",{enumerable:!0,get:o(function(){return u4.default},"get")});var l4=H2();Object.defineProperty(Be,"v3",{enumerable:!0,get:o(function(){return l4.default},"get")});var f4=Y2();Object.defineProperty(Be,"v4",{enumerable:!0,get:o(function(){return f4.default},"get")});var h4=X2();Object.defineProperty(Be,"v5",{enumerable:!0,get:o(function(){return h4.default},"get")});var d4=Z2();Object.defineProperty(Be,"v6",{enumerable:!0,get:o(function(){return d4.default},"get")});var p4=e0();Object.defineProperty(Be,"v6ToV1",{enumerable:!0,get:o(function(){return p4.default},"get")});var m4=n0();Object.defineProperty(Be,"v7",{enumerable:!0,get:o(function(){return m4.default},"get")});var g4=Ta();Object.defineProperty(Be,"validate",{enumerable:!0,get:o(function(){return g4.default},"get")});var y4=s0();Object.defineProperty(Be,"version",{enumerable:!0,get:o(function(){return y4.default},"get")})});var kr=y(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.MetadataHelpers=void 0;var Oh=class{static{o(this,"MetadataHelpers")}static findAllReferencingProperties(e,t){let i=[];for(let[n,s]of Object.entries(e))this.containsReference(s,t)&&i.push(n);return i}static findReferencingProperty(e,t){for(let[i,n]of Object.entries(e))if(this.containsReference(n,t))return i}static containsReference(e,t){if(!e)return!1;let i=t.replace(/\.md$/,"");if(typeof e=="string"){let n=/\[\[([^\]]+)\]\]/g,s;for(;(s=n.exec(e))!==null;){let c=s[1].split("|")[0].trim();if(c===i||c.endsWith(`/${i}`))return!0}return!1}return Array.isArray(e)?e.some(n=>this.containsReference(n,t)):!1}static isAssetArchived(e){let t=e?.exo__Asset_isArchived;if(t!=null){if(t===!0||t===1)return!0;if(typeof t=="string"){let n=t.toLowerCase().trim();if(n==="true"||n==="yes"||n==="1")return!0}if(typeof t=="boolean")return t}let i=e?.archived;if(i==null)return!1;if(typeof i=="boolean")return i;if(typeof i=="number")return i!==0;if(typeof i=="string"){let n=i.toLowerCase().trim();return n==="true"||n==="yes"||n==="1"}return!1}static getPropertyValue(e,t){return t==="Name"||t==="title"?e.title:t==="created"?e.created:t==="modified"?e.modified:t==="path"?e.path:e.metadata?.[t]}static ensureQuoted(e){return!e||e==='""'?'""':e.startsWith('"')&&e.endsWith('"')?e:`"${e}"`}static buildFileContent(e,t){let i=Object.entries(e).map(([s,a])=>{if(Array.isArray(a)){let c=a.map(u=>`  - ${u}`).join(`
`);return`${s}:
${c}`}return`${s}: ${a}`}).join(`
`),n=t?`
${t}
`:`
`;return`---
${i}
---
${n}`}};Pc.MetadataHelpers=Oh});var pr=y(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.DateFormatter=void 0;var Ch=class r{static{o(this,"DateFormatter")}static toISOTimestamp(e){return e.toISOString().replace(/\.\d{3}Z$/,"Z")}static toLocalTimestamp(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0"),c=String(e.getSeconds()).padStart(2,"0");return`${t}-${i}-${n}T${s}:${a}:${c}`}static toDateWikilink(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`"[[${t}-${i}-${n}]]"`}static getTodayWikilink(){return r.toDateWikilink(new Date)}static toDateString(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${i}-${n}`}static parseWikilink(e){let i=e.replace(/^["']|["']$/g,"").match(/\[\[(\d{4}-\d{2}-\d{2})\]\]/);return i?i[1]:null}static addDays(e,t){let i=new Date(e);return i.setDate(i.getDate()+t),i}static isSameDay(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}static getTodayStartTimestamp(){let e=new Date;return e.setHours(0,0,0,0),r.toLocalTimestamp(e)}static toTimestampAtStartOfDay(e){let t=e.split("-").map(Number);if(t.length!==3||t.some(isNaN))throw new Error(`Invalid date format: ${e}. Expected YYYY-MM-DD`);let[i,n,s]=t,a=new Date(i,n-1,s,0,0,0,0);if(isNaN(a.getTime()))throw new Error(`Invalid date values: ${e}`);return r.toLocalTimestamp(a)}static normalizeTimestamp(e){if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(e))return e;let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`Invalid timestamp format: ${e}`);return r.toISOTimestamp(t)}static isISOTimestamp(e){return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(e)}};Ic.DateFormatter=Ch});var Ia=y(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.MetadataExtractor=void 0;var _4=kr(),Fh=class{static{o(this,"MetadataExtractor")}constructor(e){this.vault=e}extractMetadata(e){return e?this.vault.getFrontmatter(e)||{}:{}}extractInstanceClass(e){return e.exo__Instance_class||null}extractStatus(e){return e.ems__Effort_status||null}extractIsArchived(e){return _4.MetadataHelpers.isAssetArchived(e)}static extractIsDefinedBy(e){let t=e.exo__Asset_isDefinedBy||'""';return Array.isArray(t)&&(t=t[0]||'""'),t}extractExpectedFolder(e){let t=e.exo__Asset_isDefinedBy;if(!t)return null;let i=Array.isArray(t)?t[0]:t;if(!i||typeof i!="string")return null;let n=i.replace(/["'[\]]/g,"").trim();if(!n)return null;let s=n.split("/");return s.pop(),s.join("/")}extractCommandVisibilityContext(e){let t=this.extractMetadata(e),i=this.extractInstanceClass(t),n=this.extractStatus(t),s=this.extractIsArchived(t),a=e.parent?.path||"",c=this.extractExpectedFolder(t);return{instanceClass:i,currentStatus:n,metadata:t,isArchived:s,currentFolder:a,expectedFolder:c}}extractCache(e){return e?this.vault.getFrontmatter(e):null}};Dc.MetadataExtractor=Fh});var Rc=y(Bn=>{"use strict";var v4=Bn&&Bn.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Bn,"__esModule",{value:!0});Bn.TaskFrontmatterGenerator=void 0;var S4=Qe(),a0=gi(),Ph=pr(),b4=Rn(),o0=Ia(),c0=kr(),yt=kt(),w4={[yt.AssetClass.AREA]:"ems__Effort_area",[yt.AssetClass.PROJECT]:"ems__Effort_parent",[yt.AssetClass.TASK_PROTOTYPE]:"exo__Asset_prototype",[yt.AssetClass.MEETING_PROTOTYPE]:"exo__Asset_prototype",[yt.AssetClass.EVENT_PROTOTYPE]:"exo__Asset_prototype"},E4={[yt.AssetClass.AREA]:yt.AssetClass.TASK,[yt.AssetClass.PROJECT]:yt.AssetClass.TASK,[yt.AssetClass.TASK_PROTOTYPE]:yt.AssetClass.TASK,[yt.AssetClass.MEETING_PROTOTYPE]:yt.AssetClass.MEETING,[yt.AssetClass.EVENT_PROTOTYPE]:yt.AssetClass.EVENT},Ih=class{static{o(this,"TaskFrontmatterGenerator")}generateTaskFrontmatter(e,t,i,n,s,a,c){let u=new Date,f=Ph.DateFormatter.toLocalTimestamp(u),l=o0.MetadataExtractor.extractIsDefinedBy(e),h=b4.WikiLinkHelpers.normalize(i),p=w4[h],g=E4[h]||yt.AssetClass.TASK,S={};S.exo__Asset_isDefinedBy=c0.MetadataHelpers.ensureQuoted(l),S.exo__Asset_uid=s||(0,a0.v4)(),S.exo__Asset_createdAt=f,S.exo__Instance_class=[`"[[${g}]]"`],S.ems__Effort_status='"[[ems__EffortStatusDraft]]"',p&&(S[p]=`"[[${t}]]"`);let b=n;if(g===yt.AssetClass.MEETING&&(!n||n.trim()==="")){let x=e.exo__Asset_label||t,F=Ph.DateFormatter.toDateString(u);b=`${x} ${F}`}if(b&&b.trim()!==""){let x=b.trim();S.exo__Asset_label=x,S.aliases=[x]}return a&&(S.ems__Task_size=a),c&&(S.ems__Effort_plannedStartTimestamp=c),S}generateRelatedTaskFrontmatter(e,t,i,n,s){let a=new Date,c=Ph.DateFormatter.toLocalTimestamp(a),u=o0.MetadataExtractor.extractIsDefinedBy(e),f={};if(f.exo__Asset_isDefinedBy=c0.MetadataHelpers.ensureQuoted(u),f.exo__Asset_uid=n||(0,a0.v4)(),f.exo__Asset_createdAt=c,f.exo__Instance_class=[`"[[${yt.AssetClass.TASK}]]"`],f.ems__Effort_status='"[[ems__EffortStatusDraft]]"',f.exo__Asset_relates=[`"[[${t}]]"`],i&&i.trim()!==""){let l=i.trim();f.exo__Asset_label=l,f.aliases=[l]}return s&&(f.ems__Task_size=s),f}};Bn.TaskFrontmatterGenerator=Ih;Bn.TaskFrontmatterGenerator=Ih=v4([(0,S4.injectable)()],Ih)});var Nc=y(Un=>{"use strict";var T4=Un&&Un.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Un,"__esModule",{value:!0});Un.AlgorithmExtractor=void 0;var A4=Qe(),Dh=class{static{o(this,"AlgorithmExtractor")}extractH2Section(e,t){let i=e.split(`
`),n=`## ${t}`,s=!1,a=[];for(let u of i){if(u.trim()===n){s=!0;continue}if(s){if(u.startsWith("## ")||u.startsWith("# "))break;a.push(u)}}return a.length===0?null:a.join(`
`).trim()||null}};Un.AlgorithmExtractor=Dh;Un.AlgorithmExtractor=Dh=T4([(0,A4.injectable)()],Dh)});var l0=y(u0=>{"use strict";Object.defineProperty(u0,"__esModule",{value:!0})});var tt=y(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.DI_TOKENS=void 0;kc.DI_TOKENS={IFileSystemAdapter:Symbol.for("IFileSystemAdapter"),IVaultAdapter:Symbol.for("IVaultAdapter"),IVaultContext:Symbol.for("IVaultContext"),IMultiVaultManager:Symbol.for("IMultiVaultManager"),ILogger:Symbol.for("ILogger"),IEventBus:Symbol.for("IEventBus"),IConfiguration:Symbol.for("IConfiguration"),INotificationService:Symbol.for("INotificationService"),TaskCreationService:Symbol.for("TaskCreationService"),ProjectCreationService:Symbol.for("ProjectCreationService"),AreaCreationService:Symbol.for("AreaCreationService"),ClassCreationService:Symbol.for("ClassCreationService"),ConceptCreationService:Symbol.for("ConceptCreationService"),FleetingNoteCreationService:Symbol.for("FleetingNoteCreationService"),SupervisionCreationService:Symbol.for("SupervisionCreationService"),TaskFrontmatterGenerator:Symbol.for("TaskFrontmatterGenerator"),AlgorithmExtractor:Symbol.for("AlgorithmExtractor"),TaskStatusService:Symbol.for("TaskStatusService"),EffortStatusWorkflow:Symbol.for("EffortStatusWorkflow"),StatusTimestampService:Symbol.for("StatusTimestampService"),PropertyCleanupService:Symbol.for("PropertyCleanupService"),FolderRepairService:Symbol.for("FolderRepairService"),LabelToAliasService:Symbol.for("LabelToAliasService"),RenameToUidService:Symbol.for("RenameToUidService"),PlanningService:Symbol.for("PlanningService"),EffortVotingService:Symbol.for("EffortVotingService"),SessionEventService:Symbol.for("SessionEventService"),AssetConversionService:Symbol.for("AssetConversionService"),NoteToRDFConverter:Symbol.for("NoteToRDFConverter"),AreaHierarchyBuilder:Symbol.for("AreaHierarchyBuilder"),URIConstructionService:Symbol.for("URIConstructionService")}});var Nh=y(Ct=>{"use strict";var x4=Ct&&Ct.__createBinding||(Object.create?(function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,i,n)}):(function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]})),O4=Ct&&Ct.__setModuleDefault||(Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e}),C4=Ct&&Ct.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},F4=Ct&&Ct.__importStar||(function(){var r=o(function(e){return r=Object.getOwnPropertyNames||function(t){var i=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[i.length]=n);return i},r(e)},"ownKeys");return function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i=r(e),n=0;n<i.length;n++)i[n]!=="default"&&x4(t,e,i[n]);return O4(t,e),t}})(),P4=Ct&&Ct.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},I4=Ct&&Ct.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Ct,"__esModule",{value:!0});Ct.TaskCreationService=void 0;var f0=Qe(),h0=gi(),D4=Rn(),d0=kr(),R4=kt(),N4=Rc(),k4=Nc(),HD=F4(l0()),j4=tt(),Rh=class{static{o(this,"TaskCreationService")}constructor(e,t,i){this.vault=e,this.frontmatterGenerator=t,this.algorithmExtractor=i}async createTask(e,t,i,n,s,a){let c=(0,h0.v4)(),u=`${c}.md`,f=this.frontmatterGenerator.generateTaskFrontmatter(t,e.basename,i,n,c,s,a),l="";if(D4.WikiLinkHelpers.normalize(i)===R4.AssetClass.TASK_PROTOTYPE){let x=await this.vault.read(e),F=this.algorithmExtractor.extractH2Section(x,"Algorithm");F&&(l=`## Algorithm

${F}`)}let p=d0.MetadataHelpers.buildFileContent(f,l),g=e.parent?.path||"",S=g?`${g}/${u}`:u;return await this.vault.create(S,p)}async createRelatedTask(e,t,i,n){let s=(0,h0.v4)(),a=`${s}.md`,c=this.frontmatterGenerator.generateRelatedTaskFrontmatter(t,e.basename,i,s,n),u=d0.MetadataHelpers.buildFileContent(c),f=e.parent?.path||"",l=f?`${f}/${a}`:a,h=await this.vault.create(l,u);return await this.addRelationToSourceFile(e,s),h}generateTaskFrontmatter(e,t,i,n,s,a,c){return this.frontmatterGenerator.generateTaskFrontmatter(e,t,i,n,s,a,c)}generateRelatedTaskFrontmatter(e,t,i,n,s){return this.frontmatterGenerator.generateRelatedTaskFrontmatter(e,t,i,n,s)}extractH2Section(e,t){return this.algorithmExtractor.extractH2Section(e,t)}async addRelationToSourceFile(e,t){let i=await this.vault.read(e),n=this.addRelationToFrontmatter(i,t);await this.vault.modify(e,n)}addRelationToFrontmatter(e,t){let i=/^---\r?\n([\s\S]*?)\r?\n---/,n=e.match(i),s=e.includes(`\r
`)?`\r
`:`
`;if(!n)return`---${s}exo__Asset_relates:${s}  - "[[${t}]]"${s}---${s}${e}`;let c=n[1];if(c.includes("exo__Asset_relates:")){let u=c.match(/exo__Asset_relates:\r?\n((?: {2}- .*\r?\n)*)/);if(u){let f=u[1],l=`  - "[[${t}]]"${s}`;c=c.replace(/exo__Asset_relates:\r?\n((?: {2}- .*\r?\n)*)/,`exo__Asset_relates:${s}${f}${l}`)}}else c+=`${s}exo__Asset_relates:${s}  - "[[${t}]]"`;return e.replace(i,`---${s}${c}${s}---`)}};Ct.TaskCreationService=Rh;Ct.TaskCreationService=Rh=C4([(0,f0.injectable)(),I4(0,(0,f0.inject)(j4.DI_TOKENS.IVaultAdapter)),P4("design:paramtypes",[Object,N4.TaskFrontmatterGenerator,k4.AlgorithmExtractor])],Rh)});var jh=y(jr=>{"use strict";var M4=jr&&jr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},L4=jr&&jr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},V4=jr&&jr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(jr,"__esModule",{value:!0});jr.ProjectCreationService=void 0;var p0=Qe(),m0=gi(),q4=Rn(),jc=kt(),B4=pr(),U4=Ia(),g0=kr(),$4=tt(),G4={[jc.AssetClass.AREA]:"ems__Effort_area",[jc.AssetClass.INITIATIVE]:"ems__Effort_parent",[jc.AssetClass.PROJECT]:"ems__Effort_parent"},kh=class{static{o(this,"ProjectCreationService")}constructor(e){this.vault=e}async createProject(e,t,i,n){let s=(0,m0.v4)(),a=`${s}.md`,c=this.generateProjectFrontmatter(t,e.basename,i,n,s),u=g0.MetadataHelpers.buildFileContent(c),f=e.parent?.path||"",l=f?`${f}/${a}`:a;return await this.vault.create(l,u)}generateProjectFrontmatter(e,t,i,n,s){let a=new Date,c=B4.DateFormatter.toLocalTimestamp(a),u=U4.MetadataExtractor.extractIsDefinedBy(e),f=q4.WikiLinkHelpers.normalize(i),l=G4[f]||"ems__Effort_area",h={};if(h.exo__Asset_isDefinedBy=g0.MetadataHelpers.ensureQuoted(u),h.exo__Asset_uid=s||(0,m0.v4)(),h.exo__Asset_createdAt=c,h.exo__Instance_class=[`"[[${jc.AssetClass.PROJECT}]]"`],h.ems__Effort_status='"[[ems__EffortStatusDraft]]"',h[l]=`"[[${t}]]"`,n&&n.trim()!==""){let p=n.trim();h.exo__Asset_label=p,h.aliases=[p]}return h}};jr.ProjectCreationService=kh;jr.ProjectCreationService=kh=M4([(0,p0.injectable)(),V4(0,(0,p0.inject)($4.DI_TOKENS.IVaultAdapter)),L4("design:paramtypes",[Object])],kh)});var bs=y(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.FrontmatterService=void 0;var Mc=class r{static{o(this,"FrontmatterService")}parse(e){let t=e.match(r.FRONTMATTER_REGEX);return t?{exists:!0,content:t[1],originalContent:e}:{exists:!1,content:"",originalContent:e}}updateProperty(e,t,i){let n=this.parse(e);if(!n.exists)return this.createFrontmatter(e,{[t]:i});let s=n.content;if(this.hasProperty(s,t)){let a=new RegExp(`${this.escapeRegex(t)}:.*$`,"m");s=s.replace(a,`${t}: ${i}`)}else{let a=s.length>0?`
`:"";s+=`${a}${t}: ${i}`}return e.replace(r.FRONTMATTER_REGEX,`---
${s}
---`)}addProperty(e,t,i){return this.updateProperty(e,t,i)}removeProperty(e,t){let i=this.parse(e);if(!i.exists||!this.hasProperty(i.content,t))return e;let n=new RegExp(`
?${this.escapeRegex(t)}:.*(?:
 {2}- .*)*`,"gm"),s=i.content.replace(n,"");return e.replace(r.FRONTMATTER_REGEX,`---
${s}
---`)}hasProperty(e,t){return e.includes(`${t}:`)}createFrontmatter(e,t){let n=`---
${Object.entries(t).map(([a,c])=>`${a}: ${c}`).join(`
`)}
---`,s=e.startsWith(`
`)?"":`
`;return`${n}${s}${e}`}getPropertyValue(e,t){let i=new RegExp(`${this.escapeRegex(t)}:\\s*(.*)$`,"m"),n=e.match(i);return n?n[1].trim():null}escapeRegex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}};Lc.FrontmatterService=Mc;Mc.FRONTMATTER_REGEX=/^---\n([\s\S]*?)\n---/});var Vc=y($n=>{"use strict";var W4=$n&&$n.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty($n,"__esModule",{value:!0});$n.EffortStatusWorkflow=void 0;var H4=Qe(),mr=kt(),Mh=class{static{o(this,"EffortStatusWorkflow")}getPreviousStatus(e,t){let i=this.normalizeStatus(e);if(i===mr.EffortStatus.DRAFT)return null;if(i===mr.EffortStatus.BACKLOG)return this.wrapStatus(mr.EffortStatus.DRAFT);if(i===mr.EffortStatus.ANALYSIS)return this.wrapStatus(mr.EffortStatus.BACKLOG);if(i===mr.EffortStatus.TODO)return this.wrapStatus(mr.EffortStatus.ANALYSIS);if(i===mr.EffortStatus.DOING)return this.hasInstanceClass(t,mr.AssetClass.PROJECT)?this.wrapStatus(mr.EffortStatus.TODO):this.wrapStatus(mr.EffortStatus.BACKLOG);if(i===mr.EffortStatus.DONE)return this.wrapStatus(mr.EffortStatus.DOING)}normalizeStatus(e){return e.replace(/["'[\]]/g,"").trim()}wrapStatus(e){return`"[[${e}]]"`}hasInstanceClass(e,t){return e?(Array.isArray(e)?e:[e]).some(n=>n.replace(/["'[\]]/g,"").trim()===t):!1}};$n.EffortStatusWorkflow=Mh;$n.EffortStatusWorkflow=Mh=W4([(0,H4.injectable)()],Mh)});var qc=y(Mr=>{"use strict";var z4=Mr&&Mr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},K4=Mr&&Mr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Y4=Mr&&Mr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.StatusTimestampService=void 0;var y0=Qe(),Q4=bs(),Da=pr(),J4=tt(),Lh=class{static{o(this,"StatusTimestampService")}constructor(e){this.vault=e,this.frontmatterService=new Q4.FrontmatterService}async addStartTimestamp(e){let t=await this.vault.read(e),i=Da.DateFormatter.toLocalTimestamp(new Date),n=this.frontmatterService.updateProperty(t,"ems__Effort_startTimestamp",i);await this.vault.modify(e,n)}async addEndTimestamp(e,t){let i=await this.vault.read(e),n=t||new Date,s=Da.DateFormatter.toLocalTimestamp(n),a=this.frontmatterService.updateProperty(i,"ems__Effort_endTimestamp",s);await this.vault.modify(e,a)}async addResolutionTimestamp(e){let t=await this.vault.read(e),i=Da.DateFormatter.toLocalTimestamp(new Date),n=this.frontmatterService.updateProperty(t,"ems__Effort_resolutionTimestamp",i);await this.vault.modify(e,n)}async addEndAndResolutionTimestamps(e,t){let i=await this.vault.read(e),n=t||new Date,s=Da.DateFormatter.toLocalTimestamp(n),a=this.frontmatterService.updateProperty(i,"ems__Effort_endTimestamp",s);a=this.frontmatterService.updateProperty(a,"ems__Effort_resolutionTimestamp",s),await this.vault.modify(e,a)}async removeStartTimestamp(e){let t=await this.vault.read(e),i=this.frontmatterService.removeProperty(t,"ems__Effort_startTimestamp");await this.vault.modify(e,i)}async removeEndTimestamp(e){let t=await this.vault.read(e),i=this.frontmatterService.removeProperty(t,"ems__Effort_endTimestamp");await this.vault.modify(e,i)}async removeResolutionTimestamp(e){let t=await this.vault.read(e),i=this.frontmatterService.removeProperty(t,"ems__Effort_resolutionTimestamp");await this.vault.modify(e,i)}async removeEndAndResolutionTimestamps(e){let t=await this.vault.read(e),i=this.frontmatterService.removeProperty(t,"ems__Effort_endTimestamp");i=this.frontmatterService.removeProperty(i,"ems__Effort_resolutionTimestamp"),await this.vault.modify(e,i)}async shiftPlannedEndTimestamp(e,t){let i=await this.vault.read(e),n=this.frontmatterService.parse(i);if(!n.exists)return;let s=this.frontmatterService.getPropertyValue(n.content,"ems__Effort_plannedEndTimestamp");if(!s)return;let a=new Date(s.replace(/["']/g,""));if(isNaN(a.getTime()))return;let c=new Date(a.getTime()+t),u=Da.DateFormatter.toLocalTimestamp(c),f=this.frontmatterService.updateProperty(i,"ems__Effort_plannedEndTimestamp",u);await this.vault.modify(e,f)}};Mr.StatusTimestampService=Lh;Mr.StatusTimestampService=Lh=z4([(0,y0.injectable)(),Y4(0,(0,y0.inject)(J4.DI_TOKENS.IVaultAdapter)),K4("design:paramtypes",[Object])],Lh)});var qh=y(Lr=>{"use strict";var X4=Lr&&Lr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Z4=Lr&&Lr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},eT=Lr&&Lr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.TaskStatusService=void 0;var _0=Qe(),tT=bs(),Gn=pr(),rT=Vc(),iT=qc(),nT=tt(),Vh=class{static{o(this,"TaskStatusService")}constructor(e,t,i){this.vault=e,this.workflow=t,this.timestampService=i,this.frontmatterService=new tT.FrontmatterService}async setDraftStatus(e){await this.updateStatus(e,"ems__EffortStatusDraft")}async moveToBacklog(e){await this.updateStatus(e,"ems__EffortStatusBacklog")}async moveToAnalysis(e){await this.updateStatus(e,"ems__EffortStatusAnalysis")}async moveToToDo(e){await this.updateStatus(e,"ems__EffortStatusToDo")}async startEffort(e){let t=await this.vault.read(e),i=Gn.DateFormatter.toLocalTimestamp(new Date),n=this.frontmatterService.updateProperty(t,"ems__Effort_status",'"[[ems__EffortStatusDoing]]"');n=this.frontmatterService.updateProperty(n,"ems__Effort_startTimestamp",i),await this.vault.modify(e,n)}async markTaskAsDone(e){let t=await this.vault.read(e),i=Gn.DateFormatter.toLocalTimestamp(new Date),n=this.frontmatterService.updateProperty(t,"ems__Effort_status",'"[[ems__EffortStatusDone]]"');n=this.frontmatterService.updateProperty(n,"ems__Effort_endTimestamp",i),n=this.frontmatterService.updateProperty(n,"ems__Effort_resolutionTimestamp",i),await this.vault.modify(e,n)}async syncEffortEndTimestamp(e,t){await this.timestampService.addEndAndResolutionTimestamps(e,t)}async shiftPlannedEndTimestamp(e,t){await this.timestampService.shiftPlannedEndTimestamp(e,t)}async trashEffort(e){let t=await this.vault.read(e),i=Gn.DateFormatter.toLocalTimestamp(new Date),n=this.frontmatterService.updateProperty(t,"ems__Effort_status",'"[[ems__EffortStatusTrashed]]"');n=this.frontmatterService.updateProperty(n,"ems__Effort_resolutionTimestamp",i),await this.vault.modify(e,n)}async archiveTask(e){let t=await this.vault.read(e),i=this.frontmatterService.updateProperty(t,"archived","true");i=this.frontmatterService.removeProperty(i,"aliases"),await this.vault.modify(e,i)}async planOnToday(e){let t=await this.vault.read(e),i=Gn.DateFormatter.getTodayStartTimestamp(),n=this.frontmatterService.updateProperty(t,"ems__Effort_plannedStartTimestamp",i);await this.vault.modify(e,n)}async planForEvening(e){let t=await this.vault.read(e),i=new Date;i.setHours(19,0,0,0);let n=Gn.DateFormatter.toLocalTimestamp(i),s=this.frontmatterService.updateProperty(t,"ems__Effort_plannedStartTimestamp",n);await this.vault.modify(e,s)}async shiftDayBackward(e){await this.shiftDay(e,-1)}async shiftDayForward(e){await this.shiftDay(e,1)}async rollbackStatus(e){let t=await this.vault.read(e),i=this.extractCurrentStatus(t),n=this.extractInstanceClass(t);if(!i)throw new Error("No current status to rollback from");let s=this.workflow.getPreviousStatus(i,n);if(s===void 0)throw new Error("Cannot rollback from current status");let a=t;s===null?a=this.frontmatterService.removeProperty(a,"ems__Effort_status"):a=this.frontmatterService.updateProperty(a,"ems__Effort_status",s);let c=this.workflow.normalizeStatus(i);c==="ems__EffortStatusDone"?(a=this.frontmatterService.removeProperty(a,"ems__Effort_endTimestamp"),a=this.frontmatterService.removeProperty(a,"ems__Effort_resolutionTimestamp")):c==="ems__EffortStatusDoing"&&(a=this.frontmatterService.removeProperty(a,"ems__Effort_startTimestamp")),await this.vault.modify(e,a)}async updateStatus(e,t){let i=await this.vault.read(e),n=this.frontmatterService.updateProperty(i,"ems__Effort_status",`"[[${t}]]"`);await this.vault.modify(e,n)}async shiftDay(e,t){let i=await this.vault.read(e),n=this.extractPlannedStartTimestamp(i);if(!n)throw new Error("ems__Effort_plannedStartTimestamp property not found");let s=this.parseDateFromTimestamp(n);if(!s)throw new Error("Invalid date format in ems__Effort_plannedStartTimestamp");let a=Gn.DateFormatter.addDays(s,t);a.setHours(0,0,0,0);let c=Gn.DateFormatter.toLocalTimestamp(a),u=this.frontmatterService.updateProperty(i,"ems__Effort_plannedStartTimestamp",c);await this.vault.modify(e,u)}parseDateFromTimestamp(e){let t=new Date(e);return isNaN(t.getTime())?null:t}extractPlannedStartTimestamp(e){let t=this.frontmatterService.parse(e);return t.exists?this.frontmatterService.getPropertyValue(t.content,"ems__Effort_plannedStartTimestamp"):null}extractCurrentStatus(e){let t=this.frontmatterService.parse(e);return t.exists?this.frontmatterService.getPropertyValue(t.content,"ems__Effort_status"):null}extractInstanceClass(e){let t=this.frontmatterService.parse(e);if(!t.exists)return null;let i=t.content.match(/exo__Instance_class:\s*\n((?:\s*-\s*.*\n?)+)/);return i?i[1].split(`
`).filter(s=>s.trim()).map(s=>s.replace(/^\s*-\s*/,"").trim()):this.frontmatterService.getPropertyValue(t.content,"exo__Instance_class")}};Lr.TaskStatusService=Vh;Lr.TaskStatusService=Vh=X4([(0,_0.injectable)(),eT(0,(0,_0.inject)(nT.DI_TOKENS.IVaultAdapter)),Z4("design:paramtypes",[Object,rT.EffortStatusWorkflow,iT.StatusTimestampService])],Vh)});var Uh=y(Vr=>{"use strict";var sT=Vr&&Vr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},aT=Vr&&Vr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},oT=Vr&&Vr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.AreaCreationService=void 0;var v0=Qe(),S0=gi(),cT=kt(),uT=pr(),lT=Ia(),b0=kr(),fT=tt(),Bh=class{static{o(this,"AreaCreationService")}constructor(e){this.vault=e}async createChildArea(e,t,i){let n=(0,S0.v4)(),s=`${n}.md`,a=this.generateChildAreaFrontmatter(t,e.basename,i,n),c=b0.MetadataHelpers.buildFileContent(a),u=e.parent?.path||"",f=u?`${u}/${s}`:s;return await this.vault.create(f,c)}generateChildAreaFrontmatter(e,t,i,n){let s=new Date,a=uT.DateFormatter.toLocalTimestamp(s),c=lT.MetadataExtractor.extractIsDefinedBy(e),u={};if(u.exo__Asset_isDefinedBy=b0.MetadataHelpers.ensureQuoted(c),u.exo__Asset_uid=n||(0,S0.v4)(),u.exo__Asset_createdAt=a,u.exo__Instance_class=[`"[[${cT.AssetClass.AREA}]]"`],u.ems__Area_parent=`"[[${t}]]"`,i&&i.trim()!==""){let f=i.trim();u.exo__Asset_label=f,u.aliases=[f]}return u}};Vr.AreaCreationService=Bh;Vr.AreaCreationService=Bh=sT([(0,v0.injectable)(),oT(0,(0,v0.inject)(fT.DI_TOKENS.IVaultAdapter)),aT("design:paramtypes",[Object])],Bh)});var Gh=y(qr=>{"use strict";var hT=qr&&qr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},dT=qr&&qr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},pT=qr&&qr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(qr,"__esModule",{value:!0});qr.AreaHierarchyBuilder=void 0;var w0=Qe(),E0=kt(),mT=tt(),$h=class{static{o(this,"AreaHierarchyBuilder")}constructor(e){this.vault=e}buildHierarchy(e,t){let i=this.vault.getAbstractFileByPath(e);if(!this.isFile(i))return null;let n=this.vault.getFrontmatter(i)||{};if(this.extractInstanceClass(n)!==E0.AssetClass.AREA)return null;let a=this.collectAllAreasFromVault(),c=new Set;return this.buildTree(e,a,c,0)}isFile(e){return e&&typeof e=="object"&&"basename"in e&&"path"in e}extractInstanceClass(e){let t=e.exo__Instance_class||"";return Array.isArray(t)?this.cleanWikiLink(t[0]||""):this.cleanWikiLink(t)}cleanWikiLink(e){return typeof e!="string"?"":e.replace(/^\[\[|\]\]$/g,"").trim()}collectAllAreasFromVault(){let e=new Map,t=new Map,i=this.vault.getAllFiles();for(let n of i){let s=this.vault.getFrontmatter(n)||{};if(this.extractInstanceClass(s)===E0.AssetClass.AREA){let c=this.extractParentPath(s);e.set(n.path,{path:n.path,title:n.basename,label:s.exo__Asset_label||void 0,isArchived:this.isArchived(s),depth:0,parentPath:c||void 0}),t.set(n.basename,n.path)}}for(let[,n]of e.entries())n.parentPath&&t.has(n.parentPath)&&(n.parentPath=t.get(n.parentPath));return e}extractParentPath(e){let t=e.ems__Area_parent;if(!t)return null;if(Array.isArray(t)){let i=t[0]||"";return this.cleanWikiLink(i)}return this.cleanWikiLink(t)}isArchived(e){let t=e.exo__Asset_archived;if(t===!0||t==="true")return!0;if(Array.isArray(t)&&t.length>0){let i=t[0];return i===!0||i==="true"}return!1}buildTree(e,t,i,n){if(i.has(e))return null;i.add(e);let s=t.get(e);if(!s)return null;let a=[];for(let[c,u]of t.entries())if(u.parentPath===e){let f=this.buildTree(c,t,i,n+1);f&&a.push(f)}return a.sort((c,u)=>{let f=c.label||c.title,l=u.label||u.title;return f.localeCompare(l)}),{path:s.path,title:s.title,label:s.label,isArchived:s.isArchived,depth:n,parentPath:s.parentPath,children:a}}};qr.AreaHierarchyBuilder=$h;qr.AreaHierarchyBuilder=$h=hT([(0,w0.injectable)(),pT(0,(0,w0.inject)(mT.DI_TOKENS.IVaultAdapter)),dT("design:paramtypes",[Object])],$h)});var Hh=y(Br=>{"use strict";var gT=Br&&Br.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},yT=Br&&Br.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},_T=Br&&Br.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Br,"__esModule",{value:!0});Br.ClassCreationService=void 0;var T0=Qe(),vT=gi(),ST=pr(),bT=kr(),wT=tt(),Wh=class{static{o(this,"ClassCreationService")}constructor(e){this.vault=e}async createSubclass(e,t,i){let n=(0,vT.v4)(),s=this.generateFileName(t),a=s.endsWith(".md")?s:`${s}.md`,c=this.generateClassFrontmatter(e.basename,t,n,i),u=bT.MetadataHelpers.buildFileContent(c),f="classes",l=`${f}/${a}`;return this.vault.getAbstractFileByPath(f)||await this.vault.createFolder(f),await this.vault.create(l,u)}generateFileName(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}generateClassFrontmatter(e,t,i,n){let s=new Date,a=ST.DateFormatter.toLocalTimestamp(s),c={};c.exo__Asset_uid=i,c.exo__Asset_label=t,c.exo__Asset_createdAt=a,c.exo__Instance_class=['"[[exo__Class]]"'],c.exo__Class_superClass=`"[[${e}]]"`;let u=n.exo__Asset_isDefinedBy||'"[[Ontology/EXO]]"';return c.exo__Asset_isDefinedBy=u,c.aliases=[t],c}};Br.ClassCreationService=Wh;Br.ClassCreationService=Wh=gT([(0,T0.injectable)(),_T(0,(0,T0.inject)(wT.DI_TOKENS.IVaultAdapter)),yT("design:paramtypes",[Object])],Wh)});var Kh=y(Ur=>{"use strict";var ET=Ur&&Ur.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},TT=Ur&&Ur.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},AT=Ur&&Ur.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.ConceptCreationService=void 0;var A0=Qe(),xT=gi(),OT=pr(),CT=kr(),FT=kt(),PT=tt(),zh=class{static{o(this,"ConceptCreationService")}constructor(e){this.vault=e}async createNarrowerConcept(e,t,i,n){let s=(0,xT.v4)(),a=t.endsWith(".md")?t:`${t}.md`,c=this.generateConceptFrontmatter(e.basename,i,n,s),u=CT.MetadataHelpers.buildFileContent(c),f="concepts",l=`${f}/${a}`;return this.vault.getAbstractFileByPath(f)||await this.vault.createFolder(f),await this.vault.create(l,u)}generateConceptFrontmatter(e,t,i,n){let s=new Date,a=OT.DateFormatter.toLocalTimestamp(s),c={};return c.exo__Asset_isDefinedBy='"[[!concepts]]"',c.exo__Asset_uid=n,c.exo__Asset_createdAt=a,c.exo__Instance_class=[`"[[${FT.AssetClass.CONCEPT}]]"`],c.ims__Concept_broader=`"[[${e}]]"`,c.ims__Concept_definition=t,i.length>0&&(c.aliases=i),c}};Ur.ConceptCreationService=zh;Ur.ConceptCreationService=zh=ET([(0,A0.injectable)(),AT(0,(0,A0.inject)(PT.DI_TOKENS.IVaultAdapter)),TT("design:paramtypes",[Object])],zh)});var Qh=y($r=>{"use strict";var IT=$r&&$r.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},DT=$r&&$r.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},RT=$r&&$r.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty($r,"__esModule",{value:!0});$r.EffortVotingService=void 0;var x0=Qe(),NT=tt(),Yh=class{static{o(this,"EffortVotingService")}constructor(e){this.vault=e}async incrementEffortVotes(e){let t=await this.vault.read(e),n=this.extractVoteCount(t)+1,s=this.updateFrontmatterWithVotes(t,n);return await this.vault.modify(e,s),n}extractVoteCount(e){let t=/^---\r?\n([\s\S]*?)\r?\n---/,i=e.match(t);if(!i)return 0;let s=i[1].match(/ems__Effort_votes:\s*(\d+)/);return s&&s[1]?parseInt(s[1],10):0}updateFrontmatterWithVotes(e,t){let i=/^---\r?\n([\s\S]*?)\r?\n---/,n=e.match(i),s=e.includes(`\r
`)?`\r
`:`
`;if(!n)return`---${s}ems__Effort_votes: ${t}${s}---${s}${e}`;let c=n[1];return c.includes("ems__Effort_votes:")?c=c.replace(/ems__Effort_votes:.*$/m,`ems__Effort_votes: ${t}`):c+=`${s}ems__Effort_votes: ${t}`,e.replace(i,`---${s}${c}${s}---`)}};$r.EffortVotingService=Yh;$r.EffortVotingService=Yh=IT([(0,x0.injectable)(),RT(0,(0,x0.inject)(NT.DI_TOKENS.IVaultAdapter)),DT("design:paramtypes",[Object])],Yh)});var Xh=y(Gr=>{"use strict";var kT=Gr&&Gr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},jT=Gr&&Gr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},MT=Gr&&Gr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.FolderRepairService=void 0;var O0=Qe(),LT=tt(),Jh=class{static{o(this,"FolderRepairService")}constructor(e){this.vault=e}async getExpectedFolder(e,t){let i=t?.exo__Asset_isDefinedBy;if(!i)return null;let n=this.extractReference(i);if(!n)return null;let s=this.vault.getFirstLinkpathDest(n,e.path);return s?this.getFileFolder(s):null}async repairFolder(e,t){let i=`${t}/${e.name}`;if(this.vault.getAbstractFileByPath(i))throw new Error(`Cannot move file: ${i} already exists`);await this.ensureFolderExists(t),await this.vault.rename(e,i)}getFileFolder(e){return e.parent?.path||""}extractReference(e){if(typeof e!="string")return null;let t=e.trim().replace(/^["']|["']$/g,"");return t=t.replace(/^\[\[|\]\]$/g,""),t||null}async ensureFolderExists(e){if(!e)return;let t=this.vault.getAbstractFileByPath(e);if(!(t&&"children"in t))try{await this.vault.createFolder(e)}catch(i){if(i instanceof Error&&i.message.includes("Folder already exists"))return;throw i}}};Gr.FolderRepairService=Jh;Gr.FolderRepairService=Jh=kT([(0,O0.injectable)(),MT(0,(0,O0.inject)(LT.DI_TOKENS.IVaultAdapter)),jT("design:paramtypes",[Object])],Jh)});var ed=y(Wr=>{"use strict";var VT=Wr&&Wr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},qT=Wr&&Wr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},BT=Wr&&Wr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.LabelToAliasService=void 0;var C0=Qe(),UT=tt(),Zh=class{static{o(this,"LabelToAliasService")}constructor(e){this.vault=e}async copyLabelToAliases(e){let t=await this.vault.read(e),i=this.extractLabel(t);if(!i)throw new Error("No exo__Asset_label found in file");let n=this.addLabelToAliases(t,i);await this.vault.modify(e,n)}extractLabel(e){let t=/^---\r?\n([\s\S]*?)\r?\n---/,i=e.match(t);if(!i)return null;let s=i[1].match(/exo__Asset_label:\s*["']?([^"'\r\n]+)["']?/);return s&&s[1]?s[1].trim():null}addLabelToAliases(e,t){let i=/^---\r?\n([\s\S]*?)\r?\n---/,n=e.match(i),s=e.includes(`\r
`)?`\r
`:`
`;if(!n)return`---${s}aliases:${s}  - "${t}"${s}---${s}${e}`;let c=n[1];return c.includes("aliases:")?c.match(/(aliases:\r?\n(?: {2}- .*\r?\n)*)/)&&(c=c.replace(/(aliases:\r?\n(?: {2}- .*\r?\n)*)/,`$1  - "${t}"${s}`)):c+=`${s}aliases:${s}  - "${t}"`,e.replace(i,`---${s}${c}${s}---`)}};Wr.LabelToAliasService=Zh;Wr.LabelToAliasService=Zh=VT([(0,C0.injectable)(),BT(0,(0,C0.inject)(UT.DI_TOKENS.IVaultAdapter)),qT("design:paramtypes",[Object])],Zh)});var td=y(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.LoggingService=void 0;var Bc=class{static{o(this,"LoggingService")}static setVerbose(e){this.isVerbose=e}static debug(e,t){this.isVerbose&&console.debug(`[Exocortex] ${e}`,t??"")}static info(e,t){console.log(`[Exocortex] ${e}`,t??"")}static warn(e,t){console.warn(`[Exocortex] ${e}`,t??"")}static error(e,t){console.error(`[Exocortex ERROR] ${e}`,t??""),t?.stack&&console.error(t.stack)}};Uc.LoggingService=Bc;Bc.isVerbose=!1});var nd=y(Hr=>{"use strict";var $T=Hr&&Hr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},GT=Hr&&Hr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},F0=Hr&&Hr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.PropertyCleanupService=void 0;var rd=Qe(),P0=tt(),id=class{static{o(this,"PropertyCleanupService")}constructor(e,t){this.vault=e,this.logger=t,this.logger.debug("PropertyCleanupService initialized")}async cleanEmptyProperties(e){this.logger.debug("Cleaning empty properties",{path:e.path});let t=await this.vault.read(e),i=this.removeEmptyPropertiesFromContent(t);await this.vault.modify(e,i),this.logger.info("Empty properties cleaned",{path:e.path})}removeEmptyPropertiesFromContent(e){let t=/^---\n([\s\S]*?)\n---/,i=e.match(t);if(!i)return e;let s=i[1].split(`
`),a=[],c=0;for(;c<s.length;){let f=s[c],l=f.trim();if(l===""){a.push(f),c++;continue}let h=l.match(/^([^:]+):\s*(.*)$/);if(h){let p=h[2];if(p===""&&c+1<s.length&&s[c+1].match(/^\s+- /)){let S=[],b=c+1;for(;b<s.length&&s[b].match(/^\s+- /);)S.push(s[b]),b++;if(S.every(F=>{let P=F.replace(/^\s+- /,"").trim();return this.isEmptyValue(P)})){c=b;continue}else{a.push(f);for(let F=c+1;F<b;F++)a.push(s[F]);c=b;continue}}if(this.isEmptyValue(p)){c++;continue}a.push(f),c++}else l.match(/^\s*- /)||a.push(f),c++}let u=a.join(`
`);return e.replace(t,`---
${u}
---`)}isEmptyValue(e){let t=e.trim();return t===""||t==="null"||t==="undefined"||t==="[]"||t==="{}"||t==='""'||t==="''"}};Hr.PropertyCleanupService=id;Hr.PropertyCleanupService=id=$T([(0,rd.injectable)(),F0(0,(0,rd.inject)(P0.DI_TOKENS.IVaultAdapter)),F0(1,(0,rd.inject)(P0.DI_TOKENS.ILogger)),GT("design:paramtypes",[Object,Object])],id)});var ad=y(zr=>{"use strict";var WT=zr&&zr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},HT=zr&&zr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},zT=zr&&zr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(zr,"__esModule",{value:!0});zr.RenameToUidService=void 0;var I0=Qe(),KT=tt(),sd=class{static{o(this,"RenameToUidService")}constructor(e){this.vault=e}async renameToUid(e,t){let i=t.exo__Asset_uid;if(!i)throw new Error("Asset has no exo__Asset_uid property");let n=e.basename,s=i;if(n===s)throw new Error("File is already named according to UID");let a=t.exo__Asset_label;if(!a||a.trim()===""){let l=this.isAssetArchived(t);await this.updateLabel(e,n,l)}let u=e.parent?.path||"",f=u?`${u}/${s}.md`:`${s}.md`;await this.vault.updateLinks(e.path,f,n),await this.vault.rename(e,f)}async updateLabel(e,t,i){await this.vault.process(e,n=>{let s=/^---\n([\s\S]*?)\n---/,a=n.match(s);if(!a)return n;let c=a[1],u=i?`${c}
exo__Asset_label: ${t}`:`${c}
exo__Asset_label: ${t}
aliases:
  - ${t}`;return n.replace(s,`---
${u}
---`)})}isAssetArchived(e){if(e?.exo__Asset_isArchived===!0)return!0;let t=e?.archived;if(t==null)return!1;if(typeof t=="boolean")return t;if(typeof t=="number")return t!==0;if(typeof t=="string"){let i=t.toLowerCase().trim();return i==="true"||i==="yes"||i==="1"}return!1}};zr.RenameToUidService=sd;zr.RenameToUidService=sd=WT([(0,I0.injectable)(),zT(0,(0,I0.inject)(KT.DI_TOKENS.IVaultAdapter)),HT("design:paramtypes",[Object])],sd)});var cd=y(Kr=>{"use strict";var YT=Kr&&Kr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},QT=Kr&&Kr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},JT=Kr&&Kr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.SupervisionCreationService=void 0;var D0=Qe(),XT=gi(),ZT=pr(),eA=tt(),od=class{static{o(this,"SupervisionCreationService")}constructor(e){this.vault=e}async createSupervision(e){let t=(0,XT.v4)(),i=`${t}.md`,n=this.generateFrontmatter(t),s=this.generateBody(e),a=this.buildFileContent(n,s),c=`01 Inbox/${i}`;return await this.vault.create(c,a)}generateFrontmatter(e){let t=new Date,i=ZT.DateFormatter.toLocalTimestamp(t);return{exo__Asset_isDefinedBy:'"[[!kitelev]]"',exo__Asset_uid:e,exo__Asset_createdAt:i,exo__Instance_class:['"[[ztlk__FleetingNote]]"'],ztlk__FleetingNote_type:'"[[CBT-Diary Record]]"'}}generateBody(e){return[{label:"\u0421\u0438\u0442\u0443\u0430\u0446\u0438\u044F/\u0442\u0440\u0438\u0433\u0433\u0435\u0440",value:e.situation},{label:"\u042D\u043C\u043E\u0446\u0438\u0438",value:e.emotions},{label:"\u041C\u044B\u0441\u043B\u0438",value:e.thoughts},{label:"\u041F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u0435",value:e.behavior},{label:"\u041A\u0440\u0430\u0442\u043A\u043E\u0441\u0440\u043E\u0447\u043D\u044B\u0435 \u043F\u043E\u0441\u043B\u0435\u0434\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F",value:e.shortTermConsequences},{label:"\u0414\u043E\u043B\u0433\u043E\u0441\u0440\u043E\u0447\u043D\u044B\u0435 \u043F\u043E\u0441\u043B\u0435\u0434\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F",value:e.longTermConsequences}].map(i=>`- ${i.label}: ${i.value}`).join(`
`)}buildFileContent(e,t){return`---
${Object.entries(e).map(([n,s])=>{if(Array.isArray(s)){let a=s.map(c=>`  - ${c}`).join(`
`);return`${n}:
${a}`}return`${n}: ${s}`}).join(`
`)}
---

${t}
`}};Kr.SupervisionCreationService=od;Kr.SupervisionCreationService=od=YT([(0,D0.injectable)(),JT(0,(0,D0.inject)(eA.DI_TOKENS.IVaultAdapter)),QT("design:paramtypes",[Object])],od)});var ld=y(Yr=>{"use strict";var tA=Yr&&Yr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},rA=Yr&&Yr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},iA=Yr&&Yr.__param||function(r,e){return function(t,i){e(t,i,r)}},ud;Object.defineProperty(Yr,"__esModule",{value:!0});Yr.FleetingNoteCreationService=void 0;var R0=Qe(),nA=gi(),sA=pr(),aA=kr(),oA=tt(),$c=ud=class{static{o(this,"FleetingNoteCreationService")}constructor(e){this.vault=e}async createFleetingNote(e){let t=(0,nA.v4)(),i=`${t}.md`,n=this.generateFrontmatter(t,e),s=aA.MetadataHelpers.buildFileContent(n),a=`${ud.INBOX_FOLDER}/${i}`;return await this.vault.create(a,s)}generateFrontmatter(e,t){let i=new Date,n=sA.DateFormatter.toLocalTimestamp(i),s=t.trim();return{exo__Asset_isDefinedBy:'"[[!kitelev]]"',exo__Asset_uid:e,exo__Asset_createdAt:n,exo__Instance_class:['"[[ztlk__FleetingNote]]"'],exo__Asset_label:s,aliases:[s]}}};Yr.FleetingNoteCreationService=$c;$c.INBOX_FOLDER="01 Inbox";Yr.FleetingNoteCreationService=$c=ud=tA([(0,R0.injectable)(),iA(0,(0,R0.inject)(oA.DI_TOKENS.IVaultAdapter)),rA("design:paramtypes",[Object])],$c)});var hd=y(Qr=>{"use strict";var cA=Qr&&Qr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},uA=Qr&&Qr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},lA=Qr&&Qr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.PlanningService=void 0;var N0=Qe(),fA=bs(),hA=pr(),dA=tt(),fd=class{static{o(this,"PlanningService")}constructor(e){this.vault=e,this.frontmatterService=new fA.FrontmatterService}async planOnToday(e){let t=this.vault.getAbstractFileByPath(e);if(!t||!this.isFile(t))throw new Error(`File not found: ${e}`);let i=await this.vault.read(t),n=hA.DateFormatter.getTodayStartTimestamp(),s=this.frontmatterService.updateProperty(i,"ems__Effort_plannedStartTimestamp",n);await this.vault.modify(t,s)}isFile(e){return"basename"in e}};Qr.PlanningService=fd;Qr.PlanningService=fd=cA([(0,N0.injectable)(),lA(0,(0,N0.inject)(dA.DI_TOKENS.IVaultAdapter)),uA("design:paramtypes",[Object])],fd)});var pd=y(Jr=>{"use strict";var pA=Jr&&Jr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},mA=Jr&&Jr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},gA=Jr&&Jr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.AssetConversionService=void 0;var k0=Qe(),j0=kt(),yA=bs(),Gc=td(),_A=tt(),dd=class{static{o(this,"AssetConversionService")}constructor(e){this.vault=e,this.frontmatterService=new yA.FrontmatterService}async convertTaskToProject(e){try{let t=await this.vault.read(e),i=this.removeInstanceClassProperty(t);return i=this.frontmatterService.updateProperty(i,"exo__Instance_class",`["[[${j0.AssetClass.PROJECT}]]"]`),await this.vault.modify(e,i),Gc.LoggingService.info(`Converted Task to Project: ${e.basename} (${e.path})`),e}catch(t){let i=`Failed to convert Task to Project: ${e.path}`;throw Gc.LoggingService.error(i,t instanceof Error?t:void 0),new Error(i)}}async convertProjectToTask(e){try{let t=await this.vault.read(e),i=this.removeInstanceClassProperty(t);return i=this.frontmatterService.updateProperty(i,"exo__Instance_class",`["[[${j0.AssetClass.TASK}]]"]`),await this.vault.modify(e,i),Gc.LoggingService.info(`Converted Project to Task: ${e.basename} (${e.path})`),e}catch(t){let i=`Failed to convert Project to Task: ${e.path}`;throw Gc.LoggingService.error(i,t instanceof Error?t:void 0),new Error(i)}}removeInstanceClassProperty(e){let t=this.frontmatterService.parse(e);if(!t.exists)return e;let i=/^exo__Instance_class:.*$(\n  -.*$)*/gm,n=t.content.replace(i,"").replace(/\n\n+/g,`
`).trim();return e.replace(/^---\n[\s\S]*?\n---/,`---
${n}
---`)}};Jr.AssetConversionService=dd;Jr.AssetConversionService=dd=pA([(0,k0.injectable)(),gA(0,(0,k0.inject)(_A.DI_TOKENS.IVaultAdapter)),mA("design:paramtypes",[Object])],dd)});var gd=y(Xr=>{"use strict";var vA=Xr&&Xr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},SA=Xr&&Xr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},bA=Xr&&Xr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.SessionEventService=void 0;var M0=Qe(),wA=gi(),L0=kt(),EA=pr(),TA=kr(),AA=tt(),md=class{static{o(this,"SessionEventService")}constructor(e){this.vault=e,this.folderPathCache=null,this.defaultOntologyAsset=null}setDefaultOntologyAsset(e){this.defaultOntologyAsset=e,this.folderPathCache=null}async createSessionStartEvent(e){return this.createSessionEvent(e,L0.AssetClass.SESSION_START_EVENT)}async createSessionEndEvent(e){return this.createSessionEvent(e,L0.AssetClass.SESSION_END_EVENT)}async getOntologyAssetFolder(){if(this.folderPathCache!==null)return this.folderPathCache;if(!this.defaultOntologyAsset){let i=this.vault.getDefaultNewFileParent();return this.folderPathCache=i?.path||"",this.folderPathCache}let e=this.vault.getAllFiles();for(let i of e)if(i.basename===this.defaultOntologyAsset){let n=i.parent?.path||"";return this.folderPathCache=n,this.folderPathCache}let t=this.vault.getDefaultNewFileParent();return this.folderPathCache=t?.path||"",this.folderPathCache}async createSessionEvent(e,t){let i=(0,wA.v4)(),n=EA.DateFormatter.toLocalTimestamp(new Date),s=this.defaultOntologyAsset?`"[[${this.defaultOntologyAsset}]]"`:'"[[!kitelev]]"',a={exo__Asset_uid:i,exo__Asset_createdAt:n,exo__Asset_isDefinedBy:s,exo__Instance_class:[`"[[${t}]]"`],ems__SessionEvent_timestamp:n,ems__Session_area:`"[[${e}]]"`},c=TA.MetadataHelpers.buildFileContent(a),u=await this.getOntologyAssetFolder();u&&!await this.vault.exists(u)&&await this.vault.createFolder(u);let f=u?`${u}/${i}.md`:`${i}.md`;return await this.vault.create(f,c)}};Xr.SessionEventService=md;Xr.SessionEventService=md=vA([(0,M0.injectable)(),bA(0,(0,M0.inject)(AA.DI_TOKENS.IVaultAdapter)),SA("design:paramtypes",[Object])],md)});var _d=y(Zr=>{"use strict";var xA=Zr&&Zr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},OA=Zr&&Zr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},CA=Zr&&Zr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Zr,"__esModule",{value:!0});Zr.URIConstructionService=void 0;var V0=Qe(),FA=tt(),yd=class{static{o(this,"URIConstructionService")}constructor(e){this.fileSystem=e,this.defaultOntologyURL="https://exocortex.my/default/",this.strictValidation=!0}configure(e){e?.defaultOntologyURL&&(this.defaultOntologyURL=e.defaultOntologyURL),e?.strictValidation!==void 0&&(this.strictValidation=e.strictValidation)}async constructAssetURI(e){let t=this.extractUID(e);if(!t){if(this.strictValidation)throw new Error(`Asset missing exo__Asset_uid: ${e.path}`);return console.warn(`Asset ${e.path} missing UID, using filename fallback`),this.constructFallbackURI(e)}let i=await this.resolveOntologyURL(e);if(!this.validateOntologyURL(i))throw new Error(`Invalid ontology URL: ${i}`);return`${i.endsWith("/")?i:`${i}/`}${t}`}validateOntologyURL(e){if(!e)return!1;try{let t=new URL(e);return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}}async resolveOntologyURL(e){let t=e.frontmatter?.exo__Asset_isDefinedBy;if(!t)return this.defaultOntologyURL;let i=this.extractWikiLink(t),n=i,s=await this.fileSystem.fileExists(i);return!s&&!i.endsWith(".md")&&(n=`${i}.md`,s=await this.fileSystem.fileExists(n)),s?(await this.fileSystem.getFileMetadata(n))?.exo__Ontology_url||this.defaultOntologyURL:(console.warn(`Ontology file not found: ${i}, using default`),this.defaultOntologyURL)}extractUID(e){return e.frontmatter?.exo__Asset_uid||null}extractWikiLink(e){return e.replace(/^\[\[|\]\]$/g,"")}constructFallbackURI(e){let t=e.path.split("/").pop()?.replace(".md","")||"unknown";return`${this.defaultOntologyURL}${t}`}};Zr.URIConstructionService=yd;Zr.URIConstructionService=yd=xA([(0,V0.injectable)(),CA(0,(0,V0.inject)(FA.DI_TOKENS.IFileSystemAdapter)),OA("design:paramtypes",[Object])],yd)});var q0=y(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.EffortSortingHelpers=void 0;var vd=class r{static{o(this,"EffortSortingHelpers")}static getTimeFromTimestamp(e){if(!e)return"00:00:00";let t=new Date(e);if(isNaN(t.getTime()))return"00:00:00";let i=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${i}:${n}:${s}`}static sortByStartTime(e,t){let i=r.getTimeFromTimestamp(e.startTimestamp),n=r.getTimeFromTimestamp(t.startTimestamp),s=i==="00:00:00",a=n==="00:00:00";return s&&!a?1:!s&&a?-1:i.localeCompare(n)}static sortByPriority(e,t){if(e.isTrashed!==t.isTrashed)return e.isTrashed?1:-1;if(e.isDone!==t.isDone)return e.isDone?1:-1;let i=typeof e.metadata.ems__Effort_votes=="number"?e.metadata.ems__Effort_votes:0,n=typeof t.metadata.ems__Effort_votes=="number"?t.metadata.ems__Effort_votes:0;return i!==n?n-i:e.startTime&&t.startTime?e.startTime.localeCompare(t.startTime):e.startTime?-1:t.startTime?1:0}};Wc.EffortSortingHelpers=vd});var bd=y(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.NTriplesSerializer=void 0;var Sd=class{static{o(this,"NTriplesSerializer")}serialize(e,t={}){let i=t.newline??`
`;return e.length===0?"":e.map(n=>n.toString()).join(i)+i}serializeChunk(e,t){return e.length===0?"":e.map(i=>i.toString()).join(t)+t}};Hc.NTriplesSerializer=Sd});var B0=y(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.TurtleSerializer=void 0;var ws=ki(),PA=bd(),IA={rdf:ws.Namespace.RDF.iri.value,rdfs:ws.Namespace.RDFS.iri.value,owl:ws.Namespace.OWL.iri.value,xsd:ws.Namespace.XSD.iri.value,exo:ws.Namespace.EXO.iri.value,ems:ws.Namespace.EMS.iri.value},wd=class{static{o(this,"TurtleSerializer")}constructor(){this.nTriplesSerializer=new PA.NTriplesSerializer}serialize(e,t={}){let i=t.newline??`
`,n=this.composePrefixes(t),s=this.serializePrefixes(n,i),a=this.nTriplesSerializer.serialize(e,{newline:i}).trimEnd();return s?a?`${s}${i}${i}${a}${i}`:`${s}${i}`:a?`${a}${i}`:""}serializePrefixes(e,t){let i=Object.entries(e);return i.length===0?"":i.map(([n,s])=>`@prefix ${n}: <${s}> .`).join(t)}composePrefixes(e){return e.includeDefaultPrefixes??!0?{...IA,...e.prefixes??{}}:{...e.prefixes??{}}}serializeTriplesOnly(e,t){return this.nTriplesSerializer.serializeChunk(e,t).trimEnd()}};zc.TurtleSerializer=wd});var G0=y(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.JSONLDSerializer=void 0;var U0=xt(),$0=pi(),DA=Ht(),Es=ki(),RA={rdf:Es.Namespace.RDF.iri.value,rdfs:Es.Namespace.RDFS.iri.value,owl:Es.Namespace.OWL.iri.value,xsd:Es.Namespace.XSD.iri.value,exo:Es.Namespace.EXO.iri.value,ems:Es.Namespace.EMS.iri.value},Ed=class{static{o(this,"JSONLDSerializer")}toDocument(e,t={}){let i={...RA,...t.context??{}},n=new Map;for(let s of e){let a=this.subjectToId(s.subject),c=this.compactIri(s.predicate.value,i),u=this.objectToJSONLD(s.object,i),f=n.get(a)??{"@id":a},l=f[c];l===void 0?f[c]=u:Array.isArray(l)?l.push(u):f[c]=[l,u],n.set(a,f)}return{"@context":i,"@graph":Array.from(n.values())}}serialize(e,t={}){let i=this.toDocument(e,t),n=t.pretty?t.indent??2:void 0;return JSON.stringify(i,null,n)}subjectToId(e){return e instanceof U0.IRI?e.value:e instanceof $0.BlankNode?`_:${e.id}`:String(e)}compactIri(e,t){for(let[i,n]of Object.entries(t))if(e.startsWith(n)){let s=e.slice(n.length);if(s.length>0)return`${i}:${s}`}return e}objectToJSONLD(e,t){if(e instanceof U0.IRI)return{"@id":e.value};if(e instanceof $0.BlankNode)return{"@id":`_:${e.id}`};if(e instanceof DA.Literal){let i={"@value":e.value};return e.datatype?i["@type"]=this.compactIri(e.datatype.value,t):e.language&&(i["@language"]=e.language),i}return e}};Kc.JSONLDSerializer=Ed});var xd=y(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.NTriplesParser=void 0;var NA=Dn(),W0=xt(),Td=Ht(),kA=pi(),Ts=ki(),jA={rdf:Ts.Namespace.RDF.iri.value,rdfs:Ts.Namespace.RDFS.iri.value,owl:Ts.Namespace.OWL.iri.value,xsd:Ts.Namespace.XSD.iri.value,exo:Ts.Namespace.EXO.iri.value,ems:Ts.Namespace.EMS.iri.value},Ad=class{static{o(this,"NTriplesParser")}parse(e,t={}){let i={prefixes:{...jA,...t.prefixes??{}},strict:t.strict??!1},n=[];return e.split(/\r?\n/).forEach((a,c)=>{let u=a.trim();!u||u.startsWith("#")||n.push(this.parseLine(u,c+1,i))}),n}parseLine(e,t,i){if(!e.endsWith("."))throw new Error(`Invalid RDF statement at line ${t}: missing '.' terminator`);let s=e.slice(0,-1).trim(),a=this.parseSubject(s,t,i);s=a.rest.trim();let c=this.parsePredicate(s,t,i);s=c.rest.trim();let u=this.parseObject(s,t,i);if(s=u.rest.trim(),s.length>0)throw new Error(`Unexpected tokens after object at line ${t}`);return new NA.Triple(a.node,c.node,u.node)}parseSubject(e,t,i){return e.startsWith("<")?this.consumeIRI(e,t,i):e.startsWith("_:")?this.consumeBlankNode(e,t):this.consumePrefixedName(e,t,i)}parsePredicate(e,t,i){return e.startsWith("<")?this.consumeIRI(e,t,i):this.consumePrefixedName(e,t,i)}parseObject(e,t,i){return e.startsWith("<")?this.consumeIRI(e,t,i):e.startsWith("_:")?this.consumeBlankNode(e,t):e.startsWith('"')?this.consumeLiteral(e,t,i):this.consumePrefixedName(e,t,i)}consumePrefixedName(e,t,i){let n=e.match(/^([a-zA-Z_][\w-]*):([^\s]+)(?:\s+(.*))?$/);if(!n)throw new Error(`Invalid token at line ${t}: ${e}`);let[,s,a,c]=n,u=i.prefixes[s];if(!u)throw new Error(`Unknown prefix "${s}" at line ${t}`);return{node:new W0.IRI(`${u}${a}`),rest:(c??"").trimStart()}}consumeIRI(e,t,i){let n=this.findClosingBracket(e,"<",">");if(n===-1)throw new Error(`Invalid IRI at line ${t}`);let s=e.slice(1,n),a=new W0.IRI(s),c=e.slice(n+1).trimStart();return{node:a,rest:c}}consumeBlankNode(e,t){let i=e.match(/^_:(\w+)(?:\s+(.*))?$/);if(!i)throw new Error(`Invalid blank node identifier at line ${t}`);let[,n,s]=i;return{node:new kA.BlankNode(n),rest:(s??"").trimStart()}}consumeLiteral(e,t,i){let{value:n,rest:s}=this.consumeQuotedString(e,t),a=s.trimStart();if(a.startsWith("^^")){a=a.slice(2).trimStart();let c=a.startsWith("<")?this.consumeIRI(a,t,i):this.consumePrefixedName(a,t,i);return{node:new Td.Literal(n,c.node),rest:c.rest}}if(a.startsWith("@")){let c=a.match(/^@([a-zA-Z-]+)(?:\s+(.*))?$/);if(!c)throw new Error(`Invalid language tag at line ${t}`);let[,u,f]=c;return{node:new Td.Literal(n,void 0,u),rest:(f??"").trimStart()}}return{node:new Td.Literal(n),rest:a}}consumeQuotedString(e,t){if(!e.startsWith('"'))throw new Error(`Expected quoted string at line ${t}`);let i="";for(let n=1;n<e.length;n++){let s=e[n];if(s==="\\"){if(n+1>=e.length)throw new Error(`Invalid escape sequence at line ${t}`);let a=e[n+1];switch(a){case"t":i+="	",n+=1;break;case"b":i+="\b",n+=1;break;case"n":i+=`
`,n+=1;break;case"r":i+="\r",n+=1;break;case"f":i+="\f",n+=1;break;case'"':i+='"',n+=1;break;case"\\":i+="\\",n+=1;break;case"u":{let c=e.slice(n+2,n+6);if(c.length!==4||!/^[0-9a-fA-F]{4}$/.test(c))throw new Error(`Invalid \\u escape at line ${t}`);i+=String.fromCharCode(parseInt(c,16)),n+=5;break}case"U":{let c=e.slice(n+2,n+10);if(c.length!==8||!/^[0-9a-fA-F]{8}$/.test(c))throw new Error(`Invalid \\U escape at line ${t}`);i+=String.fromCodePoint(parseInt(c,16)),n+=9;break}default:throw new Error(`Unknown escape sequence \\${a} at line ${t}`)}continue}if(s==='"'){let a=e.slice(n+1);return{value:i,rest:a}}i+=s}throw new Error(`Unterminated string literal at line ${t}`)}findClosingBracket(e,t,i){let n=0;for(let s=0;s<e.length;s++){let a=e[s];if(a===t){n++;continue}if(a===i&&(n--,n===0))return s}return-1}};Yc.NTriplesParser=Ad});var H0=y(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.TurtleParser=void 0;var As=ki(),MA=xd(),LA={rdf:As.Namespace.RDF.iri.value,rdfs:As.Namespace.RDFS.iri.value,owl:As.Namespace.OWL.iri.value,xsd:As.Namespace.XSD.iri.value,exo:As.Namespace.EXO.iri.value,ems:As.Namespace.EMS.iri.value},VA=/^@prefix\s+([a-zA-Z_][\w-]*):\s*<([^>]+)>\s*\.$/,Od=class{static{o(this,"TurtleParser")}constructor(){this.nTriplesParser=new MA.NTriplesParser}parse(e,t={}){let i={...LA,...t.prefixes??{}},n=this.collectStatements(e),s=[];return n.forEach(({statement:a,lineNumber:c})=>{if(this.isPrefixStatement(a)){let f=a.match(VA);if(!f)throw new Error(`Invalid prefix declaration at line ${c}`);let[,l,h]=f;i[l]=h;return}if(a.includes(";")||a.includes(","))throw new Error(`Complex Turtle statements with ';' or ',' are not supported (line ${c})`);let u=this.normalizeShortcuts(a);s.push(this.nTriplesParser.parseLine(u,c,{prefixes:i,strict:!1}))}),s}collectStatements(e){let t=e.split(/\r?\n/),i=[],n="",s=0;if(t.forEach((a,c)=>{let u=a.trim();!u||u.startsWith("#")||(n||(s=c+1),n=n?`${n} ${u}`:u,u.endsWith(".")&&(i.push({statement:n,lineNumber:s}),n=""))}),n)throw new Error(`Unterminated Turtle statement near line ${s}`);return i}isPrefixStatement(e){return e.startsWith("@prefix")}normalizeShortcuts(e){return e.includes(" a ")?e.replace(/\sa\s/g," rdf:type "):e}};Qc.TurtleParser=Od});var z0=y(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.RDFSerializer=void 0;var xs=Dn(),Wn=xt(),Os=Ht(),Cd=pi(),yi=ki(),qA=B0(),BA=bd(),UA=G0(),$A=H0(),GA=xd(),WA=1024,HA=`
`,zA={rdf:yi.Namespace.RDF.iri.value,rdfs:yi.Namespace.RDFS.iri.value,owl:yi.Namespace.OWL.iri.value,xsd:yi.Namespace.XSD.iri.value,exo:yi.Namespace.EXO.iri.value,ems:yi.Namespace.EMS.iri.value},Fd=class{static{o(this,"RDFSerializer")}constructor(e){this.store=e,this.turtleSerializer=new qA.TurtleSerializer,this.nTriplesSerializer=new BA.NTriplesSerializer,this.jsonldSerializer=new UA.JSONLDSerializer,this.turtleParser=new $A.TurtleParser,this.nTriplesParser=new GA.NTriplesParser}async serialize(e,t={}){let i=await this.store.match();return this.serializeTriples(i,e,t)}serializeTriples(e,t,i={}){switch(t){case"turtle":return this.turtleSerializer.serialize(e,{prefixes:i.prefixes,includeDefaultPrefixes:i.includeDefaultPrefixes,newline:i.newline});case"n-triples":return this.nTriplesSerializer.serialize(e,{newline:i.newline});case"json-ld":return this.jsonldSerializer.serialize(e,{context:i.prefixes,pretty:i.pretty,indent:i.indent});default:throw new Error(`Unsupported serialization format: ${t}`)}}stream(e,t={}){let i=t.newline??HA,n=t.batchSize??WA,s=t.includeDefaultPrefixes,a=t.prefixes,c=this,u=!1,f=[],l=[],h=0,p=o(async()=>{if(!u){if(l=await c.store.match(),e==="json-ld"){let S=c.jsonldSerializer.toDocument(l,{context:a,pretty:!1});f.push(...c.buildJsonLdChunks(S))}else if(e==="turtle"){let S=c.turtleSerializer.serializePrefixes(c.composePrefixes(a,s),i);S&&f.push(`${S}${i}${i}`)}u=!0}},"ensureInitialized");return{async next(){if(await p(),f.length>0)return{value:f.shift(),done:!1};if(e==="json-ld")return{value:void 0,done:!0};if(h>=l.length)return{value:void 0,done:!0};let S=l.slice(h,h+n);h+=S.length;let b="";if(e==="turtle"){let x=c.turtleSerializer.serializeTriplesOnly(S,i);x&&(b=`${x}${i}`)}else e==="n-triples"&&(b=c.nTriplesSerializer.serializeChunk(S,i));return b?{value:b,done:!1}:this.next()},async return(){return f=[],l=[],h=0,{value:void 0,done:!0}},[Symbol.asyncIterator](){return this}}}async load(e,t,i={}){let n=this.parse(e,t,i);return i.mode!=="append"&&await this.store.clear(),await this.store.addAll(n),n.length}parse(e,t,i={}){switch(t){case"turtle":return this.turtleParser.parse(e,this.buildTurtleParseOptions(i));case"n-triples":return this.nTriplesParser.parse(e,this.buildNTriplesParseOptions(i));case"json-ld":return this.parseJsonLd(e,i);default:throw new Error(`Unsupported serialization format: ${t}`)}}buildTurtleParseOptions(e){return{prefixes:this.composePrefixes(e.prefixes,!0),strict:e.strict}}buildNTriplesParseOptions(e){return{prefixes:this.composePrefixes(e.prefixes,!0),strict:e.strict}}composePrefixes(e,t){return t??!0?{...zA,...e??{}}:{...e??{}}}parseJsonLd(e,t){let i;try{i=JSON.parse(e)}catch(f){throw new Error(`Invalid JSON-LD document: ${f.message}`)}let n=this.composePrefixes(t.prefixes,!0),s=this.extractContext(i),a={...n,...s},c=this.extractGraph(i),u=[];return c.forEach((f,l)=>{if(!f||typeof f!="object"||Array.isArray(f))throw new Error(`Invalid JSON-LD node at index ${l}`);let h=this.parseSubjectFromNode(f,a,l),p=Object.entries(f);for(let[g,S]of p){if(g==="@id"||g==="@context")continue;if(g==="@type"){this.collectTypeTriples(h,S,u,a);continue}let b=this.expandTerm(g,a),x=new Wn.IRI(b);this.collectTriplesForValue(h,x,S,u,a)}}),u}extractContext(e){if(!e||typeof e!="object"||Array.isArray(e))return{};let t=e["@context"];if(!t||typeof t!="object"||Array.isArray(t))return{};let i={};return Object.entries(t).forEach(([n,s])=>{typeof s=="string"&&(i[n]=s)}),i}extractGraph(e){if(Array.isArray(e))return e;if(!e||typeof e!="object")return[];let t=e["@graph"];return Array.isArray(t)?t:[e]}parseSubjectFromNode(e,t,i){let n=e["@id"];if(typeof n=="string"){if(n.startsWith("_:"))return new Cd.BlankNode(n.slice(2));if(this.isAbsoluteIri(n))return new Wn.IRI(n);let s=this.expandTerm(n,t);return new Wn.IRI(s)}return new Cd.BlankNode(`jsonld_${i}`)}collectTypeTriples(e,t,i,n){let s=yi.Namespace.RDF.term("type");(Array.isArray(t)?t:[t]).forEach(c=>{if(typeof c!="string")throw new Error("Invalid @type value in JSON-LD node");let u=this.expandTerm(c,n);i.push(new xs.Triple(e,s,new Wn.IRI(u)))})}collectTriplesForValue(e,t,i,n,s){if(i!=null){if(Array.isArray(i)){i.forEach(a=>this.collectTriplesForValue(e,t,a,n,s));return}if(typeof i=="object"){let a=i;if(typeof a["@id"]=="string"){let c=this.parseIdNode(a["@id"],s);n.push(new xs.Triple(e,t,c));return}if(a["@value"]!==void 0){let c=this.parseLiteralObject(a,s);n.push(new xs.Triple(e,t,c));return}}if(typeof i=="string"){n.push(new xs.Triple(e,t,new Os.Literal(i)));return}if(typeof i=="number"){let a=Number.isInteger(i)?yi.Namespace.XSD.term("integer"):yi.Namespace.XSD.term("decimal");n.push(new xs.Triple(e,t,new Os.Literal(i.toString(),a)));return}if(typeof i=="boolean"){let a=yi.Namespace.XSD.term("boolean");n.push(new xs.Triple(e,t,new Os.Literal(i.toString(),a)));return}throw new Error("Unsupported JSON-LD value encountered")}}parseIdNode(e,t){if(e.startsWith("_:"))return new Cd.BlankNode(e.slice(2));if(this.isAbsoluteIri(e))return new Wn.IRI(e);let i=this.expandTerm(e,t);return new Wn.IRI(i)}parseLiteralObject(e,t){let i=e["@value"];if(typeof i!="string")throw new Error("JSON-LD literal values must be strings");if(typeof e["@language"]=="string")return new Os.Literal(i,void 0,e["@language"]);if(typeof e["@type"]=="string"){let n=this.expandTerm(e["@type"],t);return new Os.Literal(i,new Wn.IRI(n))}return new Os.Literal(i)}expandTerm(e,t){if(this.isAbsoluteIri(e))return e;let i=e.indexOf(":");if(i>0){let s=e.slice(0,i),a=e.slice(i+1),c=t[s];if(!c)throw new Error(`Unknown prefix "${s}" in JSON-LD document`);return`${c}${a}`}let n=t["@vocab"];if(n)return`${n}${e}`;throw new Error(`Unable to expand JSON-LD term "${e}"`)}isAbsoluteIri(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)}buildJsonLdChunks(e){let t=[],i=JSON.stringify(e["@context"]);return t.push(`{"@context":${i},"@graph":[`),e["@graph"].forEach((n,s)=>{let a=JSON.stringify(n);s>0?t.push(`,${a}`):t.push(a)}),t.push(`]}
`),t}};Jc.RDFSerializer=Fd});var K0=y(sn=>{"use strict";Object.defineProperty(sn,"__esModule",{value:!0});sn.TransactionError=sn.TripleNotFoundError=sn.TripleAlreadyExistsError=void 0;var Pd=class extends Error{static{o(this,"TripleAlreadyExistsError")}constructor(e){super(`Triple already exists: ${e.toString()}`),this.name="TripleAlreadyExistsError"}};sn.TripleAlreadyExistsError=Pd;var Id=class extends Error{static{o(this,"TripleNotFoundError")}constructor(e){super(`Triple not found: ${e.toString()}`),this.name="TripleNotFoundError"}};sn.TripleNotFoundError=Id;var Dd=class extends Error{static{o(this,"TransactionError")}constructor(e){super(e),this.name="TransactionError"}};sn.TransactionError=Dd});var Nd=y(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.LRUCache=void 0;var Rd=class{static{o(this,"LRUCache")}constructor(e){this.maxSize=e,this.cache=new Map}get(e){let t=this.cache.get(e);return t!==void 0&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){let i=this.cache.keys().next().value;i!==void 0&&this.cache.delete(i)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}};Xc.LRUCache=Rd});var Y0=y(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.InMemoryTripleStore=void 0;var an=K0(),KA=xt(),YA=pi(),QA=Ht(),JA=Nd(),kd=class{static{o(this,"InMemoryTripleStore")}constructor(){this.triples=new Map,this.spo=new Map,this.sop=new Map,this.pso=new Map,this.pos=new Map,this.osp=new Map,this.ops=new Map,this.queryCache=new JA.LRUCache(1e3)}async add(e){let t=this.getTripleKey(e);if(this.triples.has(t))return;this.triples.set(t,e);let i=this.getNodeKey(e.subject),n=this.getNodeKey(e.predicate),s=this.getNodeKey(e.object);this.addToIndex(this.spo,i,n,s),this.addToIndex(this.sop,i,s,n),this.addToIndex(this.pso,n,i,s),this.addToIndex(this.pos,n,s,i),this.addToIndex(this.osp,s,i,n),this.addToIndex(this.ops,s,n,i),this.queryCache.clear()}async remove(e){let t=this.getTripleKey(e);if(!this.triples.has(t))return!1;this.triples.delete(t);let i=this.getNodeKey(e.subject),n=this.getNodeKey(e.predicate),s=this.getNodeKey(e.object);return this.removeFromIndex(this.spo,i,n,s),this.removeFromIndex(this.sop,i,s,n),this.removeFromIndex(this.pso,n,i,s),this.removeFromIndex(this.pos,n,s,i),this.removeFromIndex(this.osp,s,i,n),this.removeFromIndex(this.ops,s,n,i),this.queryCache.clear(),!0}async has(e){let t=this.getTripleKey(e);return this.triples.has(t)}async match(e,t,i){let n=this.getMatchCacheKey(e,t,i),s=this.queryCache.get(n);if(s!==void 0)return s;let a;return!e&&!t&&!i?a=Array.from(this.triples.values()):e&&t&&i?a=this.matchSPO(e,t,i):e&&t?a=this.matchSP(e,t):e&&i?a=this.matchSO(e,i):t&&i?a=this.matchPO(t,i):e?a=this.matchS(e):t?a=this.matchP(t):i?a=this.matchO(i):a=[],this.queryCache.set(n,a),a}async addAll(e){for(let t of e)await this.add(t)}async removeAll(e){let t=0;for(let i of e)await this.remove(i)&&t++;return t}async clear(){this.triples.clear(),this.spo.clear(),this.sop.clear(),this.pso.clear(),this.pos.clear(),this.osp.clear(),this.ops.clear(),this.queryCache.clear()}async count(){return this.triples.size}async subjects(){let e=new Set;for(let t of this.triples.values())e.add(t.subject);return Array.from(e)}async predicates(){let e=new Set;for(let t of this.triples.values())e.add(t.predicate);return Array.from(e)}async objects(){let e=new Set;for(let t of this.triples.values())e.add(t.object);return Array.from(e)}async beginTransaction(){return new jd(this)}matchSPO(e,t,i){let n=this.getNodeKey(e),s=this.getNodeKey(t),a=this.getNodeKey(i),c=this.spo.get(n);if(!c)return[];let u=c.get(s);if(!u)return[];if(u.has(a)){let f=this.buildTripleKey(n,s,a),l=this.triples.get(f);return l?[l]:[]}return[]}matchSP(e,t){let i=this.getNodeKey(e),n=this.getNodeKey(t),s=this.spo.get(i);if(!s)return[];let a=s.get(n);return a?this.getTriplesByKeys(Array.from(a).map(c=>this.buildTripleKey(i,n,c))):[]}matchSO(e,t){let i=this.getNodeKey(e),n=this.getNodeKey(t),s=this.sop.get(i);if(!s)return[];let a=s.get(n);return a?this.getTriplesByKeys(Array.from(a).map(c=>this.buildTripleKey(i,c,n))):[]}matchPO(e,t){let i=this.getNodeKey(e),n=this.getNodeKey(t),s=this.pos.get(i);if(!s)return[];let a=s.get(n);return a?this.getTriplesByKeys(Array.from(a).map(c=>this.buildTripleKey(c,i,n))):[]}matchS(e){let t=this.getNodeKey(e),i=this.spo.get(t);if(!i)return[];let n=[];for(let[s,a]of i.entries())for(let c of a)n.push(this.buildTripleKey(t,s,c));return this.getTriplesByKeys(n)}matchP(e){let t=this.getNodeKey(e),i=this.pso.get(t);if(!i)return[];let n=[];for(let[s,a]of i.entries())for(let c of a)n.push(this.buildTripleKey(s,t,c));return this.getTriplesByKeys(n)}matchO(e){let t=this.getNodeKey(e),i=this.osp.get(t);if(!i)return[];let n=[];for(let[s,a]of i.entries())for(let c of a)n.push(this.buildTripleKey(s,c,t));return this.getTriplesByKeys(n)}getTriplesByKeys(e){let t=[];for(let i of e){let n=this.triples.get(i);n&&t.push(n)}return t}addToIndex(e,t,i,n){e.has(t)||e.set(t,new Map);let s=e.get(t);s.has(i)||s.set(i,new Set),s.get(i).add(n)}removeFromIndex(e,t,i,n){let s=e.get(t);if(!s)return;let a=s.get(i);a&&(a.delete(n),a.size===0&&s.delete(i),s.size===0&&e.delete(t))}getTripleKey(e){let t=this.getNodeKey(e.subject),i=this.getNodeKey(e.predicate),n=this.getNodeKey(e.object);return this.buildTripleKey(t,i,n)}buildTripleKey(e,t,i){return`${e}|${t}|${i}`}getNodeKey(e){if(e instanceof KA.IRI)return`i:${e.value}`;if(e instanceof YA.BlankNode)return`b:${e.id}`;if(e instanceof QA.Literal){let t=`l:${e.value}`;return e.datatype?t+=`^^${e.datatype.value}`:e.language&&(t+=`@${e.language}`),t}return""}getMatchCacheKey(e,t,i){let n=e?this.getNodeKey(e):"?",s=t?this.getNodeKey(t):"?",a=i?this.getNodeKey(i):"?";return`${n}|${s}|${a}`}};Zc.InMemoryTripleStore=kd;var jd=class{static{o(this,"InMemoryTransaction")}constructor(e){this.store=e,this.operations=[],this.committed=!1,this.rolledBack=!1}async add(e){if(this.committed)throw new an.TransactionError("Transaction already committed");if(this.rolledBack)throw new an.TransactionError("Transaction already rolled back");this.operations.push({type:"add",triple:e})}async remove(e){if(this.committed)throw new an.TransactionError("Transaction already committed");if(this.rolledBack)throw new an.TransactionError("Transaction already rolled back");return this.operations.push({type:"remove",triple:e}),!0}async commit(){if(this.committed)throw new an.TransactionError("Transaction already committed");if(this.rolledBack)throw new an.TransactionError("Transaction already rolled back");for(let e of this.operations)e.type==="add"?await this.store.add(e.triple):await this.store.remove(e.triple);this.committed=!0,this.operations=[]}async rollback(){if(this.committed)throw new an.TransactionError("Transaction already committed");if(this.rolledBack)throw new an.TransactionError("Transaction already rolled back");this.operations=[],this.rolledBack=!0}}});var J0=y(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.RDFVocabularyMapper=void 0;var gr=Dn(),Q0=xt(),he=ki(),Md=class{static{o(this,"RDFVocabularyMapper")}constructor(){this.propertyMappings=new Map([["exo__Instance_class",he.Namespace.RDF.term("type")],["exo__Asset_isDefinedBy",he.Namespace.RDFS.term("isDefinedBy")],["exo__Class_superClass",he.Namespace.RDFS.term("subClassOf")],["exo__Property_range",he.Namespace.RDFS.term("range")],["exo__Property_domain",he.Namespace.RDFS.term("domain")],["exo__Property_superProperty",he.Namespace.RDFS.term("subPropertyOf")]])}generateClassHierarchyTriples(){let e=[];return e.push(new gr.Triple(he.Namespace.EXO.term("Asset"),he.Namespace.RDFS.term("subClassOf"),he.Namespace.RDFS.term("Resource"))),e.push(new gr.Triple(he.Namespace.EXO.term("Class"),he.Namespace.RDFS.term("subClassOf"),he.Namespace.RDFS.term("Class"))),e.push(new gr.Triple(he.Namespace.EXO.term("Property"),he.Namespace.RDFS.term("subClassOf"),he.Namespace.RDF.term("Property"))),e.push(new gr.Triple(he.Namespace.EMS.term("Task"),he.Namespace.RDFS.term("subClassOf"),he.Namespace.EXO.term("Asset"))),e.push(new gr.Triple(he.Namespace.EMS.term("Project"),he.Namespace.RDFS.term("subClassOf"),he.Namespace.EXO.term("Asset"))),e.push(new gr.Triple(he.Namespace.EMS.term("Area"),he.Namespace.RDFS.term("subClassOf"),he.Namespace.EXO.term("Asset"))),e}generatePropertyHierarchyTriples(){let e=[];return e.push(new gr.Triple(he.Namespace.EXO.term("Instance_class"),he.Namespace.RDFS.term("subPropertyOf"),he.Namespace.RDF.term("type"))),e.push(new gr.Triple(he.Namespace.EXO.term("Asset_isDefinedBy"),he.Namespace.RDFS.term("subPropertyOf"),he.Namespace.RDFS.term("isDefinedBy"))),e.push(new gr.Triple(he.Namespace.EXO.term("Class_superClass"),he.Namespace.RDFS.term("subPropertyOf"),he.Namespace.RDFS.term("subClassOf"))),e.push(new gr.Triple(he.Namespace.EXO.term("Property_range"),he.Namespace.RDFS.term("subPropertyOf"),he.Namespace.RDFS.term("range"))),e.push(new gr.Triple(he.Namespace.EXO.term("Property_domain"),he.Namespace.RDFS.term("subPropertyOf"),he.Namespace.RDFS.term("domain"))),e.push(new gr.Triple(he.Namespace.EXO.term("Property_superProperty"),he.Namespace.RDFS.term("subPropertyOf"),he.Namespace.RDFS.term("subPropertyOf"))),e}generateMappedTriple(e,t,i){let n=this.propertyMappings.get(t);if(!n)return null;let s;if(i instanceof Q0.IRI)s=i;else{let a=i.match(/^(ems|exo)__(.+)$/);if(a){let[,c,u]=a;s=(c==="ems"?he.Namespace.EMS:he.Namespace.EXO).term(u)}else s=new Q0.IRI(i)}return new gr.Triple(e,n,s)}hasMappingFor(e){return this.propertyMappings.has(e)}};eu.RDFVocabularyMapper=Md});var Vd=y(ei=>{"use strict";var XA=ei&&ei.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ZA=ei&&ei.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},ex=ei&&ei.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(ei,"__esModule",{value:!0});ei.NoteToRDFConverter=void 0;var X0=Qe(),Z0=Dn(),tx=xt(),Hn=Ht(),on=ki(),rx=tt(),Ld=class{static{o(this,"NoteToRDFConverter")}constructor(e){this.vault=e,this.OBSIDIAN_VAULT_SCHEME="obsidian://vault/"}async convertNote(e){let t=this.vault.getFrontmatter(e);if(!t)return[];let i=[],n=this.notePathToIRI(e.path);for(let[s,a]of Object.entries(t)){if(!this.isExocortexProperty(s))continue;let c=this.propertyKeyToIRI(s),u=Array.isArray(a)?a:[a];for(let f of u){let l=await this.valueToRDFObject(f,e);i.push(new Z0.Triple(n,c,l))}if(s==="exo__Instance_class")for(let f of u){let l=this.expandClassValue(f);if(l){let h=on.Namespace.RDF.term("type");i.push(new Z0.Triple(n,h,l))}}}return i}async convertVault(){let e=this.vault.getAllFiles(),t=[];for(let i of e)try{let n=await this.convertNote(i);t.push(...n)}catch(n){throw console.error(`\u274C Error converting note: ${i.path}`),console.error(`   Error: ${n instanceof Error?n.message:String(n)}`),n}return t}notePathToIRI(e){let t=encodeURIComponent(e);return new tx.IRI(`${this.OBSIDIAN_VAULT_SCHEME}${t}`)}isExocortexProperty(e){return e.startsWith("exo__")||e.startsWith("ems__")}propertyKeyToIRI(e){if(e.startsWith("exo__")){let t=e.substring(5);return on.Namespace.EXO.term(t)}if(e.startsWith("ems__")){let t=e.substring(5);return on.Namespace.EMS.term(t)}throw new Error(`Invalid property key: ${e}`)}async valueToRDFObject(e,t){if(typeof e=="string"){let i=this.removeQuotes(e),n=this.extractWikilink(i);if(n){let s=this.vault.getFirstLinkpathDest(n,t.path);return s?this.notePathToIRI(s.path):new Hn.Literal(i)}if(this.isClassReference(i)){let s=this.expandClassValue(i);if(s)return s}return this.isISO8601DateTime(i)?new Hn.Literal(i,on.Namespace.XSD.term("dateTime")):new Hn.Literal(i)}return typeof e=="boolean"?new Hn.Literal(e.toString()):typeof e=="number"?new Hn.Literal(e.toString(),on.Namespace.XSD.term("decimal")):e instanceof Date?new Hn.Literal(e.toISOString(),on.Namespace.XSD.term("dateTime")):new Hn.Literal(String(e))}isISO8601DateTime(e){return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{1,3})?(Z|[+-]\d{2}:\d{2})?$/.test(e)}removeQuotes(e){let t=e.trim();return t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'")?t.substring(1,t.length-1):e}extractWikilink(e){let t=e.match(/^\[\[([^\]]+)\]\]$/);return t?t[1]:null}isClassReference(e){return(e.startsWith("ems__")||e.startsWith("exo__"))&&!/\s/.test(e)}expandClassValue(e){let t=this.removeQuotes(e);if(t.startsWith("ems__")){let i=t.substring(5);return on.Namespace.EMS.term(i)}if(t.startsWith("exo__")){let i=t.substring(5);return on.Namespace.EXO.term(i)}return null}};ei.NoteToRDFConverter=Ld;ei.NoteToRDFConverter=Ld=XA([(0,X0.injectable)(),ex(0,(0,X0.inject)(rx.DI_TOKENS.IVaultAdapter)),ZA("design:paramtypes",[Object])],Ld)});var qd=y((CN,eg)=>{var Cs=class{static{o(this,"Wildcard")}constructor(){return ix||this}equals(e){return e&&this.termType===e.termType}};Object.defineProperty(Cs.prototype,"value",{enumerable:!0,value:"*"});Object.defineProperty(Cs.prototype,"termType",{enumerable:!0,value:"Wildcard"});var ix=new Cs;eg.exports.Wildcard=Cs});var rg=y((PN,tg)=>{var nx=(function(){var r=o(function(T,E,O,I){for(O=O||{},I=T.length;I--;O[T[I]]=E);return O},"o"),e=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],t=[2,247],i=[100,110,113,115,116,123,126,131,329,330,331,332,333],n=[2,409],s=[1,18],a=[1,27],c=[13,16,45,197,224,229,308],u=[28,29,53],f=[28,53],l=[1,42],h=[1,45],p=[1,41],g=[1,44],S=[123,126],b=[1,67],x=[39,45,87],F=[13,16,45,197,224,308],P=[1,87],V=[2,281],H=[1,86],K=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Pe=[6,28,29,53,63,70,73,81,83,85],Ze=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],ct=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],B=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],ce=[13,16,308],xe=[112,132,327,334],Xe=[13,16,112,132,308],$e=[1,111],He=[1,117],Ie=[112,132,327,328,334],Ne=[13,16,112,132,308,328],Ce=[28,29,45,53,87],$=[1,138],R=[1,151],ke=[1,128],qe=[1,127],j=[1,129],le=[1,140],Se=[1,141],U=[1,142],be=[1,143],we=[1,144],ge=[1,145],Ee=[1,147],ue=[1,148],ye=[2,457],fe=[1,158],_e=[1,159],Te=[1,160],J=[1,152],te=[1,153],re=[1,156],X=[1,171],Z=[1,172],ee=[1,173],Q=[1,174],ie=[1,175],ne=[1,176],se=[1,167],G=[1,168],W=[1,169],ae=[1,170],De=[1,157],Oe=[1,166],Ae=[1,161],_=[1,162],v=[1,163],w=[1,164],C=[1,165],q=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Ge=[1,195],Ke=[6,31,73,81,83,85],me=[2,285],N=[1,199],k=[1,201],M=[6,31,70,73,81,83,85],L=[2,283],de=[1,207],je=[1,218],Me=[1,223],Et=[1,219],ir=[1,225],hr=[1,226],Ut=[1,224],Vm=[6,63,70,73,81,83,85],qm=[1,236],Bm=[2,334],Um=[1,243],$m=[1,241],Tt=[6,193],xo=[2,349],Gm=[2,339],Ji=[28,128],Wm=[47,48,193,272],Oo=[47,48,193,242,272],ss=[47,48,193,242,246,272],as=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],gt=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],Hm=[1,271],zm=[1,270],ut=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],Km=[1,281],Ym=[1,280],$t=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],ca=[45,89],Co=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Fo=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Po=[31,89],Io=[48,87],wn=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],oi=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],Qm=[1,313],os=[6,85],Ol=[6,31,81,83,85],Jm=[2,361],xi=[2,353],En=[1,343],ua=[31,112,335],Oi=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Cl=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],Xm=[6,109,193],Tn=[31,112],lt=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],Fl=[1,390],Pl=[1,391],Xi=[13,16,87,197,308,314],Zm=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],Do=[1,417],Ro=[1,418],e1=[13,16,48,197,229,308],Zi=[6,31,85],t1=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],Il=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],An=[29,31,85,112,159,160,161,163,164],No=[1,443],ko=[1,444],r1=[1,449],xn=[31,112,193,232,318,335],jo=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],i1=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Dl=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],la=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],fa=[31,45],n1=[1,507],s1=[1,508],a1=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],Mo=[29,31,85,112,159,160,161,163,164,335],On=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],o1=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],c1=[2,352],Rl=[13,16,197,308,314],u1=[1,565],cs=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],l1=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Ci=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],f1=[13,16,87,308],Fi=[2,364],us=[29,31,85,112,159,160,161,163,164,193,232,318,335],Lo=[31,112,193,232,272,318,335],Pi=[2,359],h1=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Vo=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],d1=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],p1=[2,347],Nl={trace:o(function(){},"trace"),yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:o(function(E,O,I,z,pe,d,Wt){var m=d.length-1;switch(pe){case 1:if(d[m-1]=d[m-1]||{},ve.base&&(d[m-1].base=ve.base),ve.base="",d[m-1].prefixes=ve.prefixes,ve.prefixes=null,ve.pathOnly){if(d[m-1].type==="path"||"termType"in d[m-1])return d[m-1];throw new Error("Received full SPARQL query in path only mode")}else if(d[m-1].type==="path"||"termType"in d[m-1])throw new Error("Received only path in full SPARQL mode");if(d[m-1].type==="update"){let We={};for(let et of d[m-1].updates)if(et.updateType==="insert"){let Le={};for(let Ue of et.insert)if(Ue.type==="bgp"||Ue.type==="graph")for(let nr of Ue.triples)nr.subject.termType==="BlankNode"&&(Le[nr.subject.value]=!0),nr.predicate.termType==="BlankNode"&&(Le[nr.predicate.value]=!0),nr.object.termType==="BlankNode"&&(Le[nr.object.value]=!0);for(let Ue of Object.keys(Le)){if(We[Ue])throw new Error("Detected reuse blank node across different INSERT DATA clauses");We[Ue]=!0}}}return d[m-1];case 2:this.$={...d[m-1],...d[m],type:"query"};break;case 4:ve.base=ha(d[m]);break;case 5:ve.prefixes||(ve.prefixes={}),d[m-1]=d[m-1].substr(0,d[m-1].length-1),d[m]=ha(d[m]),ve.prefixes[d[m-1]]=d[m];break;case 6:this.$={...d[m-3],...Pn(d[m-2]),...d[m-1],...d[m]};break;case 7:if(!ve.skipValidation&&(Ul(d[m-3].variables.map(et=>Bl(et.expression))).some(et=>et.aggregation==="count"&&!(et.expression instanceof qo))||d[m].group)){for(let et of d[m-3].variables)if(et.termType==="Variable"){if(!d[m].group||!d[m].group.map(Le=>ds(Le)).includes(ds(et)))throw Error("Projection of ungrouped variable (?"+ds(et)+")")}else if(Bl(et.expression).length===0){let Le=dS(et.expression);for(let Ue of Le)if(!d[m].group||!d[m].group.map||!d[m].group.map(nr=>ds(nr)).includes(ds(Ue)))throw Error("Use of ungrouped variable in projection of operation (?"+ds(Ue)+")")}}let fi=d[m-1].where.filter(We=>We.type==="query");if(fi.length>0){let We=d[m-3].variables.filter(Le=>Le.variable&&Le.variable.value).map(Le=>Le.variable.value),et=Ul(fi.map(Le=>Le.variables)).map(Le=>Le.value||Le.variable.value);for(let Le of We)if(et.indexOf(Le)>=0)throw Error("Target id of 'AS' (?"+Le+") already used in subquery")}this.$=at(d[m-3],Pn(d[m-2]),d[m-1],d[m]);break;case 8:this.$=at({queryType:"CONSTRUCT",template:d[m-3]},Pn(d[m-2]),d[m-1],d[m]);break;case 9:this.$=at({queryType:"CONSTRUCT",template:d[m-2]=d[m-2]?d[m-2].triples:[]},Pn(d[m-5]),{where:[{type:"bgp",triples:Fn([],d[m-2])}]},d[m]);break;case 10:this.$=at({queryType:"DESCRIBE",variables:d[m-3]==="*"?[new qo]:d[m-3]},Pn(d[m-2]),d[m-1],d[m]);break;case 11:this.$=at({queryType:"ASK"},Pn(d[m-2]),d[m-1],d[m]);break;case 12:this.$=at(d[m-1],{variables:[new qo]});break;case 13:let ya=d[m].map(We=>We.value||We.variable.value),ps=pS(ya);if(ps.length>0)throw Error("Two or more of the resulting columns have the same name (?"+ps[0]+")");this.$=at(d[m-1],{variables:d[m]});break;case 14:this.$=at({queryType:"SELECT"},d[m]&&(d[m-1]=Gt(d[m]),d[m]={},d[m][d[m-1]]=!0,d[m]));break;case 16:case 27:this.$=ls(d[m-3],{variable:d[m-1]});break;case 17:case 18:this.$=at(d[m-3],d[m-2],d[m-1],d[m],{type:"query"});break;case 19:case 58:this.$={iri:d[m],named:!!d[m-1]};break;case 20:this.$={where:d[m].patterns};break;case 21:this.$=at(d[m-1],d[m]);break;case 22:this.$=at(d[m-2],d[m-1],d[m]);break;case 23:this.$={group:d[m]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=ls(d[m]);break;case 26:this.$=ls(d[m-1]);break;case 29:this.$={having:d[m]};break;case 30:this.$={order:d[m]};break;case 32:this.$=ls(d[m],{descending:!0});break;case 35:this.$={limit:hs(d[m])};break;case 36:this.$={offset:hs(d[m])};break;case 37:this.$={limit:hs(d[m-2]),offset:hs(d[m])};break;case 38:this.$={limit:hs(d[m]),offset:hs(d[m-2])};break;case 39:case 43:this.$={type:"values",values:d[m]};break;case 40:case 84:this.$=d[m-1].map(We=>({[d[m-3]]:We}));break;case 41:case 85:this.$=d[m-1].map(()=>({}));break;case 42:case 86:var li=d[m-4].length;d[m-4]=d[m-4].map(kl),this.$=d[m-1].map(function(We){if(We.length!==li)throw Error("Inconsistent VALUES length");for(var et={},Le=0;Le<li;Le++)et["?"+d[m-4][Le].value]=We[Le];return et});break;case 44:case 65:case 100:case 126:case 175:this.$=d[m-1];break;case 45:this.$={type:"update",updates:Ii(d[m-2],d[m-1])};break;case 46:this.$=at({type:"load",silent:!!d[m-2],source:d[m-1]},d[m]&&{destination:d[m]});break;case 47:this.$={type:Gt(d[m-2]),silent:!!d[m-1],graph:d[m]};break;case 48:this.$={type:Gt(d[m-4]),silent:!!d[m-3],source:d[m-2],destination:d[m]};break;case 49:this.$={type:"create",silent:!!d[m-2],graph:{type:"graph",name:d[m]}};break;case 50:this.$={updateType:"insert",insert:A1(d[m])};break;case 51:this.$={updateType:"delete",delete:Wl(A1(d[m]))};break;case 52:this.$={updateType:"deletewhere",delete:Wl(d[m])};break;case 53:this.$={updateType:"insertdelete",...d[m-4],...d[m-3],...Pn(d[m-2],"using"),where:d[m].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=d[m];break;case 55:this.$={delete:Wl(d[m-1]),insert:d[m]||[]};break;case 56:this.$={delete:[],insert:d[m]};break;case 59:this.$={graph:d[m]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:d[m]};break;case 64:this.$={[Gt(d[m])]:!0};break;case 66:this.$=d[m-1]?ci(d[m],[d[m-1]]):ci(d[m]);break;case 67:var ma=at(d[m-3]||{triples:[]},{type:"graph",name:d[m-5]});this.$=d[m]?[ma,d[m]]:[ma];break;case 68:case 73:this.$={type:"bgp",triples:ci(d[m-2],[d[m-1]])};break;case 69:this.$={type:"group",patterns:[d[m-1]]};break;case 70:for(let We of d[m-1].filter(et=>et.type==="bind")){let et=d[m-1].indexOf(We),Le=new Set;for(let Ue of d[m-1].slice(0,et))(Ue.type==="group"||Ue.type==="bgp")&&E1(Ue).forEach(nr=>Le.add(nr));if(Le.has(We.variable.value))throw Error("Variable used to bind is already bound (?"+We.variable.value+")")}this.$={type:"group",patterns:d[m-1]};break;case 71:this.$=d[m-1]?ci([d[m-1]],d[m]):ci(d[m]);break;case 72:this.$=d[m]?[d[m-2],d[m]]:d[m-2];break;case 75:this.$=at(d[m],{type:"optional"});break;case 76:this.$=at(d[m],{type:"minus"});break;case 77:this.$=at(d[m],{type:"graph",name:d[m-1]});break;case 78:this.$=at(d[m],{type:"service",name:d[m-1],silent:!!d[m-2]});break;case 79:this.$={type:"filter",expression:d[m]};break;case 80:this.$={type:"bind",variable:d[m-1],expression:d[m-3]};break;case 89:this.$=pa(d[m]);break;case 90:this.$=void 0;break;case 91:this.$=d[m-1].length?{type:"union",patterns:ci(d[m-1].map(Ml),[Ml(d[m])])}:d[m];break;case 95:this.$={...d[m],function:d[m-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:Ii(d[m-2],d[m-1]),distinct:!!d[m-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=Ii(d[m-2],d[m-1]);break;case 101:this.$=ci(d[m-2],[d[m-1]]);break;case 102:case 112:this.$=Gl(d[m].map(We=>at(Di(d[m-1]),We)));break;case 103:this.$=Gl(Fn(d[m].map(We=>at(Di(d[m-1].entity),We)),d[m-1].triples));break;case 105:this.$=ci([d[m-1]],d[m]);break;case 106:this.$=ci(d[m]);break;case 107:this.$=ql(d[m-1],d[m]);break;case 109:case 237:this.$=ve.factory.namedNode(iS);break;case 110:case 118:this.$=Ii(d[m-1],d[m]);break;case 111:this.$=d[m]?{annotation:d[m],object:d[m-1]}:d[m-1];break;case 113:this.$=d[m]?Gl(Fn(d[m].map(We=>at(Di(d[m-1].entity),We)),d[m-1].triples)):d[m-1].triples;break;case 114:this.$=ql(...d[m-1],d[m]);break;case 116:this.$=ql(...d[m]);break;case 117:case 159:case 163:this.$=[d[m-1],d[m]];break;case 119:this.$=d[m]?{object:d[m-1],annotation:d[m]}:d[m-1];break;case 120:this.$=d[m-1].length?fs("|",Ii(d[m-1],d[m])):d[m];break;case 121:this.$=d[m-1].length?fs("/",Ii(d[m-1],d[m])):d[m];break;case 122:this.$=d[m]?fs(d[m],[d[m-1]]):d[m-1];break;case 123:this.$=d[m-1]?fs(d[m-1],[d[m]]):d[m];break;case 125:case 131:this.$=fs(d[m-1],[d[m]]);break;case 129:this.$=fs("|",Ii(d[m-2],d[m-1]));break;case 132:case 134:this.$=fS(d[m-1]);break;case 133:case 135:this.$=hS(d[m-1]);break;case 140:this.$={entity:d[m],triples:[]};break;case 145:this.$=kl(d[m]);break;case 149:this.$=ve.factory.namedNode(m1);break;case 151:case 153:case 158:case 162:this.$=jl(d[m-1],d[m]);break;case 152:this.$=["||",d[m]];break;case 154:this.$=["&&",d[m]];break;case 156:this.$=At(d[m-1],[d[m-2],d[m]]);break;case 157:this.$=At(d[m-2]?"notin":"in",[d[m-3],d[m]]);break;case 160:this.$=["+",jl(d[m-1],d[m])];break;case 161:var $o=ui(d[m-1].value.replace("-",""),d[m-1].datatype);this.$=["-",jl($o,d[m])];break;case 164:this.$=At("UPLUS",[d[m]]);break;case 165:this.$=At(d[m-1],[d[m]]);break;case 166:this.$=At("UMINUS",[d[m]]);break;case 177:this.$=At(Gt(d[m-1]));break;case 178:this.$=At(Gt(d[m-3]),[d[m-1]]);break;case 179:this.$=pa(At(Gt(d[m-3]),[d[m-1]]));break;case 180:this.$=At(Gt(d[m-5]),[d[m-3],d[m-1]]);break;case 181:this.$=At(Gt(d[m-7]),[d[m-5],d[m-3],d[m-1]]);break;case 182:this.$=pa(At(Gt(d[m-7]),[d[m-5],d[m-3],d[m-1]]));break;case 183:this.$=At(Gt(d[m-1]),d[m]);break;case 184:this.$=At("bound",[kl(d[m-1])]);break;case 185:this.$=At(d[m-1],[]);break;case 186:this.$=At(d[m-3],[d[m-1]]);break;case 187:this.$=At(d[m-2]?"notexists":"exists",[Ml(d[m])]);break;case 188:case 189:this.$=ls(d[m-1],{type:"aggregate",aggregation:Gt(d[m-4]),distinct:!!d[m-2]});break;case 190:this.$=ls(d[m-2],{type:"aggregate",aggregation:Gt(d[m-5]),distinct:!!d[m-3],separator:typeof d[m-1]=="string"?d[m-1]:" "});break;case 192:this.$=ui(d[m]);break;case 193:this.$=oS(d[m-1],Gt(d[m].substr(1)));break;case 194:this.$=ui(d[m-2],d[m]);break;case 195:case 204:this.$=ui(d[m],g1);break;case 196:case 205:this.$=ui(d[m],y1);break;case 197:case 206:this.$=ui(Gt(d[m]),_1);break;case 200:this.$=ui(d[m].toLowerCase(),aS);break;case 201:this.$=ui(d[m].substr(1),g1);break;case 202:this.$=ui(d[m].substr(1),y1);break;case 203:this.$=ui(d[m].substr(1).toLowerCase(),_1);break;case 207:case 208:this.$=w1(d[m],1);break;case 209:case 210:this.$=w1(d[m],3);break;case 211:this.$=ve.factory.namedNode(ha(d[m]));break;case 213:var Go=d[m].indexOf(":"),ga=d[m].substr(0,Go),Wo=ve.prefixes[ga];if(!Wo)throw new Error("Unknown prefix: "+ga);var nt=ha(Wo+d[m].substr(Go+1));this.$=ve.factory.namedNode(nt);break;case 214:if(d[m]=d[m].substr(0,d[m].length-1),!(d[m]in ve.prefixes))throw new Error("Unknown prefix: "+d[m]);var nt=ha(ve.prefixes[d[m]]);this.$=ve.factory.namedNode(nt);break;case 215:this.$=da(d[m].replace(/^(_:)/,""));break;case 216:this.$=da();break;case 217:case 218:case 232:this.$=pa(Ll(d[m-3],d[m-2],d[m-1]));break;case 230:case 231:this.$=pa(d[m-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:d[m-1].push(d[m]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[d[m]];break;case 308:d[m-3].push(d[m-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:d[m-2].push(d[m-1]);break}},"anonymous"),table:[r(e,t,{3:1,4:2,10:3}),{1:[3]},r(i,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:n,16:n,45:n,197:n,224:n,229:n,308:n,24:[1,13],32:[1,14],36:[1,15],41:s}),r([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:a},{6:[2,239]},r(c,[2,411],{216:28,217:29}),r(u,[2,249],{18:30}),r(u,[2,251],{22:31}),r(f,[2,255],{25:32,27:33,29:[1,34]}),{13:l,16:h,33:35,39:[1,37],44:39,55:40,87:p,139:38,307:43,308:g,323:36},r(u,[2,267],{37:46}),r(S,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:b,87:p},r(x,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),r(e,[2,248]),r(e,[2,245]),r(e,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},r([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),r(F,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:P,29:V,52:84,53:H,56:85},{19:88,28:P,29:V,52:89,53:H,56:85},r(u,[2,253],{26:90}),{28:[1,91],52:92,53:H},r(K,[2,385],{181:93,182:94,183:95,31:[2,383]}),r(Pe,[2,263],{34:96}),r(Pe,[2,261],{44:39,55:40,307:43,139:97,13:l,16:h,87:p,308:g}),r(Pe,[2,262]),r(Ze,[2,259]),r(ct,[2,143]),r(ct,[2,144]),r([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),r(B,[2,211]),r(B,[2,212]),r(B,[2,213]),r(B,[2,214]),{19:98,28:P,29:V,52:99,53:H,56:85},{6:[2,309],99:100,193:[1,101]},r(ce,[2,311],{101:102,328:[1,103]}),r(xe,[2,317],{104:104,328:[1,105]}),r(Xe,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:$e,114:110},{29:$e,114:112},{29:$e,114:113},{118:114,123:[1,115],125:116,126:He},r(Ie,[2,315]),r(Ie,[2,316]),r(Ne,[2,319]),r(Ne,[2,320]),r(Ne,[2,321]),r(S,[2,327]),{13:l,16:h,55:118,307:43,308:g},r(u,[2,12]),r(u,[2,13],{44:66,43:119,45:b,87:p}),r(Ce,[2,269]),r(Ce,[2,15]),{13:l,16:h,44:136,45:$,46:120,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(x,[2,14]),r(x,[2,274]),r(x,[2,271]),r(x,[2,272]),r(e,[2,4]),{13:[1,177]},r(q,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},r(c,[2,410]),r([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:l,16:h,45:[1,193],55:194,197:Ge,219:189,220:190,223:191,224:[1,192],307:43,308:g},r(F,[2,419]),r(Ke,me,{20:196,59:197,69:198,70:N}),r(u,[2,250]),{29:k,57:200},r(ce,[2,279],{54:202,327:[1,203]}),{29:[2,282]},r(M,L,{23:204,58:205,62:206,63:de}),r(u,[2,252]),{19:208,28:P,29:V,52:209,53:H,56:85},{29:[1,210]},r(f,[2,256]),{31:[1,211]},{31:[2,384]},{13:l,16:h,44:215,45:je,55:220,82:R,87:p,89:Me,145:212,172:221,185:213,187:214,231:Et,236:216,237:222,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,309:ir,310:hr,311:217,312:Ut},r(Vm,[2,265],{56:85,35:227,52:228,19:229,28:P,29:V,53:H}),r(Ze,[2,260]),r(M,L,{58:205,62:206,23:230,63:de}),r(u,[2,268]),{6:[2,45]},r(e,t,{10:3,4:231}),{13:l,16:h,55:232,307:43,308:g},r(ce,[2,312]),{105:233,112:qm,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},r(xe,[2,318]),r(ce,Bm,{108:240,133:242,112:Um,132:$m}),r(Xe,[2,323]),{112:[1,244]},{112:[2,325]},r(Tt,[2,50]),r(K,xo,{135:245,136:246,143:247,144:248,31:Gm,112:Gm}),r(Tt,[2,51]),r(Tt,[2,52]),r(Ji,[2,328],{119:249}),{29:$e,114:250},r(Ji,[2,56]),{29:$e,114:251},r(S,[2,59]),r(Ce,[2,270]),{47:[1,252]},r(Wm,[2,150]),r(Oo,[2,428],{240:253}),r(ss,[2,430],{244:254}),r(ss,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),r(as,[2,440],{252:264}),r(gt,[2,448],{260:265}),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:R,87:p,172:135,255:154,257:155,264:266,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:R,87:p,172:135,255:154,257:155,264:267,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:R,87:p,172:135,255:154,257:155,264:268,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(gt,[2,167]),r(gt,[2,168]),r(gt,[2,169]),r(gt,[2,170],{176:269,45:Hm,89:zm}),r(gt,[2,171]),r(gt,[2,172]),r(gt,[2,173]),r(gt,[2,174]),{13:l,16:h,44:136,45:$,46:272,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(ut,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:Km,89:Ym,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},r($t,[2,192],{292:[1,286],293:[1,287]}),r($t,[2,195]),r($t,[2,196]),r($t,[2,197]),r($t,[2,198]),r($t,[2,199]),r($t,[2,200]),{13:l,16:h,44:39,55:40,82:R,87:p,139:289,172:291,255:154,257:155,266:290,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},r(ca,[2,452]),r(ca,[2,453]),r(ca,[2,454]),r(ca,[2,455]),r(ca,[2,456]),{279:[2,458]},r(Co,[2,207]),r(Co,[2,208]),r(Co,[2,209]),r(Co,[2,210]),r($t,[2,201]),r($t,[2,202]),r($t,[2,203]),r($t,[2,204]),r($t,[2,205]),r($t,[2,206]),r(e,[2,5]),r(Fo,[2,297],{88:295}),r(Po,[2,299],{90:296}),{48:[1,297],87:[1,298]},r(Io,[2,301]),r(q,[2,43]),r(q,[2,82]),r(q,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},r(c,[2,412]),r(wn,[2,123]),r(wn,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),r(oi,[2,124]),{13:l,16:h,45:[1,311],55:194,89:[1,310],197:Ge,223:312,225:308,226:309,229:Qm,307:43,308:g},r(c,n,{215:10,214:314}),r(oi,[2,236]),r(oi,[2,237]),r(os,[2,6]),r(Ol,[2,287],{60:315,72:316,73:[1,317]}),r(Ke,[2,286]),{13:l,16:h,45:$,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,307:43,308:g,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r([6,31,63,70,73,81,83,85],[2,20]),r(K,Jm,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:xi,31:xi,85:xi,112:xi,159:xi,160:xi,161:xi,163:xi,164:xi,41:s}),{13:l,16:h,55:331,307:43,308:g},r(ce,[2,280]),r(os,[2,7]),r(Ke,me,{59:197,69:198,20:332,70:N}),r(M,[2,284]),{64:[1,333]},r(M,L,{58:205,62:206,23:334,63:de}),r(u,[2,254]),r(K,xo,{144:248,30:335,143:336,31:[2,257]}),r(u,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:l,16:h,44:39,55:40,87:p,139:342,186:339,190:340,195:341,197:En,307:43,308:g},r(ua,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:l,16:h,87:p,197:En,308:g}),r(Oi,[2,227]),r(Oi,[2,228]),r(Oi,[2,229]),{13:l,16:h,44:215,45:je,55:220,82:R,87:p,89:Me,172:221,185:351,187:350,200:348,230:347,231:Et,234:349,236:216,237:222,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,309:ir,310:hr,311:217,312:Ut},{13:l,16:h,44:39,55:40,87:p,139:342,186:352,190:340,195:341,197:En,307:43,308:g},r(Oi,[2,146]),r(Oi,[2,147]),r(Oi,[2,148]),r(Oi,[2,149]),{13:l,16:h,44:354,55:355,82:R,87:p,172:357,237:356,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,309:ir,310:hr,311:358,312:Ut,313:353},r(Cl,[2,215]),r(Cl,[2,216]),r(M,L,{58:205,62:206,23:359,63:de}),r(Pe,[2,264]),r(Vm,[2,266]),r(os,[2,11]),r(i,[2,308],{6:[2,310]}),r(Tt,[2,313],{102:360,120:361,121:[1,362]}),r(Tt,[2,47]),r(Tt,[2,63]),r(Tt,[2,64]),{13:l,16:h,55:363,307:43,308:g},r(Tt,[2,336]),r(Tt,[2,337]),r(Tt,[2,338]),{109:[1,364]},r(Xm,[2,60]),{13:l,16:h,55:365,307:43,308:g},r(ce,[2,335]),{13:l,16:h,55:366,307:43,308:g},{31:[1,367]},r(Tn,[2,341],{137:368}),r(Tn,[2,340]),{13:l,16:h,44:215,45:je,55:220,82:R,87:p,89:Me,145:369,172:221,185:213,187:214,231:Et,236:216,237:222,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,309:ir,310:hr,311:217,312:Ut},{28:[1,370],127:371,128:[1,372]},r(Ji,[2,330],{124:373,125:374,126:He}),r(Ji,[2,57]),{44:375,87:p},r(Wm,[2,151],{241:376,242:[1,377]}),r(Oo,[2,153],{245:378,246:[1,379]}),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,247:380,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},{250:[1,381]},r(lt,[2,432]),r(lt,[2,433]),r(lt,[2,434]),r(lt,[2,435]),r(lt,[2,436]),r(lt,[2,437]),{250:[2,439]},r([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:X,298:Z,299:ee,300:Q,301:ie,302:ne}),r(as,[2,162],{261:388,262:389,39:Fl,338:Pl}),r(gt,[2,164]),r(gt,[2,165]),r(gt,[2,166]),r(ut,[2,95]),r(ut,[2,96]),r(lt,[2,377],{177:392,325:[1,393]}),{48:[1,394]},r(ut,[2,177]),{13:l,16:h,44:136,45:$,46:395,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},{13:l,16:h,44:136,45:$,46:396,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},{13:l,16:h,44:136,45:$,46:397,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},{13:l,16:h,44:136,45:$,46:398,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},{13:l,16:h,44:136,45:$,46:399,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(ut,[2,183]),r(ut,[2,98]),r(lt,[2,381],{180:400}),{87:[1,401]},r(ut,[2,185]),{13:l,16:h,44:136,45:$,46:402,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},{29:k,57:403},r($t,[2,193]),{13:l,16:h,55:404,307:43,308:g},{13:l,16:h,44:39,55:40,87:p,139:342,195:405,197:En,307:43,308:g},r(Xi,[2,233]),r(Xi,[2,234]),r(Xi,[2,235]),r(Zm,[2,459],{281:406,325:[1,407]}),r(lt,[2,463],{284:408,325:[1,409]}),r(lt,[2,465],{286:410,325:[1,411]}),{13:l,16:h,31:[1,412],55:414,82:R,171:413,172:415,173:416,174:Do,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:Ro},{31:[1,419],89:[1,420]},{29:[1,421]},r(Io,[2,302]),r(Fo,[2,367],{167:422}),r(Po,[2,369],{168:423}),{48:[1,424],87:[1,425]},r(Io,[2,371]),r(wn,[2,122]),r(wn,[2,417]),r(wn,[2,413]),r(wn,[2,414]),r(wn,[2,415]),r(oi,[2,125]),r(oi,[2,127]),r(oi,[2,128]),r(e1,[2,420],{227:426}),r(oi,[2,130]),{13:l,16:h,55:194,197:Ge,223:427,307:43,308:g},{48:[1,428]},r(Zi,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),r(Ol,[2,288]),{64:[1,433]},r(Ke,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:l,16:h,45:$,268:le,269:Se,270:U,271:be,273:we,274:ge,276:Ee,277:ue,279:ye,280:fe,283:_e,285:Te,308:g,346:Oe,347:Ae,348:_,349:v,350:w,351:C}),r(t1,[2,293]),r(Il,[2,92]),r(Il,[2,93]),r(Il,[2,94]),{45:Hm,89:zm,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:P,29:V,56:85},{19:438,28:P,29:V,56:85},r(An,[2,355],{149:439}),r(An,[2,354]),{13:l,16:h,44:215,45:No,55:220,82:R,87:p,89:Me,156:440,172:221,185:441,203:442,231:ko,236:216,237:222,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,309:ir,310:hr,311:217,312:Ut},r(Pe,[2,19]),r(Zi,[2,21]),{13:l,16:h,44:450,45:r1,55:323,65:445,66:446,67:447,68:448,87:p,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,307:43,308:g,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(os,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},r(K,[2,386],{31:[2,388]}),r(ua,[2,102]),r(xn,[2,391],{191:452}),r(K,[2,395],{196:453,198:454}),r(K,[2,108]),r(K,[2,109]),r(ua,[2,103]),r(ua,[2,104]),r(ua,[2,390]),{13:l,16:h,44:215,45:je,48:[1,455],55:220,82:R,87:p,89:Me,172:221,185:351,187:350,200:456,231:Et,234:349,236:216,237:222,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,309:ir,310:hr,311:217,312:Ut},r(jo,[2,424]),r(i1,[2,136]),r(i1,[2,137]),r(Dl,[2,140]),{232:[1,457]},{13:l,16:h,44:39,55:40,87:p,139:342,195:458,197:En,307:43,308:g},r(Xi,[2,219]),r(Xi,[2,220]),r(Xi,[2,221]),r(Xi,[2,222]),r(Xi,[2,223]),r(os,[2,10]),r(Tt,[2,46]),r(Tt,[2,314]),{112:qm,122:459},r(Tt,[2,62]),r(ce,Bm,{133:242,108:460,112:Um,132:$m}),r(Xm,[2,61]),r(Tt,[2,49]),r([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},r(Tn,[2,351],{146:463,335:[1,464]}),{29:k,57:465},r(Ji,[2,329]),r(ce,[2,332],{129:466,327:[1,467]}),r(Ji,[2,55]),r(Ji,[2,331]),{48:[1,468]},r(Oo,[2,429]),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(ss,[2,431]),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,243:470,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(ss,[2,156]),{45:Km,89:Ym,179:471},r(as,[2,441]),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,251:472,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(gt,[2,444],{256:473}),r(gt,[2,446],{258:474}),r(lt,[2,442]),r(lt,[2,443]),r(gt,[2,449]),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,255:154,257:155,259:475,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(lt,[2,450]),r(lt,[2,451]),r(lt,[2,379],{178:476}),r(lt,[2,378]),r([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:l,16:h,44:136,45:$,46:482,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},{48:[1,483]},{48:[1,484]},r(ut,[2,187]),r($t,[2,194]),{13:l,16:h,44:39,55:40,82:R,87:p,139:289,172:291,255:154,257:155,266:290,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,320:485},{13:l,16:h,39:[1,487],44:136,45:$,46:488,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,282:486,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(Zm,[2,460]),{13:l,16:h,44:136,45:$,46:489,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(lt,[2,464]),{13:l,16:h,44:136,45:$,46:490,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(lt,[2,466]),r(q,[2,40]),r(Fo,[2,298]),r(la,[2,87]),r(la,[2,88]),r(la,[2,89]),r(la,[2,90]),{13:l,16:h,55:492,82:R,172:493,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,311:494,312:Ut,315:491},r(q,[2,41]),r(Po,[2,300]),r(fa,[2,303],{92:495}),{13:l,16:h,31:[1,496],55:414,82:R,171:497,172:415,173:416,174:Do,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:Ro},{31:[1,498],89:[1,499]},{29:[1,500]},r(Io,[2,372]),{13:l,16:h,48:[2,422],55:194,197:Ge,223:312,226:502,228:501,229:Qm,307:43,308:g},r(oi,[2,131]),r(oi,[2,126]),r(Zi,[2,22]),r(Zi,[2,290]),{82:[1,503]},{82:[1,504]},{13:l,16:h,44:510,45:$,55:323,67:321,68:322,74:505,75:506,76:n1,77:320,78:s1,79:509,87:p,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,307:43,308:g,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(t1,[2,294]),r(a1,[2,69]),r(a1,[2,70]),r(Ke,me,{59:197,69:198,20:511,70:N}),r(M,L,{58:205,62:206,23:512,63:de}),{29:[2,375],31:[2,71],84:522,85:a,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},r(An,[2,363],{157:524,335:[1,525]}),r(c,n,{215:10,202:526,205:527,208:528,214:529,44:530,87:p}),r(Mo,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:n,16:n,45:n,197:n,224:n,229:n,308:n,87:p}),{13:l,16:h,44:215,45:No,55:220,82:R,87:p,89:Me,172:221,185:351,203:536,212:534,231:ko,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,309:ir,310:hr,311:217,312:Ut},r(c,n,{215:10,205:527,208:528,214:529,44:530,202:537,87:p}),r(M,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:l,16:h,45:r1,87:p,268:le,269:Se,270:U,271:be,273:we,274:ge,276:Ee,277:ue,279:ye,280:fe,283:_e,285:Te,308:g,346:Oe,347:Ae,348:_,349:v,350:w,351:C}),r(On,[2,291]),r(On,[2,24]),r(On,[2,25]),{13:l,16:h,44:136,45:$,46:539,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(On,[2,28]),r(M,L,{58:205,62:206,23:540,63:de}),r([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),r(xn,[2,107]),{13:l,16:h,44:215,45:je,55:220,82:R,87:p,89:Me,172:221,185:351,187:350,199:543,200:544,231:Et,234:349,236:216,237:222,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,309:ir,310:hr,311:217,312:Ut},r(o1,[2,132]),r(jo,[2,425]),r(o1,[2,133]),{13:l,16:h,44:354,55:355,82:R,87:p,172:357,237:356,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,309:ir,310:hr,311:358,312:Ut,313:545},r(Tt,[2,54]),r(Tt,[2,48]),r(Tn,[2,342]),{13:l,16:h,44:39,55:40,87:p,139:546,307:43,308:g},r(Tn,[2,68]),r(K,[2,350],{31:c1,112:c1}),r(Tt,[2,53]),{13:l,16:h,55:547,307:43,308:g},r(ce,[2,333]),r(Ce,[2,16]),r(Oo,[2,152]),r(ss,[2,154]),r(ss,[2,157]),r(as,[2,159]),r(as,[2,160],{262:389,261:548,39:Fl,338:Pl}),r(as,[2,161],{262:389,261:549,39:Fl,338:Pl}),r(gt,[2,163]),{13:l,16:h,44:136,45:$,46:550,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(ut,[2,178]),r(ut,[2,179]),{13:l,16:h,44:136,45:$,46:551,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},{13:l,16:h,44:136,45:$,46:552,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},{13:l,16:h,44:136,45:$,46:553,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},{48:[1,554],272:[1,555]},r(ut,[2,184]),r(ut,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:l,16:h,55:194,197:Ge,223:562,307:43,308:g},r(Rl,[2,224]),r(Rl,[2,225]),r(Rl,[2,226]),{31:[1,563],45:u1,94:564},r(q,[2,84]),r(Fo,[2,368]),r(q,[2,85]),r(Po,[2,370]),r(fa,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},r(Zi,[2,35],{83:[1,569]}),r(Zi,[2,36],{81:[1,570]}),r(Ol,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:l,16:h,45:$,76:n1,78:s1,87:p,268:le,269:Se,270:U,271:be,273:we,274:ge,276:Ee,277:ue,279:ye,280:fe,283:_e,285:Te,308:g,346:Oe,347:Ae,348:_,349:v,350:w,351:C}),r(cs,[2,295]),{45:$,77:572},{45:$,77:573},r(cs,[2,33]),r(cs,[2,34]),{31:[2,275],50:574,84:575,85:a},{31:[2,277],51:576,84:577,85:a},r(An,[2,356]),r(l1,[2,357],{152:578,335:[1,579]}),r(Ci,[2,74]),{29:k,57:580},{29:k,57:581},{13:l,16:h,44:39,55:40,87:p,139:582,307:43,308:g},r(f1,[2,365],{162:583,328:[1,584]}),{13:l,16:h,45:$,55:323,67:321,68:322,77:320,79:585,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,307:43,308:g,346:Oe,347:Ae,348:_,349:v,350:w,351:C},{45:[1,586]},r(Ci,[2,81]),{29:k,57:587},r(An,[2,73]),r(K,[2,362],{29:Fi,31:Fi,85:Fi,112:Fi,159:Fi,160:Fi,161:Fi,163:Fi,164:Fi}),r(Mo,[2,112]),r(us,[2,401],{206:588}),r(K,[2,405],{209:589,210:590}),r(K,[2,403]),r(K,[2,404]),r(Mo,[2,113]),r(Mo,[2,400]),{13:l,16:h,44:215,45:No,48:[1,591],55:220,82:R,87:p,89:Me,172:221,185:351,203:536,212:592,231:ko,234:535,236:216,237:222,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,309:ir,310:hr,311:217,312:Ut},r(jo,[2,426]),r(Dl,[2,138]),r(Dl,[2,139]),{232:[1,593]},r(On,[2,292]),{47:[1,595],48:[1,594]},r(os,[2,9]),r(xn,[2,392]),r(xn,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:l,16:h,87:p,197:En,308:g}),r(xn,[2,110],{272:[1,598]}),r(Lo,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},r(Ji,[2,58]),r(gt,[2,445]),r(gt,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},r(ut,[2,99]),r(lt,[2,382]),r([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),r(ut,[2,188]),r(ut,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:l,16:h,55:492,82:R,172:493,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,311:494,312:Ut,315:611},r(q,[2,42]),r(fa,[2,304]),{13:l,16:h,55:414,82:R,95:612,171:613,172:415,173:416,174:Do,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:Ro},{31:[1,614],45:u1,94:615},r(oi,[2,129]),r(e1,[2,421]),{82:[1,616]},{82:[1,617]},r(cs,[2,296]),r(cs,[2,31]),r(cs,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},r(K,Jm,{155:330,153:618,154:619,29:Pi,31:Pi,85:Pi,112:Pi,159:Pi,160:Pi,161:Pi,163:Pi,164:Pi}),r(l1,[2,358]),r(Ci,[2,75]),r(Ci,[2,76]),{29:k,57:620},{13:l,16:h,44:39,55:40,87:p,139:621,307:43,308:g},r(f1,[2,366]),r(Ci,[2,79]),{13:l,16:h,44:136,45:$,46:622,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(Ci,[2,91],{336:[1,623]}),r([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),r(us,[2,117]),{13:l,16:h,44:215,45:No,55:220,82:R,87:p,89:Me,172:221,185:351,203:536,211:626,212:627,231:ko,234:535,236:216,237:222,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,309:ir,310:hr,311:217,312:Ut},r(Oi,[2,134]),r(jo,[2,427]),r(Oi,[2,135]),r(On,[2,26]),{44:628,87:p},r(xn,[2,106]),r(xn,[2,394]),r(K,[2,396]),r(Lo,[2,111]),r(Lo,[2,398]),{13:l,16:h,44:39,55:40,87:p,139:342,186:629,190:340,195:341,197:En,307:43,308:g},r(Cl,[2,217]),r(K,xo,{144:248,140:630,143:631,31:[2,343]}),r(ut,[2,97]),r(lt,[2,380]),r(ut,[2,180]),{13:l,16:h,44:136,45:$,46:632,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},{13:l,16:h,44:136,45:$,46:633,55:133,67:132,68:134,77:131,82:R,87:p,172:135,224:ke,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:Se,270:U,271:be,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:Ae,348:_,349:v,350:w,351:C},r(ut,[2,190]),{290:[1,634]},{314:[1,635]},{13:l,16:h,48:[1,636],55:414,82:R,171:637,172:415,173:416,174:Do,255:154,257:155,291:150,294:J,295:te,296:re,297:X,298:Z,299:ee,300:Q,301:ie,302:ne,303:se,304:G,305:W,306:ae,307:43,308:g,312:Ro},r(h1,[2,305]),r(q,[2,86]),r(fa,[2,374]),r(Zi,[2,37]),r(Zi,[2,38]),r(An,[2,72]),r(An,[2,360]),r(Ci,[2,77]),{29:k,57:638},{47:[1,639]},{29:[2,376]},r(us,[2,402]),r(us,[2,115],{215:10,208:528,214:529,44:530,205:640,13:n,16:n,45:n,197:n,224:n,229:n,308:n,87:p}),r(us,[2,118],{272:[1,641]}),r(Vo,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:se,304:G,305:W,306:ae},r(la,[2,218]),r(fa,[2,44]),r(h1,[2,306]),r(Ci,[2,78]),{44:651,87:p},r(us,[2,116]),r(K,[2,406]),r(Vo,[2,119]),r(Vo,[2,408]),r(c,n,{215:10,205:527,208:528,214:529,44:530,202:652,87:p}),r(On,[2,27]),r(Lo,[2,230]),r(d1,[2,345],{141:653,335:[1,654]}),r(ut,[2,181]),r(ut,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},r(K,xo,{144:248,142:657,143:658,31:p1,112:p1}),r(d1,[2,346]),r(Ci,[2,80]),r(Vo,[2,231]),r(Tn,[2,67]),r(Tn,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:o(function(E,O){if(O.recoverable)this.trace(E);else{var I=new Error(E);throw I.hash=O,I}},"parseError"),parse:o(function(E){var O=this,I=[0],z=[],pe=[null],d=[],Wt=this.table,m="",li=0,ma=0,$o=0,Go=2,ga=1,Wo=d.slice.call(arguments,1),nt=Object.create(this.lexer),fi={yy:{}};for(var ya in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ya)&&(fi.yy[ya]=this.yy[ya]);nt.setInput(E,fi.yy),fi.yy.lexer=nt,fi.yy.parser=this,typeof nt.yylloc>"u"&&(nt.yylloc={});var ps=nt.yylloc;d.push(ps);var We=nt.options&&nt.options.ranges;typeof fi.yy.parseError=="function"?this.parseError=fi.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function et(hi){I.length=I.length-2*hi,pe.length=pe.length-hi,d.length=d.length-hi}o(et,"popStack");for(var Le=o(function(){var hi;return hi=nt.lex()||ga,typeof hi!="number"&&(hi=O.symbols_[hi]||hi),hi},"lex"),Ue,nr,In,wr,wP,Hl,ms={},Ho,Ri,x1,zo;;){if(In=I[I.length-1],this.defaultActions[In]?wr=this.defaultActions[In]:((Ue===null||typeof Ue>"u")&&(Ue=Le()),wr=Wt[In]&&Wt[In][Ue]),typeof wr>"u"||!wr.length||!wr[0]){var zl="";zo=[];for(Ho in Wt[In])this.terminals_[Ho]&&Ho>Go&&zo.push("'"+this.terminals_[Ho]+"'");nt.showPosition?zl="Parse error on line "+(li+1)+`:
`+nt.showPosition()+`
Expecting `+zo.join(", ")+", got '"+(this.terminals_[Ue]||Ue)+"'":zl="Parse error on line "+(li+1)+": Unexpected "+(Ue==ga?"end of input":"'"+(this.terminals_[Ue]||Ue)+"'"),this.parseError(zl,{text:nt.match,token:this.terminals_[Ue]||Ue,line:nt.yylineno,loc:ps,expected:zo})}if(wr[0]instanceof Array&&wr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+In+", token: "+Ue);switch(wr[0]){case 1:I.push(Ue),pe.push(nt.yytext),d.push(nt.yylloc),I.push(wr[1]),Ue=null,nr?(Ue=nr,nr=null):(ma=nt.yyleng,m=nt.yytext,li=nt.yylineno,ps=nt.yylloc,$o>0&&$o--);break;case 2:if(Ri=this.productions_[wr[1]][1],ms.$=pe[pe.length-Ri],ms._$={first_line:d[d.length-(Ri||1)].first_line,last_line:d[d.length-1].last_line,first_column:d[d.length-(Ri||1)].first_column,last_column:d[d.length-1].last_column},We&&(ms._$.range=[d[d.length-(Ri||1)].range[0],d[d.length-1].range[1]]),Hl=this.performAction.apply(ms,[m,ma,li,fi.yy,wr[1],pe,d].concat(Wo)),typeof Hl<"u")return Hl;Ri&&(I=I.slice(0,-1*Ri*2),pe=pe.slice(0,-1*Ri),d=d.slice(0,-1*Ri)),I.push(this.productions_[wr[1]][0]),pe.push(ms.$),d.push(ms._$),x1=Wt[I[I.length-2]][I[I.length-1]],I.push(x1);break;case 3:return!0}}return!0},"parse")},qo=qd().Wildcard,Bo="http://www.w3.org/1999/02/22-rdf-syntax-ns#",iS=Bo+"type",nS=Bo+"first",sS=Bo+"rest",m1=Bo+"nil",Uo="http://www.w3.org/2001/XMLSchema#",g1=Uo+"integer",y1=Uo+"decimal",_1=Uo+"double",aS=Uo+"boolean",Cn="",v1="",S1="";function Gt(T){return T.toLowerCase()}o(Gt,"lowercase");function Ii(T,E){return T.push(E),T}o(Ii,"appendTo");function Fn(T,E){return T.push.apply(T,E),T}o(Fn,"appendAllTo");function at(T){T||(T={});for(var E=1,O=arguments.length,I;E<O&&(I=arguments[E]||{});E++)for(var z in I)T[z]=I[z];return T}o(at,"extend");function ci(){for(var T=[],E=0,O=arguments.length;E<O;E++)T=T.concat.apply(T,arguments[E]);return T}o(ci,"unionAll");function ha(T){if(T[0]==="<"&&(T=T.substring(1,T.length-1)),/^[a-z][a-z0-9.+-]*:/i.test(T))return T;if(!ve.base)throw new Error("Cannot resolve relative IRI "+T+" because no base IRI was set.");switch(Cn!==ve.base&&(Cn=ve.base,v1=Cn.replace(/[^\/:]*$/,""),S1=Cn.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),T[0]){case void 0:return Cn;case"#":return Cn+T;case"?":return Cn.replace(/(?:\?.*)?$/,T);case"/":return S1+T;default:return v1+T}}o(ha,"resolveIRI");function kl(T){if(T){var E=T[0];if(E==="?"||E==="$")return ve.factory.variable(T.substr(1))}return T}o(kl,"toVar");function At(T,E){return{type:"operation",operator:T,args:E||[]}}o(At,"operation");function ls(T,E){var O={expression:T==="*"?new qo:T};if(E)for(var I in E)O[I]=E[I];return O}o(ls,"expression");function fs(T,E){return{type:"path",pathType:T,items:E}}o(fs,"path");function jl(T,E){for(var O=0,I=E.length,z;O<I&&(z=E[O]);O++)T=At(z[0],[T,z[1]]);return T}o(jl,"createOperationTree");function Pn(T,E){var O=[],I=[],z=T.length,pe,d={};if(!z)return null;for(var Wt=0;Wt<z&&(pe=T[Wt]);Wt++)(pe.named?I:O).push(pe.iri);return d[E||"from"]={default:O,named:I},d}o(Pn,"groupDatasets");function hs(T){return parseInt(T,10)}o(hs,"toInt");function Ml(T){return T.type==="group"&&T.patterns.length===1?T.patterns[0]:T}o(Ml,"degroupSingle");function ui(T,E){return E&&E.termType!=="NamedNode"&&(E=ve.factory.namedNode(E)),ve.factory.literal(T,E)}o(ui,"createTypedLiteral");function oS(T,E){return ve.factory.literal(T,E)}o(oS,"createLangLiteral");function Ll(T,E,O){if(!("termType"in E))throw new Error("Nested triples cannot contain paths");return ve.factory.quad(T,E,O)}o(Ll,"nestedTriple");function Di(T,E,O,I){var z={};return T!=null&&(z.subject=T),E!=null&&(z.predicate=E),O!=null&&(z.object=O),I!=null&&(z.annotations=I),z}o(Di,"triple");function da(T){return typeof T=="string"?T.startsWith("e_")?ve.factory.blankNode(T):ve.factory.blankNode("e_"+T):ve.factory.blankNode("g_"+b1++)}o(da,"blank");var b1=0;ve._resetBlanks=function(){b1=0};var cS=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,uS={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},lS=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,Vl=String.fromCharCode;function w1(T,E){T=T.substring(E,T.length-E);try{T=T.replace(cS,function(O,I,z,pe){var d;if(I){if(d=parseInt(I,16),isNaN(d))throw new Error;return Vl(d)}else if(z){if(d=parseInt(z,16),isNaN(d))throw new Error;return d<65535?Vl(d):Vl(55296+((d-=65536)>>10),56320+(d&1023))}else{var Wt=uS[pe];if(!Wt)throw new Error;return Wt}})}catch{return""}if(lS.exec(T))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+T);return T}o(w1,"unescapeString");function fS(T){var E=da(),O=E,I=[],z,pe=[];T.forEach(function(li){I.push(li.entity),Fn(pe,li.triples)});for(var d=0,Wt=0,m=I.length,z=Array(m*2);d<m;)z[Wt++]=Di(O,ve.factory.namedNode(nS),I[d]),z[Wt++]=Di(O,ve.factory.namedNode(sS),O=++d<m?da():ve.factory.namedNode(m1));return{entity:E,triples:Fn(z,pe)}}o(fS,"createList");function hS(T){var E=da();return{entity:E,triples:T.map(function(O){return at(Di(E),O)})}}o(hS,"createAnonymousObject");function ql(T,E,O){var I=[],z=[];return E.forEach(function(pe){let d=null;pe.annotation&&(d=pe.annotation,pe=pe.object),I.push(Di(null,T,pe.entity,d)),Fn(z,pe.triples)}),ci(I,O||[],z)}o(ql,"objectListToTriples");function SP(T){for(var E=[],O,I=0,z;z=T[I];I++)switch(z.type){case"bgp":z.triples.length&&(O?Fn(O.triples,z.triples):Ii(E,O=z));break;default:(!z.patterns||z.patterns.length>0)&&(Ii(E,z),O=null)}return E}o(SP,"mergeAdjacentBGPs");function ds(T){return T.variable?T.variable.value:T.value||T.expression.value}o(ds,"getExpressionId");function Bl(T){if(!T)return[];if(T.type==="aggregate")return[T];if(T.type==="operation"){let E=[];for(let O of T.args)E.push(...Bl(O));return E}return[]}o(Bl,"getAggregatesOfExpression");function dS(T){let E=new Set,O=o(function(I){I&&(I.termType==="Variable"?E.add(I):I.type==="operation"&&I.args.forEach(O))},"visitExpression");return O(T),E}o(dS,"getVariablesFromExpression");function Ul(T,E=1,O=[]){for(let I of T)E>0&&I instanceof Array?Ul(I,E-1,O):O.push(I);return O}o(Ul,"flatten");function $l(T){return T.termType==="Variable"}o($l,"isVariable");function E1(T){if(T.triples){let E=[];for(let O of T.triples)$l(O.subject)&&E.push(O.subject.value),$l(O.predicate)&&E.push(O.predicate.value),$l(O.object)&&E.push(O.object.value);return E}else if(T.patterns){let E=[];for(let O of T.patterns)E.push(...E1(O));return E}return[]}o(E1,"getBoundVarsFromGroupGraphPattern");function pS(T){let E=T.slice().sort(),O=[];for(let I=0;I<E.length-1;I++)E[I+1]==E[I]&&O.push(E[I]);return O}o(pS,"getDuplicatesInArray");function pa(T){if(!ve.sparqlStar)throw new Error("SPARQL-star support is not enabled");return T}o(pa,"ensureSparqlStar");function T1(T,E,O){for(let I of E){let z=Di("subject"in I?I.subject:T,I.predicate,I.object);O.push(z),I.annotations&&T1(Ll(T,I.predicate,I.object),I.annotations,O)}}o(T1,"_applyAnnotations");function Gl(T){if(ve.sparqlStar){let E=[];return T.forEach(O=>{let I=Di(O.subject,O.predicate,O.object);E.push(I),O.annotations&&T1(Ll(O.subject,O.predicate,O.object),O.annotations,E)}),E}return T}o(Gl,"applyAnnotations");function bP(T){if(!ve.sparqlStarNestedQuads)throw new Error("Lenient SPARQL-star support with nested quads is not enabled");return T}o(bP,"ensureSparqlStarNestedQuads");function A1(T){for(let E of T){if(E.type==="graph"&&E.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(E.type==="bgp"||E.type==="graph"){for(let O of E.triples)if(O.subject.termType==="Variable"||O.predicate.termType==="Variable"||O.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return T}o(A1,"ensureNoVariables");function Wl(T){for(let E of T)if(E.type==="bgp"){for(let O of E.triples)if(O.subject.termType==="BlankNode"||O.predicate.termType==="BlankNode"||O.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return T}o(Wl,"ensureNoBnodes");var mS=(function(){var T={EOF:1,parseError:o(function(O,I){if(this.yy.parser)this.yy.parser.parseError(O,I);else throw new Error(O)},"parseError"),setInput:o(function(E,O){return this.yy=O||this.yy||{},this._input=E,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:o(function(){var E=this._input[0];this.yytext+=E,this.yyleng++,this.offset++,this.match+=E,this.matched+=E;var O=E.match(/(?:\r\n?|\n).*/g);return O?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),E},"input"),unput:o(function(E){var O=E.length,I=E.split(/(?:\r\n?|\n)/g);this._input=E+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-O),this.offset-=O;var z=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),I.length-1&&(this.yylineno-=I.length-1);var pe=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:I?(I.length===z.length?this.yylloc.first_column:0)+z[z.length-I.length].length-I[0].length:this.yylloc.first_column-O},this.options.ranges&&(this.yylloc.range=[pe[0],pe[0]+this.yyleng-O]),this.yyleng=this.yytext.length,this},"unput"),more:o(function(){return this._more=!0,this},"more"),reject:o(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:o(function(E){this.unput(this.match.slice(E))},"less"),pastInput:o(function(){var E=this.matched.substr(0,this.matched.length-this.match.length);return(E.length>20?"...":"")+E.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:o(function(){var E=this.match;return E.length<20&&(E+=this._input.substr(0,20-E.length)),(E.substr(0,20)+(E.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:o(function(){var E=this.pastInput(),O=new Array(E.length+1).join("-");return E+this.upcomingInput()+`
`+O+"^"},"showPosition"),test_match:o(function(E,O){var I,z,pe;if(this.options.backtrack_lexer&&(pe={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(pe.yylloc.range=this.yylloc.range.slice(0))),z=E[0].match(/(?:\r\n?|\n).*/g),z&&(this.yylineno+=z.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:z?z[z.length-1].length-z[z.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+E[0].length},this.yytext+=E[0],this.match+=E[0],this.matches=E,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(E[0].length),this.matched+=E[0],I=this.performAction.call(this,this.yy,this,O,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),I)return I;if(this._backtrack){for(var d in pe)this[d]=pe[d];return!1}return!1},"test_match"),next:o(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var E,O,I,z;this._more||(this.yytext="",this.match="");for(var pe=this._currentRules(),d=0;d<pe.length;d++)if(I=this._input.match(this.rules[pe[d]]),I&&(!O||I[0].length>O[0].length)){if(O=I,z=d,this.options.backtrack_lexer){if(E=this.test_match(I,pe[d]),E!==!1)return E;if(this._backtrack){O=!1;continue}else return!1}else if(!this.options.flex)break}return O?(E=this.test_match(O,pe[z]),E!==!1?E:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:o(function(){var O=this.next();return O||this.lex()},"lex"),begin:o(function(O){this.conditionStack.push(O)},"begin"),popState:o(function(){var O=this.conditionStack.length-1;return O>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:o(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:o(function(O){return O=this.conditionStack.length-1-Math.abs(O||0),O>=0?this.conditionStack[O]:"INITIAL"},"topState"),pushState:o(function(O){this.begin(O)},"pushState"),stateStackSize:o(function(){return this.conditionStack.length},"stateStackSize"),options:{flex:!0,"case-insensitive":!0},performAction:o(function(O,I,z,pe){var d=pe;switch(z){case 0:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID";case 125:console.log(I.yytext);break}},"anonymous"),rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return T})();Nl.lexer=mS;function ve(){this.yy={}}return o(ve,"Parser"),ve.prototype=Nl,Nl.Parser=ve,new ve})();tg.exports=nx});var ag=y((DN,sg)=>{var sx="http://www.w3.org/2001/XMLSchema#integer",ax="http://www.w3.org/2001/XMLSchema#string";function Je(r){this._options=r=r||{};var e=r.prefixes||{};this._prefixByIri={};var t=[];for(var i in e){var n=e[i];Ra(n)&&(this._prefixByIri[n]=i,t.push(n))}var s=t.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+s+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=r.sparqlStar,this._indent=Ra(r.indent)?r.indent:"  ",this._newline=Ra(r.newline)?r.newline:`
`,this._explicitDatatype=!!r.explicitDatatype}o(Je,"Generator");Je.prototype.toQuery=function(r){var e="";return r.queryType&&(e+=r.queryType.toUpperCase()+" "),r.reduced&&(e+="REDUCED "),r.distinct&&(e+="DISTINCT "),r.variables?e+=yr(r.variables,void 0,function(t){return/^[?$]/.test(t)?t:cn(t)?this.toEntity(t):"("+this.toExpression(t.expression)+" AS "+tu(t.variable)+")"},this)+" ":r.template&&(e+=this.group(r.template,!0)+this._newline),r.from&&(e+=this.graphs("FROM ",r.from.default)+this.graphs("FROM NAMED ",r.from.named)),r.where&&(e+="WHERE "+this.group(r.where,!0)+this._newline),r.updates&&(e+=yr(r.updates,";"+this._newline,this.toUpdate,this)),r.group&&(e+="GROUP BY "+yr(r.group,void 0,function(t){var i=cn(t.expression)?this.toEntity(t.expression):"("+this.toExpression(t.expression)+")";return t.variable?"("+i+" AS "+tu(t.variable)+")":i},this)+this._newline),r.having&&(e+="HAVING ("+yr(r.having,void 0,this.toExpression,this)+")"+this._newline),r.order&&(e+="ORDER BY "+yr(r.order,void 0,function(t){var i="("+this.toExpression(t.expression)+")";return t.descending?"DESC "+i:i},this)+this._newline),r.offset&&(e+="OFFSET "+r.offset+this._newline),r.limit&&(e+="LIMIT "+r.limit+this._newline),r.values&&(e+=this.values(r)),e=this.baseAndPrefixes(r)+e,e.trim()};Je.prototype.baseAndPrefixes=function(r){var e=r.base?"BASE <"+r.base+">"+this._newline:"",t="";for(var i in r.prefixes)(this._options.allPrefixes||this._usedPrefixes[i])&&(t+="PREFIX "+i+": <"+r.prefixes[i]+">"+this._newline);return e+t};Je.prototype.toPattern=function(r){var e=r.type||r instanceof Array&&"array"||(r.subject&&r.predicate&&r.object?"triple":"");if(!(e in this))throw new Error("Unknown entry type: "+e);return this[e](r)};Je.prototype.triple=function(r){return this.toEntity(r.subject)+" "+this.toEntity(r.predicate)+" "+this.toEntity(r.object)+"."};Je.prototype.array=function(r){return yr(r,this._newline,this.toPattern,this)};Je.prototype.bgp=function(r){return this.encodeTriples(r.triples)};Je.prototype.encodeTriples=function(r){if(!r.length)return"";for(var e=[],t=void 0,i=void 0,n=0;n<r.length;n++){var s=r[n];zn(s.subject,t)?zn(s.predicate,i)?e.push(","):(i=s.predicate,e.push(";"+this._newline,this._indent,this.toEntity(i))):(t&&e.push("."+this._newline),t=s.subject,i=s.predicate,e.push(this.toEntity(t)," ",this.toEntity(i))),e.push(" ",this.toEntity(s.object))}return e.push("."),e.join("")};Je.prototype.graph=function(r){return"GRAPH "+this.toEntity(r.name)+" "+this.group(r)};Je.prototype.graphs=function(r,e){return!e||e.length===0?"":yr(e,"",function(t){return r+this.toEntity(t)+this._newline},this)};Je.prototype.group=function(r,e){return r=e!==!0?this.array(r.patterns||r.triples):this.toPattern(r.type!=="group"?r:r.patterns),r.indexOf(this._newline)===-1?"{ "+r+" }":"{"+this._newline+this.indent(r)+this._newline+"}"};Je.prototype.query=function(r){return this.toQuery(r)};Je.prototype.filter=function(r){return"FILTER("+this.toExpression(r.expression)+")"};Je.prototype.bind=function(r){return"BIND("+this.toExpression(r.expression)+" AS "+tu(r.variable)+")"};Je.prototype.optional=function(r){return"OPTIONAL "+this.group(r)};Je.prototype.union=function(r){return yr(r.patterns,this._newline+"UNION"+this._newline,function(e){return this.group(e,!0)},this)};Je.prototype.minus=function(r){return"MINUS "+this.group(r)};Je.prototype.values=function(r){var e=Object.keys(r.values.reduce(function(n,s){for(var a in s)n[a]=!0;return n},{})),t,i;return e.length===1?t=i="":(t="(",i=")"),"VALUES "+t+e.join(" ")+i+" {"+this._newline+yr(r.values,this._newline,function(n){return"  "+t+yr(e,void 0,function(s){return n[s]?this.toEntity(n[s]):"UNDEF"},this)+i},this)+this._newline+"}"};Je.prototype.service=function(r){return"SERVICE "+(r.silent?"SILENT ":"")+this.toEntity(r.name)+" "+this.group(r)};Je.prototype.toExpression=function(r){if(cn(r))return this.toEntity(r);switch(r.type.toLowerCase()){case"aggregate":return r.aggregation.toUpperCase()+"("+(r.distinct?"DISTINCT ":"")+this.toExpression(r.expression)+(typeof r.separator=="string"?'; SEPARATOR = "'+r.separator.replace(ig,ng)+'"':"")+")";case"functioncall":return this.toEntity(r.function)+"("+yr(r.args,", ",this.toExpression,this)+")";case"operation":var e=r.operator.toUpperCase(),t=r.args||[];switch(r.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(cn(t[0])?this.toEntity(t[0]):"("+this.toExpression(t[0])+")")+" "+e+" "+(cn(t[1])?this.toEntity(t[1]):"("+this.toExpression(t[1])+")");case"!":return"!("+this.toExpression(t[0])+")";case"uplus":return"+("+this.toExpression(t[0])+")";case"uminus":return"-("+this.toExpression(t[0])+")";case"notin":e="NOT IN";case"in":return this.toExpression(t[0])+" "+e+"("+(Ra(t[1])?t[1]:yr(t[1],", ",this.toExpression,this))+")";case"notexists":e="NOT EXISTS";case"exists":return e+" "+this.group(t[0],!0);default:return e+"("+yr(t,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+r.type)}};Je.prototype.toEntity=function(r){if(cn(r))switch(r.termType){case"Wildcard":return"*";case"Variable":return tu(r);case"BlankNode":return"_:"+r.value;case"Literal":var e=r.value||"",t=r.language||"",i=r.datatype;if(r='"'+e.replace(ig,ng)+'"',t)r+="@"+t;else if(i){if(!this._explicitDatatype)switch(i.value){case ax:return r;case sx:if(/^\d+$/.test(e))return e+" "}r+="^^"+this.encodeIRI(i.value)}return r;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return r.graph&&r.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(r.graph)+" { "+this.toEntity(r.subject)+" "+this.toEntity(r.predicate)+" "+this.toEntity(r.object)+" }  >>":"<< "+this.toEntity(r.subject)+" "+this.toEntity(r.predicate)+" "+this.toEntity(r.object)+" >>";default:return this.encodeIRI(r.value)}else{var n=r.items.map(this.toEntity,this),s=r.pathType;switch(s){case"^":case"!":return s+n[0];case"*":case"+":case"?":return"("+n[0]+s+")";default:return"("+n.join(s)+")"}}};var ig=/["\\\t\n\r\b\f]/g,ng=o(function(r){return ox[r]},"escapeReplacer"),ox={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};Je.prototype.encodeIRI=function(r){var e=this._prefixRegex.exec(r);if(e){var t=this._prefixByIri[e[1]];return this._usedPrefixes[t]=!0,t+":"+e[2]}return"<"+r+">"};Je.prototype.toUpdate=function(r){switch(r.type||r.updateType){case"load":return"LOAD"+(r.source?" "+this.toEntity(r.source):"")+(r.destination?" INTO GRAPH "+this.toEntity(r.destination):"");case"insert":return"INSERT DATA "+this.group(r.insert,!0);case"delete":return"DELETE DATA "+this.group(r.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(r.delete,!0);case"insertdelete":return(r.graph?"WITH "+this.toEntity(r.graph)+this._newline:"")+(r.delete.length?"DELETE "+this.group(r.delete,!0)+this._newline:"")+(r.insert.length?"INSERT "+this.group(r.insert,!0)+this._newline:"")+(r.using?this.graphs("USING ",r.using.default):"")+(r.using?this.graphs("USING NAMED ",r.using.named):"")+"WHERE "+this.group(r.where,!0);case"add":case"copy":case"move":return r.type.toUpperCase()+" "+(r.silent?"SILENT ":"")+(r.source.default?"DEFAULT":this.toEntity(r.source.name))+" TO "+this.toEntity(r.destination.name);case"create":case"clear":case"drop":return r.type.toUpperCase()+(r.silent?" SILENT ":" ")+(r.graph.default?"DEFAULT":r.graph.named?"NAMED":r.graph.all?"ALL":"GRAPH "+this.toEntity(r.graph.name));default:throw new Error("Unknown update query type: "+r.type)}};Je.prototype.indent=function(r){return r.replace(/^/gm,this._indent)};function tu(r){return"?"+r.value}o(tu,"variableToString");function Ra(r){return typeof r=="string"}o(Ra,"isString");function cn(r){return typeof r.termType=="string"}o(cn,"isTerm");function zn(r,e){if(!r||!cn(r)||!e||!cn(e)||r.termType!==e.termType)return!1;switch(r.termType){case"Literal":return r.value===e.value&&r.language===e.language&&zn(r.datatype,e.datatype);case"Quad":return zn(r.subject,e.subject)&&zn(r.predicate,e.predicate)&&zn(r.object,e.object)&&zn(r.graph,e.graph);default:return r.value===e.value}}o(zn,"equalTerms");function yr(r,e,t,i){return r.map(t,i).join(Ra(e)?e:" ")}o(yr,"mapJoin");function cx(r={}){return{stringify:o(function(e){var t=Object.create(r);return t.prefixes=e.prefixes,new Je(t).toQuery(e)},"stringify"),createGenerator:o(function(){return new Je(r)},"createGenerator")}}o(cx,"_Generator");sg.exports={Generator:cx}});var Ud=y(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});ru.BlankNode=void 0;var Bd=class{static{o(this,"BlankNode")}constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&e.termType==="BlankNode"&&e.value===this.value}};ru.BlankNode=Bd});var $d=y(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.DefaultGraph=void 0;var Na=class{static{o(this,"DefaultGraph")}constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&e.termType==="DefaultGraph"}};iu.DefaultGraph=Na;Na.INSTANCE=new Na});var su=y(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.NamedNode=void 0;var Gd=class{static{o(this,"NamedNode")}constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&e.termType==="NamedNode"&&e.value===this.value}};nu.NamedNode=Gd});var Wd=y(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.Literal=void 0;var og=su(),ka=class r{static{o(this,"Literal")}constructor(e,t){this.termType="Literal",this.value=e,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(e){return!!e&&e.termType==="Literal"&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}};au.Literal=ka;ka.RDF_LANGUAGE_STRING=new og.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString");ka.XSD_STRING=new og.NamedNode("http://www.w3.org/2001/XMLSchema#string")});var zd=y(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.Quad=void 0;var Hd=class{static{o(this,"Quad")}constructor(e,t,i,n){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=i,this.graph=n}equals(e){return!!e&&(e.termType==="Quad"||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}};ou.Quad=Hd});var Yd=y(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.Variable=void 0;var Kd=class{static{o(this,"Variable")}constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&e.termType==="Variable"&&e.value===this.value}};cu.Variable=Kd});var ug=y(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.DataFactory=void 0;var ux=Ud(),lx=$d(),cg=Wd(),fx=su(),hx=zd(),dx=Yd(),px=0,Qd=class{static{o(this,"DataFactory")}constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${px++}_`}namedNode(e){return new fx.NamedNode(e)}blankNode(e){return new ux.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new cg.Literal(e,t)}variable(e){return new dx.Variable(e)}defaultGraph(){return lx.DefaultGraph.INSTANCE}quad(e,t,i,n){return new hx.Quad(e,t,i,n||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(cg.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}};uu.DataFactory=Qd});var lg=y(_r=>{"use strict";var mx=_r&&_r.__createBinding||(Object.create?(function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,i,n)}):(function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]})),Kn=_r&&_r.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&mx(e,r,t)};Object.defineProperty(_r,"__esModule",{value:!0});Kn(Ud(),_r);Kn(ug(),_r);Kn($d(),_r);Kn(Wd(),_r);Kn(su(),_r);Kn(zd(),_r);Kn(Yd(),_r)});var hg=y((QN,fg)=>{var{Parser:Bi}=rg(),{Generator:gx}=ag(),{Wildcard:yx}=qd(),{DataFactory:_x}=lg();function vx({prefixes:r,baseIRI:e,factory:t,pathOnly:i,sparqlStar:n,skipValidation:s,skipUngroupedVariableCheck:a}={}){let c={};for(let f in r??{})c[f]=r[f];let u=new Bi;return u.parse=function(){return Bi.base=e||"",Bi.prefixes=Object.create(c),Bi.factory=t||new _x,Bi.sparqlStar=!!n,Bi.pathOnly=!!i,Bi.skipValidation=!!s||!!a,Bi.prototype.parse.apply(u,arguments)},u._resetBlanks=Bi._resetBlanks,u}o(vx,"_Parser");fg.exports={Parser:vx,Generator:gx,Wildcard:yx}});var pg=y(Cr=>{"use strict";var Sx=Cr&&Cr.__createBinding||(Object.create?(function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,i,n)}):(function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]})),bx=Cr&&Cr.__setModuleDefault||(Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e}),wx=Cr&&Cr.__importStar||(function(){var r=o(function(e){return r=Object.getOwnPropertyNames||function(t){var i=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[i.length]=n);return i},r(e)},"ownKeys");return function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i=r(e),n=0;n<i.length;n++)i[n]!=="default"&&Sx(t,e,i[n]);return bx(t,e),t}})();Object.defineProperty(Cr,"__esModule",{value:!0});Cr.SPARQLParser=Cr.SPARQLParseError=void 0;var dg=wx(hg()),Ui=class extends Error{static{o(this,"SPARQLParseError")}constructor(e,t,i,n){super(e,n?{cause:n}:void 0),this.name="SPARQLParseError",this.line=t,this.column=i}};Cr.SPARQLParseError=Ui;var Jd=class{static{o(this,"SPARQLParser")}constructor(){this.parser=new dg.Parser,this.generator=new dg.Generator}parse(e){try{let t=this.parser.parse(e);return this.validateQuery(t),t}catch(t){if(t instanceof Error){let i=t.message.match(/line (\d+), column (\d+)/),n=i?parseInt(i[1],10):void 0,s=i?parseInt(i[2],10):void 0;throw new Ui(`SPARQL syntax error: ${t.message}`,n,s,t)}throw t}}toString(e){try{return this.generator.stringify(e)}catch(t){throw t instanceof Error?new Ui(`Failed to serialize SPARQL query: ${t.message}`,void 0,void 0,t):t}}getQueryType(e){if("queryType"in e&&e.type==="query")return e.queryType;throw new Ui("Query does not have a valid queryType property")}isSelectQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="SELECT"}isConstructQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="CONSTRUCT"}isAskQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="ASK"}isDescribeQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="DESCRIBE"}validateQuery(e){if(!e||typeof e!="object")throw new Ui("Invalid query: not an object");if(e.type!=="query"&&e.type!=="update")throw new Ui(`Invalid type: expected "query" or "update", got "${e.type}"`);if(e.type==="query"){let t=["SELECT","CONSTRUCT","ASK","DESCRIBE"];if(!t.includes(e.queryType))throw new Ui(`Invalid query type: expected one of ${t.join(", ")}, got "${e.queryType}"`)}}};Cr.SPARQLParser=Jd});var mg=y(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.AlgebraTranslator=Fs.AlgebraTranslatorError=void 0;var Re=class extends Error{static{o(this,"AlgebraTranslatorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="AlgebraTranslatorError"}};Fs.AlgebraTranslatorError=Re;var Xd=class{static{o(this,"AlgebraTranslator")}translate(e){if(e.type!=="query")throw new Re("Only SELECT queries are currently supported");if(e.queryType!=="SELECT")throw new Re(`Query type ${e.queryType} not yet supported`);return this.translateSelect(e)}translateSelect(e){let t;if(!e.where||e.where.length===0)throw new Re("SELECT query must have WHERE clause");t=this.translateWhere(e.where);let i=this.extractAggregates(e.variables),n=this.extractGroupVariables(e.group);if((i.length>0||n.length>0)&&(t={type:"group",variables:n,aggregates:i,input:t}),e.variables&&e.variables.length>0){for(let a of e.variables){let c=a;c.expression&&c.variable&&(t={type:"extend",variable:c.variable.value,expression:c.expression,input:t})}let s=e.variables.filter(a=>a.termType==="Variable"||a.variable).map(a=>a.termType==="Variable"?a.value:a.variable.value);s.length>0&&(t={type:"project",variables:s,input:t})}return e.distinct&&(t={type:"distinct",input:t}),e.order&&e.order.length>0&&(t={type:"orderby",comparators:e.order.map(s=>this.translateOrderComparator(s)),input:t}),(e.limit!==void 0||e.offset!==void 0)&&(t={type:"slice",limit:e.limit,offset:e.offset,input:t}),t}extractAggregates(e){return e?e.filter(t=>t.expression&&t.expression.type==="aggregate").map(t=>({variable:t.variable.value,expression:this.translateAggregateExpression(t.expression)})):[]}extractGroupVariables(e){return e?e.filter(t=>t.expression&&t.expression.termType==="Variable").map(t=>t.expression.value):[]}translateAggregateExpression(e){return{type:"aggregate",aggregation:e.aggregation.toLowerCase(),expression:e.expression?this.translateExpression(e.expression):void 0,distinct:e.distinct||!1,separator:e.separator}}translateWhere(e){if(e.length===0)throw new Re("Empty WHERE clause");let t=e.filter(a=>a.type==="filter"),i=e.filter(a=>a.type==="bind"),n=e.filter(a=>a.type!=="filter"&&a.type!=="bind"),s;n.length===0?s={type:"bgp",triples:[]}:n.length===1?s=this.translatePattern(n[0]):s=n.map(c=>this.translatePattern(c)).reduce((c,u)=>({type:"join",left:c,right:u}));for(let a of i)s=this.translateBind(a,s);for(let a of t)s={type:"filter",expression:this.translateExpression(a.expression),input:s};return s}translatePattern(e){if(!e||!e.type)throw new Re("Invalid pattern: missing type");switch(e.type){case"bgp":return this.translateBGP(e);case"filter":return this.translateFilter(e);case"optional":return this.translateOptional(e);case"union":return this.translateUnion(e);case"minus":return this.translateMinus(e);case"values":return this.translateValues(e);case"group":return this.translateWhere(e.patterns);case"query":return this.translateSubquery(e);default:throw new Re(`Unsupported pattern type: ${e.type}`)}}translateBGP(e){if(!e.triples||!Array.isArray(e.triples))throw new Re("BGP pattern must have triples array");return{type:"bgp",triples:e.triples.map(t=>this.translateTriple(t))}}translateTriple(e){if(!e.subject||!e.predicate||!e.object)throw new Re("Triple must have subject, predicate, and object");return{subject:this.translateTripleElement(e.subject),predicate:this.translatePredicate(e.predicate),object:this.translateTripleElement(e.object)}}translatePredicate(e){return e.type==="path"?this.translatePropertyPath(e):this.translateTripleElement(e)}translatePropertyPath(e){if(!e.pathType)throw new Re("Property path must have pathType");if(!e.items||!Array.isArray(e.items))throw new Re("Property path must have items array");let t=e.items.map(i=>this.translatePathItem(i));switch(e.pathType){case"/":return{type:"path",pathType:"/",items:t};case"|":return{type:"path",pathType:"|",items:t};case"^":if(t.length!==1)throw new Re("Inverse path must have exactly one item");return{type:"path",pathType:"^",items:[t[0]]};case"+":if(t.length!==1)throw new Re("OneOrMore path must have exactly one item");return{type:"path",pathType:"+",items:[t[0]]};case"*":if(t.length!==1)throw new Re("ZeroOrMore path must have exactly one item");return{type:"path",pathType:"*",items:[t[0]]};case"?":if(t.length!==1)throw new Re("ZeroOrOne path must have exactly one item");return{type:"path",pathType:"?",items:[t[0]]};default:throw new Re(`Unsupported property path type: ${e.pathType}`)}}translatePathItem(e){if(e.type==="path")return this.translatePropertyPath(e);if(e.termType==="NamedNode")return{type:"iri",value:e.value};throw new Re(`Unsupported path item type: ${e.type||e.termType}`)}translateTripleElement(e){if(!e||!e.termType)throw new Re("Triple element must have termType");switch(e.termType){case"Variable":return{type:"variable",value:e.value};case"NamedNode":return{type:"iri",value:e.value};case"Literal":return{type:"literal",value:e.value,datatype:e.datatype?.value,language:e.language};case"BlankNode":return{type:"blank",value:e.value};default:throw new Re(`Unsupported term type: ${e.termType}`)}}translateFilter(e){if(!e.expression)throw new Re("Filter pattern must have expression");let t=e.patterns?this.translateWhere(e.patterns):{type:"bgp",triples:[]};return{type:"filter",expression:this.translateExpression(e.expression),input:t}}translateExpression(e){if(!e)throw new Re("Expression cannot be null or undefined");if(e.type==="operation")return this.translateOperationExpression(e);if(e.type==="functioncall"||e.type==="functionCall")return{type:"functionCall",function:e.function,args:e.args.map(t=>this.translateExpression(t))};if(e.termType)return this.translateTermExpression(e);throw new Re(`Unsupported expression structure: ${JSON.stringify(e)}`)}translateOperationExpression(e){let t=["=","!=","<",">","<=",">="],i=["&&","||","!"],n=["+","-","*","/"];return t.includes(e.operator)?{type:"comparison",operator:e.operator,left:this.translateExpression(e.args[0]),right:this.translateExpression(e.args[1])}:i.includes(e.operator)?{type:"logical",operator:e.operator,operands:e.args.map(s=>this.translateExpression(s))}:n.includes(e.operator)?{type:"arithmetic",operator:e.operator,left:this.translateExpression(e.args[0]),right:this.translateExpression(e.args[1])}:e.operator==="exists"||e.operator==="notexists"?this.translateExistsExpression(e):{type:"function",function:e.operator,args:e.args.map(s=>this.translateExpression(s))}}translateExistsExpression(e){if(!e.args||e.args.length!==1)throw new Re("EXISTS/NOT EXISTS must have exactly one pattern argument");let t=e.args[0],i;return t.type==="group"&&t.patterns?i=this.translateWhere(t.patterns):t.type==="bgp"?i=this.translateBGP(t):i=this.translatePattern(t),{type:"exists",negated:e.operator==="notexists",pattern:i}}translateTermExpression(e){if(e.termType==="Variable")return{type:"variable",name:e.value};if(e.termType==="Literal"){let t=e.value;return e.datatype&&(e.datatype.value.includes("#integer")||e.datatype.value.includes("#decimal")?t=parseFloat(e.value):e.datatype.value.includes("#boolean")&&(t=e.value==="true")),{type:"literal",value:t,datatype:e.datatype?.value}}return{type:"literal",value:String(e.value||e)}}translateOptional(e){if(!e.patterns||e.patterns.length===0)throw new Re("OPTIONAL pattern must have patterns");return{type:"leftjoin",left:{type:"bgp",triples:[]},right:this.translateWhere(e.patterns),expression:e.expression?this.translateExpression(e.expression):void 0}}translateUnion(e){if(!e.patterns||e.patterns.length!==2)throw new Re("UNION pattern must have exactly 2 patterns");return{type:"union",left:this.translateWhere(e.patterns[0].patterns||[e.patterns[0]]),right:this.translateWhere(e.patterns[1].patterns||[e.patterns[1]])}}translateMinus(e){if(!e.patterns||e.patterns.length===0)throw new Re("MINUS pattern must have patterns");return{type:"minus",left:{type:"bgp",triples:[]},right:this.translateWhere(e.patterns)}}translateValues(e){if(!e.values||!Array.isArray(e.values))throw new Re("VALUES pattern must have values array");let t=new Set;for(let n of e.values)for(let s of Object.keys(n)){let a=s.startsWith("?")?s.slice(1):s;t.add(a)}let i=e.values.map(n=>this.translateValuesBinding(n));return{type:"values",variables:Array.from(t),bindings:i}}translateValuesBinding(e){let t={};for(let[i,n]of Object.entries(e)){let s=i.startsWith("?")?i.slice(1):i,a=n;if(a.termType==="NamedNode")t[s]={type:"iri",value:a.value};else if(a.termType==="Literal")t[s]={type:"literal",value:a.value,datatype:a.datatype?.value,language:a.language||void 0};else throw new Re(`Unsupported VALUES term type: ${a.termType}`)}return t}translateBind(e,t){if(!e.variable||!e.expression)throw new Re("BIND pattern must have variable and expression");return{type:"extend",variable:e.variable.value,expression:this.translateExpression(e.expression),input:t}}translateOrderComparator(e){return{expression:this.translateExpression(e.expression),descending:e.descending||!1}}translateSubquery(e){if(e.queryType!=="SELECT")throw new Re(`Only SELECT subqueries are supported, got: ${e.queryType}`);return{type:"subquery",query:this.translateSelect(e)}}};Fs.AlgebraTranslator=Xd});var gg=y(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.AlgebraOptimizer=void 0;var Zd=class{static{o(this,"AlgebraOptimizer")}constructor(){this.stats=new Map}optimize(e){let t=e;return t=this.eliminateEmptyBGPInFilterJoin(t),t=this.filterPushDown(t),t=this.joinReordering(t),t}eliminateEmptyBGPInFilterJoin(e){if(e.type==="join"){if(e.left.type==="filter"){let t=e.left;if(t.input.type==="bgp"&&t.input.triples.length===0)return{type:"filter",expression:t.expression,input:this.eliminateEmptyBGPInFilterJoin(e.right)}}if(e.right.type==="filter"){let t=e.right;if(t.input.type==="bgp"&&t.input.triples.length===0)return{type:"filter",expression:t.expression,input:this.eliminateEmptyBGPInFilterJoin(e.left)}}return{type:"join",left:this.eliminateEmptyBGPInFilterJoin(e.left),right:this.eliminateEmptyBGPInFilterJoin(e.right)}}return e.type==="filter"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="leftjoin"?{...e,left:this.eliminateEmptyBGPInFilterJoin(e.left),right:this.eliminateEmptyBGPInFilterJoin(e.right)}:e.type==="union"?{...e,left:this.eliminateEmptyBGPInFilterJoin(e.left),right:this.eliminateEmptyBGPInFilterJoin(e.right)}:e.type==="minus"?{...e,left:this.eliminateEmptyBGPInFilterJoin(e.left),right:this.eliminateEmptyBGPInFilterJoin(e.right)}:e.type==="project"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="orderby"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="slice"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="distinct"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e}filterPushDown(e){return e.type==="filter"?this.pushDownFilter(e):e.type==="join"?{type:"join",left:this.filterPushDown(e.left),right:this.filterPushDown(e.right)}:e.type==="leftjoin"?{...e,left:this.filterPushDown(e.left),right:this.filterPushDown(e.right)}:e.type==="union"?{type:"union",left:this.filterPushDown(e.left),right:this.filterPushDown(e.right)}:e.type==="minus"?{...e,left:this.filterPushDown(e.left),right:this.filterPushDown(e.right)}:e.type==="project"?{...e,input:this.filterPushDown(e.input)}:e.type==="orderby"?{...e,input:this.filterPushDown(e.input)}:e.type==="slice"?{...e,input:this.filterPushDown(e.input)}:e.type==="distinct"?{...e,input:this.filterPushDown(e.input)}:e}pushDownFilter(e){let t=e.input;if(t.type==="join"){let i=this.getFilterVariables(e.expression),n=this.getOperationVariables(t.left),s=this.getOperationVariables(t.right),a=i.every(u=>n.has(u)),c=i.every(u=>s.has(u));return a&&!c?{type:"join",left:{type:"filter",expression:e.expression,input:this.filterPushDown(t.left)},right:this.filterPushDown(t.right)}:c&&!a?{type:"join",left:this.filterPushDown(t.left),right:{type:"filter",expression:e.expression,input:this.filterPushDown(t.right)}}:{type:"filter",expression:e.expression,input:{type:"join",left:this.filterPushDown(t.left),right:this.filterPushDown(t.right)}}}return t.type==="union"?{type:"union",left:{type:"filter",expression:e.expression,input:this.filterPushDown(t.left)},right:{type:"filter",expression:e.expression,input:this.filterPushDown(t.right)}}:{type:"filter",expression:e.expression,input:this.filterPushDown(t)}}getFilterVariables(e){let t=[];if(e.type==="variable")t.push(e.name);else if(e.type==="comparison")t.push(...this.getFilterVariables(e.left)),t.push(...this.getFilterVariables(e.right));else if(e.type==="logical")for(let i of e.operands)t.push(...this.getFilterVariables(i));else if(e.type==="function")for(let i of e.args)t.push(...this.getFilterVariables(i));return Array.from(new Set(t))}getOperationVariables(e){let t=new Set;if(e.type==="bgp")for(let i of e.triples)i.subject.type==="variable"&&t.add(i.subject.value),i.predicate.type==="variable"&&t.add(i.predicate.value),i.object.type==="variable"&&t.add(i.object.value);else if(e.type==="join"){let i=this.getOperationVariables(e.left),n=this.getOperationVariables(e.right);return new Set([...i,...n])}else{if(e.type==="filter")return this.getOperationVariables(e.input);if(e.type==="leftjoin"){let i=this.getOperationVariables(e.left),n=this.getOperationVariables(e.right);return new Set([...i,...n])}else if(e.type==="union"){let i=this.getOperationVariables(e.left),n=this.getOperationVariables(e.right);return new Set([...i,...n])}else{if(e.type==="minus")return this.getOperationVariables(e.left);if(e.type==="project")return new Set(e.variables)}}return t}joinReordering(e){return e.type==="join"?this.reorderJoin(e):e.type==="filter"?{...e,input:this.joinReordering(e.input)}:e.type==="leftjoin"?{...e,left:this.joinReordering(e.left),right:this.joinReordering(e.right)}:e.type==="union"?{...e,left:this.joinReordering(e.left),right:this.joinReordering(e.right)}:e.type==="minus"?{...e,left:this.joinReordering(e.left),right:this.joinReordering(e.right)}:e.type==="project"?{...e,input:this.joinReordering(e.input)}:e.type==="orderby"?{...e,input:this.joinReordering(e.input)}:e.type==="slice"?{...e,input:this.joinReordering(e.input)}:e.type==="distinct"?{...e,input:this.joinReordering(e.input)}:e}reorderJoin(e){let t=this.estimateCost(e.left);return this.estimateCost(e.right)<t?{type:"join",left:this.joinReordering(e.right),right:this.joinReordering(e.left)}:{type:"join",left:this.joinReordering(e.left),right:this.joinReordering(e.right)}}estimateCost(e){if(e.type==="bgp"){let t=e.triples.length*100;for(let i of e.triples)i.subject.type==="variable"&&(t+=10),i.predicate.type==="variable"&&(t+=20),i.object.type==="variable"&&(t+=10);return t}return e.type==="filter"?this.estimateCost(e.input)*.3:e.type==="join"?this.estimateCost(e.left)*this.estimateCost(e.right):e.type==="leftjoin"?this.estimateCost(e.left)+this.estimateCost(e.right)*.5:e.type==="union"?this.estimateCost(e.left)+this.estimateCost(e.right):e.type==="minus"?this.estimateCost(e.left)+this.estimateCost(e.right)*.3:100}setStatistics(e,t){this.stats.set(e,t)}getStatistics(e){return this.stats.get(e)}};lu.AlgebraOptimizer=Zd});var yg=y(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.AlgebraSerializer=void 0;var ep=class{static{o(this,"AlgebraSerializer")}toString(e,t=0){let i="  ".repeat(t);switch(e.type){case"bgp":return`${i}BGP [
${e.triples.map(f=>`${i}  ${this.tripleToString(f)}`).join(`
`)}
${i}]`;case"filter":return`${i}Filter(
${i}  ${this.expressionToString(e.expression)}
${this.toString(e.input,t+1)}
${i})`;case"join":return`${i}Join(
${this.toString(e.left,t+1)}
${this.toString(e.right,t+1)}
${i})`;case"leftjoin":let n=e.expression?` ${this.expressionToString(e.expression)}`:"";return`${i}LeftJoin(${n}
${this.toString(e.left,t+1)}
${this.toString(e.right,t+1)}
${i})`;case"union":return`${i}Union(
${this.toString(e.left,t+1)}
${this.toString(e.right,t+1)}
${i})`;case"minus":return`${i}Minus(
${this.toString(e.left,t+1)}
${this.toString(e.right,t+1)}
${i})`;case"project":return`${i}Project [${e.variables.map(f=>`?${f}`).join(", ")}](
${this.toString(e.input,t+1)}
${i})`;case"orderby":let s=e.comparators.map(f=>`${this.expressionToString(f.expression)} ${f.descending?"DESC":"ASC"}`).join(", ");return`${i}OrderBy [${s}](
${this.toString(e.input,t+1)}
${i})`;case"slice":let a=[];return e.offset!==void 0&&a.push(`OFFSET ${e.offset}`),e.limit!==void 0&&a.push(`LIMIT ${e.limit}`),`${i}Slice [${a.join(", ")}](
${this.toString(e.input,t+1)}
${i})`;case"distinct":return`${i}Distinct(
${this.toString(e.input,t+1)}
${i})`;case"group":let c=e.variables.length>0?`[${e.variables.map(f=>`?${f}`).join(", ")}]`:"[]",u=e.aggregates.length>0?e.aggregates.map(f=>`?${f.variable} = ${f.expression.aggregation}(${f.expression.distinct?"DISTINCT ":""}${f.expression.expression?this.expressionToString(f.expression.expression):"*"})`).join(", "):"";return`${i}Group ${c}${u?` [${u}]`:""}(
${this.toString(e.input,t+1)}
${i})`;case"extend":return`${i}Extend (?${e.variable} = ${this.expressionToString(e.expression)})(
${this.toString(e.input,t+1)}
${i})`;case"subquery":return`${i}Subquery(
${this.toString(e.query,t+1)}
${i})`;default:return`${i}Unknown(${e.type})`}}tripleToString(e){return`${this.elementToString(e.subject)} ${this.predicateToString(e.predicate)} ${this.elementToString(e.object)}`}predicateToString(e){return this.isPropertyPath(e)?this.propertyPathToString(e):this.elementToString(e)}isPropertyPath(e){return e.type==="path"}propertyPathToString(e){let t=e.items.map(i=>i.type==="path"?`(${this.propertyPathToString(i)})`:`<${i.value}>`);switch(e.pathType){case"/":return t.join("/");case"|":return t.join("|");case"^":return`^${t[0]}`;case"+":return`${t[0]}+`;case"*":return`${t[0]}*`;case"?":return`${t[0]}?`}}elementToString(e){switch(e.type){case"variable":return`?${e.value}`;case"iri":return`<${e.value}>`;case"literal":let t=`"${e.value}"`;return e.language&&(t+=`@${e.language}`),e.datatype&&(t+=`^^<${e.datatype}>`),t;case"blank":return`_:${e.value}`;default:return String(e)}}expressionToString(e){switch(e.type){case"variable":return`?${e.name}`;case"literal":return typeof e.value=="string"?`"${e.value}"`:String(e.value);case"comparison":return`(${this.expressionToString(e.left)} ${e.operator} ${this.expressionToString(e.right)})`;case"logical":return e.operator==="!"?`!(${this.expressionToString(e.operands[0])})`:`(${e.operands.map(t=>this.expressionToString(t)).join(` ${e.operator} `)})`;case"arithmetic":return`(${this.expressionToString(e.left)} ${e.operator} ${this.expressionToString(e.right)})`;case"function":return`${e.function}(${e.args.map(t=>this.expressionToString(t)).join(", ")})`;case"exists":return`${e.negated?"NOT EXISTS":"EXISTS"} { ${this.toString(e.pattern,0)} }`;default:return"unknown"}}toJSON(e){return JSON.stringify(e,null,2)}};fu.AlgebraSerializer=ep});var ja=y(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.SolutionMapping=void 0;var tp=class r{static{o(this,"SolutionMapping")}constructor(e){this.bindings=e?new Map(e):new Map}get(e){return this.bindings.get(e)}set(e,t){this.bindings.set(e,t)}has(e){return this.bindings.has(e)}variables(){return Array.from(this.bindings.keys())}getBindings(){return new Map(this.bindings)}isCompatibleWith(e){for(let[t,i]of this.bindings.entries()){let n=e.get(t);if(n!==void 0&&!this.areEqual(i,n))return!1}return!0}merge(e){if(!this.isCompatibleWith(e))return null;let t=new r(this.bindings);for(let[i,n]of e.getBindings().entries())t.set(i,n);return t}clone(){return new r(this.bindings)}areEqual(e,t){return e.toString()===t.toString()}toJSON(){let e={};for(let[t,i]of this.bindings.entries())e[t]=i.toString();return e}size(){return this.bindings.size}};hu.SolutionMapping=tp});var np=y(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.BGPExecutor=Ps.BGPExecutorError=void 0;var _g=ja(),Ma=xt(),vg=Ht(),rp=pi(),cr=class extends Error{static{o(this,"BGPExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="BGPExecutorError"}};Ps.BGPExecutorError=cr;var ip=class{static{o(this,"BGPExecutor")}constructor(e){this.tripleStore=e}async*execute(e){if(e.triples.length===0){yield new _g.SolutionMapping;return}let t=this.matchTriplePattern(e.triples[0]);for(let i=1;i<e.triples.length;i++)t=this.joinWithPattern(t,e.triples[i]);for await(let i of t)yield i}async executeAll(e){let t=[];for await(let i of this.execute(e))t.push(i);return t}async*matchTriplePattern(e){if(this.isPropertyPath(e.predicate))throw new cr("Property paths are not supported in BGPExecutor. Use PropertyPathExecutor for path expressions.");let t=e.predicate,i=this.isVariable(e.subject)?void 0:this.toRDFTermAsSubject(e.subject),n=this.isVariable(t)?void 0:this.toRDFTermAsPredicate(t),s=this.isVariable(e.object)?void 0:this.toRDFTerm(e.object),a=await this.tripleStore.match(i,n,s);for(let c of a){let u=new _g.SolutionMapping;this.isVariable(e.subject)&&u.set(e.subject.value,c.subject),this.isVariable(t)&&u.set(t.value,c.predicate),this.isVariable(e.object)&&u.set(e.object.value,c.object),yield u}}isPropertyPath(e){return e.type==="path"}async*joinWithPattern(e,t){let i=[];for await(let n of e)i.push(n);for(let n of i){let s=this.instantiatePattern(t,n);for await(let a of this.matchTriplePattern(s)){let c=n.merge(a);c!==null&&(yield c)}}}instantiatePattern(e,t){let i=this.isPropertyPath(e.predicate)?e.predicate:this.instantiateElement(e.predicate,t);return{subject:this.instantiateElement(e.subject,t),predicate:i,object:this.instantiateElement(e.object,t)}}instantiateElement(e,t){if(this.isVariable(e)){let i=t.get(e.value);if(i)return this.toAlgebraElement(i)}return e}isVariable(e){return e.type==="variable"}toRDFTermAsSubject(e){switch(e.type){case"iri":return new Ma.IRI(e.value);case"blank":return new rp.BlankNode(e.value);case"literal":throw new cr("Literals cannot appear in subject position");case"variable":throw new cr(`Cannot convert variable to RDF term: ${e.value}`);default:throw new cr(`Unknown element type: ${e.type}`)}}toRDFTermAsPredicate(e){switch(e.type){case"iri":return new Ma.IRI(e.value);case"literal":throw new cr("Literals cannot appear in predicate position");case"blank":throw new cr("Blank nodes cannot appear in predicate position");case"variable":throw new cr(`Cannot convert variable to RDF term: ${e.value}`);default:throw new cr(`Unknown element type: ${e.type}`)}}toRDFTerm(e){switch(e.type){case"iri":return new Ma.IRI(e.value);case"literal":return new vg.Literal(e.value,e.datatype?new Ma.IRI(e.datatype):void 0,e.language);case"blank":return new rp.BlankNode(e.value);case"variable":throw new cr(`Cannot convert variable to RDF term: ${e.value}`);default:throw new cr(`Unknown element type: ${e.type}`)}}toAlgebraElement(e){if(e instanceof Ma.IRI)return{type:"iri",value:e.value};if(e instanceof vg.Literal)return{type:"literal",value:e.value,datatype:e.datatype?.value,language:e.language};if(e instanceof rp.BlankNode)return{type:"blank",value:e.id};throw new cr(`Unknown RDF term type: ${e.constructor?.name||"unknown"}`)}};Ps.BGPExecutor=ip});var op=y(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.BuiltInFunctions=void 0;var La=xt(),Va=Ht(),sp=pi(),ap=class{static{o(this,"BuiltInFunctions")}static str(e){if(e===void 0)throw new Error("STR: argument is undefined");return e instanceof La.IRI||e instanceof Va.Literal?e.value:e instanceof sp.BlankNode?e.id:String(e)}static lang(e){if(e===void 0)throw new Error("LANG: argument is undefined");return e instanceof Va.Literal&&e.language?e.language:""}static datatype(e){if(e===void 0)throw new Error("DATATYPE: argument is undefined");if(e instanceof Va.Literal)return e.datatype?e.datatype:e.language?new La.IRI("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"):new La.IRI("http://www.w3.org/2001/XMLSchema#string");throw new Error("DATATYPE: argument must be a literal")}static bound(e){return e!==void 0}static isIRI(e){return e===void 0?!1:e instanceof La.IRI}static isBlank(e){return e===void 0?!1:e instanceof sp.BlankNode}static isLiteral(e){return e===void 0?!1:e instanceof Va.Literal}static regex(e,t,i){try{return new RegExp(t,i).test(e)}catch(n){throw new Error(`REGEX: invalid pattern '${t}': ${n.message}`)}}static compare(e,t,i){let n=this.toComparableValue(e),s=this.toComparableValue(t);switch(i){case"=":return n===s;case"!=":return n!==s;case"<":return n<s;case">":return n>s;case"<=":return n<=s;case">=":return n>=s;default:throw new Error(`Unknown comparison operator: ${i}`)}}static toComparableValue(e){if(typeof e=="string"||typeof e=="number")return e;if(e instanceof Va.Literal){let t=e.datatype?.value;if(t?.includes("#integer")||t?.includes("#decimal")||t?.includes("#double")){let i=parseFloat(e.value);if(!isNaN(i))return i}return e.value}return e instanceof La.IRI?e.value:e instanceof sp.BlankNode?e.id:String(e)}static contains(e,t){return e.includes(t)}static strStarts(e,t){return e.startsWith(t)}static strEnds(e,t){return e.endsWith(t)}static strlen(e){return e.length}static ucase(e){return e.toUpperCase()}static lcase(e){return e.toLowerCase()}static substr(e,t,i){let n=t-1;if(n<0){if(i!==void 0){let s=i+n;return s<=0?"":e.substring(0,s)}return e}return i!==void 0?e.substring(n,n+i):e.substring(n)}static strBefore(e,t){if(t==="")return"";let i=e.indexOf(t);return i===-1?"":e.substring(0,i)}static strAfter(e,t){if(t==="")return e;let i=e.indexOf(t);return i===-1?"":e.substring(i+t.length)}static concat(...e){return e.join("")}static replace(e,t,i,n){try{let s=new RegExp(t,n||"g");return e.replace(s,i)}catch(s){throw new Error(`REPLACE: invalid pattern '${t}': ${s.message}`)}}static parseDate(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`PARSEDATE: invalid date string '${e}'`);return t.getTime()}static dateBefore(e,t){let i=this.parseDate(e),n=this.parseDate(t);return i<n}static dateAfter(e,t){let i=this.parseDate(e),n=this.parseDate(t);return i>n}static dateInRange(e,t,i){let n=this.parseDate(e),s=this.parseDate(t),a=this.parseDate(i);return n>=s&&n<=a}static dateDiffMinutes(e,t){let i=this.parseDate(e),n=this.parseDate(t),s=Math.abs(n-i);return Math.round(s/(1e3*60))}static dateDiffHours(e,t){let i=this.parseDate(e),n=this.parseDate(t),s=Math.abs(n-i);return Math.round(s/(1e3*60*60)*100)/100}static logicalAnd(e){return e.every(t=>t===!0)}static logicalOr(e){return e.some(t=>t===!0)}static logicalNot(e){return!e}static year(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`YEAR: invalid date string '${e}'`);return t.getFullYear()}static month(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`MONTH: invalid date string '${e}'`);return t.getMonth()+1}static day(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`DAY: invalid date string '${e}'`);return t.getDate()}static hours(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`HOURS: invalid date string '${e}'`);return t.getHours()}static minutes(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`MINUTES: invalid date string '${e}'`);return t.getMinutes()}static seconds(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`SECONDS: invalid date string '${e}'`);return t.getSeconds()+t.getMilliseconds()/1e3}static timezone(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`TIMEZONE: invalid date string '${e}'`);if(e.endsWith("Z"))return"PT0S";let i=e.match(/([+-]\d{2}):?(\d{2})$/);if(i){let u=parseInt(i[1],10),f=parseInt(i[2],10),l=u>=0?"":"-",h=Math.abs(u);return f===0?`${l}PT${h}H`:`${l}PT${h}H${f}M`}let n=-t.getTimezoneOffset(),s=Math.floor(Math.abs(n)/60),a=Math.abs(n)%60,c=n>=0?"":"-";return a===0?`${c}PT${s}H`:`${c}PT${s}H${a}M`}static now(){return new Date().toISOString()}static msToMinutes(e){return Math.round(e/(1e3*60))}static msToHours(e){return Math.round(e/(1e3*60*60)*100)/100}static msToSeconds(e){return Math.round(e/1e3)}static abs(e){return Math.abs(e)}static round(e){return Math.round(e)}static ceil(e){return Math.ceil(e)}static floor(e){return Math.floor(e)}static rand(){return Math.random()}static coalesce(e){for(let t of e)if(t!=null)return t}static if(e,t,i){return e?t:i}};du.BuiltInFunctions=ap});var mu=y(Is=>{"use strict";Object.defineProperty(Is,"__esModule",{value:!0});Is.FilterExecutor=Is.FilterExecutorError=void 0;var oe=op(),pu=Ht(),Ft=class extends Error{static{o(this,"FilterExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="FilterExecutorError"}};Is.FilterExecutorError=Ft;var cp=class{static{o(this,"FilterExecutor")}constructor(){this.existsEvaluator=null}setExistsEvaluator(e){this.existsEvaluator=e}async*execute(e,t){let i=this.expressionContainsExists(e.expression);for await(let n of t)try{let s;i?s=await this.evaluateExpressionAsync(e.expression,n):s=this.evaluateExpression(e.expression,n),s===!0&&(yield n)}catch{continue}}expressionContainsExists(e){return e.type==="exists"?!0:e.type==="logical"?e.operands.some(t=>this.expressionContainsExists(t)):e.type==="comparison"?this.expressionContainsExists(e.left)||this.expressionContainsExists(e.right):!1}async executeAll(e,t){let i=[];async function*n(){for(let s of t)yield s}o(n,"generator");for await(let s of this.execute(e,n()))i.push(s);return i}evaluateExpression(e,t){let i=e;if(i.termType)switch(i.termType){case"Variable":return t.get(i.value);case"Literal":return i.value;case"NamedNode":return i.value;default:throw new Ft(`Unsupported termType: ${i.termType}`)}switch(e.type){case"comparison":return this.evaluateComparison(e,t);case"logical":return this.evaluateLogical(e,t);case"arithmetic":return this.evaluateArithmetic(e,t);case"function":case"functionCall":return this.evaluateFunction(e,t);case"variable":return t.get(e.name);case"literal":return e.value;case"exists":throw new Ft("EXISTS expressions require async evaluation. Use evaluateExpressionAsync instead.");default:throw new Ft(`Unsupported expression type: ${e.type}, expr.termType=${i.termType}`)}}async evaluateExpressionAsync(e,t){return e.type==="exists"?this.evaluateExists(e,t):e.type==="logical"?this.evaluateLogicalAsync(e,t):this.evaluateExpression(e,t)}async evaluateExists(e,t){if(!this.existsEvaluator)throw new Ft("EXISTS evaluator not set. Call setExistsEvaluator before evaluating EXISTS expressions.");let i=await this.existsEvaluator(e.pattern,t);return e.negated?!i:i}async evaluateLogicalAsync(e,t){if(e.operator==="!"){let n=await this.evaluateExpressionAsync(e.operands[0],t);return oe.BuiltInFunctions.logicalNot(n)}let i=[];for(let n of e.operands){let s=await this.evaluateExpressionAsync(n,t);i.push(s)}if(e.operator==="&&")return oe.BuiltInFunctions.logicalAnd(i);if(e.operator==="||")return oe.BuiltInFunctions.logicalOr(i);throw new Ft(`Unknown logical operator: ${e.operator}`)}evaluateComparison(e,t){let i=this.evaluateExpression(e.left,t),n=this.evaluateExpression(e.right,t);return oe.BuiltInFunctions.compare(i,n,e.operator)}evaluateLogical(e,t){if(e.operator==="!"){let n=this.evaluateExpression(e.operands[0],t);return oe.BuiltInFunctions.logicalNot(n)}let i=e.operands.map(n=>this.evaluateExpression(n,t));if(e.operator==="&&")return oe.BuiltInFunctions.logicalAnd(i);if(e.operator==="||")return oe.BuiltInFunctions.logicalOr(i);throw new Ft(`Unknown logical operator: ${e.operator}`)}evaluateArithmetic(e,t){let i=this.evaluateExpression(e.left,t),n=this.evaluateExpression(e.right,t),s=this.toNumericValue(i),a=this.toNumericValue(n);if(e.operator==="-"&&this.isDateTimeValue(i)&&this.isDateTimeValue(n)){let c=this.parseDateTimeToMs(i),u=this.parseDateTimeToMs(n);return c-u}switch(e.operator){case"+":return s+a;case"-":return s-a;case"*":return s*a;case"/":if(a===0)throw new Ft("Division by zero");return s/a;default:throw new Ft(`Unknown arithmetic operator: ${e.operator}`)}}toNumericValue(e){if(typeof e=="number")return e;if(e instanceof pu.Literal){let t=e.datatype?.value||"";if(t.includes("#integer")||t.includes("#decimal")||t.includes("#double")||t.includes("#float")){let n=parseFloat(e.value);if(!isNaN(n))return n}let i=parseFloat(e.value);if(!isNaN(i))return i}if(typeof e=="string"){let t=parseFloat(e);if(!isNaN(t))return t}if(e&&typeof e=="object"&&"value"in e){let t=parseFloat(String(e.value));if(!isNaN(t))return t}throw new Ft(`Cannot convert to number: ${e}`)}isDateTimeValue(e){if(e instanceof pu.Literal){let t=e.datatype?.value||"";return t.includes("#dateTime")||t.includes("#date")?!0:/^\d{4}-\d{2}-\d{2}(T|\s)/.test(e.value)}return typeof e=="string"?/^\d{4}-\d{2}-\d{2}(T|\s)/.test(e):!1}parseDateTimeToMs(e){let t;if(e instanceof pu.Literal)t=e.value;else if(typeof e=="string")t=e;else if(e&&typeof e=="object"&&"value"in e)t=String(e.value);else throw new Ft(`Cannot parse dateTime: ${e}`);let i=new Date(t);if(isNaN(i.getTime()))throw new Ft(`Invalid dateTime format: ${t}`);return i.getTime()}evaluateFunction(e,t){let i;if(typeof e.function=="string")i=e.function.toLowerCase();else if(e.function&&typeof e.function=="object"&&"value"in e.function){let n=e.function.value;i=((n.includes("#")?n.split("#").pop():n.split("/").pop())||n).toLowerCase()}else throw new Ft(`Unknown function format: ${e.function}`);switch(i){case"str":let n=this.getTermFromExpression(e.args[0],t);return oe.BuiltInFunctions.str(n);case"lang":let s=this.getTermFromExpression(e.args[0],t);return oe.BuiltInFunctions.lang(s);case"datatype":let a=this.getTermFromExpression(e.args[0],t);return oe.BuiltInFunctions.datatype(a).value;case"bound":if(e.args[0].type==="variable"){let G=t.get(e.args[0].name);return oe.BuiltInFunctions.bound(G)}return!0;case"isiri":case"isuri":let c=this.getTermFromExpression(e.args[0],t);return oe.BuiltInFunctions.isIRI(c);case"isblank":let u=this.getTermFromExpression(e.args[0],t);return oe.BuiltInFunctions.isBlank(u);case"isliteral":let f=this.getTermFromExpression(e.args[0],t);return oe.BuiltInFunctions.isLiteral(f);case"regex":let l=this.getStringValue(this.evaluateExpression(e.args[0],t)),h=this.getStringValue(this.evaluateExpression(e.args[1],t)),p=e.args[2]?this.getStringValue(this.evaluateExpression(e.args[2],t)):void 0;return oe.BuiltInFunctions.regex(l,h,p);case"contains":let g=this.getStringValue(this.evaluateExpression(e.args[0],t)),S=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.contains(g,S);case"strstarts":let b=this.getStringValue(this.evaluateExpression(e.args[0],t)),x=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.strStarts(b,x);case"strends":let F=this.getStringValue(this.evaluateExpression(e.args[0],t)),P=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.strEnds(F,P);case"strlen":let V=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.strlen(V);case"ucase":let H=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.ucase(H);case"lcase":let K=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.lcase(K);case"substr":let Pe=this.getStringValue(this.evaluateExpression(e.args[0],t)),Ze=Number(this.evaluateExpression(e.args[1],t));if(e.args[2]){let G=Number(this.evaluateExpression(e.args[2],t));return oe.BuiltInFunctions.substr(Pe,Ze,G)}return oe.BuiltInFunctions.substr(Pe,Ze);case"strbefore":let ct=this.getStringValue(this.evaluateExpression(e.args[0],t)),B=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.strBefore(ct,B);case"strafter":let ce=this.getStringValue(this.evaluateExpression(e.args[0],t)),xe=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.strAfter(ce,xe);case"concat":let Xe=e.args.map(G=>this.getStringValue(this.evaluateExpression(G,t)));return oe.BuiltInFunctions.concat(...Xe);case"replace":let $e=this.getStringValue(this.evaluateExpression(e.args[0],t)),He=this.getStringValue(this.evaluateExpression(e.args[1],t)),Ie=this.getStringValue(this.evaluateExpression(e.args[2],t)),Ne=e.args[3]?this.getStringValue(this.evaluateExpression(e.args[3],t)):void 0;return oe.BuiltInFunctions.replace($e,He,Ie,Ne);case"parsedate":let Ce=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.parseDate(Ce);case"datebefore":let $=this.getStringValue(this.evaluateExpression(e.args[0],t)),R=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.dateBefore($,R);case"dateafter":let ke=this.getStringValue(this.evaluateExpression(e.args[0],t)),qe=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.dateAfter(ke,qe);case"dateinrange":let j=this.getStringValue(this.evaluateExpression(e.args[0],t)),le=this.getStringValue(this.evaluateExpression(e.args[1],t)),Se=this.getStringValue(this.evaluateExpression(e.args[2],t));return oe.BuiltInFunctions.dateInRange(j,le,Se);case"datediffminutes":let U=this.getStringValue(this.evaluateExpression(e.args[0],t)),be=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.dateDiffMinutes(U,be);case"datediffhours":let we=this.getStringValue(this.evaluateExpression(e.args[0],t)),ge=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.dateDiffHours(we,ge);case"year":let Ee=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.year(Ee);case"month":let ue=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.month(ue);case"day":let ye=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.day(ye);case"hours":let fe=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.hours(fe);case"minutes":let _e=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.minutes(_e);case"seconds":let Te=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.seconds(Te);case"timezone":case"tz":let J=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.timezone(J);case"now":return oe.BuiltInFunctions.now();case"mstominutes":let te=Number(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.msToMinutes(te);case"mstohours":let re=Number(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.msToHours(re);case"mstoseconds":let X=Number(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.msToSeconds(X);case"abs":let Z=Number(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.abs(Z);case"round":let ee=Number(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.round(ee);case"ceil":let Q=Number(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.ceil(Q);case"floor":let ie=Number(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.floor(ie);case"rand":return oe.BuiltInFunctions.rand();case"coalesce":for(let G of e.args)try{let W=this.evaluateExpression(G,t);if(W!=null)return W}catch{continue}return;case"if":if(!e.args||e.args.length!==3)throw new Ft("IF requires exactly 3 arguments");let ne=this.evaluateExpression(e.args[0],t);return this.toBoolean(ne)?this.evaluateExpression(e.args[1],t):this.evaluateExpression(e.args[2],t);default:throw new Ft(`Unknown function: ${i}`)}}getTermFromExpression(e,t){if(e.type==="variable")return t.get(e.name)}getStringValue(e){return e==null?"":typeof e=="object"&&"value"in e?String(e.value):String(e)}toBoolean(e){if(typeof e=="boolean")return e;if(typeof e=="number")return!isNaN(e)&&e!==0;if(typeof e=="string")return e.length>0;if(e instanceof pu.Literal){let t=e.datatype?.value||"";if(t.includes("#boolean"))return e.value==="true"||e.value==="1";if(t.includes("#integer")||t.includes("#decimal")||t.includes("#double")||t.includes("#float")){let i=parseFloat(e.value);return!isNaN(i)&&i!==0}return e.value.length>0}return!!e}};Is.FilterExecutor=cp});var lp=y(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.OptionalExecutor=void 0;var up=class{static{o(this,"OptionalExecutor")}async*execute(e,t){let i=[];for await(let s of e)i.push(s);let n=[];for await(let s of t)n.push(s);for(let s of i){let a=!1;for(let c of n){let u=s.merge(c);u!==null&&(yield u,a=!0)}a||(yield s)}}async executeAll(e,t){let i=[];async function*n(){for(let a of e)yield a}o(n,"generateLeft");async function*s(){for(let a of t)yield a}o(s,"generateRight");for await(let a of this.execute(n(),s()))i.push(a);return i}};gu.OptionalExecutor=up});var hp=y(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.UnionExecutor=void 0;var fp=class{static{o(this,"UnionExecutor")}async*execute(e,t){let i=new Set;for await(let n of e){let s=this.getSolutionKey(n);i.has(s)||(i.add(s),yield n)}for await(let n of t){let s=this.getSolutionKey(n);i.has(s)||(i.add(s),yield n)}}async executeAll(e,t){let i=[];async function*n(){for(let a of e)yield a}o(n,"generateLeft");async function*s(){for(let a of t)yield a}o(s,"generateRight");for await(let a of this.execute(n(),s()))i.push(a);return i}getSolutionKey(e){let t=e.toJSON();return Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("|")}};yu.UnionExecutor=fp});var bg=y(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.ConstructExecutor=void 0;var Ex=Dn(),Sg=xt(),Tx=Ht(),Ax=pi(),dp=class{static{o(this,"ConstructExecutor")}async execute(e,t){let i=[],n=new Set;for(let s of t)for(let a of e)try{let c=this.instantiateTriple(a,s),u=`${c.subject.toString()}|${c.predicate.toString()}|${c.object.toString()}`;n.has(u)||(n.add(u),i.push(c))}catch{continue}return i}instantiateTriple(e,t){if(this.isPropertyPath(e.predicate))throw new Error("Property paths are not supported in CONSTRUCT templates");let i=this.instantiateElement(e.subject,t),n=this.instantiateElement(e.predicate,t),s=this.instantiateElement(e.object,t);return new Ex.Triple(i,n,s)}isPropertyPath(e){return e.type==="path"}instantiateElement(e,t){if(e.type==="variable"){let i=t.get(e.value);if(!i)throw new Error(`Unbound variable: ${e.value}`);return i}if(e.type==="iri")return new Sg.IRI(e.value);if(e.type==="literal")return new Tx.Literal(e.value,e.datatype?new Sg.IRI(e.datatype):void 0,e.language);if(e.type==="blank")return new Ax.BlankNode(e.value);throw new Error(`Unknown element type: ${e.type}`)}};_u.ConstructExecutor=dp});var wg=y(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.DescribeExecutor=void 0;var xx=xt(),pp=class{static{o(this,"DescribeExecutor")}constructor(e){this.tripleStore=e}async execute(e){let t=[],i=new Set;for(let n of e){let s=await this.describeResource(n);for(let a of s){let c=`${a.subject.toString()}|${a.predicate.toString()}|${a.object.toString()}`;i.has(c)||(i.add(c),t.push(a))}}return t}async describeResource(e){let t=[],i=await this.tripleStore.match(e,void 0,void 0);t.push(...i);let n=await this.tripleStore.match(void 0,void 0,e);return t.push(...n),t}async describeByIRI(e){let t=new xx.IRI(e);return this.execute([t])}};vu.DescribeExecutor=pp});var Eg=y(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.MinusExecutor=void 0;var mp=class{static{o(this,"MinusExecutor")}async*execute(e,t){let i=[];for await(let s of e)i.push(s);let n=[];for await(let s of t)n.push(s);for(let s of i){let a=!1;for(let c of n)if(this.areCompatible(s,c)){a=!0;break}a||(yield s)}}async executeAll(e,t){let i=[];async function*n(){for(let a of e)yield a}o(n,"generateLeft");async function*s(){for(let a of t)yield a}o(s,"generateRight");for await(let a of this.execute(n(),s()))i.push(a);return i}areCompatible(e,t){let i=e.variables(),n=new Set(t.variables()),s=i.filter(a=>n.has(a));if(s.length===0)return!1;for(let a of s){let c=e.get(a),u=t.get(a);if(c===void 0||u===void 0||c.toString()!==u.toString())return!1}return!0}};Su.MinusExecutor=mp});var Ag=y(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.ValuesExecutor=Ds.ValuesExecutorError=void 0;var Ox=ja(),Tg=xt(),Cx=Ht(),bu=class extends Error{static{o(this,"ValuesExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="ValuesExecutorError"}};Ds.ValuesExecutorError=bu;var gp=class{static{o(this,"ValuesExecutor")}async*execute(e){if(e.bindings.length!==0)for(let t of e.bindings)yield this.createSolutionMapping(t)}async executeAll(e){let t=[];for await(let i of this.execute(e))t.push(i);return t}createSolutionMapping(e){let t=new Ox.SolutionMapping;for(let[i,n]of Object.entries(e)){let s=this.toRDFTerm(n);t.set(i,s)}return t}toRDFTerm(e){if(e.type==="iri")return new Tg.IRI(e.value);if(e.type==="literal")return new Cx.Literal(e.value,e.datatype?new Tg.IRI(e.datatype):void 0,e.language);throw new bu(`Unknown term type: ${e.type}`)}};Ds.ValuesExecutor=gp});var Og=y(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.AggregateExecutor=Rs.AggregateExecutorError=void 0;var ur=Ht(),_p=xt(),Fx=mu(),xg=new _p.IRI("http://www.w3.org/2001/XMLSchema#integer"),qa=new _p.IRI("http://www.w3.org/2001/XMLSchema#decimal"),Yn=new _p.IRI("http://www.w3.org/2001/XMLSchema#string"),wu=class extends Error{static{o(this,"AggregateExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="AggregateExecutorError"}};Rs.AggregateExecutorError=wu;var yp=class{static{o(this,"AggregateExecutor")}constructor(){this.filterExecutor=new Fx.FilterExecutor}execute(e,t){let i=this.groupSolutions(t,e.variables),n=[];for(let[s,a]of i.entries()){let c=new Map;for(let u of e.variables)if(a.length>0){let f=a[0].get(u);f&&c.set(u,f)}for(let u of e.aggregates){let f=this.computeAggregate(u.expression,a);c.set(u.variable,f)}if(a.length>0){let u=a[0].clone();for(let[f,l]of c.entries())u.set(f,l);n.push(u)}else{let u=new(a[0]?.constructor||Map);for(let[f,l]of c.entries())u.set(f,l);n.push(u)}}if(n.length===0&&e.aggregates.length>0){let s=this.createEmptyAggregateResult(e);s&&n.push(s)}return n}groupSolutions(e,t){let i=new Map;if(t.length===0)return i.set("",e),i;for(let n of e){let s=this.computeGroupKey(n,t),a=i.get(s);a?a.push(n):i.set(s,[n])}return i}computeGroupKey(e,t){return t.map(i=>{let n=e.get(i);return n?this.termToString(n):""}).join("|")}termToString(e){if(e&&typeof e=="object"){if("value"in e)return String(e.value);if("id"in e)return String(e.id)}return String(e)}computeAggregate(e,t){let i=this.extractValues(e,t);switch(e.aggregation){case"count":{let n=this.computeCount(i,e.distinct);return new ur.Literal(String(n),xg)}case"sum":{let n=this.computeSum(i);return new ur.Literal(String(n),qa)}case"avg":{let n=this.computeAvg(i);return new ur.Literal(String(n),qa)}case"min":{let n=this.computeMin(i);return n===void 0?new ur.Literal("",Yn):typeof n=="number"?new ur.Literal(String(n),qa):new ur.Literal(String(n),Yn)}case"max":{let n=this.computeMax(i);return n===void 0?new ur.Literal("",Yn):typeof n=="number"?new ur.Literal(String(n),qa):new ur.Literal(String(n),Yn)}case"group_concat":{let n=this.computeGroupConcat(i,e.separator||" ",e.distinct);return new ur.Literal(n||" ",Yn)}default:throw new wu(`Unknown aggregation function: ${e.aggregation}`)}}extractValues(e,t){if(!e.expression)return t.map(()=>1);let i=[];for(let n of t){let s=this.evaluateExpression(e.expression,n);s!=null&&i.push(s)}return i}evaluateExpression(e,t){if(e.type==="variable"){let i=t.get(e.name);return i==null?void 0:typeof i=="number"||typeof i=="string"||typeof i=="boolean"?i:typeof i=="object"&&"value"in i?i.value:i}if(e.type==="literal")return e.value;try{return this.filterExecutor.evaluateExpression(e,t)}catch{return}}computeCount(e,t){return t?new Set(e.map(i=>String(i))).size:e.length}computeSum(e){return e.map(i=>parseFloat(String(i))).filter(i=>!isNaN(i)).reduce((i,n)=>i+n,0)}computeAvg(e){let t=e.map(i=>parseFloat(String(i))).filter(i=>!isNaN(i));return t.length===0?0:t.reduce((i,n)=>i+n,0)/t.length}computeMin(e){if(e.length===0)return;let t=e.map(n=>parseFloat(String(n))).filter(n=>!isNaN(n));if(t.length>0)return Math.min(...t);let i=e.map(n=>String(n));return i.reduce((n,s)=>s<n?s:n,i[0])}computeMax(e){if(e.length===0)return;let t=e.map(n=>parseFloat(String(n))).filter(n=>!isNaN(n));if(t.length>0)return Math.max(...t);let i=e.map(n=>String(n));return i.reduce((n,s)=>s>n?s:n,i[0])}computeGroupConcat(e,t,i){let n=e.map(s=>String(s));return i&&(n=[...new Set(n)]),n.join(t)}createEmptyAggregateResult(e){let{SolutionMapping:t}=ja(),i=new t;for(let n of e.aggregates)switch(n.expression.aggregation){case"count":i.set(n.variable,new ur.Literal("0",xg));break;case"sum":case"avg":i.set(n.variable,new ur.Literal("0",qa));break;case"group_concat":i.set(n.variable,new ur.Literal(" ",Yn));break;default:i.set(n.variable,new ur.Literal("",Yn))}return i}};Rs.AggregateExecutor=yp});var Cg=y(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.QueryExecutor=Ns.QueryExecutorError=void 0;var Px=np(),Ix=mu(),Dx=lp(),Rx=hp(),Nx=Eg(),kx=Ag(),jx=Og(),Eu=class extends Error{static{o(this,"QueryExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="QueryExecutorError"}};Ns.QueryExecutorError=Eu;var vp=class{static{o(this,"QueryExecutor")}constructor(e){this.bgpExecutor=new Px.BGPExecutor(e),this.filterExecutor=new Ix.FilterExecutor,this.optionalExecutor=new Dx.OptionalExecutor,this.unionExecutor=new Rx.UnionExecutor,this.minusExecutor=new Nx.MinusExecutor,this.valuesExecutor=new kx.ValuesExecutor,this.aggregateExecutor=new jx.AggregateExecutor,this.filterExecutor.setExistsEvaluator(async(t,i)=>this.evaluateExistsPattern(t,i))}async evaluateExistsPattern(e,t){for await(let i of this.execute(e))if(t.merge(i)!==null)return!0;return!1}async executeAll(e){let t=[];for await(let i of this.execute(e))t.push(i);return t}async*execute(e){switch(e.type){case"bgp":yield*this.executeBGP(e);break;case"filter":yield*this.executeFilter(e);break;case"join":yield*this.executeJoin(e);break;case"leftjoin":yield*this.executeLeftJoin(e);break;case"union":yield*this.executeUnion(e);break;case"minus":yield*this.executeMinus(e);break;case"values":yield*this.executeValues(e);break;case"project":yield*this.executeProject(e);break;case"orderby":yield*this.executeOrderBy(e);break;case"slice":yield*this.executeSlice(e);break;case"distinct":yield*this.executeDistinct(e);break;case"group":yield*this.executeGroup(e);break;case"extend":yield*this.executeExtend(e);break;case"subquery":yield*this.executeSubquery(e);break;default:throw new Eu(`Unknown operation type: ${e.type}`)}}async*executeBGP(e){yield*this.bgpExecutor.execute(e)}async*executeFilter(e){let t=this.execute(e.input);yield*this.filterExecutor.execute(e,t)}async*executeJoin(e){let t=[];for await(let i of this.execute(e.left))t.push(i);for(let i of t)for await(let n of this.execute(e.right)){let s=i.merge(n);s!==null&&(yield s)}}async*executeLeftJoin(e){let t=[];for await(let a of this.execute(e.left))t.push(a);let i=[];for await(let a of this.execute(e.right))i.push(a);async function*n(){for(let a of t)yield a}o(n,"leftGen");async function*s(){for(let a of i)yield a}o(s,"rightGen"),yield*this.optionalExecutor.execute(n(),s())}async*executeUnion(e){let t=[];for await(let a of this.execute(e.left))t.push(a);let i=[];for await(let a of this.execute(e.right))i.push(a);async function*n(){for(let a of t)yield a}o(n,"leftGen");async function*s(){for(let a of i)yield a}o(s,"rightGen"),yield*this.unionExecutor.execute(n(),s())}async*executeMinus(e){let t=[];for await(let a of this.execute(e.left))t.push(a);let i=[];for await(let a of this.execute(e.right))i.push(a);async function*n(){for(let a of t)yield a}o(n,"leftGen");async function*s(){for(let a of i)yield a}o(s,"rightGen"),yield*this.minusExecutor.execute(n(),s())}async*executeValues(e){yield*this.valuesExecutor.execute(e)}async*executeProject(e){for await(let t of this.execute(e.input))yield t}async*executeOrderBy(e){let t=[];for await(let i of this.execute(e.input))t.push(i);t.sort((i,n)=>{for(let s of e.comparators){let a=this.getExpressionValue(s.expression,i),c=this.getExpressionValue(s.expression,n),u=0;if(a===void 0&&c===void 0?u=0:a===void 0?u=1:c===void 0?u=-1:typeof a=="number"&&typeof c=="number"?u=a-c:u=String(a).localeCompare(String(c)),s.descending&&(u=-u),u!==0)return u}return 0});for(let i of t)yield i}async*executeSlice(e){let t=0,i=e.offset??0,n=e.limit;for await(let s of this.execute(e.input)){if(t>=i){if(n!==void 0&&t-i>=n)break;yield s}t++}}async*executeDistinct(e){let t=new Set;for await(let i of this.execute(e.input)){let n=this.getSolutionKey(i);t.has(n)||(t.add(n),yield i)}}async*executeGroup(e){let t=[];for await(let n of this.execute(e.input))t.push(n);let i=this.aggregateExecutor.execute(e,t);for(let n of i)yield n}async*executeExtend(e){for await(let t of this.execute(e.input)){let i=t.clone(),n=this.evaluateExtendExpression(e.expression,t);n!==void 0&&i.set(e.variable,n),yield i}}async*executeSubquery(e){yield*this.execute(e.query)}evaluateExtendExpression(e,t){if(e.type!=="aggregate")try{return this.filterExecutor.evaluateExpression(e,t)}catch{return}}getExpressionValue(e,t){if(e.type==="variable"){let i=t.get(e.name);return i?i.value??i.id??String(i):void 0}return e.value}getSolutionKey(e){let t=e.toJSON();return Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("|")}};Ns.QueryExecutor=vp});var Pg=y(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.AggregateFunctions=void 0;var Sp=Ht(),Fg=xt(),bp=class{static{o(this,"AggregateFunctions")}static count(e,t){if(!t)return e.length;let i=0;for(let n of e)n.has(t)&&i++;return i}static countDistinct(e,t){let i=new Set;for(let n of e){let s=n.get(t);s&&i.add(s.toString())}return i.size}static sum(e,t){let i=0;for(let n of e){let s=n.get(t);if(s instanceof Sp.Literal){let a=this.toNumber(s);isNaN(a)||(i+=a)}}return i}static avg(e,t){let i=this.sum(e,t),n=this.count(e,t);return n>0?i/n:0}static min(e,t){let i=null;for(let n of e){let s=n.get(t);if(!s)continue;let a=this.toComparable(s);(i===null||a<i)&&(i=a)}return i}static max(e,t){let i=null;for(let n of e){let s=n.get(t);if(!s)continue;let a=this.toComparable(s);(i===null||a>i)&&(i=a)}return i}static groupConcat(e,t,i=" "){let n=[];for(let s of e){let a=s.get(t);a&&(a instanceof Sp.Literal||a instanceof Fg.IRI?n.push(a.value):n.push(a.toString()))}return n.join(i)}static toNumber(e){let t=e.datatype?.value;return t?.includes("#integer")||t?.includes("#decimal")||t?.includes("#double"),parseFloat(e.value)}static toComparable(e){if(e instanceof Sp.Literal){let t=this.toNumber(e);return isNaN(t)?e.value:t}return e instanceof Fg.IRI?e.value:String(e)}};Tu.AggregateFunctions=bp});var Ig=y(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.QueryPlanCache=void 0;var Mx=Nd(),wp=class{static{o(this,"QueryPlanCache")}constructor(e=100){this.hits=0,this.misses=0,this.cache=new Mx.LRUCache(e)}get(e){let t=this.normalizeQuery(e),i=this.cache.get(t);return i!==void 0?this.hits++:this.misses++,i}set(e,t){let i=this.normalizeQuery(e);this.cache.set(i,t)}has(e){let t=this.normalizeQuery(e);return this.cache.get(t)!==void 0}clear(){this.cache.clear()}getStats(){let e=this.hits+this.misses;return{hits:this.hits,misses:this.misses,hitRate:e>0?this.hits/e:0,size:this.cache.size()}}resetStats(){this.hits=0,this.misses=0}normalizeQuery(e){return e.replace(/\s+/g," ").trim()}};Au.QueryPlanCache=wp});var Dg=y(ks=>{"use strict";Object.defineProperty(ks,"__esModule",{value:!0});ks.FileAlreadyExistsError=ks.FileNotFoundError=void 0;var Ep=class extends Error{static{o(this,"FileNotFoundError")}constructor(e){super(`File not found: ${e}`),this.name="FileNotFoundError"}};ks.FileNotFoundError=Ep;var Tp=class extends Error{static{o(this,"FileAlreadyExistsError")}constructor(e){super(`File already exists: ${e}`),this.name="FileAlreadyExistsError"}};ks.FileAlreadyExistsError=Tp});var Rg=y(un=>{"use strict";Object.defineProperty(un,"__esModule",{value:!0});un.container=void 0;un.registerCoreServices=o5;un.createChildContainer=c5;un.getContainer=u5;un.resetContainer=l5;Yl();var Ba=Qe();Object.defineProperty(un,"container",{enumerable:!0,get:o(function(){return Ba.container},"get")});var rt=tt(),Lx=Nh(),Vx=Rc(),qx=Nc(),Bx=nd(),Ux=jh(),$x=Uh(),Gx=qh(),Wx=Vc(),Hx=qc(),zx=Xh(),Kx=ed(),Yx=ad(),Qx=Qh(),Jx=hd(),Xx=gd(),Zx=pd(),e5=Hh(),t5=Kh(),r5=ld(),i5=cd(),n5=Vd(),s5=Gh(),a5=_d();function o5(r){let e=r||Ba.container;e.registerSingleton(rt.DI_TOKENS.TaskFrontmatterGenerator,Vx.TaskFrontmatterGenerator),e.registerSingleton(rt.DI_TOKENS.AlgorithmExtractor,qx.AlgorithmExtractor),e.registerSingleton(rt.DI_TOKENS.EffortStatusWorkflow,Wx.EffortStatusWorkflow),e.registerSingleton(rt.DI_TOKENS.StatusTimestampService,Hx.StatusTimestampService),e.registerSingleton(rt.DI_TOKENS.TaskStatusService,Gx.TaskStatusService),e.registerSingleton(rt.DI_TOKENS.TaskCreationService,Lx.TaskCreationService),e.registerSingleton(rt.DI_TOKENS.ProjectCreationService,Ux.ProjectCreationService),e.registerSingleton(rt.DI_TOKENS.AreaCreationService,$x.AreaCreationService),e.registerSingleton(rt.DI_TOKENS.ClassCreationService,e5.ClassCreationService),e.registerSingleton(rt.DI_TOKENS.ConceptCreationService,t5.ConceptCreationService),e.registerSingleton(rt.DI_TOKENS.FleetingNoteCreationService,r5.FleetingNoteCreationService),e.registerSingleton(rt.DI_TOKENS.SupervisionCreationService,i5.SupervisionCreationService),e.registerSingleton(rt.DI_TOKENS.PropertyCleanupService,Bx.PropertyCleanupService),e.registerSingleton(rt.DI_TOKENS.FolderRepairService,zx.FolderRepairService),e.registerSingleton(rt.DI_TOKENS.LabelToAliasService,Kx.LabelToAliasService),e.registerSingleton(rt.DI_TOKENS.RenameToUidService,Yx.RenameToUidService),e.registerSingleton(rt.DI_TOKENS.PlanningService,Jx.PlanningService),e.registerSingleton(rt.DI_TOKENS.EffortVotingService,Qx.EffortVotingService),e.registerSingleton(rt.DI_TOKENS.SessionEventService,Xx.SessionEventService),e.registerSingleton(rt.DI_TOKENS.AssetConversionService,Zx.AssetConversionService),e.registerSingleton(rt.DI_TOKENS.NoteToRDFConverter,n5.NoteToRDFConverter),e.registerSingleton(rt.DI_TOKENS.AreaHierarchyBuilder,s5.AreaHierarchyBuilder),e.registerSingleton(rt.DI_TOKENS.URIConstructionService,a5.URIConstructionService)}o(o5,"registerCoreServices");function c5(){return Ba.container.createChildContainer()}o(c5,"createChildContainer");function u5(){return Ba.container}o(u5,"getContainer");function l5(){Ba.container.reset()}o(l5,"resetContainer")});var _i=y(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.ErrorCode=void 0;var Ng;(function(r){r[r.INVALID_INPUT=1e3]="INVALID_INPUT",r[r.INVALID_FORMAT=1001]="INVALID_FORMAT",r[r.MISSING_REQUIRED_FIELD=1002]="MISSING_REQUIRED_FIELD",r[r.INVALID_SCHEMA=1003]="INVALID_SCHEMA",r[r.NETWORK_ERROR=2e3]="NETWORK_ERROR",r[r.REQUEST_TIMEOUT=2001]="REQUEST_TIMEOUT",r[r.CONNECTION_FAILED=2002]="CONNECTION_FAILED",r[r.FILE_READ_ERROR=2003]="FILE_READ_ERROR",r[r.FILE_WRITE_ERROR=2004]="FILE_WRITE_ERROR",r[r.INVALID_STATE=3e3]="INVALID_STATE",r[r.INVALID_TRANSITION=3001]="INVALID_TRANSITION",r[r.OPERATION_FAILED=3002]="OPERATION_FAILED",r[r.CONCURRENT_MODIFICATION=3003]="CONCURRENT_MODIFICATION",r[r.PERMISSION_DENIED=4e3]="PERMISSION_DENIED",r[r.UNAUTHORIZED=4001]="UNAUTHORIZED",r[r.FORBIDDEN=4003]="FORBIDDEN",r[r.NOT_FOUND=5e3]="NOT_FOUND",r[r.RESOURCE_EXHAUSTED=5001]="RESOURCE_EXHAUSTED",r[r.ALREADY_EXISTS=5002]="ALREADY_EXISTS",r[r.UNKNOWN_ERROR=9e3]="UNKNOWN_ERROR",r[r.INTERNAL_ERROR=9001]="INTERNAL_ERROR"})(Ng||(xu.ErrorCode=Ng={}))});var vi=y(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.ApplicationError=void 0;var Ap=class extends Error{static{o(this,"ApplicationError")}constructor(e,t){super(e),this.name=this.constructor.name,this.context=t,this.timestamp=new Date,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}format(){let e=`\u274C ${this.name}: ${this.message}`;if(this.guidance&&(e+=`

\u{1F4A1} ${this.guidance}`),this.context&&Object.keys(this.context).length>0){e+=`

\u{1F4CB} Context:`;for(let[t,i]of Object.entries(this.context))e+=`
  ${t}: ${JSON.stringify(i)}`}return e}toJSON(){return{name:this.name,message:this.message,code:this.code,retriable:this.retriable,timestamp:this.timestamp.toISOString(),context:this.context,stack:this.stack}}};Ou.ApplicationError=Ap});var kg=y(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.ValidationError=void 0;var f5=vi(),h5=_i(),xp=class extends f5.ApplicationError{static{o(this,"ValidationError")}constructor(e,t){super(e,t),this.code=h5.ErrorCode.INVALID_INPUT,this.retriable=!1,this.guidance=`Check the input data for correctness.
Common issues:
  \u2022 Missing required fields
  \u2022 Invalid data format or type
  \u2022 Values outside allowed range
  \u2022 Schema validation failed`}};Cu.ValidationError=xp});var jg=y(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.NetworkError=void 0;var d5=vi(),p5=_i(),Op=class extends d5.ApplicationError{static{o(this,"NetworkError")}constructor(e,t){super(e,t),this.code=p5.ErrorCode.NETWORK_ERROR,this.retriable=!0,this.guidance=`This is typically a transient network issue.
To resolve:
  \u2022 Check your internet connection
  \u2022 Retry the operation
  \u2022 Verify external services are available
  \u2022 Check firewall/proxy settings`}};Fu.NetworkError=Op});var Mg=y(Pu=>{"use strict";Object.defineProperty(Pu,"__esModule",{value:!0});Pu.StateTransitionError=void 0;var m5=vi(),g5=_i(),Cp=class extends m5.ApplicationError{static{o(this,"StateTransitionError")}constructor(e,t){super(e,t),this.code=g5.ErrorCode.INVALID_TRANSITION,this.retriable=!1,this.guidance=`The requested state transition is not allowed.
To fix:
  \u2022 Check the current state of the resource
  \u2022 Verify the transition is valid for this workflow
  \u2022 Review state machine documentation
  \u2022 Ensure no concurrent modifications occurred`}};Pu.StateTransitionError=Cp});var Lg=y(Iu=>{"use strict";Object.defineProperty(Iu,"__esModule",{value:!0});Iu.PermissionError=void 0;var y5=vi(),_5=_i(),Fp=class extends y5.ApplicationError{static{o(this,"PermissionError")}constructor(e,t){super(e,t),this.code=_5.ErrorCode.PERMISSION_DENIED,this.retriable=!1,this.guidance=`You don't have permission to perform this operation.
To resolve:
  \u2022 Check file/directory permissions
  \u2022 Verify you're authenticated
  \u2022 Ensure you have sufficient privileges
  \u2022 Contact administrator if access is needed`}};Iu.PermissionError=Fp});var Vg=y(Du=>{"use strict";Object.defineProperty(Du,"__esModule",{value:!0});Du.NotFoundError=void 0;var v5=vi(),S5=_i(),Pp=class extends v5.ApplicationError{static{o(this,"NotFoundError")}constructor(e,t){super(e,t),this.code=S5.ErrorCode.NOT_FOUND,this.retriable=!1,this.guidance=`The requested resource could not be found.
To resolve:
  \u2022 Verify the resource path/ID is correct
  \u2022 Check the resource exists
  \u2022 Ensure proper file extension (.md for notes)
  \u2022 Verify resource hasn't been deleted`}};Du.NotFoundError=Pp});var qg=y(Ru=>{"use strict";Object.defineProperty(Ru,"__esModule",{value:!0});Ru.ResourceExhaustedError=void 0;var b5=vi(),w5=_i(),Ip=class extends b5.ApplicationError{static{o(this,"ResourceExhaustedError")}constructor(e,t){super(e,t),this.code=w5.ErrorCode.RESOURCE_EXHAUSTED,this.retriable=!0,this.guidance=`A resource limit has been exceeded.
To resolve:
  \u2022 Free up system resources (memory, disk space)
  \u2022 Reduce the size of your request
  \u2022 Wait and retry (for rate limits)
  \u2022 Close unused files/connections
  \u2022 Paginate large queries`}};Ru.ResourceExhaustedError=Ip});var Bg=y(Nu=>{"use strict";Object.defineProperty(Nu,"__esModule",{value:!0});Nu.ServiceError=void 0;var E5=vi(),T5=_i(),Dp=class extends E5.ApplicationError{static{o(this,"ServiceError")}constructor(e,t){super(e,t),this.code=T5.ErrorCode.INTERNAL_ERROR,this.retriable=!1,this.guidance=`This is an internal service error.
To resolve:
  \u2022 Check service initialization parameters
  \u2022 Verify all required dependencies are available
  \u2022 Review service logs for detailed error information
  \u2022 Contact support if the issue persists`}};Nu.ServiceError=Dp});var Ug=y(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.ServiceError=ft.ResourceExhaustedError=ft.NotFoundError=ft.PermissionError=ft.StateTransitionError=ft.NetworkError=ft.ValidationError=ft.ApplicationError=ft.ErrorCode=void 0;var A5=_i();Object.defineProperty(ft,"ErrorCode",{enumerable:!0,get:o(function(){return A5.ErrorCode},"get")});var x5=vi();Object.defineProperty(ft,"ApplicationError",{enumerable:!0,get:o(function(){return x5.ApplicationError},"get")});var O5=kg();Object.defineProperty(ft,"ValidationError",{enumerable:!0,get:o(function(){return O5.ValidationError},"get")});var C5=jg();Object.defineProperty(ft,"NetworkError",{enumerable:!0,get:o(function(){return C5.NetworkError},"get")});var F5=Mg();Object.defineProperty(ft,"StateTransitionError",{enumerable:!0,get:o(function(){return F5.StateTransitionError},"get")});var P5=Lg();Object.defineProperty(ft,"PermissionError",{enumerable:!0,get:o(function(){return P5.PermissionError},"get")});var I5=Vg();Object.defineProperty(ft,"NotFoundError",{enumerable:!0,get:o(function(){return I5.NotFoundError},"get")});var D5=qg();Object.defineProperty(ft,"ResourceExhaustedError",{enumerable:!0,get:o(function(){return D5.ResourceExhaustedError},"get")});var R5=Bg();Object.defineProperty(ft,"ServiceError",{enumerable:!0,get:o(function(){return R5.ServiceError},"get")})});var $g=y(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.ApplicationErrorHandler=void 0;var Rp=vi(),N5=_i(),Np=class{static{o(this,"ApplicationErrorHandler")}constructor(e={},t,i){this.logger=t,this.notifier=i,this.telemetryHooks=new Set,this.retryConfig={maxRetries:e.maxRetries??3,initialDelayMs:e.initialDelayMs??1e3,backoffMultiplier:e.backoffMultiplier??2,maxDelayMs:e.maxDelayMs??1e4}}handle(e,t){let i=this.ensureApplicationError(e,t);return this.notifier&&this.notifier.error(i.message),this.callTelemetryHooks("onError",i,t),this.formatError(i)}async executeWithRetry(e,t){let i,n=0;for(;n<=this.retryConfig.maxRetries;)try{return await e()}catch(s){if(i=this.ensureApplicationError(s,t),!i.retriable||n>=this.retryConfig.maxRetries)throw this.callTelemetryHooks("onError",i,t),n>=this.retryConfig.maxRetries&&i.retriable&&this.callTelemetryHooks("onRetryExhausted",i,n+1),i;let a=this.calculateDelay(n);this.callTelemetryHooks("onRetry",i,n+1,a),this.logger?.debug(`Retrying after ${a}ms (attempt ${n+1}/${this.retryConfig.maxRetries})`),await this.sleep(a),n++}throw i}registerTelemetryHook(e){this.telemetryHooks.add(e)}unregisterTelemetryHook(e){this.telemetryHooks.delete(e)}ensureApplicationError(e,t){if(e instanceof Rp.ApplicationError){if(t){let n=e,s={...e.context,...t};return new class extends Rp.ApplicationError{constructor(){super(...arguments),this.code=n.code,this.retriable=n.retriable,this.guidance=n.guidance}}(e.message,s)}return e}return new class extends Rp.ApplicationError{static{o(this,"UnknownError")}constructor(s,a){super(s,{originalError:a.name,...t}),this.code=N5.ErrorCode.UNKNOWN_ERROR,this.retriable=!1,this.guidance="An unexpected error occurred"}}(e.message,e)}formatError(e){let t=[];return t.push(`\u274C ${e.name}: ${e.message}`),e.guidance&&t.push(`\u{1F4A1} ${e.guidance}`),e.context&&Object.keys(e.context).length>0&&t.push(`Context: ${JSON.stringify(e.context,null,2)}`),t.join(`
`)}calculateDelay(e){let t=this.retryConfig.initialDelayMs*Math.pow(this.retryConfig.backoffMultiplier,e);return Math.min(t,this.retryConfig.maxDelayMs)}sleep(e){return new Promise(t=>setTimeout(t,e))}callTelemetryHooks(e,...t){for(let i of this.telemetryHooks)try{let n=i[e];n&&n.apply(i,t)}catch(n){console.error("Error in telemetry hook:",n)}}};ku.ApplicationErrorHandler=Np});var Gg=y(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.ApplicationErrorHandler=void 0;var k5=$g();Object.defineProperty(ju,"ApplicationErrorHandler",{enumerable:!0,get:o(function(){return k5.ApplicationErrorHandler},"get")})});var ln=y(A=>{"use strict";var j5=A&&A.__createBinding||(Object.create?(function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,i,n)}):(function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]})),Si=A&&A.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&j5(e,r,t)};Object.defineProperty(A,"__esModule",{value:!0});A.FileNotFoundError=A.QueryPlanCache=A.AggregateFunctions=A.BuiltInFunctions=A.SolutionMapping=A.QueryExecutor=A.DescribeExecutor=A.ConstructExecutor=A.UnionExecutor=A.OptionalExecutor=A.FilterExecutor=A.BGPExecutor=A.AlgebraSerializer=A.AlgebraOptimizer=A.AlgebraTranslator=A.SPARQLParseError=A.SPARQLParser=A.NoteToRDFConverter=A.RDFVocabularyMapper=A.InMemoryTripleStore=A.RDFSerializer=A.EffortSortingHelpers=A.MetadataExtractor=A.MetadataHelpers=A.WikiLinkHelpers=A.DateFormatter=A.FrontmatterService=A.URIConstructionService=A.SessionEventService=A.AssetConversionService=A.PlanningService=A.AlgorithmExtractor=A.TaskFrontmatterGenerator=A.FleetingNoteCreationService=A.SupervisionCreationService=A.StatusTimestampService=A.RenameToUidService=A.PropertyCleanupService=A.LoggingService=A.LabelToAliasService=A.FolderRepairService=A.EffortVotingService=A.EffortStatusWorkflow=A.ConceptCreationService=A.ClassCreationService=A.AreaHierarchyBuilder=A.AreaCreationService=A.TaskStatusService=A.ProjectCreationService=A.TaskCreationService=void 0;A.container=A.resetContainer=A.getContainer=A.createChildContainer=A.registerCoreServices=A.DI_TOKENS=A.FileAlreadyExistsError=void 0;Si(pf(),A);Si(mf(),A);Si(W1(),A);Si(z1(),A);Si(Y1(),A);Si(J1(),A);Si(Z1(),A);Si(h2(),A);var M5=Nh();Object.defineProperty(A,"TaskCreationService",{enumerable:!0,get:o(function(){return M5.TaskCreationService},"get")});var L5=jh();Object.defineProperty(A,"ProjectCreationService",{enumerable:!0,get:o(function(){return L5.ProjectCreationService},"get")});var V5=qh();Object.defineProperty(A,"TaskStatusService",{enumerable:!0,get:o(function(){return V5.TaskStatusService},"get")});var q5=Uh();Object.defineProperty(A,"AreaCreationService",{enumerable:!0,get:o(function(){return q5.AreaCreationService},"get")});var B5=Gh();Object.defineProperty(A,"AreaHierarchyBuilder",{enumerable:!0,get:o(function(){return B5.AreaHierarchyBuilder},"get")});var U5=Hh();Object.defineProperty(A,"ClassCreationService",{enumerable:!0,get:o(function(){return U5.ClassCreationService},"get")});var $5=Kh();Object.defineProperty(A,"ConceptCreationService",{enumerable:!0,get:o(function(){return $5.ConceptCreationService},"get")});var G5=Vc();Object.defineProperty(A,"EffortStatusWorkflow",{enumerable:!0,get:o(function(){return G5.EffortStatusWorkflow},"get")});var W5=Qh();Object.defineProperty(A,"EffortVotingService",{enumerable:!0,get:o(function(){return W5.EffortVotingService},"get")});var H5=Xh();Object.defineProperty(A,"FolderRepairService",{enumerable:!0,get:o(function(){return H5.FolderRepairService},"get")});var z5=ed();Object.defineProperty(A,"LabelToAliasService",{enumerable:!0,get:o(function(){return z5.LabelToAliasService},"get")});var K5=td();Object.defineProperty(A,"LoggingService",{enumerable:!0,get:o(function(){return K5.LoggingService},"get")});var Y5=nd();Object.defineProperty(A,"PropertyCleanupService",{enumerable:!0,get:o(function(){return Y5.PropertyCleanupService},"get")});var Q5=ad();Object.defineProperty(A,"RenameToUidService",{enumerable:!0,get:o(function(){return Q5.RenameToUidService},"get")});var J5=qc();Object.defineProperty(A,"StatusTimestampService",{enumerable:!0,get:o(function(){return J5.StatusTimestampService},"get")});var X5=cd();Object.defineProperty(A,"SupervisionCreationService",{enumerable:!0,get:o(function(){return X5.SupervisionCreationService},"get")});var Z5=ld();Object.defineProperty(A,"FleetingNoteCreationService",{enumerable:!0,get:o(function(){return Z5.FleetingNoteCreationService},"get")});var eO=Rc();Object.defineProperty(A,"TaskFrontmatterGenerator",{enumerable:!0,get:o(function(){return eO.TaskFrontmatterGenerator},"get")});var tO=Nc();Object.defineProperty(A,"AlgorithmExtractor",{enumerable:!0,get:o(function(){return tO.AlgorithmExtractor},"get")});var rO=hd();Object.defineProperty(A,"PlanningService",{enumerable:!0,get:o(function(){return rO.PlanningService},"get")});var iO=pd();Object.defineProperty(A,"AssetConversionService",{enumerable:!0,get:o(function(){return iO.AssetConversionService},"get")});var nO=gd();Object.defineProperty(A,"SessionEventService",{enumerable:!0,get:o(function(){return nO.SessionEventService},"get")});var sO=_d();Object.defineProperty(A,"URIConstructionService",{enumerable:!0,get:o(function(){return sO.URIConstructionService},"get")});var aO=bs();Object.defineProperty(A,"FrontmatterService",{enumerable:!0,get:o(function(){return aO.FrontmatterService},"get")});var oO=pr();Object.defineProperty(A,"DateFormatter",{enumerable:!0,get:o(function(){return oO.DateFormatter},"get")});var cO=Rn();Object.defineProperty(A,"WikiLinkHelpers",{enumerable:!0,get:o(function(){return cO.WikiLinkHelpers},"get")});var uO=kr();Object.defineProperty(A,"MetadataHelpers",{enumerable:!0,get:o(function(){return uO.MetadataHelpers},"get")});var lO=Ia();Object.defineProperty(A,"MetadataExtractor",{enumerable:!0,get:o(function(){return lO.MetadataExtractor},"get")});var fO=q0();Object.defineProperty(A,"EffortSortingHelpers",{enumerable:!0,get:o(function(){return fO.EffortSortingHelpers},"get")});var hO=z0();Object.defineProperty(A,"RDFSerializer",{enumerable:!0,get:o(function(){return hO.RDFSerializer},"get")});var dO=Y0();Object.defineProperty(A,"InMemoryTripleStore",{enumerable:!0,get:o(function(){return dO.InMemoryTripleStore},"get")});var pO=J0();Object.defineProperty(A,"RDFVocabularyMapper",{enumerable:!0,get:o(function(){return pO.RDFVocabularyMapper},"get")});var mO=Vd();Object.defineProperty(A,"NoteToRDFConverter",{enumerable:!0,get:o(function(){return mO.NoteToRDFConverter},"get")});var Wg=pg();Object.defineProperty(A,"SPARQLParser",{enumerable:!0,get:o(function(){return Wg.SPARQLParser},"get")});Object.defineProperty(A,"SPARQLParseError",{enumerable:!0,get:o(function(){return Wg.SPARQLParseError},"get")});var gO=mg();Object.defineProperty(A,"AlgebraTranslator",{enumerable:!0,get:o(function(){return gO.AlgebraTranslator},"get")});var yO=gg();Object.defineProperty(A,"AlgebraOptimizer",{enumerable:!0,get:o(function(){return yO.AlgebraOptimizer},"get")});var _O=yg();Object.defineProperty(A,"AlgebraSerializer",{enumerable:!0,get:o(function(){return _O.AlgebraSerializer},"get")});var vO=np();Object.defineProperty(A,"BGPExecutor",{enumerable:!0,get:o(function(){return vO.BGPExecutor},"get")});var SO=mu();Object.defineProperty(A,"FilterExecutor",{enumerable:!0,get:o(function(){return SO.FilterExecutor},"get")});var bO=lp();Object.defineProperty(A,"OptionalExecutor",{enumerable:!0,get:o(function(){return bO.OptionalExecutor},"get")});var wO=hp();Object.defineProperty(A,"UnionExecutor",{enumerable:!0,get:o(function(){return wO.UnionExecutor},"get")});var EO=bg();Object.defineProperty(A,"ConstructExecutor",{enumerable:!0,get:o(function(){return EO.ConstructExecutor},"get")});var TO=wg();Object.defineProperty(A,"DescribeExecutor",{enumerable:!0,get:o(function(){return TO.DescribeExecutor},"get")});var AO=Cg();Object.defineProperty(A,"QueryExecutor",{enumerable:!0,get:o(function(){return AO.QueryExecutor},"get")});var xO=ja();Object.defineProperty(A,"SolutionMapping",{enumerable:!0,get:o(function(){return xO.SolutionMapping},"get")});var OO=op();Object.defineProperty(A,"BuiltInFunctions",{enumerable:!0,get:o(function(){return OO.BuiltInFunctions},"get")});var CO=Pg();Object.defineProperty(A,"AggregateFunctions",{enumerable:!0,get:o(function(){return CO.AggregateFunctions},"get")});var FO=Ig();Object.defineProperty(A,"QueryPlanCache",{enumerable:!0,get:o(function(){return FO.QueryPlanCache},"get")});var Hg=Dg();Object.defineProperty(A,"FileNotFoundError",{enumerable:!0,get:o(function(){return Hg.FileNotFoundError},"get")});Object.defineProperty(A,"FileAlreadyExistsError",{enumerable:!0,get:o(function(){return Hg.FileAlreadyExistsError},"get")});var PO=tt();Object.defineProperty(A,"DI_TOKENS",{enumerable:!0,get:o(function(){return PO.DI_TOKENS},"get")});var Ua=Rg();Object.defineProperty(A,"registerCoreServices",{enumerable:!0,get:o(function(){return Ua.registerCoreServices},"get")});Object.defineProperty(A,"createChildContainer",{enumerable:!0,get:o(function(){return Ua.createChildContainer},"get")});Object.defineProperty(A,"getContainer",{enumerable:!0,get:o(function(){return Ua.getContainer},"get")});Object.defineProperty(A,"resetContainer",{enumerable:!0,get:o(function(){return Ua.resetContainer},"get")});Object.defineProperty(A,"container",{enumerable:!0,get:o(function(){return Ua.container},"get")});Si(Ug(),A);Si(Gg(),A)});var _t=y(kp=>{"use strict";kp.fromCallback=function(r){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")r.apply(this,e);else return new Promise((t,i)=>{e.push((n,s)=>n!=null?i(n):t(s)),r.apply(this,e)})},"name",{value:r.name})};kp.fromPromise=function(r){return Object.defineProperty(function(...e){let t=e[e.length-1];if(typeof t!="function")return r.apply(this,e);e.pop(),r.apply(this,e).then(i=>t(null,i),t)},"name",{value:r.name})}});var Kg=y((hj,zg)=>{var fn=require("constants"),IO=process.cwd,Mu=null,DO=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return Mu||(Mu=IO.call(process)),Mu};try{process.cwd()}catch{}typeof process.chdir=="function"&&(jp=process.chdir,process.chdir=function(r){Mu=null,jp.call(process,r)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,jp));var jp;zg.exports=RO;function RO(r){fn.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(r),r.lutimes||t(r),r.chown=s(r.chown),r.fchown=s(r.fchown),r.lchown=s(r.lchown),r.chmod=i(r.chmod),r.fchmod=i(r.fchmod),r.lchmod=i(r.lchmod),r.chownSync=a(r.chownSync),r.fchownSync=a(r.fchownSync),r.lchownSync=a(r.lchownSync),r.chmodSync=n(r.chmodSync),r.fchmodSync=n(r.fchmodSync),r.lchmodSync=n(r.lchmodSync),r.stat=c(r.stat),r.fstat=c(r.fstat),r.lstat=c(r.lstat),r.statSync=u(r.statSync),r.fstatSync=u(r.fstatSync),r.lstatSync=u(r.lstatSync),r.chmod&&!r.lchmod&&(r.lchmod=function(l,h,p){p&&process.nextTick(p)},r.lchmodSync=function(){}),r.chown&&!r.lchown&&(r.lchown=function(l,h,p,g){g&&process.nextTick(g)},r.lchownSync=function(){}),DO==="win32"&&(r.rename=typeof r.rename!="function"?r.rename:(function(l){function h(p,g,S){var b=Date.now(),x=0;l(p,g,o(function F(P){if(P&&(P.code==="EACCES"||P.code==="EPERM"||P.code==="EBUSY")&&Date.now()-b<6e4){setTimeout(function(){r.stat(g,function(V,H){V&&V.code==="ENOENT"?l(p,g,F):S(P)})},x),x<100&&(x+=10);return}S&&S(P)},"CB"))}return o(h,"rename"),Object.setPrototypeOf&&Object.setPrototypeOf(h,l),h})(r.rename)),r.read=typeof r.read!="function"?r.read:(function(l){function h(p,g,S,b,x,F){var P;if(F&&typeof F=="function"){var V=0;P=o(function(H,K,Pe){if(H&&H.code==="EAGAIN"&&V<10)return V++,l.call(r,p,g,S,b,x,P);F.apply(this,arguments)},"callback")}return l.call(r,p,g,S,b,x,P)}return o(h,"read"),Object.setPrototypeOf&&Object.setPrototypeOf(h,l),h})(r.read),r.readSync=typeof r.readSync!="function"?r.readSync:(function(l){return function(h,p,g,S,b){for(var x=0;;)try{return l.call(r,h,p,g,S,b)}catch(F){if(F.code==="EAGAIN"&&x<10){x++;continue}throw F}}})(r.readSync);function e(l){l.lchmod=function(h,p,g){l.open(h,fn.O_WRONLY|fn.O_SYMLINK,p,function(S,b){if(S){g&&g(S);return}l.fchmod(b,p,function(x){l.close(b,function(F){g&&g(x||F)})})})},l.lchmodSync=function(h,p){var g=l.openSync(h,fn.O_WRONLY|fn.O_SYMLINK,p),S=!0,b;try{b=l.fchmodSync(g,p),S=!1}finally{if(S)try{l.closeSync(g)}catch{}else l.closeSync(g)}return b}}o(e,"patchLchmod");function t(l){fn.hasOwnProperty("O_SYMLINK")&&l.futimes?(l.lutimes=function(h,p,g,S){l.open(h,fn.O_SYMLINK,function(b,x){if(b){S&&S(b);return}l.futimes(x,p,g,function(F){l.close(x,function(P){S&&S(F||P)})})})},l.lutimesSync=function(h,p,g){var S=l.openSync(h,fn.O_SYMLINK),b,x=!0;try{b=l.futimesSync(S,p,g),x=!1}finally{if(x)try{l.closeSync(S)}catch{}else l.closeSync(S)}return b}):l.futimes&&(l.lutimes=function(h,p,g,S){S&&process.nextTick(S)},l.lutimesSync=function(){})}o(t,"patchLutimes");function i(l){return l&&function(h,p,g){return l.call(r,h,p,function(S){f(S)&&(S=null),g&&g.apply(this,arguments)})}}o(i,"chmodFix");function n(l){return l&&function(h,p){try{return l.call(r,h,p)}catch(g){if(!f(g))throw g}}}o(n,"chmodFixSync");function s(l){return l&&function(h,p,g,S){return l.call(r,h,p,g,function(b){f(b)&&(b=null),S&&S.apply(this,arguments)})}}o(s,"chownFix");function a(l){return l&&function(h,p,g){try{return l.call(r,h,p,g)}catch(S){if(!f(S))throw S}}}o(a,"chownFixSync");function c(l){return l&&function(h,p,g){typeof p=="function"&&(g=p,p=null);function S(b,x){x&&(x.uid<0&&(x.uid+=4294967296),x.gid<0&&(x.gid+=4294967296)),g&&g.apply(this,arguments)}return o(S,"callback"),p?l.call(r,h,p,S):l.call(r,h,S)}}o(c,"statFix");function u(l){return l&&function(h,p){var g=p?l.call(r,h,p):l.call(r,h);return g&&(g.uid<0&&(g.uid+=4294967296),g.gid<0&&(g.gid+=4294967296)),g}}o(u,"statFixSync");function f(l){if(!l||l.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(l.code==="EINVAL"||l.code==="EPERM"))}o(f,"chownErOk")}o(RO,"patch")});var Jg=y((pj,Qg)=>{var Yg=require("stream").Stream;Qg.exports=NO;function NO(r){return{ReadStream:e,WriteStream:t};function e(i,n){if(!(this instanceof e))return new e(i,n);Yg.call(this);var s=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,n=n||{};for(var a=Object.keys(n),c=0,u=a.length;c<u;c++){var f=a[c];this[f]=n[f]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}r.open(this.path,this.flags,this.mode,function(l,h){if(l){s.emit("error",l),s.readable=!1;return}s.fd=h,s.emit("open",h),s._read()})}function t(i,n){if(!(this instanceof t))return new t(i,n);Yg.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var s=Object.keys(n),a=0,c=s.length;a<c;a++){var u=s[a];this[u]=n[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=r.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}o(NO,"legacy")});var Zg=y((gj,Xg)=>{"use strict";Xg.exports=jO;var kO=Object.getPrototypeOf||function(r){return r.__proto__};function jO(r){if(r===null||typeof r!="object")return r;if(r instanceof Object)var e={__proto__:kO(r)};else var e=Object.create(null);return Object.getOwnPropertyNames(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}o(jO,"clone")});var Ms=y((_j,Vp)=>{var it=require("fs"),MO=Kg(),LO=Jg(),VO=Zg(),Lu=require("util"),Pt,qu;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Pt=Symbol.for("graceful-fs.queue"),qu=Symbol.for("graceful-fs.previous")):(Pt="___graceful-fs.queue",qu="___graceful-fs.previous");function qO(){}o(qO,"noop");function ry(r,e){Object.defineProperty(r,Pt,{get:o(function(){return e},"get")})}o(ry,"publishQueue");var Qn=qO;Lu.debuglog?Qn=Lu.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Qn=o(function(){var r=Lu.format.apply(Lu,arguments);r="GFS4: "+r.split(/\n/).join(`
GFS4: `),console.error(r)},"debug"));it[Pt]||(ey=global[Pt]||[],ry(it,ey),it.close=(function(r){function e(t,i){return r.call(it,t,function(n){n||ty(),typeof i=="function"&&i.apply(this,arguments)})}return o(e,"close"),Object.defineProperty(e,qu,{value:r}),e})(it.close),it.closeSync=(function(r){function e(t){r.apply(it,arguments),ty()}return o(e,"closeSync"),Object.defineProperty(e,qu,{value:r}),e})(it.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Qn(it[Pt]),require("assert").equal(it[Pt].length,0)}));var ey;global[Pt]||ry(global,it[Pt]);Vp.exports=Mp(VO(it));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!it.__patched&&(Vp.exports=Mp(it),it.__patched=!0);function Mp(r){MO(r),r.gracefulify=Mp,r.createReadStream=K,r.createWriteStream=Pe;var e=r.readFile;r.readFile=t;function t(B,ce,xe){return typeof ce=="function"&&(xe=ce,ce=null),Xe(B,ce,xe);function Xe($e,He,Ie,Ne){return e($e,He,function(Ce){Ce&&(Ce.code==="EMFILE"||Ce.code==="ENFILE")?js([Xe,[$e,He,Ie],Ce,Ne||Date.now(),Date.now()]):typeof Ie=="function"&&Ie.apply(this,arguments)})}o(Xe,"go$readFile")}o(t,"readFile");var i=r.writeFile;r.writeFile=n;function n(B,ce,xe,Xe){return typeof xe=="function"&&(Xe=xe,xe=null),$e(B,ce,xe,Xe);function $e(He,Ie,Ne,Ce,$){return i(He,Ie,Ne,function(R){R&&(R.code==="EMFILE"||R.code==="ENFILE")?js([$e,[He,Ie,Ne,Ce],R,$||Date.now(),Date.now()]):typeof Ce=="function"&&Ce.apply(this,arguments)})}o($e,"go$writeFile")}o(n,"writeFile");var s=r.appendFile;s&&(r.appendFile=a);function a(B,ce,xe,Xe){return typeof xe=="function"&&(Xe=xe,xe=null),$e(B,ce,xe,Xe);function $e(He,Ie,Ne,Ce,$){return s(He,Ie,Ne,function(R){R&&(R.code==="EMFILE"||R.code==="ENFILE")?js([$e,[He,Ie,Ne,Ce],R,$||Date.now(),Date.now()]):typeof Ce=="function"&&Ce.apply(this,arguments)})}o($e,"go$appendFile")}o(a,"appendFile");var c=r.copyFile;c&&(r.copyFile=u);function u(B,ce,xe,Xe){return typeof xe=="function"&&(Xe=xe,xe=0),$e(B,ce,xe,Xe);function $e(He,Ie,Ne,Ce,$){return c(He,Ie,Ne,function(R){R&&(R.code==="EMFILE"||R.code==="ENFILE")?js([$e,[He,Ie,Ne,Ce],R,$||Date.now(),Date.now()]):typeof Ce=="function"&&Ce.apply(this,arguments)})}o($e,"go$copyFile")}o(u,"copyFile");var f=r.readdir;r.readdir=h;var l=/^v[0-5]\./;function h(B,ce,xe){typeof ce=="function"&&(xe=ce,ce=null);var Xe=l.test(process.version)?o(function(Ie,Ne,Ce,$){return f(Ie,$e(Ie,Ne,Ce,$))},"go$readdir"):o(function(Ie,Ne,Ce,$){return f(Ie,Ne,$e(Ie,Ne,Ce,$))},"go$readdir");return Xe(B,ce,xe);function $e(He,Ie,Ne,Ce){return function($,R){$&&($.code==="EMFILE"||$.code==="ENFILE")?js([Xe,[He,Ie,Ne],$,Ce||Date.now(),Date.now()]):(R&&R.sort&&R.sort(),typeof Ne=="function"&&Ne.call(this,$,R))}}}if(o(h,"readdir"),process.version.substr(0,4)==="v0.8"){var p=LO(r);F=p.ReadStream,V=p.WriteStream}var g=r.ReadStream;g&&(F.prototype=Object.create(g.prototype),F.prototype.open=P);var S=r.WriteStream;S&&(V.prototype=Object.create(S.prototype),V.prototype.open=H),Object.defineProperty(r,"ReadStream",{get:o(function(){return F},"get"),set:o(function(B){F=B},"set"),enumerable:!0,configurable:!0}),Object.defineProperty(r,"WriteStream",{get:o(function(){return V},"get"),set:o(function(B){V=B},"set"),enumerable:!0,configurable:!0});var b=F;Object.defineProperty(r,"FileReadStream",{get:o(function(){return b},"get"),set:o(function(B){b=B},"set"),enumerable:!0,configurable:!0});var x=V;Object.defineProperty(r,"FileWriteStream",{get:o(function(){return x},"get"),set:o(function(B){x=B},"set"),enumerable:!0,configurable:!0});function F(B,ce){return this instanceof F?(g.apply(this,arguments),this):F.apply(Object.create(F.prototype),arguments)}o(F,"ReadStream");function P(){var B=this;ct(B.path,B.flags,B.mode,function(ce,xe){ce?(B.autoClose&&B.destroy(),B.emit("error",ce)):(B.fd=xe,B.emit("open",xe),B.read())})}o(P,"ReadStream$open");function V(B,ce){return this instanceof V?(S.apply(this,arguments),this):V.apply(Object.create(V.prototype),arguments)}o(V,"WriteStream");function H(){var B=this;ct(B.path,B.flags,B.mode,function(ce,xe){ce?(B.destroy(),B.emit("error",ce)):(B.fd=xe,B.emit("open",xe))})}o(H,"WriteStream$open");function K(B,ce){return new r.ReadStream(B,ce)}o(K,"createReadStream");function Pe(B,ce){return new r.WriteStream(B,ce)}o(Pe,"createWriteStream");var Ze=r.open;r.open=ct;function ct(B,ce,xe,Xe){return typeof xe=="function"&&(Xe=xe,xe=null),$e(B,ce,xe,Xe);function $e(He,Ie,Ne,Ce,$){return Ze(He,Ie,Ne,function(R,ke){R&&(R.code==="EMFILE"||R.code==="ENFILE")?js([$e,[He,Ie,Ne,Ce],R,$||Date.now(),Date.now()]):typeof Ce=="function"&&Ce.apply(this,arguments)})}o($e,"go$open")}return o(ct,"open"),r}o(Mp,"patch");function js(r){Qn("ENQUEUE",r[0].name,r[1]),it[Pt].push(r),Lp()}o(js,"enqueue");var Vu;function ty(){for(var r=Date.now(),e=0;e<it[Pt].length;++e)it[Pt][e].length>2&&(it[Pt][e][3]=r,it[Pt][e][4]=r);Lp()}o(ty,"resetQueue");function Lp(){if(clearTimeout(Vu),Vu=void 0,it[Pt].length!==0){var r=it[Pt].shift(),e=r[0],t=r[1],i=r[2],n=r[3],s=r[4];if(n===void 0)Qn("RETRY",e.name,t),e.apply(null,t);else if(Date.now()-n>=6e4){Qn("TIMEOUT",e.name,t);var a=t.pop();typeof a=="function"&&a.call(null,i)}else{var c=Date.now()-s,u=Math.max(s-n,1),f=Math.min(u*1.2,100);c>=f?(Qn("RETRY",e.name,t),e.apply(null,t.concat([n]))):it[Pt].push(r)}Vu===void 0&&(Vu=setTimeout(Lp,0))}}o(Lp,"retry")});var Qt=y($i=>{"use strict";var iy=_t().fromCallback,Yt=Ms(),BO=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(r=>typeof Yt[r]=="function");Object.assign($i,Yt);BO.forEach(r=>{$i[r]=iy(Yt[r])});$i.exists=function(r,e){return typeof e=="function"?Yt.exists(r,e):new Promise(t=>Yt.exists(r,t))};$i.read=function(r,e,t,i,n,s){return typeof s=="function"?Yt.read(r,e,t,i,n,s):new Promise((a,c)=>{Yt.read(r,e,t,i,n,(u,f,l)=>{if(u)return c(u);a({bytesRead:f,buffer:l})})})};$i.write=function(r,e,...t){return typeof t[t.length-1]=="function"?Yt.write(r,e,...t):new Promise((i,n)=>{Yt.write(r,e,...t,(s,a,c)=>{if(s)return n(s);i({bytesWritten:a,buffer:c})})})};$i.readv=function(r,e,...t){return typeof t[t.length-1]=="function"?Yt.readv(r,e,...t):new Promise((i,n)=>{Yt.readv(r,e,...t,(s,a,c)=>{if(s)return n(s);i({bytesRead:a,buffers:c})})})};$i.writev=function(r,e,...t){return typeof t[t.length-1]=="function"?Yt.writev(r,e,...t):new Promise((i,n)=>{Yt.writev(r,e,...t,(s,a,c)=>{if(s)return n(s);i({bytesWritten:a,buffers:c})})})};typeof Yt.realpath.native=="function"?$i.realpath.native=iy(Yt.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var sy=y((bj,ny)=>{"use strict";var UO=require("path");ny.exports.checkPath=o(function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(UO.parse(e).root,""))){let i=new Error(`Path contains invalid characters: ${e}`);throw i.code="EINVAL",i}},"checkPath")});var uy=y((Ej,qp)=>{"use strict";var ay=Qt(),{checkPath:oy}=sy(),cy=o(r=>{let e={mode:511};return typeof r=="number"?r:{...e,...r}.mode},"getMode");qp.exports.makeDir=async(r,e)=>(oy(r),ay.mkdir(r,{mode:cy(e),recursive:!0}));qp.exports.makeDirSync=(r,e)=>(oy(r),ay.mkdirSync(r,{mode:cy(e),recursive:!0}))});var ti=y((Aj,ly)=>{"use strict";var $O=_t().fromPromise,{makeDir:GO,makeDirSync:Bp}=uy(),Up=$O(GO);ly.exports={mkdirs:Up,mkdirsSync:Bp,mkdirp:Up,mkdirpSync:Bp,ensureDir:Up,ensureDirSync:Bp}});var hn=y((xj,hy)=>{"use strict";var WO=_t().fromPromise,fy=Qt();function HO(r){return fy.access(r).then(()=>!0).catch(()=>!1)}o(HO,"pathExists");hy.exports={pathExists:WO(HO),pathExistsSync:fy.existsSync}});var $p=y((Cj,dy)=>{"use strict";var Ls=Qt(),zO=_t().fromPromise;async function KO(r,e,t){let i=await Ls.open(r,"r+"),n=null;try{await Ls.futimes(i,e,t)}finally{try{await Ls.close(i)}catch(s){n=s}}if(n)throw n}o(KO,"utimesMillis");function YO(r,e,t){let i=Ls.openSync(r,"r+");return Ls.futimesSync(i,e,t),Ls.closeSync(i)}o(YO,"utimesMillisSync");dy.exports={utimesMillis:zO(KO),utimesMillisSync:YO}});var Jn=y((Pj,yy)=>{"use strict";var Vs=Qt(),vt=require("path"),py=_t().fromPromise;function QO(r,e,t){let i=t.dereference?n=>Vs.stat(n,{bigint:!0}):n=>Vs.lstat(n,{bigint:!0});return Promise.all([i(r),i(e).catch(n=>{if(n.code==="ENOENT")return null;throw n})]).then(([n,s])=>({srcStat:n,destStat:s}))}o(QO,"getStats");function JO(r,e,t){let i,n=t.dereference?a=>Vs.statSync(a,{bigint:!0}):a=>Vs.lstatSync(a,{bigint:!0}),s=n(r);try{i=n(e)}catch(a){if(a.code==="ENOENT")return{srcStat:s,destStat:null};throw a}return{srcStat:s,destStat:i}}o(JO,"getStatsSync");async function XO(r,e,t,i){let{srcStat:n,destStat:s}=await QO(r,e,i);if(s){if($a(n,s)){let a=vt.basename(r),c=vt.basename(e);if(t==="move"&&a!==c&&a.toLowerCase()===c.toLowerCase())return{srcStat:n,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${r}'.`);if(!n.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${r}'.`)}if(n.isDirectory()&&Gp(r,e))throw new Error(Bu(r,e,t));return{srcStat:n,destStat:s}}o(XO,"checkPaths");function ZO(r,e,t,i){let{srcStat:n,destStat:s}=JO(r,e,i);if(s){if($a(n,s)){let a=vt.basename(r),c=vt.basename(e);if(t==="move"&&a!==c&&a.toLowerCase()===c.toLowerCase())return{srcStat:n,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${r}'.`);if(!n.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${r}'.`)}if(n.isDirectory()&&Gp(r,e))throw new Error(Bu(r,e,t));return{srcStat:n,destStat:s}}o(ZO,"checkPathsSync");async function my(r,e,t,i){let n=vt.resolve(vt.dirname(r)),s=vt.resolve(vt.dirname(t));if(s===n||s===vt.parse(s).root)return;let a;try{a=await Vs.stat(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if($a(e,a))throw new Error(Bu(r,t,i));return my(r,e,s,i)}o(my,"checkParentPaths");function gy(r,e,t,i){let n=vt.resolve(vt.dirname(r)),s=vt.resolve(vt.dirname(t));if(s===n||s===vt.parse(s).root)return;let a;try{a=Vs.statSync(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if($a(e,a))throw new Error(Bu(r,t,i));return gy(r,e,s,i)}o(gy,"checkParentPathsSync");function $a(r,e){return e.ino!==void 0&&e.dev!==void 0&&e.ino===r.ino&&e.dev===r.dev}o($a,"areIdentical");function Gp(r,e){let t=vt.resolve(r).split(vt.sep).filter(n=>n),i=vt.resolve(e).split(vt.sep).filter(n=>n);return t.every((n,s)=>i[s]===n)}o(Gp,"isSrcSubdir");function Bu(r,e,t){return`Cannot ${t} '${r}' to a subdirectory of itself, '${e}'.`}o(Bu,"errMsg");yy.exports={checkPaths:py(XO),checkPathsSync:ZO,checkParentPaths:py(my),checkParentPathsSync:gy,isSrcSubdir:Gp,areIdentical:$a}});var vy=y((Dj,_y)=>{"use strict";async function eC(r,e){let t=[];for await(let i of r)t.push(e(i).then(()=>null,n=>n??new Error("unknown error")));await Promise.all(t.map(i=>i.then(n=>{if(n!==null)throw n})))}o(eC,"asyncIteratorConcurrentProcess");_y.exports={asyncIteratorConcurrentProcess:eC}});var Ty=y((Nj,Ey)=>{"use strict";var jt=Qt(),Ga=require("path"),{mkdirs:tC}=ti(),{pathExists:rC}=hn(),{utimesMillis:iC}=$p(),Wa=Jn(),{asyncIteratorConcurrentProcess:nC}=vy();async function sC(r,e,t={}){typeof t=="function"&&(t={filter:t}),t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:i,destStat:n}=await Wa.checkPaths(r,e,"copy",t);if(await Wa.checkParentPaths(r,i,e,"copy"),!await by(r,e,t))return;let a=Ga.dirname(e);await rC(a)||await tC(a),await wy(n,r,e,t)}o(sC,"copy");async function by(r,e,t){return t.filter?t.filter(r,e):!0}o(by,"runFilter");async function wy(r,e,t,i){let s=await(i.dereference?jt.stat:jt.lstat)(e);if(s.isDirectory())return uC(s,r,e,t,i);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return aC(s,r,e,t,i);if(s.isSymbolicLink())return lC(r,e,t,i);throw s.isSocket()?new Error(`Cannot copy a socket file: ${e}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}o(wy,"getStatsAndPerformCopy");async function aC(r,e,t,i,n){if(!e)return Sy(r,t,i,n);if(n.overwrite)return await jt.unlink(i),Sy(r,t,i,n);if(n.errorOnExist)throw new Error(`'${i}' already exists`)}o(aC,"onFile");async function Sy(r,e,t,i){if(await jt.copyFile(e,t),i.preserveTimestamps){oC(r.mode)&&await cC(t,r.mode);let n=await jt.stat(e);await iC(t,n.atime,n.mtime)}return jt.chmod(t,r.mode)}o(Sy,"copyFile");function oC(r){return(r&128)===0}o(oC,"fileIsNotWritable");function cC(r,e){return jt.chmod(r,e|128)}o(cC,"makeFileWritable");async function uC(r,e,t,i,n){e||await jt.mkdir(i),await nC(await jt.opendir(t),async s=>{let a=Ga.join(t,s.name),c=Ga.join(i,s.name);if(await by(a,c,n)){let{destStat:f}=await Wa.checkPaths(a,c,"copy",n);await wy(f,a,c,n)}}),e||await jt.chmod(i,r.mode)}o(uC,"onDir");async function lC(r,e,t,i){let n=await jt.readlink(e);if(i.dereference&&(n=Ga.resolve(process.cwd(),n)),!r)return jt.symlink(n,t);let s=null;try{s=await jt.readlink(t)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return jt.symlink(n,t);throw a}if(i.dereference&&(s=Ga.resolve(process.cwd(),s)),Wa.isSrcSubdir(n,s))throw new Error(`Cannot copy '${n}' to a subdirectory of itself, '${s}'.`);if(Wa.isSrcSubdir(s,n))throw new Error(`Cannot overwrite '${s}' with '${n}'.`);return await jt.unlink(t),jt.symlink(n,t)}o(lC,"onLink");Ey.exports=sC});var Fy=y((jj,Cy)=>{"use strict";var Jt=Ms(),Ha=require("path"),fC=ti().mkdirsSync,hC=$p().utimesMillisSync,za=Jn();function dC(r,e,t){typeof t=="function"&&(t={filter:t}),t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:i,destStat:n}=za.checkPathsSync(r,e,"copy",t);if(za.checkParentPathsSync(r,i,e,"copy"),t.filter&&!t.filter(r,e))return;let s=Ha.dirname(e);return Jt.existsSync(s)||fC(s),Ay(n,r,e,t)}o(dC,"copySync");function Ay(r,e,t,i){let s=(i.dereference?Jt.statSync:Jt.lstatSync)(e);if(s.isDirectory())return SC(s,r,e,t,i);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return pC(s,r,e,t,i);if(s.isSymbolicLink())return EC(r,e,t,i);throw s.isSocket()?new Error(`Cannot copy a socket file: ${e}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}o(Ay,"getStats");function pC(r,e,t,i,n){return e?mC(r,t,i,n):xy(r,t,i,n)}o(pC,"onFile");function mC(r,e,t,i){if(i.overwrite)return Jt.unlinkSync(t),xy(r,e,t,i);if(i.errorOnExist)throw new Error(`'${t}' already exists`)}o(mC,"mayCopyFile");function xy(r,e,t,i){return Jt.copyFileSync(e,t),i.preserveTimestamps&&gC(r.mode,e,t),Wp(t,r.mode)}o(xy,"copyFile");function gC(r,e,t){return yC(r)&&_C(t,r),vC(e,t)}o(gC,"handleTimestamps");function yC(r){return(r&128)===0}o(yC,"fileIsNotWritable");function _C(r,e){return Wp(r,e|128)}o(_C,"makeFileWritable");function Wp(r,e){return Jt.chmodSync(r,e)}o(Wp,"setDestMode");function vC(r,e){let t=Jt.statSync(r);return hC(e,t.atime,t.mtime)}o(vC,"setDestTimestamps");function SC(r,e,t,i,n){return e?Oy(t,i,n):bC(r.mode,t,i,n)}o(SC,"onDir");function bC(r,e,t,i){return Jt.mkdirSync(t),Oy(e,t,i),Wp(t,r)}o(bC,"mkDirAndCopy");function Oy(r,e,t){let i=Jt.opendirSync(r);try{let n;for(;(n=i.readSync())!==null;)wC(n.name,r,e,t)}finally{i.closeSync()}}o(Oy,"copyDir");function wC(r,e,t,i){let n=Ha.join(e,r),s=Ha.join(t,r);if(i.filter&&!i.filter(n,s))return;let{destStat:a}=za.checkPathsSync(n,s,"copy",i);return Ay(a,n,s,i)}o(wC,"copyDirItem");function EC(r,e,t,i){let n=Jt.readlinkSync(e);if(i.dereference&&(n=Ha.resolve(process.cwd(),n)),r){let s;try{s=Jt.readlinkSync(t)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return Jt.symlinkSync(n,t);throw a}if(i.dereference&&(s=Ha.resolve(process.cwd(),s)),za.isSrcSubdir(n,s))throw new Error(`Cannot copy '${n}' to a subdirectory of itself, '${s}'.`);if(za.isSrcSubdir(s,n))throw new Error(`Cannot overwrite '${s}' with '${n}'.`);return TC(n,t)}else return Jt.symlinkSync(n,t)}o(EC,"onLink");function TC(r,e){return Jt.unlinkSync(e),Jt.symlinkSync(r,e)}o(TC,"copyLink");Cy.exports=dC});var Uu=y((Lj,Py)=>{"use strict";var AC=_t().fromPromise;Py.exports={copy:AC(Ty()),copySync:Fy()}});var Ka=y((Vj,Dy)=>{"use strict";var Iy=Ms(),xC=_t().fromCallback;function OC(r,e){Iy.rm(r,{recursive:!0,force:!0},e)}o(OC,"remove");function CC(r){Iy.rmSync(r,{recursive:!0,force:!0})}o(CC,"removeSync");Dy.exports={remove:xC(OC),removeSync:CC}});var qy=y((Bj,Vy)=>{"use strict";var FC=_t().fromPromise,ky=Qt(),jy=require("path"),My=ti(),Ly=Ka(),Ry=FC(o(async function(e){let t;try{t=await ky.readdir(e)}catch{return My.mkdirs(e)}return Promise.all(t.map(i=>Ly.remove(jy.join(e,i))))},"emptyDir"));function Ny(r){let e;try{e=ky.readdirSync(r)}catch{return My.mkdirsSync(r)}e.forEach(t=>{t=jy.join(r,t),Ly.removeSync(t)})}o(Ny,"emptyDirSync");Vy.exports={emptyDirSync:Ny,emptydirSync:Ny,emptyDir:Ry,emptydir:Ry}});var Gy=y(($j,$y)=>{"use strict";var PC=_t().fromPromise,By=require("path"),Gi=Qt(),Uy=ti();async function IC(r){let e;try{e=await Gi.stat(r)}catch{}if(e&&e.isFile())return;let t=By.dirname(r),i=null;try{i=await Gi.stat(t)}catch(n){if(n.code==="ENOENT"){await Uy.mkdirs(t),await Gi.writeFile(r,"");return}else throw n}i.isDirectory()?await Gi.writeFile(r,""):await Gi.readdir(t)}o(IC,"createFile");function DC(r){let e;try{e=Gi.statSync(r)}catch{}if(e&&e.isFile())return;let t=By.dirname(r);try{Gi.statSync(t).isDirectory()||Gi.readdirSync(t)}catch(i){if(i&&i.code==="ENOENT")Uy.mkdirsSync(t);else throw i}Gi.writeFileSync(r,"")}o(DC,"createFileSync");$y.exports={createFile:PC(IC),createFileSync:DC}});var Yy=y((Wj,Ky)=>{"use strict";var RC=_t().fromPromise,Wy=require("path"),dn=Qt(),Hy=ti(),{pathExists:NC}=hn(),{areIdentical:zy}=Jn();async function kC(r,e){let t;try{t=await dn.lstat(e)}catch{}let i;try{i=await dn.lstat(r)}catch(a){throw a.message=a.message.replace("lstat","ensureLink"),a}if(t&&zy(i,t))return;let n=Wy.dirname(e);await NC(n)||await Hy.mkdirs(n),await dn.link(r,e)}o(kC,"createLink");function jC(r,e){let t;try{t=dn.lstatSync(e)}catch{}try{let s=dn.lstatSync(r);if(t&&zy(s,t))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let i=Wy.dirname(e);return dn.existsSync(i)||Hy.mkdirsSync(i),dn.linkSync(r,e)}o(jC,"createLinkSync");Ky.exports={createLink:RC(kC),createLinkSync:jC}});var Jy=y((zj,Qy)=>{"use strict";var pn=require("path"),Ya=Qt(),{pathExists:MC}=hn(),LC=_t().fromPromise;async function VC(r,e){if(pn.isAbsolute(r)){try{await Ya.lstat(r)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:r,toDst:r}}let t=pn.dirname(e),i=pn.join(t,r);if(await MC(i))return{toCwd:i,toDst:r};try{await Ya.lstat(r)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:r,toDst:pn.relative(t,r)}}o(VC,"symlinkPaths");function qC(r,e){if(pn.isAbsolute(r)){if(!Ya.existsSync(r))throw new Error("absolute srcpath does not exist");return{toCwd:r,toDst:r}}let t=pn.dirname(e),i=pn.join(t,r);if(Ya.existsSync(i))return{toCwd:i,toDst:r};if(!Ya.existsSync(r))throw new Error("relative srcpath does not exist");return{toCwd:r,toDst:pn.relative(t,r)}}o(qC,"symlinkPathsSync");Qy.exports={symlinkPaths:LC(VC),symlinkPathsSync:qC}});var e3=y((Yj,Zy)=>{"use strict";var Xy=Qt(),BC=_t().fromPromise;async function UC(r,e){if(e)return e;let t;try{t=await Xy.lstat(r)}catch{return"file"}return t&&t.isDirectory()?"dir":"file"}o(UC,"symlinkType");function $C(r,e){if(e)return e;let t;try{t=Xy.lstatSync(r)}catch{return"file"}return t&&t.isDirectory()?"dir":"file"}o($C,"symlinkTypeSync");Zy.exports={symlinkType:BC(UC),symlinkTypeSync:$C}});var n3=y((Jj,i3)=>{"use strict";var GC=_t().fromPromise,t3=require("path"),bi=Qt(),{mkdirs:WC,mkdirsSync:HC}=ti(),{symlinkPaths:zC,symlinkPathsSync:KC}=Jy(),{symlinkType:YC,symlinkTypeSync:QC}=e3(),{pathExists:JC}=hn(),{areIdentical:r3}=Jn();async function XC(r,e,t){let i;try{i=await bi.lstat(e)}catch{}if(i&&i.isSymbolicLink()){let[c,u]=await Promise.all([bi.stat(r),bi.stat(e)]);if(r3(c,u))return}let n=await zC(r,e);r=n.toDst;let s=await YC(n.toCwd,t),a=t3.dirname(e);return await JC(a)||await WC(a),bi.symlink(r,e,s)}o(XC,"createSymlink");function ZC(r,e,t){let i;try{i=bi.lstatSync(e)}catch{}if(i&&i.isSymbolicLink()){let c=bi.statSync(r),u=bi.statSync(e);if(r3(c,u))return}let n=KC(r,e);r=n.toDst,t=QC(n.toCwd,t);let s=t3.dirname(e);return bi.existsSync(s)||HC(s),bi.symlinkSync(r,e,t)}o(ZC,"createSymlinkSync");i3.exports={createSymlink:GC(XC),createSymlinkSync:ZC}});var h3=y((Zj,f3)=>{"use strict";var{createFile:s3,createFileSync:a3}=Gy(),{createLink:o3,createLinkSync:c3}=Yy(),{createSymlink:u3,createSymlinkSync:l3}=n3();f3.exports={createFile:s3,createFileSync:a3,ensureFile:s3,ensureFileSync:a3,createLink:o3,createLinkSync:c3,ensureLink:o3,ensureLinkSync:c3,createSymlink:u3,createSymlinkSync:l3,ensureSymlink:u3,ensureSymlinkSync:l3}});var $u=y((eM,d3)=>{function e9(r,{EOL:e=`
`,finalEOL:t=!0,replacer:i=null,spaces:n}={}){let s=t?e:"";return JSON.stringify(r,i,n).replace(/\n/g,e)+s}o(e9,"stringify");function t9(r){return Buffer.isBuffer(r)&&(r=r.toString("utf8")),r.replace(/^\uFEFF/,"")}o(t9,"stripBom");d3.exports={stringify:e9,stripBom:t9}});var y3=y((rM,g3)=>{var qs;try{qs=Ms()}catch{qs=require("fs")}var Gu=_t(),{stringify:p3,stripBom:m3}=$u();async function r9(r,e={}){typeof e=="string"&&(e={encoding:e});let t=e.fs||qs,i="throws"in e?e.throws:!0,n=await Gu.fromCallback(t.readFile)(r,e);n=m3(n);let s;try{s=JSON.parse(n,e?e.reviver:null)}catch(a){if(i)throw a.message=`${r}: ${a.message}`,a;return null}return s}o(r9,"_readFile");var i9=Gu.fromPromise(r9);function n9(r,e={}){typeof e=="string"&&(e={encoding:e});let t=e.fs||qs,i="throws"in e?e.throws:!0;try{let n=t.readFileSync(r,e);return n=m3(n),JSON.parse(n,e.reviver)}catch(n){if(i)throw n.message=`${r}: ${n.message}`,n;return null}}o(n9,"readFileSync");async function s9(r,e,t={}){let i=t.fs||qs,n=p3(e,t);await Gu.fromCallback(i.writeFile)(r,n,t)}o(s9,"_writeFile");var a9=Gu.fromPromise(s9);function o9(r,e,t={}){let i=t.fs||qs,n=p3(e,t);return i.writeFileSync(r,n,t)}o(o9,"writeFileSync");g3.exports={readFile:i9,readFileSync:n9,writeFile:a9,writeFileSync:o9}});var v3=y((nM,_3)=>{"use strict";var Wu=y3();_3.exports={readJson:Wu.readFile,readJsonSync:Wu.readFileSync,writeJson:Wu.writeFile,writeJsonSync:Wu.writeFileSync}});var Hu=y((sM,w3)=>{"use strict";var c9=_t().fromPromise,Hp=Qt(),S3=require("path"),b3=ti(),u9=hn().pathExists;async function l9(r,e,t="utf-8"){let i=S3.dirname(r);return await u9(i)||await b3.mkdirs(i),Hp.writeFile(r,e,t)}o(l9,"outputFile");function f9(r,...e){let t=S3.dirname(r);Hp.existsSync(t)||b3.mkdirsSync(t),Hp.writeFileSync(r,...e)}o(f9,"outputFileSync");w3.exports={outputFile:c9(l9),outputFileSync:f9}});var T3=y((oM,E3)=>{"use strict";var{stringify:h9}=$u(),{outputFile:d9}=Hu();async function p9(r,e,t={}){let i=h9(e,t);await d9(r,i,t)}o(p9,"outputJson");E3.exports=p9});var x3=y((uM,A3)=>{"use strict";var{stringify:m9}=$u(),{outputFileSync:g9}=Hu();function y9(r,e,t){let i=m9(e,t);g9(r,i,t)}o(y9,"outputJsonSync");A3.exports=y9});var C3=y((fM,O3)=>{"use strict";var _9=_t().fromPromise,Xt=v3();Xt.outputJson=_9(T3());Xt.outputJsonSync=x3();Xt.outputJSON=Xt.outputJson;Xt.outputJSONSync=Xt.outputJsonSync;Xt.writeJSON=Xt.writeJson;Xt.writeJSONSync=Xt.writeJsonSync;Xt.readJSON=Xt.readJson;Xt.readJSONSync=Xt.readJsonSync;O3.exports=Xt});var R3=y((hM,D3)=>{"use strict";var v9=Qt(),F3=require("path"),{copy:S9}=Uu(),{remove:I3}=Ka(),{mkdirp:b9}=ti(),{pathExists:w9}=hn(),P3=Jn();async function E9(r,e,t={}){let i=t.overwrite||t.clobber||!1,{srcStat:n,isChangingCase:s=!1}=await P3.checkPaths(r,e,"move",t);await P3.checkParentPaths(r,n,e,"move");let a=F3.dirname(e);return F3.parse(a).root!==a&&await b9(a),T9(r,e,i,s)}o(E9,"move");async function T9(r,e,t,i){if(!i){if(t)await I3(e);else if(await w9(e))throw new Error("dest already exists.")}try{await v9.rename(r,e)}catch(n){if(n.code!=="EXDEV")throw n;await A9(r,e,t)}}o(T9,"doRename");async function A9(r,e,t){return await S9(r,e,{overwrite:t,errorOnExist:!0,preserveTimestamps:!0}),I3(r)}o(A9,"moveAcrossDevice");D3.exports=E9});var L3=y((pM,M3)=>{"use strict";var k3=Ms(),Kp=require("path"),x9=Uu().copySync,j3=Ka().removeSync,O9=ti().mkdirpSync,N3=Jn();function C9(r,e,t){t=t||{};let i=t.overwrite||t.clobber||!1,{srcStat:n,isChangingCase:s=!1}=N3.checkPathsSync(r,e,"move",t);return N3.checkParentPathsSync(r,n,e,"move"),F9(e)||O9(Kp.dirname(e)),P9(r,e,i,s)}o(C9,"moveSync");function F9(r){let e=Kp.dirname(r);return Kp.parse(e).root===e}o(F9,"isParentRoot");function P9(r,e,t,i){if(i)return zp(r,e,t);if(t)return j3(e),zp(r,e,t);if(k3.existsSync(e))throw new Error("dest already exists.");return zp(r,e,t)}o(P9,"doRename");function zp(r,e,t){try{k3.renameSync(r,e)}catch(i){if(i.code!=="EXDEV")throw i;return I9(r,e,t)}}o(zp,"rename");function I9(r,e,t){return x9(r,e,{overwrite:t,errorOnExist:!0,preserveTimestamps:!0}),j3(r)}o(I9,"moveAcrossDevice");M3.exports=C9});var q3=y((gM,V3)=>{"use strict";var D9=_t().fromPromise;V3.exports={move:D9(R3()),moveSync:L3()}});var Bs=y((yM,B3)=>{"use strict";B3.exports={...Qt(),...Uu(),...qy(),...h3(),...C3(),...ti(),...q3(),...Hu(),...hn(),...Ka()}});var Q_=y((HL,Y_)=>{"use strict";Y_.exports=z_;function z_(r,e,t){r instanceof RegExp&&(r=H_(r,t)),e instanceof RegExp&&(e=H_(e,t));var i=K_(r,e,t);return i&&{start:i[0],end:i[1],pre:t.slice(0,i[0]),body:t.slice(i[0]+r.length,i[1]),post:t.slice(i[1]+e.length)}}o(z_,"balanced");function H_(r,e){var t=e.match(r);return t?t[0]:null}o(H_,"maybeMatch");z_.range=K_;function K_(r,e,t){var i,n,s,a,c,u=t.indexOf(r),f=t.indexOf(e,u+1),l=u;if(u>=0&&f>0){if(r===e)return[u,f];for(i=[],s=t.length;l>=0&&!c;)l==u?(i.push(l),u=t.indexOf(r,l+1)):i.length==1?c=[i.pop(),f]:(n=i.pop(),n<s&&(s=n,a=f),f=t.indexOf(e,l+1)),l=u<f&&u>=0?u:f;i.length&&(c=[s,a])}return c}o(K_,"range")});var nv=y((KL,iv)=>{var J_=Q_();iv.exports=iF;var X_="\0SLASH"+Math.random()+"\0",Z_="\0OPEN"+Math.random()+"\0",fm="\0CLOSE"+Math.random()+"\0",ev="\0COMMA"+Math.random()+"\0",tv="\0PERIOD"+Math.random()+"\0";function lm(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}o(lm,"numeric");function tF(r){return r.split("\\\\").join(X_).split("\\{").join(Z_).split("\\}").join(fm).split("\\,").join(ev).split("\\.").join(tv)}o(tF,"escapeBraces");function rF(r){return r.split(X_).join("\\").split(Z_).join("{").split(fm).join("}").split(ev).join(",").split(tv).join(".")}o(rF,"unescapeBraces");function rv(r){if(!r)return[""];var e=[],t=J_("{","}",r);if(!t)return r.split(",");var i=t.pre,n=t.body,s=t.post,a=i.split(",");a[a.length-1]+="{"+n+"}";var c=rv(s);return s.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),e.push.apply(e,a),e}o(rv,"parseCommaParts");function iF(r){return r?(r.substr(0,2)==="{}"&&(r="\\{\\}"+r.substr(2)),no(tF(r),!0).map(rF)):[]}o(iF,"expandTop");function nF(r){return"{"+r+"}"}o(nF,"embrace");function sF(r){return/^-?0\d/.test(r)}o(sF,"isPadded");function aF(r,e){return r<=e}o(aF,"lte");function oF(r,e){return r>=e}o(oF,"gte");function no(r,e){var t=[],i=J_("{","}",r);if(!i)return[r];var n=i.pre,s=i.post.length?no(i.post,!1):[""];if(/\$$/.test(i.pre))for(var a=0;a<s.length;a++){var c=n+"{"+i.body+"}"+s[a];t.push(c)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),f=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),l=u||f,h=i.body.indexOf(",")>=0;if(!l&&!h)return i.post.match(/,(?!,).*\}/)?(r=i.pre+"{"+i.body+fm+i.post,no(r)):[r];var p;if(l)p=i.body.split(/\.\./);else if(p=rv(i.body),p.length===1&&(p=no(p[0],!1).map(nF),p.length===1))return s.map(function(ce){return i.pre+p[0]+ce});var g;if(l){var S=lm(p[0]),b=lm(p[1]),x=Math.max(p[0].length,p[1].length),F=p.length==3?Math.abs(lm(p[2])):1,P=aF,V=b<S;V&&(F*=-1,P=oF);var H=p.some(sF);g=[];for(var K=S;P(K,b);K+=F){var Pe;if(f)Pe=String.fromCharCode(K),Pe==="\\"&&(Pe="");else if(Pe=String(K),H){var Ze=x-Pe.length;if(Ze>0){var ct=new Array(Ze+1).join("0");K<0?Pe="-"+ct+Pe.slice(1):Pe=ct+Pe}}g.push(Pe)}}else{g=[];for(var B=0;B<p.length;B++)g.push.apply(g,no(p[B],!1))}for(var B=0;B<g.length;B++)for(var a=0;a<s.length;a++){var c=n+g[B]+s[a];(!e||l||c)&&t.push(c)}}return t}o(no,"expand")});var WB=Ye(Yl());var B1=Ye(q1(),1),{program:qP,createCommand:BP,createArgument:UP,createOption:$P,CommanderError:GP,InvalidArgumentError:WP,InvalidOptionArgumentError:HP,Command:di,Argument:zP,Option:KP,Help:YP}=B1.default;var io=require("fs"),um=require("path"),fr=Ye(ln());var pt=Ye(Bs()),Lt=Ye(require("path"));function i_(r){return typeof r>"u"||r===null}o(i_,"isNothing");function R9(r){return typeof r=="object"&&r!==null}o(R9,"isObject");function N9(r){return Array.isArray(r)?r:i_(r)?[]:[r]}o(N9,"toArray");function k9(r,e){var t,i,n,s;if(e)for(s=Object.keys(e),t=0,i=s.length;t<i;t+=1)n=s[t],r[n]=e[n];return r}o(k9,"extend");function j9(r,e){var t="",i;for(i=0;i<e;i+=1)t+=r;return t}o(j9,"repeat");function M9(r){return r===0&&Number.NEGATIVE_INFINITY===1/r}o(M9,"isNegativeZero");var L9=i_,V9=R9,q9=N9,B9=j9,U9=M9,$9=k9,dt={isNothing:L9,isObject:V9,toArray:q9,repeat:B9,isNegativeZero:U9,extend:$9};function n_(r,e){var t="",i=r.reason||"(unknown reason)";return r.mark?(r.mark.name&&(t+='in "'+r.mark.name+'" '),t+="("+(r.mark.line+1)+":"+(r.mark.column+1)+")",!e&&r.mark.snippet&&(t+=`

`+r.mark.snippet),i+" "+t):i}o(n_,"formatError");function Ja(r,e){Error.call(this),this.name="YAMLException",this.reason=r,this.mark=e,this.message=n_(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}o(Ja,"YAMLException$1");Ja.prototype=Object.create(Error.prototype);Ja.prototype.constructor=Ja;Ja.prototype.toString=o(function(e){return this.name+": "+n_(this,e)},"toString");var Zt=Ja;function Yp(r,e,t,i,n){var s="",a="",c=Math.floor(n/2)-1;return i-e>c&&(s=" ... ",e=i-c+s.length),t-i>c&&(a=" ...",t=i+c-a.length),{str:s+r.slice(e,t).replace(/\t/g,"\u2192")+a,pos:i-e+s.length}}o(Yp,"getLine");function Qp(r,e){return dt.repeat(" ",e-r.length)+r}o(Qp,"padStart");function G9(r,e){if(e=Object.create(e||null),!r.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var t=/\r?\n|\r|\0/g,i=[0],n=[],s,a=-1;s=t.exec(r.buffer);)n.push(s.index),i.push(s.index+s[0].length),r.position<=s.index&&a<0&&(a=i.length-2);a<0&&(a=i.length-1);var c="",u,f,l=Math.min(r.line+e.linesAfter,n.length).toString().length,h=e.maxLength-(e.indent+l+3);for(u=1;u<=e.linesBefore&&!(a-u<0);u++)f=Yp(r.buffer,i[a-u],n[a-u],r.position-(i[a]-i[a-u]),h),c=dt.repeat(" ",e.indent)+Qp((r.line-u+1).toString(),l)+" | "+f.str+`
`+c;for(f=Yp(r.buffer,i[a],n[a],r.position,h),c+=dt.repeat(" ",e.indent)+Qp((r.line+1).toString(),l)+" | "+f.str+`
`,c+=dt.repeat("-",e.indent+l+3+f.pos)+`^
`,u=1;u<=e.linesAfter&&!(a+u>=n.length);u++)f=Yp(r.buffer,i[a+u],n[a+u],r.position-(i[a]-i[a+u]),h),c+=dt.repeat(" ",e.indent)+Qp((r.line+u+1).toString(),l)+" | "+f.str+`
`;return c.replace(/\n$/,"")}o(G9,"makeSnippet");var W9=G9,H9=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],z9=["scalar","sequence","mapping"];function K9(r){var e={};return r!==null&&Object.keys(r).forEach(function(t){r[t].forEach(function(i){e[String(i)]=t})}),e}o(K9,"compileStyleAliases");function Y9(r,e){if(e=e||{},Object.keys(e).forEach(function(t){if(H9.indexOf(t)===-1)throw new Zt('Unknown option "'+t+'" is met in definition of "'+r+'" YAML type.')}),this.options=e,this.tag=r,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=K9(e.styleAliases||null),z9.indexOf(this.kind)===-1)throw new Zt('Unknown kind "'+this.kind+'" is specified for "'+r+'" YAML type.')}o(Y9,"Type$1");var It=Y9;function U3(r,e){var t=[];return r[e].forEach(function(i){var n=t.length;t.forEach(function(s,a){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(n=a)}),t[n]=i}),t}o(U3,"compileList");function Q9(){var r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function i(n){n.multi?(r.multi[n.kind].push(n),r.multi.fallback.push(n)):r[n.kind][n.tag]=r.fallback[n.tag]=n}for(o(i,"collectType"),e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(i);return r}o(Q9,"compileMap");function Xp(r){return this.extend(r)}o(Xp,"Schema$1");Xp.prototype.extend=o(function(e){var t=[],i=[];if(e instanceof It)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new Zt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(s){if(!(s instanceof It))throw new Zt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Zt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Zt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof It))throw new Zt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create(Xp.prototype);return n.implicit=(this.implicit||[]).concat(t),n.explicit=(this.explicit||[]).concat(i),n.compiledImplicit=U3(n,"implicit"),n.compiledExplicit=U3(n,"explicit"),n.compiledTypeMap=Q9(n.compiledImplicit,n.compiledExplicit),n},"extend");var s_=Xp,a_=new It("tag:yaml.org,2002:str",{kind:"scalar",construct:o(function(r){return r!==null?r:""},"construct")}),o_=new It("tag:yaml.org,2002:seq",{kind:"sequence",construct:o(function(r){return r!==null?r:[]},"construct")}),c_=new It("tag:yaml.org,2002:map",{kind:"mapping",construct:o(function(r){return r!==null?r:{}},"construct")}),u_=new s_({explicit:[a_,o_,c_]});function J9(r){if(r===null)return!0;var e=r.length;return e===1&&r==="~"||e===4&&(r==="null"||r==="Null"||r==="NULL")}o(J9,"resolveYamlNull");function X9(){return null}o(X9,"constructYamlNull");function Z9(r){return r===null}o(Z9,"isNull");var l_=new It("tag:yaml.org,2002:null",{kind:"scalar",resolve:J9,construct:X9,predicate:Z9,represent:{canonical:o(function(){return"~"},"canonical"),lowercase:o(function(){return"null"},"lowercase"),uppercase:o(function(){return"NULL"},"uppercase"),camelcase:o(function(){return"Null"},"camelcase"),empty:o(function(){return""},"empty")},defaultStyle:"lowercase"});function e7(r){if(r===null)return!1;var e=r.length;return e===4&&(r==="true"||r==="True"||r==="TRUE")||e===5&&(r==="false"||r==="False"||r==="FALSE")}o(e7,"resolveYamlBoolean");function t7(r){return r==="true"||r==="True"||r==="TRUE"}o(t7,"constructYamlBoolean");function r7(r){return Object.prototype.toString.call(r)==="[object Boolean]"}o(r7,"isBoolean");var f_=new It("tag:yaml.org,2002:bool",{kind:"scalar",resolve:e7,construct:t7,predicate:r7,represent:{lowercase:o(function(r){return r?"true":"false"},"lowercase"),uppercase:o(function(r){return r?"TRUE":"FALSE"},"uppercase"),camelcase:o(function(r){return r?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function i7(r){return 48<=r&&r<=57||65<=r&&r<=70||97<=r&&r<=102}o(i7,"isHexCode");function n7(r){return 48<=r&&r<=55}o(n7,"isOctCode");function s7(r){return 48<=r&&r<=57}o(s7,"isDecCode");function a7(r){if(r===null)return!1;var e=r.length,t=0,i=!1,n;if(!e)return!1;if(n=r[t],(n==="-"||n==="+")&&(n=r[++t]),n==="0"){if(t+1===e)return!0;if(n=r[++t],n==="b"){for(t++;t<e;t++)if(n=r[t],n!=="_"){if(n!=="0"&&n!=="1")return!1;i=!0}return i&&n!=="_"}if(n==="x"){for(t++;t<e;t++)if(n=r[t],n!=="_"){if(!i7(r.charCodeAt(t)))return!1;i=!0}return i&&n!=="_"}if(n==="o"){for(t++;t<e;t++)if(n=r[t],n!=="_"){if(!n7(r.charCodeAt(t)))return!1;i=!0}return i&&n!=="_"}}if(n==="_")return!1;for(;t<e;t++)if(n=r[t],n!=="_"){if(!s7(r.charCodeAt(t)))return!1;i=!0}return!(!i||n==="_")}o(a7,"resolveYamlInteger");function o7(r){var e=r,t=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(t=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}o(o7,"constructYamlInteger");function c7(r){return Object.prototype.toString.call(r)==="[object Number]"&&r%1===0&&!dt.isNegativeZero(r)}o(c7,"isInteger");var h_=new It("tag:yaml.org,2002:int",{kind:"scalar",resolve:a7,construct:o7,predicate:c7,represent:{binary:o(function(r){return r>=0?"0b"+r.toString(2):"-0b"+r.toString(2).slice(1)},"binary"),octal:o(function(r){return r>=0?"0o"+r.toString(8):"-0o"+r.toString(8).slice(1)},"octal"),decimal:o(function(r){return r.toString(10)},"decimal"),hexadecimal:o(function(r){return r>=0?"0x"+r.toString(16).toUpperCase():"-0x"+r.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),u7=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function l7(r){return!(r===null||!u7.test(r)||r[r.length-1]==="_")}o(l7,"resolveYamlFloat");function f7(r){var e,t;return e=r.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}o(f7,"constructYamlFloat");var h7=/^[-+]?[0-9]+e/;function d7(r,e){var t;if(isNaN(r))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===r)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===r)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(dt.isNegativeZero(r))return"-0.0";return t=r.toString(10),h7.test(t)?t.replace("e",".e"):t}o(d7,"representYamlFloat");function p7(r){return Object.prototype.toString.call(r)==="[object Number]"&&(r%1!==0||dt.isNegativeZero(r))}o(p7,"isFloat");var d_=new It("tag:yaml.org,2002:float",{kind:"scalar",resolve:l7,construct:f7,predicate:p7,represent:d7,defaultStyle:"lowercase"}),p_=u_.extend({implicit:[l_,f_,h_,d_]}),m_=p_,g_=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),y_=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function m7(r){return r===null?!1:g_.exec(r)!==null||y_.exec(r)!==null}o(m7,"resolveYamlTimestamp");function g7(r){var e,t,i,n,s,a,c,u=0,f=null,l,h,p;if(e=g_.exec(r),e===null&&(e=y_.exec(r)),e===null)throw new Error("Date resolve error");if(t=+e[1],i=+e[2]-1,n=+e[3],!e[4])return new Date(Date.UTC(t,i,n));if(s=+e[4],a=+e[5],c=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(l=+e[10],h=+(e[11]||0),f=(l*60+h)*6e4,e[9]==="-"&&(f=-f)),p=new Date(Date.UTC(t,i,n,s,a,c,u)),f&&p.setTime(p.getTime()-f),p}o(g7,"constructYamlTimestamp");function y7(r){return r.toISOString()}o(y7,"representYamlTimestamp");var __=new It("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:m7,construct:g7,instanceOf:Date,represent:y7});function _7(r){return r==="<<"||r===null}o(_7,"resolveYamlMerge");var v_=new It("tag:yaml.org,2002:merge",{kind:"scalar",resolve:_7}),im=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function v7(r){if(r===null)return!1;var e,t,i=0,n=r.length,s=im;for(t=0;t<n;t++)if(e=s.indexOf(r.charAt(t)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}o(v7,"resolveYamlBinary");function S7(r){var e,t,i=r.replace(/[\r\n=]/g,""),n=i.length,s=im,a=0,c=[];for(e=0;e<n;e++)e%4===0&&e&&(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)),a=a<<6|s.indexOf(i.charAt(e));return t=n%4*6,t===0?(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)):t===18?(c.push(a>>10&255),c.push(a>>2&255)):t===12&&c.push(a>>4&255),new Uint8Array(c)}o(S7,"constructYamlBinary");function b7(r){var e="",t=0,i,n,s=r.length,a=im;for(i=0;i<s;i++)i%3===0&&i&&(e+=a[t>>18&63],e+=a[t>>12&63],e+=a[t>>6&63],e+=a[t&63]),t=(t<<8)+r[i];return n=s%3,n===0?(e+=a[t>>18&63],e+=a[t>>12&63],e+=a[t>>6&63],e+=a[t&63]):n===2?(e+=a[t>>10&63],e+=a[t>>4&63],e+=a[t<<2&63],e+=a[64]):n===1&&(e+=a[t>>2&63],e+=a[t<<4&63],e+=a[64],e+=a[64]),e}o(b7,"representYamlBinary");function w7(r){return Object.prototype.toString.call(r)==="[object Uint8Array]"}o(w7,"isBinary");var S_=new It("tag:yaml.org,2002:binary",{kind:"scalar",resolve:v7,construct:S7,predicate:w7,represent:b7}),E7=Object.prototype.hasOwnProperty,T7=Object.prototype.toString;function A7(r){if(r===null)return!0;var e=[],t,i,n,s,a,c=r;for(t=0,i=c.length;t<i;t+=1){if(n=c[t],a=!1,T7.call(n)!=="[object Object]")return!1;for(s in n)if(E7.call(n,s))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}o(A7,"resolveYamlOmap");function x7(r){return r!==null?r:[]}o(x7,"constructYamlOmap");var b_=new It("tag:yaml.org,2002:omap",{kind:"sequence",resolve:A7,construct:x7}),O7=Object.prototype.toString;function C7(r){if(r===null)return!0;var e,t,i,n,s,a=r;for(s=new Array(a.length),e=0,t=a.length;e<t;e+=1){if(i=a[e],O7.call(i)!=="[object Object]"||(n=Object.keys(i),n.length!==1))return!1;s[e]=[n[0],i[n[0]]]}return!0}o(C7,"resolveYamlPairs");function F7(r){if(r===null)return[];var e,t,i,n,s,a=r;for(s=new Array(a.length),e=0,t=a.length;e<t;e+=1)i=a[e],n=Object.keys(i),s[e]=[n[0],i[n[0]]];return s}o(F7,"constructYamlPairs");var w_=new It("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:C7,construct:F7}),P7=Object.prototype.hasOwnProperty;function I7(r){if(r===null)return!0;var e,t=r;for(e in t)if(P7.call(t,e)&&t[e]!==null)return!1;return!0}o(I7,"resolveYamlSet");function D7(r){return r!==null?r:{}}o(D7,"constructYamlSet");var E_=new It("tag:yaml.org,2002:set",{kind:"mapping",resolve:I7,construct:D7}),nm=m_.extend({implicit:[__,v_],explicit:[S_,b_,w_,E_]}),gn=Object.prototype.hasOwnProperty,zu=1,T_=2,A_=3,Ku=4,Jp=1,R7=2,$3=3,N7=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,k7=/[\x85\u2028\u2029]/,j7=/[,\[\]\{\}]/,x_=/^(?:!|!!|![a-z\-]+!)$/i,O_=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function G3(r){return Object.prototype.toString.call(r)}o(G3,"_class");function wi(r){return r===10||r===13}o(wi,"is_EOL");function Zn(r){return r===9||r===32}o(Zn,"is_WHITE_SPACE");function lr(r){return r===9||r===32||r===10||r===13}o(lr,"is_WS_OR_EOL");function $s(r){return r===44||r===91||r===93||r===123||r===125}o($s,"is_FLOW_INDICATOR");function M7(r){var e;return 48<=r&&r<=57?r-48:(e=r|32,97<=e&&e<=102?e-97+10:-1)}o(M7,"fromHexCode");function L7(r){return r===120?2:r===117?4:r===85?8:0}o(L7,"escapedHexLen");function V7(r){return 48<=r&&r<=57?r-48:-1}o(V7,"fromDecimalCode");function W3(r){return r===48?"\0":r===97?"\x07":r===98?"\b":r===116||r===9?"	":r===110?`
`:r===118?"\v":r===102?"\f":r===114?"\r":r===101?"\x1B":r===32?" ":r===34?'"':r===47?"/":r===92?"\\":r===78?"\x85":r===95?"\xA0":r===76?"\u2028":r===80?"\u2029":""}o(W3,"simpleEscapeSequence");function q7(r){return r<=65535?String.fromCharCode(r):String.fromCharCode((r-65536>>10)+55296,(r-65536&1023)+56320)}o(q7,"charFromCodepoint");var C_=new Array(256),F_=new Array(256);for(Xn=0;Xn<256;Xn++)C_[Xn]=W3(Xn)?1:0,F_[Xn]=W3(Xn);var Xn;function B7(r,e){this.input=r,this.filename=e.filename||null,this.schema=e.schema||nm,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=r.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}o(B7,"State$1");function P_(r,e){var t={name:r.filename,buffer:r.input.slice(0,-1),position:r.position,line:r.line,column:r.position-r.lineStart};return t.snippet=W9(t),new Zt(e,t)}o(P_,"generateError");function Y(r,e){throw P_(r,e)}o(Y,"throwError");function Yu(r,e){r.onWarning&&r.onWarning.call(null,P_(r,e))}o(Yu,"throwWarning");var H3={YAML:o(function(e,t,i){var n,s,a;e.version!==null&&Y(e,"duplication of %YAML directive"),i.length!==1&&Y(e,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),n===null&&Y(e,"ill-formed argument of the YAML directive"),s=parseInt(n[1],10),a=parseInt(n[2],10),s!==1&&Y(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&Yu(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:o(function(e,t,i){var n,s;i.length!==2&&Y(e,"TAG directive accepts exactly two arguments"),n=i[0],s=i[1],x_.test(n)||Y(e,"ill-formed tag handle (first argument) of the TAG directive"),gn.call(e.tagMap,n)&&Y(e,'there is a previously declared suffix for "'+n+'" tag handle'),O_.test(s)||Y(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{Y(e,"tag prefix is malformed: "+s)}e.tagMap[n]=s},"handleTagDirective")};function mn(r,e,t,i){var n,s,a,c;if(e<t){if(c=r.input.slice(e,t),i)for(n=0,s=c.length;n<s;n+=1)a=c.charCodeAt(n),a===9||32<=a&&a<=1114111||Y(r,"expected valid JSON character");else N7.test(c)&&Y(r,"the stream contains non-printable characters");r.result+=c}}o(mn,"captureSegment");function z3(r,e,t,i){var n,s,a,c;for(dt.isObject(t)||Y(r,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(t),a=0,c=n.length;a<c;a+=1)s=n[a],gn.call(e,s)||(e[s]=t[s],i[s]=!0)}o(z3,"mergeMappings");function Gs(r,e,t,i,n,s,a,c,u){var f,l;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),f=0,l=n.length;f<l;f+=1)Array.isArray(n[f])&&Y(r,"nested arrays are not supported inside keys"),typeof n=="object"&&G3(n[f])==="[object Object]"&&(n[f]="[object Object]");if(typeof n=="object"&&G3(n)==="[object Object]"&&(n="[object Object]"),n=String(n),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(f=0,l=s.length;f<l;f+=1)z3(r,e,s[f],t);else z3(r,e,s,t);else!r.json&&!gn.call(t,n)&&gn.call(e,n)&&(r.line=a||r.line,r.lineStart=c||r.lineStart,r.position=u||r.position,Y(r,"duplicated mapping key")),n==="__proto__"?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[n]=s,delete t[n];return e}o(Gs,"storeMappingPair");function sm(r){var e;e=r.input.charCodeAt(r.position),e===10?r.position++:e===13?(r.position++,r.input.charCodeAt(r.position)===10&&r.position++):Y(r,"a line break is expected"),r.line+=1,r.lineStart=r.position,r.firstTabInLine=-1}o(sm,"readLineBreak");function ht(r,e,t){for(var i=0,n=r.input.charCodeAt(r.position);n!==0;){for(;Zn(n);)n===9&&r.firstTabInLine===-1&&(r.firstTabInLine=r.position),n=r.input.charCodeAt(++r.position);if(e&&n===35)do n=r.input.charCodeAt(++r.position);while(n!==10&&n!==13&&n!==0);if(wi(n))for(sm(r),n=r.input.charCodeAt(r.position),i++,r.lineIndent=0;n===32;)r.lineIndent++,n=r.input.charCodeAt(++r.position);else break}return t!==-1&&i!==0&&r.lineIndent<t&&Yu(r,"deficient indentation"),i}o(ht,"skipSeparationSpace");function Xu(r){var e=r.position,t;return t=r.input.charCodeAt(e),!!((t===45||t===46)&&t===r.input.charCodeAt(e+1)&&t===r.input.charCodeAt(e+2)&&(e+=3,t=r.input.charCodeAt(e),t===0||lr(t)))}o(Xu,"testDocumentSeparator");function am(r,e){e===1?r.result+=" ":e>1&&(r.result+=dt.repeat(`
`,e-1))}o(am,"writeFoldedLines");function U7(r,e,t){var i,n,s,a,c,u,f,l,h=r.kind,p=r.result,g;if(g=r.input.charCodeAt(r.position),lr(g)||$s(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(n=r.input.charCodeAt(r.position+1),lr(n)||t&&$s(n)))return!1;for(r.kind="scalar",r.result="",s=a=r.position,c=!1;g!==0;){if(g===58){if(n=r.input.charCodeAt(r.position+1),lr(n)||t&&$s(n))break}else if(g===35){if(i=r.input.charCodeAt(r.position-1),lr(i))break}else{if(r.position===r.lineStart&&Xu(r)||t&&$s(g))break;if(wi(g))if(u=r.line,f=r.lineStart,l=r.lineIndent,ht(r,!1,-1),r.lineIndent>=e){c=!0,g=r.input.charCodeAt(r.position);continue}else{r.position=a,r.line=u,r.lineStart=f,r.lineIndent=l;break}}c&&(mn(r,s,a,!1),am(r,r.line-u),s=a=r.position,c=!1),Zn(g)||(a=r.position+1),g=r.input.charCodeAt(++r.position)}return mn(r,s,a,!1),r.result?!0:(r.kind=h,r.result=p,!1)}o(U7,"readPlainScalar");function $7(r,e){var t,i,n;if(t=r.input.charCodeAt(r.position),t!==39)return!1;for(r.kind="scalar",r.result="",r.position++,i=n=r.position;(t=r.input.charCodeAt(r.position))!==0;)if(t===39)if(mn(r,i,r.position,!0),t=r.input.charCodeAt(++r.position),t===39)i=r.position,r.position++,n=r.position;else return!0;else wi(t)?(mn(r,i,n,!0),am(r,ht(r,!1,e)),i=n=r.position):r.position===r.lineStart&&Xu(r)?Y(r,"unexpected end of the document within a single quoted scalar"):(r.position++,n=r.position);Y(r,"unexpected end of the stream within a single quoted scalar")}o($7,"readSingleQuotedScalar");function G7(r,e){var t,i,n,s,a,c;if(c=r.input.charCodeAt(r.position),c!==34)return!1;for(r.kind="scalar",r.result="",r.position++,t=i=r.position;(c=r.input.charCodeAt(r.position))!==0;){if(c===34)return mn(r,t,r.position,!0),r.position++,!0;if(c===92){if(mn(r,t,r.position,!0),c=r.input.charCodeAt(++r.position),wi(c))ht(r,!1,e);else if(c<256&&C_[c])r.result+=F_[c],r.position++;else if((a=L7(c))>0){for(n=a,s=0;n>0;n--)c=r.input.charCodeAt(++r.position),(a=M7(c))>=0?s=(s<<4)+a:Y(r,"expected hexadecimal character");r.result+=q7(s),r.position++}else Y(r,"unknown escape sequence");t=i=r.position}else wi(c)?(mn(r,t,i,!0),am(r,ht(r,!1,e)),t=i=r.position):r.position===r.lineStart&&Xu(r)?Y(r,"unexpected end of the document within a double quoted scalar"):(r.position++,i=r.position)}Y(r,"unexpected end of the stream within a double quoted scalar")}o(G7,"readDoubleQuotedScalar");function W7(r,e){var t=!0,i,n,s,a=r.tag,c,u=r.anchor,f,l,h,p,g,S=Object.create(null),b,x,F,P;if(P=r.input.charCodeAt(r.position),P===91)l=93,g=!1,c=[];else if(P===123)l=125,g=!0,c={};else return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=c),P=r.input.charCodeAt(++r.position);P!==0;){if(ht(r,!0,e),P=r.input.charCodeAt(r.position),P===l)return r.position++,r.tag=a,r.anchor=u,r.kind=g?"mapping":"sequence",r.result=c,!0;t?P===44&&Y(r,"expected the node content, but found ','"):Y(r,"missed comma between flow collection entries"),x=b=F=null,h=p=!1,P===63&&(f=r.input.charCodeAt(r.position+1),lr(f)&&(h=p=!0,r.position++,ht(r,!0,e))),i=r.line,n=r.lineStart,s=r.position,Ws(r,e,zu,!1,!0),x=r.tag,b=r.result,ht(r,!0,e),P=r.input.charCodeAt(r.position),(p||r.line===i)&&P===58&&(h=!0,P=r.input.charCodeAt(++r.position),ht(r,!0,e),Ws(r,e,zu,!1,!0),F=r.result),g?Gs(r,c,S,x,b,F,i,n,s):h?c.push(Gs(r,null,S,x,b,F,i,n,s)):c.push(b),ht(r,!0,e),P=r.input.charCodeAt(r.position),P===44?(t=!0,P=r.input.charCodeAt(++r.position)):t=!1}Y(r,"unexpected end of the stream within a flow collection")}o(W7,"readFlowCollection");function H7(r,e){var t,i,n=Jp,s=!1,a=!1,c=e,u=0,f=!1,l,h;if(h=r.input.charCodeAt(r.position),h===124)i=!1;else if(h===62)i=!0;else return!1;for(r.kind="scalar",r.result="";h!==0;)if(h=r.input.charCodeAt(++r.position),h===43||h===45)Jp===n?n=h===43?$3:R7:Y(r,"repeat of a chomping mode identifier");else if((l=V7(h))>=0)l===0?Y(r,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?Y(r,"repeat of an indentation width identifier"):(c=e+l-1,a=!0);else break;if(Zn(h)){do h=r.input.charCodeAt(++r.position);while(Zn(h));if(h===35)do h=r.input.charCodeAt(++r.position);while(!wi(h)&&h!==0)}for(;h!==0;){for(sm(r),r.lineIndent=0,h=r.input.charCodeAt(r.position);(!a||r.lineIndent<c)&&h===32;)r.lineIndent++,h=r.input.charCodeAt(++r.position);if(!a&&r.lineIndent>c&&(c=r.lineIndent),wi(h)){u++;continue}if(r.lineIndent<c){n===$3?r.result+=dt.repeat(`
`,s?1+u:u):n===Jp&&s&&(r.result+=`
`);break}for(i?Zn(h)?(f=!0,r.result+=dt.repeat(`
`,s?1+u:u)):f?(f=!1,r.result+=dt.repeat(`
`,u+1)):u===0?s&&(r.result+=" "):r.result+=dt.repeat(`
`,u):r.result+=dt.repeat(`
`,s?1+u:u),s=!0,a=!0,u=0,t=r.position;!wi(h)&&h!==0;)h=r.input.charCodeAt(++r.position);mn(r,t,r.position,!1)}return!0}o(H7,"readBlockScalar");function K3(r,e){var t,i=r.tag,n=r.anchor,s=[],a,c=!1,u;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=s),u=r.input.charCodeAt(r.position);u!==0&&(r.firstTabInLine!==-1&&(r.position=r.firstTabInLine,Y(r,"tab characters must not be used in indentation")),!(u!==45||(a=r.input.charCodeAt(r.position+1),!lr(a))));){if(c=!0,r.position++,ht(r,!0,-1)&&r.lineIndent<=e){s.push(null),u=r.input.charCodeAt(r.position);continue}if(t=r.line,Ws(r,e,A_,!1,!0),s.push(r.result),ht(r,!0,-1),u=r.input.charCodeAt(r.position),(r.line===t||r.lineIndent>e)&&u!==0)Y(r,"bad indentation of a sequence entry");else if(r.lineIndent<e)break}return c?(r.tag=i,r.anchor=n,r.kind="sequence",r.result=s,!0):!1}o(K3,"readBlockSequence");function z7(r,e,t){var i,n,s,a,c,u,f=r.tag,l=r.anchor,h={},p=Object.create(null),g=null,S=null,b=null,x=!1,F=!1,P;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=h),P=r.input.charCodeAt(r.position);P!==0;){if(!x&&r.firstTabInLine!==-1&&(r.position=r.firstTabInLine,Y(r,"tab characters must not be used in indentation")),i=r.input.charCodeAt(r.position+1),s=r.line,(P===63||P===58)&&lr(i))P===63?(x&&(Gs(r,h,p,g,S,null,a,c,u),g=S=b=null),F=!0,x=!0,n=!0):x?(x=!1,n=!0):Y(r,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),r.position+=1,P=i;else{if(a=r.line,c=r.lineStart,u=r.position,!Ws(r,t,T_,!1,!0))break;if(r.line===s){for(P=r.input.charCodeAt(r.position);Zn(P);)P=r.input.charCodeAt(++r.position);if(P===58)P=r.input.charCodeAt(++r.position),lr(P)||Y(r,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(Gs(r,h,p,g,S,null,a,c,u),g=S=b=null),F=!0,x=!1,n=!1,g=r.tag,S=r.result;else if(F)Y(r,"can not read an implicit mapping pair; a colon is missed");else return r.tag=f,r.anchor=l,!0}else if(F)Y(r,"can not read a block mapping entry; a multiline key may not be an implicit key");else return r.tag=f,r.anchor=l,!0}if((r.line===s||r.lineIndent>e)&&(x&&(a=r.line,c=r.lineStart,u=r.position),Ws(r,e,Ku,!0,n)&&(x?S=r.result:b=r.result),x||(Gs(r,h,p,g,S,b,a,c,u),g=S=b=null),ht(r,!0,-1),P=r.input.charCodeAt(r.position)),(r.line===s||r.lineIndent>e)&&P!==0)Y(r,"bad indentation of a mapping entry");else if(r.lineIndent<e)break}return x&&Gs(r,h,p,g,S,null,a,c,u),F&&(r.tag=f,r.anchor=l,r.kind="mapping",r.result=h),F}o(z7,"readBlockMapping");function K7(r){var e,t=!1,i=!1,n,s,a;if(a=r.input.charCodeAt(r.position),a!==33)return!1;if(r.tag!==null&&Y(r,"duplication of a tag property"),a=r.input.charCodeAt(++r.position),a===60?(t=!0,a=r.input.charCodeAt(++r.position)):a===33?(i=!0,n="!!",a=r.input.charCodeAt(++r.position)):n="!",e=r.position,t){do a=r.input.charCodeAt(++r.position);while(a!==0&&a!==62);r.position<r.length?(s=r.input.slice(e,r.position),a=r.input.charCodeAt(++r.position)):Y(r,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!lr(a);)a===33&&(i?Y(r,"tag suffix cannot contain exclamation marks"):(n=r.input.slice(e-1,r.position+1),x_.test(n)||Y(r,"named tag handle cannot contain such characters"),i=!0,e=r.position+1)),a=r.input.charCodeAt(++r.position);s=r.input.slice(e,r.position),j7.test(s)&&Y(r,"tag suffix cannot contain flow indicator characters")}s&&!O_.test(s)&&Y(r,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{Y(r,"tag name is malformed: "+s)}return t?r.tag=s:gn.call(r.tagMap,n)?r.tag=r.tagMap[n]+s:n==="!"?r.tag="!"+s:n==="!!"?r.tag="tag:yaml.org,2002:"+s:Y(r,'undeclared tag handle "'+n+'"'),!0}o(K7,"readTagProperty");function Y7(r){var e,t;if(t=r.input.charCodeAt(r.position),t!==38)return!1;for(r.anchor!==null&&Y(r,"duplication of an anchor property"),t=r.input.charCodeAt(++r.position),e=r.position;t!==0&&!lr(t)&&!$s(t);)t=r.input.charCodeAt(++r.position);return r.position===e&&Y(r,"name of an anchor node must contain at least one character"),r.anchor=r.input.slice(e,r.position),!0}o(Y7,"readAnchorProperty");function Q7(r){var e,t,i;if(i=r.input.charCodeAt(r.position),i!==42)return!1;for(i=r.input.charCodeAt(++r.position),e=r.position;i!==0&&!lr(i)&&!$s(i);)i=r.input.charCodeAt(++r.position);return r.position===e&&Y(r,"name of an alias node must contain at least one character"),t=r.input.slice(e,r.position),gn.call(r.anchorMap,t)||Y(r,'unidentified alias "'+t+'"'),r.result=r.anchorMap[t],ht(r,!0,-1),!0}o(Q7,"readAlias");function Ws(r,e,t,i,n){var s,a,c,u=1,f=!1,l=!1,h,p,g,S,b,x;if(r.listener!==null&&r.listener("open",r),r.tag=null,r.anchor=null,r.kind=null,r.result=null,s=a=c=Ku===t||A_===t,i&&ht(r,!0,-1)&&(f=!0,r.lineIndent>e?u=1:r.lineIndent===e?u=0:r.lineIndent<e&&(u=-1)),u===1)for(;K7(r)||Y7(r);)ht(r,!0,-1)?(f=!0,c=s,r.lineIndent>e?u=1:r.lineIndent===e?u=0:r.lineIndent<e&&(u=-1)):c=!1;if(c&&(c=f||n),(u===1||Ku===t)&&(zu===t||T_===t?b=e:b=e+1,x=r.position-r.lineStart,u===1?c&&(K3(r,x)||z7(r,x,b))||W7(r,b)?l=!0:(a&&H7(r,b)||$7(r,b)||G7(r,b)?l=!0:Q7(r)?(l=!0,(r.tag!==null||r.anchor!==null)&&Y(r,"alias node should not have any properties")):U7(r,b,zu===t)&&(l=!0,r.tag===null&&(r.tag="?")),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):u===0&&(l=c&&K3(r,x))),r.tag===null)r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);else if(r.tag==="?"){for(r.result!==null&&r.kind!=="scalar"&&Y(r,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+r.kind+'"'),h=0,p=r.implicitTypes.length;h<p;h+=1)if(S=r.implicitTypes[h],S.resolve(r.result)){r.result=S.construct(r.result),r.tag=S.tag,r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);break}}else if(r.tag!=="!"){if(gn.call(r.typeMap[r.kind||"fallback"],r.tag))S=r.typeMap[r.kind||"fallback"][r.tag];else for(S=null,g=r.typeMap.multi[r.kind||"fallback"],h=0,p=g.length;h<p;h+=1)if(r.tag.slice(0,g[h].tag.length)===g[h].tag){S=g[h];break}S||Y(r,"unknown tag !<"+r.tag+">"),r.result!==null&&S.kind!==r.kind&&Y(r,"unacceptable node kind for !<"+r.tag+'> tag; it should be "'+S.kind+'", not "'+r.kind+'"'),S.resolve(r.result,r.tag)?(r.result=S.construct(r.result,r.tag),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):Y(r,"cannot resolve a node with !<"+r.tag+"> explicit tag")}return r.listener!==null&&r.listener("close",r),r.tag!==null||r.anchor!==null||l}o(Ws,"composeNode");function J7(r){var e=r.position,t,i,n,s=!1,a;for(r.version=null,r.checkLineBreaks=r.legacy,r.tagMap=Object.create(null),r.anchorMap=Object.create(null);(a=r.input.charCodeAt(r.position))!==0&&(ht(r,!0,-1),a=r.input.charCodeAt(r.position),!(r.lineIndent>0||a!==37));){for(s=!0,a=r.input.charCodeAt(++r.position),t=r.position;a!==0&&!lr(a);)a=r.input.charCodeAt(++r.position);for(i=r.input.slice(t,r.position),n=[],i.length<1&&Y(r,"directive name must not be less than one character in length");a!==0;){for(;Zn(a);)a=r.input.charCodeAt(++r.position);if(a===35){do a=r.input.charCodeAt(++r.position);while(a!==0&&!wi(a));break}if(wi(a))break;for(t=r.position;a!==0&&!lr(a);)a=r.input.charCodeAt(++r.position);n.push(r.input.slice(t,r.position))}a!==0&&sm(r),gn.call(H3,i)?H3[i](r,i,n):Yu(r,'unknown document directive "'+i+'"')}if(ht(r,!0,-1),r.lineIndent===0&&r.input.charCodeAt(r.position)===45&&r.input.charCodeAt(r.position+1)===45&&r.input.charCodeAt(r.position+2)===45?(r.position+=3,ht(r,!0,-1)):s&&Y(r,"directives end mark is expected"),Ws(r,r.lineIndent-1,Ku,!1,!0),ht(r,!0,-1),r.checkLineBreaks&&k7.test(r.input.slice(e,r.position))&&Yu(r,"non-ASCII line breaks are interpreted as content"),r.documents.push(r.result),r.position===r.lineStart&&Xu(r)){r.input.charCodeAt(r.position)===46&&(r.position+=3,ht(r,!0,-1));return}if(r.position<r.length-1)Y(r,"end of the stream or a document separator is expected");else return}o(J7,"readDocument");function I_(r,e){r=String(r),e=e||{},r.length!==0&&(r.charCodeAt(r.length-1)!==10&&r.charCodeAt(r.length-1)!==13&&(r+=`
`),r.charCodeAt(0)===65279&&(r=r.slice(1)));var t=new B7(r,e),i=r.indexOf("\0");for(i!==-1&&(t.position=i,Y(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)J7(t);return t.documents}o(I_,"loadDocuments");function X7(r,e,t){e!==null&&typeof e=="object"&&typeof t>"u"&&(t=e,e=null);var i=I_(r,t);if(typeof e!="function")return i;for(var n=0,s=i.length;n<s;n+=1)e(i[n])}o(X7,"loadAll$1");function Z7(r,e){var t=I_(r,e);if(t.length!==0){if(t.length===1)return t[0];throw new Zt("expected a single document in the stream, but found more")}}o(Z7,"load$1");var e6=X7,t6=Z7,D_={loadAll:e6,load:t6},R_=Object.prototype.toString,N_=Object.prototype.hasOwnProperty,om=65279,r6=9,Xa=10,i6=13,n6=32,s6=33,a6=34,Zp=35,o6=37,c6=38,u6=39,l6=42,k_=44,f6=45,Qu=58,h6=61,d6=62,p6=63,m6=64,j_=91,M_=93,g6=96,L_=123,y6=124,V_=125,Mt={};Mt[0]="\\0";Mt[7]="\\a";Mt[8]="\\b";Mt[9]="\\t";Mt[10]="\\n";Mt[11]="\\v";Mt[12]="\\f";Mt[13]="\\r";Mt[27]="\\e";Mt[34]='\\"';Mt[92]="\\\\";Mt[133]="\\N";Mt[160]="\\_";Mt[8232]="\\L";Mt[8233]="\\P";var _6=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],v6=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function S6(r,e){var t,i,n,s,a,c,u;if(e===null)return{};for(t={},i=Object.keys(e),n=0,s=i.length;n<s;n+=1)a=i[n],c=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),u=r.compiledTypeMap.fallback[a],u&&N_.call(u.styleAliases,c)&&(c=u.styleAliases[c]),t[a]=c;return t}o(S6,"compileStyleMap");function b6(r){var e,t,i;if(e=r.toString(16).toUpperCase(),r<=255)t="x",i=2;else if(r<=65535)t="u",i=4;else if(r<=4294967295)t="U",i=8;else throw new Zt("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+dt.repeat("0",i-e.length)+e}o(b6,"encodeHex");var w6=1,Za=2;function E6(r){this.schema=r.schema||nm,this.indent=Math.max(1,r.indent||2),this.noArrayIndent=r.noArrayIndent||!1,this.skipInvalid=r.skipInvalid||!1,this.flowLevel=dt.isNothing(r.flowLevel)?-1:r.flowLevel,this.styleMap=S6(this.schema,r.styles||null),this.sortKeys=r.sortKeys||!1,this.lineWidth=r.lineWidth||80,this.noRefs=r.noRefs||!1,this.noCompatMode=r.noCompatMode||!1,this.condenseFlow=r.condenseFlow||!1,this.quotingType=r.quotingType==='"'?Za:w6,this.forceQuotes=r.forceQuotes||!1,this.replacer=typeof r.replacer=="function"?r.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}o(E6,"State");function Y3(r,e){for(var t=dt.repeat(" ",e),i=0,n=-1,s="",a,c=r.length;i<c;)n=r.indexOf(`
`,i),n===-1?(a=r.slice(i),i=c):(a=r.slice(i,n+1),i=n+1),a.length&&a!==`
`&&(s+=t),s+=a;return s}o(Y3,"indentString");function em(r,e){return`
`+dt.repeat(" ",r.indent*e)}o(em,"generateNextLine");function T6(r,e){var t,i,n;for(t=0,i=r.implicitTypes.length;t<i;t+=1)if(n=r.implicitTypes[t],n.resolve(e))return!0;return!1}o(T6,"testImplicitResolving");function Ju(r){return r===n6||r===r6}o(Ju,"isWhitespace");function eo(r){return 32<=r&&r<=126||161<=r&&r<=55295&&r!==8232&&r!==8233||57344<=r&&r<=65533&&r!==om||65536<=r&&r<=1114111}o(eo,"isPrintable");function Q3(r){return eo(r)&&r!==om&&r!==i6&&r!==Xa}o(Q3,"isNsCharOrWhitespace");function J3(r,e,t){var i=Q3(r),n=i&&!Ju(r);return(t?i:i&&r!==k_&&r!==j_&&r!==M_&&r!==L_&&r!==V_)&&r!==Zp&&!(e===Qu&&!n)||Q3(e)&&!Ju(e)&&r===Zp||e===Qu&&n}o(J3,"isPlainSafe");function A6(r){return eo(r)&&r!==om&&!Ju(r)&&r!==f6&&r!==p6&&r!==Qu&&r!==k_&&r!==j_&&r!==M_&&r!==L_&&r!==V_&&r!==Zp&&r!==c6&&r!==l6&&r!==s6&&r!==y6&&r!==h6&&r!==d6&&r!==u6&&r!==a6&&r!==o6&&r!==m6&&r!==g6}o(A6,"isPlainSafeFirst");function x6(r){return!Ju(r)&&r!==Qu}o(x6,"isPlainSafeLast");function Qa(r,e){var t=r.charCodeAt(e),i;return t>=55296&&t<=56319&&e+1<r.length&&(i=r.charCodeAt(e+1),i>=56320&&i<=57343)?(t-55296)*1024+i-56320+65536:t}o(Qa,"codePointAt");function q_(r){var e=/^\n* /;return e.test(r)}o(q_,"needIndentIndicator");var B_=1,tm=2,U_=3,$_=4,Us=5;function O6(r,e,t,i,n,s,a,c){var u,f=0,l=null,h=!1,p=!1,g=i!==-1,S=-1,b=A6(Qa(r,0))&&x6(Qa(r,r.length-1));if(e||a)for(u=0;u<r.length;f>=65536?u+=2:u++){if(f=Qa(r,u),!eo(f))return Us;b=b&&J3(f,l,c),l=f}else{for(u=0;u<r.length;f>=65536?u+=2:u++){if(f=Qa(r,u),f===Xa)h=!0,g&&(p=p||u-S-1>i&&r[S+1]!==" ",S=u);else if(!eo(f))return Us;b=b&&J3(f,l,c),l=f}p=p||g&&u-S-1>i&&r[S+1]!==" "}return!h&&!p?b&&!a&&!n(r)?B_:s===Za?Us:tm:t>9&&q_(r)?Us:a?s===Za?Us:tm:p?$_:U_}o(O6,"chooseScalarStyle");function C6(r,e,t,i,n){r.dump=(function(){if(e.length===0)return r.quotingType===Za?'""':"''";if(!r.noCompatMode&&(_6.indexOf(e)!==-1||v6.test(e)))return r.quotingType===Za?'"'+e+'"':"'"+e+"'";var s=r.indent*Math.max(1,t),a=r.lineWidth===-1?-1:Math.max(Math.min(r.lineWidth,40),r.lineWidth-s),c=i||r.flowLevel>-1&&t>=r.flowLevel;function u(f){return T6(r,f)}switch(o(u,"testAmbiguity"),O6(e,c,r.indent,a,u,r.quotingType,r.forceQuotes&&!i,n)){case B_:return e;case tm:return"'"+e.replace(/'/g,"''")+"'";case U_:return"|"+X3(e,r.indent)+Z3(Y3(e,s));case $_:return">"+X3(e,r.indent)+Z3(Y3(F6(e,a),s));case Us:return'"'+P6(e)+'"';default:throw new Zt("impossible error: invalid scalar style")}})()}o(C6,"writeScalar");function X3(r,e){var t=q_(r)?String(e):"",i=r[r.length-1]===`
`,n=i&&(r[r.length-2]===`
`||r===`
`),s=n?"+":i?"":"-";return t+s+`
`}o(X3,"blockHeader");function Z3(r){return r[r.length-1]===`
`?r.slice(0,-1):r}o(Z3,"dropEndingNewline");function F6(r,e){for(var t=/(\n+)([^\n]*)/g,i=(function(){var f=r.indexOf(`
`);return f=f!==-1?f:r.length,t.lastIndex=f,e_(r.slice(0,f),e)})(),n=r[0]===`
`||r[0]===" ",s,a;a=t.exec(r);){var c=a[1],u=a[2];s=u[0]===" ",i+=c+(!n&&!s&&u!==""?`
`:"")+e_(u,e),n=s}return i}o(F6,"foldString");function e_(r,e){if(r===""||r[0]===" ")return r;for(var t=/ [^ ]/g,i,n=0,s,a=0,c=0,u="";i=t.exec(r);)c=i.index,c-n>e&&(s=a>n?a:c,u+=`
`+r.slice(n,s),n=s+1),a=c;return u+=`
`,r.length-n>e&&a>n?u+=r.slice(n,a)+`
`+r.slice(a+1):u+=r.slice(n),u.slice(1)}o(e_,"foldLine");function P6(r){for(var e="",t=0,i,n=0;n<r.length;t>=65536?n+=2:n++)t=Qa(r,n),i=Mt[t],!i&&eo(t)?(e+=r[n],t>=65536&&(e+=r[n+1])):e+=i||b6(t);return e}o(P6,"escapeString");function I6(r,e,t){var i="",n=r.tag,s,a,c;for(s=0,a=t.length;s<a;s+=1)c=t[s],r.replacer&&(c=r.replacer.call(t,String(s),c)),(Wi(r,e,c,!1,!1)||typeof c>"u"&&Wi(r,e,null,!1,!1))&&(i!==""&&(i+=","+(r.condenseFlow?"":" ")),i+=r.dump);r.tag=n,r.dump="["+i+"]"}o(I6,"writeFlowSequence");function t_(r,e,t,i){var n="",s=r.tag,a,c,u;for(a=0,c=t.length;a<c;a+=1)u=t[a],r.replacer&&(u=r.replacer.call(t,String(a),u)),(Wi(r,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&Wi(r,e+1,null,!0,!0,!1,!0))&&((!i||n!=="")&&(n+=em(r,e)),r.dump&&Xa===r.dump.charCodeAt(0)?n+="-":n+="- ",n+=r.dump);r.tag=s,r.dump=n||"[]"}o(t_,"writeBlockSequence");function D6(r,e,t){var i="",n=r.tag,s=Object.keys(t),a,c,u,f,l;for(a=0,c=s.length;a<c;a+=1)l="",i!==""&&(l+=", "),r.condenseFlow&&(l+='"'),u=s[a],f=t[u],r.replacer&&(f=r.replacer.call(t,u,f)),Wi(r,e,u,!1,!1)&&(r.dump.length>1024&&(l+="? "),l+=r.dump+(r.condenseFlow?'"':"")+":"+(r.condenseFlow?"":" "),Wi(r,e,f,!1,!1)&&(l+=r.dump,i+=l));r.tag=n,r.dump="{"+i+"}"}o(D6,"writeFlowMapping");function R6(r,e,t,i){var n="",s=r.tag,a=Object.keys(t),c,u,f,l,h,p;if(r.sortKeys===!0)a.sort();else if(typeof r.sortKeys=="function")a.sort(r.sortKeys);else if(r.sortKeys)throw new Zt("sortKeys must be a boolean or a function");for(c=0,u=a.length;c<u;c+=1)p="",(!i||n!=="")&&(p+=em(r,e)),f=a[c],l=t[f],r.replacer&&(l=r.replacer.call(t,f,l)),Wi(r,e+1,f,!0,!0,!0)&&(h=r.tag!==null&&r.tag!=="?"||r.dump&&r.dump.length>1024,h&&(r.dump&&Xa===r.dump.charCodeAt(0)?p+="?":p+="? "),p+=r.dump,h&&(p+=em(r,e)),Wi(r,e+1,l,!0,h)&&(r.dump&&Xa===r.dump.charCodeAt(0)?p+=":":p+=": ",p+=r.dump,n+=p));r.tag=s,r.dump=n||"{}"}o(R6,"writeBlockMapping");function r_(r,e,t){var i,n,s,a,c,u;for(n=t?r.explicitTypes:r.implicitTypes,s=0,a=n.length;s<a;s+=1)if(c=n[s],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof e=="object"&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(t?c.multi&&c.representName?r.tag=c.representName(e):r.tag=c.tag:r.tag="?",c.represent){if(u=r.styleMap[c.tag]||c.defaultStyle,R_.call(c.represent)==="[object Function]")i=c.represent(e,u);else if(N_.call(c.represent,u))i=c.represent[u](e,u);else throw new Zt("!<"+c.tag+'> tag resolver accepts not "'+u+'" style');r.dump=i}return!0}return!1}o(r_,"detectType");function Wi(r,e,t,i,n,s,a){r.tag=null,r.dump=t,r_(r,t,!1)||r_(r,t,!0);var c=R_.call(r.dump),u=i,f;i&&(i=r.flowLevel<0||r.flowLevel>e);var l=c==="[object Object]"||c==="[object Array]",h,p;if(l&&(h=r.duplicates.indexOf(t),p=h!==-1),(r.tag!==null&&r.tag!=="?"||p||r.indent!==2&&e>0)&&(n=!1),p&&r.usedDuplicates[h])r.dump="*ref_"+h;else{if(l&&p&&!r.usedDuplicates[h]&&(r.usedDuplicates[h]=!0),c==="[object Object]")i&&Object.keys(r.dump).length!==0?(R6(r,e,r.dump,n),p&&(r.dump="&ref_"+h+r.dump)):(D6(r,e,r.dump),p&&(r.dump="&ref_"+h+" "+r.dump));else if(c==="[object Array]")i&&r.dump.length!==0?(r.noArrayIndent&&!a&&e>0?t_(r,e-1,r.dump,n):t_(r,e,r.dump,n),p&&(r.dump="&ref_"+h+r.dump)):(I6(r,e,r.dump),p&&(r.dump="&ref_"+h+" "+r.dump));else if(c==="[object String]")r.tag!=="?"&&C6(r,r.dump,e,s,u);else{if(c==="[object Undefined]")return!1;if(r.skipInvalid)return!1;throw new Zt("unacceptable kind of an object to dump "+c)}r.tag!==null&&r.tag!=="?"&&(f=encodeURI(r.tag[0]==="!"?r.tag.slice(1):r.tag).replace(/!/g,"%21"),r.tag[0]==="!"?f="!"+f:f.slice(0,18)==="tag:yaml.org,2002:"?f="!!"+f.slice(18):f="!<"+f+">",r.dump=f+" "+r.dump)}return!0}o(Wi,"writeNode");function N6(r,e){var t=[],i=[],n,s;for(rm(r,t,i),n=0,s=i.length;n<s;n+=1)e.duplicates.push(t[i[n]]);e.usedDuplicates=new Array(s)}o(N6,"getDuplicateReferences");function rm(r,e,t){var i,n,s;if(r!==null&&typeof r=="object")if(n=e.indexOf(r),n!==-1)t.indexOf(n)===-1&&t.push(n);else if(e.push(r),Array.isArray(r))for(n=0,s=r.length;n<s;n+=1)rm(r[n],e,t);else for(i=Object.keys(r),n=0,s=i.length;n<s;n+=1)rm(r[i[n]],e,t)}o(rm,"inspectNode");function k6(r,e){e=e||{};var t=new E6(e);t.noRefs||N6(r,t);var i=r;return t.replacer&&(i=t.replacer.call({"":i},"",i)),Wi(t,0,i,!0,!0)?t.dump+`
`:""}o(k6,"dump$1");var j6=k6,M6={dump:j6};function cm(r,e){return function(){throw new Error("Function yaml."+r+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}o(cm,"renamed");var L6=It,V6=s_,q6=u_,B6=p_,U6=m_,$6=nm,G6=D_.load,W6=D_.loadAll,H6=M6.dump,z6=Zt,K6={binary:S_,float:d_,map:c_,null:l_,pairs:w_,set:E_,timestamp:__,bool:f_,int:h_,merge:v_,omap:b_,seq:o_,str:a_},Y6=cm("safeLoad","load"),Q6=cm("safeLoadAll","loadAll"),J6=cm("safeDump","dump"),X6={Type:L6,Schema:V6,FAILSAFE_SCHEMA:q6,JSON_SCHEMA:B6,CORE_SCHEMA:U6,DEFAULT_SCHEMA:$6,load:G6,loadAll:W6,dump:H6,YAMLException:z6,types:K6,safeLoad:Y6,safeLoadAll:Q6,safeDump:J6},to=X6;var Zu=class{constructor(e){this.rootPath=e}static{o(this,"FileSystemVaultAdapter")}async read(e){let t=this.resolvePath(e.path);if(!await pt.default.pathExists(t))throw new Error(`File not found: ${e.path}`);return pt.default.readFile(t,"utf-8")}async create(e,t){let i=this.resolvePath(e);if(await pt.default.pathExists(i))throw new Error(`File already exists: ${e}`);return await pt.default.ensureDir(Lt.default.dirname(i)),await pt.default.writeFile(i,t,"utf-8"),this.createFileObject(e)}async modify(e,t){let i=this.resolvePath(e.path);if(!await pt.default.pathExists(i))throw new Error(`File not found: ${e.path}`);await pt.default.writeFile(i,t,"utf-8")}async delete(e){let t=this.resolvePath(e.path);if(!await pt.default.pathExists(t))throw new Error(`File not found: ${e.path}`);await pt.default.remove(t)}async exists(e){let t=this.resolvePath(e);return pt.default.pathExists(t)}getAbstractFileByPath(e){let t=this.resolvePath(e);try{let i=pt.default.statSync(t);if(i.isFile())return this.createFileObject(e);if(i.isDirectory())return this.createFolderObject(e)}catch{return null}return null}getAllFiles(){let e=[];return this.walkDirectory(this.rootPath,t=>{if(t.endsWith(".md")){let i=Lt.default.relative(this.rootPath,t);e.push(this.createFileObject(i))}}),e}getFrontmatter(e){try{let t=pt.default.readFileSync(this.resolvePath(e.path),"utf-8");return this.extractFrontmatter(t)}catch{return null}}async updateFrontmatter(e,t){let i=await this.read(e),n=this.extractFrontmatter(i)||{},s=t(n),a=this.replaceFrontmatter(i,s);await this.modify(e,a)}async rename(e,t){let i=this.resolvePath(e.path),n=this.resolvePath(t);if(!await pt.default.pathExists(i))throw new Error(`File not found: ${e.path}`);await pt.default.ensureDir(Lt.default.dirname(n)),await pt.default.move(i,n)}async createFolder(e){let t=this.resolvePath(e);await pt.default.ensureDir(t)}getFirstLinkpathDest(e,t){let i=Lt.default.dirname(this.resolvePath(t)),n;if(Lt.default.isAbsolute(e)?n=this.resolvePath(e):n=Lt.default.resolve(i,e),e.endsWith(".md")||(n+=".md"),pt.default.existsSync(n)){let s=Lt.default.relative(this.rootPath,n);return this.createFileObject(s)}return null}async process(e,t){let i=await this.read(e),n=t(i);return await this.modify(e,n),n}getDefaultNewFileParent(){return{path:"",name:""}}async updateLinks(e,t,i){return Promise.resolve()}resolvePath(e){return Lt.default.isAbsolute(e)?e:Lt.default.join(this.rootPath,e)}createFileObject(e){let t=Lt.default.basename(e),i=Lt.default.basename(e,Lt.default.extname(e)),n=Lt.default.dirname(e);return{path:e,basename:t,name:i,parent:n!=="."?this.createFolderObject(n):null}}createFolderObject(e){return{path:e,name:Lt.default.basename(e)}}extractFrontmatter(e){let t=/^---\n([\s\S]*?)\n---/,i=e.match(t);if(!i)return null;try{let n=to.load(i[1]);return typeof n=="object"&&n!==null?n:null}catch{return null}}replaceFrontmatter(e,t){let i=to.dump(t,{lineWidth:-1,noRefs:!0,quotingType:'"'}),n=/^---\n([\s\S]*?)\n---/;return e.match(n)?e.replace(n,`---
${i.trim()}
---`):`---
${i.trim()}
---
${e}`}walkDirectory(e,t){let i=pt.default.readdirSync(e,{withFileTypes:!0});for(let n of i){let s=Lt.default.join(e,n.name);n.isDirectory()?this.walkDirectory(s,t):n.isFile()&&t(s)}}};var el=class{static{o(this,"TableFormatter")}format(e){if(e.length===0)return"No results";let t=this.getAllVariables(e),i=e.map(n=>this.solutionToRow(n,t));return this.renderTable(t,i)}getAllVariables(e){let t=new Set;for(let i of e)for(let n of i.variables())t.add(n);return Array.from(t).sort()}solutionToRow(e,t){return t.map(i=>{let n=e.get(i);return n?this.formatValue(n.toString()):""})}formatValue(e){return e.length>50?e.substring(0,47)+"...":e}renderTable(e,t){let i=e.map((s,a)=>{let c=s.length+1,u=Math.max(...t.map(f=>f[a]?.length||0));return Math.max(c,u,10)}),n=[];n.push(this.renderSeparator(i,"top")),n.push(this.renderRow(e.map(s=>`?${s}`),i)),n.push(this.renderSeparator(i,"mid"));for(let s of t)n.push(this.renderRow(s,i));return n.push(this.renderSeparator(i,"bottom")),n.join(`
`)}renderRow(e,t){return`\u2502 ${e.map((n,s)=>n.padEnd(t[s])).join(" \u2502 ")} \u2502`}renderSeparator(e,t){let i=t==="top"?"\u250C":t==="mid"?"\u251C":"\u2514",n=t==="top"?"\u2510":t==="mid"?"\u2524":"\u2518",a=t==="mid"?"\u2500\u253C\u2500":"\u2500"+(t==="mid"?"\u253C":"\u2500")+"\u2500",c=e.map(u=>"\u2500".repeat(u+2));return`${i}${c.join(a)}${n}`}};var tl=class{static{o(this,"JsonFormatter")}format(e){let t=e.map(i=>i.toJSON());return JSON.stringify(t,null,2)}};function G_(r){return r.startsWith("VALIDATION_")?"validation":r.startsWith("PERMISSION_")?"permission":r.startsWith("STATE_")?"state":"internal"}o(G_,"getErrorCategory");var er=class{static{o(this,"ResponseBuilder")}static success(e,t){return{success:!0,data:e,...t&&{meta:t}}}static error(e,t,i,n){return{success:!1,error:{code:e,category:G_(e),message:t,exitCode:i,...n?.recovery&&{recovery:n.recovery},...n?.context&&{context:n.context},...n?.stack&&{stack:n.stack}}}}};var tr=class extends Error{static{o(this,"CLIError")}constructor(e,t,i){super(e),this.name=this.constructor.name,this.context=t,this.recoveryHint=i,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}format(){let e=`\u274C ${this.name}: ${this.message}`;if(this.guidance&&(e+=`

\u{1F4A1} ${this.guidance}`),this.context&&Object.keys(this.context).length>0){e+=`

\u{1F4CB} Context:`;for(let[t,i]of Object.entries(this.context))e+=`
  ${t}: ${JSON.stringify(i)}`}return e}toStructuredResponse(e=!1){return er.error(this.errorCode,this.message,this.exitCode,{recovery:this.recoveryHint||{message:this.guidance},context:this.context,stack:e?this.stack:void 0})}formatJson(e=!1){return JSON.stringify(this.toStructuredResponse(e),null,2)}};var Fe=class r{static{o(this,"ErrorHandler")}static{this.outputFormat="text"}static setFormat(e){r.outputFormat=e}static getFormat(){return r.outputFormat}static isDebugMode(){return!!process.env.DEBUG}static handle(e){if(e instanceof tr){if(r.outputFormat==="json"){let n=e.toStructuredResponse(r.isDebugMode());console.log(JSON.stringify(n,null,2))}else console.error(e.format()),r.isDebugMode()&&(console.error(`
\u{1F4CD} Stack trace:`),console.error(e.stack));process.exit(e.exitCode)}let{exitCode:t,errorCode:i}=r.classifyError(e);if(r.outputFormat==="json"){let n=r.buildErrorResponse(i,e.message,t,r.isDebugMode()?e.stack:void 0);console.log(JSON.stringify(n,null,2))}else console.error(`\u274C Error: ${e.message}`),r.isDebugMode()&&console.error(e.stack);process.exit(t)}static handleWithMessage(e,t=1,i="INTERNAL_UNKNOWN"){if(r.outputFormat==="json"){let n=r.buildErrorResponse(i,e,t);console.log(JSON.stringify(n,null,2))}else console.error(`\u274C Error: ${e}`);process.exit(t)}static classifyError(e){let t=e.message.toLowerCase();return t.includes("transition")?{exitCode:6,errorCode:"STATE_INVALID_TRANSITION"}:t.includes("transaction")?{exitCode:7,errorCode:"INTERNAL_TRANSACTION_FAILED"}:t.includes("concurrent")||t.includes("modified")?{exitCode:8,errorCode:"STATE_CONCURRENT_MODIFICATION"}:e.message.includes("not found")||e.message.includes("ENOENT")?{exitCode:3,errorCode:"VALIDATION_FILE_NOT_FOUND"}:e.message.includes("EACCES")||e.message.includes("permission denied")?{exitCode:4,errorCode:"PERMISSION_DENIED"}:e.message.includes("Invalid")||e.message.includes("outside vault")||e.message.includes("Not a")?{exitCode:2,errorCode:"VALIDATION_INVALID_ARGUMENTS"}:{exitCode:1,errorCode:"INTERNAL_UNKNOWN"}}static buildErrorResponse(e,t,i,n){return er.error(e,t,i,{recovery:r.getRecoveryHint(e),stack:n})}static getRecoveryHint(e){switch(e){case"VALIDATION_FILE_NOT_FOUND":return{message:"Verify the file path is correct and the file exists",suggestion:"Check file path spelling and ensure the file is in the vault"};case"VALIDATION_VAULT_NOT_FOUND":return{message:"Verify the vault path is correct",suggestion:"Check --vault option or current directory"};case"VALIDATION_INVALID_ARGUMENTS":return{message:"Check command syntax and argument format",suggestion:"Use --help for usage information"};case"STATE_INVALID_TRANSITION":return{message:"The requested state transition is not allowed",suggestion:"Check the current asset state and valid transitions"};case"STATE_CONCURRENT_MODIFICATION":return{message:"File was modified by another process",suggestion:"Wait and retry the command"};case"PERMISSION_DENIED":return{message:"Check file permissions",suggestion:"Ensure you have write access to the vault"};case"INTERNAL_TRANSACTION_FAILED":return{message:"Transaction could not complete",suggestion:"Check for locked files and retry"};default:return{message:"An unexpected error occurred",suggestion:"Check the error details and retry"}}}};var ro=class extends tr{constructor(t,i){super(`File not found: ${t}`,{filepath:t,...i},{message:"Verify the file path is correct and the file exists",suggestion:`ls -la "${t}" or find . -name "$(basename ${t})"`});this.exitCode=3;this.errorCode="VALIDATION_FILE_NOT_FOUND";this.guidance=`Verify the file path is correct and the file exists.
Check:
  \u2022 File path spelling
  \u2022 File is in the vault directory
  \u2022 File has .md extension`}static{o(this,"FileNotFoundError")}};var st=class extends tr{constructor(t,i,n){let s=`Check command syntax and argument format.
Use: exocortex command --help for usage information.`;super(t,n,{message:i||"Check command syntax and argument format",suggestion:"exocortex command --help"});this.exitCode=2;this.errorCode="VALIDATION_INVALID_ARGUMENTS";this.guidance=i||s}static{o(this,"InvalidArgumentsError")}};var es=class extends tr{constructor(t,i){super(`Vault not found: ${t}`,{vaultPath:t,...i},{message:"Verify the vault path is correct and the directory exists",suggestion:`ls -la "${t}" or check --vault option`});this.exitCode=3;this.errorCode="VALIDATION_VAULT_NOT_FOUND";this.guidance=`The specified vault directory does not exist.
Check:
  \u2022 Path spelling and case sensitivity
  \u2022 Directory exists and is accessible
  \u2022 You have read permissions for the directory`}static{o(this,"VaultNotFoundError")}};function W_(){return new di("query").description("Execute SPARQL query against Obsidian vault").argument("<query>","SPARQL query string or path to .sparql file").option("--vault <path>","Path to Obsidian vault",process.cwd()).option("--format <type>","Output format: table|json|csv","table").option("--output <type>","Response format: text|json (for MCP tools)","text").option("--explain","Show optimized query plan").option("--stats","Show execution statistics").option("--no-optimize","Disable query optimization").action(async(r,e)=>{let t=e.output||"text";Fe.setFormat(t);try{let i=Date.now(),n=Z6(r),s=(0,um.resolve)(e.vault);if(!(0,io.existsSync)(s))throw new es(s);t==="text"&&console.log(`\u{1F4E6} Loading vault: ${s}...`);let a=Date.now(),c=new Zu(s),f=await new fr.NoteToRDFConverter(c).convertVault(),l=new fr.InMemoryTripleStore;await l.addAll(f);let h=Date.now()-a;t==="text"&&(console.log(`\u2705 Loaded ${f.length} triples in ${h}ms
`),console.log("\u{1F50D} Parsing SPARQL query..."));let g=new fr.SPARQLParser().parse(n);t==="text"&&console.log("\u{1F504} Translating to algebra...");let b=new fr.AlgebraTranslator().translate(g);if(e.noOptimize?t==="text"&&console.log(`\u26A0\uFE0F  Query optimization disabled
`):b=new fr.AlgebraOptimizer().optimize(b),e.explain&&t==="text"){console.log("\u{1F4CA} Query Plan:");let K=new fr.AlgebraSerializer;console.log(K.toString(b)),console.log()}t==="text"&&console.log("\u{1F3AF} Executing query...");let x=Date.now(),P=await new fr.QueryExecutor(l).executeAll(b),V=Date.now()-x,H=Date.now()-i;if(t==="json"){let K=P.map(ct=>ct.toJSON()),Pe={query:n,count:P.length,bindings:K},Ze=er.success(Pe,{durationMs:H,itemCount:P.length,loadDurationMs:h,execDurationMs:V,triplesScanned:f.length});console.log(JSON.stringify(Ze,null,2))}else console.log(`\u2705 Found ${P.length} result(s) in ${V}ms
`),P.length>0?eF(P,e.format):console.log("No results found."),e.stats&&(console.log(`
\u{1F4CA} Execution Statistics:`),console.log(`  Vault loading: ${h}ms`),console.log(`  Query execution: ${V}ms`),console.log(`  Total time: ${H}ms`),console.log(`  Triples scanned: ${f.length}`),console.log(`  Results returned: ${P.length}`))}catch(i){Fe.handle(i)}})}o(W_,"sparqlQueryCommand");function Z6(r){if(r.includes("SELECT")||r.includes("CONSTRUCT"))return r;let e=(0,um.resolve)(r);return(0,io.existsSync)(e)?(0,io.readFileSync)(e,"utf-8"):r}o(Z6,"loadQuery");function eF(r,e){switch(e){case"json":let t=new tl;console.log(t.format(r));break;case"table":default:let i=new el;console.log(i.format(r));break}}o(eF,"formatResults");var Jv=require("path");var mt=Ye(Bs()),bn=Ye(require("path"));var hv=Ye(nv(),1);var so=o(r=>{if(typeof r!="string")throw new TypeError("invalid pattern");if(r.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");var cF={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},ao=o(r=>r.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),uF=o(r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),sv=o(r=>r.join(""),"rangesToString"),av=o((r,e)=>{let t=e;if(r.charAt(t)!=="[")throw new Error("not in a brace expression");let i=[],n=[],s=t+1,a=!1,c=!1,u=!1,f=!1,l=t,h="";e:for(;s<r.length;){let b=r.charAt(s);if((b==="!"||b==="^")&&s===t+1){f=!0,s++;continue}if(b==="]"&&a&&!u){l=s+1;break}if(a=!0,b==="\\"&&!u){u=!0,s++;continue}if(b==="["&&!u){for(let[x,[F,P,V]]of Object.entries(cF))if(r.startsWith(x,s)){if(h)return["$.",!1,r.length-t,!0];s+=x.length,V?n.push(F):i.push(F),c=c||P;continue e}}if(u=!1,h){b>h?i.push(ao(h)+"-"+ao(b)):b===h&&i.push(ao(b)),h="",s++;continue}if(r.startsWith("-]",s+1)){i.push(ao(b+"-")),s+=2;continue}if(r.startsWith("-",s+1)){h=b,s+=2;continue}i.push(ao(b)),s++}if(l<s)return["",!1,0,!1];if(!i.length&&!n.length)return["$.",!1,r.length-t,!0];if(n.length===0&&i.length===1&&/^\\?.$/.test(i[0])&&!f){let b=i[0].length===2?i[0].slice(-1):i[0];return[uF(b),!1,l-t,!1]}let p="["+(f?"^":"")+sv(i)+"]",g="["+(f?"":"^")+sv(n)+"]";return[i.length&&n.length?"("+p+"|"+g+")":i.length?p:g,c,l-t,!0]},"parseClass");var ri=o((r,{windowsPathsNoEscape:e=!1}={})=>e?r.replace(/\[([^\/\\])\]/g,"$1"):r.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var lF=new Set(["!","?","+","*","@"]),ov=o(r=>lF.has(r),"isExtglobType"),fF="(?!(?:^|/)\\.\\.?(?:$|/))",rl="(?!\\.)",hF=new Set(["[","."]),dF=new Set(["..","."]),pF=new Set("().*{}+?[]^$\\!"),mF=o(r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),hm="[^/]",cv=hm+"*?",uv=hm+"+?",Hs=class r{static{o(this,"AST")}type;#e;#t;#s=!1;#i=[];#a;#S;#u;#f=!1;#o;#c;#n=!1;constructor(e,t,i={}){this.type=e,e&&(this.#t=!0),this.#a=t,this.#e=this.#a?this.#a.#e:this,this.#o=this.#e===this?i:this.#e.#o,this.#u=this.#e===this?[]:this.#e.#u,e==="!"&&!this.#e.#f&&this.#u.push(this),this.#S=this.#a?this.#a.#i.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#i)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#i.map(e=>String(e)).join("|")+")":this.#c=this.#i.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#f)return this;this.toString(),this.#f=!0;let e;for(;e=this.#u.pop();){if(e.type!=="!")continue;let t=e,i=t.#a;for(;i;){for(let n=t.#S+1;!i.type&&n<i.#i.length;n++)for(let s of e.#i){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(i.#i[n])}t=i,i=t.#a}}return this}push(...e){for(let t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof r&&t.#a===this))throw new Error("invalid part: "+t);this.#i.push(t)}}toJSON(){let e=this.type===null?this.#i.slice().map(t=>typeof t=="string"?t:t.toJSON()):[this.type,...this.#i.map(t=>t.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#f&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#S===0)return!0;let e=this.#a;for(let t=0;t<this.#S;t++){let i=e.#i[t];if(!(i instanceof r&&i.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#i.length:0;return this.#S===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let t=new r(this.type,e);for(let i of this.#i)t.copyIn(i);return t}static#y(e,t,i,n){let s=!1,a=!1,c=-1,u=!1;if(t.type===null){let g=i,S="";for(;g<e.length;){let b=e.charAt(g++);if(s||b==="\\"){s=!s,S+=b;continue}if(a){g===c+1?(b==="^"||b==="!")&&(u=!0):b==="]"&&!(g===c+2&&u)&&(a=!1),S+=b;continue}else if(b==="["){a=!0,c=g,u=!1,S+=b;continue}if(!n.noext&&ov(b)&&e.charAt(g)==="("){t.push(S),S="";let x=new r(b,t);g=r.#y(e,x,g,n),t.push(x);continue}S+=b}return t.push(S),g}let f=i+1,l=new r(null,t),h=[],p="";for(;f<e.length;){let g=e.charAt(f++);if(s||g==="\\"){s=!s,p+=g;continue}if(a){f===c+1?(g==="^"||g==="!")&&(u=!0):g==="]"&&!(f===c+2&&u)&&(a=!1),p+=g;continue}else if(g==="["){a=!0,c=f,u=!1,p+=g;continue}if(ov(g)&&e.charAt(f)==="("){l.push(p),p="";let S=new r(g,l);l.push(S),f=r.#y(e,S,f,n);continue}if(g==="|"){l.push(p),p="",h.push(l),l=new r(null,t);continue}if(g===")")return p===""&&t.#i.length===0&&(t.#n=!0),l.push(p),p="",t.push(...h,l),f;p+=g}return t.type=null,t.#t=void 0,t.#i=[e.substring(i-1)],f}static fromGlob(e,t={}){let i=new r(null,void 0,t);return r.#y(e,i,0,t),i}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[t,i,n,s]=this.toRegExpSource();if(!(n||this.#t||this.#o.nocase&&!this.#o.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return i;let c=(this.#o.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${t}$`,c),{_src:t,_glob:e})}get options(){return this.#o}toRegExpSource(e){let t=e??!!this.#o.dot;if(this.#e===this&&this.#g(),!this.type){let u=this.isStart()&&this.isEnd(),f=this.#i.map(g=>{let[S,b,x,F]=typeof g=="string"?r.#h(g,this.#t,u):g.toRegExpSource(e);return this.#t=this.#t||x,this.#s=this.#s||F,S}).join(""),l="";if(this.isStart()&&typeof this.#i[0]=="string"&&!(this.#i.length===1&&dF.has(this.#i[0]))){let S=hF,b=t&&S.has(f.charAt(0))||f.startsWith("\\.")&&S.has(f.charAt(2))||f.startsWith("\\.\\.")&&S.has(f.charAt(4)),x=!t&&!e&&S.has(f.charAt(0));l=b?fF:x?rl:""}let h="";return this.isEnd()&&this.#e.#f&&this.#a?.type==="!"&&(h="(?:$|\\/)"),[l+f+h,ri(f),this.#t=!!this.#t,this.#s]}let i=this.type==="*"||this.type==="+",n=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#d(t);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let u=this.toString();return this.#i=[u],this.type=null,this.#t=void 0,[u,ri(this.toString()),!1,!1]}let a=!i||e||t||!rl?"":this.#d(!0);a===s&&(a=""),a&&(s=`(?:${s})(?:${a})*?`);let c="";if(this.type==="!"&&this.#n)c=(this.isStart()&&!t?rl:"")+uv;else{let u=this.type==="!"?"))"+(this.isStart()&&!t&&!e?rl:"")+cv+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;c=n+s+u}return[c,ri(s),this.#t=!!this.#t,this.#s]}#d(e){return this.#i.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");let[i,n,s,a]=t.toRegExpSource(e);return this.#s=this.#s||a,i}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#h(e,t,i=!1){let n=!1,s="",a=!1;for(let c=0;c<e.length;c++){let u=e.charAt(c);if(n){n=!1,s+=(pF.has(u)?"\\":"")+u;continue}if(u==="\\"){c===e.length-1?s+="\\\\":n=!0;continue}if(u==="["){let[f,l,h,p]=av(e,c);if(h){s+=f,a=a||l,c+=h-1,t=t||p;continue}}if(u==="*"){i&&e==="*"?s+=uv:s+=cv,t=!0;continue}if(u==="?"){s+=hm,t=!0;continue}s+=mF(u)}return[s,ri(e),!!t,a]}};var zs=o((r,{windowsPathsNoEscape:e=!1}={})=>e?r.replace(/[?*()[\]]/g,"[$&]"):r.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var Rt=o((r,e,t={})=>(so(e),!t.nocomment&&e.charAt(0)==="#"?!1:new Sr(e,t).match(r)),"minimatch"),gF=/^\*+([^+@!?\*\[\(]*)$/,yF=o(r=>e=>!e.startsWith(".")&&e.endsWith(r),"starDotExtTest"),_F=o(r=>e=>e.endsWith(r),"starDotExtTestDot"),vF=o(r=>(r=r.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(r)),"starDotExtTestNocase"),SF=o(r=>(r=r.toLowerCase(),e=>e.toLowerCase().endsWith(r)),"starDotExtTestNocaseDot"),bF=/^\*+\.\*+$/,wF=o(r=>!r.startsWith(".")&&r.includes("."),"starDotStarTest"),EF=o(r=>r!=="."&&r!==".."&&r.includes("."),"starDotStarTestDot"),TF=/^\.\*+$/,AF=o(r=>r!=="."&&r!==".."&&r.startsWith("."),"dotStarTest"),xF=/^\*+$/,OF=o(r=>r.length!==0&&!r.startsWith("."),"starTest"),CF=o(r=>r.length!==0&&r!=="."&&r!=="..","starTestDot"),FF=/^\?+([^+@!?\*\[\(]*)?$/,PF=o(([r,e=""])=>{let t=dv([r]);return e?(e=e.toLowerCase(),i=>t(i)&&i.toLowerCase().endsWith(e)):t},"qmarksTestNocase"),IF=o(([r,e=""])=>{let t=pv([r]);return e?(e=e.toLowerCase(),i=>t(i)&&i.toLowerCase().endsWith(e)):t},"qmarksTestNocaseDot"),DF=o(([r,e=""])=>{let t=pv([r]);return e?i=>t(i)&&i.endsWith(e):t},"qmarksTestDot"),RF=o(([r,e=""])=>{let t=dv([r]);return e?i=>t(i)&&i.endsWith(e):t},"qmarksTest"),dv=o(([r])=>{let e=r.length;return t=>t.length===e&&!t.startsWith(".")},"qmarksTestNoExt"),pv=o(([r])=>{let e=r.length;return t=>t.length===e&&t!=="."&&t!==".."},"qmarksTestNoExtDot"),mv=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",lv={win32:{sep:"\\"},posix:{sep:"/"}},NF=mv==="win32"?lv.win32.sep:lv.posix.sep;Rt.sep=NF;var Dt=Symbol("globstar **");Rt.GLOBSTAR=Dt;var kF="[^/]",jF=kF+"*?",MF="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",LF="(?:(?!(?:\\/|^)\\.).)*?",VF=o((r,e={})=>t=>Rt(t,r,e),"filter");Rt.filter=VF;var Fr=o((r,e={})=>Object.assign({},r,e),"ext"),qF=o(r=>{if(!r||typeof r!="object"||!Object.keys(r).length)return Rt;let e=Rt;return Object.assign(o((i,n,s={})=>e(i,n,Fr(r,s)),"m"),{Minimatch:class extends e.Minimatch{static{o(this,"Minimatch")}constructor(n,s={}){super(n,Fr(r,s))}static defaults(n){return e.defaults(Fr(r,n)).Minimatch}},AST:class extends e.AST{static{o(this,"AST")}constructor(n,s,a={}){super(n,s,Fr(r,a))}static fromGlob(n,s={}){return e.AST.fromGlob(n,Fr(r,s))}},unescape:o((i,n={})=>e.unescape(i,Fr(r,n)),"unescape"),escape:o((i,n={})=>e.escape(i,Fr(r,n)),"escape"),filter:o((i,n={})=>e.filter(i,Fr(r,n)),"filter"),defaults:o(i=>e.defaults(Fr(r,i)),"defaults"),makeRe:o((i,n={})=>e.makeRe(i,Fr(r,n)),"makeRe"),braceExpand:o((i,n={})=>e.braceExpand(i,Fr(r,n)),"braceExpand"),match:o((i,n,s={})=>e.match(i,n,Fr(r,s)),"match"),sep:e.sep,GLOBSTAR:Dt})},"defaults");Rt.defaults=qF;var gv=o((r,e={})=>(so(r),e.nobrace||!/\{(?:(?!\{).)*\}/.test(r)?[r]:(0,hv.default)(r)),"braceExpand");Rt.braceExpand=gv;var BF=o((r,e={})=>new Sr(r,e).makeRe(),"makeRe");Rt.makeRe=BF;var UF=o((r,e,t={})=>{let i=new Sr(e,t);return r=r.filter(n=>i.match(n)),i.options.nonull&&!r.length&&r.push(e),r},"match");Rt.match=UF;var fv=/[?*]|[+@!]\(.*?\)|\[|\]/,$F=o(r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),Sr=class{static{o(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){so(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||mv,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let i=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(i),this.debug(this.pattern,this.globParts);let n=this.globParts.map((s,a,c)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=s[0]===""&&s[1]===""&&(s[2]==="?"||!fv.test(s[2]))&&!fv.test(s[3]),f=/^[a-z]:/i.test(s[0]);if(u)return[...s.slice(0,4),...s.slice(4).map(l=>this.parse(l))];if(f)return[s[0],...s.slice(1).map(l=>this.parse(l))]}return s.map(u=>this.parse(u))});if(this.debug(this.pattern,n),this.set=n.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let a=this.set[s];a[0]===""&&a[1]===""&&this.globParts[s][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let i=0;i<e.length;i++)for(let n=0;n<e[i].length;n++)e[i][n]==="**"&&(e[i][n]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let i=-1;for(;(i=t.indexOf("**",i+1))!==-1;){let n=i;for(;t[n+1]==="**";)n++;n!==i&&t.splice(i,n-i)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((i,n)=>{let s=i[i.length-1];return n==="**"&&s==="**"?i:n===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(i.pop(),i):(i.push(n),i)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let n=1;n<e.length-1;n++){let s=e[n];n===1&&s===""&&e[0]===""||(s==="."||s==="")&&(t=!0,e.splice(n,1),n--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let i=0;for(;(i=e.indexOf("..",i+1))!==-1;){let n=e[i-1];n&&n!=="."&&n!==".."&&n!=="**"&&(t=!0,e.splice(i-1,2),i-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let i of e){let n=-1;for(;(n=i.indexOf("**",n+1))!==-1;){let a=n;for(;i[a+1]==="**";)a++;a>n&&i.splice(n+1,a-n);let c=i[n+1],u=i[n+2],f=i[n+3];if(c!==".."||!u||u==="."||u===".."||!f||f==="."||f==="..")continue;t=!0,i.splice(n,1);let l=i.slice(0);l[n]="**",e.push(l),n--}if(!this.preserveMultipleSlashes){for(let a=1;a<i.length-1;a++){let c=i[a];a===1&&c===""&&i[0]===""||(c==="."||c==="")&&(t=!0,i.splice(a,1),a--)}i[0]==="."&&i.length===2&&(i[1]==="."||i[1]==="")&&(t=!0,i.pop())}let s=0;for(;(s=i.indexOf("..",s+1))!==-1;){let a=i[s-1];if(a&&a!=="."&&a!==".."&&a!=="**"){t=!0;let u=s===1&&i[s+1]==="**"?["."]:[];i.splice(s-1,2,...u),i.length===0&&i.push(""),s-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let i=t+1;i<e.length;i++){let n=this.partsMatch(e[t],e[i],!this.preserveMultipleSlashes);if(n){e[t]=[],e[i]=n;break}}return e.filter(t=>t.length)}partsMatch(e,t,i=!1){let n=0,s=0,a=[],c="";for(;n<e.length&&s<t.length;)if(e[n]===t[s])a.push(c==="b"?t[s]:e[n]),n++,s++;else if(i&&e[n]==="**"&&t[s]===e[n+1])a.push(e[n]),n++;else if(i&&t[s]==="**"&&e[n]===t[s+1])a.push(t[s]),s++;else if(e[n]==="*"&&t[s]&&(this.options.dot||!t[s].startsWith("."))&&t[s]!=="**"){if(c==="b")return!1;c="a",a.push(e[n]),n++,s++}else if(t[s]==="*"&&e[n]&&(this.options.dot||!e[n].startsWith("."))&&e[n]!=="**"){if(c==="a")return!1;c="b",a.push(t[s]),n++,s++}else return!1;return e.length===t.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,i=0;for(let n=0;n<e.length&&e.charAt(n)==="!";n++)t=!t,i++;i&&(this.pattern=e.slice(i)),this.negate=t}matchOne(e,t,i=!1){let n=this.options;if(this.isWindows){let b=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),x=!b&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),F=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),P=!F&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),V=x?3:b?0:void 0,H=P?3:F?0:void 0;if(typeof V=="number"&&typeof H=="number"){let[K,Pe]=[e[V],t[H]];K.toLowerCase()===Pe.toLowerCase()&&(t[H]=K,H>V?t=t.slice(H):V>H&&(e=e.slice(V)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var a=0,c=0,u=e.length,f=t.length;a<u&&c<f;a++,c++){this.debug("matchOne loop");var l=t[c],h=e[a];if(this.debug(t,l,h),l===!1)return!1;if(l===Dt){this.debug("GLOBSTAR",[t,l,h]);var p=a,g=c+1;if(g===f){for(this.debug("** at the end");a<u;a++)if(e[a]==="."||e[a]===".."||!n.dot&&e[a].charAt(0)===".")return!1;return!0}for(;p<u;){var S=e[p];if(this.debug(`
globstar while`,e,p,t,g,S),this.matchOne(e.slice(p),t.slice(g),i))return this.debug("globstar found match!",p,u,S),!0;if(S==="."||S===".."||!n.dot&&S.charAt(0)==="."){this.debug("dot detected!",e,p,t,g);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(i&&(this.debug(`
>>> no match, partial?`,e,p,t,g),p===u))}let b;if(typeof l=="string"?(b=h===l,this.debug("string match",l,h,b)):(b=l.test(h),this.debug("pattern match",l,h,b)),!b)return!1}if(a===u&&c===f)return!0;if(a===u)return i;if(c===f)return a===u-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return gv(this.pattern,this.options)}parse(e){so(e);let t=this.options;if(e==="**")return Dt;if(e==="")return"";let i,n=null;(i=e.match(xF))?n=t.dot?CF:OF:(i=e.match(gF))?n=(t.nocase?t.dot?SF:vF:t.dot?_F:yF)(i[1]):(i=e.match(FF))?n=(t.nocase?t.dot?IF:PF:t.dot?DF:RF)(i):(i=e.match(bF))?n=t.dot?EF:wF:(i=e.match(TF))&&(n=AF);let s=Hs.fromGlob(e,this.options).toMMPattern();return n&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:n}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,i=t.noglobstar?jF:t.dot?MF:LF,n=new Set(t.nocase?["i"]:[]),s=e.map(u=>{let f=u.map(l=>{if(l instanceof RegExp)for(let h of l.flags.split(""))n.add(h);return typeof l=="string"?$F(l):l===Dt?Dt:l._src});return f.forEach((l,h)=>{let p=f[h+1],g=f[h-1];l!==Dt||g===Dt||(g===void 0?p!==void 0&&p!==Dt?f[h+1]="(?:\\/|"+i+"\\/)?"+p:f[h]=i:p===void 0?f[h-1]=g+"(?:\\/|"+i+")?":p!==Dt&&(f[h-1]=g+"(?:\\/|\\/"+i+"\\/)"+p,f[h+1]=Dt))}),f.filter(l=>l!==Dt).join("/")}).join("|"),[a,c]=e.length>1?["(?:",")"]:["",""];s="^"+a+s+c+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...n].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let i=this.options;this.isWindows&&(e=e.split("\\").join("/"));let n=this.slashSplit(e);this.debug(this.pattern,"split",n);let s=this.set;this.debug(this.pattern,"set",s);let a=n[n.length-1];if(!a)for(let c=n.length-2;!a&&c>=0;c--)a=n[c];for(let c=0;c<s.length;c++){let u=s[c],f=n;if(i.matchBase&&u.length===1&&(f=[a]),this.matchOne(f,u,t))return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}static defaults(e){return Rt.defaults(e).Minimatch}};Rt.AST=Hs;Rt.Minimatch=Sr;Rt.escape=zs;Rt.unescape=ri;var qv=require("node:url");var Ks=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,_v=new Set,dm=typeof process=="object"&&process?process:{},vv=o((r,e,t,i)=>{typeof dm.emitWarning=="function"?dm.emitWarning(r,e,t,i):console.error(`[${t}] ${e}: ${r}`)},"emitWarning"),il=globalThis.AbortController,yv=globalThis.AbortSignal;if(typeof il>"u"){yv=class{static{o(this,"AbortSignal")}onabort;_onabort=[];reason;aborted=!1;addEventListener(i,n){this._onabort.push(n)}},il=class{static{o(this,"AbortController")}constructor(){e()}signal=new yv;abort(i){if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(let n of this.signal._onabort)n(i);this.signal.onabort?.(i)}}};let r=dm.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=o(()=>{r&&(r=!1,vv("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))},"warnACPolyfill")}var GF=o(r=>!_v.has(r),"shouldWarn"),bV=Symbol("type"),yn=o(r=>r&&r===Math.floor(r)&&r>0&&isFinite(r),"isPosInt"),Sv=o(r=>yn(r)?r<=Math.pow(2,8)?Uint8Array:r<=Math.pow(2,16)?Uint16Array:r<=Math.pow(2,32)?Uint32Array:r<=Number.MAX_SAFE_INTEGER?Ys:null:null,"getUintArray"),Ys=class extends Array{static{o(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},pm=class r{static{o(this,"Stack")}heap;length;static#e=!1;static create(e){let t=Sv(e);if(!t)return[];r.#e=!0;let i=new r(e,t);return r.#e=!1,i}constructor(e,t){if(!r.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},oo=class r{static{o(this,"LRUCache")}#e;#t;#s;#i;#a;#S;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#u;#f;#o;#c;#n;#g;#y;#d;#h;#E;#m;#T;#A;#v;#b;#w;#p;static unsafeExposeInternals(e){return{starts:e.#A,ttls:e.#v,sizes:e.#T,keyMap:e.#o,keyList:e.#c,valList:e.#n,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#h},free:e.#E,isBackgroundFetch:o(t=>e.#l(t),"isBackgroundFetch"),backgroundFetch:o((t,i,n,s)=>e.#L(t,i,n,s),"backgroundFetch"),moveToTail:o(t=>e.#q(t),"moveToTail"),indexes:o(t=>e.#O(t),"indexes"),rindexes:o(t=>e.#C(t),"rindexes"),isStale:o(t=>e.#_(t),"isStale")}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#f}get size(){return this.#u}get fetchMethod(){return this.#a}get memoMethod(){return this.#S}get dispose(){return this.#s}get disposeAfter(){return this.#i}constructor(e){let{max:t=0,ttl:i,ttlResolution:n=1,ttlAutopurge:s,updateAgeOnGet:a,updateAgeOnHas:c,allowStale:u,dispose:f,disposeAfter:l,noDisposeOnSet:h,noUpdateTTL:p,maxSize:g=0,maxEntrySize:S=0,sizeCalculation:b,fetchMethod:x,memoMethod:F,noDeleteOnFetchRejection:P,noDeleteOnStaleGet:V,allowStaleOnFetchRejection:H,allowStaleOnFetchAbort:K,ignoreFetchAbort:Pe}=e;if(t!==0&&!yn(t))throw new TypeError("max option must be a nonnegative integer");let Ze=t?Sv(t):Array;if(!Ze)throw new Error("invalid max value: "+t);if(this.#e=t,this.#t=g,this.maxEntrySize=S||this.#t,this.sizeCalculation=b,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(F!==void 0&&typeof F!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#S=F,x!==void 0&&typeof x!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=x,this.#w=!!x,this.#o=new Map,this.#c=new Array(t).fill(void 0),this.#n=new Array(t).fill(void 0),this.#g=new Ze(t),this.#y=new Ze(t),this.#d=0,this.#h=0,this.#E=pm.create(t),this.#u=0,this.#f=0,typeof f=="function"&&(this.#s=f),typeof l=="function"?(this.#i=l,this.#m=[]):(this.#i=void 0,this.#m=void 0),this.#b=!!this.#s,this.#p=!!this.#i,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!P,this.allowStaleOnFetchRejection=!!H,this.allowStaleOnFetchAbort=!!K,this.ignoreFetchAbort=!!Pe,this.maxEntrySize!==0){if(this.#t!==0&&!yn(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!yn(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#P()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!V,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!c,this.ttlResolution=yn(n)||n===0?n:1,this.ttlAutopurge=!!s,this.ttl=i||0,this.ttl){if(!yn(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#F()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let ct="LRU_CACHE_UNBOUNDED";GF(ct)&&(_v.add(ct),vv("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ct,r))}}getRemainingTTL(e){return this.#o.has(e)?1/0:0}#F(){let e=new Ys(this.#e),t=new Ys(this.#e);this.#v=e,this.#A=t,this.#D=(s,a,c=Ks.now())=>{if(t[s]=a!==0?c:0,e[s]=a,a!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#_(s)&&this.#I(this.#c[s],"expire")},a+1);u.unref&&u.unref()}},this.#x=s=>{t[s]=e[s]!==0?Ks.now():0},this.#r=(s,a)=>{if(e[a]){let c=e[a],u=t[a];if(!c||!u)return;s.ttl=c,s.start=u,s.now=i||n();let f=s.now-u;s.remainingTTL=c-f}};let i=0,n=o(()=>{let s=Ks.now();if(this.ttlResolution>0){i=s;let a=setTimeout(()=>i=0,this.ttlResolution);a.unref&&a.unref()}return s},"getNow");this.getRemainingTTL=s=>{let a=this.#o.get(s);if(a===void 0)return 0;let c=e[a],u=t[a];if(!c||!u)return 1/0;let f=(i||n())-u;return c-f},this.#_=s=>{let a=t[s],c=e[s];return!!c&&!!a&&(i||n())-a>c}}#x=o(()=>{},"#updateItemAge");#r=o(()=>{},"#statusTTL");#D=o(()=>{},"#setItemTTL");#_=o(()=>!1,"#isStale");#P(){let e=new Ys(this.#e);this.#f=0,this.#T=e,this.#R=t=>{this.#f-=e[t],e[t]=0},this.#k=(t,i,n,s)=>{if(this.#l(i))return 0;if(!yn(n))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(n=s(i,t),!yn(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return n},this.#N=(t,i,n)=>{if(e[t]=i,this.#t){let s=this.#t-e[t];for(;this.#f>s;)this.#M(!0)}this.#f+=e[t],n&&(n.entrySize=i,n.totalCalculatedSize=this.#f)}}#R=o(e=>{},"#removeItemSize");#N=o((e,t,i)=>{},"#addItemSize");#k=o((e,t,i,n)=>{if(i||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0},"#requireSize");*#O({allowStale:e=this.allowStale}={}){if(this.#u)for(let t=this.#h;!(!this.#j(t)||((e||!this.#_(t))&&(yield t),t===this.#d));)t=this.#y[t]}*#C({allowStale:e=this.allowStale}={}){if(this.#u)for(let t=this.#d;!(!this.#j(t)||((e||!this.#_(t))&&(yield t),t===this.#h));)t=this.#g[t]}#j(e){return e!==void 0&&this.#o.get(this.#c[e])===e}*entries(){for(let e of this.#O())this.#n[e]!==void 0&&this.#c[e]!==void 0&&!this.#l(this.#n[e])&&(yield[this.#c[e],this.#n[e]])}*rentries(){for(let e of this.#C())this.#n[e]!==void 0&&this.#c[e]!==void 0&&!this.#l(this.#n[e])&&(yield[this.#c[e],this.#n[e]])}*keys(){for(let e of this.#O()){let t=this.#c[e];t!==void 0&&!this.#l(this.#n[e])&&(yield t)}}*rkeys(){for(let e of this.#C()){let t=this.#c[e];t!==void 0&&!this.#l(this.#n[e])&&(yield t)}}*values(){for(let e of this.#O())this.#n[e]!==void 0&&!this.#l(this.#n[e])&&(yield this.#n[e])}*rvalues(){for(let e of this.#C())this.#n[e]!==void 0&&!this.#l(this.#n[e])&&(yield this.#n[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let i of this.#O()){let n=this.#n[i],s=this.#l(n)?n.__staleWhileFetching:n;if(s!==void 0&&e(s,this.#c[i],this))return this.get(this.#c[i],t)}}forEach(e,t=this){for(let i of this.#O()){let n=this.#n[i],s=this.#l(n)?n.__staleWhileFetching:n;s!==void 0&&e.call(t,s,this.#c[i],this)}}rforEach(e,t=this){for(let i of this.#C()){let n=this.#n[i],s=this.#l(n)?n.__staleWhileFetching:n;s!==void 0&&e.call(t,s,this.#c[i],this)}}purgeStale(){let e=!1;for(let t of this.#C({allowStale:!0}))this.#_(t)&&(this.#I(this.#c[t],"expire"),e=!0);return e}info(e){let t=this.#o.get(e);if(t===void 0)return;let i=this.#n[t],n=this.#l(i)?i.__staleWhileFetching:i;if(n===void 0)return;let s={value:n};if(this.#v&&this.#A){let a=this.#v[t],c=this.#A[t];if(a&&c){let u=a-(Ks.now()-c);s.ttl=u,s.start=Date.now()}}return this.#T&&(s.size=this.#T[t]),s}dump(){let e=[];for(let t of this.#O({allowStale:!0})){let i=this.#c[t],n=this.#n[t],s=this.#l(n)?n.__staleWhileFetching:n;if(s===void 0||i===void 0)continue;let a={value:s};if(this.#v&&this.#A){a.ttl=this.#v[t];let c=Ks.now()-this.#A[t];a.start=Math.floor(Date.now()-c)}this.#T&&(a.size=this.#T[t]),e.unshift([i,a])}return e}load(e){this.clear();for(let[t,i]of e){if(i.start){let n=Date.now()-i.start;i.start=Ks.now()-n}this.set(t,i.value,i)}}set(e,t,i={}){if(t===void 0)return this.delete(e),this;let{ttl:n=this.ttl,start:s,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:c=this.sizeCalculation,status:u}=i,{noUpdateTTL:f=this.noUpdateTTL}=i,l=this.#k(e,t,i.size||0,c);if(this.maxEntrySize&&l>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#I(e,"set"),this;let h=this.#u===0?void 0:this.#o.get(e);if(h===void 0)h=this.#u===0?this.#h:this.#E.length!==0?this.#E.pop():this.#u===this.#e?this.#M(!1):this.#u,this.#c[h]=e,this.#n[h]=t,this.#o.set(e,h),this.#g[this.#h]=h,this.#y[h]=this.#h,this.#h=h,this.#u++,this.#N(h,l,u),u&&(u.set="add"),f=!1;else{this.#q(h);let p=this.#n[h];if(t!==p){if(this.#w&&this.#l(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:g}=p;g!==void 0&&!a&&(this.#b&&this.#s?.(g,e,"set"),this.#p&&this.#m?.push([g,e,"set"]))}else a||(this.#b&&this.#s?.(p,e,"set"),this.#p&&this.#m?.push([p,e,"set"]));if(this.#R(h),this.#N(h,l,u),this.#n[h]=t,u){u.set="replace";let g=p&&this.#l(p)?p.__staleWhileFetching:p;g!==void 0&&(u.oldValue=g)}}else u&&(u.set="update")}if(n!==0&&!this.#v&&this.#F(),this.#v&&(f||this.#D(h,n,s),u&&this.#r(u,h)),!a&&this.#p&&this.#m){let p=this.#m,g;for(;g=p?.shift();)this.#i?.(...g)}return this}pop(){try{for(;this.#u;){let e=this.#n[this.#d];if(this.#M(!0),this.#l(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#p&&this.#m){let e=this.#m,t;for(;t=e?.shift();)this.#i?.(...t)}}}#M(e){let t=this.#d,i=this.#c[t],n=this.#n[t];return this.#w&&this.#l(n)?n.__abortController.abort(new Error("evicted")):(this.#b||this.#p)&&(this.#b&&this.#s?.(n,i,"evict"),this.#p&&this.#m?.push([n,i,"evict"])),this.#R(t),e&&(this.#c[t]=void 0,this.#n[t]=void 0,this.#E.push(t)),this.#u===1?(this.#d=this.#h=0,this.#E.length=0):this.#d=this.#g[t],this.#o.delete(i),this.#u--,t}has(e,t={}){let{updateAgeOnHas:i=this.updateAgeOnHas,status:n}=t,s=this.#o.get(e);if(s!==void 0){let a=this.#n[s];if(this.#l(a)&&a.__staleWhileFetching===void 0)return!1;if(this.#_(s))n&&(n.has="stale",this.#r(n,s));else return i&&this.#x(s),n&&(n.has="hit",this.#r(n,s)),!0}else n&&(n.has="miss");return!1}peek(e,t={}){let{allowStale:i=this.allowStale}=t,n=this.#o.get(e);if(n===void 0||!i&&this.#_(n))return;let s=this.#n[n];return this.#l(s)?s.__staleWhileFetching:s}#L(e,t,i,n){let s=t===void 0?void 0:this.#n[t];if(this.#l(s))return s;let a=new il,{signal:c}=i;c?.addEventListener("abort",()=>a.abort(c.reason),{signal:a.signal});let u={signal:a.signal,options:i,context:n},f=o((b,x=!1)=>{let{aborted:F}=a.signal,P=i.ignoreFetchAbort&&b!==void 0;if(i.status&&(F&&!x?(i.status.fetchAborted=!0,i.status.fetchError=a.signal.reason,P&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),F&&!P&&!x)return h(a.signal.reason);let V=g;return this.#n[t]===g&&(b===void 0?V.__staleWhileFetching?this.#n[t]=V.__staleWhileFetching:this.#I(e,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(e,b,u.options))),b},"cb"),l=o(b=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=b),h(b)),"eb"),h=o(b=>{let{aborted:x}=a.signal,F=x&&i.allowStaleOnFetchAbort,P=F||i.allowStaleOnFetchRejection,V=P||i.noDeleteOnFetchRejection,H=g;if(this.#n[t]===g&&(!V||H.__staleWhileFetching===void 0?this.#I(e,"fetch"):F||(this.#n[t]=H.__staleWhileFetching)),P)return i.status&&H.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),H.__staleWhileFetching;if(H.__returned===H)throw b},"fetchFail"),p=o((b,x)=>{let F=this.#a?.(e,s,u);F&&F instanceof Promise&&F.then(P=>b(P===void 0?void 0:P),x),a.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(b(void 0),i.allowStaleOnFetchAbort&&(b=o(P=>f(P,!0),"res")))})},"pcall");i.status&&(i.status.fetchDispatched=!0);let g=new Promise(p).then(f,l),S=Object.assign(g,{__abortController:a,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,S,{...u.options,status:void 0}),t=this.#o.get(e)):this.#n[t]=S,S}#l(e){if(!this.#w)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof il}async fetch(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:c=this.noDisposeOnSet,size:u=0,sizeCalculation:f=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:g=this.ignoreFetchAbort,allowStaleOnFetchAbort:S=this.allowStaleOnFetchAbort,context:b,forceRefresh:x=!1,status:F,signal:P}=t;if(!this.#w)return F&&(F.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:s,status:F});let V={allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:s,ttl:a,noDisposeOnSet:c,size:u,sizeCalculation:f,noUpdateTTL:l,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:S,ignoreFetchAbort:g,status:F,signal:P},H=this.#o.get(e);if(H===void 0){F&&(F.fetch="miss");let K=this.#L(e,H,V,b);return K.__returned=K}else{let K=this.#n[H];if(this.#l(K)){let ce=i&&K.__staleWhileFetching!==void 0;return F&&(F.fetch="inflight",ce&&(F.returnedStale=!0)),ce?K.__staleWhileFetching:K.__returned=K}let Pe=this.#_(H);if(!x&&!Pe)return F&&(F.fetch="hit"),this.#q(H),n&&this.#x(H),F&&this.#r(F,H),K;let Ze=this.#L(e,H,V,b),B=Ze.__staleWhileFetching!==void 0&&i;return F&&(F.fetch=Pe?"stale":"refresh",B&&Pe&&(F.returnedStale=!0)),B?Ze.__staleWhileFetching:Ze.__returned=Ze}}async forceFetch(e,t={}){let i=await this.fetch(e,t);if(i===void 0)throw new Error("fetch() returned undefined");return i}memo(e,t={}){let i=this.#S;if(!i)throw new Error("no memoMethod provided to constructor");let{context:n,forceRefresh:s,...a}=t,c=this.get(e,a);if(!s&&c!==void 0)return c;let u=i(e,c,{options:a,context:n});return this.set(e,u,a),u}get(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:a}=t,c=this.#o.get(e);if(c!==void 0){let u=this.#n[c],f=this.#l(u);return a&&this.#r(a,c),this.#_(c)?(a&&(a.get="stale"),f?(a&&i&&u.__staleWhileFetching!==void 0&&(a.returnedStale=!0),i?u.__staleWhileFetching:void 0):(s||this.#I(e,"expire"),a&&i&&(a.returnedStale=!0),i?u:void 0)):(a&&(a.get="hit"),f?u.__staleWhileFetching:(this.#q(c),n&&this.#x(c),u))}else a&&(a.get="miss")}#V(e,t){this.#y[t]=e,this.#g[e]=t}#q(e){e!==this.#h&&(e===this.#d?this.#d=this.#g[e]:this.#V(this.#y[e],this.#g[e]),this.#V(this.#h,e),this.#h=e)}delete(e){return this.#I(e,"delete")}#I(e,t){let i=!1;if(this.#u!==0){let n=this.#o.get(e);if(n!==void 0)if(i=!0,this.#u===1)this.#B(t);else{this.#R(n);let s=this.#n[n];if(this.#l(s)?s.__abortController.abort(new Error("deleted")):(this.#b||this.#p)&&(this.#b&&this.#s?.(s,e,t),this.#p&&this.#m?.push([s,e,t])),this.#o.delete(e),this.#c[n]=void 0,this.#n[n]=void 0,n===this.#h)this.#h=this.#y[n];else if(n===this.#d)this.#d=this.#g[n];else{let a=this.#y[n];this.#g[a]=this.#g[n];let c=this.#g[n];this.#y[c]=this.#y[n]}this.#u--,this.#E.push(n)}}if(this.#p&&this.#m?.length){let n=this.#m,s;for(;s=n?.shift();)this.#i?.(...s)}return i}clear(){return this.#B("delete")}#B(e){for(let t of this.#C({allowStale:!0})){let i=this.#n[t];if(this.#l(i))i.__abortController.abort(new Error("deleted"));else{let n=this.#c[t];this.#b&&this.#s?.(i,n,e),this.#p&&this.#m?.push([i,n,e])}}if(this.#o.clear(),this.#n.fill(void 0),this.#c.fill(void 0),this.#v&&this.#A&&(this.#v.fill(0),this.#A.fill(0)),this.#T&&this.#T.fill(0),this.#d=0,this.#h=0,this.#E.length=0,this.#f=0,this.#u=0,this.#p&&this.#m){let t=this.#m,i;for(;i=t?.shift();)this.#i?.(...i)}}};var Xs=require("node:path"),Pv=require("node:url"),Ai=require("fs"),eP=Ye(require("node:fs"),1),Sn=require("node:fs/promises");var ll=require("node:events"),bm=Ye(require("node:stream"),1),Av=require("node:string_decoder");var bv=typeof process=="object"&&process?process:{stdout:null,stderr:null},WF=o(r=>!!r&&typeof r=="object"&&(r instanceof vn||r instanceof bm.default||HF(r)||zF(r)),"isStream"),HF=o(r=>!!r&&typeof r=="object"&&r instanceof ll.EventEmitter&&typeof r.pipe=="function"&&r.pipe!==bm.default.Writable.prototype.pipe,"isReadable"),zF=o(r=>!!r&&typeof r=="object"&&r instanceof ll.EventEmitter&&typeof r.write=="function"&&typeof r.end=="function","isWritable"),zi=Symbol("EOF"),Ki=Symbol("maybeEmitEnd"),_n=Symbol("emittedEnd"),nl=Symbol("emittingEnd"),co=Symbol("emittedError"),sl=Symbol("closed"),wv=Symbol("read"),al=Symbol("flush"),Ev=Symbol("flushChunk"),ii=Symbol("encoding"),Qs=Symbol("decoder"),St=Symbol("flowing"),uo=Symbol("paused"),Js=Symbol("resume"),bt=Symbol("buffer"),rr=Symbol("pipes"),wt=Symbol("bufferLength"),mm=Symbol("bufferPush"),ol=Symbol("bufferShift"),Vt=Symbol("objectMode"),ot=Symbol("destroyed"),gm=Symbol("error"),ym=Symbol("emitData"),Tv=Symbol("emitEnd"),_m=Symbol("emitEnd2"),Ei=Symbol("async"),vm=Symbol("abort"),cl=Symbol("aborted"),lo=Symbol("signal"),ts=Symbol("dataListeners"),br=Symbol("discarded"),fo=o(r=>Promise.resolve().then(r),"defer"),KF=o(r=>r(),"nodefer"),YF=o(r=>r==="end"||r==="finish"||r==="prefinish","isEndish"),QF=o(r=>r instanceof ArrayBuffer||!!r&&typeof r=="object"&&r.constructor&&r.constructor.name==="ArrayBuffer"&&r.byteLength>=0,"isArrayBufferLike"),JF=o(r=>!Buffer.isBuffer(r)&&ArrayBuffer.isView(r),"isArrayBufferView"),ul=class{static{o(this,"Pipe")}src;dest;opts;ondrain;constructor(e,t,i){this.src=e,this.dest=t,this.opts=i,this.ondrain=()=>e[Js](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Sm=class extends ul{static{o(this,"PipeProxyErrors")}unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,i){super(e,t,i),this.proxyErrors=n=>t.emit("error",n),e.on("error",this.proxyErrors)}},XF=o(r=>!!r.objectMode,"isObjectModeOptions"),ZF=o(r=>!r.objectMode&&!!r.encoding&&r.encoding!=="buffer","isEncodingOptions"),vn=class extends ll.EventEmitter{static{o(this,"Minipass")}[St]=!1;[uo]=!1;[rr]=[];[bt]=[];[Vt];[ii];[Ei];[Qs];[zi]=!1;[_n]=!1;[nl]=!1;[sl]=!1;[co]=null;[wt]=0;[ot]=!1;[lo];[cl]=!1;[ts]=0;[br]=!1;writable=!0;readable=!0;constructor(...e){let t=e[0]||{};if(super(),t.objectMode&&typeof t.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");XF(t)?(this[Vt]=!0,this[ii]=null):ZF(t)?(this[ii]=t.encoding,this[Vt]=!1):(this[Vt]=!1,this[ii]=null),this[Ei]=!!t.async,this[Qs]=this[ii]?new Av.StringDecoder(this[ii]):null,t&&t.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:o(()=>this[bt],"get")}),t&&t.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:o(()=>this[rr],"get")});let{signal:i}=t;i&&(this[lo]=i,i.aborted?this[vm]():i.addEventListener("abort",()=>this[vm]()))}get bufferLength(){return this[wt]}get encoding(){return this[ii]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Vt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Ei]}set async(e){this[Ei]=this[Ei]||!!e}[vm](){this[cl]=!0,this.emit("abort",this[lo]?.reason),this.destroy(this[lo]?.reason)}get aborted(){return this[cl]}set aborted(e){}write(e,t,i){if(this[cl])return!1;if(this[zi])throw new Error("write after end");if(this[ot])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(i=t,t="utf8"),t||(t="utf8");let n=this[Ei]?fo:KF;if(!this[Vt]&&!Buffer.isBuffer(e)){if(JF(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(QF(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Vt]?(this[St]&&this[wt]!==0&&this[al](!0),this[St]?this.emit("data",e):this[mm](e),this[wt]!==0&&this.emit("readable"),i&&n(i),this[St]):e.length?(typeof e=="string"&&!(t===this[ii]&&!this[Qs]?.lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[ii]&&(e=this[Qs].write(e)),this[St]&&this[wt]!==0&&this[al](!0),this[St]?this.emit("data",e):this[mm](e),this[wt]!==0&&this.emit("readable"),i&&n(i),this[St]):(this[wt]!==0&&this.emit("readable"),i&&n(i),this[St])}read(e){if(this[ot])return null;if(this[br]=!1,this[wt]===0||e===0||e&&e>this[wt])return this[Ki](),null;this[Vt]&&(e=null),this[bt].length>1&&!this[Vt]&&(this[bt]=[this[ii]?this[bt].join(""):Buffer.concat(this[bt],this[wt])]);let t=this[wv](e||null,this[bt][0]);return this[Ki](),t}[wv](e,t){if(this[Vt])this[ol]();else{let i=t;e===i.length||e===null?this[ol]():typeof i=="string"?(this[bt][0]=i.slice(e),t=i.slice(0,e),this[wt]-=e):(this[bt][0]=i.subarray(e),t=i.subarray(0,e),this[wt]-=e)}return this.emit("data",t),!this[bt].length&&!this[zi]&&this.emit("drain"),t}end(e,t,i){return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t="utf8"),e!==void 0&&this.write(e,t),i&&this.once("end",i),this[zi]=!0,this.writable=!1,(this[St]||!this[uo])&&this[Ki](),this}[Js](){this[ot]||(!this[ts]&&!this[rr].length&&(this[br]=!0),this[uo]=!1,this[St]=!0,this.emit("resume"),this[bt].length?this[al]():this[zi]?this[Ki]():this.emit("drain"))}resume(){return this[Js]()}pause(){this[St]=!1,this[uo]=!0,this[br]=!1}get destroyed(){return this[ot]}get flowing(){return this[St]}get paused(){return this[uo]}[mm](e){this[Vt]?this[wt]+=1:this[wt]+=e.length,this[bt].push(e)}[ol](){return this[Vt]?this[wt]-=1:this[wt]-=this[bt][0].length,this[bt].shift()}[al](e=!1){do;while(this[Ev](this[ol]())&&this[bt].length);!e&&!this[bt].length&&!this[zi]&&this.emit("drain")}[Ev](e){return this.emit("data",e),this[St]}pipe(e,t){if(this[ot])return e;this[br]=!1;let i=this[_n];return t=t||{},e===bv.stdout||e===bv.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,i?t.end&&e.end():(this[rr].push(t.proxyErrors?new Sm(this,e,t):new ul(this,e,t)),this[Ei]?fo(()=>this[Js]()):this[Js]()),e}unpipe(e){let t=this[rr].find(i=>i.dest===e);t&&(this[rr].length===1?(this[St]&&this[ts]===0&&(this[St]=!1),this[rr]=[]):this[rr].splice(this[rr].indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let i=super.on(e,t);if(e==="data")this[br]=!1,this[ts]++,!this[rr].length&&!this[St]&&this[Js]();else if(e==="readable"&&this[wt]!==0)super.emit("readable");else if(YF(e)&&this[_n])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[co]){let n=t;this[Ei]?fo(()=>n.call(this,this[co])):n.call(this,this[co])}return i}removeListener(e,t){return this.off(e,t)}off(e,t){let i=super.off(e,t);return e==="data"&&(this[ts]=this.listeners("data").length,this[ts]===0&&!this[br]&&!this[rr].length&&(this[St]=!1)),i}removeAllListeners(e){let t=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[ts]=0,!this[br]&&!this[rr].length&&(this[St]=!1)),t}get emittedEnd(){return this[_n]}[Ki](){!this[nl]&&!this[_n]&&!this[ot]&&this[bt].length===0&&this[zi]&&(this[nl]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[sl]&&this.emit("close"),this[nl]=!1)}emit(e,...t){let i=t[0];if(e!=="error"&&e!=="close"&&e!==ot&&this[ot])return!1;if(e==="data")return!this[Vt]&&!i?!1:this[Ei]?(fo(()=>this[ym](i)),!0):this[ym](i);if(e==="end")return this[Tv]();if(e==="close"){if(this[sl]=!0,!this[_n]&&!this[ot])return!1;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[co]=i,super.emit(gm,i);let s=!this[lo]||this.listeners("error").length?super.emit("error",i):!1;return this[Ki](),s}else if(e==="resume"){let s=super.emit("resume");return this[Ki](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let n=super.emit(e,...t);return this[Ki](),n}[ym](e){for(let i of this[rr])i.dest.write(e)===!1&&this.pause();let t=this[br]?!1:super.emit("data",e);return this[Ki](),t}[Tv](){return this[_n]?!1:(this[_n]=!0,this.readable=!1,this[Ei]?(fo(()=>this[_m]()),!0):this[_m]())}[_m](){if(this[Qs]){let t=this[Qs].end();if(t){for(let i of this[rr])i.dest.write(t);this[br]||super.emit("data",t)}}for(let t of this[rr])t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Vt]||(e.dataLength=0);let t=this.promise();return this.on("data",i=>{e.push(i),this[Vt]||(e.dataLength+=i.length)}),await t,e}async concat(){if(this[Vt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[ii]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,t)=>{this.on(ot,()=>t(new Error("stream destroyed"))),this.on("error",i=>t(i)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[br]=!1;let e=!1,t=o(async()=>(this.pause(),e=!0,{value:void 0,done:!0}),"stop");return{next:o(()=>{if(e)return t();let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[zi])return t();let s,a,c=o(h=>{this.off("data",u),this.off("end",f),this.off(ot,l),t(),a(h)},"onerr"),u=o(h=>{this.off("error",c),this.off("end",f),this.off(ot,l),this.pause(),s({value:h,done:!!this[zi]})},"ondata"),f=o(()=>{this.off("error",c),this.off("data",u),this.off(ot,l),t(),s({done:!0,value:void 0})},"onend"),l=o(()=>c(new Error("stream destroyed")),"ondestroy");return new Promise((h,p)=>{a=p,s=h,this.once(ot,l),this.once("error",c),this.once("end",f),this.once("data",u)})},"next"),throw:t,return:t,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[br]=!1;let e=!1,t=o(()=>(this.pause(),this.off(gm,t),this.off(ot,t),this.off("end",t),e=!0,{done:!0,value:void 0}),"stop"),i=o(()=>{if(e)return t();let n=this.read();return n===null?t():{done:!1,value:n}},"next");return this.once("end",t),this.once(gm,t),this.once(ot,t),{next:i,throw:t,return:t,[Symbol.iterator](){return this}}}destroy(e){if(this[ot])return e?this.emit("error",e):this.emit(ot),this;this[ot]=!0,this[br]=!0,this[bt].length=0,this[wt]=0;let t=this;return typeof t.close=="function"&&!this[sl]&&t.close(),e?this.emit("error",e):this.emit(ot),this}static get isStream(){return WF}};var tP=Ai.realpathSync.native,po={lstatSync:Ai.lstatSync,readdir:Ai.readdir,readdirSync:Ai.readdirSync,readlinkSync:Ai.readlinkSync,realpathSync:tP,promises:{lstat:Sn.lstat,readdir:Sn.readdir,readlink:Sn.readlink,realpath:Sn.realpath}},Iv=o(r=>!r||r===po||r===eP?po:{...po,...r,promises:{...po.promises,...r.promises||{}}},"fsFromOption"),Dv=/^\\\\\?\\([a-z]:)\\?$/i,rP=o(r=>r.replace(/\//g,"\\").replace(Dv,"$1\\"),"uncToDrive"),iP=/[\\\/]/,Ir=0,Rv=1,Nv=2,Ti=4,kv=6,jv=8,rs=10,Mv=12,Pr=15,ho=~Pr,wm=16,xv=32,mo=64,ni=128,fl=256,dl=512,Ov=mo|ni|dl,nP=1023,Em=o(r=>r.isFile()?jv:r.isDirectory()?Ti:r.isSymbolicLink()?rs:r.isCharacterDevice()?Nv:r.isBlockDevice()?kv:r.isSocket()?Mv:r.isFIFO()?Rv:Ir,"entToType"),Cv=new Map,go=o(r=>{let e=Cv.get(r);if(e)return e;let t=r.normalize("NFKD");return Cv.set(r,t),t},"normalize"),Fv=new Map,hl=o(r=>{let e=Fv.get(r);if(e)return e;let t=go(r.toLowerCase());return Fv.set(r,t),t},"normalizeNocase"),pl=class extends oo{static{o(this,"ResolveCache")}constructor(){super({max:256})}},Tm=class extends oo{static{o(this,"ChildrenCache")}constructor(e=16*1024){super({maxSize:e,sizeCalculation:o(t=>t.length+1,"sizeCalculation")})}},Lv=Symbol("PathScurry setAsCwd"),qt=class{static{o(this,"PathBase")}name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#s;get mode(){return this.#s}#i;get nlink(){return this.#i}#a;get uid(){return this.#a}#S;get gid(){return this.#S}#u;get rdev(){return this.#u}#f;get blksize(){return this.#f}#o;get ino(){return this.#o}#c;get size(){return this.#c}#n;get blocks(){return this.#n}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#h;get birthtimeMs(){return this.#h}#E;get atime(){return this.#E}#m;get mtime(){return this.#m}#T;get ctime(){return this.#T}#A;get birthtime(){return this.#A}#v;#b;#w;#p;#F;#x;#r;#D;#_;#P;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,t=Ir,i,n,s,a,c){this.name=e,this.#v=s?hl(e):go(e),this.#r=t&nP,this.nocase=s,this.roots=n,this.root=i||this,this.#D=a,this.#w=c.fullpath,this.#F=c.relative,this.#x=c.relativePosix,this.parent=c.parent,this.parent?this.#e=this.parent.#e:this.#e=Iv(c.fs)}depth(){return this.#b!==void 0?this.#b:this.parent?this.#b=this.parent.depth()+1:this.#b=0}childrenCache(){return this.#D}resolve(e){if(!e)return this;let t=this.getRootString(e),n=e.substring(t.length).split(this.splitSep);return t?this.getRoot(t).#R(n):this.#R(n)}#R(e){let t=this;for(let i of e)t=t.child(i);return t}children(){let e=this.#D.get(this);if(e)return e;let t=Object.assign([],{provisional:0});return this.#D.set(this,t),this.#r&=~wm,t}child(e,t){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let i=this.children(),n=this.nocase?hl(e):go(e);for(let u of i)if(u.#v===n)return u;let s=this.parent?this.sep:"",a=this.#w?this.#w+s+e:void 0,c=this.newChild(e,Ir,{...t,parent:this,fullpath:a});return this.canReaddir()||(c.#r|=ni),i.push(c),c}relative(){if(this.isCWD)return"";if(this.#F!==void 0)return this.#F;let e=this.name,t=this.parent;if(!t)return this.#F=this.name;let i=t.relative();return i+(!i||!t.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#x!==void 0)return this.#x;let e=this.name,t=this.parent;if(!t)return this.#x=this.fullpathPosix();let i=t.relativePosix();return i+(!i||!t.parent?"":"/")+e}fullpath(){if(this.#w!==void 0)return this.#w;let e=this.name,t=this.parent;if(!t)return this.#w=this.name;let n=t.fullpath()+(t.parent?this.sep:"")+e;return this.#w=n}fullpathPosix(){if(this.#p!==void 0)return this.#p;if(this.sep==="/")return this.#p=this.fullpath();if(!this.parent){let n=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(n)?this.#p=`//?/${n}`:this.#p=n}let e=this.parent,t=e.fullpathPosix(),i=t+(!t||!e.parent?"":"/")+this.name;return this.#p=i}isUnknown(){return(this.#r&Pr)===Ir}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&Pr)===jv}isDirectory(){return(this.#r&Pr)===Ti}isCharacterDevice(){return(this.#r&Pr)===Nv}isBlockDevice(){return(this.#r&Pr)===kv}isFIFO(){return(this.#r&Pr)===Rv}isSocket(){return(this.#r&Pr)===Mv}isSymbolicLink(){return(this.#r&rs)===rs}lstatCached(){return this.#r&xv?this:void 0}readlinkCached(){return this.#_}realpathCached(){return this.#P}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#_)return!0;if(!this.parent)return!1;let e=this.#r&Pr;return!(e!==Ir&&e!==rs||this.#r&fl||this.#r&ni)}calledReaddir(){return!!(this.#r&wm)}isENOENT(){return!!(this.#r&ni)}isNamed(e){return this.nocase?this.#v===hl(e):this.#v===go(e)}async readlink(){let e=this.#_;if(e)return e;if(this.canReadlink()&&this.parent)try{let t=await this.#e.promises.readlink(this.fullpath()),i=(await this.parent.realpath())?.resolve(t);if(i)return this.#_=i}catch(t){this.#l(t.code);return}}readlinkSync(){let e=this.#_;if(e)return e;if(this.canReadlink()&&this.parent)try{let t=this.#e.readlinkSync(this.fullpath()),i=this.parent.realpathSync()?.resolve(t);if(i)return this.#_=i}catch(t){this.#l(t.code);return}}#N(e){this.#r|=wm;for(let t=e.provisional;t<e.length;t++){let i=e[t];i&&i.#k()}}#k(){this.#r&ni||(this.#r=(this.#r|ni)&ho,this.#O())}#O(){let e=this.children();e.provisional=0;for(let t of e)t.#k()}#C(){this.#r|=dl,this.#j()}#j(){if(this.#r&mo)return;let e=this.#r;(e&Pr)===Ti&&(e&=ho),this.#r=e|mo,this.#O()}#M(e=""){e==="ENOTDIR"||e==="EPERM"?this.#j():e==="ENOENT"?this.#k():this.children().provisional=0}#L(e=""){e==="ENOTDIR"?this.parent.#j():e==="ENOENT"&&this.#k()}#l(e=""){let t=this.#r;t|=fl,e==="ENOENT"&&(t|=ni),(e==="EINVAL"||e==="UNKNOWN")&&(t&=ho),this.#r=t,e==="ENOTDIR"&&this.parent&&this.parent.#j()}#V(e,t){return this.#I(e,t)||this.#q(e,t)}#q(e,t){let i=Em(e),n=this.newChild(e.name,i,{parent:this}),s=n.#r&Pr;return s!==Ti&&s!==rs&&s!==Ir&&(n.#r|=mo),t.unshift(n),t.provisional++,n}#I(e,t){for(let i=t.provisional;i<t.length;i++){let n=t[i];if((this.nocase?hl(e.name):go(e.name))===n.#v)return this.#B(e,n,i,t)}}#B(e,t,i,n){let s=t.name;return t.#r=t.#r&ho|Em(e),s!==e.name&&(t.name=e.name),i!==n.provisional&&(i===n.length-1?n.pop():n.splice(i,1),n.unshift(t)),n.provisional++,t}async lstat(){if((this.#r&ni)===0)try{return this.#W(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#L(e.code)}}lstatSync(){if((this.#r&ni)===0)try{return this.#W(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#L(e.code)}}#W(e){let{atime:t,atimeMs:i,birthtime:n,birthtimeMs:s,blksize:a,blocks:c,ctime:u,ctimeMs:f,dev:l,gid:h,ino:p,mode:g,mtime:S,mtimeMs:b,nlink:x,rdev:F,size:P,uid:V}=e;this.#E=t,this.#g=i,this.#A=n,this.#h=s,this.#f=a,this.#n=c,this.#T=u,this.#d=f,this.#t=l,this.#S=h,this.#o=p,this.#s=g,this.#m=S,this.#y=b,this.#i=x,this.#u=F,this.#c=P,this.#a=V;let H=Em(e);this.#r=this.#r&ho|H|xv,H!==Ir&&H!==Ti&&H!==rs&&(this.#r|=mo)}#$=[];#G=!1;#H(e){this.#G=!1;let t=this.#$.slice();this.#$.length=0,t.forEach(i=>i(null,e))}readdirCB(e,t=!1){if(!this.canReaddir()){t?e(null,[]):queueMicrotask(()=>e(null,[]));return}let i=this.children();if(this.calledReaddir()){let s=i.slice(0,i.provisional);t?e(null,s):queueMicrotask(()=>e(null,s));return}if(this.#$.push(e),this.#G)return;this.#G=!0;let n=this.fullpath();this.#e.readdir(n,{withFileTypes:!0},(s,a)=>{if(s)this.#M(s.code),i.provisional=0;else{for(let c of a)this.#V(c,i);this.#N(i)}this.#H(i.slice(0,i.provisional))})}#U;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let t=this.fullpath();if(this.#U)await this.#U;else{let i=o(()=>{},"resolve");this.#U=new Promise(n=>i=n);try{for(let n of await this.#e.promises.readdir(t,{withFileTypes:!0}))this.#V(n,e);this.#N(e)}catch(n){this.#M(n.code),e.provisional=0}this.#U=void 0,i()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let t=this.fullpath();try{for(let i of this.#e.readdirSync(t,{withFileTypes:!0}))this.#V(i,e);this.#N(e)}catch(i){this.#M(i.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&Ov)return!1;let e=Pr&this.#r;return e===Ir||e===Ti||e===rs}shouldWalk(e,t){return(this.#r&Ti)===Ti&&!(this.#r&Ov)&&!e.has(this)&&(!t||t(this))}async realpath(){if(this.#P)return this.#P;if(!((dl|fl|ni)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#P=this.resolve(e)}catch{this.#C()}}realpathSync(){if(this.#P)return this.#P;if(!((dl|fl|ni)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#P=this.resolve(e)}catch{this.#C()}}[Lv](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let t=new Set([]),i=[],n=this;for(;n&&n.parent;)t.add(n),n.#F=i.join(this.sep),n.#x=i.join("/"),n=n.parent,i.push("..");for(n=e;n&&n.parent&&!t.has(n);)n.#F=void 0,n.#x=void 0,n=n.parent}},ml=class r extends qt{static{o(this,"PathWin32")}sep="\\";splitSep=iP;constructor(e,t=Ir,i,n,s,a,c){super(e,t,i,n,s,a,c)}newChild(e,t=Ir,i={}){return new r(e,t,this.root,this.roots,this.nocase,this.childrenCache(),i)}getRootString(e){return Xs.win32.parse(e).root}getRoot(e){if(e=rP(e.toUpperCase()),e===this.root.name)return this.root;for(let[t,i]of Object.entries(this.roots))if(this.sameRoot(e,t))return this.roots[e]=i;return this.roots[e]=new Zs(e,this).root}sameRoot(e,t=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(Dv,"$1\\"),e===t}},gl=class r extends qt{static{o(this,"PathPosix")}splitSep="/";sep="/";constructor(e,t=Ir,i,n,s,a,c){super(e,t,i,n,s,a,c)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,t=Ir,i={}){return new r(e,t,this.root,this.roots,this.nocase,this.childrenCache(),i)}},yl=class{static{o(this,"PathScurryBase")}root;rootPath;roots;cwd;#e;#t;#s;nocase;#i;constructor(e=process.cwd(),t,i,{nocase:n,childrenCacheSize:s=16*1024,fs:a=po}={}){this.#i=Iv(a),(e instanceof URL||e.startsWith("file://"))&&(e=(0,Pv.fileURLToPath)(e));let c=t.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(c),this.#e=new pl,this.#t=new pl,this.#s=new Tm(s);let u=c.substring(this.rootPath.length).split(i);if(u.length===1&&!u[0]&&u.pop(),n===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=n,this.root=this.newRoot(this.#i),this.roots[this.rootPath]=this.root;let f=this.root,l=u.length-1,h=t.sep,p=this.rootPath,g=!1;for(let S of u){let b=l--;f=f.child(S,{relative:new Array(b).fill("..").join(h),relativePosix:new Array(b).fill("..").join("/"),fullpath:p+=(g?"":h)+S}),g=!0}this.cwd=f}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#s}resolve(...e){let t="";for(let s=e.length-1;s>=0;s--){let a=e[s];if(!(!a||a===".")&&(t=t?`${a}/${t}`:a,this.isAbsolute(a)))break}let i=this.#e.get(t);if(i!==void 0)return i;let n=this.cwd.resolve(t).fullpath();return this.#e.set(t,n),n}resolvePosix(...e){let t="";for(let s=e.length-1;s>=0;s--){let a=e[s];if(!(!a||a===".")&&(t=t?`${a}/${t}`:a,this.isAbsolute(a)))break}let i=this.#t.get(t);if(i!==void 0)return i;let n=this.cwd.resolve(t).fullpathPosix();return this.#t.set(t,n),n}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,t={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd);let{withFileTypes:i}=t;if(e.canReaddir()){let n=await e.readdir();return i?n:n.map(s=>s.name)}else return[]}readdirSync(e=this.cwd,t={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd);let{withFileTypes:i=!0}=t;return e.canReaddir()?i?e.readdirSync():e.readdirSync().map(n=>n.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e.withFileTypes,e=this.cwd);let i=await e.readlink();return t?i:i?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e.withFileTypes,e=this.cwd);let i=e.readlinkSync();return t?i:i?.fullpath()}async realpath(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e.withFileTypes,e=this.cwd);let i=await e.realpath();return t?i:i?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e.withFileTypes,e=this.cwd);let i=e.realpathSync();return t?i:i?.fullpath()}async walk(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:a}=t,c=[];(!s||s(e))&&c.push(i?e:e.fullpath());let u=new Set,f=o((h,p)=>{u.add(h),h.readdirCB((g,S)=>{if(g)return p(g);let b=S.length;if(!b)return p();let x=o(()=>{--b===0&&p()},"next");for(let F of S)(!s||s(F))&&c.push(i?F:F.fullpath()),n&&F.isSymbolicLink()?F.realpath().then(P=>P?.isUnknown()?P.lstat():P).then(P=>P?.shouldWalk(u,a)?f(P,x):x()):F.shouldWalk(u,a)?f(F,x):x()},!0)},"walk"),l=e;return new Promise((h,p)=>{f(l,g=>{if(g)return p(g);h(c)})})}walkSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:a}=t,c=[];(!s||s(e))&&c.push(i?e:e.fullpath());let u=new Set([e]);for(let f of u){let l=f.readdirSync();for(let h of l){(!s||s(h))&&c.push(i?h:h.fullpath());let p=h;if(h.isSymbolicLink()){if(!(n&&(p=h.realpathSync())))continue;p.isUnknown()&&p.lstatSync()}p.shouldWalk(u,a)&&u.add(p)}}return c}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,t={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd),this.stream(e,t)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:a}=t;(!s||s(e))&&(yield i?e:e.fullpath());let c=new Set([e]);for(let u of c){let f=u.readdirSync();for(let l of f){(!s||s(l))&&(yield i?l:l.fullpath());let h=l;if(l.isSymbolicLink()){if(!(n&&(h=l.realpathSync())))continue;h.isUnknown()&&h.lstatSync()}h.shouldWalk(c,a)&&c.add(h)}}}stream(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:a}=t,c=new vn({objectMode:!0});(!s||s(e))&&c.write(i?e:e.fullpath());let u=new Set,f=[e],l=0,h=o(()=>{let p=!1;for(;!p;){let g=f.shift();if(!g){l===0&&c.end();return}l++,u.add(g);let S=o((x,F,P=!1)=>{if(x)return c.emit("error",x);if(n&&!P){let V=[];for(let H of F)H.isSymbolicLink()&&V.push(H.realpath().then(K=>K?.isUnknown()?K.lstat():K));if(V.length){Promise.all(V).then(()=>S(null,F,!0));return}}for(let V of F)V&&(!s||s(V))&&(c.write(i?V:V.fullpath())||(p=!0));l--;for(let V of F){let H=V.realpathCached()||V;H.shouldWalk(u,a)&&f.push(H)}p&&!c.flowing?c.once("drain",h):b||h()},"onReaddir"),b=!0;g.readdirCB(S,!0),b=!1}},"process");return h(),c}streamSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:a}=t,c=new vn({objectMode:!0}),u=new Set;(!s||s(e))&&c.write(i?e:e.fullpath());let f=[e],l=0,h=o(()=>{let p=!1;for(;!p;){let g=f.shift();if(!g){l===0&&c.end();return}l++,u.add(g);let S=g.readdirSync();for(let b of S)(!s||s(b))&&(c.write(i?b:b.fullpath())||(p=!0));l--;for(let b of S){let x=b;if(b.isSymbolicLink()){if(!(n&&(x=b.realpathSync())))continue;x.isUnknown()&&x.lstatSync()}x.shouldWalk(u,a)&&f.push(x)}}p&&!c.flowing&&c.once("drain",h)},"process");return h(),c}chdir(e=this.cwd){let t=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[Lv](t)}},Zs=class extends yl{static{o(this,"PathScurryWin32")}sep="\\";constructor(e=process.cwd(),t={}){let{nocase:i=!0}=t;super(e,Xs.win32,"\\",{...t,nocase:i}),this.nocase=i;for(let n=this.cwd;n;n=n.parent)n.nocase=this.nocase}parseRootPath(e){return Xs.win32.parse(e).root.toUpperCase()}newRoot(e){return new ml(this.rootPath,Ti,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},ea=class extends yl{static{o(this,"PathScurryPosix")}sep="/";constructor(e=process.cwd(),t={}){let{nocase:i=!1}=t;super(e,Xs.posix,"/",{...t,nocase:i}),this.nocase=i}parseRootPath(e){return"/"}newRoot(e){return new gl(this.rootPath,Ti,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},yo=class extends ea{static{o(this,"PathScurryDarwin")}constructor(e=process.cwd(),t={}){let{nocase:i=!0}=t;super(e,{...t,nocase:i})}},CV=process.platform==="win32"?ml:gl,Vv=process.platform==="win32"?Zs:process.platform==="darwin"?yo:ea;var sP=o(r=>r.length>=1,"isPatternList"),aP=o(r=>r.length>=1,"isGlobList"),ta=class r{static{o(this,"Pattern")}#e;#t;#s;length;#i;#a;#S;#u;#f;#o;#c=!0;constructor(e,t,i,n){if(!sP(e))throw new TypeError("empty pattern list");if(!aP(t))throw new TypeError("empty glob list");if(t.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,i<0||i>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=t,this.#s=i,this.#i=n,this.#s===0){if(this.isUNC()){let[s,a,c,u,...f]=this.#e,[l,h,p,g,...S]=this.#t;f[0]===""&&(f.shift(),S.shift());let b=[s,a,c,u,""].join("/"),x=[l,h,p,g,""].join("/");this.#e=[b,...f],this.#t=[x,...S],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[s,...a]=this.#e,[c,...u]=this.#t;a[0]===""&&(a.shift(),u.shift());let f=s+"/",l=c+"/";this.#e=[f,...a],this.#t=[l,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#s]}isString(){return typeof this.#e[this.#s]=="string"}isGlobstar(){return this.#e[this.#s]===Dt}isRegExp(){return this.#e[this.#s]instanceof RegExp}globString(){return this.#S=this.#S||(this.#s===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#s).join("/"))}hasMore(){return this.length>this.#s+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new r(this.#e,this.#t,this.#s+1,this.#i),this.#a.#o=this.#o,this.#a.#f=this.#f,this.#a.#u=this.#u,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#f!==void 0?this.#f:this.#f=this.#i==="win32"&&this.#s===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#i==="win32"&&this.#s===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#o!==void 0?this.#o:this.#o=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#s===0?e:""}checkFollowGlobstar(){return!(this.#s===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#s===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var oP=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",ra=class{static{o(this,"Ignore")}relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:t,nocase:i,noext:n,noglobstar:s,platform:a=oP}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=a,this.mmopts={dot:!0,nobrace:t,nocase:i,noext:n,noglobstar:s,optimizationLevel:2,platform:a,nocomment:!0,nonegate:!0};for(let c of e)this.add(c)}add(e){let t=new Sr(e,this.mmopts);for(let i=0;i<t.set.length;i++){let n=t.set[i],s=t.globParts[i];if(!n||!s)throw new Error("invalid pattern object");for(;n[0]==="."&&s[0]===".";)n.shift(),s.shift();let a=new ta(n,s,0,this.platform),c=new Sr(a.globString(),this.mmopts),u=s[s.length-1]==="**",f=a.isAbsolute();f?this.absolute.push(c):this.relative.push(c),u&&(f?this.absoluteChildren.push(c):this.relativeChildren.push(c))}}ignored(e){let t=e.fullpath(),i=`${t}/`,n=e.relative()||".",s=`${n}/`;for(let a of this.relative)if(a.match(n)||a.match(s))return!0;for(let a of this.absolute)if(a.match(t)||a.match(i))return!0;return!1}childrenIgnored(e){let t=e.fullpath()+"/",i=(e.relative()||".")+"/";for(let n of this.relativeChildren)if(n.match(i))return!0;for(let n of this.absoluteChildren)if(n.match(t))return!0;return!1}};var Am=class r{static{o(this,"HasWalkedCache")}store;constructor(e=new Map){this.store=e}copy(){return new r(new Map(this.store))}hasWalked(e,t){return this.store.get(e.fullpath())?.has(t.globString())}storeWalked(e,t){let i=e.fullpath(),n=this.store.get(i);n?n.add(t.globString()):this.store.set(i,new Set([t.globString()]))}},xm=class{static{o(this,"MatchRecord")}store=new Map;add(e,t,i){let n=(t?2:0)|(i?1:0),s=this.store.get(e);this.store.set(e,s===void 0?n:n&s)}entries(){return[...this.store.entries()].map(([e,t])=>[e,!!(t&2),!!(t&1)])}},Om=class{static{o(this,"SubWalks")}store=new Map;add(e,t){if(!e.canReaddir())return;let i=this.store.get(e);i?i.find(n=>n.globString()===t.globString())||i.push(t):this.store.set(e,[t])}get(e){let t=this.store.get(e);if(!t)throw new Error("attempting to walk unknown path");return t}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},_o=class r{static{o(this,"Processor")}hasWalkedCache;matches=new xm;subwalks=new Om;patterns;follow;dot;opts;constructor(e,t){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=t?t.copy():new Am}processPatterns(e,t){this.patterns=t;let i=t.map(n=>[e,n]);for(let[n,s]of i){this.hasWalkedCache.storeWalked(n,s);let a=s.root(),c=s.isAbsolute()&&this.opts.absolute!==!1;if(a){n=n.resolve(a==="/"&&this.opts.root!==void 0?this.opts.root:a);let h=s.rest();if(h)s=h;else{this.matches.add(n,!0,!1);continue}}if(n.isENOENT())continue;let u,f,l=!1;for(;typeof(u=s.pattern())=="string"&&(f=s.rest());)n=n.resolve(u),s=f,l=!0;if(u=s.pattern(),f=s.rest(),l){if(this.hasWalkedCache.hasWalked(n,s))continue;this.hasWalkedCache.storeWalked(n,s)}if(typeof u=="string"){let h=u===".."||u===""||u===".";this.matches.add(n.resolve(u),c,h);continue}else if(u===Dt){(!n.isSymbolicLink()||this.follow||s.checkFollowGlobstar())&&this.subwalks.add(n,s);let h=f?.pattern(),p=f?.rest();if(!f||(h===""||h===".")&&!p)this.matches.add(n,c,h===""||h===".");else if(h===".."){let g=n.parent||n;p?this.hasWalkedCache.hasWalked(g,p)||this.subwalks.add(g,p):this.matches.add(g,c,!0)}}else u instanceof RegExp&&this.subwalks.add(n,s)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new r(this.opts,this.hasWalkedCache)}filterEntries(e,t){let i=this.subwalks.get(e),n=this.child();for(let s of t)for(let a of i){let c=a.isAbsolute(),u=a.pattern(),f=a.rest();u===Dt?n.testGlobstar(s,a,f,c):u instanceof RegExp?n.testRegExp(s,u,f,c):n.testString(s,u,f,c)}return n}testGlobstar(e,t,i,n){if((this.dot||!e.name.startsWith("."))&&(t.hasMore()||this.matches.add(e,n,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,t):e.isSymbolicLink()&&(i&&t.checkFollowGlobstar()?this.subwalks.add(e,i):t.markFollowGlobstar()&&this.subwalks.add(e,t)))),i){let s=i.pattern();if(typeof s=="string"&&s!==".."&&s!==""&&s!==".")this.testString(e,s,i.rest(),n);else if(s===".."){let a=e.parent||e;this.subwalks.add(a,i)}else s instanceof RegExp&&this.testRegExp(e,s,i.rest(),n)}}testRegExp(e,t,i,n){t.test(e.name)&&(i?this.subwalks.add(e,i):this.matches.add(e,n,!1))}testString(e,t,i,n){e.isNamed(t)&&(i?this.subwalks.add(e,i):this.matches.add(e,n,!1))}};var cP=o((r,e)=>typeof r=="string"?new ra([r],e):Array.isArray(r)?new ra(r,e):r,"makeIgnore"),_l=class{static{o(this,"GlobUtil")}path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#s;signal;maxDepth;includeChildMatches;constructor(e,t,i){if(this.patterns=e,this.path=t,this.opts=i,this.#s=!i.posix&&i.platform==="win32"?"\\":"/",this.includeChildMatches=i.includeChildMatches!==!1,(i.ignore||!this.includeChildMatches)&&(this.#t=cP(i.ignore??[],i),!this.includeChildMatches&&typeof this.#t.add!="function")){let n="cannot ignore child matches, ignore lacks add() method.";throw new Error(n)}this.maxDepth=i.maxDepth||1/0,i.signal&&(this.signal=i.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#i(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,t){if(t&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=e.realpathCached()||await e.realpath(),!i)return;e=i}let s=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let a=await s.realpath();a&&(a.isUnknown()||this.opts.stat)&&await a.lstat()}return this.matchCheckTest(s,t)}matchCheckTest(e,t){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!t||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#i(e)?e:void 0}matchCheckSync(e,t){if(t&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=e.realpathCached()||e.realpathSync(),!i)return;e=i}let s=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let a=s.realpathSync();a&&(a?.isUnknown()||this.opts.stat)&&a.lstatSync()}return this.matchCheckTest(s,t)}matchFinish(e,t){if(this.#i(e))return;if(!this.includeChildMatches&&this.#t?.add){let s=`${e.relativePosix()}/**`;this.#t.add(s)}let i=this.opts.absolute===void 0?t:this.opts.absolute;this.seen.add(e);let n=this.opts.mark&&e.isDirectory()?this.#s:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(i){let s=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(s+n)}else{let s=this.opts.posix?e.relativePosix():e.relative(),a=this.opts.dotRelative&&!s.startsWith(".."+this.#s)?"."+this.#s:"";this.matchEmit(s?a+s+n:"."+n)}}async match(e,t,i){let n=await this.matchCheck(e,i);n&&this.matchFinish(n,t)}matchSync(e,t,i){let n=this.matchCheckSync(e,i);n&&this.matchFinish(n,t)}walkCB(e,t,i){this.signal?.aborted&&i(),this.walkCB2(e,t,new _o(this.opts),i)}walkCB2(e,t,i,n){if(this.#a(e))return n();if(this.signal?.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2(e,t,i,n));return}i.processPatterns(e,t);let s=1,a=o(()=>{--s===0&&n()},"next");for(let[c,u,f]of i.matches.entries())this.#i(c)||(s++,this.match(c,u,f).then(()=>a()));for(let c of i.subwalkTargets()){if(this.maxDepth!==1/0&&c.depth()>=this.maxDepth)continue;s++;let u=c.readdirCached();c.calledReaddir()?this.walkCB3(c,u,i,a):c.readdirCB((f,l)=>this.walkCB3(c,l,i,a),!0)}a()}walkCB3(e,t,i,n){i=i.filterEntries(e,t);let s=1,a=o(()=>{--s===0&&n()},"next");for(let[c,u,f]of i.matches.entries())this.#i(c)||(s++,this.match(c,u,f).then(()=>a()));for(let[c,u]of i.subwalks.entries())s++,this.walkCB2(c,u,i.child(),a);a()}walkCBSync(e,t,i){this.signal?.aborted&&i(),this.walkCB2Sync(e,t,new _o(this.opts),i)}walkCB2Sync(e,t,i,n){if(this.#a(e))return n();if(this.signal?.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2Sync(e,t,i,n));return}i.processPatterns(e,t);let s=1,a=o(()=>{--s===0&&n()},"next");for(let[c,u,f]of i.matches.entries())this.#i(c)||this.matchSync(c,u,f);for(let c of i.subwalkTargets()){if(this.maxDepth!==1/0&&c.depth()>=this.maxDepth)continue;s++;let u=c.readdirSync();this.walkCB3Sync(c,u,i,a)}a()}walkCB3Sync(e,t,i,n){i=i.filterEntries(e,t);let s=1,a=o(()=>{--s===0&&n()},"next");for(let[c,u,f]of i.matches.entries())this.#i(c)||this.matchSync(c,u,f);for(let[c,u]of i.subwalks.entries())s++,this.walkCB2Sync(c,u,i.child(),a);a()}},vo=class extends _l{static{o(this,"GlobWalker")}matches=new Set;constructor(e,t,i){super(e,t,i)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,t)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?t(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},So=class extends _l{static{o(this,"GlobStream")}results;constructor(e,t,i){super(e,t,i),this.results=new vn({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var uP=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",si=class{static{o(this,"Glob")}absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,t){if(!t)throw new TypeError("glob options required");if(this.withFileTypes=!!t.withFileTypes,this.signal=t.signal,this.follow=!!t.follow,this.dot=!!t.dot,this.dotRelative=!!t.dotRelative,this.nodir=!!t.nodir,this.mark=!!t.mark,t.cwd?(t.cwd instanceof URL||t.cwd.startsWith("file://"))&&(t.cwd=(0,qv.fileURLToPath)(t.cwd)):this.cwd="",this.cwd=t.cwd||"",this.root=t.root,this.magicalBraces=!!t.magicalBraces,this.nobrace=!!t.nobrace,this.noext=!!t.noext,this.realpath=!!t.realpath,this.absolute=t.absolute,this.includeChildMatches=t.includeChildMatches!==!1,this.noglobstar=!!t.noglobstar,this.matchBase=!!t.matchBase,this.maxDepth=typeof t.maxDepth=="number"?t.maxDepth:1/0,this.stat=!!t.stat,this.ignore=t.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(t.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=t.platform||uP,this.opts={...t,platform:this.platform},t.scurry){if(this.scurry=t.scurry,t.nocase!==void 0&&t.nocase!==t.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=t.platform==="win32"?Zs:t.platform==="darwin"?yo:t.platform?ea:Vv;this.scurry=new u(this.cwd,{nocase:t.nocase,fs:t.fs})}this.nocase=this.scurry.nocase;let i=this.platform==="darwin"||this.platform==="win32",n={...t,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:i,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},s=this.pattern.map(u=>new Sr(u,n)),[a,c]=s.reduce((u,f)=>(u[0].push(...f.set),u[1].push(...f.globParts),u),[[],[]]);this.patterns=a.map((u,f)=>{let l=c[f];if(!l)throw new Error("invalid pattern object");return new ta(u,l,0,this.platform)})}async walk(){return[...await new vo(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new vo(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new So(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new So(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Cm=o((r,e={})=>{Array.isArray(r)||(r=[r]);for(let t of r)if(new Sr(t,e).hasMagic())return!0;return!1},"hasMagic");function Sl(r,e={}){return new si(r,e).streamSync()}o(Sl,"globStreamSync");function Uv(r,e={}){return new si(r,e).stream()}o(Uv,"globStream");function $v(r,e={}){return new si(r,e).walkSync()}o($v,"globSync");async function Bv(r,e={}){return new si(r,e).walk()}o(Bv,"glob_");function bl(r,e={}){return new si(r,e).iterateSync()}o(bl,"globIterateSync");function Gv(r,e={}){return new si(r,e).iterate()}o(Gv,"globIterate");var lP=Sl,fP=Object.assign(Uv,{sync:Sl}),hP=bl,dP=Object.assign(Gv,{sync:bl}),pP=Object.assign($v,{stream:Sl,iterate:bl}),vl=Object.assign(Bv,{glob:Bv,globSync:$v,sync:pP,globStream:Uv,stream:fP,globStreamSync:Sl,streamSync:lP,globIterate:Gv,iterate:dP,globIterateSync:bl,iterateSync:hP,Glob:si,hasMagic:Cm,escape:zs,unescape:ri});vl.glob=vl;var is=Ye(ln());var ia=class{constructor(e){this.rootPath=e}static{o(this,"NodeFsAdapter")}async readFile(e){let t=this.resolvePath(e);if(!await mt.default.pathExists(t))throw new is.FileNotFoundError(e);return mt.default.readFile(t,"utf-8")}async fileExists(e){let t=this.resolvePath(e);return mt.default.pathExists(t)}async getFileMetadata(e){let t=await this.readFile(e);return this.extractFrontmatter(t)}async createFile(e,t){let i=this.resolvePath(e);if(await mt.default.pathExists(i))throw new is.FileAlreadyExistsError(e);return await mt.default.ensureDir(bn.default.dirname(i)),await mt.default.writeFile(i,t,"utf-8"),e}async updateFile(e,t){let i=this.resolvePath(e);if(!await mt.default.pathExists(i))throw new is.FileNotFoundError(e);await mt.default.writeFile(i,t,"utf-8")}async writeFile(e,t){let i=this.resolvePath(e);await mt.default.ensureDir(bn.default.dirname(i)),await mt.default.writeFile(i,t,"utf-8")}async deleteFile(e){let t=this.resolvePath(e);if(!await mt.default.pathExists(t))throw new is.FileNotFoundError(e);await mt.default.remove(t)}async renameFile(e,t){let i=this.resolvePath(e),n=this.resolvePath(t);if(!await mt.default.pathExists(i))throw new is.FileNotFoundError(e);await mt.default.ensureDir(bn.default.dirname(n)),await mt.default.move(i,n)}async createDirectory(e){let t=this.resolvePath(e);await mt.default.ensureDir(t)}async directoryExists(e){let t=this.resolvePath(e);return await mt.default.pathExists(t)?(await mt.default.stat(t)).isDirectory():!1}async getMarkdownFiles(e){let t=e?this.resolvePath(e):this.rootPath,i=bn.default.join(t,"**/*.md");return(await vl(i,{nodir:!0})).map(a=>bn.default.relative(this.rootPath,a))}async findFilesByMetadata(e){let t=await this.getMarkdownFiles(),i=[];for(let n of t)try{let s=await this.getFileMetadata(n);this.matchesQuery(s,e)&&i.push(n)}catch{continue}return i}async findFileByUID(e){let t=await this.findFilesByMetadata({exo__Asset_uid:e});return t.length>0?t[0]:null}resolvePath(e){return bn.default.isAbsolute(e)?e:bn.default.join(this.rootPath,e)}extractFrontmatter(e){let t=/^---\n([\s\S]*?)\n---/,i=e.match(t);if(!i)return{};try{let n=to.load(i[1]);return typeof n=="object"&&n!==null?n:{}}catch{return{}}}matchesQuery(e,t){for(let[i,n]of Object.entries(t)){let s=e[i];if(Array.isArray(s)){if(!s.some(a=>this.normalizeValue(a)===this.normalizeValue(n)))return!1}else if(this.normalizeValue(s)!==this.normalizeValue(n))return!1}return!0}normalizeValue(e){return e==null?"":String(e).replace(/["'[\]]/g,"").trim()}};var bo=Ye(require("path")),Fm=Ye(Bs());var na=class{constructor(e){this.vaultRoot=e}static{o(this,"PathResolver")}resolve(e){if(!bo.default.isAbsolute(e))return bo.default.resolve(this.vaultRoot,e);let t=bo.default.resolve(e),i=bo.default.resolve(this.vaultRoot);if(!t.startsWith(i))throw new st(`File path ${e} is outside vault root ${this.vaultRoot}`,"Provide a file path within the vault directory.",{filepath:e,vaultRoot:this.vaultRoot});return t}validate(e){if(!Fm.default.existsSync(e))throw new ro(e);if(!Fm.default.statSync(e).isFile())throw new st(`Not a file: ${e}`,"Provide a path to a file, not a directory.",{filepath:e});if(!e.endsWith(".md"))throw new st(`Not a Markdown file: ${e}`,"Provide a path to a .md file.",{filepath:e})}getVaultRoot(){return this.vaultRoot}};var Qv=Ye(ln());var Wv=Ye(ln());var Yi=class{static{o(this,"BaseCommandExecutor")}constructor(e){this.pathResolver=e.pathResolver,this.fsAdapter=e.fsAdapter,this.frontmatterService=e.frontmatterService,this.dryRun=e.dryRun}resolveAndValidate(e){let t=this.pathResolver.resolve(e);this.pathResolver.validate(t);let i=t.replace(this.pathResolver.getVaultRoot()+"/","");return{resolvedPath:t,relativePath:i}}getCurrentTimestamp(){return Wv.DateFormatter.toLocalTimestamp(new Date)}isAssetArchived(e){if(e?.exo__Asset_isArchived===!0)return!0;let t=e?.archived;if(t==null)return!1;if(typeof t=="boolean")return t;if(typeof t=="number")return t!==0;if(typeof t=="string"){let i=t.toLowerCase().trim();return i==="true"||i==="yes"||i==="1"}return!1}extractAliasesFromFrontmatter(e){let t=e.match(/aliases:\s*\n((?:  - .*\n?)*)/);return t?t[1].split(`
`).filter(n=>n.trim()).map(n=>n.replace(/^\s*-\s*/,"").trim()):[]}};var wo=class extends Yi{static{o(this,"StatusCommandExecutor")}constructor(e){super(e)}async executeStart(e){try{let{relativePath:t}=this.resolveAndValidate(e),i=await this.fsAdapter.readFile(t),n=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(i,"ems__Effort_status",'"[[ems__EffortStatusDoing]]"');s=this.frontmatterService.updateProperty(s,"ems__Effort_startTimestamp",n),await this.fsAdapter.updateFile(t,s),console.log(`\u2705 Started: ${e}`),console.log("   Status: Doing"),console.log(`   Start time: ${n}`),process.exit(0)}catch(t){Fe.handle(t)}}async executeComplete(e){try{let{relativePath:t}=this.resolveAndValidate(e),i=await this.fsAdapter.readFile(t),n=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(i,"ems__Effort_status",'"[[ems__EffortStatusDone]]"');s=this.frontmatterService.updateProperty(s,"ems__Effort_endTimestamp",n),s=this.frontmatterService.updateProperty(s,"ems__Effort_resolutionTimestamp",n),await this.fsAdapter.updateFile(t,s),console.log(`\u2705 Completed: ${e}`),console.log("   Status: Done"),console.log(`   Completion time: ${n}`),process.exit(0)}catch(t){Fe.handle(t)}}async executeTrash(e){try{let{relativePath:t}=this.resolveAndValidate(e),i=await this.fsAdapter.readFile(t),n=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(i,"ems__Effort_status",'"[[ems__EffortStatusTrashed]]"');s=this.frontmatterService.updateProperty(s,"ems__Effort_resolutionTimestamp",n),await this.fsAdapter.updateFile(t,s),console.log(`\u2705 Trashed: ${e}`),console.log("   Status: Trashed"),console.log(`   Resolution time: ${n}`),process.exit(0)}catch(t){Fe.handle(t)}}async executeArchive(e){try{let{relativePath:t}=this.resolveAndValidate(e),i=await this.fsAdapter.readFile(t),n=this.frontmatterService.updateProperty(i,"archived","true");n=this.frontmatterService.removeProperty(n,"aliases"),await this.fsAdapter.updateFile(t,n),console.log(`\u2705 Archived: ${e}`),console.log("   Archived: true"),console.log("   Aliases removed"),process.exit(0)}catch(t){Fe.handle(t)}}async executeMoveToBacklog(e){try{await this.updateStatus(e,"ems__EffortStatusBacklog","Backlog"),process.exit(0)}catch(t){Fe.handle(t)}}async executeMoveToAnalysis(e){try{await this.updateStatus(e,"ems__EffortStatusAnalysis","Analysis"),process.exit(0)}catch(t){Fe.handle(t)}}async executeMoveToToDo(e){try{await this.updateStatus(e,"ems__EffortStatusToDo","ToDo"),process.exit(0)}catch(t){Fe.handle(t)}}async updateStatus(e,t,i){let{relativePath:n}=this.resolveAndValidate(e),s=await this.fsAdapter.readFile(n),a=this.frontmatterService.updateProperty(s,"ems__Effort_status",`"[[${t}]]"`);await this.fsAdapter.updateFile(n,a),console.log(`\u2705 Moved to ${i}: ${e}`),console.log(`   Status: ${i}`)}};var Nt=[];for(let r=0;r<256;++r)Nt.push((r+256).toString(16).slice(1));function Hv(r,e=0){return(Nt[r[e+0]]+Nt[r[e+1]]+Nt[r[e+2]]+Nt[r[e+3]]+"-"+Nt[r[e+4]]+Nt[r[e+5]]+"-"+Nt[r[e+6]]+Nt[r[e+7]]+"-"+Nt[r[e+8]]+Nt[r[e+9]]+"-"+Nt[r[e+10]]+Nt[r[e+11]]+Nt[r[e+12]]+Nt[r[e+13]]+Nt[r[e+14]]+Nt[r[e+15]]).toLowerCase()}o(Hv,"unsafeStringify");var zv=require("node:crypto");var El=new Uint8Array(256),wl=El.length;function Pm(){return wl>El.length-16&&((0,zv.randomFillSync)(El),wl=0),El.slice(wl,wl+=16)}o(Pm,"rng");var Kv=require("node:crypto"),Im={randomUUID:Kv.randomUUID};function gP(r,e,t){r=r||{};let i=r.random??r.rng?.()??Pm();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let n=0;n<16;++n)e[t+n]=i[n];return e}return Hv(i)}o(gP,"_v4");function yP(r,e,t){return Im.randomUUID&&!e&&!r?Im.randomUUID():gP(r,e,t)}o(yP,"v4");var Dm=yP;var sa=Ye(ln());var Eo=class extends Yi{static{o(this,"AssetCreationExecutor")}constructor(e){super(e)}async executeCreateTask(e,t,i={}){try{await this.createAsset(e,t,"ems__Task",i),process.exit(0)}catch(n){Fe.handle(n)}}async executeCreateMeeting(e,t,i={}){try{await this.createAsset(e,t,"ems__Meeting",i),process.exit(0)}catch(n){Fe.handle(n)}}async executeCreateProject(e,t,i={}){try{await this.createAsset(e,t,"ems__Project",i),process.exit(0)}catch(n){Fe.handle(n)}}async executeCreateArea(e,t,i={}){try{await this.createAsset(e,t,"ems__Area",i),process.exit(0)}catch(n){Fe.handle(n)}}async createAsset(e,t,i,n={}){if(!t||t.trim().length===0)throw new Error("Label cannot be empty");let s=t.trim(),{relativePath:a}=this.resolveAndValidate(e);if(await this.fsAdapter.fileExists(a))throw new sa.FileAlreadyExistsError(e);let u=Dm(),f=this.buildAssetFrontmatter(i,u,s,n),l=sa.MetadataHelpers.buildFileContent(f);await this.fsAdapter.createFile(a,l),console.log(`\u2705 Created ${this.getAssetTypeName(i)}: ${e}`),console.log(`   UID: ${u}`),console.log(`   Label: ${s}`),console.log(`   Class: ${i}`)}buildAssetFrontmatter(e,t,i,n={}){let s=sa.DateFormatter.toLocalTimestamp(new Date),a={exo__Asset_isDefinedBy:'"[[Ontology/EMS]]"',exo__Asset_uid:t,exo__Asset_label:i,exo__Asset_createdAt:s,exo__Instance_class:[`"[[${e}]]"`],aliases:[i]};return(e==="ems__Task"||e==="ems__Project"||e==="ems__Meeting")&&(a.ems__Effort_status='"[[ems__EffortStatusDraft]]"'),n.prototype&&(a.ems__Effort_prototype=`"[[${n.prototype}]]"`),n.area&&(a.ems__Effort_area=`"[[${n.area}]]"`),n.parent&&(a.ems__Effort_parent=`"[[${n.parent}]]"`),a}getAssetTypeName(e){return{ems__Task:"task",ems__Meeting:"meeting",ems__Project:"project",ems__Area:"area"}[e]||"asset"}};var Rm=Ye(require("path"));var Yv=Ye(ln());var To=class extends Yi{static{o(this,"PropertyCommandExecutor")}constructor(e){super(e)}async executeRenameToUid(e){try{let{relativePath:t}=this.resolveAndValidate(e),i=await this.fsAdapter.getFileMetadata(t);if(!i.exo__Asset_uid)throw new Error("Asset missing exo__Asset_uid property");let n=Rm.default.basename(t,".md"),s=i.exo__Asset_uid;if(n===s&&(console.log(`\u2705 Already renamed: ${e}`),console.log(`   Current filename matches UID: ${s}.md`),process.exit(0)),!i.exo__Asset_label||i.exo__Asset_label.trim()===""){let u=await this.fsAdapter.readFile(t),f=this.frontmatterService.updateProperty(u,"exo__Asset_label",n),l=this.isAssetArchived(i),h=f;l||(h=this.frontmatterService.updateProperty(f,"aliases",`
  - ${n}`)),await this.fsAdapter.updateFile(t,h),console.log(`   Updated label: "${n}"`)}let a=Rm.default.dirname(t),c=a!=="."?`${a}/${s}.md`:`${s}.md`;await this.fsAdapter.renameFile(t,c),console.log("\u2705 Renamed to UID format"),console.log(`   Old: ${t}`),console.log(`   New: ${c}`),process.exit(0)}catch(t){Fe.handle(t)}}async executeUpdateLabel(e,t){try{if(!t||t.trim().length===0)throw new Error("Label cannot be empty");let i=t.trim(),{relativePath:n}=this.resolveAndValidate(e),s=await this.fsAdapter.readFile(n),a=this.frontmatterService.updateProperty(s,"exo__Asset_label",i),c=this.frontmatterService.parse(a),u=this.extractAliasesFromFrontmatter(c.content);if(u.includes(i)||(u.length===0?a=this.frontmatterService.updateProperty(a,"aliases",`
  - ${i}`):a=this.frontmatterService.updateProperty(a,"aliases",`${u.map(f=>`
  - ${f}`).join("")}
  - ${i}`)),this.dryRun){if(console.log("\u{1F50D} DRY RUN: Preview of changes (not applied)"),console.log(`   File: ${e}`),console.log("   Changes:"),console.log(`     \u2022 exo__Asset_label: "${i}"`),u.includes(i))console.log("     \u2022 aliases: unchanged (label already present)");else{let f=u.length===0?[i]:[...u,i];console.log(`     \u2022 aliases: [${f.map(l=>`"${l}"`).join(", ")}]`)}console.log(`
\u{1F4A1} Run without --dry-run to apply changes`),process.exit(0)}await this.fsAdapter.updateFile(n,a),console.log("\u2705 Updated label"),console.log(`   File: ${e}`),console.log(`   New label: "${i}"`),console.log("   Aliases synchronized"),process.exit(0)}catch(i){Fe.handle(i)}}async executeSchedule(e,t){try{await this.updatePlannedTimestamp(e,t,"ems__Effort_plannedStartTimestamp"),process.exit(0)}catch(i){Fe.handle(i)}}async executeSetDeadline(e,t){try{await this.updatePlannedTimestamp(e,t,"ems__Effort_plannedEndTimestamp"),process.exit(0)}catch(i){Fe.handle(i)}}async updatePlannedTimestamp(e,t,i){let{relativePath:n}=this.resolveAndValidate(e);if(!await this.fsAdapter.fileExists(n))throw new Error(`File not found: ${e}`);if(!/^\d{4}-\d{2}-\d{2}$/.test(t))throw new Error(`Invalid date format: ${t}. Expected YYYY-MM-DD (e.g., 2025-11-25)`);let a=Yv.DateFormatter.toTimestampAtStartOfDay(t),c=await this.fsAdapter.readFile(n),u=this.frontmatterService.updateProperty(c,i,a);await this.fsAdapter.writeFile(n,u),console.log(`\u2705 ${i==="ems__Effort_plannedStartTimestamp"?"Scheduled":"Set deadline for"}: ${e}`),console.log(`   Date: ${t}`),console.log(`   Timestamp: ${a}`)}};var Tl=class{static{o(this,"CommandExecutor")}constructor(e,t=!1){this.context={pathResolver:new na(e),fsAdapter:new ia(e),frontmatterService:new Qv.FrontmatterService,dryRun:t},this.statusExecutor=new wo(this.context),this.creationExecutor=new Eo(this.context),this.propertyExecutor=new To(this.context)}async execute(e,t,i){try{let n=this.context.pathResolver.resolve(t);this.context.pathResolver.validate(n),await this.context.fsAdapter.readFile(n.replace(this.context.pathResolver.getVaultRoot()+"/","")),console.log("\u2705 Command infrastructure verified"),console.log(`   Command: ${e}`),console.log(`   File: ${n}`),console.log(`   Vault: ${this.context.pathResolver.getVaultRoot()}`),Object.keys(i).length>0&&console.log(`   Options: ${JSON.stringify(i,null,2)}`),console.log(`
\u{1F4DD} Note: Actual command execution will be implemented in follow-up issues.`),console.log("    This PR establishes the infrastructure foundation."),process.exit(0)}catch(n){Fe.handle(n)}}getVaultRoot(){return this.context.pathResolver.getVaultRoot()}async executeStart(e){return this.statusExecutor.executeStart(e)}async executeComplete(e){return this.statusExecutor.executeComplete(e)}async executeTrash(e){return this.statusExecutor.executeTrash(e)}async executeArchive(e){return this.statusExecutor.executeArchive(e)}async executeMoveToBacklog(e){return this.statusExecutor.executeMoveToBacklog(e)}async executeMoveToAnalysis(e){return this.statusExecutor.executeMoveToAnalysis(e)}async executeMoveToToDo(e){return this.statusExecutor.executeMoveToToDo(e)}async executeCreateTask(e,t,i={}){return this.creationExecutor.executeCreateTask(e,t,i)}async executeCreateMeeting(e,t,i={}){return this.creationExecutor.executeCreateMeeting(e,t,i)}async executeCreateProject(e,t,i={}){return this.creationExecutor.executeCreateProject(e,t,i)}async executeCreateArea(e,t,i={}){return this.creationExecutor.executeCreateArea(e,t,i)}async executeRenameToUid(e){return this.propertyExecutor.executeRenameToUid(e)}async executeUpdateLabel(e,t){return this.propertyExecutor.executeUpdateLabel(e,t)}async executeSchedule(e,t){return this.propertyExecutor.executeSchedule(e,t)}async executeSetDeadline(e,t){return this.propertyExecutor.executeSetDeadline(e,t)}};function Bt(r,e,t,i,n){if(r==="json"){let s={command:e,filepath:t,action:i,...n&&{changes:n}},a=er.success(s);console.log(JSON.stringify(a,null,2))}else console.log(`\u2705 ${i}`)}o(Bt,"outputResult");function ns(r,e,t,i){let n=new st(`--${e} option is required for ${t} command`,i,{command:t,missingOption:e});Fe.handle(n)}o(ns,"handleMissingOption");function Xv(){return new di("command").description("Execute plugin command on single asset").argument("<command-name>","Command to execute (rename-to-uid, start, complete, schedule, set-deadline, etc.)").argument("<filepath>","Path to asset file (relative to vault root or absolute)").option("--vault <path>","Path to Obsidian vault",process.cwd()).option("--label <value>","Asset label (required for update-label and creation commands)").option("--prototype <uid>","Prototype UID for inheritance (creation commands)").option("--area <uid>","Area UID for effort linkage (creation commands)").option("--parent <uid>","Parent UID for effort linkage (creation commands)").option("--date <value>","Date in YYYY-MM-DD format (required for schedule and set-deadline commands)").option("--dry-run","Preview changes without modifying files").option("--format <type>","Output format: text|json (default: text)","text").action(async(r,e,t)=>{let i=t.format||"text";Fe.setFormat(i);try{let n=(0,Jv.resolve)(t.vault),s=new Tl(n,t.dryRun);switch(r){case"rename-to-uid":await s.executeRenameToUid(e),Bt(i,r,e,"Renamed file to UID-based name");break;case"update-label":t.label||ns(i,"label","update-label",'exocortex command update-label <filepath> --label "<value>"'),await s.executeUpdateLabel(e,t.label),Bt(i,r,e,`Updated label to "${t.label}"`,{label:t.label});break;case"start":await s.executeStart(e),Bt(i,r,e,"Started task");break;case"complete":await s.executeComplete(e),Bt(i,r,e,"Completed task");break;case"trash":await s.executeTrash(e),Bt(i,r,e,"Moved task to trash");break;case"archive":await s.executeArchive(e),Bt(i,r,e,"Archived task");break;case"move-to-backlog":await s.executeMoveToBacklog(e),Bt(i,r,e,"Moved task to backlog");break;case"move-to-analysis":await s.executeMoveToAnalysis(e),Bt(i,r,e,"Moved task to analysis");break;case"move-to-todo":await s.executeMoveToToDo(e),Bt(i,r,e,"Moved task to todo");break;case"create-task":t.label||ns(i,"label","create-task",'exocortex command create-task <filepath> --label "<value>"'),await s.executeCreateTask(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent}),Bt(i,r,e,`Created task "${t.label}"`,{label:t.label,prototype:t.prototype,area:t.area,parent:t.parent});break;case"create-meeting":t.label||ns(i,"label","create-meeting",'exocortex command create-meeting <filepath> --label "<value>"'),await s.executeCreateMeeting(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent}),Bt(i,r,e,`Created meeting "${t.label}"`,{label:t.label,prototype:t.prototype,area:t.area,parent:t.parent});break;case"create-project":t.label||ns(i,"label","create-project",'exocortex command create-project <filepath> --label "<value>"'),await s.executeCreateProject(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent}),Bt(i,r,e,`Created project "${t.label}"`,{label:t.label,prototype:t.prototype,area:t.area,parent:t.parent});break;case"create-area":t.label||ns(i,"label","create-area",'exocortex command create-area <filepath> --label "<value>"'),await s.executeCreateArea(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent}),Bt(i,r,e,`Created area "${t.label}"`,{label:t.label,prototype:t.prototype,area:t.area,parent:t.parent});break;case"schedule":t.date||ns(i,"date","schedule",'exocortex command schedule <filepath> --date "YYYY-MM-DD"'),await s.executeSchedule(e,t.date),Bt(i,r,e,`Scheduled task for ${t.date}`,{date:t.date});break;case"set-deadline":t.date||ns(i,"date","set-deadline",'exocortex command set-deadline <filepath> --date "YYYY-MM-DD"'),await s.executeSetDeadline(e,t.date),Bt(i,r,e,`Set deadline to ${t.date}`,{date:t.date});break;default:await s.execute(r,e,t),Bt(i,r,e,`Executed ${r}`);break}}catch(n){Fe.handle(n)}})}o(Xv,"commandCommand");var eS=require("path");var Qi=Ye(require("fs")),Nm=Ye(require("path")),Zv=require("events");var _P={watch:Qi.default.watch.bind(Qi.default),existsSync:Qi.default.existsSync.bind(Qi.default),statSync:Qi.default.statSync.bind(Qi.default),readFileSync:Qi.default.readFileSync.bind(Qi.default)},Al=class extends Zv.EventEmitter{constructor(t,i={}){super();this.watcher=null;this.debounceTimers=new Map;this.isRunning=!1;this.vaultPath=Nm.default.resolve(t),this.fsAdapter=i.fsAdapter??_P,this.options={pattern:i.pattern??"**/*.md",assetType:i.assetType??"",debounceMs:i.debounceMs??100,recursive:i.recursive??!0}}static{o(this,"FileSystemWatcher")}start(){this.isRunning||(this.watcher=this.fsAdapter.watch(this.vaultPath,{recursive:this.options.recursive},(t,i)=>{i&&this.handleFileEvent(t,i.toString())}),this.watcher.on("error",t=>{this.emit("error",t)}),this.isRunning=!0,this.emit("started"))}stop(){if(this.isRunning){for(let t of this.debounceTimers.values())clearTimeout(t);this.debounceTimers.clear(),this.watcher&&(this.watcher.close(),this.watcher=null),this.isRunning=!1,this.emit("stopped")}}isWatching(){return this.isRunning}handleFileEvent(t,i){let n=Nm.default.join(this.vaultPath,i),s=i;if(!this.matchesPattern(s))return;let a=this.debounceTimers.get(n);a&&clearTimeout(a);let c=setTimeout(()=>{this.debounceTimers.delete(n),this.processFileEvent(n,s)},this.options.debounceMs);this.debounceTimers.set(n,c)}processFileEvent(t,i){let n=this.fsAdapter.existsSync(t),s;if(!n)s="delete";else{let u=this.fsAdapter.statSync(t);s=Date.now()-u.birthtimeMs<1e3?"create":"modify"}let a;if(n&&t.endsWith(".md")&&(a=this.extractAssetType(t)),this.options.assetType&&a!==this.options.assetType)return;let c={type:s,path:t,relativePath:i,timestamp:new Date().toISOString(),assetType:a};this.emit("change",c)}matchesPattern(t){return this.options.pattern?Rt(t,this.options.pattern):!0}extractAssetType(t){try{let n=this.fsAdapter.readFileSync(t,"utf-8").match(/^---\n([\s\S]*?)\n---/);if(!n)return;let a=n[1].match(/exo__Instance_class:\s*(?:\[?"?\[\[([^\]]+)\]\]"?\]?|"?\[\[([^\]]+)\]\]"?)/);return a?a[1]||a[2]:void 0}catch{return}}};var km=Ye(require("fs"));function tS(){return new di("watch").description("Watch vault for file changes and emit NDJSON events").option("--vault <path>","Path to Obsidian vault",process.cwd()).option("--pattern <glob>","Glob pattern to filter files (e.g., '*.md', 'tasks/**')").option("--asset-type <type>","Filter by asset type (e.g., 'ems__Task', 'ems__Project')").option("--debounce <ms>","Debounce interval in milliseconds","100").action(async r=>{Fe.setFormat("json");try{let e=(0,eS.resolve)(r.vault);if(!km.default.existsSync(e))throw new es(e);if(!km.default.statSync(e).isDirectory())throw new st(`Vault path is not a directory: ${e}`,"Provide a path to a directory, not a file",{vaultPath:e});let t=parseInt(r.debounce?.toString()??"100",10);if(isNaN(t)||t<0)throw new st("--debounce must be a non-negative integer","Use a positive integer value for debounce",{debounce:r.debounce});let i=new Al(e,{pattern:r.pattern,assetType:r.assetType,debounceMs:t});i.on("change",s=>{console.log(JSON.stringify(s))}),i.on("error",s=>{let a=er.error("INTERNAL_OPERATION_FAILED",s.message,5,{recovery:{message:"Check file permissions and vault access",suggestion:"Ensure the vault directory is accessible"}});console.log(JSON.stringify(a))});let n=o(()=>{i.stop(),process.exit(0)},"shutdown");process.on("SIGINT",n),process.on("SIGTERM",n),console.error(`Watching vault: ${e}`),r.pattern&&console.error(`  Pattern filter: ${r.pattern}`),r.assetType&&console.error(`  Asset type filter: ${r.assetType}`),console.error(`  Debounce: ${t}ms`),console.error("Press Ctrl+C to stop"),i.start()}catch(e){Fe.handle(e)}})}o(tS,"watchCommand");var Mm=require("path"),Lm=Ye(Bs());var aa=Ye(ln());var ai=Ye(Bs()),jm=Ye(require("crypto"));var xl=class{constructor(){this.backups=new Map;this.fileHashes=new Map}static{o(this,"TransactionManager")}async begin(e){if(!ai.default.existsSync(e))throw new Error(`Cannot backup non-existent file: ${e}`);let t=await ai.default.readFile(e,"utf-8"),i=jm.default.createHash("sha256").update(t).digest("hex");this.fileHashes.set(e,i);let n=`${e}.backup.${Date.now()}`;await ai.default.writeFile(n,t,"utf-8"),this.backups.set(e,n)}async verify(e){let t=this.fileHashes.get(e);if(!t)return!0;if(!ai.default.existsSync(e))return!1;let i=await ai.default.readFile(e,"utf-8");return jm.default.createHash("sha256").update(i).digest("hex")===t}async commit(){for(let e of this.backups.values())ai.default.existsSync(e)&&await ai.default.remove(e);this.backups.clear(),this.fileHashes.clear()}async rollback(){for(let[e,t]of this.backups.entries())ai.default.existsSync(t)&&(await ai.default.copy(t,e,{overwrite:!0}),await ai.default.remove(t));this.backups.clear(),this.fileHashes.clear()}getTrackedFiles(){return Array.from(this.backups.keys())}};var Ao=class{static{o(this,"BatchExecutor")}constructor(e,t=!1){this.pathResolver=new na(e),this.fsAdapter=new ia(e),this.frontmatterService=new aa.FrontmatterService,this.transactionManager=new xl,this.dryRun=t}async executeBatch(e,t=!1){let i=Date.now(),n=[],s=0,a=0,c=!1;if(e.length===0)return{success:!0,total:0,succeeded:0,failed:0,results:[],durationMs:Date.now()-i,atomic:t};if(t&&!this.dryRun)try{await this.backupAllFiles(e)}catch(f){return{success:!1,total:e.length,succeeded:0,failed:e.length,results:e.map(l=>({success:!1,command:l.command,filepath:l.filepath,error:`Backup failed: ${f.message}`})),durationMs:Date.now()-i,atomic:t}}for(let f of e){let l=await this.executeSingleOperation(f);if(n.push(l),l.success)s++;else if(a++,t&&!this.dryRun){await this.transactionManager.rollback(),c=!0;let h=n.length;for(let p=h;p<e.length;p++)n.push({success:!1,command:e[p].command,filepath:e[p].filepath,error:"Not executed due to atomic rollback"}),a++;return{success:!1,total:e.length,succeeded:0,failed:e.length,results:n,durationMs:Date.now()-i,atomic:t,rolledBack:!0}}}return t&&!this.dryRun&&!c&&await this.transactionManager.commit(),{success:a===0,total:e.length,succeeded:s,failed:a,results:n,durationMs:Date.now()-i,atomic:t,...t&&{rolledBack:c}}}static parseInput(e){try{let t=JSON.parse(e);if(!Array.isArray(t))throw new st("Batch input must be a JSON array of operations",`exo batch --input '[{"command":"start","filepath":"task.md"}]'`);for(let i of t){if(!i.command||typeof i.command!="string")throw new st('Each operation must have a "command" string property','{"command":"start","filepath":"task.md"}');if(!i.filepath||typeof i.filepath!="string")throw new st('Each operation must have a "filepath" string property','{"command":"start","filepath":"task.md"}')}return t}catch(t){throw t instanceof st?t:new st(`Failed to parse batch input: ${t.message}`,`exo batch --input '[{"command":"start","filepath":"task.md"}]'`)}}async backupAllFiles(e){let t=new Set;for(let i of e){let n=this.pathResolver.resolve(i.filepath);t.add(n)}for(let i of t)await this.transactionManager.begin(i)}async executeSingleOperation(e){try{let t=this.pathResolver.resolve(e.filepath);this.pathResolver.validate(t);let i=t.replace(this.pathResolver.getVaultRoot()+"/",""),n=await this.fsAdapter.readFile(i);if(this.dryRun)return{success:!0,command:e.command,filepath:e.filepath,action:`Would execute ${e.command} (dry-run)`};switch(e.command){case"start":return await this.executeStart(i,e);case"complete":return await this.executeComplete(i,e);case"trash":return await this.executeTrash(i,e);case"archive":return await this.executeArchive(i,e);case"move-to-backlog":return await this.executeStatusUpdate(i,e,"ems__EffortStatusBacklog","Moved to backlog");case"move-to-analysis":return await this.executeStatusUpdate(i,e,"ems__EffortStatusAnalysis","Moved to analysis");case"move-to-todo":return await this.executeStatusUpdate(i,e,"ems__EffortStatusToDo","Moved to todo");case"update-label":return await this.executeUpdateLabel(i,e);case"schedule":return await this.executeSchedule(i,e);case"set-deadline":return await this.executeSetDeadline(i,e);default:return{success:!1,command:e.command,filepath:e.filepath,error:`Unknown command: ${e.command}`}}}catch(t){return{success:!1,command:e.command,filepath:e.filepath,error:t.message}}}getCurrentTimestamp(){return aa.DateFormatter.toLocalTimestamp(new Date)}async executeStart(e,t){let i=await this.fsAdapter.readFile(e),n=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(i,"ems__Effort_status",'"[[ems__EffortStatusDoing]]"');return s=this.frontmatterService.updateProperty(s,"ems__Effort_startTimestamp",n),await this.fsAdapter.updateFile(e,s),{success:!0,command:t.command,filepath:t.filepath,action:"Started task",changes:{status:"Doing",startTimestamp:n}}}async executeComplete(e,t){let i=await this.fsAdapter.readFile(e),n=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(i,"ems__Effort_status",'"[[ems__EffortStatusDone]]"');return s=this.frontmatterService.updateProperty(s,"ems__Effort_endTimestamp",n),s=this.frontmatterService.updateProperty(s,"ems__Effort_resolutionTimestamp",n),await this.fsAdapter.updateFile(e,s),{success:!0,command:t.command,filepath:t.filepath,action:"Completed task",changes:{status:"Done",endTimestamp:n,resolutionTimestamp:n}}}async executeTrash(e,t){let i=await this.fsAdapter.readFile(e),n=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(i,"ems__Effort_status",'"[[ems__EffortStatusTrashed]]"');return s=this.frontmatterService.updateProperty(s,"ems__Effort_resolutionTimestamp",n),await this.fsAdapter.updateFile(e,s),{success:!0,command:t.command,filepath:t.filepath,action:"Trashed task",changes:{status:"Trashed",resolutionTimestamp:n}}}async executeArchive(e,t){let i=await this.fsAdapter.readFile(e),n=this.frontmatterService.updateProperty(i,"archived","true");return n=this.frontmatterService.removeProperty(n,"aliases"),await this.fsAdapter.updateFile(e,n),{success:!0,command:t.command,filepath:t.filepath,action:"Archived task",changes:{archived:!0,aliasesRemoved:!0}}}async executeStatusUpdate(e,t,i,n){let s=await this.fsAdapter.readFile(e),a=this.frontmatterService.updateProperty(s,"ems__Effort_status",`"[[${i}]]"`);return await this.fsAdapter.updateFile(e,a),{success:!0,command:t.command,filepath:t.filepath,action:n,changes:{status:i.replace("ems__EffortStatus","")}}}async executeUpdateLabel(e,t){let i=t.options?.label;if(!i||i.trim()==="")return{success:!1,command:t.command,filepath:t.filepath,error:'Missing required option: "label"'};let n=i.trim(),s=await this.fsAdapter.readFile(e),a=this.frontmatterService.updateProperty(s,"exo__Asset_label",`"${n}"`);return await this.fsAdapter.updateFile(e,a),{success:!0,command:t.command,filepath:t.filepath,action:`Updated label to "${n}"`,changes:{label:n}}}async executeSchedule(e,t){let i=t.options?.date;if(!i)return{success:!1,command:t.command,filepath:t.filepath,error:'Missing required option: "date"'};if(!/^\d{4}-\d{2}-\d{2}$/.test(i))return{success:!1,command:t.command,filepath:t.filepath,error:`Invalid date format: ${i}. Expected YYYY-MM-DD`};let n=await this.fsAdapter.readFile(e),s=aa.DateFormatter.toTimestampAtStartOfDay(i),a=this.frontmatterService.updateProperty(n,"ems__Effort_scheduledTimestamp",s);return await this.fsAdapter.updateFile(e,a),{success:!0,command:t.command,filepath:t.filepath,action:`Scheduled for ${i}`,changes:{scheduledTimestamp:s}}}async executeSetDeadline(e,t){let i=t.options?.date;if(!i)return{success:!1,command:t.command,filepath:t.filepath,error:'Missing required option: "date"'};if(!/^\d{4}-\d{2}-\d{2}$/.test(i))return{success:!1,command:t.command,filepath:t.filepath,error:`Invalid date format: ${i}. Expected YYYY-MM-DD`};let n=await this.fsAdapter.readFile(e),s=aa.DateFormatter.toTimestampAtStartOfDay(i),a=this.frontmatterService.updateProperty(n,"ems__Effort_deadlineTimestamp",s);return await this.fsAdapter.updateFile(e,a),{success:!0,command:t.command,filepath:t.filepath,action:`Set deadline to ${i}`,changes:{deadlineTimestamp:s}}}};function vP(r,e){if(r==="json"){let t=er.success(e,{durationMs:e.durationMs,itemCount:e.total});console.log(JSON.stringify(t,null,2))}else{if(console.log(`
\u{1F4E6} Batch Execution ${e.success?"Complete":"Failed"}`),console.log(`   Total: ${e.total} operations`),console.log(`   \u2705 Succeeded: ${e.succeeded}`),console.log(`   \u274C Failed: ${e.failed}`),console.log(`   \u23F1\uFE0F  Duration: ${e.durationMs}ms`),e.atomic&&console.log(`   \u{1F512} Atomic mode: ${e.rolledBack?"Rolled back":"Committed"}`),e.failed>0){console.log(`
\u{1F4CB} Failed Operations:`);for(let t of e.results.filter(i=>!i.success))console.log(`   \u274C ${t.command} ${t.filepath}: ${t.error}`)}if(e.succeeded>0&&r==="text"){console.log(`
\u{1F4CB} Successful Operations:`);for(let t of e.results.filter(i=>i.success))console.log(`   \u2705 ${t.command} ${t.filepath}: ${t.action}`)}}}o(vP,"outputResult");function rS(){return new di("batch").description("Execute multiple operations in a single CLI invocation").option("--vault <path>","Path to Obsidian vault",process.cwd()).option("--input <json>","JSON array of operations to execute").option("--file <path>","Path to JSON file containing operations").option("--atomic","All-or-nothing execution (rollback on any failure)").option("--dry-run","Preview changes without modifying files").option("--format <type>","Output format: text|json (default: text)","text").action(async r=>{let e=r.format||"text";Fe.setFormat(e);try{let t=(0,Mm.resolve)(r.vault),i;if(r.input)i=r.input;else if(r.file){let c=(0,Mm.resolve)(r.file);if(!Lm.default.existsSync(c))throw new st(`Batch file not found: ${c}`,"exocortex batch --file operations.json");i=await Lm.default.readFile(c,"utf-8")}else throw new st("Either --input or --file option is required",`exocortex batch --input '[{"command":"start","filepath":"task.md"}]' or exocortex batch --file operations.json`);let n=Ao.parseInput(i);if(n.length===0)throw new st("Batch input contains no operations",`exocortex batch --input '[{"command":"start","filepath":"task.md"}]'`);let a=await new Ao(t,r.dryRun).executeBatch(n,r.atomic);vP(e,a),process.exit(a.success?0:5)}catch(t){Fe.handle(t)}})}o(rS,"batchCommand");var oa=new di;oa.name("exocortex").description("CLI tool for Exocortex knowledge management system").version("0.1.0");oa.command("sparql").description("SPARQL query execution").addCommand(W_());oa.addCommand(Xv());oa.addCommand(tS());oa.addCommand(rS());oa.parse();
/*! Bundled license information:

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
