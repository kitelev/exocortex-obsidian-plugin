#!/usr/bin/env node
// exocortex-cli v0.1.0
// CLI tool for Exocortex knowledge management system - SPARQL queries, task management, and more
// License: MIT

"use strict";var tS=Object.create;var Ia=Object.defineProperty;var rS=Object.getOwnPropertyDescriptor;var nS=Object.getOwnPropertyNames;var iS=Object.getPrototypeOf,sS=Object.prototype.hasOwnProperty;var o=(r,e)=>Ia(r,"name",{value:e,configurable:!0});var aS=(r,e)=>()=>(r&&(e=r(r=0)),e);var _=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),oS=(r,e)=>{for(var t in e)Ia(r,t,{get:e[t],enumerable:!0})},X1=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of nS(e))!sS.call(r,i)&&i!==t&&Ia(r,i,{get:()=>e[i],enumerable:!(n=rS(e,i))||n.enumerable});return r};var et=(r,e,t)=>(t=r!=null?tS(iS(r)):{},X1(e||!r||!r.__esModule?Ia(t,"default",{value:r,enumerable:!0}):t,r)),df=r=>X1(Ia({},"__esModule",{value:!0}),r);var pf=_(()=>{var Z1;(function(r){(function(e){var t=typeof globalThis=="object"?globalThis:typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:c(),n=i(r);typeof t.Reflect<"u"&&(n=i(t.Reflect,n)),e(n,t),typeof t.Reflect>"u"&&(t.Reflect=r);function i(u,f){return function(l,h){Object.defineProperty(u,l,{configurable:!0,writable:!0,value:h}),f&&f(l,h)}}o(i,"makeExporter");function s(){try{return Function("return this;")()}catch{}}o(s,"functionThis");function a(){try{return(0,eval)("(function() { return this; })()")}catch{}}o(a,"indirectEvalThis");function c(){return s()||a()}o(c,"sloppyModeThis")})(function(e,t){var n=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",s=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",a=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",u={__proto__:[]}instanceof Array,f=!c&&!u,l={create:c?function(){return Ee(Object.create(null))}:u?function(){return Ee({__proto__:null})}:function(){return Ee({})},has:f?function(v,S){return n.call(v,S)}:function(v,S){return S in v},get:f?function(v,S){return n.call(v,S)?v[S]:void 0}:function(v,S){return v[S]}},h=Object.getPrototypeOf(Function),p=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:de(),m=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:$e(),b=typeof WeakMap=="function"?WeakMap:je(),y=i?Symbol.for("@reflect-metadata:registry"):void 0,x=le(),A=fe(x);function C(v,S,w,P){if(q(w)){if(!Ce(v))throw new TypeError;if(!Fe(S))throw new TypeError;return Ae(v,S)}else{if(!Ce(v))throw new TypeError;if(!Y(S))throw new TypeError;if(!Y(P)&&!q(P)&&!ge(P))throw new TypeError;return ge(P)&&(P=void 0),w=pe(w),Ve(v,S,w,P)}}o(C,"decorate"),e("decorate",C);function j(v,S){function w(P,G){if(!Y(P))throw new TypeError;if(!q(G)&&!ke(G))throw new TypeError;V(v,S,P,G)}return o(w,"decorator"),w}o(j,"metadata"),e("metadata",j);function I(v,S,w,P){if(!Y(w))throw new TypeError;return q(P)||(P=pe(P)),V(v,S,w,P)}o(I,"defineMetadata"),e("defineMetadata",I);function U(v,S,w){if(!Y(S))throw new TypeError;return q(w)||(w=pe(w)),Le(v,S,w)}o(U,"hasMetadata"),e("hasMetadata",U);function se(v,S,w){if(!Y(S))throw new TypeError;return q(w)||(w=pe(w)),we(v,S,w)}o(se,"hasOwnMetadata"),e("hasOwnMetadata",se);function Me(v,S,w){if(!Y(S))throw new TypeError;return q(w)||(w=pe(w)),be(v,S,w)}o(Me,"getMetadata"),e("getMetadata",Me);function ee(v,S,w){if(!Y(S))throw new TypeError;return q(w)||(w=pe(w)),me(v,S,w)}o(ee,"getOwnMetadata"),e("getOwnMetadata",ee);function M(v,S){if(!Y(v))throw new TypeError;return q(S)||(S=pe(S)),L(v,S)}o(M,"getMetadataKeys"),e("getMetadataKeys",M);function N(v,S){if(!Y(v))throw new TypeError;return q(S)||(S=pe(S)),ae(v,S)}o(N,"getOwnMetadataKeys"),e("getOwnMetadataKeys",N);function K(v,S,w){if(!Y(S))throw new TypeError;if(q(w)||(w=pe(w)),!Y(S))throw new TypeError;q(w)||(w=pe(w));var P=X(S,w,!1);return q(P)?!1:P.OrdinaryDeleteMetadata(v,S,w)}o(K,"deleteMetadata"),e("deleteMetadata",K);function Ae(v,S){for(var w=v.length-1;w>=0;--w){var P=v[w],G=P(S);if(!q(G)&&!ge(G)){if(!Fe(G))throw new TypeError;S=G}}return S}o(Ae,"DecorateConstructor");function Ve(v,S,w,P){for(var G=v.length-1;G>=0;--G){var Te=v[G],Ye=Te(S,w,P);if(!q(Ye)&&!ge(Ye)){if(!Y(Ye))throw new TypeError;P=Ye}}return P}o(Ve,"DecorateProperty");function Le(v,S,w){var P=we(v,S,w);if(P)return!0;var G=Z(S);return ge(G)?!1:Le(v,G,w)}o(Le,"OrdinaryHasMetadata");function we(v,S,w){var P=X(S,w,!1);return q(P)?!1:Oe(P.OrdinaryHasOwnMetadata(v,S,w))}o(we,"OrdinaryHasOwnMetadata");function be(v,S,w){var P=we(v,S,w);if(P)return me(v,S,w);var G=Z(S);if(!ge(G))return be(v,G,w)}o(be,"OrdinaryGetMetadata");function me(v,S,w){var P=X(S,w,!1);if(!q(P))return P.OrdinaryGetOwnMetadata(v,S,w)}o(me,"OrdinaryGetOwnMetadata");function V(v,S,w,P){var G=X(w,P,!0);G.OrdinaryDefineOwnMetadata(v,S,w,P)}o(V,"OrdinaryDefineOwnMetadata");function L(v,S){var w=ae(v,S),P=Z(v);if(P===null)return w;var G=L(P,S);if(G.length<=0)return w;if(w.length<=0)return G;for(var Te=new m,Ye=[],xe=0,B=w;xe<B.length;xe++){var $=B[xe],W=Te.has($);W||(Te.add($),Ye.push($))}for(var H=0,ve=G;H<ve.length;H++){var $=ve[H],W=Te.has($);W||(Te.add($),Ye.push($))}return Ye}o(L,"OrdinaryMetadataKeys");function ae(v,S){var w=X(v,S,!1);return w?w.OrdinaryOwnMetadataKeys(v,S):[]}o(ae,"OrdinaryOwnMetadataKeys");function qe(v){if(v===null)return 1;switch(typeof v){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return v===null?1:6;default:return 6}}o(qe,"Type");function q(v){return v===void 0}o(q,"IsUndefined");function ge(v){return v===null}o(ge,"IsNull");function Ie(v){return typeof v=="symbol"}o(Ie,"IsSymbol");function Y(v){return typeof v=="object"?v!==null:typeof v=="function"}o(Y,"IsObject");function De(v,S){switch(qe(v)){case 0:return v;case 1:return v;case 2:return v;case 3:return v;case 4:return v;case 5:return v}var w=S===3?"string":S===5?"number":"default",P=oe(v,s);if(P!==void 0){var G=P.call(v,w);if(Y(G))throw new TypeError;return G}return Re(v,w==="default"?"number":w)}o(De,"ToPrimitive");function Re(v,S){if(S==="string"){var w=v.toString;if(ye(w)){var P=w.call(v);if(!Y(P))return P}var G=v.valueOf;if(ye(G)){var P=G.call(v);if(!Y(P))return P}}else{var G=v.valueOf;if(ye(G)){var P=G.call(v);if(!Y(P))return P}var Te=v.toString;if(ye(Te)){var P=Te.call(v);if(!Y(P))return P}}throw new TypeError}o(Re,"OrdinaryToPrimitive");function Oe(v){return!!v}o(Oe,"ToBoolean");function Ne(v){return""+v}o(Ne,"ToString");function pe(v){var S=De(v,3);return Ie(S)?S:Ne(S)}o(pe,"ToPropertyKey");function Ce(v){return Array.isArray?Array.isArray(v):v instanceof Object?v instanceof Array:Object.prototype.toString.call(v)==="[object Array]"}o(Ce,"IsArray");function ye(v){return typeof v=="function"}o(ye,"IsCallable");function Fe(v){return typeof v=="function"}o(Fe,"IsConstructor");function ke(v){switch(qe(v)){case 3:return!0;case 4:return!0;default:return!1}}o(ke,"IsPropertyKey");function te(v,S){return v===S||v!==v&&S!==S}o(te,"SameValueZero");function oe(v,S){var w=v[S];if(w!=null){if(!ye(w))throw new TypeError;return w}}o(oe,"GetMethod");function ce(v){var S=oe(v,a);if(!ye(S))throw new TypeError;var w=S.call(v);if(!Y(w))throw new TypeError;return w}o(ce,"GetIterator");function re(v){return v.value}o(re,"IteratorValue");function ne(v){var S=v.next();return S.done?!1:S}o(ne,"IteratorStep");function ie(v){var S=v.return;S&&S.call(v)}o(ie,"IteratorClose");function Z(v){var S=Object.getPrototypeOf(v);if(typeof v!="function"||v===h||S!==h)return S;var w=v.prototype,P=w&&Object.getPrototypeOf(w);if(P==null||P===Object.prototype)return S;var G=P.constructor;return typeof G!="function"||G===v?S:G}o(Z,"OrdinaryGetPrototypeOf");function ue(){var v;!q(y)&&typeof t.Reflect<"u"&&!(y in t.Reflect)&&typeof t.Reflect.defineMetadata=="function"&&(v=he(t.Reflect));var S,w,P,G=new b,Te={registerProvider:Ye,getProvider:B,setProvider:W};return Te;function Ye(H){if(!Object.isExtensible(Te))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case v===H:break;case q(S):S=H;break;case S===H:break;case q(w):w=H;break;case w===H:break;default:P===void 0&&(P=new m),P.add(H);break}}function xe(H,ve){if(!q(S)){if(S.isProviderFor(H,ve))return S;if(!q(w)){if(w.isProviderFor(H,ve))return S;if(!q(P))for(var We=ce(P);;){var Ge=ne(We);if(!Ge)return;var xt=re(Ge);if(xt.isProviderFor(H,ve))return ie(We),xt}}}if(!q(v)&&v.isProviderFor(H,ve))return v}function B(H,ve){var We=G.get(H),Ge;return q(We)||(Ge=We.get(ve)),q(Ge)&&(Ge=xe(H,ve),q(Ge)||(q(We)&&(We=new p,G.set(H,We)),We.set(ve,Ge))),Ge}function $(H){if(q(H))throw new TypeError;return S===H||w===H||!q(P)&&P.has(H)}function W(H,ve,We){if(!$(We))throw new Error("Metadata provider not registered.");var Ge=B(H,ve);if(Ge!==We){if(!q(Ge))return!1;var xt=G.get(H);q(xt)&&(xt=new p,G.set(H,xt)),xt.set(ve,We)}return!0}}o(ue,"CreateMetadataRegistry");function le(){var v;return!q(y)&&Y(t.Reflect)&&Object.isExtensible(t.Reflect)&&(v=t.Reflect[y]),q(v)&&(v=ue()),!q(y)&&Y(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,y,{enumerable:!1,configurable:!1,writable:!1,value:v}),v}o(le,"GetOrCreateMetadataRegistry");function fe(v){var S=new b,w={isProviderFor:o(function($,W){var H=S.get($);return q(H)?!1:H.has(W)},"isProviderFor"),OrdinaryDefineOwnMetadata:Ye,OrdinaryHasOwnMetadata:G,OrdinaryGetOwnMetadata:Te,OrdinaryOwnMetadataKeys:xe,OrdinaryDeleteMetadata:B};return x.registerProvider(w),w;function P($,W,H){var ve=S.get($),We=!1;if(q(ve)){if(!H)return;ve=new p,S.set($,ve),We=!0}var Ge=ve.get(W);if(q(Ge)){if(!H)return;if(Ge=new p,ve.set(W,Ge),!v.setProvider($,W,w))throw ve.delete(W),We&&S.delete($),new Error("Wrong provider for target.")}return Ge}o(P,"GetOrCreateMetadataMap");function G($,W,H){var ve=P(W,H,!1);return q(ve)?!1:Oe(ve.has($))}o(G,"OrdinaryHasOwnMetadata");function Te($,W,H){var ve=P(W,H,!1);if(!q(ve))return ve.get($)}o(Te,"OrdinaryGetOwnMetadata");function Ye($,W,H,ve){var We=P(H,ve,!0);We.set($,W)}o(Ye,"OrdinaryDefineOwnMetadata");function xe($,W){var H=[],ve=P($,W,!1);if(q(ve))return H;for(var We=ve.keys(),Ge=ce(We),xt=0;;){var or=ne(Ge);if(!or)return H.length=xt,H;var gr=re(or);try{H[xt]=gr}catch(zt){try{ie(Ge)}finally{throw zt}}xt++}}o(xe,"OrdinaryOwnMetadataKeys");function B($,W,H){var ve=P(W,H,!1);if(q(ve)||!ve.delete($))return!1;if(ve.size===0){var We=S.get(W);q(We)||(We.delete(H),We.size===0&&S.delete(We))}return!0}o(B,"OrdinaryDeleteMetadata")}o(fe,"CreateMetadataProvider");function he(v){var S=v.defineMetadata,w=v.hasOwnMetadata,P=v.getOwnMetadata,G=v.getOwnMetadataKeys,Te=v.deleteMetadata,Ye=new b,xe={isProviderFor:o(function(B,$){var W=Ye.get(B);return!q(W)&&W.has($)?!0:G(B,$).length?(q(W)&&(W=new m,Ye.set(B,W)),W.add($),!0):!1},"isProviderFor"),OrdinaryDefineOwnMetadata:S,OrdinaryHasOwnMetadata:w,OrdinaryGetOwnMetadata:P,OrdinaryOwnMetadataKeys:G,OrdinaryDeleteMetadata:Te};return xe}o(he,"CreateFallbackProvider");function X(v,S,w){var P=x.getProvider(v,S);if(!q(P))return P;if(w){if(x.setProvider(v,S,A))return A;throw new Error("Illegal state.")}}o(X,"GetMetadataProvider");function de(){var v={},S=[],w=(function(){function xe(B,$,W){this._index=0,this._keys=B,this._values=$,this._selector=W}return o(xe,"MapIterator"),xe.prototype["@@iterator"]=function(){return this},xe.prototype[a]=function(){return this},xe.prototype.next=function(){var B=this._index;if(B>=0&&B<this._keys.length){var $=this._selector(this._keys[B],this._values[B]);return B+1>=this._keys.length?(this._index=-1,this._keys=S,this._values=S):this._index++,{value:$,done:!1}}return{value:void 0,done:!0}},xe.prototype.throw=function(B){throw this._index>=0&&(this._index=-1,this._keys=S,this._values=S),B},xe.prototype.return=function(B){return this._index>=0&&(this._index=-1,this._keys=S,this._values=S),{value:B,done:!0}},xe})(),P=(function(){function xe(){this._keys=[],this._values=[],this._cacheKey=v,this._cacheIndex=-2}return o(xe,"Map"),Object.defineProperty(xe.prototype,"size",{get:o(function(){return this._keys.length},"get"),enumerable:!0,configurable:!0}),xe.prototype.has=function(B){return this._find(B,!1)>=0},xe.prototype.get=function(B){var $=this._find(B,!1);return $>=0?this._values[$]:void 0},xe.prototype.set=function(B,$){var W=this._find(B,!0);return this._values[W]=$,this},xe.prototype.delete=function(B){var $=this._find(B,!1);if($>=0){for(var W=this._keys.length,H=$+1;H<W;H++)this._keys[H-1]=this._keys[H],this._values[H-1]=this._values[H];return this._keys.length--,this._values.length--,te(B,this._cacheKey)&&(this._cacheKey=v,this._cacheIndex=-2),!0}return!1},xe.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=v,this._cacheIndex=-2},xe.prototype.keys=function(){return new w(this._keys,this._values,G)},xe.prototype.values=function(){return new w(this._keys,this._values,Te)},xe.prototype.entries=function(){return new w(this._keys,this._values,Ye)},xe.prototype["@@iterator"]=function(){return this.entries()},xe.prototype[a]=function(){return this.entries()},xe.prototype._find=function(B,$){if(!te(this._cacheKey,B)){this._cacheIndex=-1;for(var W=0;W<this._keys.length;W++)if(te(this._keys[W],B)){this._cacheIndex=W;break}}return this._cacheIndex<0&&$&&(this._cacheIndex=this._keys.length,this._keys.push(B),this._values.push(void 0)),this._cacheIndex},xe})();return P;function G(xe,B){return xe}function Te(xe,B){return B}function Ye(xe,B){return[xe,B]}}o(de,"CreateMapPolyfill");function $e(){var v=(function(){function S(){this._map=new p}return o(S,"Set"),Object.defineProperty(S.prototype,"size",{get:o(function(){return this._map.size},"get"),enumerable:!0,configurable:!0}),S.prototype.has=function(w){return this._map.has(w)},S.prototype.add=function(w){return this._map.set(w,w),this},S.prototype.delete=function(w){return this._map.delete(w)},S.prototype.clear=function(){this._map.clear()},S.prototype.keys=function(){return this._map.keys()},S.prototype.values=function(){return this._map.keys()},S.prototype.entries=function(){return this._map.entries()},S.prototype["@@iterator"]=function(){return this.keys()},S.prototype[a]=function(){return this.keys()},S})();return v}o($e,"CreateSetPolyfill");function je(){var v=16,S=l.create(),w=P();return(function(){function B(){this._key=P()}return o(B,"WeakMap"),B.prototype.has=function($){var W=G($,!1);return W!==void 0?l.has(W,this._key):!1},B.prototype.get=function($){var W=G($,!1);return W!==void 0?l.get(W,this._key):void 0},B.prototype.set=function($,W){var H=G($,!0);return H[this._key]=W,this},B.prototype.delete=function($){var W=G($,!1);return W!==void 0?delete W[this._key]:!1},B.prototype.clear=function(){this._key=P()},B})();function P(){var B;do B="@@WeakMap@@"+xe();while(l.has(S,B));return S[B]=!0,B}function G(B,$){if(!n.call(B,w)){if(!$)return;Object.defineProperty(B,w,{value:l.create()})}return B[w]}function Te(B,$){for(var W=0;W<$;++W)B[W]=Math.random()*255|0;return B}function Ye(B){if(typeof Uint8Array=="function"){var $=new Uint8Array(B);return typeof crypto<"u"?crypto.getRandomValues($):typeof msCrypto<"u"?msCrypto.getRandomValues($):Te($,B),$}return Te(new Array(B),B)}function xe(){var B=Ye(v);B[6]=B[6]&79|64,B[8]=B[8]&191|128;for(var $="",W=0;W<v;++W){var H=B[W];(W===4||W===6||W===8)&&($+="-"),H<16&&($+="0"),$+=H.toString(16).toLowerCase()}return $}}o(je,"CreateWeakMapPolyfill");function Ee(v){return v.__=void 0,delete v.__,v}o(Ee,"MakeDictionary")})})(Z1||(Z1={}))});var Da=_(gf=>{var lc=class extends Error{static{o(this,"CommanderError")}constructor(e,t,n){super(n),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=t,this.exitCode=e,this.nestedError=void 0}},mf=class extends lc{static{o(this,"InvalidArgumentError")}constructor(e){super(1,"commander.invalidArgument",e),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};gf.CommanderError=lc;gf.InvalidArgumentError=mf});var fc=_(_f=>{var{InvalidArgumentError:cS}=Da(),yf=class{static{o(this,"Argument")}constructor(e,t){switch(this.description=t||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,e[0]){case"<":this.required=!0,this._name=e.slice(1,-1);break;case"[":this.required=!1,this._name=e.slice(1,-1);break;default:this.required=!0,this._name=e;break}this._name.endsWith("...")&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_collectValue(e,t){return t===this.defaultValue||!Array.isArray(t)?[e]:(t.push(e),t)}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}argParser(e){return this.parseArg=e,this}choices(e){return this.argChoices=e.slice(),this.parseArg=(t,n)=>{if(!this.argChoices.includes(t))throw new cS(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._collectValue(t,n):t},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}};function uS(r){let e=r.name()+(r.variadic===!0?"...":"");return r.required?"<"+e+">":"["+e+"]"}o(uS,"humanReadableArgName");_f.Argument=yf;_f.humanReadableArgName=uS});var Sf=_(bf=>{var{humanReadableArgName:lS}=fc(),vf=class{static{o(this,"Help")}constructor(){this.helpWidth=void 0,this.minWidthToWrap=40,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}prepareContext(e){this.helpWidth=this.helpWidth??e.helpWidth??80}visibleCommands(e){let t=e.commands.filter(i=>!i._hidden),n=e._getHelpCommand();return n&&!n._hidden&&t.push(n),this.sortSubcommands&&t.sort((i,s)=>i.name().localeCompare(s.name())),t}compareOptions(e,t){let n=o(i=>i.short?i.short.replace(/^-/,""):i.long.replace(/^--/,""),"getSortKey");return n(e).localeCompare(n(t))}visibleOptions(e){let t=e.options.filter(i=>!i.hidden),n=e._getHelpOption();if(n&&!n.hidden){let i=n.short&&e._findOption(n.short),s=n.long&&e._findOption(n.long);!i&&!s?t.push(n):n.long&&!s?t.push(e.createOption(n.long,n.description)):n.short&&!i&&t.push(e.createOption(n.short,n.description))}return this.sortOptions&&t.sort(this.compareOptions),t}visibleGlobalOptions(e){if(!this.showGlobalOptions)return[];let t=[];for(let n=e.parent;n;n=n.parent){let i=n.options.filter(s=>!s.hidden);t.push(...i)}return this.sortOptions&&t.sort(this.compareOptions),t}visibleArguments(e){return e._argsDescription&&e.registeredArguments.forEach(t=>{t.description=t.description||e._argsDescription[t.name()]||""}),e.registeredArguments.find(t=>t.description)?e.registeredArguments:[]}subcommandTerm(e){let t=e.registeredArguments.map(n=>lS(n)).join(" ");return e._name+(e._aliases[0]?"|"+e._aliases[0]:"")+(e.options.length?" [options]":"")+(t?" "+t:"")}optionTerm(e){return e.flags}argumentTerm(e){return e.name()}longestSubcommandTermLength(e,t){return t.visibleCommands(e).reduce((n,i)=>Math.max(n,this.displayWidth(t.styleSubcommandTerm(t.subcommandTerm(i)))),0)}longestOptionTermLength(e,t){return t.visibleOptions(e).reduce((n,i)=>Math.max(n,this.displayWidth(t.styleOptionTerm(t.optionTerm(i)))),0)}longestGlobalOptionTermLength(e,t){return t.visibleGlobalOptions(e).reduce((n,i)=>Math.max(n,this.displayWidth(t.styleOptionTerm(t.optionTerm(i)))),0)}longestArgumentTermLength(e,t){return t.visibleArguments(e).reduce((n,i)=>Math.max(n,this.displayWidth(t.styleArgumentTerm(t.argumentTerm(i)))),0)}commandUsage(e){let t=e._name;e._aliases[0]&&(t=t+"|"+e._aliases[0]);let n="";for(let i=e.parent;i;i=i.parent)n=i.name()+" "+n;return n+t+" "+e.usage()}commandDescription(e){return e.description()}subcommandDescription(e){return e.summary()||e.description()}optionDescription(e){let t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map(n=>JSON.stringify(n)).join(", ")}`),e.defaultValue!==void 0&&(e.required||e.optional||e.isBoolean()&&typeof e.defaultValue=="boolean")&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),e.presetArg!==void 0&&e.optional&&t.push(`preset: ${JSON.stringify(e.presetArg)}`),e.envVar!==void 0&&t.push(`env: ${e.envVar}`),t.length>0){let n=`(${t.join(", ")})`;return e.description?`${e.description} ${n}`:n}return e.description}argumentDescription(e){let t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map(n=>JSON.stringify(n)).join(", ")}`),e.defaultValue!==void 0&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),t.length>0){let n=`(${t.join(", ")})`;return e.description?`${e.description} ${n}`:n}return e.description}formatItemList(e,t,n){return t.length===0?[]:[n.styleTitle(e),...t,""]}groupItems(e,t,n){let i=new Map;return e.forEach(s=>{let a=n(s);i.has(a)||i.set(a,[])}),t.forEach(s=>{let a=n(s);i.has(a)||i.set(a,[]),i.get(a).push(s)}),i}formatHelp(e,t){let n=t.padWidth(e,t),i=t.helpWidth??80;function s(h,p){return t.formatItem(h,n,p,t)}o(s,"callFormatItem");let a=[`${t.styleTitle("Usage:")} ${t.styleUsage(t.commandUsage(e))}`,""],c=t.commandDescription(e);c.length>0&&(a=a.concat([t.boxWrap(t.styleCommandDescription(c),i),""]));let u=t.visibleArguments(e).map(h=>s(t.styleArgumentTerm(t.argumentTerm(h)),t.styleArgumentDescription(t.argumentDescription(h))));if(a=a.concat(this.formatItemList("Arguments:",u,t)),this.groupItems(e.options,t.visibleOptions(e),h=>h.helpGroupHeading??"Options:").forEach((h,p)=>{let m=h.map(b=>s(t.styleOptionTerm(t.optionTerm(b)),t.styleOptionDescription(t.optionDescription(b))));a=a.concat(this.formatItemList(p,m,t))}),t.showGlobalOptions){let h=t.visibleGlobalOptions(e).map(p=>s(t.styleOptionTerm(t.optionTerm(p)),t.styleOptionDescription(t.optionDescription(p))));a=a.concat(this.formatItemList("Global Options:",h,t))}return this.groupItems(e.commands,t.visibleCommands(e),h=>h.helpGroup()||"Commands:").forEach((h,p)=>{let m=h.map(b=>s(t.styleSubcommandTerm(t.subcommandTerm(b)),t.styleSubcommandDescription(t.subcommandDescription(b))));a=a.concat(this.formatItemList(p,m,t))}),a.join(`
`)}displayWidth(e){return e0(e).length}styleTitle(e){return e}styleUsage(e){return e.split(" ").map(t=>t==="[options]"?this.styleOptionText(t):t==="[command]"?this.styleSubcommandText(t):t[0]==="["||t[0]==="<"?this.styleArgumentText(t):this.styleCommandText(t)).join(" ")}styleCommandDescription(e){return this.styleDescriptionText(e)}styleOptionDescription(e){return this.styleDescriptionText(e)}styleSubcommandDescription(e){return this.styleDescriptionText(e)}styleArgumentDescription(e){return this.styleDescriptionText(e)}styleDescriptionText(e){return e}styleOptionTerm(e){return this.styleOptionText(e)}styleSubcommandTerm(e){return e.split(" ").map(t=>t==="[options]"?this.styleOptionText(t):t[0]==="["||t[0]==="<"?this.styleArgumentText(t):this.styleSubcommandText(t)).join(" ")}styleArgumentTerm(e){return this.styleArgumentText(e)}styleOptionText(e){return e}styleArgumentText(e){return e}styleSubcommandText(e){return e}styleCommandText(e){return e}padWidth(e,t){return Math.max(t.longestOptionTermLength(e,t),t.longestGlobalOptionTermLength(e,t),t.longestSubcommandTermLength(e,t),t.longestArgumentTermLength(e,t))}preformatted(e){return/\n[^\S\r\n]/.test(e)}formatItem(e,t,n,i){let a=" ".repeat(2);if(!n)return a+e;let c=e.padEnd(t+e.length-i.displayWidth(e)),u=2,l=(this.helpWidth??80)-t-u-2,h;return l<this.minWidthToWrap||i.preformatted(n)?h=n:h=i.boxWrap(n,l).replace(/\n/g,`
`+" ".repeat(t+u)),a+c+" ".repeat(u)+h.replace(/\n/g,`
${a}`)}boxWrap(e,t){if(t<this.minWidthToWrap)return e;let n=e.split(/\r\n|\n/),i=/[\s]*[^\s]+/g,s=[];return n.forEach(a=>{let c=a.match(i);if(c===null){s.push("");return}let u=[c.shift()],f=this.displayWidth(u[0]);c.forEach(l=>{let h=this.displayWidth(l);if(f+h<=t){u.push(l),f+=h;return}s.push(u.join(""));let p=l.trimStart();u=[p],f=this.displayWidth(p)}),s.push(u.join(""))}),s.join(`
`)}};function e0(r){let e=/\x1b\[\d*(;\d*)*m/g;return r.replace(e,"")}o(e0,"stripColor");bf.Help=vf;bf.stripColor=e0});var xf=_(Tf=>{var{InvalidArgumentError:fS}=Da(),wf=class{static{o(this,"Option")}constructor(e,t){this.flags=e,this.description=t||"",this.required=e.includes("<"),this.optional=e.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(e),this.mandatory=!1;let n=hS(e);this.short=n.shortFlag,this.long=n.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0,this.helpGroupHeading=void 0}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}preset(e){return this.presetArg=e,this}conflicts(e){return this.conflictsWith=this.conflictsWith.concat(e),this}implies(e){let t=e;return typeof e=="string"&&(t={[e]:!0}),this.implied=Object.assign(this.implied||{},t),this}env(e){return this.envVar=e,this}argParser(e){return this.parseArg=e,this}makeOptionMandatory(e=!0){return this.mandatory=!!e,this}hideHelp(e=!0){return this.hidden=!!e,this}_collectValue(e,t){return t===this.defaultValue||!Array.isArray(t)?[e]:(t.push(e),t)}choices(e){return this.argChoices=e.slice(),this.parseArg=(t,n)=>{if(!this.argChoices.includes(t))throw new fS(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._collectValue(t,n):t},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.negate?t0(this.name().replace(/^no-/,"")):t0(this.name())}helpGroup(e){return this.helpGroupHeading=e,this}is(e){return this.short===e||this.long===e}isBoolean(){return!this.required&&!this.optional&&!this.negate}},Ef=class{static{o(this,"DualOptions")}constructor(e){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,e.forEach(t=>{t.negate?this.negativeOptions.set(t.attributeName(),t):this.positiveOptions.set(t.attributeName(),t)}),this.negativeOptions.forEach((t,n)=>{this.positiveOptions.has(n)&&this.dualOptions.add(n)})}valueFromOption(e,t){let n=t.attributeName();if(!this.dualOptions.has(n))return!0;let i=this.negativeOptions.get(n).presetArg,s=i!==void 0?i:!1;return t.negate===(s===e)}};function t0(r){return r.split("-").reduce((e,t)=>e+t[0].toUpperCase()+t.slice(1))}o(t0,"camelcase");function hS(r){let e,t,n=/^-[^-]$/,i=/^--[^-]/,s=r.split(/[ |,]+/).concat("guard");if(n.test(s[0])&&(e=s.shift()),i.test(s[0])&&(t=s.shift()),!e&&n.test(s[0])&&(e=s.shift()),!e&&i.test(s[0])&&(e=t,t=s.shift()),s[0].startsWith("-")){let a=s[0],c=`option creation failed due to '${a}' in option flags '${r}'`;throw/^-[^-][^-]/.test(a)?new Error(`${c}
- a short flag is a single dash and a single character
  - either use a single dash and a single character (for a short flag)
  - or use a double dash for a long option (and can have two, like '--ws, --workspace')`):n.test(a)?new Error(`${c}
- too many short flags`):i.test(a)?new Error(`${c}
- too many long flags`):new Error(`${c}
- unrecognised flag format`)}if(e===void 0&&t===void 0)throw new Error(`option creation failed due to no flags found in '${r}'.`);return{shortFlag:e,longFlag:t}}o(hS,"splitOptionFlags");Tf.Option=wf;Tf.DualOptions=Ef});var n0=_(r0=>{function dS(r,e){if(Math.abs(r.length-e.length)>3)return Math.max(r.length,e.length);let t=[];for(let n=0;n<=r.length;n++)t[n]=[n];for(let n=0;n<=e.length;n++)t[0][n]=n;for(let n=1;n<=e.length;n++)for(let i=1;i<=r.length;i++){let s=1;r[i-1]===e[n-1]?s=0:s=1,t[i][n]=Math.min(t[i-1][n]+1,t[i][n-1]+1,t[i-1][n-1]+s),i>1&&n>1&&r[i-1]===e[n-2]&&r[i-2]===e[n-1]&&(t[i][n]=Math.min(t[i][n],t[i-2][n-2]+1))}return t[r.length][e.length]}o(dS,"editDistance");function pS(r,e){if(!e||e.length===0)return"";e=Array.from(new Set(e));let t=r.startsWith("--");t&&(r=r.slice(2),e=e.map(a=>a.slice(2)));let n=[],i=3,s=.4;return e.forEach(a=>{if(a.length<=1)return;let c=dS(r,a),u=Math.max(r.length,a.length);(u-c)/u>s&&(c<i?(i=c,n=[a]):c===i&&n.push(a))}),n.sort((a,c)=>a.localeCompare(c)),t&&(n=n.map(a=>`--${a}`)),n.length>1?`
(Did you mean one of ${n.join(", ")}?)`:n.length===1?`
(Did you mean ${n[0]}?)`:""}o(pS,"suggestSimilar");r0.suggestSimilar=pS});var o0=_(Pf=>{var mS=require("node:events").EventEmitter,Af=require("node:child_process"),$n=require("node:path"),hc=require("node:fs"),ze=require("node:process"),{Argument:gS,humanReadableArgName:yS}=fc(),{CommanderError:Of}=Da(),{Help:_S,stripColor:vS}=Sf(),{Option:i0,DualOptions:bS}=xf(),{suggestSimilar:s0}=n0(),Cf=class r extends mS{static{o(this,"Command")}constructor(e){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!1,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=e||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._savedState=null,this._outputConfiguration={writeOut:o(t=>ze.stdout.write(t),"writeOut"),writeErr:o(t=>ze.stderr.write(t),"writeErr"),outputError:o((t,n)=>n(t),"outputError"),getOutHelpWidth:o(()=>ze.stdout.isTTY?ze.stdout.columns:void 0,"getOutHelpWidth"),getErrHelpWidth:o(()=>ze.stderr.isTTY?ze.stderr.columns:void 0,"getErrHelpWidth"),getOutHasColors:o(()=>Ff()??(ze.stdout.isTTY&&ze.stdout.hasColors?.()),"getOutHasColors"),getErrHasColors:o(()=>Ff()??(ze.stderr.isTTY&&ze.stderr.hasColors?.()),"getErrHasColors"),stripColor:o(t=>vS(t),"stripColor")},this._hidden=!1,this._helpOption=void 0,this._addImplicitHelpCommand=void 0,this._helpCommand=void 0,this._helpConfiguration={},this._helpGroupHeading=void 0,this._defaultCommandGroup=void 0,this._defaultOptionGroup=void 0}copyInheritedSettings(e){return this._outputConfiguration=e._outputConfiguration,this._helpOption=e._helpOption,this._helpCommand=e._helpCommand,this._helpConfiguration=e._helpConfiguration,this._exitCallback=e._exitCallback,this._storeOptionsAsProperties=e._storeOptionsAsProperties,this._combineFlagAndOptionalValue=e._combineFlagAndOptionalValue,this._allowExcessArguments=e._allowExcessArguments,this._enablePositionalOptions=e._enablePositionalOptions,this._showHelpAfterError=e._showHelpAfterError,this._showSuggestionAfterError=e._showSuggestionAfterError,this}_getCommandAndAncestors(){let e=[];for(let t=this;t;t=t.parent)e.push(t);return e}command(e,t,n){let i=t,s=n;typeof i=="object"&&i!==null&&(s=i,i=null),s=s||{};let[,a,c]=e.match(/([^ ]+) *(.*)/),u=this.createCommand(a);return i&&(u.description(i),u._executableHandler=!0),s.isDefault&&(this._defaultCommandName=u._name),u._hidden=!!(s.noHelp||s.hidden),u._executableFile=s.executableFile||null,c&&u.arguments(c),this._registerCommand(u),u.parent=this,u.copyInheritedSettings(this),i?this:u}createCommand(e){return new r(e)}createHelp(){return Object.assign(new _S,this.configureHelp())}configureHelp(e){return e===void 0?this._helpConfiguration:(this._helpConfiguration=e,this)}configureOutput(e){return e===void 0?this._outputConfiguration:(this._outputConfiguration={...this._outputConfiguration,...e},this)}showHelpAfterError(e=!0){return typeof e!="string"&&(e=!!e),this._showHelpAfterError=e,this}showSuggestionAfterError(e=!0){return this._showSuggestionAfterError=!!e,this}addCommand(e,t){if(!e._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);return t=t||{},t.isDefault&&(this._defaultCommandName=e._name),(t.noHelp||t.hidden)&&(e._hidden=!0),this._registerCommand(e),e.parent=this,e._checkForBrokenPassThrough(),this}createArgument(e,t){return new gS(e,t)}argument(e,t,n,i){let s=this.createArgument(e,t);return typeof n=="function"?s.default(i).argParser(n):s.default(n),this.addArgument(s),this}arguments(e){return e.trim().split(/ +/).forEach(t=>{this.argument(t)}),this}addArgument(e){let t=this.registeredArguments.slice(-1)[0];if(t?.variadic)throw new Error(`only the last argument can be variadic '${t.name()}'`);if(e.required&&e.defaultValue!==void 0&&e.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${e.name()}'`);return this.registeredArguments.push(e),this}helpCommand(e,t){if(typeof e=="boolean")return this._addImplicitHelpCommand=e,e&&this._defaultCommandGroup&&this._initCommandGroup(this._getHelpCommand()),this;let n=e??"help [command]",[,i,s]=n.match(/([^ ]+) *(.*)/),a=t??"display help for command",c=this.createCommand(i);return c.helpOption(!1),s&&c.arguments(s),a&&c.description(a),this._addImplicitHelpCommand=!0,this._helpCommand=c,(e||t)&&this._initCommandGroup(c),this}addHelpCommand(e,t){return typeof e!="object"?(this.helpCommand(e,t),this):(this._addImplicitHelpCommand=!0,this._helpCommand=e,this._initCommandGroup(e),this)}_getHelpCommand(){return this._addImplicitHelpCommand??(this.commands.length&&!this._actionHandler&&!this._findCommand("help"))?(this._helpCommand===void 0&&this.helpCommand(void 0,void 0),this._helpCommand):null}hook(e,t){let n=["preSubcommand","preAction","postAction"];if(!n.includes(e))throw new Error(`Unexpected value for event passed to hook : '${e}'.
Expecting one of '${n.join("', '")}'`);return this._lifeCycleHooks[e]?this._lifeCycleHooks[e].push(t):this._lifeCycleHooks[e]=[t],this}exitOverride(e){return e?this._exitCallback=e:this._exitCallback=t=>{if(t.code!=="commander.executeSubCommandAsync")throw t},this}_exit(e,t,n){this._exitCallback&&this._exitCallback(new Of(e,t,n)),ze.exit(e)}action(e){let t=o(n=>{let i=this.registeredArguments.length,s=n.slice(0,i);return this._storeOptionsAsProperties?s[i]=this:s[i]=this.opts(),s.push(this),e.apply(this,s)},"listener");return this._actionHandler=t,this}createOption(e,t){return new i0(e,t)}_callParseArg(e,t,n,i){try{return e.parseArg(t,n)}catch(s){if(s.code==="commander.invalidArgument"){let a=`${i} ${s.message}`;this.error(a,{exitCode:s.exitCode,code:s.code})}throw s}}_registerOption(e){let t=e.short&&this._findOption(e.short)||e.long&&this._findOption(e.long);if(t){let n=e.long&&this._findOption(e.long)?e.long:e.short;throw new Error(`Cannot add option '${e.flags}'${this._name&&` to command '${this._name}'`} due to conflicting flag '${n}'
-  already used by option '${t.flags}'`)}this._initOptionGroup(e),this.options.push(e)}_registerCommand(e){let t=o(i=>[i.name()].concat(i.aliases()),"knownBy"),n=t(e).find(i=>this._findCommand(i));if(n){let i=t(this._findCommand(n)).join("|"),s=t(e).join("|");throw new Error(`cannot add command '${s}' as already have command '${i}'`)}this._initCommandGroup(e),this.commands.push(e)}addOption(e){this._registerOption(e);let t=e.name(),n=e.attributeName();if(e.negate){let s=e.long.replace(/^--no-/,"--");this._findOption(s)||this.setOptionValueWithSource(n,e.defaultValue===void 0?!0:e.defaultValue,"default")}else e.defaultValue!==void 0&&this.setOptionValueWithSource(n,e.defaultValue,"default");let i=o((s,a,c)=>{s==null&&e.presetArg!==void 0&&(s=e.presetArg);let u=this.getOptionValue(n);s!==null&&e.parseArg?s=this._callParseArg(e,s,u,a):s!==null&&e.variadic&&(s=e._collectValue(s,u)),s==null&&(e.negate?s=!1:e.isBoolean()||e.optional?s=!0:s=""),this.setOptionValueWithSource(n,s,c)},"handleOptionValue");return this.on("option:"+t,s=>{let a=`error: option '${e.flags}' argument '${s}' is invalid.`;i(s,a,"cli")}),e.envVar&&this.on("optionEnv:"+t,s=>{let a=`error: option '${e.flags}' value '${s}' from env '${e.envVar}' is invalid.`;i(s,a,"env")}),this}_optionEx(e,t,n,i,s){if(typeof t=="object"&&t instanceof i0)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");let a=this.createOption(t,n);if(a.makeOptionMandatory(!!e.mandatory),typeof i=="function")a.default(s).argParser(i);else if(i instanceof RegExp){let c=i;i=o((u,f)=>{let l=c.exec(u);return l?l[0]:f},"fn"),a.default(s).argParser(i)}else a.default(i);return this.addOption(a)}option(e,t,n,i){return this._optionEx({},e,t,n,i)}requiredOption(e,t,n,i){return this._optionEx({mandatory:!0},e,t,n,i)}combineFlagAndOptionalValue(e=!0){return this._combineFlagAndOptionalValue=!!e,this}allowUnknownOption(e=!0){return this._allowUnknownOption=!!e,this}allowExcessArguments(e=!0){return this._allowExcessArguments=!!e,this}enablePositionalOptions(e=!0){return this._enablePositionalOptions=!!e,this}passThroughOptions(e=!0){return this._passThroughOptions=!!e,this._checkForBrokenPassThrough(),this}_checkForBrokenPassThrough(){if(this.parent&&this._passThroughOptions&&!this.parent._enablePositionalOptions)throw new Error(`passThroughOptions cannot be used for '${this._name}' without turning on enablePositionalOptions for parent command(s)`)}storeOptionsAsProperties(e=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");if(Object.keys(this._optionValues).length)throw new Error("call .storeOptionsAsProperties() before setting option values");return this._storeOptionsAsProperties=!!e,this}getOptionValue(e){return this._storeOptionsAsProperties?this[e]:this._optionValues[e]}setOptionValue(e,t){return this.setOptionValueWithSource(e,t,void 0)}setOptionValueWithSource(e,t,n){return this._storeOptionsAsProperties?this[e]=t:this._optionValues[e]=t,this._optionValueSources[e]=n,this}getOptionValueSource(e){return this._optionValueSources[e]}getOptionValueSourceWithGlobals(e){let t;return this._getCommandAndAncestors().forEach(n=>{n.getOptionValueSource(e)!==void 0&&(t=n.getOptionValueSource(e))}),t}_prepareUserArgs(e,t){if(e!==void 0&&!Array.isArray(e))throw new Error("first parameter to parse must be array or undefined");if(t=t||{},e===void 0&&t.from===void 0){ze.versions?.electron&&(t.from="electron");let i=ze.execArgv??[];(i.includes("-e")||i.includes("--eval")||i.includes("-p")||i.includes("--print"))&&(t.from="eval")}e===void 0&&(e=ze.argv),this.rawArgs=e.slice();let n;switch(t.from){case void 0:case"node":this._scriptPath=e[1],n=e.slice(2);break;case"electron":ze.defaultApp?(this._scriptPath=e[1],n=e.slice(2)):n=e.slice(1);break;case"user":n=e.slice(0);break;case"eval":n=e.slice(1);break;default:throw new Error(`unexpected parse option { from: '${t.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",n}parse(e,t){this._prepareForParse();let n=this._prepareUserArgs(e,t);return this._parseCommand([],n),this}async parseAsync(e,t){this._prepareForParse();let n=this._prepareUserArgs(e,t);return await this._parseCommand([],n),this}_prepareForParse(){this._savedState===null?this.saveStateBeforeParse():this.restoreStateBeforeParse()}saveStateBeforeParse(){this._savedState={_name:this._name,_optionValues:{...this._optionValues},_optionValueSources:{...this._optionValueSources}}}restoreStateBeforeParse(){if(this._storeOptionsAsProperties)throw new Error(`Can not call parse again when storeOptionsAsProperties is true.
- either make a new Command for each call to parse, or stop storing options as properties`);this._name=this._savedState._name,this._scriptPath=null,this.rawArgs=[],this._optionValues={...this._savedState._optionValues},this._optionValueSources={...this._savedState._optionValueSources},this.args=[],this.processedArgs=[]}_checkForMissingExecutable(e,t,n){if(hc.existsSync(e))return;let i=t?`searched for local subcommand relative to directory '${t}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",s=`'${e}' does not exist
 - if '${n}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${i}`;throw new Error(s)}_executeSubCommand(e,t){t=t.slice();let n=!1,i=[".js",".ts",".tsx",".mjs",".cjs"];function s(l,h){let p=$n.resolve(l,h);if(hc.existsSync(p))return p;if(i.includes($n.extname(h)))return;let m=i.find(b=>hc.existsSync(`${p}${b}`));if(m)return`${p}${m}`}o(s,"findFile"),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let a=e._executableFile||`${this._name}-${e._name}`,c=this._executableDir||"";if(this._scriptPath){let l;try{l=hc.realpathSync(this._scriptPath)}catch{l=this._scriptPath}c=$n.resolve($n.dirname(l),c)}if(c){let l=s(c,a);if(!l&&!e._executableFile&&this._scriptPath){let h=$n.basename(this._scriptPath,$n.extname(this._scriptPath));h!==this._name&&(l=s(c,`${h}-${e._name}`))}a=l||a}n=i.includes($n.extname(a));let u;ze.platform!=="win32"?n?(t.unshift(a),t=a0(ze.execArgv).concat(t),u=Af.spawn(ze.argv[0],t,{stdio:"inherit"})):u=Af.spawn(a,t,{stdio:"inherit"}):(this._checkForMissingExecutable(a,c,e._name),t.unshift(a),t=a0(ze.execArgv).concat(t),u=Af.spawn(ze.execPath,t,{stdio:"inherit"})),u.killed||["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach(h=>{ze.on(h,()=>{u.killed===!1&&u.exitCode===null&&u.kill(h)})});let f=this._exitCallback;u.on("close",l=>{l=l??1,f?f(new Of(l,"commander.executeSubCommandAsync","(close)")):ze.exit(l)}),u.on("error",l=>{if(l.code==="ENOENT")this._checkForMissingExecutable(a,c,e._name);else if(l.code==="EACCES")throw new Error(`'${a}' not executable`);if(!f)ze.exit(1);else{let h=new Of(1,"commander.executeSubCommandAsync","(error)");h.nestedError=l,f(h)}}),this.runningCommand=u}_dispatchSubcommand(e,t,n){let i=this._findCommand(e);i||this.help({error:!0}),i._prepareForParse();let s;return s=this._chainOrCallSubCommandHook(s,i,"preSubcommand"),s=this._chainOrCall(s,()=>{if(i._executableHandler)this._executeSubCommand(i,t.concat(n));else return i._parseCommand(t,n)}),s}_dispatchHelpCommand(e){e||this.help();let t=this._findCommand(e);return t&&!t._executableHandler&&t.help(),this._dispatchSubcommand(e,[],[this._getHelpOption()?.long??this._getHelpOption()?.short??"--help"])}_checkNumberOfArguments(){this.registeredArguments.forEach((e,t)=>{e.required&&this.args[t]==null&&this.missingArgument(e.name())}),!(this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic)&&this.args.length>this.registeredArguments.length&&this._excessArguments(this.args)}_processArguments(){let e=o((n,i,s)=>{let a=i;if(i!==null&&n.parseArg){let c=`error: command-argument value '${i}' is invalid for argument '${n.name()}'.`;a=this._callParseArg(n,i,s,c)}return a},"myParseArg");this._checkNumberOfArguments();let t=[];this.registeredArguments.forEach((n,i)=>{let s=n.defaultValue;n.variadic?i<this.args.length?(s=this.args.slice(i),n.parseArg&&(s=s.reduce((a,c)=>e(n,c,a),n.defaultValue))):s===void 0&&(s=[]):i<this.args.length&&(s=this.args[i],n.parseArg&&(s=e(n,s,n.defaultValue))),t[i]=s}),this.processedArgs=t}_chainOrCall(e,t){return e?.then&&typeof e.then=="function"?e.then(()=>t()):t()}_chainOrCallHooks(e,t){let n=e,i=[];return this._getCommandAndAncestors().reverse().filter(s=>s._lifeCycleHooks[t]!==void 0).forEach(s=>{s._lifeCycleHooks[t].forEach(a=>{i.push({hookedCommand:s,callback:a})})}),t==="postAction"&&i.reverse(),i.forEach(s=>{n=this._chainOrCall(n,()=>s.callback(s.hookedCommand,this))}),n}_chainOrCallSubCommandHook(e,t,n){let i=e;return this._lifeCycleHooks[n]!==void 0&&this._lifeCycleHooks[n].forEach(s=>{i=this._chainOrCall(i,()=>s(this,t))}),i}_parseCommand(e,t){let n=this.parseOptions(t);if(this._parseOptionsEnv(),this._parseOptionsImplied(),e=e.concat(n.operands),t=n.unknown,this.args=e.concat(t),e&&this._findCommand(e[0]))return this._dispatchSubcommand(e[0],e.slice(1),t);if(this._getHelpCommand()&&e[0]===this._getHelpCommand().name())return this._dispatchHelpCommand(e[1]);if(this._defaultCommandName)return this._outputHelpIfRequested(t),this._dispatchSubcommand(this._defaultCommandName,e,t);this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName&&this.help({error:!0}),this._outputHelpIfRequested(n.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let i=o(()=>{n.unknown.length>0&&this.unknownOption(n.unknown[0])},"checkForUnknownOptions"),s=`command:${this.name()}`;if(this._actionHandler){i(),this._processArguments();let a;return a=this._chainOrCallHooks(a,"preAction"),a=this._chainOrCall(a,()=>this._actionHandler(this.processedArgs)),this.parent&&(a=this._chainOrCall(a,()=>{this.parent.emit(s,e,t)})),a=this._chainOrCallHooks(a,"postAction"),a}if(this.parent?.listenerCount(s))i(),this._processArguments(),this.parent.emit(s,e,t);else if(e.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",e,t);this.listenerCount("command:*")?this.emit("command:*",e,t):this.commands.length?this.unknownCommand():(i(),this._processArguments())}else this.commands.length?(i(),this.help({error:!0})):(i(),this._processArguments())}_findCommand(e){if(e)return this.commands.find(t=>t._name===e||t._aliases.includes(e))}_findOption(e){return this.options.find(t=>t.is(e))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach(e=>{e.options.forEach(t=>{t.mandatory&&e.getOptionValue(t.attributeName())===void 0&&e.missingMandatoryOptionValue(t)})})}_checkForConflictingLocalOptions(){let e=this.options.filter(n=>{let i=n.attributeName();return this.getOptionValue(i)===void 0?!1:this.getOptionValueSource(i)!=="default"});e.filter(n=>n.conflictsWith.length>0).forEach(n=>{let i=e.find(s=>n.conflictsWith.includes(s.attributeName()));i&&this._conflictingOption(n,i)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach(e=>{e._checkForConflictingLocalOptions()})}parseOptions(e){let t=[],n=[],i=t;function s(l){return l.length>1&&l[0]==="-"}o(s,"maybeOption");let a=o(l=>/^-(\d+|\d*\.\d+)(e[+-]?\d+)?$/.test(l)?!this._getCommandAndAncestors().some(h=>h.options.map(p=>p.short).some(p=>/^-\d$/.test(p))):!1,"negativeNumberArg"),c=null,u=null,f=0;for(;f<e.length||u;){let l=u??e[f++];if(u=null,l==="--"){i===n&&i.push(l),i.push(...e.slice(f));break}if(c&&(!s(l)||a(l))){this.emit(`option:${c.name()}`,l);continue}if(c=null,s(l)){let h=this._findOption(l);if(h){if(h.required){let p=e[f++];p===void 0&&this.optionMissingArgument(h),this.emit(`option:${h.name()}`,p)}else if(h.optional){let p=null;f<e.length&&(!s(e[f])||a(e[f]))&&(p=e[f++]),this.emit(`option:${h.name()}`,p)}else this.emit(`option:${h.name()}`);c=h.variadic?h:null;continue}}if(l.length>2&&l[0]==="-"&&l[1]!=="-"){let h=this._findOption(`-${l[1]}`);if(h){h.required||h.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${h.name()}`,l.slice(2)):(this.emit(`option:${h.name()}`),u=`-${l.slice(2)}`);continue}}if(/^--[^=]+=/.test(l)){let h=l.indexOf("="),p=this._findOption(l.slice(0,h));if(p&&(p.required||p.optional)){this.emit(`option:${p.name()}`,l.slice(h+1));continue}}if(i===t&&s(l)&&!(this.commands.length===0&&a(l))&&(i=n),(this._enablePositionalOptions||this._passThroughOptions)&&t.length===0&&n.length===0){if(this._findCommand(l)){t.push(l),n.push(...e.slice(f));break}else if(this._getHelpCommand()&&l===this._getHelpCommand().name()){t.push(l,...e.slice(f));break}else if(this._defaultCommandName){n.push(l,...e.slice(f));break}}if(this._passThroughOptions){i.push(l,...e.slice(f));break}i.push(l)}return{operands:t,unknown:n}}opts(){if(this._storeOptionsAsProperties){let e={},t=this.options.length;for(let n=0;n<t;n++){let i=this.options[n].attributeName();e[i]=i===this._versionOptionName?this._version:this[i]}return e}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((e,t)=>Object.assign(e,t.opts()),{})}error(e,t){this._outputConfiguration.outputError(`${e}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError=="string"?this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`):this._showHelpAfterError&&(this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0}));let n=t||{},i=n.exitCode||1,s=n.code||"commander.error";this._exit(i,s,e)}_parseOptionsEnv(){this.options.forEach(e=>{if(e.envVar&&e.envVar in ze.env){let t=e.attributeName();(this.getOptionValue(t)===void 0||["default","config","env"].includes(this.getOptionValueSource(t)))&&(e.required||e.optional?this.emit(`optionEnv:${e.name()}`,ze.env[e.envVar]):this.emit(`optionEnv:${e.name()}`))}})}_parseOptionsImplied(){let e=new bS(this.options),t=o(n=>this.getOptionValue(n)!==void 0&&!["default","implied"].includes(this.getOptionValueSource(n)),"hasCustomOptionValue");this.options.filter(n=>n.implied!==void 0&&t(n.attributeName())&&e.valueFromOption(this.getOptionValue(n.attributeName()),n)).forEach(n=>{Object.keys(n.implied).filter(i=>!t(i)).forEach(i=>{this.setOptionValueWithSource(i,n.implied[i],"implied")})})}missingArgument(e){let t=`error: missing required argument '${e}'`;this.error(t,{code:"commander.missingArgument"})}optionMissingArgument(e){let t=`error: option '${e.flags}' argument missing`;this.error(t,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(e){let t=`error: required option '${e.flags}' not specified`;this.error(t,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(e,t){let n=o(a=>{let c=a.attributeName(),u=this.getOptionValue(c),f=this.options.find(h=>h.negate&&c===h.attributeName()),l=this.options.find(h=>!h.negate&&c===h.attributeName());return f&&(f.presetArg===void 0&&u===!1||f.presetArg!==void 0&&u===f.presetArg)?f:l||a},"findBestOptionFromValue"),i=o(a=>{let c=n(a),u=c.attributeName();return this.getOptionValueSource(u)==="env"?`environment variable '${c.envVar}'`:`option '${c.flags}'`},"getErrorMessage"),s=`error: ${i(e)} cannot be used with ${i(t)}`;this.error(s,{code:"commander.conflictingOption"})}unknownOption(e){if(this._allowUnknownOption)return;let t="";if(e.startsWith("--")&&this._showSuggestionAfterError){let i=[],s=this;do{let a=s.createHelp().visibleOptions(s).filter(c=>c.long).map(c=>c.long);i=i.concat(a),s=s.parent}while(s&&!s._enablePositionalOptions);t=s0(e,i)}let n=`error: unknown option '${e}'${t}`;this.error(n,{code:"commander.unknownOption"})}_excessArguments(e){if(this._allowExcessArguments)return;let t=this.registeredArguments.length,n=t===1?"":"s",s=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${t} argument${n} but got ${e.length}.`;this.error(s,{code:"commander.excessArguments"})}unknownCommand(){let e=this.args[0],t="";if(this._showSuggestionAfterError){let i=[];this.createHelp().visibleCommands(this).forEach(s=>{i.push(s.name()),s.alias()&&i.push(s.alias())}),t=s0(e,i)}let n=`error: unknown command '${e}'${t}`;this.error(n,{code:"commander.unknownCommand"})}version(e,t,n){if(e===void 0)return this._version;this._version=e,t=t||"-V, --version",n=n||"output the version number";let i=this.createOption(t,n);return this._versionOptionName=i.attributeName(),this._registerOption(i),this.on("option:"+i.name(),()=>{this._outputConfiguration.writeOut(`${e}
`),this._exit(0,"commander.version",e)}),this}description(e,t){return e===void 0&&t===void 0?this._description:(this._description=e,t&&(this._argsDescription=t),this)}summary(e){return e===void 0?this._summary:(this._summary=e,this)}alias(e){if(e===void 0)return this._aliases[0];let t=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler&&(t=this.commands[this.commands.length-1]),e===t._name)throw new Error("Command alias can't be the same as its name");let n=this.parent?._findCommand(e);if(n){let i=[n.name()].concat(n.aliases()).join("|");throw new Error(`cannot add alias '${e}' to command '${this.name()}' as already have command '${i}'`)}return t._aliases.push(e),this}aliases(e){return e===void 0?this._aliases:(e.forEach(t=>this.alias(t)),this)}usage(e){if(e===void 0){if(this._usage)return this._usage;let t=this.registeredArguments.map(n=>yS(n));return[].concat(this.options.length||this._helpOption!==null?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?t:[]).join(" ")}return this._usage=e,this}name(e){return e===void 0?this._name:(this._name=e,this)}helpGroup(e){return e===void 0?this._helpGroupHeading??"":(this._helpGroupHeading=e,this)}commandsGroup(e){return e===void 0?this._defaultCommandGroup??"":(this._defaultCommandGroup=e,this)}optionsGroup(e){return e===void 0?this._defaultOptionGroup??"":(this._defaultOptionGroup=e,this)}_initOptionGroup(e){this._defaultOptionGroup&&!e.helpGroupHeading&&e.helpGroup(this._defaultOptionGroup)}_initCommandGroup(e){this._defaultCommandGroup&&!e.helpGroup()&&e.helpGroup(this._defaultCommandGroup)}nameFromFilename(e){return this._name=$n.basename(e,$n.extname(e)),this}executableDir(e){return e===void 0?this._executableDir:(this._executableDir=e,this)}helpInformation(e){let t=this.createHelp(),n=this._getOutputContext(e);t.prepareContext({error:n.error,helpWidth:n.helpWidth,outputHasColors:n.hasColors});let i=t.formatHelp(this,t);return n.hasColors?i:this._outputConfiguration.stripColor(i)}_getOutputContext(e){e=e||{};let t=!!e.error,n,i,s;return t?(n=o(c=>this._outputConfiguration.writeErr(c),"baseWrite"),i=this._outputConfiguration.getErrHasColors(),s=this._outputConfiguration.getErrHelpWidth()):(n=o(c=>this._outputConfiguration.writeOut(c),"baseWrite"),i=this._outputConfiguration.getOutHasColors(),s=this._outputConfiguration.getOutHelpWidth()),{error:t,write:o(c=>(i||(c=this._outputConfiguration.stripColor(c)),n(c)),"write"),hasColors:i,helpWidth:s}}outputHelp(e){let t;typeof e=="function"&&(t=e,e=void 0);let n=this._getOutputContext(e),i={error:n.error,write:n.write,command:this};this._getCommandAndAncestors().reverse().forEach(a=>a.emit("beforeAllHelp",i)),this.emit("beforeHelp",i);let s=this.helpInformation({error:n.error});if(t&&(s=t(s),typeof s!="string"&&!Buffer.isBuffer(s)))throw new Error("outputHelp callback must return a string or a Buffer");n.write(s),this._getHelpOption()?.long&&this.emit(this._getHelpOption().long),this.emit("afterHelp",i),this._getCommandAndAncestors().forEach(a=>a.emit("afterAllHelp",i))}helpOption(e,t){return typeof e=="boolean"?(e?(this._helpOption===null&&(this._helpOption=void 0),this._defaultOptionGroup&&this._initOptionGroup(this._getHelpOption())):this._helpOption=null,this):(this._helpOption=this.createOption(e??"-h, --help",t??"display help for command"),(e||t)&&this._initOptionGroup(this._helpOption),this)}_getHelpOption(){return this._helpOption===void 0&&this.helpOption(void 0,void 0),this._helpOption}addHelpOption(e){return this._helpOption=e,this._initOptionGroup(e),this}help(e){this.outputHelp(e);let t=Number(ze.exitCode??0);t===0&&e&&typeof e!="function"&&e.error&&(t=1),this._exit(t,"commander.help","(outputHelp)")}addHelpText(e,t){let n=["beforeAll","before","after","afterAll"];if(!n.includes(e))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${n.join("', '")}'`);let i=`${e}Help`;return this.on(i,s=>{let a;typeof t=="function"?a=t({error:s.error,command:s.command}):a=t,a&&s.write(`${a}
`)}),this}_outputHelpIfRequested(e){let t=this._getHelpOption();t&&e.find(i=>t.is(i))&&(this.outputHelp(),this._exit(0,"commander.helpDisplayed","(outputHelp)"))}};function a0(r){return r.map(e=>{if(!e.startsWith("--inspect"))return e;let t,n="127.0.0.1",i="9229",s;return(s=e.match(/^(--inspect(-brk)?)$/))!==null?t=s[1]:(s=e.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null?(t=s[1],/^\d+$/.test(s[3])?i=s[3]:n=s[3]):(s=e.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null&&(t=s[1],n=s[3],i=s[4]),t&&i!=="0"?`${t}=${n}:${parseInt(i)+1}`:e})}o(a0,"incrementNodeInspectorPort");function Ff(){if(ze.env.NO_COLOR||ze.env.FORCE_COLOR==="0"||ze.env.FORCE_COLOR==="false")return!1;if(ze.env.FORCE_COLOR||ze.env.CLICOLOR_FORCE!==void 0)return!0}o(Ff,"useColor");Pf.Command=Cf;Pf.useColor=Ff});var f0=_(Or=>{var{Argument:c0}=fc(),{Command:If}=o0(),{CommanderError:SS,InvalidArgumentError:u0}=Da(),{Help:wS}=Sf(),{Option:l0}=xf();Or.program=new If;Or.createCommand=r=>new If(r);Or.createOption=(r,e)=>new l0(r,e);Or.createArgument=(r,e)=>new c0(r,e);Or.Command=If;Or.Option=l0;Or.Argument=c0;Or.Help=wS;Or.CommanderError=SS;Or.InvalidArgumentError=u0;Or.InvalidOptionArgumentError=u0});var Df=_(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.AssetClass=void 0;var d0;(function(r){r.AREA="ems__Area",r.TASK="ems__Task",r.PROJECT="ems__Project",r.MEETING="ems__Meeting",r.INITIATIVE="ems__Initiative",r.TASK_PROTOTYPE="ems__TaskPrototype",r.MEETING_PROTOTYPE="ems__MeetingPrototype",r.EVENT_PROTOTYPE="exo__EventPrototype",r.PROJECT_PROTOTYPE="ems__ProjectPrototype",r.EVENT="exo__Event",r.DAILY_NOTE="pn__DailyNote",r.CONCEPT="ims__Concept",r.SESSION_START_EVENT="ems__SessionStartEvent",r.SESSION_END_EVENT="ems__SessionEndEvent",r.PROTOTYPE="exo__Prototype",r.CLASS="exo__Class"})(d0||(dc.AssetClass=d0={}))});var Rf=_(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.EffortStatus=void 0;var p0;(function(r){r.DRAFT="ems__EffortStatusDraft",r.BACKLOG="ems__EffortStatusBacklog",r.ANALYSIS="ems__EffortStatusAnalysis",r.TODO="ems__EffortStatusToDo",r.DOING="ems__EffortStatusDoing",r.DONE="ems__EffortStatusDone",r.TRASHED="ems__EffortStatusTrashed"})(p0||(pc.EffortStatus=p0={}))});var g0=_(m0=>{"use strict";Object.defineProperty(m0,"__esModule",{value:!0})});var _0=_(y0=>{"use strict";Object.defineProperty(y0,"__esModule",{value:!0})});var b0=_(v0=>{"use strict";Object.defineProperty(v0,"__esModule",{value:!0})});var w0=_(S0=>{"use strict";Object.defineProperty(S0,"__esModule",{value:!0})});var mt=_(mc=>{"use strict";Object.defineProperty(mc,"__esModule",{value:!0});mc.IRI=void 0;var Nf=class r{static{o(this,"IRI")}constructor(e){let t=e.trim();if(t.length===0)throw new Error("IRI cannot be empty");if(!r.isValidIRI(t))throw new Error("Invalid IRI format");this._value=t}get value(){return this._value}equals(e){return this._value===e._value}toString(){return this._value}static isValidIRI(e){if(!e||e.trim().length===0||/\s/.test(e)||!/^[a-z][a-z0-9+.-]*:/i.test(e))return!1;let n=["http","https","ftp","ftps","file","mailto","tel","data","ws","wss","urn","obsidian"],i=e.match(/^([a-z][a-z0-9+.-]*?):/i);if(i){let s=i[1].toLowerCase();if(!n.includes(s))return!1}try{return new URL(e),!0}catch{return/^urn:[a-z0-9][a-z0-9-]{0,31}:[^\s]+$/i.test(e)}}};mc.IRI=Nf});var Mt=_(gc=>{"use strict";Object.defineProperty(gc,"__esModule",{value:!0});gc.Literal=void 0;var ES="http://www.w3.org/2001/XMLSchema#string",kf=class{static{o(this,"Literal")}constructor(e,t,n){if(e.length===0)throw new Error("Literal value cannot be empty");if(t&&n)throw new Error("Literal cannot have both datatype and language tag");this._value=e,this._datatype=t,this._language=n?n.toLowerCase():void 0}get value(){return this._value}get datatype(){return this._datatype}get language(){return this._language}equals(e){if(this._value!==e._value||this._language!==e._language)return!1;let t=this.normalizedDatatype(),n=e.normalizedDatatype();return t===n}normalizedDatatype(){return!this._datatype||this._datatype.value===ES?null:this._datatype.value}toString(){let e=`"${this._value}"`;return this._datatype?e+=`^^<${this._datatype.value}>`:this._language&&(e+=`@${this._language}`),e}};gc.Literal=kf});var Cr=_(_c=>{"use strict";Object.defineProperty(_c,"__esModule",{value:!0});_c.BlankNode=void 0;var yc=class r{static{o(this,"BlankNode")}constructor(e){let t=e.trim();if(t.length===0)throw new Error("BlankNode id cannot be empty");this._id=t}get id(){return this._id}equals(e){return this._id===e._id}toString(){return`_:${this._id}`}static generateId(){return`b${++r.counter}`}static create(){return new r(r.generateId())}};_c.BlankNode=yc;yc.counter=0});var bn=_(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.Namespace=void 0;var E0=mt(),Jt=class{static{o(this,"Namespace")}constructor(e,t){if(e.trim().length===0)throw new Error("Namespace prefix cannot be empty");this._prefix=e,this._iri=new E0.IRI(t)}get prefix(){return this._prefix}get iri(){return this._iri}term(e){return new E0.IRI(`${this._iri.value}${e}`)}expand(e){let t=e.split(":");if(t.length!==2)return null;let[n,i]=t;return n!==this._prefix?null:this.term(i)}};vc.Namespace=Jt;Jt.RDF=new Jt("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");Jt.RDFS=new Jt("rdfs","http://www.w3.org/2000/01/rdf-schema#");Jt.OWL=new Jt("owl","http://www.w3.org/2002/07/owl#");Jt.XSD=new Jt("xsd","http://www.w3.org/2001/XMLSchema#");Jt.EXO=new Jt("exo","https://exocortex.my/ontology/exo#");Jt.EMS=new Jt("ems","https://exocortex.my/ontology/ems#")});var Ui=_(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.Triple=void 0;var jf=mt(),Mf=Mt(),Lf=Cr(),Vf=class{static{o(this,"Triple")}constructor(e,t,n){this._subject=e,this._predicate=t,this._object=n}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}equals(e){return!(!this.equalsNode(this._subject,e._subject)||!this._predicate.equals(e._predicate)||!this.equalsNode(this._object,e._object))}equalsNode(e,t){return e instanceof jf.IRI&&t instanceof jf.IRI||e instanceof Lf.BlankNode&&t instanceof Lf.BlankNode||e instanceof Mf.Literal&&t instanceof Mf.Literal?e.equals(t):!1}toString(){let e=this.nodeToString(this._subject),t=`<${this._predicate.value}>`,n=this.nodeToString(this._object);return`${e} ${t} ${n} .`}nodeToString(e){return e instanceof jf.IRI?`<${e.value}>`:e instanceof Lf.BlankNode||e instanceof Mf.Literal?e.toString():""}};bc.Triple=Vf});var T0=_(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});Fr.Triple=Fr.Namespace=Fr.BlankNode=Fr.Literal=Fr.IRI=void 0;var TS=mt();Object.defineProperty(Fr,"IRI",{enumerable:!0,get:o(function(){return TS.IRI},"get")});var xS=Mt();Object.defineProperty(Fr,"Literal",{enumerable:!0,get:o(function(){return xS.Literal},"get")});var AS=Cr();Object.defineProperty(Fr,"BlankNode",{enumerable:!0,get:o(function(){return AS.BlankNode},"get")});var OS=bn();Object.defineProperty(Fr,"Namespace",{enumerable:!0,get:o(function(){return OS.Namespace},"get")});var CS=Ui();Object.defineProperty(Fr,"Triple",{enumerable:!0,get:o(function(){return CS.Triple},"get")})});var Bi=_(wc=>{"use strict";Object.defineProperty(wc,"__esModule",{value:!0});wc.WikiLinkHelpers=void 0;var Sc=class{static{o(this,"WikiLinkHelpers")}static normalize(e){return e?e.replace(this.WIKI_LINK_PATTERN,"").trim():""}static normalizeArray(e){return e?(Array.isArray(e)?e:[e]).map(n=>this.normalize(n)).filter(n=>n.length>0):[]}static equals(e,t){return this.normalize(e)===this.normalize(t)}static includes(e,t){let n=this.normalizeArray(e),i=this.normalize(t);return n.includes(i)}};wc.WikiLinkHelpers=Sc;Sc.WIKI_LINK_PATTERN=/\[\[|\]\]/g});var Lt=_(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.EffortStatus=Cs.AssetClass=void 0;var FS=Df();Object.defineProperty(Cs,"AssetClass",{enumerable:!0,get:o(function(){return FS.AssetClass},"get")});var PS=Rf();Object.defineProperty(Cs,"EffortStatus",{enumerable:!0,get:o(function(){return PS.EffortStatus},"get")})});var ui=_(Vt=>{"use strict";Object.defineProperty(Vt,"__esModule",{value:!0});Vt.hasClass=Wi;Vt.isAreaOrProject=IS;Vt.isEffort=DS;Vt.hasStatus=RS;Vt.isAssetArchived=NS;Vt.hasEmptyProperties=kS;Vt.needsFolderRepair=jS;Vt.getTodayDateString=qf;Vt.isPlannedForToday=MS;Vt.hasPlannedStartTimestamp=LS;Vt.extractDailyNoteDate=VS;Vt.isCurrentDateGteDay=qS;Vt.inheritsFromPrototype=O0;Vt.isPrototypeClass=BS;var A0=Bi(),$i=Lt();function Wi(r,e){return r?(Array.isArray(r)?r:[r]).some(n=>A0.WikiLinkHelpers.normalize(n)===e):!1}o(Wi,"hasClass");function IS(r){return Wi(r,$i.AssetClass.AREA)||Wi(r,$i.AssetClass.PROJECT)}o(IS,"isAreaOrProject");function DS(r){return Wi(r,$i.AssetClass.TASK)||Wi(r,$i.AssetClass.PROJECT)||Wi(r,$i.AssetClass.MEETING)}o(DS,"isEffort");function RS(r,e){if(!r)return!1;let t=Array.isArray(r)?r[0]:r;return t?A0.WikiLinkHelpers.normalize(t)===e:!1}o(RS,"hasStatus");function NS(r){if(r===!0||r===1)return!0;if(typeof r=="string"){let e=r.toLowerCase();return e==="true"||e==="yes"}return!1}o(NS,"isAssetArchived");function kS(r){return!r||Object.keys(r).length===0?!1:Object.values(r).some(e=>!!(e==null||typeof e=="string"&&e.trim()===""||Array.isArray(e)&&e.length===0||typeof e=="object"&&!Array.isArray(e)&&Object.keys(e).length===0))}o(kS,"hasEmptyProperties");function jS(r,e){if(!e)return!1;let t=r.replace(/\/$/,""),n=e.replace(/\/$/,"");return t!==n}o(jS,"needsFolderRepair");function qf(){let r=new Date,e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),n=String(r.getDate()).padStart(2,"0");return`${e}-${t}-${n}`}o(qf,"getTodayDateString");function MS(r){let e=r.ems__Effort_plannedStartTimestamp;if(!e)return!1;let t=qf();return typeof e=="string"?e.split("T")[0]===t:Array.isArray(e)&&e.length>0?String(e[0]).split("T")[0]===t:!1}o(MS,"isPlannedForToday");function LS(r){let e=r.ems__Effort_plannedStartTimestamp;return e?typeof e=="string"?e.trim().length>0:Array.isArray(e)&&e.length>0?String(e[0]).trim().length>0:!1:!1}o(LS,"hasPlannedStartTimestamp");function VS(r){let e=r.pn__DailyNote_day;if(!e)return null;if(typeof e=="string"){let t=e.match(/\[\[(.+?)\]\]/);return t?t[1]:e}if(Array.isArray(e)&&e.length>0){let t=String(e[0]),n=t.match(/\[\[(.+?)\]\]/);return n?n[1]:t}return null}o(VS,"extractDailyNoteDate");function qS(r){return qf()>=r}o(qS,"isCurrentDateGteDay");function x0(r){return r?r.replace(/^["']|["']$/g,"").replace(/\[\[|\]\]/g,"").trim():""}o(x0,"normalizeWithQuotes");var US=10;function O0(r,e=US){let t=r.exo__Class_superClass;if(!t)return!1;let n=new Set,i=[],s=Array.isArray(t)?t:[t];for(let a of s){let c=x0(a);c&&i.push({className:c,depth:0})}for(;i.length>0;){let a=i.shift();if(!a)continue;let{className:c,depth:u}=a;if(u>e)continue;if(c===$i.AssetClass.PROTOTYPE)return!0;if(n.has(c))continue;n.add(c);let f=`${c}__exo__Class_superClass`,l=r[f];if(l){let h=Array.isArray(l)?l:[l];for(let p of h){let m=x0(p);m&&!n.has(m)&&i.push({className:m,depth:u+1})}}}return!1}o(O0,"inheritsFromPrototype");function BS(r,e){return Wi(r,$i.AssetClass.CLASS)?O0(e):!1}o(BS,"isPrototypeClass")});var F0=_(Ra=>{"use strict";Object.defineProperty(Ra,"__esModule",{value:!0});Ra.canCreateTask=$S;Ra.canCreateRelatedTask=WS;Ra.canConvertTaskToProject=GS;var Ec=ui(),C0=Lt();function $S(r){return(0,Ec.isAreaOrProject)(r.instanceClass)}o($S,"canCreateTask");function WS(r){return!(!(0,Ec.hasClass)(r.instanceClass,C0.AssetClass.TASK)||(0,Ec.isAssetArchived)(r.isArchived))}o(WS,"canCreateRelatedTask");function GS(r){return(0,Ec.hasClass)(r.instanceClass,C0.AssetClass.TASK)}o(GS,"canConvertTaskToProject")});var P0=_(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.canCreateProject=HS;Fs.canMoveToAnalysis=zS;Fs.canMoveToToDo=KS;Fs.canConvertProjectToTask=YS;var li=ui(),fi=Lt();function HS(r){return(0,li.hasClass)(r.instanceClass,fi.AssetClass.AREA)||(0,li.hasClass)(r.instanceClass,fi.AssetClass.INITIATIVE)||(0,li.hasClass)(r.instanceClass,fi.AssetClass.PROJECT)}o(HS,"canCreateProject");function zS(r){return(0,li.hasClass)(r.instanceClass,fi.AssetClass.PROJECT)?(0,li.hasStatus)(r.currentStatus,fi.EffortStatus.BACKLOG):!1}o(zS,"canMoveToAnalysis");function KS(r){return(0,li.hasClass)(r.instanceClass,fi.AssetClass.PROJECT)?(0,li.hasStatus)(r.currentStatus,fi.EffortStatus.ANALYSIS):!1}o(KS,"canMoveToToDo");function YS(r){return(0,li.hasClass)(r.instanceClass,fi.AssetClass.PROJECT)}o(YS,"canConvertProjectToTask")});var R0=_(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.canCreateChildArea=QS;Tc.canSetActiveFocus=JS;var I0=ui(),D0=Lt();function QS(r){return(0,I0.hasClass)(r.instanceClass,D0.AssetClass.AREA)}o(QS,"canCreateChildArea");function JS(r){return(0,I0.hasClass)(r.instanceClass,D0.AssetClass.AREA)}o(JS,"canSetActiveFocus")});var k0=_(ur=>{"use strict";Object.defineProperty(ur,"__esModule",{value:!0});ur.canPlanOnToday=XS;ur.canPlanForEvening=ZS;ur.canShiftDayBackward=ew;ur.canShiftDayForward=tw;ur.canSetDraftStatus=rw;ur.canMoveToBacklog=nw;ur.canStartEffort=iw;ur.canMarkDone=sw;ur.canTrashEffort=aw;ur.canVoteOnEffort=ow;ur.canRollbackStatus=cw;ur.canArchiveTask=uw;var N0=Bi(),Xe=ui(),yr=Lt();function XS(r){return!(!(0,Xe.isEffort)(r.instanceClass)||(0,Xe.isPlannedForToday)(r.metadata))}o(XS,"canPlanOnToday");function ZS(r){return!(0,Xe.hasClass)(r.instanceClass,yr.AssetClass.TASK)&&!(0,Xe.hasClass)(r.instanceClass,yr.AssetClass.MEETING)?!1:(0,Xe.hasStatus)(r.currentStatus,yr.EffortStatus.BACKLOG)}o(ZS,"canPlanForEvening");function ew(r){return(0,Xe.isEffort)(r.instanceClass)?(0,Xe.hasPlannedStartTimestamp)(r.metadata):!1}o(ew,"canShiftDayBackward");function tw(r){return(0,Xe.isEffort)(r.instanceClass)?(0,Xe.hasPlannedStartTimestamp)(r.metadata):!1}o(tw,"canShiftDayForward");function rw(r){return(0,Xe.isEffort)(r.instanceClass)?!r.currentStatus:!1}o(rw,"canSetDraftStatus");function nw(r){return(0,Xe.isEffort)(r.instanceClass)?(0,Xe.hasStatus)(r.currentStatus,yr.EffortStatus.DRAFT):!1}o(nw,"canMoveToBacklog");function iw(r){return(0,Xe.isEffort)(r.instanceClass)?(0,Xe.hasClass)(r.instanceClass,yr.AssetClass.TASK)||(0,Xe.hasClass)(r.instanceClass,yr.AssetClass.MEETING)?(0,Xe.hasStatus)(r.currentStatus,yr.EffortStatus.BACKLOG):(0,Xe.hasClass)(r.instanceClass,yr.AssetClass.PROJECT)?(0,Xe.hasStatus)(r.currentStatus,yr.EffortStatus.TODO):!1:!1}o(iw,"canStartEffort");function sw(r){return(0,Xe.isEffort)(r.instanceClass)?(0,Xe.hasStatus)(r.currentStatus,yr.EffortStatus.DOING):!1}o(sw,"canMarkDone");function aw(r){return(0,Xe.isEffort)(r.instanceClass)?r.currentStatus?!(Array.isArray(r.currentStatus)?r.currentStatus:[r.currentStatus]).some(n=>{let i=N0.WikiLinkHelpers.normalize(n);return i===yr.EffortStatus.TRASHED||i===yr.EffortStatus.DONE}):!0:!1}o(aw,"canTrashEffort");function ow(r){return!(!(0,Xe.isEffort)(r.instanceClass)||(0,Xe.isAssetArchived)(r.isArchived))}o(ow,"canVoteOnEffort");function cw(r){if(!(0,Xe.isEffort)(r.instanceClass)||(0,Xe.isAssetArchived)(r.isArchived)||!r.currentStatus)return!1;let e=Array.isArray(r.currentStatus)?r.currentStatus[0]:r.currentStatus;return!(!e||N0.WikiLinkHelpers.normalize(e)===yr.EffortStatus.TRASHED)}o(cw,"canRollbackStatus");function uw(r){return!(0,Xe.isAssetArchived)(r.isArchived)}o(uw,"canArchiveTask")});var j0=_(kr=>{"use strict";Object.defineProperty(kr,"__esModule",{value:!0});kr.canCreateEvent=lw;kr.canCreateInstance=fw;kr.canCleanProperties=hw;kr.canRepairFolder=dw;kr.canRenameToUid=pw;kr.canCopyLabelToAliases=mw;kr.canCreateNarrowerConcept=gw;kr.canCreateSubclass=yw;kr.canCreateTaskForDailyNote=_w;var lr=ui(),hi=Lt();function lw(r){return(0,lr.isAreaOrProject)(r.instanceClass)}o(lw,"canCreateEvent");function fw(r){return(0,lr.hasClass)(r.instanceClass,hi.AssetClass.TASK_PROTOTYPE)||(0,lr.hasClass)(r.instanceClass,hi.AssetClass.MEETING_PROTOTYPE)||(0,lr.hasClass)(r.instanceClass,hi.AssetClass.EVENT_PROTOTYPE)||(0,lr.hasClass)(r.instanceClass,hi.AssetClass.PROJECT_PROTOTYPE)?!0:(0,lr.isPrototypeClass)(r.instanceClass,r.metadata)}o(fw,"canCreateInstance");function hw(r){return(0,lr.hasEmptyProperties)(r.metadata)}o(hw,"canCleanProperties");function dw(r){return(0,lr.needsFolderRepair)(r.currentFolder,r.expectedFolder)}o(dw,"canRepairFolder");function pw(r,e){let t=r.metadata.exo__Asset_uid;return!t||(0,lr.hasClass)(r.instanceClass,hi.AssetClass.CONCEPT)?!1:e!==t}o(pw,"canRenameToUid");function mw(r){let e=r.metadata.exo__Asset_label;if(!e||typeof e!="string"||e.trim()==="")return!1;let t=e.trim(),n=r.metadata.aliases;return!n||!Array.isArray(n)||n.length===0?!0:!n.some(i=>typeof i!="string"?!1:i.trim()===t)}o(mw,"canCopyLabelToAliases");function gw(r){return(0,lr.hasClass)(r.instanceClass,hi.AssetClass.CONCEPT)}o(gw,"canCreateNarrowerConcept");function yw(r){return(0,lr.hasClass)(r.instanceClass,hi.AssetClass.CLASS)}o(yw,"canCreateSubclass");function _w(r){if(!(0,lr.hasClass)(r.instanceClass,hi.AssetClass.DAILY_NOTE)||r.isArchived)return!1;let e=(0,lr.extractDailyNoteDate)(r.metadata);return e?(0,lr.isCurrentDateGteDay)(e):!1}o(_w,"canCreateTaskForDailyNote")});var L0=_(k=>{"use strict";Object.defineProperty(k,"__esModule",{value:!0});k.canCreateTaskForDailyNote=k.canCreateSubclass=k.canCreateNarrowerConcept=k.canCopyLabelToAliases=k.canRenameToUid=k.canRepairFolder=k.canCleanProperties=k.canCreateInstance=k.canCreateEvent=k.canArchiveTask=k.canRollbackStatus=k.canVoteOnEffort=k.canTrashEffort=k.canMarkDone=k.canStartEffort=k.canMoveToBacklog=k.canSetDraftStatus=k.canShiftDayForward=k.canShiftDayBackward=k.canPlanForEvening=k.canPlanOnToday=k.canSetActiveFocus=k.canCreateChildArea=k.canConvertProjectToTask=k.canMoveToToDo=k.canMoveToAnalysis=k.canCreateProject=k.canConvertTaskToProject=k.canCreateRelatedTask=k.canCreateTask=k.isPrototypeClass=k.inheritsFromPrototype=k.isCurrentDateGteDay=k.extractDailyNoteDate=k.hasPlannedStartTimestamp=k.isPlannedForToday=k.getTodayDateString=k.needsFolderRepair=k.hasEmptyProperties=k.isAssetArchived=k.hasStatus=k.isEffort=k.isAreaOrProject=k.hasClass=void 0;var fr=ui();Object.defineProperty(k,"hasClass",{enumerable:!0,get:o(function(){return fr.hasClass},"get")});Object.defineProperty(k,"isAreaOrProject",{enumerable:!0,get:o(function(){return fr.isAreaOrProject},"get")});Object.defineProperty(k,"isEffort",{enumerable:!0,get:o(function(){return fr.isEffort},"get")});Object.defineProperty(k,"hasStatus",{enumerable:!0,get:o(function(){return fr.hasStatus},"get")});Object.defineProperty(k,"isAssetArchived",{enumerable:!0,get:o(function(){return fr.isAssetArchived},"get")});Object.defineProperty(k,"hasEmptyProperties",{enumerable:!0,get:o(function(){return fr.hasEmptyProperties},"get")});Object.defineProperty(k,"needsFolderRepair",{enumerable:!0,get:o(function(){return fr.needsFolderRepair},"get")});Object.defineProperty(k,"getTodayDateString",{enumerable:!0,get:o(function(){return fr.getTodayDateString},"get")});Object.defineProperty(k,"isPlannedForToday",{enumerable:!0,get:o(function(){return fr.isPlannedForToday},"get")});Object.defineProperty(k,"hasPlannedStartTimestamp",{enumerable:!0,get:o(function(){return fr.hasPlannedStartTimestamp},"get")});Object.defineProperty(k,"extractDailyNoteDate",{enumerable:!0,get:o(function(){return fr.extractDailyNoteDate},"get")});Object.defineProperty(k,"isCurrentDateGteDay",{enumerable:!0,get:o(function(){return fr.isCurrentDateGteDay},"get")});Object.defineProperty(k,"inheritsFromPrototype",{enumerable:!0,get:o(function(){return fr.inheritsFromPrototype},"get")});Object.defineProperty(k,"isPrototypeClass",{enumerable:!0,get:o(function(){return fr.isPrototypeClass},"get")});var Uf=F0();Object.defineProperty(k,"canCreateTask",{enumerable:!0,get:o(function(){return Uf.canCreateTask},"get")});Object.defineProperty(k,"canCreateRelatedTask",{enumerable:!0,get:o(function(){return Uf.canCreateRelatedTask},"get")});Object.defineProperty(k,"canConvertTaskToProject",{enumerable:!0,get:o(function(){return Uf.canConvertTaskToProject},"get")});var xc=P0();Object.defineProperty(k,"canCreateProject",{enumerable:!0,get:o(function(){return xc.canCreateProject},"get")});Object.defineProperty(k,"canMoveToAnalysis",{enumerable:!0,get:o(function(){return xc.canMoveToAnalysis},"get")});Object.defineProperty(k,"canMoveToToDo",{enumerable:!0,get:o(function(){return xc.canMoveToToDo},"get")});Object.defineProperty(k,"canConvertProjectToTask",{enumerable:!0,get:o(function(){return xc.canConvertProjectToTask},"get")});var M0=R0();Object.defineProperty(k,"canCreateChildArea",{enumerable:!0,get:o(function(){return M0.canCreateChildArea},"get")});Object.defineProperty(k,"canSetActiveFocus",{enumerable:!0,get:o(function(){return M0.canSetActiveFocus},"get")});var Pr=k0();Object.defineProperty(k,"canPlanOnToday",{enumerable:!0,get:o(function(){return Pr.canPlanOnToday},"get")});Object.defineProperty(k,"canPlanForEvening",{enumerable:!0,get:o(function(){return Pr.canPlanForEvening},"get")});Object.defineProperty(k,"canShiftDayBackward",{enumerable:!0,get:o(function(){return Pr.canShiftDayBackward},"get")});Object.defineProperty(k,"canShiftDayForward",{enumerable:!0,get:o(function(){return Pr.canShiftDayForward},"get")});Object.defineProperty(k,"canSetDraftStatus",{enumerable:!0,get:o(function(){return Pr.canSetDraftStatus},"get")});Object.defineProperty(k,"canMoveToBacklog",{enumerable:!0,get:o(function(){return Pr.canMoveToBacklog},"get")});Object.defineProperty(k,"canStartEffort",{enumerable:!0,get:o(function(){return Pr.canStartEffort},"get")});Object.defineProperty(k,"canMarkDone",{enumerable:!0,get:o(function(){return Pr.canMarkDone},"get")});Object.defineProperty(k,"canTrashEffort",{enumerable:!0,get:o(function(){return Pr.canTrashEffort},"get")});Object.defineProperty(k,"canVoteOnEffort",{enumerable:!0,get:o(function(){return Pr.canVoteOnEffort},"get")});Object.defineProperty(k,"canRollbackStatus",{enumerable:!0,get:o(function(){return Pr.canRollbackStatus},"get")});Object.defineProperty(k,"canArchiveTask",{enumerable:!0,get:o(function(){return Pr.canArchiveTask},"get")});var Wn=j0();Object.defineProperty(k,"canCreateEvent",{enumerable:!0,get:o(function(){return Wn.canCreateEvent},"get")});Object.defineProperty(k,"canCreateInstance",{enumerable:!0,get:o(function(){return Wn.canCreateInstance},"get")});Object.defineProperty(k,"canCleanProperties",{enumerable:!0,get:o(function(){return Wn.canCleanProperties},"get")});Object.defineProperty(k,"canRepairFolder",{enumerable:!0,get:o(function(){return Wn.canRepairFolder},"get")});Object.defineProperty(k,"canRenameToUid",{enumerable:!0,get:o(function(){return Wn.canRenameToUid},"get")});Object.defineProperty(k,"canCopyLabelToAliases",{enumerable:!0,get:o(function(){return Wn.canCopyLabelToAliases},"get")});Object.defineProperty(k,"canCreateNarrowerConcept",{enumerable:!0,get:o(function(){return Wn.canCreateNarrowerConcept},"get")});Object.defineProperty(k,"canCreateSubclass",{enumerable:!0,get:o(function(){return Wn.canCreateSubclass},"get")});Object.defineProperty(k,"canCreateTaskForDailyNote",{enumerable:!0,get:o(function(){return Wn.canCreateTaskForDailyNote},"get")})});var V0=_(Gi=>{"use strict";var vw=Gi&&Gi.__createBinding||(Object.create?(function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,n,i)}):(function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]})),bw=Gi&&Gi.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&vw(e,r,t)};Object.defineProperty(Gi,"__esModule",{value:!0});bw(L0(),Gi)});var U0=_(Na=>{"use strict";Object.defineProperty(Na,"__esModule",{value:!0});Na.PropertyFieldType=void 0;Na.rangeToFieldType=Ew;var Ct;(function(r){r.Text="text",r.Number="number",r.Date="date",r.DateTime="datetime",r.Boolean="boolean",r.Reference="reference",r.Enum="enum",r.StatusSelect="status-select",r.SizeSelect="size-select",r.Wikilink="wikilink",r.Timestamp="timestamp",r.Unknown="unknown"})(Ct||(Na.PropertyFieldType=Ct={}));var q0="http://www.w3.org/2001/XMLSchema#",Sw="https://exocortex.my/ontology/exo#",ww="https://exocortex.my/ontology/ems#";function Ew(r){if(!r)return Ct.Unknown;let e=r.trim();if(!e)return Ct.Unknown;if(e.startsWith(q0)){let t=e.substring(q0.length);return Bf(t)}if(e.startsWith("xsd:")){let t=e.substring(4);return Bf(t)}if(e.includes("XMLSchema#")){let t=e.indexOf("XMLSchema#"),n=e.substring(t+10);return Bf(n)}return e.startsWith(ww)||e.startsWith("ems:")?Tw(e):e.startsWith(Sw)||e.startsWith("exo:")||xw(e)?Ct.Reference:Ct.Text}o(Ew,"rangeToFieldType");function Bf(r){switch(r.toLowerCase()){case"string":case"normalizedstring":case"token":case"language":case"nmtoken":case"name":case"ncname":case"anyuri":return Ct.Text;case"integer":case"int":case"long":case"short":case"byte":case"nonnegativeinteger":case"positiveinteger":case"nonpositiveinteger":case"negativeinteger":case"unsignedlong":case"unsignedint":case"unsignedshort":case"unsignedbyte":case"decimal":case"float":case"double":return Ct.Number;case"date":return Ct.Date;case"datetime":case"datetimestamp":return Ct.DateTime;case"boolean":return Ct.Boolean;case"time":return Ct.Timestamp;default:return Ct.Text}}o(Bf,"xsdTypeToFieldType");function Tw(r){let e=r.toLowerCase();return e.includes("effortstatus")?Ct.StatusSelect:e.includes("tasksize")?Ct.SizeSelect:Ct.Reference}o(Tw,"emsTypeToFieldType");function xw(r){let e=r.toLowerCase();return e.includes("exocortex.my/ontology")?!0:["asset","task","project","area","effort","class","property","concept"].some(n=>e.includes(n))}o(xw,"isClassReference")});var $0=_(ka=>{"use strict";Object.defineProperty(ka,"__esModule",{value:!0});ka.propertyNameToUri=Aw;ka.uriToPropertyName=B0;ka.extractPropertyLabel=Ow;function Aw(r){return r.replace(/^([a-z]+)__/,"$1:")}o(Aw,"propertyNameToUri");function B0(r){if(r.startsWith("http://")||r.startsWith("https://")){let e=r.match(/\/([a-z]+)#([A-Za-z0-9_]+)$/);if(e)return`${e[1]}__${e[2]}`;let t=r.lastIndexOf("#"),n=r.lastIndexOf("/"),i=Math.max(t,n);return i>=0?r.substring(i+1):r}return r.replace(/^([a-z]+):/,"$1__")}o(B0,"uriToPropertyName");function Ow(r){let n=(r.includes(":")?B0(r):r).replace(/^[a-z]+__/,"").split("_");return(n.length>1?n.slice(1).join(" "):n[0]).replace(/([a-z])([A-Z])/g,"$1 $2").replace(/^./,s=>s.toUpperCase())}o(Ow,"extractPropertyLabel")});var Ac={};oS(Ac,{__assign:()=>Wf,__asyncDelegator:()=>qw,__asyncGenerator:()=>Vw,__asyncValues:()=>Uw,__await:()=>ja,__awaiter:()=>Rw,__classPrivateFieldGet:()=>Gw,__classPrivateFieldSet:()=>Hw,__createBinding:()=>kw,__decorate:()=>Pw,__exportStar:()=>jw,__extends:()=>Cw,__generator:()=>Nw,__importDefault:()=>Ww,__importStar:()=>$w,__makeTemplateObject:()=>Bw,__metadata:()=>Dw,__param:()=>Iw,__read:()=>W0,__rest:()=>Fw,__spread:()=>Mw,__spreadArrays:()=>Lw,__values:()=>Gf});function Cw(r,e){$f(r,e);function t(){this.constructor=r}o(t,"__"),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function Fw(r,e){var t={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&e.indexOf(n)<0&&(t[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(t[n[i]]=r[n[i]]);return t}function Pw(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s}function Iw(r,e){return function(t,n){e(t,n,r)}}function Dw(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function Rw(r,e,t,n){function i(s){return s instanceof t?s:new t(function(a){a(s)})}return o(i,"adopt"),new(t||(t=Promise))(function(s,a){function c(l){try{f(n.next(l))}catch(h){a(h)}}o(c,"fulfilled");function u(l){try{f(n.throw(l))}catch(h){a(h)}}o(u,"rejected");function f(l){l.done?s(l.value):i(l.value).then(c,u)}o(f,"step"),f((n=n.apply(r,e||[])).next())})}function Nw(r,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},n,i,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(f){return function(l){return u([f,l])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(s=f[0]&2?i.return:f[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,f[1])).done)return s;switch(i=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,i=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(r,t)}catch(l){f=[6,l],i=0}finally{n=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function kw(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]}function jw(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function Gf(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],n=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:o(function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function W0(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),i,s=[],a;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(c){a={error:c}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return s}function Mw(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(W0(arguments[e]));return r}function Lw(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),i=0,e=0;e<t;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,i++)n[i]=s[a];return n}function ja(r){return this instanceof ja?(this.v=r,this):new ja(r)}function Vw(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(r,e||[]),i,s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(p){n[p]&&(i[p]=function(m){return new Promise(function(b,y){s.push([p,m,b,y])>1||c(p,m)})})}function c(p,m){try{u(n[p](m))}catch(b){h(s[0][3],b)}}function u(p){p.value instanceof ja?Promise.resolve(p.value.v).then(f,l):h(s[0][2],p)}function f(p){c("next",p)}function l(p){c("throw",p)}function h(p,m){p(m),s.shift(),s.length&&c(s[0][0],s[0][1])}}function qw(r){var e,t;return e={},n("next"),n("throw",function(i){throw i}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(i,s){e[i]=r[i]?function(a){return(t=!t)?{value:ja(r[i](a)),done:i==="return"}:s?s(a):a}:s}}function Uw(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof Gf=="function"?Gf(r):r[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(s){t[s]=r[s]&&function(a){return new Promise(function(c,u){a=r[s](a),i(c,u,a.done,a.value)})}}function i(s,a,c,u){Promise.resolve(u).then(function(f){s({value:f,done:c})},a)}}function Bw(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function $w(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function Ww(r){return r&&r.__esModule?r:{default:r}}function Gw(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function Hw(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}var $f,Wf,Oc=aS(()=>{$f=o(function(r,e){return $f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)n.hasOwnProperty(i)&&(t[i]=n[i])},$f(r,e)},"extendStatics");o(Cw,"__extends");Wf=o(function(){return Wf=Object.assign||o(function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},"__assign"),Wf.apply(this,arguments)},"__assign");o(Fw,"__rest");o(Pw,"__decorate");o(Iw,"__param");o(Dw,"__metadata");o(Rw,"__awaiter");o(Nw,"__generator");o(kw,"__createBinding");o(jw,"__exportStar");o(Gf,"__values");o(W0,"__read");o(Mw,"__spread");o(Lw,"__spreadArrays");o(ja,"__await");o(Vw,"__asyncGenerator");o(qw,"__asyncDelegator");o(Uw,"__asyncValues");o(Bw,"__makeTemplateObject");o($w,"__importStar");o(Ww,"__importDefault");o(Gw,"__classPrivateFieldGet");o(Hw,"__classPrivateFieldSet")});var Kf=_(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});var Hf;(function(r){r[r.Transient=0]="Transient",r[r.Singleton=1]="Singleton",r[r.ResolutionScoped=2]="ResolutionScoped",r[r.ContainerScoped=3]="ContainerScoped"})(Hf||(Hf={}));zf.default=Hf});var G0=_(Yf=>{"use strict";Object.defineProperty(Yf,"__esModule",{value:!0});var zw=Kf();Object.defineProperty(Yf,"Lifecycle",{enumerable:!0,get:o(function(){return zw.default},"get")})});var Hi=_(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.defineInjectionTokenMetadata=jr.getParamInfo=jr.INJECTION_TOKEN_METADATA_KEY=void 0;jr.INJECTION_TOKEN_METADATA_KEY="injectionTokens";function Kw(r){let e=Reflect.getMetadata("design:paramtypes",r)||[],t=Reflect.getOwnMetadata(jr.INJECTION_TOKEN_METADATA_KEY,r)||{};return Object.keys(t).forEach(n=>{e[+n]=t[n]}),e}o(Kw,"getParamInfo");jr.getParamInfo=Kw;function Yw(r,e){return function(t,n,i){let s=Reflect.getOwnMetadata(jr.INJECTION_TOKEN_METADATA_KEY,t)||{};s[i]=e?{token:r,transform:e.transformToken,transformArgs:e.args||[]}:r,Reflect.defineMetadata(jr.INJECTION_TOKEN_METADATA_KEY,s,t)}}o(Yw,"defineInjectionTokenMetadata");jr.defineInjectionTokenMetadata=Yw});var Qf=_(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.isClassProvider=void 0;function Qw(r){return!!r.useClass}o(Qw,"isClassProvider");Cc.isClassProvider=Qw});var Jf=_(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.isFactoryProvider=void 0;function Jw(r){return!!r.useFactory}o(Jw,"isFactoryProvider");Fc.isFactoryProvider=Jw});var Ic=_(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.delay=Ps.DelayedConstructor=void 0;var Pc=class{static{o(this,"DelayedConstructor")}constructor(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}createProxy(e){let t={},n=!1,i,s=o(()=>(n||(i=e(this.wrap()),n=!0),i),"delayedObject");return new Proxy(t,this.createHandler(s))}createHandler(e){let t={},n=o(i=>{t[i]=(...s)=>{s[0]=e();let a=Reflect[i];return a(...s)}},"install");return this.reflectMethods.forEach(n),t}};Ps.DelayedConstructor=Pc;function Xw(r){if(typeof r>"u")throw new Error("Attempt to `delay` undefined. Constructor must be wrapped in a callback");return new Pc(r)}o(Xw,"delay");Ps.delay=Xw});var Dc=_(Sn=>{"use strict";Object.defineProperty(Sn,"__esModule",{value:!0});Sn.isConstructorToken=Sn.isTransformDescriptor=Sn.isTokenDescriptor=Sn.isNormalToken=void 0;var Zw=Ic();function eE(r){return typeof r=="string"||typeof r=="symbol"}o(eE,"isNormalToken");Sn.isNormalToken=eE;function tE(r){return typeof r=="object"&&"token"in r&&"multiple"in r}o(tE,"isTokenDescriptor");Sn.isTokenDescriptor=tE;function rE(r){return typeof r=="object"&&"token"in r&&"transform"in r}o(rE,"isTransformDescriptor");Sn.isTransformDescriptor=rE;function nE(r){return typeof r=="function"||r instanceof Zw.DelayedConstructor}o(nE,"isConstructorToken");Sn.isConstructorToken=nE});var Xf=_(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.isTokenProvider=void 0;function iE(r){return!!r.useToken}o(iE,"isTokenProvider");Rc.isTokenProvider=iE});var Zf=_(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.isValueProvider=void 0;function sE(r){return r.useValue!=null}o(sE,"isValueProvider");Nc.isValueProvider=sE});var eh=_(zi=>{"use strict";Object.defineProperty(zi,"__esModule",{value:!0});var aE=Qf();Object.defineProperty(zi,"isClassProvider",{enumerable:!0,get:o(function(){return aE.isClassProvider},"get")});var oE=Jf();Object.defineProperty(zi,"isFactoryProvider",{enumerable:!0,get:o(function(){return oE.isFactoryProvider},"get")});var cE=Dc();Object.defineProperty(zi,"isNormalToken",{enumerable:!0,get:o(function(){return cE.isNormalToken},"get")});var uE=Xf();Object.defineProperty(zi,"isTokenProvider",{enumerable:!0,get:o(function(){return uE.isTokenProvider},"get")});var lE=Zf();Object.defineProperty(zi,"isValueProvider",{enumerable:!0,get:o(function(){return lE.isValueProvider},"get")})});var H0=_(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.isProvider=void 0;var fE=Qf(),hE=Zf(),dE=Xf(),pE=Jf();function mE(r){return fE.isClassProvider(r)||hE.isValueProvider(r)||dE.isTokenProvider(r)||pE.isFactoryProvider(r)}o(mE,"isProvider");kc.isProvider=mE});var nh=_(rh=>{"use strict";Object.defineProperty(rh,"__esModule",{value:!0});var th=class{static{o(this,"RegistryBase")}constructor(){this._registryMap=new Map}entries(){return this._registryMap.entries()}getAll(e){return this.ensure(e),this._registryMap.get(e)}get(e){this.ensure(e);let t=this._registryMap.get(e);return t[t.length-1]||null}set(e,t){this.ensure(e),this._registryMap.get(e).push(t)}setAll(e,t){this._registryMap.set(e,t)}has(e){return this.ensure(e),this._registryMap.get(e).length>0}clear(){this._registryMap.clear()}ensure(e){this._registryMap.has(e)||this._registryMap.set(e,[])}};rh.default=th});var z0=_(sh=>{"use strict";Object.defineProperty(sh,"__esModule",{value:!0});var gE=nh(),ih=class extends gE.default{static{o(this,"Registry")}};sh.default=ih});var K0=_(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});var ah=class{static{o(this,"ResolutionContext")}constructor(){this.scopedResolutions=new Map}};oh.default=ah});var ch=_(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.formatErrorCtor=void 0;function yE(r,e){return r===null?`at position #${e}`:`"${r.split(",")[e].trim()}" at position #${e}`}o(yE,"formatDependency");function _E(r,e,t="    "){return[r,...e.message.split(`
`).map(n=>t+n)].join(`
`)}o(_E,"composeErrorMessage");function vE(r,e,t){let[,n=null]=r.toString().match(/constructor\(([\w, ]+)\)/)||[],i=yE(n,e);return _E(`Cannot inject the dependency ${i} of "${r.name}" constructor. Reason:`,t)}o(vE,"formatErrorCtor");jc.formatErrorCtor=vE});var Y0=_(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.isDisposable=void 0;function bE(r){return!(typeof r.dispose!="function"||r.dispose.length>0)}o(bE,"isDisposable");Mc.isDisposable=bE});var J0=_(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});Ki.PostResolutionInterceptors=Ki.PreResolutionInterceptors=void 0;var Q0=nh(),Lc=class extends Q0.default{static{o(this,"PreResolutionInterceptors")}};Ki.PreResolutionInterceptors=Lc;var Vc=class extends Q0.default{static{o(this,"PostResolutionInterceptors")}};Ki.PostResolutionInterceptors=Vc;var uh=class{static{o(this,"Interceptors")}constructor(){this.preResolution=new Lc,this.postResolution=new Vc}};Ki.default=uh});var di=_(Gn=>{"use strict";Object.defineProperty(Gn,"__esModule",{value:!0});Gn.instance=Gn.typeInfo=void 0;var SE=(Oc(),df(Ac)),Xt=eh(),wE=H0(),qc=Dc(),EE=z0(),hr=Kf(),Uc=K0(),TE=ch(),xE=Ic(),AE=Y0(),OE=J0();Gn.typeInfo=new Map;var lh=class r{static{o(this,"InternalDependencyContainer")}constructor(e){this.parent=e,this._registry=new EE.default,this.interceptors=new OE.default,this.disposed=!1,this.disposables=new Set}register(e,t,n={lifecycle:hr.default.Transient}){this.ensureNotDisposed();let i;if(wE.isProvider(t)?i=t:i={useClass:t},Xt.isTokenProvider(i)){let s=[e],a=i;for(;a!=null;){let c=a.useToken;if(s.includes(c))throw new Error(`Token registration cycle detected! ${[...s,c].join(" -> ")}`);s.push(c);let u=this._registry.get(c);u&&Xt.isTokenProvider(u.provider)?a=u.provider:a=null}}if((n.lifecycle===hr.default.Singleton||n.lifecycle==hr.default.ContainerScoped||n.lifecycle==hr.default.ResolutionScoped)&&(Xt.isValueProvider(i)||Xt.isFactoryProvider(i)))throw new Error(`Cannot use lifecycle "${hr.default[n.lifecycle]}" with ValueProviders or FactoryProviders`);return this._registry.set(e,{provider:i,options:n}),this}registerType(e,t){return this.ensureNotDisposed(),Xt.isNormalToken(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})}registerInstance(e,t){return this.ensureNotDisposed(),this.register(e,{useValue:t})}registerSingleton(e,t){if(this.ensureNotDisposed(),Xt.isNormalToken(e)){if(Xt.isNormalToken(t))return this.register(e,{useToken:t},{lifecycle:hr.default.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:hr.default.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}let n=e;return t&&!Xt.isNormalToken(t)&&(n=t),this.register(e,{useClass:n},{lifecycle:hr.default.Singleton})}resolve(e,t=new Uc.default,n=!1){this.ensureNotDisposed();let i=this.getRegistration(e);if(!i&&Xt.isNormalToken(e)){if(n)return;throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}if(this.executePreResolutionInterceptor(e,"Single"),i){let s=this.resolveRegistration(i,t);return this.executePostResolutionInterceptor(e,s,"Single"),s}if(qc.isConstructorToken(e)){let s=this.construct(e,t);return this.executePostResolutionInterceptor(e,s,"Single"),s}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")}executePreResolutionInterceptor(e,t){if(this.interceptors.preResolution.has(e)){let n=[];for(let i of this.interceptors.preResolution.getAll(e))i.options.frequency!="Once"&&n.push(i),i.callback(e,t);this.interceptors.preResolution.setAll(e,n)}}executePostResolutionInterceptor(e,t,n){if(this.interceptors.postResolution.has(e)){let i=[];for(let s of this.interceptors.postResolution.getAll(e))s.options.frequency!="Once"&&i.push(s),s.callback(e,t,n);this.interceptors.postResolution.setAll(e,i)}}resolveRegistration(e,t){if(this.ensureNotDisposed(),e.options.lifecycle===hr.default.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);let n=e.options.lifecycle===hr.default.Singleton,i=e.options.lifecycle===hr.default.ContainerScoped,s=n||i,a;return Xt.isValueProvider(e.provider)?a=e.provider.useValue:Xt.isTokenProvider(e.provider)?a=s?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):Xt.isClassProvider(e.provider)?a=s?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):Xt.isFactoryProvider(e.provider)?a=e.provider.useFactory(this):a=this.construct(e.provider,t),e.options.lifecycle===hr.default.ResolutionScoped&&t.scopedResolutions.set(e,a),a}resolveAll(e,t=new Uc.default,n=!1){this.ensureNotDisposed();let i=this.getAllRegistrations(e);if(!i&&Xt.isNormalToken(e)){if(n)return[];throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}if(this.executePreResolutionInterceptor(e,"All"),i){let a=i.map(c=>this.resolveRegistration(c,t));return this.executePostResolutionInterceptor(e,a,"All"),a}let s=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,s,"All"),s}isRegistered(e,t=!1){return this.ensureNotDisposed(),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)}reset(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()}clearInstances(){this.ensureNotDisposed();for(let[e,t]of this._registry.entries())this._registry.setAll(e,t.filter(n=>!Xt.isValueProvider(n.provider)).map(n=>(n.instance=void 0,n)))}createChildContainer(){this.ensureNotDisposed();let e=new r(this);for(let[t,n]of this._registry.entries())n.some(({options:i})=>i.lifecycle===hr.default.ContainerScoped)&&e._registry.setAll(t,n.map(i=>i.options.lifecycle===hr.default.ContainerScoped?{provider:i.provider,options:i.options}:i));return e}beforeResolution(e,t,n={frequency:"Always"}){this.interceptors.preResolution.set(e,{callback:t,options:n})}afterResolution(e,t,n={frequency:"Always"}){this.interceptors.postResolution.set(e,{callback:t,options:n})}dispose(){return SE.__awaiter(this,void 0,void 0,function*(){this.disposed=!0;let e=[];this.disposables.forEach(t=>{let n=t.dispose();n&&e.push(n)}),yield Promise.all(e)})}getRegistration(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null}getAllRegistrations(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null}construct(e,t){if(e instanceof xE.DelayedConstructor)return e.createProxy(i=>this.resolve(i,t));let n=(()=>{let i=Gn.typeInfo.get(e);if(!i||i.length===0){if(e.length===0)return new e;throw new Error(`TypeInfo not known for "${e.name}"`)}let s=i.map(this.resolveParams(t,e));return new e(...s)})();return AE.isDisposable(n)&&this.disposables.add(n),n}resolveParams(e,t){return(n,i)=>{try{return qc.isTokenDescriptor(n)?qc.isTransformDescriptor(n)?n.multiple?this.resolve(n.transform).transform(this.resolveAll(n.token,new Uc.default,n.isOptional),...n.transformArgs):this.resolve(n.transform).transform(this.resolve(n.token,e,n.isOptional),...n.transformArgs):n.multiple?this.resolveAll(n.token,new Uc.default,n.isOptional):this.resolve(n.token,e,n.isOptional):qc.isTransformDescriptor(n)?this.resolve(n.transform,e).transform(this.resolve(n.token,e),...n.transformArgs):this.resolve(n,e)}catch(s){throw new Error(TE.formatErrorCtor(t,i,s))}}}ensureNotDisposed(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")}};Gn.instance=new lh;Gn.default=Gn.instance});var X0=_(hh=>{"use strict";Object.defineProperty(hh,"__esModule",{value:!0});var CE=Hi(),Hn=di(),fh=Dc(),FE=ch();function PE(){return function(r){let e=CE.getParamInfo(r);return class extends r{constructor(...t){super(...t.concat(e.slice(t.length).map((n,i)=>{try{return fh.isTokenDescriptor(n)?fh.isTransformDescriptor(n)?n.multiple?Hn.instance.resolve(n.transform).transform(Hn.instance.resolveAll(n.token),...n.transformArgs):Hn.instance.resolve(n.transform).transform(Hn.instance.resolve(n.token),...n.transformArgs):n.multiple?Hn.instance.resolveAll(n.token):Hn.instance.resolve(n.token):fh.isTransformDescriptor(n)?Hn.instance.resolve(n.transform).transform(Hn.instance.resolve(n.token),...n.transformArgs):Hn.instance.resolve(n)}catch(s){let a=i+t.length;throw new Error(FE.formatErrorCtor(r,a,s))}})))}}}}o(PE,"autoInjectable");hh.default=PE});var Z0=_(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});var IE=Hi();function DE(r,e){let t={token:r,multiple:!1,isOptional:e&&e.isOptional};return IE.defineInjectionTokenMetadata(t)}o(DE,"inject");dh.default=DE});var Bc=_(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});var RE=Hi(),NE=di(),e2=di();function kE(r){return function(e){NE.typeInfo.set(e,RE.getParamInfo(e)),r&&r.token&&(Array.isArray(r.token)?r.token.forEach(t=>{e2.instance.register(t,e)}):e2.instance.register(r.token,e))}}o(kE,"injectable");ph.default=kE});var t2=_(mh=>{"use strict";Object.defineProperty(mh,"__esModule",{value:!0});var jE=(Oc(),df(Ac)),ME=di();function LE(r=[]){return function(e){return r.forEach(t=>{var{token:n,options:i}=t,s=jE.__rest(t,["token","options"]);return ME.instance.register(n,s,i)}),e}}o(LE,"registry");mh.default=LE});var r2=_(gh=>{"use strict";Object.defineProperty(gh,"__esModule",{value:!0});var VE=Bc(),qE=di();function UE(){return function(r){VE.default()(r),qE.instance.registerSingleton(r)}}o(UE,"singleton");gh.default=UE});var n2=_(yh=>{"use strict";Object.defineProperty(yh,"__esModule",{value:!0});var BE=Hi();function $E(r,e){let t={token:r,multiple:!0,isOptional:e&&e.isOptional};return BE.defineInjectionTokenMetadata(t)}o($E,"injectAll");yh.default=$E});var i2=_(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});var WE=Hi();function GE(r,e,...t){let n={token:r,multiple:!0,transform:e,transformArgs:t};return WE.defineInjectionTokenMetadata(n)}o(GE,"injectAllWithTransform");_h.default=GE});var s2=_(vh=>{"use strict";Object.defineProperty(vh,"__esModule",{value:!0});var HE=Hi();function zE(r,e,...t){return HE.defineInjectionTokenMetadata(r,{transformToken:e,args:t})}o(zE,"injectWithTransform");vh.default=zE});var a2=_(bh=>{"use strict";Object.defineProperty(bh,"__esModule",{value:!0});var KE=Bc(),YE=di();function QE(r,e){return function(t){KE.default()(t),YE.instance.register(e||t,t,{lifecycle:r})}}o(QE,"scoped");bh.default=QE});var o2=_(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});var JE=X0();Object.defineProperty(Mr,"autoInjectable",{enumerable:!0,get:o(function(){return JE.default},"get")});var XE=Z0();Object.defineProperty(Mr,"inject",{enumerable:!0,get:o(function(){return XE.default},"get")});var ZE=Bc();Object.defineProperty(Mr,"injectable",{enumerable:!0,get:o(function(){return ZE.default},"get")});var e4=t2();Object.defineProperty(Mr,"registry",{enumerable:!0,get:o(function(){return e4.default},"get")});var t4=r2();Object.defineProperty(Mr,"singleton",{enumerable:!0,get:o(function(){return t4.default},"get")});var r4=n2();Object.defineProperty(Mr,"injectAll",{enumerable:!0,get:o(function(){return r4.default},"get")});var n4=i2();Object.defineProperty(Mr,"injectAllWithTransform",{enumerable:!0,get:o(function(){return n4.default},"get")});var i4=s2();Object.defineProperty(Mr,"injectWithTransform",{enumerable:!0,get:o(function(){return i4.default},"get")});var s4=a2();Object.defineProperty(Mr,"scoped",{enumerable:!0,get:o(function(){return s4.default},"get")})});var c2=_(Sh=>{"use strict";Object.defineProperty(Sh,"__esModule",{value:!0});function a4(r){let e;return t=>(e==null&&(e=r(t)),e)}o(a4,"instanceCachingFactory");Sh.default=a4});var u2=_(wh=>{"use strict";Object.defineProperty(wh,"__esModule",{value:!0});function o4(r){let e=new WeakMap;return t=>{let n=e.get(t);return n==null&&(n=r(t),e.set(t,n)),n}}o(o4,"instancePerContainerCachingFactory");wh.default=o4});var l2=_(Eh=>{"use strict";Object.defineProperty(Eh,"__esModule",{value:!0});function c4(r,e,t,n=!0){let i,s;return a=>{let c=r(a);return(!n||s!==c)&&((s=c)?i=a.resolve(e):i=a.resolve(t)),i}}o(c4,"predicateAwareClassFactory");Eh.default=c4});var f2=_(Ma=>{"use strict";Object.defineProperty(Ma,"__esModule",{value:!0});var u4=c2();Object.defineProperty(Ma,"instanceCachingFactory",{enumerable:!0,get:o(function(){return u4.default},"get")});var l4=u2();Object.defineProperty(Ma,"instancePerContainerCachingFactory",{enumerable:!0,get:o(function(){return l4.default},"get")});var f4=l2();Object.defineProperty(Ma,"predicateAwareClassFactory",{enumerable:!0,get:o(function(){return f4.default},"get")})});var Ze=_(pi=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});var Th=(Oc(),df(Ac));if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var h4=G0();Object.defineProperty(pi,"Lifecycle",{enumerable:!0,get:o(function(){return h4.Lifecycle},"get")});Th.__exportStar(o2(),pi);Th.__exportStar(f2(),pi);Th.__exportStar(eh(),pi);var d4=Ic();Object.defineProperty(pi,"delay",{enumerable:!0,get:o(function(){return d4.delay},"get")});var p4=di();Object.defineProperty(pi,"container",{enumerable:!0,get:o(function(){return p4.instance},"get")})});var h2=_(xh=>{"use strict";Object.defineProperty(xh,"__esModule",{value:!0});xh.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var d2=_(Ah=>{"use strict";Object.defineProperty(Ah,"__esModule",{value:!0});Ah.default="00000000-0000-0000-0000-000000000000"});var p2=_(Oh=>{"use strict";Object.defineProperty(Oh,"__esModule",{value:!0});Oh.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var La=_(Ch=>{"use strict";Object.defineProperty(Ch,"__esModule",{value:!0});var m4=p2();function g4(r){return typeof r=="string"&&m4.default.test(r)}o(g4,"validate");Ch.default=g4});var Va=_(Fh=>{"use strict";Object.defineProperty(Fh,"__esModule",{value:!0});var y4=La();function _4(r){if(!(0,y4.default)(r))throw TypeError("Invalid UUID");let e;return Uint8Array.of((e=parseInt(r.slice(0,8),16))>>>24,e>>>16&255,e>>>8&255,e&255,(e=parseInt(r.slice(9,13),16))>>>8,e&255,(e=parseInt(r.slice(14,18),16))>>>8,e&255,(e=parseInt(r.slice(19,23),16))>>>8,e&255,(e=parseInt(r.slice(24,36),16))/1099511627776&255,e/4294967296&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255)}o(_4,"parse");Fh.default=_4});var zn=_(qa=>{"use strict";Object.defineProperty(qa,"__esModule",{value:!0});qa.unsafeStringify=void 0;var v4=La(),Ft=[];for(let r=0;r<256;++r)Ft.push((r+256).toString(16).slice(1));function m2(r,e=0){return(Ft[r[e+0]]+Ft[r[e+1]]+Ft[r[e+2]]+Ft[r[e+3]]+"-"+Ft[r[e+4]]+Ft[r[e+5]]+"-"+Ft[r[e+6]]+Ft[r[e+7]]+"-"+Ft[r[e+8]]+Ft[r[e+9]]+"-"+Ft[r[e+10]]+Ft[r[e+11]]+Ft[r[e+12]]+Ft[r[e+13]]+Ft[r[e+14]]+Ft[r[e+15]]).toLowerCase()}o(m2,"unsafeStringify");qa.unsafeStringify=m2;function b4(r,e=0){let t=m2(r,e);if(!(0,v4.default)(t))throw TypeError("Stringified UUID is invalid");return t}o(b4,"stringify");qa.default=b4});var Gc=_(Ph=>{"use strict";Object.defineProperty(Ph,"__esModule",{value:!0});var S4=require("crypto"),Wc=new Uint8Array(256),$c=Wc.length;function w4(){return $c>Wc.length-16&&((0,S4.randomFillSync)(Wc),$c=0),Wc.slice($c,$c+=16)}o(w4,"rng");Ph.default=w4});var Ih=_(Ba=>{"use strict";Object.defineProperty(Ba,"__esModule",{value:!0});Ba.updateV1State=void 0;var g2=Gc(),E4=zn(),Ua={};function T4(r,e,t){let n,i=r?._v6??!1;if(r){let s=Object.keys(r);s.length===1&&s[0]==="_v6"&&(r=void 0)}if(r)n=y2(r.random??r.rng?.()??(0,g2.default)(),r.msecs,r.nsecs,r.clockseq,r.node,e,t);else{let s=Date.now(),a=(0,g2.default)();_2(Ua,s,a),n=y2(a,Ua.msecs,Ua.nsecs,i?void 0:Ua.clockseq,i?void 0:Ua.node,e,t)}return e??(0,E4.unsafeStringify)(n)}o(T4,"v1");function _2(r,e,t){return r.msecs??=-1/0,r.nsecs??=0,e===r.msecs?(r.nsecs++,r.nsecs>=1e4&&(r.node=void 0,r.nsecs=0)):e>r.msecs?r.nsecs=0:e<r.msecs&&(r.node=void 0),r.node||(r.node=t.slice(10,16),r.node[0]|=1,r.clockseq=(t[8]<<8|t[9])&16383),r.msecs=e,r}o(_2,"updateV1State");Ba.updateV1State=_2;function y2(r,e,t,n,i,s,a=0){if(r.length<16)throw new Error("Random bytes length must be >= 16");if(!s)s=new Uint8Array(16),a=0;else if(a<0||a+16>s.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);e??=Date.now(),t??=0,n??=(r[8]<<8|r[9])&16383,i??=r.slice(10,16),e+=122192928e5;let c=((e&268435455)*1e4+t)%4294967296;s[a++]=c>>>24&255,s[a++]=c>>>16&255,s[a++]=c>>>8&255,s[a++]=c&255;let u=e/4294967296*1e4&268435455;s[a++]=u>>>8&255,s[a++]=u&255,s[a++]=u>>>24&15|16,s[a++]=u>>>16&255,s[a++]=n>>>8|128,s[a++]=n&255;for(let f=0;f<6;++f)s[a++]=i[f];return s}o(y2,"v1Bytes");Ba.default=T4});var Rh=_(Dh=>{"use strict";Object.defineProperty(Dh,"__esModule",{value:!0});var x4=Va(),A4=zn();function O4(r){let e=typeof r=="string"?(0,x4.default)(r):r,t=C4(e);return typeof r=="string"?(0,A4.unsafeStringify)(t):t}o(O4,"v1ToV6");Dh.default=O4;function C4(r){return Uint8Array.of((r[6]&15)<<4|r[7]>>4&15,(r[7]&15)<<4|(r[4]&240)>>4,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,(r[1]&15)<<4|(r[2]&240)>>4,96|r[2]&15,r[3],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}o(C4,"_v1ToV6")});var v2=_(Nh=>{"use strict";Object.defineProperty(Nh,"__esModule",{value:!0});var F4=require("crypto");function P4(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),(0,F4.createHash)("md5").update(r).digest()}o(P4,"md5");Nh.default=P4});var $a=_(Kn=>{"use strict";Object.defineProperty(Kn,"__esModule",{value:!0});Kn.URL=Kn.DNS=Kn.stringToBytes=void 0;var b2=Va(),I4=zn();function S2(r){r=unescape(encodeURIComponent(r));let e=new Uint8Array(r.length);for(let t=0;t<r.length;++t)e[t]=r.charCodeAt(t);return e}o(S2,"stringToBytes");Kn.stringToBytes=S2;Kn.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Kn.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function D4(r,e,t,n,i,s){let a=typeof t=="string"?S2(t):t,c=typeof n=="string"?(0,b2.default)(n):n;if(typeof n=="string"&&(n=(0,b2.default)(n)),n?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+a.length);if(u.set(c),u.set(a,c.length),u=e(u),u[6]=u[6]&15|r,u[8]=u[8]&63|128,i){s=s||0;for(let f=0;f<16;++f)i[s+f]=u[f];return i}return(0,I4.unsafeStringify)(u)}o(D4,"v35");Kn.default=D4});var E2=_(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.URL=Yi.DNS=void 0;var R4=v2(),kh=$a(),w2=$a();Object.defineProperty(Yi,"DNS",{enumerable:!0,get:o(function(){return w2.DNS},"get")});Object.defineProperty(Yi,"URL",{enumerable:!0,get:o(function(){return w2.URL},"get")});function jh(r,e,t,n){return(0,kh.default)(48,R4.default,r,e,t,n)}o(jh,"v3");jh.DNS=kh.DNS;jh.URL=kh.URL;Yi.default=jh});var T2=_(Mh=>{"use strict";Object.defineProperty(Mh,"__esModule",{value:!0});var N4=require("crypto");Mh.default={randomUUID:N4.randomUUID}});var A2=_(Lh=>{"use strict";Object.defineProperty(Lh,"__esModule",{value:!0});var x2=T2(),k4=Gc(),j4=zn();function M4(r,e,t){if(x2.default.randomUUID&&!e&&!r)return x2.default.randomUUID();r=r||{};let n=r.random??r.rng?.()??(0,k4.default)();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[t+i]=n[i];return e}return(0,j4.unsafeStringify)(n)}o(M4,"v4");Lh.default=M4});var O2=_(Vh=>{"use strict";Object.defineProperty(Vh,"__esModule",{value:!0});var L4=require("crypto");function V4(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),(0,L4.createHash)("sha1").update(r).digest()}o(V4,"sha1");Vh.default=V4});var F2=_(Qi=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.URL=Qi.DNS=void 0;var q4=O2(),qh=$a(),C2=$a();Object.defineProperty(Qi,"DNS",{enumerable:!0,get:o(function(){return C2.DNS},"get")});Object.defineProperty(Qi,"URL",{enumerable:!0,get:o(function(){return C2.URL},"get")});function Uh(r,e,t,n){return(0,qh.default)(80,q4.default,r,e,t,n)}o(Uh,"v5");Uh.DNS=qh.DNS;Uh.URL=qh.URL;Qi.default=Uh});var P2=_(Bh=>{"use strict";Object.defineProperty(Bh,"__esModule",{value:!0});var U4=zn(),B4=Ih(),$4=Rh();function W4(r,e,t){r??={},t??=0;let n=(0,B4.default)({...r,_v6:!0},new Uint8Array(16));if(n=(0,$4.default)(n),e){for(let i=0;i<16;i++)e[t+i]=n[i];return e}return(0,U4.unsafeStringify)(n)}o(W4,"v6");Bh.default=W4});var I2=_($h=>{"use strict";Object.defineProperty($h,"__esModule",{value:!0});var G4=Va(),H4=zn();function z4(r){let e=typeof r=="string"?(0,G4.default)(r):r,t=K4(e);return typeof r=="string"?(0,H4.unsafeStringify)(t):t}o(z4,"v6ToV1");$h.default=z4;function K4(r){return Uint8Array.of((r[3]&15)<<4|r[4]>>4&15,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|r[6]&15,r[7],(r[1]&15)<<4|(r[2]&240)>>4,(r[2]&15)<<4|(r[3]&240)>>4,16|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}o(K4,"_v6ToV1")});var k2=_(Wa=>{"use strict";Object.defineProperty(Wa,"__esModule",{value:!0});Wa.updateV7State=void 0;var D2=Gc(),Y4=zn(),Wh={};function Q4(r,e,t){let n;if(r)n=R2(r.random??r.rng?.()??(0,D2.default)(),r.msecs,r.seq,e,t);else{let i=Date.now(),s=(0,D2.default)();N2(Wh,i,s),n=R2(s,Wh.msecs,Wh.seq,e,t)}return e??(0,Y4.unsafeStringify)(n)}o(Q4,"v7");function N2(r,e,t){return r.msecs??=-1/0,r.seq??=0,e>r.msecs?(r.seq=t[6]<<23|t[7]<<16|t[8]<<8|t[9],r.msecs=e):(r.seq=r.seq+1|0,r.seq===0&&r.msecs++),r}o(N2,"updateV7State");Wa.updateV7State=N2;function R2(r,e,t,n,i=0){if(r.length<16)throw new Error("Random bytes length must be >= 16");if(!n)n=new Uint8Array(16),i=0;else if(i<0||i+16>n.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);return e??=Date.now(),t??=r[6]*127<<24|r[7]<<16|r[8]<<8|r[9],n[i++]=e/1099511627776&255,n[i++]=e/4294967296&255,n[i++]=e/16777216&255,n[i++]=e/65536&255,n[i++]=e/256&255,n[i++]=e&255,n[i++]=112|t>>>28&15,n[i++]=t>>>20&255,n[i++]=128|t>>>14&63,n[i++]=t>>>6&255,n[i++]=t<<2&255|r[10]&3,n[i++]=r[11],n[i++]=r[12],n[i++]=r[13],n[i++]=r[14],n[i++]=r[15],n}o(R2,"v7Bytes");Wa.default=Q4});var j2=_(Gh=>{"use strict";Object.defineProperty(Gh,"__esModule",{value:!0});var J4=La();function X4(r){if(!(0,J4.default)(r))throw TypeError("Invalid UUID");return parseInt(r.slice(14,15),16)}o(X4,"version");Gh.default=X4});var Lr=_(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.version=Ke.validate=Ke.v7=Ke.v6ToV1=Ke.v6=Ke.v5=Ke.v4=Ke.v3=Ke.v1ToV6=Ke.v1=Ke.stringify=Ke.parse=Ke.NIL=Ke.MAX=void 0;var Z4=h2();Object.defineProperty(Ke,"MAX",{enumerable:!0,get:o(function(){return Z4.default},"get")});var eT=d2();Object.defineProperty(Ke,"NIL",{enumerable:!0,get:o(function(){return eT.default},"get")});var tT=Va();Object.defineProperty(Ke,"parse",{enumerable:!0,get:o(function(){return tT.default},"get")});var rT=zn();Object.defineProperty(Ke,"stringify",{enumerable:!0,get:o(function(){return rT.default},"get")});var nT=Ih();Object.defineProperty(Ke,"v1",{enumerable:!0,get:o(function(){return nT.default},"get")});var iT=Rh();Object.defineProperty(Ke,"v1ToV6",{enumerable:!0,get:o(function(){return iT.default},"get")});var sT=E2();Object.defineProperty(Ke,"v3",{enumerable:!0,get:o(function(){return sT.default},"get")});var aT=A2();Object.defineProperty(Ke,"v4",{enumerable:!0,get:o(function(){return aT.default},"get")});var oT=F2();Object.defineProperty(Ke,"v5",{enumerable:!0,get:o(function(){return oT.default},"get")});var cT=P2();Object.defineProperty(Ke,"v6",{enumerable:!0,get:o(function(){return cT.default},"get")});var uT=I2();Object.defineProperty(Ke,"v6ToV1",{enumerable:!0,get:o(function(){return uT.default},"get")});var lT=k2();Object.defineProperty(Ke,"v7",{enumerable:!0,get:o(function(){return lT.default},"get")});var fT=La();Object.defineProperty(Ke,"validate",{enumerable:!0,get:o(function(){return fT.default},"get")});var hT=j2();Object.defineProperty(Ke,"version",{enumerable:!0,get:o(function(){return hT.default},"get")})});var Vr=_(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.MetadataHelpers=void 0;var Hh=class{static{o(this,"MetadataHelpers")}static findAllReferencingProperties(e,t){let n=[];for(let[i,s]of Object.entries(e))this.containsReference(s,t)&&n.push(i);return n}static findReferencingProperty(e,t){for(let[n,i]of Object.entries(e))if(this.containsReference(i,t))return n}static containsReference(e,t){if(!e)return!1;let n=t.replace(/\.md$/,"");if(typeof e=="string"){let i=/\[\[([^\]]+)\]\]/g,s;for(;(s=i.exec(e))!==null;){let c=s[1].split("|")[0].trim();if(c===n||c.endsWith(`/${n}`))return!0}return!1}return Array.isArray(e)?e.some(i=>this.containsReference(i,t)):!1}static isAssetArchived(e){let t=e?.exo__Asset_isArchived;if(t!=null){if(t===!0||t===1)return!0;if(typeof t=="string"){let i=t.toLowerCase().trim();if(i==="true"||i==="yes"||i==="1")return!0}if(typeof t=="boolean")return t}let n=e?.archived;if(n==null)return!1;if(typeof n=="boolean")return n;if(typeof n=="number")return n!==0;if(typeof n=="string"){let i=n.toLowerCase().trim();return i==="true"||i==="yes"||i==="1"}return!1}static getPropertyValue(e,t){return t==="Name"||t==="title"?e.title:t==="created"?e.created:t==="modified"?e.modified:t==="path"?e.path:e.metadata?.[t]}static ensureQuoted(e){return!e||e==='""'?'""':e.startsWith('"')&&e.endsWith('"')?e:`"${e}"`}static buildFileContent(e,t){let n=Object.entries(e).map(([s,a])=>{if(Array.isArray(a)){let c=a.map(u=>`  - ${u}`).join(`
`);return`${s}:
${c}`}return`${s}: ${a}`}).join(`
`),i=t?`
${t}
`:`
`;return`---
${n}
---
${i}`}};Hc.MetadataHelpers=Hh});var dr=_(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.DateFormatter=void 0;var zh=class r{static{o(this,"DateFormatter")}static toISOTimestamp(e){return e.toISOString().replace(/\.\d{3}Z$/,"Z")}static toLocalTimestamp(e){let t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0"),c=String(e.getSeconds()).padStart(2,"0");return`${t}-${n}-${i}T${s}:${a}:${c}`}static toDateWikilink(e){let t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`"[[${t}-${n}-${i}]]"`}static getTodayWikilink(){return r.toDateWikilink(new Date)}static toDateString(e){let t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`}static parseWikilink(e){let n=e.replace(/^["']|["']$/g,"").match(/\[\[(\d{4}-\d{2}-\d{2})\]\]/);return n?n[1]:null}static addDays(e,t){let n=new Date(e);return n.setDate(n.getDate()+t),n}static isSameDay(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}static getTodayStartTimestamp(){let e=new Date;return e.setHours(0,0,0,0),r.toLocalTimestamp(e)}static toTimestampAtStartOfDay(e){let t=e.split("-").map(Number);if(t.length!==3||t.some(isNaN))throw new Error(`Invalid date format: ${e}. Expected YYYY-MM-DD`);let[n,i,s]=t,a=new Date(n,i-1,s,0,0,0,0);if(isNaN(a.getTime()))throw new Error(`Invalid date values: ${e}`);return r.toLocalTimestamp(a)}static normalizeTimestamp(e){if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(e))return e;let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`Invalid timestamp format: ${e}`);return r.toISOTimestamp(t)}static isISOTimestamp(e){return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(e)}};zc.DateFormatter=zh});var Ga=_(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.MetadataExtractor=void 0;var dT=Vr(),Kh=class{static{o(this,"MetadataExtractor")}constructor(e){this.vault=e}extractMetadata(e){return e?this.vault.getFrontmatter(e)||{}:{}}extractInstanceClass(e){return e.exo__Instance_class||null}extractStatus(e){return e.ems__Effort_status||null}extractIsArchived(e){return dT.MetadataHelpers.isAssetArchived(e)}static extractIsDefinedBy(e){let t=e.exo__Asset_isDefinedBy||'""';return Array.isArray(t)&&(t=t[0]||'""'),t}extractExpectedFolder(e){let t=e.exo__Asset_isDefinedBy;if(!t)return null;let n=Array.isArray(t)?t[0]:t;if(!n||typeof n!="string")return null;let i=n.replace(/["'[\]]/g,"").trim();if(!i)return null;let s=i.split("/");return s.pop(),s.join("/")}extractCommandVisibilityContext(e){let t=this.extractMetadata(e),n=this.extractInstanceClass(t),i=this.extractStatus(t),s=this.extractIsArchived(t),a=e.parent?.path||"",c=this.extractExpectedFolder(t);return{instanceClass:n,currentStatus:i,metadata:t,isArchived:s,currentFolder:a,expectedFolder:c}}extractCache(e){return e?this.vault.getFrontmatter(e):null}};Kc.MetadataExtractor=Kh});var Yc=_(Ji=>{"use strict";var pT=Ji&&Ji.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Ji,"__esModule",{value:!0});Ji.TaskFrontmatterGenerator=void 0;var mT=Ze(),M2=Lr(),Yh=dr(),gT=Bi(),L2=Ga(),V2=Vr(),ut=Lt(),yT=ui(),_T={[ut.AssetClass.AREA]:"ems__Effort_area",[ut.AssetClass.PROJECT]:"ems__Effort_parent",[ut.AssetClass.TASK_PROTOTYPE]:"exo__Asset_prototype",[ut.AssetClass.MEETING_PROTOTYPE]:"exo__Asset_prototype",[ut.AssetClass.EVENT_PROTOTYPE]:"exo__Asset_prototype",[ut.AssetClass.PROJECT_PROTOTYPE]:"exo__Asset_prototype"},vT={[ut.AssetClass.AREA]:ut.AssetClass.TASK,[ut.AssetClass.PROJECT]:ut.AssetClass.TASK,[ut.AssetClass.TASK_PROTOTYPE]:ut.AssetClass.TASK,[ut.AssetClass.MEETING_PROTOTYPE]:ut.AssetClass.MEETING,[ut.AssetClass.EVENT_PROTOTYPE]:ut.AssetClass.EVENT,[ut.AssetClass.PROJECT_PROTOTYPE]:ut.AssetClass.PROJECT},Qh=class{static{o(this,"TaskFrontmatterGenerator")}generateTaskFrontmatter(e,t,n,i,s,a,c){let u=new Date,f=Yh.DateFormatter.toLocalTimestamp(u),l=L2.MetadataExtractor.extractIsDefinedBy(e),h=gT.WikiLinkHelpers.normalize(n),p=_T[h],m=vT[h]||ut.AssetClass.TASK,b={};b.exo__Asset_isDefinedBy=V2.MetadataHelpers.ensureQuoted(l),b.exo__Asset_uid=s||(0,M2.v4)(),b.exo__Asset_createdAt=f,b.exo__Instance_class=[`"[[${m}]]"`],b.ems__Effort_status='"[[ems__EffortStatusDraft]]"',p?b[p]=`"[[${t}]]"`:(0,yT.isPrototypeClass)(n,e)&&(b.exo__Asset_prototype=`"[[${t}]]"`);let y=i;if(m===ut.AssetClass.MEETING&&(!i||i.trim()==="")){let x=e.exo__Asset_label||t,A=Yh.DateFormatter.toDateString(u);y=`${x} ${A}`}if(y&&y.trim()!==""){let x=y.trim();b.exo__Asset_label=x,b.aliases=[x]}return a&&(b.ems__Task_size=a),c&&(b.ems__Effort_plannedStartTimestamp=c),b}generateRelatedTaskFrontmatter(e,t,n,i,s){let a=new Date,c=Yh.DateFormatter.toLocalTimestamp(a),u=L2.MetadataExtractor.extractIsDefinedBy(e),f={};if(f.exo__Asset_isDefinedBy=V2.MetadataHelpers.ensureQuoted(u),f.exo__Asset_uid=i||(0,M2.v4)(),f.exo__Asset_createdAt=c,f.exo__Instance_class=[`"[[${ut.AssetClass.TASK}]]"`],f.ems__Effort_status='"[[ems__EffortStatusDraft]]"',f.exo__Asset_relates=[`"[[${t}]]"`],n&&n.trim()!==""){let l=n.trim();f.exo__Asset_label=l,f.aliases=[l]}return s&&(f.ems__Task_size=s),f}};Ji.TaskFrontmatterGenerator=Qh;Ji.TaskFrontmatterGenerator=Qh=pT([(0,mT.injectable)()],Qh)});var Qc=_(Xi=>{"use strict";var bT=Xi&&Xi.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Xi,"__esModule",{value:!0});Xi.AlgorithmExtractor=void 0;var ST=Ze(),Jh=class{static{o(this,"AlgorithmExtractor")}extractH2Section(e,t){let n=e.split(`
`),i=`## ${t}`,s=!1,a=[];for(let u of n){if(u.trim()===i){s=!0;continue}if(s){if(u.startsWith("## ")||u.startsWith("# "))break;a.push(u)}}return a.length===0?null:a.join(`
`).trim()||null}};Xi.AlgorithmExtractor=Jh;Xi.AlgorithmExtractor=Jh=bT([(0,ST.injectable)()],Jh)});var U2=_(q2=>{"use strict";Object.defineProperty(q2,"__esModule",{value:!0})});var it=_(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.DI_TOKENS=void 0;Jc.DI_TOKENS={IFileSystemAdapter:Symbol.for("IFileSystemAdapter"),IVaultAdapter:Symbol.for("IVaultAdapter"),IVaultContext:Symbol.for("IVaultContext"),IMultiVaultManager:Symbol.for("IMultiVaultManager"),ILogger:Symbol.for("ILogger"),IEventBus:Symbol.for("IEventBus"),IConfiguration:Symbol.for("IConfiguration"),INotificationService:Symbol.for("INotificationService"),TaskCreationService:Symbol.for("TaskCreationService"),ProjectCreationService:Symbol.for("ProjectCreationService"),AreaCreationService:Symbol.for("AreaCreationService"),ClassCreationService:Symbol.for("ClassCreationService"),ConceptCreationService:Symbol.for("ConceptCreationService"),FleetingNoteCreationService:Symbol.for("FleetingNoteCreationService"),SupervisionCreationService:Symbol.for("SupervisionCreationService"),TaskFrontmatterGenerator:Symbol.for("TaskFrontmatterGenerator"),DynamicFrontmatterGenerator:Symbol.for("DynamicFrontmatterGenerator"),AlgorithmExtractor:Symbol.for("AlgorithmExtractor"),TaskStatusService:Symbol.for("TaskStatusService"),EffortStatusWorkflow:Symbol.for("EffortStatusWorkflow"),StatusTimestampService:Symbol.for("StatusTimestampService"),PropertyCleanupService:Symbol.for("PropertyCleanupService"),FolderRepairService:Symbol.for("FolderRepairService"),LabelToAliasService:Symbol.for("LabelToAliasService"),RenameToUidService:Symbol.for("RenameToUidService"),PlanningService:Symbol.for("PlanningService"),EffortVotingService:Symbol.for("EffortVotingService"),SessionEventService:Symbol.for("SessionEventService"),AssetConversionService:Symbol.for("AssetConversionService"),NoteToRDFConverter:Symbol.for("NoteToRDFConverter"),AreaHierarchyBuilder:Symbol.for("AreaHierarchyBuilder"),URIConstructionService:Symbol.for("URIConstructionService")}});var Zh=_(Pt=>{"use strict";var wT=Pt&&Pt.__createBinding||(Object.create?(function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,n,i)}):(function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]})),ET=Pt&&Pt.__setModuleDefault||(Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e}),TT=Pt&&Pt.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},xT=Pt&&Pt.__importStar||(function(){var r=o(function(e){return r=Object.getOwnPropertyNames||function(t){var n=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[n.length]=i);return n},r(e)},"ownKeys");return function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=r(e),i=0;i<n.length;i++)n[i]!=="default"&&wT(t,e,n[i]);return ET(t,e),t}})(),AT=Pt&&Pt.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},OT=Pt&&Pt.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(Pt,"__esModule",{value:!0});Pt.TaskCreationService=void 0;var B2=Ze(),$2=Lr(),CT=Bi(),W2=Vr(),FT=Lt(),PT=Yc(),IT=Qc(),fN=xT(U2()),DT=it(),Xh=class{static{o(this,"TaskCreationService")}constructor(e,t,n){this.vault=e,this.frontmatterGenerator=t,this.algorithmExtractor=n}async createTask(e,t,n,i,s,a){let c=(0,$2.v4)(),u=`${c}.md`,f=this.frontmatterGenerator.generateTaskFrontmatter(t,e.basename,n,i,c,s,a),l="";if(CT.WikiLinkHelpers.normalize(n)===FT.AssetClass.TASK_PROTOTYPE){let x=await this.vault.read(e),A=this.algorithmExtractor.extractH2Section(x,"Algorithm");A&&(l=`## Algorithm

${A}`)}let p=W2.MetadataHelpers.buildFileContent(f,l),m=e.parent?.path||"",b=m?`${m}/${u}`:u;return await this.vault.create(b,p)}async createRelatedTask(e,t,n,i){let s=(0,$2.v4)(),a=`${s}.md`,c=this.frontmatterGenerator.generateRelatedTaskFrontmatter(t,e.basename,n,s,i),u=W2.MetadataHelpers.buildFileContent(c),f=e.parent?.path||"",l=f?`${f}/${a}`:a,h=await this.vault.create(l,u);return await this.addRelationToSourceFile(e,s),h}generateTaskFrontmatter(e,t,n,i,s,a,c){return this.frontmatterGenerator.generateTaskFrontmatter(e,t,n,i,s,a,c)}generateRelatedTaskFrontmatter(e,t,n,i,s){return this.frontmatterGenerator.generateRelatedTaskFrontmatter(e,t,n,i,s)}extractH2Section(e,t){return this.algorithmExtractor.extractH2Section(e,t)}async addRelationToSourceFile(e,t){let n=await this.vault.read(e),i=this.addRelationToFrontmatter(n,t);await this.vault.modify(e,i)}addRelationToFrontmatter(e,t){let n=/^---\r?\n([\s\S]*?)\r?\n---/,i=e.match(n),s=e.includes(`\r
`)?`\r
`:`
`;if(!i)return`---${s}exo__Asset_relates:${s}  - "[[${t}]]"${s}---${s}${e}`;let c=i[1];if(c.includes("exo__Asset_relates:")){let u=c.match(/exo__Asset_relates:\r?\n((?: {2}- .*\r?\n)*)/);if(u){let f=u[1],l=`  - "[[${t}]]"${s}`;c=c.replace(/exo__Asset_relates:\r?\n((?: {2}- .*\r?\n)*)/,`exo__Asset_relates:${s}${f}${l}`)}}else c+=`${s}exo__Asset_relates:${s}  - "[[${t}]]"`;return e.replace(n,`---${s}${c}${s}---`)}};Pt.TaskCreationService=Xh;Pt.TaskCreationService=Xh=TT([(0,B2.injectable)(),OT(0,(0,B2.inject)(DT.DI_TOKENS.IVaultAdapter)),AT("design:paramtypes",[Object,PT.TaskFrontmatterGenerator,IT.AlgorithmExtractor])],Xh)});var td=_(qr=>{"use strict";var RT=qr&&qr.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},NT=qr&&qr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},kT=qr&&qr.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(qr,"__esModule",{value:!0});qr.ProjectCreationService=void 0;var G2=Ze(),H2=Lr(),jT=Bi(),Xc=Lt(),MT=dr(),LT=Ga(),z2=Vr(),VT=it(),qT={[Xc.AssetClass.AREA]:"ems__Effort_area",[Xc.AssetClass.INITIATIVE]:"ems__Effort_parent",[Xc.AssetClass.PROJECT]:"ems__Effort_parent"},ed=class{static{o(this,"ProjectCreationService")}constructor(e){this.vault=e}async createProject(e,t,n,i){let s=(0,H2.v4)(),a=`${s}.md`,c=this.generateProjectFrontmatter(t,e.basename,n,i,s),u=z2.MetadataHelpers.buildFileContent(c),f=e.parent?.path||"",l=f?`${f}/${a}`:a;return await this.vault.create(l,u)}generateProjectFrontmatter(e,t,n,i,s){let a=new Date,c=MT.DateFormatter.toLocalTimestamp(a),u=LT.MetadataExtractor.extractIsDefinedBy(e),f=jT.WikiLinkHelpers.normalize(n),l=qT[f]||"ems__Effort_area",h={};if(h.exo__Asset_isDefinedBy=z2.MetadataHelpers.ensureQuoted(u),h.exo__Asset_uid=s||(0,H2.v4)(),h.exo__Asset_createdAt=c,h.exo__Instance_class=[`"[[${Xc.AssetClass.PROJECT}]]"`],h.ems__Effort_status='"[[ems__EffortStatusDraft]]"',h[l]=`"[[${t}]]"`,i&&i.trim()!==""){let p=i.trim();h.exo__Asset_label=p,h.aliases=[p]}return h}};qr.ProjectCreationService=ed;qr.ProjectCreationService=ed=RT([(0,G2.injectable)(),kT(0,(0,G2.inject)(VT.DI_TOKENS.IVaultAdapter)),NT("design:paramtypes",[Object])],ed)});var Is=_(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.FrontmatterService=void 0;var Zc=class r{static{o(this,"FrontmatterService")}parse(e){let t=e.match(r.FRONTMATTER_REGEX);return t?{exists:!0,content:t[1],originalContent:e}:{exists:!1,content:"",originalContent:e}}updateProperty(e,t,n){let i=this.parse(e);if(!i.exists)return this.createFrontmatter(e,{[t]:n});let s=i.content;if(this.hasProperty(s,t)){let a=new RegExp(`${this.escapeRegex(t)}:.*$`,"m");s=s.replace(a,`${t}: ${n}`)}else{let a=s.length>0?`
`:"";s+=`${a}${t}: ${n}`}return e.replace(r.FRONTMATTER_REGEX,`---
${s}
---`)}addProperty(e,t,n){return this.updateProperty(e,t,n)}removeProperty(e,t){let n=this.parse(e);if(!n.exists||!this.hasProperty(n.content,t))return e;let i=new RegExp(`
?${this.escapeRegex(t)}:.*(?:
 {2}- .*)*`,"gm"),s=n.content.replace(i,"");return e.replace(r.FRONTMATTER_REGEX,`---
${s}
---`)}hasProperty(e,t){return e.includes(`${t}:`)}createFrontmatter(e,t){let i=`---
${Object.entries(t).map(([a,c])=>`${a}: ${c}`).join(`
`)}
---`,s=e.startsWith(`
`)?"":`
`;return`${i}${s}${e}`}getPropertyValue(e,t){let n=new RegExp(`${this.escapeRegex(t)}:\\s*(.*)$`,"m"),i=e.match(n);return i?i[1].trim():null}escapeRegex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}};eu.FrontmatterService=Zc;Zc.FRONTMATTER_REGEX=/^---\n([\s\S]*?)\n---/});var tu=_(Zi=>{"use strict";var UT=Zi&&Zi.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Zi,"__esModule",{value:!0});Zi.EffortStatusWorkflow=void 0;var BT=Ze(),_r=Lt(),rd=class{static{o(this,"EffortStatusWorkflow")}getPreviousStatus(e,t){let n=this.normalizeStatus(e);if(n===_r.EffortStatus.DRAFT)return null;if(n===_r.EffortStatus.BACKLOG)return this.wrapStatus(_r.EffortStatus.DRAFT);if(n===_r.EffortStatus.ANALYSIS)return this.wrapStatus(_r.EffortStatus.BACKLOG);if(n===_r.EffortStatus.TODO)return this.wrapStatus(_r.EffortStatus.ANALYSIS);if(n===_r.EffortStatus.DOING)return this.hasInstanceClass(t,_r.AssetClass.PROJECT)?this.wrapStatus(_r.EffortStatus.TODO):this.wrapStatus(_r.EffortStatus.BACKLOG);if(n===_r.EffortStatus.DONE)return this.wrapStatus(_r.EffortStatus.DOING)}normalizeStatus(e){return e.replace(/["'[\]]/g,"").trim()}wrapStatus(e){return`"[[${e}]]"`}hasInstanceClass(e,t){return e?(Array.isArray(e)?e:[e]).some(i=>i.replace(/["'[\]]/g,"").trim()===t):!1}};Zi.EffortStatusWorkflow=rd;Zi.EffortStatusWorkflow=rd=UT([(0,BT.injectable)()],rd)});var ru=_(Ur=>{"use strict";var $T=Ur&&Ur.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},WT=Ur&&Ur.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},GT=Ur&&Ur.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.StatusTimestampService=void 0;var K2=Ze(),HT=Is(),Ha=dr(),zT=it(),nd=class{static{o(this,"StatusTimestampService")}constructor(e){this.vault=e,this.frontmatterService=new HT.FrontmatterService}async addStartTimestamp(e){let t=await this.vault.read(e),n=Ha.DateFormatter.toLocalTimestamp(new Date),i=this.frontmatterService.updateProperty(t,"ems__Effort_startTimestamp",n);await this.vault.modify(e,i)}async addEndTimestamp(e,t){let n=await this.vault.read(e),i=t||new Date,s=Ha.DateFormatter.toLocalTimestamp(i),a=this.frontmatterService.updateProperty(n,"ems__Effort_endTimestamp",s);await this.vault.modify(e,a)}async addResolutionTimestamp(e){let t=await this.vault.read(e),n=Ha.DateFormatter.toLocalTimestamp(new Date),i=this.frontmatterService.updateProperty(t,"ems__Effort_resolutionTimestamp",n);await this.vault.modify(e,i)}async addEndAndResolutionTimestamps(e,t){let n=await this.vault.read(e),i=t||new Date,s=Ha.DateFormatter.toLocalTimestamp(i),a=this.frontmatterService.updateProperty(n,"ems__Effort_endTimestamp",s);a=this.frontmatterService.updateProperty(a,"ems__Effort_resolutionTimestamp",s),await this.vault.modify(e,a)}async removeStartTimestamp(e){let t=await this.vault.read(e),n=this.frontmatterService.removeProperty(t,"ems__Effort_startTimestamp");await this.vault.modify(e,n)}async removeEndTimestamp(e){let t=await this.vault.read(e),n=this.frontmatterService.removeProperty(t,"ems__Effort_endTimestamp");await this.vault.modify(e,n)}async removeResolutionTimestamp(e){let t=await this.vault.read(e),n=this.frontmatterService.removeProperty(t,"ems__Effort_resolutionTimestamp");await this.vault.modify(e,n)}async removeEndAndResolutionTimestamps(e){let t=await this.vault.read(e),n=this.frontmatterService.removeProperty(t,"ems__Effort_endTimestamp");n=this.frontmatterService.removeProperty(n,"ems__Effort_resolutionTimestamp"),await this.vault.modify(e,n)}async shiftPlannedEndTimestamp(e,t){let n=await this.vault.read(e),i=this.frontmatterService.parse(n);if(!i.exists)return;let s=this.frontmatterService.getPropertyValue(i.content,"ems__Effort_plannedEndTimestamp");if(!s)return;let a=new Date(s.replace(/["']/g,""));if(isNaN(a.getTime()))return;let c=new Date(a.getTime()+t),u=Ha.DateFormatter.toLocalTimestamp(c),f=this.frontmatterService.updateProperty(n,"ems__Effort_plannedEndTimestamp",u);await this.vault.modify(e,f)}};Ur.StatusTimestampService=nd;Ur.StatusTimestampService=nd=$T([(0,K2.injectable)(),GT(0,(0,K2.inject)(zT.DI_TOKENS.IVaultAdapter)),WT("design:paramtypes",[Object])],nd)});var sd=_(Br=>{"use strict";var KT=Br&&Br.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},YT=Br&&Br.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},QT=Br&&Br.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(Br,"__esModule",{value:!0});Br.TaskStatusService=void 0;var Y2=Ze(),JT=Is(),es=dr(),XT=tu(),ZT=ru(),ex=it(),id=class{static{o(this,"TaskStatusService")}constructor(e,t,n){this.vault=e,this.workflow=t,this.timestampService=n,this.frontmatterService=new JT.FrontmatterService}async setDraftStatus(e){await this.updateStatus(e,"ems__EffortStatusDraft")}async moveToBacklog(e){await this.updateStatus(e,"ems__EffortStatusBacklog")}async moveToAnalysis(e){await this.updateStatus(e,"ems__EffortStatusAnalysis")}async moveToToDo(e){await this.updateStatus(e,"ems__EffortStatusToDo")}async startEffort(e){let t=await this.vault.read(e),n=es.DateFormatter.toLocalTimestamp(new Date),i=this.frontmatterService.updateProperty(t,"ems__Effort_status",'"[[ems__EffortStatusDoing]]"');i=this.frontmatterService.updateProperty(i,"ems__Effort_startTimestamp",n),await this.vault.modify(e,i)}async markTaskAsDone(e){let t=await this.vault.read(e),n=es.DateFormatter.toLocalTimestamp(new Date),i=this.frontmatterService.updateProperty(t,"ems__Effort_status",'"[[ems__EffortStatusDone]]"');i=this.frontmatterService.updateProperty(i,"ems__Effort_endTimestamp",n),i=this.frontmatterService.updateProperty(i,"ems__Effort_resolutionTimestamp",n),await this.vault.modify(e,i)}async syncEffortEndTimestamp(e,t){await this.timestampService.addEndAndResolutionTimestamps(e,t)}async shiftPlannedEndTimestamp(e,t){await this.timestampService.shiftPlannedEndTimestamp(e,t)}async trashEffort(e){let t=await this.vault.read(e),n=es.DateFormatter.toLocalTimestamp(new Date),i=this.frontmatterService.updateProperty(t,"ems__Effort_status",'"[[ems__EffortStatusTrashed]]"');i=this.frontmatterService.updateProperty(i,"ems__Effort_resolutionTimestamp",n),await this.vault.modify(e,i)}async archiveTask(e){let t=await this.vault.read(e),n=this.frontmatterService.updateProperty(t,"archived","true");n=this.frontmatterService.removeProperty(n,"aliases"),await this.vault.modify(e,n)}async planOnToday(e){let t=await this.vault.read(e),n=es.DateFormatter.getTodayStartTimestamp(),i=this.frontmatterService.updateProperty(t,"ems__Effort_plannedStartTimestamp",n);await this.vault.modify(e,i)}async planForEvening(e){let t=await this.vault.read(e),n=new Date;n.setHours(19,0,0,0);let i=es.DateFormatter.toLocalTimestamp(n),s=this.frontmatterService.updateProperty(t,"ems__Effort_plannedStartTimestamp",i);await this.vault.modify(e,s)}async shiftDayBackward(e){await this.shiftDay(e,-1)}async shiftDayForward(e){await this.shiftDay(e,1)}async rollbackStatus(e){let t=await this.vault.read(e),n=this.extractCurrentStatus(t),i=this.extractInstanceClass(t);if(!n)throw new Error("No current status to rollback from");let s=this.workflow.getPreviousStatus(n,i);if(s===void 0)throw new Error("Cannot rollback from current status");let a=t;s===null?a=this.frontmatterService.removeProperty(a,"ems__Effort_status"):a=this.frontmatterService.updateProperty(a,"ems__Effort_status",s);let c=this.workflow.normalizeStatus(n);c==="ems__EffortStatusDone"?(a=this.frontmatterService.removeProperty(a,"ems__Effort_endTimestamp"),a=this.frontmatterService.removeProperty(a,"ems__Effort_resolutionTimestamp")):c==="ems__EffortStatusDoing"&&(a=this.frontmatterService.removeProperty(a,"ems__Effort_startTimestamp")),await this.vault.modify(e,a)}async updateStatus(e,t){let n=await this.vault.read(e),i=this.frontmatterService.updateProperty(n,"ems__Effort_status",`"[[${t}]]"`);await this.vault.modify(e,i)}async shiftDay(e,t){let n=await this.vault.read(e),i=this.extractPlannedStartTimestamp(n);if(!i)throw new Error("ems__Effort_plannedStartTimestamp property not found");let s=this.parseDateFromTimestamp(i);if(!s)throw new Error("Invalid date format in ems__Effort_plannedStartTimestamp");let a=es.DateFormatter.addDays(s,t);a.setHours(0,0,0,0);let c=es.DateFormatter.toLocalTimestamp(a),u=this.frontmatterService.updateProperty(n,"ems__Effort_plannedStartTimestamp",c);await this.vault.modify(e,u)}parseDateFromTimestamp(e){let t=new Date(e);return isNaN(t.getTime())?null:t}extractPlannedStartTimestamp(e){let t=this.frontmatterService.parse(e);return t.exists?this.frontmatterService.getPropertyValue(t.content,"ems__Effort_plannedStartTimestamp"):null}extractCurrentStatus(e){let t=this.frontmatterService.parse(e);return t.exists?this.frontmatterService.getPropertyValue(t.content,"ems__Effort_status"):null}extractInstanceClass(e){let t=this.frontmatterService.parse(e);if(!t.exists)return null;let n=t.content.match(/exo__Instance_class:\s*\n((?:\s*-\s*.*\n?)+)/);return n?n[1].split(`
`).filter(s=>s.trim()).map(s=>s.replace(/^\s*-\s*/,"").trim()):this.frontmatterService.getPropertyValue(t.content,"exo__Instance_class")}};Br.TaskStatusService=id;Br.TaskStatusService=id=KT([(0,Y2.injectable)(),QT(0,(0,Y2.inject)(ex.DI_TOKENS.IVaultAdapter)),YT("design:paramtypes",[Object,XT.EffortStatusWorkflow,ZT.StatusTimestampService])],id)});var od=_($r=>{"use strict";var tx=$r&&$r.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},rx=$r&&$r.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},nx=$r&&$r.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty($r,"__esModule",{value:!0});$r.AreaCreationService=void 0;var Q2=Ze(),J2=Lr(),ix=Lt(),sx=dr(),ax=Ga(),X2=Vr(),ox=it(),ad=class{static{o(this,"AreaCreationService")}constructor(e){this.vault=e}async createChildArea(e,t,n){let i=(0,J2.v4)(),s=`${i}.md`,a=this.generateChildAreaFrontmatter(t,e.basename,n,i),c=X2.MetadataHelpers.buildFileContent(a),u=e.parent?.path||"",f=u?`${u}/${s}`:s;return await this.vault.create(f,c)}generateChildAreaFrontmatter(e,t,n,i){let s=new Date,a=sx.DateFormatter.toLocalTimestamp(s),c=ax.MetadataExtractor.extractIsDefinedBy(e),u={};if(u.exo__Asset_isDefinedBy=X2.MetadataHelpers.ensureQuoted(c),u.exo__Asset_uid=i||(0,J2.v4)(),u.exo__Asset_createdAt=a,u.exo__Instance_class=[`"[[${ix.AssetClass.AREA}]]"`],u.ems__Area_parent=`"[[${t}]]"`,n&&n.trim()!==""){let f=n.trim();u.exo__Asset_label=f,u.aliases=[f]}return u}};$r.AreaCreationService=ad;$r.AreaCreationService=ad=tx([(0,Q2.injectable)(),nx(0,(0,Q2.inject)(ox.DI_TOKENS.IVaultAdapter)),rx("design:paramtypes",[Object])],ad)});var ud=_(Wr=>{"use strict";var cx=Wr&&Wr.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},ux=Wr&&Wr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},lx=Wr&&Wr.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.AreaHierarchyBuilder=void 0;var Z2=Ze(),eg=Lt(),fx=it(),cd=class{static{o(this,"AreaHierarchyBuilder")}constructor(e){this.vault=e}buildHierarchy(e,t){let n=this.vault.getAbstractFileByPath(e);if(!this.isFile(n))return null;let i=this.vault.getFrontmatter(n)||{};if(this.extractInstanceClass(i)!==eg.AssetClass.AREA)return null;let a=this.collectAllAreasFromVault(),c=new Set;return this.buildTree(e,a,c,0)}isFile(e){return e&&typeof e=="object"&&"basename"in e&&"path"in e}extractInstanceClass(e){let t=e.exo__Instance_class||"";return Array.isArray(t)?this.cleanWikiLink(t[0]||""):this.cleanWikiLink(t)}cleanWikiLink(e){return typeof e!="string"?"":e.replace(/^\[\[|\]\]$/g,"").trim()}collectAllAreasFromVault(){let e=new Map,t=new Map,n=this.vault.getAllFiles();for(let i of n){let s=this.vault.getFrontmatter(i)||{};if(this.extractInstanceClass(s)===eg.AssetClass.AREA){let c=this.extractParentPath(s);e.set(i.path,{path:i.path,title:i.basename,label:s.exo__Asset_label||void 0,isArchived:this.isArchived(s),depth:0,parentPath:c||void 0}),t.set(i.basename,i.path)}}for(let[,i]of e.entries())i.parentPath&&t.has(i.parentPath)&&(i.parentPath=t.get(i.parentPath));return e}extractParentPath(e){let t=e.ems__Area_parent;if(!t)return null;if(Array.isArray(t)){let n=t[0]||"";return this.cleanWikiLink(n)}return this.cleanWikiLink(t)}isArchived(e){let t=e.exo__Asset_archived;if(t===!0||t==="true")return!0;if(Array.isArray(t)&&t.length>0){let n=t[0];return n===!0||n==="true"}return!1}buildTree(e,t,n,i){if(n.has(e))return null;n.add(e);let s=t.get(e);if(!s)return null;let a=[];for(let[c,u]of t.entries())if(u.parentPath===e){let f=this.buildTree(c,t,n,i+1);f&&a.push(f)}return a.sort((c,u)=>{let f=c.label||c.title,l=u.label||u.title;return f.localeCompare(l)}),{path:s.path,title:s.title,label:s.label,isArchived:s.isArchived,depth:i,parentPath:s.parentPath,children:a}}};Wr.AreaHierarchyBuilder=cd;Wr.AreaHierarchyBuilder=cd=cx([(0,Z2.injectable)(),lx(0,(0,Z2.inject)(fx.DI_TOKENS.IVaultAdapter)),ux("design:paramtypes",[Object])],cd)});var fd=_(Gr=>{"use strict";var hx=Gr&&Gr.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},dx=Gr&&Gr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},px=Gr&&Gr.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.ClassCreationService=void 0;var tg=Ze(),mx=Lr(),gx=dr(),yx=Vr(),_x=it(),ld=class{static{o(this,"ClassCreationService")}constructor(e){this.vault=e}async createSubclass(e,t,n){let i=(0,mx.v4)(),s=this.generateFileName(t),a=s.endsWith(".md")?s:`${s}.md`,c=this.generateClassFrontmatter(e.basename,t,i,n),u=yx.MetadataHelpers.buildFileContent(c),f="classes",l=`${f}/${a}`;return this.vault.getAbstractFileByPath(f)||await this.vault.createFolder(f),await this.vault.create(l,u)}generateFileName(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}generateClassFrontmatter(e,t,n,i){let s=new Date,a=gx.DateFormatter.toLocalTimestamp(s),c={};c.exo__Asset_uid=n,c.exo__Asset_label=t,c.exo__Asset_createdAt=a,c.exo__Instance_class=['"[[exo__Class]]"'],c.exo__Class_superClass=`"[[${e}]]"`;let u=i.exo__Asset_isDefinedBy||'"[[Ontology/EXO]]"';return c.exo__Asset_isDefinedBy=u,c.aliases=[t],c}};Gr.ClassCreationService=ld;Gr.ClassCreationService=ld=hx([(0,tg.injectable)(),px(0,(0,tg.inject)(_x.DI_TOKENS.IVaultAdapter)),dx("design:paramtypes",[Object])],ld)});var dd=_(Hr=>{"use strict";var vx=Hr&&Hr.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},bx=Hr&&Hr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Sx=Hr&&Hr.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.ConceptCreationService=void 0;var rg=Ze(),wx=Lr(),Ex=dr(),Tx=Vr(),xx=Lt(),Ax=it(),hd=class{static{o(this,"ConceptCreationService")}constructor(e){this.vault=e}async createNarrowerConcept(e,t,n,i){let s=(0,wx.v4)(),a=t.endsWith(".md")?t:`${t}.md`,c=this.generateConceptFrontmatter(e.basename,n,i,s),u=Tx.MetadataHelpers.buildFileContent(c),f="concepts",l=`${f}/${a}`;return this.vault.getAbstractFileByPath(f)||await this.vault.createFolder(f),await this.vault.create(l,u)}generateConceptFrontmatter(e,t,n,i){let s=new Date,a=Ex.DateFormatter.toLocalTimestamp(s),c={};return c.exo__Asset_isDefinedBy='"[[!concepts]]"',c.exo__Asset_uid=i,c.exo__Asset_createdAt=a,c.exo__Instance_class=[`"[[${xx.AssetClass.CONCEPT}]]"`],c.ims__Concept_broader=`"[[${e}]]"`,c.ims__Concept_definition=t,n.length>0&&(c.aliases=n),c}};Hr.ConceptCreationService=hd;Hr.ConceptCreationService=hd=vx([(0,rg.injectable)(),Sx(0,(0,rg.inject)(Ax.DI_TOKENS.IVaultAdapter)),bx("design:paramtypes",[Object])],hd)});var md=_(zr=>{"use strict";var Ox=zr&&zr.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Cx=zr&&zr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Fx=zr&&zr.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(zr,"__esModule",{value:!0});zr.EffortVotingService=void 0;var ng=Ze(),Px=it(),pd=class{static{o(this,"EffortVotingService")}constructor(e){this.vault=e}async incrementEffortVotes(e){let t=await this.vault.read(e),i=this.extractVoteCount(t)+1,s=this.updateFrontmatterWithVotes(t,i);return await this.vault.modify(e,s),i}extractVoteCount(e){let t=/^---\r?\n([\s\S]*?)\r?\n---/,n=e.match(t);if(!n)return 0;let s=n[1].match(/ems__Effort_votes:\s*(\d+)/);return s&&s[1]?parseInt(s[1],10):0}updateFrontmatterWithVotes(e,t){let n=/^---\r?\n([\s\S]*?)\r?\n---/,i=e.match(n),s=e.includes(`\r
`)?`\r
`:`
`;if(!i)return`---${s}ems__Effort_votes: ${t}${s}---${s}${e}`;let c=i[1];return c.includes("ems__Effort_votes:")?c=c.replace(/ems__Effort_votes:.*$/m,`ems__Effort_votes: ${t}`):c+=`${s}ems__Effort_votes: ${t}`,e.replace(n,`---${s}${c}${s}---`)}};zr.EffortVotingService=pd;zr.EffortVotingService=pd=Ox([(0,ng.injectable)(),Fx(0,(0,ng.inject)(Px.DI_TOKENS.IVaultAdapter)),Cx("design:paramtypes",[Object])],pd)});var yd=_(Kr=>{"use strict";var Ix=Kr&&Kr.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Dx=Kr&&Kr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Rx=Kr&&Kr.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.FolderRepairService=void 0;var ig=Ze(),Nx=it(),gd=class{static{o(this,"FolderRepairService")}constructor(e){this.vault=e}async getExpectedFolder(e,t){let n=t?.exo__Asset_isDefinedBy;if(!n)return null;let i=this.extractReference(n);if(!i)return null;let s=this.vault.getFirstLinkpathDest(i,e.path);return s?this.getFileFolder(s):null}async repairFolder(e,t){let n=`${t}/${e.name}`;if(this.vault.getAbstractFileByPath(n))throw new Error(`Cannot move file: ${n} already exists`);await this.ensureFolderExists(t),await this.vault.rename(e,n)}getFileFolder(e){return e.parent?.path||""}extractReference(e){if(typeof e!="string")return null;let t=e.trim().replace(/^["']|["']$/g,"");return t=t.replace(/^\[\[|\]\]$/g,""),t||null}async ensureFolderExists(e){if(!e)return;let t=this.vault.getAbstractFileByPath(e);if(!(t&&"children"in t))try{await this.vault.createFolder(e)}catch(n){if(n instanceof Error&&n.message.includes("Folder already exists"))return;throw n}}};Kr.FolderRepairService=gd;Kr.FolderRepairService=gd=Ix([(0,ig.injectable)(),Rx(0,(0,ig.inject)(Nx.DI_TOKENS.IVaultAdapter)),Dx("design:paramtypes",[Object])],gd)});var vd=_(Yr=>{"use strict";var kx=Yr&&Yr.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},jx=Yr&&Yr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Mx=Yr&&Yr.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.LabelToAliasService=void 0;var sg=Ze(),Lx=it(),_d=class{static{o(this,"LabelToAliasService")}constructor(e){this.vault=e}async copyLabelToAliases(e){let t=await this.vault.read(e),n=this.extractLabel(t);if(!n)throw new Error("No exo__Asset_label found in file");let i=this.addLabelToAliases(t,n);await this.vault.modify(e,i)}extractLabel(e){let t=/^---\r?\n([\s\S]*?)\r?\n---/,n=e.match(t);if(!n)return null;let s=n[1].match(/exo__Asset_label:\s*["']?([^"'\r\n]+)["']?/);return s&&s[1]?s[1].trim():null}addLabelToAliases(e,t){let n=/^---\r?\n([\s\S]*?)\r?\n---/,i=e.match(n),s=e.includes(`\r
`)?`\r
`:`
`;if(!i)return`---${s}aliases:${s}  - "${t}"${s}---${s}${e}`;let c=i[1];return c.includes("aliases:")?c.match(/(aliases:\r?\n(?: {2}- .*\r?\n)*)/)&&(c=c.replace(/(aliases:\r?\n(?: {2}- .*\r?\n)*)/,`$1  - "${t}"${s}`)):c+=`${s}aliases:${s}  - "${t}"`,e.replace(n,`---${s}${c}${s}---`)}};Yr.LabelToAliasService=_d;Yr.LabelToAliasService=_d=kx([(0,sg.injectable)(),Mx(0,(0,sg.inject)(Lx.DI_TOKENS.IVaultAdapter)),jx("design:paramtypes",[Object])],_d)});var bd=_(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.LoggingService=void 0;var nu=class{static{o(this,"LoggingService")}static setVerbose(e){this.isVerbose=e}static debug(e,t){this.isVerbose&&console.debug(`[Exocortex] ${e}`,t??"")}static info(e,t){console.log(`[Exocortex] ${e}`,t??"")}static warn(e,t){console.warn(`[Exocortex] ${e}`,t??"")}static error(e,t){console.error(`[Exocortex ERROR] ${e}`,t??""),t?.stack&&console.error(t.stack)}};iu.LoggingService=nu;nu.isVerbose=!1});var Ed=_(Qr=>{"use strict";var Vx=Qr&&Qr.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},qx=Qr&&Qr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},ag=Qr&&Qr.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(Qr,"__esModule",{value:!0});Qr.PropertyCleanupService=void 0;var Sd=Ze(),og=it(),wd=class{static{o(this,"PropertyCleanupService")}constructor(e,t){this.vault=e,this.logger=t,this.logger.debug("PropertyCleanupService initialized")}async cleanEmptyProperties(e){this.logger.debug("Cleaning empty properties",{path:e.path});let t=await this.vault.read(e),n=this.removeEmptyPropertiesFromContent(t);await this.vault.modify(e,n),this.logger.info("Empty properties cleaned",{path:e.path})}removeEmptyPropertiesFromContent(e){let t=/^---\n([\s\S]*?)\n---/,n=e.match(t);if(!n)return e;let s=n[1].split(`
`),a=[],c=0;for(;c<s.length;){let f=s[c],l=f.trim();if(l===""){a.push(f),c++;continue}let h=l.match(/^([^:]+):\s*(.*)$/);if(h){let p=h[2];if(p===""&&c+1<s.length&&s[c+1].match(/^\s+- /)){let b=[],y=c+1;for(;y<s.length&&s[y].match(/^\s+- /);)b.push(s[y]),y++;if(b.every(A=>{let C=A.replace(/^\s+- /,"").trim();return this.isEmptyValue(C)})){c=y;continue}else{a.push(f);for(let A=c+1;A<y;A++)a.push(s[A]);c=y;continue}}if(this.isEmptyValue(p)){c++;continue}a.push(f),c++}else l.match(/^\s*- /)||a.push(f),c++}let u=a.join(`
`);return e.replace(t,`---
${u}
---`)}isEmptyValue(e){let t=e.trim();return t===""||t==="null"||t==="undefined"||t==="[]"||t==="{}"||t==='""'||t==="''"}};Qr.PropertyCleanupService=wd;Qr.PropertyCleanupService=wd=Vx([(0,Sd.injectable)(),ag(0,(0,Sd.inject)(og.DI_TOKENS.IVaultAdapter)),ag(1,(0,Sd.inject)(og.DI_TOKENS.ILogger)),qx("design:paramtypes",[Object,Object])],wd)});var xd=_(Jr=>{"use strict";var Ux=Jr&&Jr.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Bx=Jr&&Jr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},$x=Jr&&Jr.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(Jr,"__esModule",{value:!0});Jr.RenameToUidService=void 0;var cg=Ze(),Wx=it(),Td=class{static{o(this,"RenameToUidService")}constructor(e){this.vault=e}async renameToUid(e,t){let n=t.exo__Asset_uid;if(!n)throw new Error("Asset has no exo__Asset_uid property");let i=e.basename,s=n;if(i===s)throw new Error("File is already named according to UID");let a=t.exo__Asset_label;if(!a||a.trim()===""){let l=this.isAssetArchived(t);await this.updateLabel(e,i,l)}let u=e.parent?.path||"",f=u?`${u}/${s}.md`:`${s}.md`;await this.vault.updateLinks(e.path,f,i),await this.vault.rename(e,f)}async updateLabel(e,t,n){await this.vault.process(e,i=>{let s=/^---\n([\s\S]*?)\n---/,a=i.match(s);if(!a)return i;let c=a[1],u=n?`${c}
exo__Asset_label: ${t}`:`${c}
exo__Asset_label: ${t}
aliases:
  - ${t}`;return i.replace(s,`---
${u}
---`)})}isAssetArchived(e){if(e?.exo__Asset_isArchived===!0)return!0;let t=e?.archived;if(t==null)return!1;if(typeof t=="boolean")return t;if(typeof t=="number")return t!==0;if(typeof t=="string"){let n=t.toLowerCase().trim();return n==="true"||n==="yes"||n==="1"}return!1}};Jr.RenameToUidService=Td;Jr.RenameToUidService=Td=Ux([(0,cg.injectable)(),$x(0,(0,cg.inject)(Wx.DI_TOKENS.IVaultAdapter)),Bx("design:paramtypes",[Object])],Td)});var Od=_(Xr=>{"use strict";var Gx=Xr&&Xr.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Hx=Xr&&Xr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},zx=Xr&&Xr.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.SupervisionCreationService=void 0;var ug=Ze(),Kx=Lr(),Yx=dr(),Qx=it(),Ad=class{static{o(this,"SupervisionCreationService")}constructor(e){this.vault=e}async createSupervision(e){let t=(0,Kx.v4)(),n=`${t}.md`,i=this.generateFrontmatter(t),s=this.generateBody(e),a=this.buildFileContent(i,s),c=`01 Inbox/${n}`;return await this.vault.create(c,a)}generateFrontmatter(e){let t=new Date,n=Yx.DateFormatter.toLocalTimestamp(t);return{exo__Asset_isDefinedBy:'"[[!kitelev]]"',exo__Asset_uid:e,exo__Asset_createdAt:n,exo__Instance_class:['"[[ztlk__FleetingNote]]"'],ztlk__FleetingNote_type:'"[[CBT-Diary Record]]"'}}generateBody(e){return[{label:"\u0421\u0438\u0442\u0443\u0430\u0446\u0438\u044F/\u0442\u0440\u0438\u0433\u0433\u0435\u0440",value:e.situation},{label:"\u042D\u043C\u043E\u0446\u0438\u0438",value:e.emotions},{label:"\u041C\u044B\u0441\u043B\u0438",value:e.thoughts},{label:"\u041F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u0435",value:e.behavior},{label:"\u041A\u0440\u0430\u0442\u043A\u043E\u0441\u0440\u043E\u0447\u043D\u044B\u0435 \u043F\u043E\u0441\u043B\u0435\u0434\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F",value:e.shortTermConsequences},{label:"\u0414\u043E\u043B\u0433\u043E\u0441\u0440\u043E\u0447\u043D\u044B\u0435 \u043F\u043E\u0441\u043B\u0435\u0434\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F",value:e.longTermConsequences}].map(n=>`- ${n.label}: ${n.value}`).join(`
`)}buildFileContent(e,t){return`---
${Object.entries(e).map(([i,s])=>{if(Array.isArray(s)){let a=s.map(c=>`  - ${c}`).join(`
`);return`${i}:
${a}`}return`${i}: ${s}`}).join(`
`)}
---

${t}
`}};Xr.SupervisionCreationService=Ad;Xr.SupervisionCreationService=Ad=Gx([(0,ug.injectable)(),zx(0,(0,ug.inject)(Qx.DI_TOKENS.IVaultAdapter)),Hx("design:paramtypes",[Object])],Ad)});var Fd=_(Zr=>{"use strict";var Jx=Zr&&Zr.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},Xx=Zr&&Zr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Zx=Zr&&Zr.__param||function(r,e){return function(t,n){e(t,n,r)}},Cd;Object.defineProperty(Zr,"__esModule",{value:!0});Zr.FleetingNoteCreationService=void 0;var lg=Ze(),e5=Lr(),t5=dr(),r5=Vr(),n5=it(),su=Cd=class{static{o(this,"FleetingNoteCreationService")}constructor(e){this.vault=e}async createFleetingNote(e){let t=(0,e5.v4)(),n=`${t}.md`,i=this.generateFrontmatter(t,e),s=r5.MetadataHelpers.buildFileContent(i),a=`${Cd.INBOX_FOLDER}/${n}`;return await this.vault.create(a,s)}generateFrontmatter(e,t){let n=new Date,i=t5.DateFormatter.toLocalTimestamp(n),s=t.trim();return{exo__Asset_isDefinedBy:'"[[!kitelev]]"',exo__Asset_uid:e,exo__Asset_createdAt:i,exo__Instance_class:['"[[ztlk__FleetingNote]]"'],exo__Asset_label:s,aliases:[s]}}};Zr.FleetingNoteCreationService=su;su.INBOX_FOLDER="01 Inbox";Zr.FleetingNoteCreationService=su=Cd=Jx([(0,lg.injectable)(),Zx(0,(0,lg.inject)(n5.DI_TOKENS.IVaultAdapter)),Xx("design:paramtypes",[Object])],su)});var Id=_(ts=>{"use strict";var i5=ts&&ts.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(ts,"__esModule",{value:!0});ts.DynamicFrontmatterGenerator=void 0;var s5=Ze(),a5=Lr(),za=dr(),Pd=class{static{o(this,"DynamicFrontmatterGenerator")}generate(e,t,n,i){let s={},a=new Date;i?.isDefinedBy&&(s.exo__Asset_isDefinedBy=this.ensureQuoted(i.isDefinedBy)),s.exo__Asset_uid=i?.uid||(0,a5.v4)(),s.exo__Asset_createdAt=i?.createdAt||za.DateFormatter.toLocalTimestamp(a),s.exo__Instance_class=[this.formatWikilink(e)];let c=new Map;for(let f of n)c.set(f.name,f.type);for(let[f,l]of Object.entries(t)){if(l==null||f==="exo__Asset_uid"||f==="exo__Asset_createdAt"||f==="exo__Instance_class"||f==="exo__Asset_isDefinedBy")continue;let h=c.get(f);s[f]=this.formatValue(l,h)}let u=t.exo__Asset_label;if(u&&typeof u=="string"&&u.trim()!==""){let f=u.trim();s.exo__Asset_label=f,s.aliases=[f]}return s}formatValue(e,t){if(e==null)return null;if(!t)return this.formatInferredValue(e);switch(t){case"text":return this.formatText(e);case"wikilink":return this.formatWikilink(e);case"status-select":case"size-select":return this.formatWikilink(e);case"number":return this.formatNumber(e);case"boolean":return this.formatBoolean(e);case"timestamp":return this.formatTimestamp(e);default:return this.formatText(e)}}formatText(e){return typeof e=="string"?e:String(e)}formatWikilink(e){let t=String(e);return t.startsWith('"[[')&&t.endsWith(']]"')?t:t.startsWith("[[")&&t.endsWith("]]")?`"${t}"`:`"[[${t}]]"`}formatNumber(e){if(typeof e=="number")return e;let t=Number(e);return isNaN(t)?0:t}formatBoolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){let t=e.toLowerCase().trim();return t==="true"||t==="yes"||t==="1"}return typeof e=="number"?e!==0:!!e}formatTimestamp(e){if(e instanceof Date)return za.DateFormatter.toLocalTimestamp(e);if(typeof e=="string"){if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}$/.test(e))return e;if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(e))return e.replace("Z","");let t=new Date(e);return isNaN(t.getTime())?e:za.DateFormatter.toLocalTimestamp(t)}if(typeof e=="number"){let t=new Date(e);if(!isNaN(t.getTime()))return za.DateFormatter.toLocalTimestamp(t)}return String(e)}formatInferredValue(e){return typeof e=="boolean"||typeof e=="number"?e:e instanceof Date?za.DateFormatter.toLocalTimestamp(e):typeof e=="string"?e.startsWith("[[")||e.startsWith('"[[')?this.formatWikilink(e):e:String(e)}ensureQuoted(e){return!e||e==='""'?'""':e.startsWith('"')&&e.endsWith('"')?e:`"${e}"`}generateYAML(e,t,n,i){let s=this.generate(e,t,n,i);return this.toYAML(s)}toYAML(e){return`---
${Object.entries(e).map(([n,i])=>{if(Array.isArray(i)){let s=i.map(a=>`  - ${a}`).join(`
`);return`${n}:
${s}`}return`${n}: ${i}`}).join(`
`)}
---`}};ts.DynamicFrontmatterGenerator=Pd;ts.DynamicFrontmatterGenerator=Pd=i5([(0,s5.injectable)()],Pd)});var Rd=_(en=>{"use strict";var o5=en&&en.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},c5=en&&en.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},u5=en&&en.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(en,"__esModule",{value:!0});en.PlanningService=void 0;var fg=Ze(),l5=Is(),f5=dr(),h5=it(),Dd=class{static{o(this,"PlanningService")}constructor(e){this.vault=e,this.frontmatterService=new l5.FrontmatterService}async planOnToday(e){let t=this.vault.getAbstractFileByPath(e);if(!t||!this.isFile(t))throw new Error(`File not found: ${e}`);let n=await this.vault.read(t),i=f5.DateFormatter.getTodayStartTimestamp(),s=this.frontmatterService.updateProperty(n,"ems__Effort_plannedStartTimestamp",i);await this.vault.modify(t,s)}isFile(e){return"basename"in e}};en.PlanningService=Dd;en.PlanningService=Dd=o5([(0,fg.injectable)(),u5(0,(0,fg.inject)(h5.DI_TOKENS.IVaultAdapter)),c5("design:paramtypes",[Object])],Dd)});var kd=_(tn=>{"use strict";var d5=tn&&tn.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},p5=tn&&tn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},m5=tn&&tn.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(tn,"__esModule",{value:!0});tn.AssetConversionService=void 0;var hg=Ze(),dg=Lt(),g5=Is(),au=bd(),y5=it(),Nd=class{static{o(this,"AssetConversionService")}constructor(e){this.vault=e,this.frontmatterService=new g5.FrontmatterService}async convertTaskToProject(e){try{let t=await this.vault.read(e),n=this.removeInstanceClassProperty(t);return n=this.frontmatterService.updateProperty(n,"exo__Instance_class",`["[[${dg.AssetClass.PROJECT}]]"]`),await this.vault.modify(e,n),au.LoggingService.info(`Converted Task to Project: ${e.basename} (${e.path})`),e}catch(t){let n=`Failed to convert Task to Project: ${e.path}`;throw au.LoggingService.error(n,t instanceof Error?t:void 0),new Error(n)}}async convertProjectToTask(e){try{let t=await this.vault.read(e),n=this.removeInstanceClassProperty(t);return n=this.frontmatterService.updateProperty(n,"exo__Instance_class",`["[[${dg.AssetClass.TASK}]]"]`),await this.vault.modify(e,n),au.LoggingService.info(`Converted Project to Task: ${e.basename} (${e.path})`),e}catch(t){let n=`Failed to convert Project to Task: ${e.path}`;throw au.LoggingService.error(n,t instanceof Error?t:void 0),new Error(n)}}removeInstanceClassProperty(e){let t=this.frontmatterService.parse(e);if(!t.exists)return e;let n=/^exo__Instance_class:.*$(\n  -.*$)*/gm,i=t.content.replace(n,"").replace(/\n\n+/g,`
`).trim();return e.replace(/^---\n[\s\S]*?\n---/,`---
${i}
---`)}};tn.AssetConversionService=Nd;tn.AssetConversionService=Nd=d5([(0,hg.injectable)(),m5(0,(0,hg.inject)(y5.DI_TOKENS.IVaultAdapter)),p5("design:paramtypes",[Object])],Nd)});var Md=_(rn=>{"use strict";var _5=rn&&rn.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},v5=rn&&rn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},b5=rn&&rn.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(rn,"__esModule",{value:!0});rn.SessionEventService=void 0;var pg=Ze(),S5=Lr(),mg=Lt(),w5=dr(),E5=Vr(),T5=it(),jd=class{static{o(this,"SessionEventService")}constructor(e){this.vault=e,this.folderPathCache=null,this.defaultOntologyAsset=null}setDefaultOntologyAsset(e){this.defaultOntologyAsset=e,this.folderPathCache=null}async createSessionStartEvent(e){return this.createSessionEvent(e,mg.AssetClass.SESSION_START_EVENT)}async createSessionEndEvent(e){return this.createSessionEvent(e,mg.AssetClass.SESSION_END_EVENT)}async getOntologyAssetFolder(){if(this.folderPathCache!==null)return this.folderPathCache;if(!this.defaultOntologyAsset){let n=this.vault.getDefaultNewFileParent();return this.folderPathCache=n?.path||"",this.folderPathCache}let e=this.vault.getAllFiles();for(let n of e)if(n.basename===this.defaultOntologyAsset){let i=n.parent?.path||"";return this.folderPathCache=i,this.folderPathCache}let t=this.vault.getDefaultNewFileParent();return this.folderPathCache=t?.path||"",this.folderPathCache}async createSessionEvent(e,t){let n=(0,S5.v4)(),i=w5.DateFormatter.toLocalTimestamp(new Date),s=this.defaultOntologyAsset?`"[[${this.defaultOntologyAsset}]]"`:'"[[!kitelev]]"',a={exo__Asset_uid:n,exo__Asset_createdAt:i,exo__Asset_isDefinedBy:s,exo__Instance_class:[`"[[${t}]]"`],ems__SessionEvent_timestamp:i,ems__Session_area:`"[[${e}]]"`},c=E5.MetadataHelpers.buildFileContent(a),u=await this.getOntologyAssetFolder();u&&!await this.vault.exists(u)&&await this.vault.createFolder(u);let f=u?`${u}/${n}.md`:`${n}.md`;return await this.vault.create(f,c)}};rn.SessionEventService=jd;rn.SessionEventService=jd=_5([(0,pg.injectable)(),b5(0,(0,pg.inject)(T5.DI_TOKENS.IVaultAdapter)),v5("design:paramtypes",[Object])],jd)});var Vd=_(nn=>{"use strict";var x5=nn&&nn.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},A5=nn&&nn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},O5=nn&&nn.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(nn,"__esModule",{value:!0});nn.URIConstructionService=void 0;var gg=Ze(),C5=it(),Ld=class{static{o(this,"URIConstructionService")}constructor(e){this.fileSystem=e,this.defaultOntologyURL="https://exocortex.my/default/",this.strictValidation=!0}configure(e){e?.defaultOntologyURL&&(this.defaultOntologyURL=e.defaultOntologyURL),e?.strictValidation!==void 0&&(this.strictValidation=e.strictValidation)}async constructAssetURI(e){let t=this.extractUID(e);if(!t){if(this.strictValidation)throw new Error(`Asset missing exo__Asset_uid: ${e.path}`);return console.warn(`Asset ${e.path} missing UID, using filename fallback`),this.constructFallbackURI(e)}let n=await this.resolveOntologyURL(e);if(!this.validateOntologyURL(n))throw new Error(`Invalid ontology URL: ${n}`);return`${n.endsWith("/")?n:`${n}/`}${t}`}validateOntologyURL(e){if(!e)return!1;try{let t=new URL(e);return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}}async resolveOntologyURL(e){let t=e.frontmatter?.exo__Asset_isDefinedBy;if(!t)return this.defaultOntologyURL;let n=this.extractWikiLink(t),i=n,s=await this.fileSystem.fileExists(n);return!s&&!n.endsWith(".md")&&(i=`${n}.md`,s=await this.fileSystem.fileExists(i)),s?(await this.fileSystem.getFileMetadata(i))?.exo__Ontology_url||this.defaultOntologyURL:(console.warn(`Ontology file not found: ${n}, using default`),this.defaultOntologyURL)}extractUID(e){return e.frontmatter?.exo__Asset_uid||null}extractWikiLink(e){return e.replace(/^\[\[|\]\]$/g,"")}constructFallbackURI(e){let t=e.path.split("/").pop()?.replace(".md","")||"unknown";return`${this.defaultOntologyURL}${t}`}};nn.URIConstructionService=Ld;nn.URIConstructionService=Ld=x5([(0,gg.injectable)(),O5(0,(0,gg.inject)(C5.DI_TOKENS.IFileSystemAdapter)),A5("design:paramtypes",[Object])],Ld)});var yg=_(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.EffortSortingHelpers=void 0;var qd=class r{static{o(this,"EffortSortingHelpers")}static getTimeFromTimestamp(e){if(!e)return"00:00:00";let t=new Date(e);if(isNaN(t.getTime()))return"00:00:00";let n=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${n}:${i}:${s}`}static sortByStartTime(e,t){let n=r.getTimeFromTimestamp(e.startTimestamp),i=r.getTimeFromTimestamp(t.startTimestamp),s=n==="00:00:00",a=i==="00:00:00";return s&&!a?1:!s&&a?-1:n.localeCompare(i)}static sortByPriority(e,t){if(e.isTrashed!==t.isTrashed)return e.isTrashed?1:-1;if(e.isDone!==t.isDone)return e.isDone?1:-1;let n=typeof e.metadata.ems__Effort_votes=="number"?e.metadata.ems__Effort_votes:0,i=typeof t.metadata.ems__Effort_votes=="number"?t.metadata.ems__Effort_votes:0;return n!==i?i-n:e.startTime&&t.startTime?e.startTime.localeCompare(t.startTime):e.startTime?-1:t.startTime?1:0}};ou.EffortSortingHelpers=qd});var Bd=_(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.NTriplesSerializer=void 0;var Ud=class{static{o(this,"NTriplesSerializer")}serialize(e,t={}){let n=t.newline??`
`;return e.length===0?"":e.map(i=>i.toString()).join(n)+n}serializeChunk(e,t){return e.length===0?"":e.map(n=>n.toString()).join(t)+t}};cu.NTriplesSerializer=Ud});var _g=_(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.TurtleSerializer=void 0;var Ds=bn(),F5=Bd(),P5={rdf:Ds.Namespace.RDF.iri.value,rdfs:Ds.Namespace.RDFS.iri.value,owl:Ds.Namespace.OWL.iri.value,xsd:Ds.Namespace.XSD.iri.value,exo:Ds.Namespace.EXO.iri.value,ems:Ds.Namespace.EMS.iri.value},$d=class{static{o(this,"TurtleSerializer")}constructor(){this.nTriplesSerializer=new F5.NTriplesSerializer}serialize(e,t={}){let n=t.newline??`
`,i=this.composePrefixes(t),s=this.serializePrefixes(i,n),a=this.nTriplesSerializer.serialize(e,{newline:n}).trimEnd();return s?a?`${s}${n}${n}${a}${n}`:`${s}${n}`:a?`${a}${n}`:""}serializePrefixes(e,t){let n=Object.entries(e);return n.length===0?"":n.map(([i,s])=>`@prefix ${i}: <${s}> .`).join(t)}composePrefixes(e){return e.includeDefaultPrefixes??!0?{...P5,...e.prefixes??{}}:{...e.prefixes??{}}}serializeTriplesOnly(e,t){return this.nTriplesSerializer.serializeChunk(e,t).trimEnd()}};uu.TurtleSerializer=$d});var Sg=_(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.JSONLDSerializer=void 0;var vg=mt(),bg=Cr(),I5=Mt(),Rs=bn(),D5={rdf:Rs.Namespace.RDF.iri.value,rdfs:Rs.Namespace.RDFS.iri.value,owl:Rs.Namespace.OWL.iri.value,xsd:Rs.Namespace.XSD.iri.value,exo:Rs.Namespace.EXO.iri.value,ems:Rs.Namespace.EMS.iri.value},Wd=class{static{o(this,"JSONLDSerializer")}toDocument(e,t={}){let n={...D5,...t.context??{}},i=new Map;for(let s of e){let a=this.subjectToId(s.subject),c=this.compactIri(s.predicate.value,n),u=this.objectToJSONLD(s.object,n),f=i.get(a)??{"@id":a},l=f[c];l===void 0?f[c]=u:Array.isArray(l)?l.push(u):f[c]=[l,u],i.set(a,f)}return{"@context":n,"@graph":Array.from(i.values())}}serialize(e,t={}){let n=this.toDocument(e,t),i=t.pretty?t.indent??2:void 0;return JSON.stringify(n,null,i)}subjectToId(e){return e instanceof vg.IRI?e.value:e instanceof bg.BlankNode?`_:${e.id}`:String(e)}compactIri(e,t){for(let[n,i]of Object.entries(t))if(e.startsWith(i)){let s=e.slice(i.length);if(s.length>0)return`${n}:${s}`}return e}objectToJSONLD(e,t){if(e instanceof vg.IRI)return{"@id":e.value};if(e instanceof bg.BlankNode)return{"@id":`_:${e.id}`};if(e instanceof I5.Literal){let n={"@value":e.value};return e.datatype?n["@type"]=this.compactIri(e.datatype.value,t):e.language&&(n["@language"]=e.language),n}return e}};lu.JSONLDSerializer=Wd});var zd=_(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.NTriplesParser=void 0;var R5=Ui(),wg=mt(),Gd=Mt(),N5=Cr(),Ns=bn(),k5={rdf:Ns.Namespace.RDF.iri.value,rdfs:Ns.Namespace.RDFS.iri.value,owl:Ns.Namespace.OWL.iri.value,xsd:Ns.Namespace.XSD.iri.value,exo:Ns.Namespace.EXO.iri.value,ems:Ns.Namespace.EMS.iri.value},Hd=class{static{o(this,"NTriplesParser")}parse(e,t={}){let n={prefixes:{...k5,...t.prefixes??{}},strict:t.strict??!1},i=[];return e.split(/\r?\n/).forEach((a,c)=>{let u=a.trim();!u||u.startsWith("#")||i.push(this.parseLine(u,c+1,n))}),i}parseLine(e,t,n){if(!e.endsWith("."))throw new Error(`Invalid RDF statement at line ${t}: missing '.' terminator`);let s=e.slice(0,-1).trim(),a=this.parseSubject(s,t,n);s=a.rest.trim();let c=this.parsePredicate(s,t,n);s=c.rest.trim();let u=this.parseObject(s,t,n);if(s=u.rest.trim(),s.length>0)throw new Error(`Unexpected tokens after object at line ${t}`);return new R5.Triple(a.node,c.node,u.node)}parseSubject(e,t,n){return e.startsWith("<")?this.consumeIRI(e,t,n):e.startsWith("_:")?this.consumeBlankNode(e,t):this.consumePrefixedName(e,t,n)}parsePredicate(e,t,n){return e.startsWith("<")?this.consumeIRI(e,t,n):this.consumePrefixedName(e,t,n)}parseObject(e,t,n){return e.startsWith("<")?this.consumeIRI(e,t,n):e.startsWith("_:")?this.consumeBlankNode(e,t):e.startsWith('"')?this.consumeLiteral(e,t,n):this.consumePrefixedName(e,t,n)}consumePrefixedName(e,t,n){let i=e.match(/^([a-zA-Z_][\w-]*):([^\s]+)(?:\s+(.*))?$/);if(!i)throw new Error(`Invalid token at line ${t}: ${e}`);let[,s,a,c]=i,u=n.prefixes[s];if(!u)throw new Error(`Unknown prefix "${s}" at line ${t}`);return{node:new wg.IRI(`${u}${a}`),rest:(c??"").trimStart()}}consumeIRI(e,t,n){let i=this.findClosingBracket(e,"<",">");if(i===-1)throw new Error(`Invalid IRI at line ${t}`);let s=e.slice(1,i),a=new wg.IRI(s),c=e.slice(i+1).trimStart();return{node:a,rest:c}}consumeBlankNode(e,t){let n=e.match(/^_:(\w+)(?:\s+(.*))?$/);if(!n)throw new Error(`Invalid blank node identifier at line ${t}`);let[,i,s]=n;return{node:new N5.BlankNode(i),rest:(s??"").trimStart()}}consumeLiteral(e,t,n){let{value:i,rest:s}=this.consumeQuotedString(e,t),a=s.trimStart();if(a.startsWith("^^")){a=a.slice(2).trimStart();let c=a.startsWith("<")?this.consumeIRI(a,t,n):this.consumePrefixedName(a,t,n);return{node:new Gd.Literal(i,c.node),rest:c.rest}}if(a.startsWith("@")){let c=a.match(/^@([a-zA-Z-]+)(?:\s+(.*))?$/);if(!c)throw new Error(`Invalid language tag at line ${t}`);let[,u,f]=c;return{node:new Gd.Literal(i,void 0,u),rest:(f??"").trimStart()}}return{node:new Gd.Literal(i),rest:a}}consumeQuotedString(e,t){if(!e.startsWith('"'))throw new Error(`Expected quoted string at line ${t}`);let n="";for(let i=1;i<e.length;i++){let s=e[i];if(s==="\\"){if(i+1>=e.length)throw new Error(`Invalid escape sequence at line ${t}`);let a=e[i+1];switch(a){case"t":n+="	",i+=1;break;case"b":n+="\b",i+=1;break;case"n":n+=`
`,i+=1;break;case"r":n+="\r",i+=1;break;case"f":n+="\f",i+=1;break;case'"':n+='"',i+=1;break;case"\\":n+="\\",i+=1;break;case"u":{let c=e.slice(i+2,i+6);if(c.length!==4||!/^[0-9a-fA-F]{4}$/.test(c))throw new Error(`Invalid \\u escape at line ${t}`);n+=String.fromCharCode(parseInt(c,16)),i+=5;break}case"U":{let c=e.slice(i+2,i+10);if(c.length!==8||!/^[0-9a-fA-F]{8}$/.test(c))throw new Error(`Invalid \\U escape at line ${t}`);n+=String.fromCodePoint(parseInt(c,16)),i+=9;break}default:throw new Error(`Unknown escape sequence \\${a} at line ${t}`)}continue}if(s==='"'){let a=e.slice(i+1);return{value:n,rest:a}}n+=s}throw new Error(`Unterminated string literal at line ${t}`)}findClosingBracket(e,t,n){let i=0;for(let s=0;s<e.length;s++){let a=e[s];if(a===t){i++;continue}if(a===n&&(i--,i===0))return s}return-1}};fu.NTriplesParser=Hd});var Eg=_(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.TurtleParser=void 0;var ks=bn(),j5=zd(),M5={rdf:ks.Namespace.RDF.iri.value,rdfs:ks.Namespace.RDFS.iri.value,owl:ks.Namespace.OWL.iri.value,xsd:ks.Namespace.XSD.iri.value,exo:ks.Namespace.EXO.iri.value,ems:ks.Namespace.EMS.iri.value},L5=/^@prefix\s+([a-zA-Z_][\w-]*):\s*<([^>]+)>\s*\.$/,Kd=class{static{o(this,"TurtleParser")}constructor(){this.nTriplesParser=new j5.NTriplesParser}parse(e,t={}){let n={...M5,...t.prefixes??{}},i=this.collectStatements(e),s=[];return i.forEach(({statement:a,lineNumber:c})=>{if(this.isPrefixStatement(a)){let f=a.match(L5);if(!f)throw new Error(`Invalid prefix declaration at line ${c}`);let[,l,h]=f;n[l]=h;return}if(a.includes(";")||a.includes(","))throw new Error(`Complex Turtle statements with ';' or ',' are not supported (line ${c})`);let u=this.normalizeShortcuts(a);s.push(this.nTriplesParser.parseLine(u,c,{prefixes:n,strict:!1}))}),s}collectStatements(e){let t=e.split(/\r?\n/),n=[],i="",s=0;if(t.forEach((a,c)=>{let u=a.trim();!u||u.startsWith("#")||(i||(s=c+1),i=i?`${i} ${u}`:u,u.endsWith(".")&&(n.push({statement:i,lineNumber:s}),i=""))}),i)throw new Error(`Unterminated Turtle statement near line ${s}`);return n}isPrefixStatement(e){return e.startsWith("@prefix")}normalizeShortcuts(e){return e.includes(" a ")?e.replace(/\sa\s/g," rdf:type "):e}};hu.TurtleParser=Kd});var Tg=_(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.RDFSerializer=void 0;var js=Ui(),rs=mt(),Ms=Mt(),Yd=Cr(),wn=bn(),V5=_g(),q5=Bd(),U5=Sg(),B5=Eg(),$5=zd(),W5=1024,G5=`
`,H5={rdf:wn.Namespace.RDF.iri.value,rdfs:wn.Namespace.RDFS.iri.value,owl:wn.Namespace.OWL.iri.value,xsd:wn.Namespace.XSD.iri.value,exo:wn.Namespace.EXO.iri.value,ems:wn.Namespace.EMS.iri.value},Qd=class{static{o(this,"RDFSerializer")}constructor(e){this.store=e,this.turtleSerializer=new V5.TurtleSerializer,this.nTriplesSerializer=new q5.NTriplesSerializer,this.jsonldSerializer=new U5.JSONLDSerializer,this.turtleParser=new B5.TurtleParser,this.nTriplesParser=new $5.NTriplesParser}async serialize(e,t={}){let n=await this.store.match();return this.serializeTriples(n,e,t)}serializeTriples(e,t,n={}){switch(t){case"turtle":return this.turtleSerializer.serialize(e,{prefixes:n.prefixes,includeDefaultPrefixes:n.includeDefaultPrefixes,newline:n.newline});case"n-triples":return this.nTriplesSerializer.serialize(e,{newline:n.newline});case"json-ld":return this.jsonldSerializer.serialize(e,{context:n.prefixes,pretty:n.pretty,indent:n.indent});default:throw new Error(`Unsupported serialization format: ${t}`)}}stream(e,t={}){let n=t.newline??G5,i=t.batchSize??W5,s=t.includeDefaultPrefixes,a=t.prefixes,c=this,u=!1,f=[],l=[],h=0,p=o(async()=>{if(!u){if(l=await c.store.match(),e==="json-ld"){let b=c.jsonldSerializer.toDocument(l,{context:a,pretty:!1});f.push(...c.buildJsonLdChunks(b))}else if(e==="turtle"){let b=c.turtleSerializer.serializePrefixes(c.composePrefixes(a,s),n);b&&f.push(`${b}${n}${n}`)}u=!0}},"ensureInitialized");return{async next(){if(await p(),f.length>0)return{value:f.shift(),done:!1};if(e==="json-ld")return{value:void 0,done:!0};if(h>=l.length)return{value:void 0,done:!0};let b=l.slice(h,h+i);h+=b.length;let y="";if(e==="turtle"){let x=c.turtleSerializer.serializeTriplesOnly(b,n);x&&(y=`${x}${n}`)}else e==="n-triples"&&(y=c.nTriplesSerializer.serializeChunk(b,n));return y?{value:y,done:!1}:this.next()},async return(){return f=[],l=[],h=0,{value:void 0,done:!0}},[Symbol.asyncIterator](){return this}}}async load(e,t,n={}){let i=this.parse(e,t,n);return n.mode!=="append"&&await this.store.clear(),await this.store.addAll(i),i.length}parse(e,t,n={}){switch(t){case"turtle":return this.turtleParser.parse(e,this.buildTurtleParseOptions(n));case"n-triples":return this.nTriplesParser.parse(e,this.buildNTriplesParseOptions(n));case"json-ld":return this.parseJsonLd(e,n);default:throw new Error(`Unsupported serialization format: ${t}`)}}buildTurtleParseOptions(e){return{prefixes:this.composePrefixes(e.prefixes,!0),strict:e.strict}}buildNTriplesParseOptions(e){return{prefixes:this.composePrefixes(e.prefixes,!0),strict:e.strict}}composePrefixes(e,t){return t??!0?{...H5,...e??{}}:{...e??{}}}parseJsonLd(e,t){let n;try{n=JSON.parse(e)}catch(f){throw new Error(`Invalid JSON-LD document: ${f.message}`)}let i=this.composePrefixes(t.prefixes,!0),s=this.extractContext(n),a={...i,...s},c=this.extractGraph(n),u=[];return c.forEach((f,l)=>{if(!f||typeof f!="object"||Array.isArray(f))throw new Error(`Invalid JSON-LD node at index ${l}`);let h=this.parseSubjectFromNode(f,a,l),p=Object.entries(f);for(let[m,b]of p){if(m==="@id"||m==="@context")continue;if(m==="@type"){this.collectTypeTriples(h,b,u,a);continue}let y=this.expandTerm(m,a),x=new rs.IRI(y);this.collectTriplesForValue(h,x,b,u,a)}}),u}extractContext(e){if(!e||typeof e!="object"||Array.isArray(e))return{};let t=e["@context"];if(!t||typeof t!="object"||Array.isArray(t))return{};let n={};return Object.entries(t).forEach(([i,s])=>{typeof s=="string"&&(n[i]=s)}),n}extractGraph(e){if(Array.isArray(e))return e;if(!e||typeof e!="object")return[];let t=e["@graph"];return Array.isArray(t)?t:[e]}parseSubjectFromNode(e,t,n){let i=e["@id"];if(typeof i=="string"){if(i.startsWith("_:"))return new Yd.BlankNode(i.slice(2));if(this.isAbsoluteIri(i))return new rs.IRI(i);let s=this.expandTerm(i,t);return new rs.IRI(s)}return new Yd.BlankNode(`jsonld_${n}`)}collectTypeTriples(e,t,n,i){let s=wn.Namespace.RDF.term("type");(Array.isArray(t)?t:[t]).forEach(c=>{if(typeof c!="string")throw new Error("Invalid @type value in JSON-LD node");let u=this.expandTerm(c,i);n.push(new js.Triple(e,s,new rs.IRI(u)))})}collectTriplesForValue(e,t,n,i,s){if(n!=null){if(Array.isArray(n)){n.forEach(a=>this.collectTriplesForValue(e,t,a,i,s));return}if(typeof n=="object"){let a=n;if(typeof a["@id"]=="string"){let c=this.parseIdNode(a["@id"],s);i.push(new js.Triple(e,t,c));return}if(a["@value"]!==void 0){let c=this.parseLiteralObject(a,s);i.push(new js.Triple(e,t,c));return}}if(typeof n=="string"){i.push(new js.Triple(e,t,new Ms.Literal(n)));return}if(typeof n=="number"){let a=Number.isInteger(n)?wn.Namespace.XSD.term("integer"):wn.Namespace.XSD.term("decimal");i.push(new js.Triple(e,t,new Ms.Literal(n.toString(),a)));return}if(typeof n=="boolean"){let a=wn.Namespace.XSD.term("boolean");i.push(new js.Triple(e,t,new Ms.Literal(n.toString(),a)));return}throw new Error("Unsupported JSON-LD value encountered")}}parseIdNode(e,t){if(e.startsWith("_:"))return new Yd.BlankNode(e.slice(2));if(this.isAbsoluteIri(e))return new rs.IRI(e);let n=this.expandTerm(e,t);return new rs.IRI(n)}parseLiteralObject(e,t){let n=e["@value"];if(typeof n!="string")throw new Error("JSON-LD literal values must be strings");if(typeof e["@language"]=="string")return new Ms.Literal(n,void 0,e["@language"]);if(typeof e["@type"]=="string"){let i=this.expandTerm(e["@type"],t);return new Ms.Literal(n,new rs.IRI(i))}return new Ms.Literal(n)}expandTerm(e,t){if(this.isAbsoluteIri(e))return e;let n=e.indexOf(":");if(n>0){let s=e.slice(0,n),a=e.slice(n+1),c=t[s];if(!c)throw new Error(`Unknown prefix "${s}" in JSON-LD document`);return`${c}${a}`}let i=t["@vocab"];if(i)return`${i}${e}`;throw new Error(`Unable to expand JSON-LD term "${e}"`)}isAbsoluteIri(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)}buildJsonLdChunks(e){let t=[],n=JSON.stringify(e["@context"]);return t.push(`{"@context":${n},"@graph":[`),e["@graph"].forEach((i,s)=>{let a=JSON.stringify(i);s>0?t.push(`,${a}`):t.push(a)}),t.push(`]}
`),t}};du.RDFSerializer=Qd});var xg=_(mi=>{"use strict";Object.defineProperty(mi,"__esModule",{value:!0});mi.TransactionError=mi.TripleNotFoundError=mi.TripleAlreadyExistsError=void 0;var Jd=class extends Error{static{o(this,"TripleAlreadyExistsError")}constructor(e){super(`Triple already exists: ${e.toString()}`),this.name="TripleAlreadyExistsError"}};mi.TripleAlreadyExistsError=Jd;var Xd=class extends Error{static{o(this,"TripleNotFoundError")}constructor(e){super(`Triple not found: ${e.toString()}`),this.name="TripleNotFoundError"}};mi.TripleNotFoundError=Xd;var Zd=class extends Error{static{o(this,"TransactionError")}constructor(e){super(e),this.name="TransactionError"}};mi.TransactionError=Zd});var tp=_(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.LRUCache=void 0;var ep=class{static{o(this,"LRUCache")}constructor(e){this.maxSize=e,this.cache=new Map}get(e){let t=this.cache.get(e);return t!==void 0&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){let n=this.cache.keys().next().value;n!==void 0&&this.cache.delete(n)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}};pu.LRUCache=ep});var Ag=_(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.InMemoryTripleStore=void 0;var gi=xg(),z5=mt(),K5=Cr(),Y5=Mt(),Q5=bn(),J5=tp(),X5=Q5.Namespace.XSD.term("string").value,rp=class{static{o(this,"InMemoryTripleStore")}constructor(){this.triples=new Map,this.spo=new Map,this.sop=new Map,this.pso=new Map,this.pos=new Map,this.osp=new Map,this.ops=new Map,this.queryCache=new J5.LRUCache(1e3)}async add(e){let t=this.getTripleKey(e);if(this.triples.has(t))return;this.triples.set(t,e);let n=this.getNodeKey(e.subject),i=this.getNodeKey(e.predicate),s=this.getNodeKey(e.object);this.addToIndex(this.spo,n,i,s),this.addToIndex(this.sop,n,s,i),this.addToIndex(this.pso,i,n,s),this.addToIndex(this.pos,i,s,n),this.addToIndex(this.osp,s,n,i),this.addToIndex(this.ops,s,i,n),this.queryCache.clear()}async remove(e){let t=this.getTripleKey(e);if(!this.triples.has(t))return!1;this.triples.delete(t);let n=this.getNodeKey(e.subject),i=this.getNodeKey(e.predicate),s=this.getNodeKey(e.object);return this.removeFromIndex(this.spo,n,i,s),this.removeFromIndex(this.sop,n,s,i),this.removeFromIndex(this.pso,i,n,s),this.removeFromIndex(this.pos,i,s,n),this.removeFromIndex(this.osp,s,n,i),this.removeFromIndex(this.ops,s,i,n),this.queryCache.clear(),!0}async has(e){let t=this.getTripleKey(e);return this.triples.has(t)}async match(e,t,n){let i=this.getMatchCacheKey(e,t,n),s=this.queryCache.get(i);if(s!==void 0)return s;let a;return!e&&!t&&!n?a=Array.from(this.triples.values()):e&&t&&n?a=this.matchSPO(e,t,n):e&&t?a=this.matchSP(e,t):e&&n?a=this.matchSO(e,n):t&&n?a=this.matchPO(t,n):e?a=this.matchS(e):t?a=this.matchP(t):n?a=this.matchO(n):a=[],this.queryCache.set(i,a),a}async addAll(e){for(let t of e)await this.add(t)}async removeAll(e){let t=0;for(let n of e)await this.remove(n)&&t++;return t}async clear(){this.triples.clear(),this.spo.clear(),this.sop.clear(),this.pso.clear(),this.pos.clear(),this.osp.clear(),this.ops.clear(),this.queryCache.clear()}async count(){return this.triples.size}async subjects(){let e=new Set;for(let t of this.triples.values())e.add(t.subject);return Array.from(e)}async predicates(){let e=new Set;for(let t of this.triples.values())e.add(t.predicate);return Array.from(e)}async objects(){let e=new Set;for(let t of this.triples.values())e.add(t.object);return Array.from(e)}async beginTransaction(){return new np(this)}matchSPO(e,t,n){let i=this.getNodeKey(e),s=this.getNodeKey(t),a=this.getNodeKey(n),c=this.spo.get(i);if(!c)return[];let u=c.get(s);if(!u)return[];if(u.has(a)){let f=this.buildTripleKey(i,s,a),l=this.triples.get(f);return l?[l]:[]}return[]}matchSP(e,t){let n=this.getNodeKey(e),i=this.getNodeKey(t),s=this.spo.get(n);if(!s)return[];let a=s.get(i);return a?this.getTriplesByKeys(Array.from(a).map(c=>this.buildTripleKey(n,i,c))):[]}matchSO(e,t){let n=this.getNodeKey(e),i=this.getNodeKey(t),s=this.sop.get(n);if(!s)return[];let a=s.get(i);return a?this.getTriplesByKeys(Array.from(a).map(c=>this.buildTripleKey(n,c,i))):[]}matchPO(e,t){let n=this.getNodeKey(e),i=this.getNodeKey(t),s=this.pos.get(n);if(!s)return[];let a=s.get(i);return a?this.getTriplesByKeys(Array.from(a).map(c=>this.buildTripleKey(c,n,i))):[]}matchS(e){let t=this.getNodeKey(e),n=this.spo.get(t);if(!n)return[];let i=[];for(let[s,a]of n.entries())for(let c of a)i.push(this.buildTripleKey(t,s,c));return this.getTriplesByKeys(i)}matchP(e){let t=this.getNodeKey(e),n=this.pso.get(t);if(!n)return[];let i=[];for(let[s,a]of n.entries())for(let c of a)i.push(this.buildTripleKey(s,t,c));return this.getTriplesByKeys(i)}matchO(e){let t=this.getNodeKey(e),n=this.osp.get(t);if(!n)return[];let i=[];for(let[s,a]of n.entries())for(let c of a)i.push(this.buildTripleKey(s,c,t));return this.getTriplesByKeys(i)}getTriplesByKeys(e){let t=[];for(let n of e){let i=this.triples.get(n);i&&t.push(i)}return t}addToIndex(e,t,n,i){e.has(t)||e.set(t,new Map);let s=e.get(t);s.has(n)||s.set(n,new Set),s.get(n).add(i)}removeFromIndex(e,t,n,i){let s=e.get(t);if(!s)return;let a=s.get(n);a&&(a.delete(i),a.size===0&&s.delete(n),s.size===0&&e.delete(t))}getTripleKey(e){let t=this.getNodeKey(e.subject),n=this.getNodeKey(e.predicate),i=this.getNodeKey(e.object);return this.buildTripleKey(t,n,i)}buildTripleKey(e,t,n){return`${e}|${t}|${n}`}getNodeKey(e){if(e instanceof z5.IRI)return`i:${e.value}`;if(e instanceof K5.BlankNode)return`b:${e.id}`;if(e instanceof Y5.Literal){let t=`l:${e.value}`;return e.datatype&&e.datatype.value!==X5?t+=`^^${e.datatype.value}`:e.language&&(t+=`@${e.language}`),t}return""}getMatchCacheKey(e,t,n){let i=e?this.getNodeKey(e):"?",s=t?this.getNodeKey(t):"?",a=n?this.getNodeKey(n):"?";return`${i}|${s}|${a}`}};mu.InMemoryTripleStore=rp;var np=class{static{o(this,"InMemoryTransaction")}constructor(e){this.store=e,this.operations=[],this.committed=!1,this.rolledBack=!1}async add(e){if(this.committed)throw new gi.TransactionError("Transaction already committed");if(this.rolledBack)throw new gi.TransactionError("Transaction already rolled back");this.operations.push({type:"add",triple:e})}async remove(e){if(this.committed)throw new gi.TransactionError("Transaction already committed");if(this.rolledBack)throw new gi.TransactionError("Transaction already rolled back");return this.operations.push({type:"remove",triple:e}),!0}async commit(){if(this.committed)throw new gi.TransactionError("Transaction already committed");if(this.rolledBack)throw new gi.TransactionError("Transaction already rolled back");for(let e of this.operations)e.type==="add"?await this.store.add(e.triple):await this.store.remove(e.triple);this.committed=!0,this.operations=[]}async rollback(){if(this.committed)throw new gi.TransactionError("Transaction already committed");if(this.rolledBack)throw new gi.TransactionError("Transaction already rolled back");this.operations=[],this.rolledBack=!0}}});var Cg=_(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.RDFVocabularyMapper=void 0;var vr=Ui(),Og=mt(),_e=bn(),ip=class{static{o(this,"RDFVocabularyMapper")}constructor(){this.propertyMappings=new Map([["exo__Instance_class",_e.Namespace.RDF.term("type")],["exo__Asset_isDefinedBy",_e.Namespace.RDFS.term("isDefinedBy")],["exo__Class_superClass",_e.Namespace.RDFS.term("subClassOf")],["exo__Property_range",_e.Namespace.RDFS.term("range")],["exo__Property_domain",_e.Namespace.RDFS.term("domain")],["exo__Property_superProperty",_e.Namespace.RDFS.term("subPropertyOf")]])}generateClassHierarchyTriples(){let e=[];return e.push(new vr.Triple(_e.Namespace.EXO.term("Asset"),_e.Namespace.RDFS.term("subClassOf"),_e.Namespace.RDFS.term("Resource"))),e.push(new vr.Triple(_e.Namespace.EXO.term("Class"),_e.Namespace.RDFS.term("subClassOf"),_e.Namespace.RDFS.term("Class"))),e.push(new vr.Triple(_e.Namespace.EXO.term("Property"),_e.Namespace.RDFS.term("subClassOf"),_e.Namespace.RDF.term("Property"))),e.push(new vr.Triple(_e.Namespace.EMS.term("Task"),_e.Namespace.RDFS.term("subClassOf"),_e.Namespace.EXO.term("Asset"))),e.push(new vr.Triple(_e.Namespace.EMS.term("Project"),_e.Namespace.RDFS.term("subClassOf"),_e.Namespace.EXO.term("Asset"))),e.push(new vr.Triple(_e.Namespace.EMS.term("Area"),_e.Namespace.RDFS.term("subClassOf"),_e.Namespace.EXO.term("Asset"))),e}generatePropertyHierarchyTriples(){let e=[];return e.push(new vr.Triple(_e.Namespace.EXO.term("Instance_class"),_e.Namespace.RDFS.term("subPropertyOf"),_e.Namespace.RDF.term("type"))),e.push(new vr.Triple(_e.Namespace.EXO.term("Asset_isDefinedBy"),_e.Namespace.RDFS.term("subPropertyOf"),_e.Namespace.RDFS.term("isDefinedBy"))),e.push(new vr.Triple(_e.Namespace.EXO.term("Class_superClass"),_e.Namespace.RDFS.term("subPropertyOf"),_e.Namespace.RDFS.term("subClassOf"))),e.push(new vr.Triple(_e.Namespace.EXO.term("Property_range"),_e.Namespace.RDFS.term("subPropertyOf"),_e.Namespace.RDFS.term("range"))),e.push(new vr.Triple(_e.Namespace.EXO.term("Property_domain"),_e.Namespace.RDFS.term("subPropertyOf"),_e.Namespace.RDFS.term("domain"))),e.push(new vr.Triple(_e.Namespace.EXO.term("Property_superProperty"),_e.Namespace.RDFS.term("subPropertyOf"),_e.Namespace.RDFS.term("subPropertyOf"))),e}generateMappedTriple(e,t,n){let i=this.propertyMappings.get(t);if(!i)return null;let s;if(n instanceof Og.IRI)s=n;else{let a=n.match(/^(ems|exo)__(.+)$/);if(a){let[,c,u]=a;s=(c==="ems"?_e.Namespace.EMS:_e.Namespace.EXO).term(u)}else s=new Og.IRI(n)}return new vr.Triple(e,i,s)}hasMappingFor(e){return this.propertyMappings.has(e)}};gu.RDFVocabularyMapper=ip});var ap=_(sn=>{"use strict";var Z5=sn&&sn.__decorate||function(r,e,t,n){var i=arguments.length,s=i<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(i<3?a(s):i>3?a(e,t,s):a(e,t))||s);return i>3&&s&&Object.defineProperty(e,t,s),s},eA=sn&&sn.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},tA=sn&&sn.__param||function(r,e){return function(t,n){e(t,n,r)}};Object.defineProperty(sn,"__esModule",{value:!0});sn.NoteToRDFConverter=void 0;var Fg=Ze(),yu=Ui(),rA=mt(),En=Mt(),Yn=bn(),nA=it(),sp=class{static{o(this,"NoteToRDFConverter")}constructor(e){this.vault=e,this.OBSIDIAN_VAULT_SCHEME="obsidian://vault/"}async convertNote(e){let t=this.vault.getFrontmatter(e);if(!t)return[];let n=[],i=this.notePathToIRI(e.path),s=Yn.Namespace.EXO.term("Asset_fileName");n.push(new yu.Triple(i,s,new En.Literal(e.basename)));for(let[a,c]of Object.entries(t)){if(!this.isExocortexProperty(a))continue;let u=this.propertyKeyToIRI(a),f=Array.isArray(c)?c:[c];for(let l of f)if(a==="exo__Instance_class"){let h=this.valueToClassURI(l);n.push(new yu.Triple(i,u,h))}else{let h=await this.valueToRDFObject(l,e);n.push(new yu.Triple(i,u,h))}if(a==="exo__Instance_class")for(let l of f){let h=this.expandClassValue(l);if(h){let p=Yn.Namespace.RDF.term("type");n.push(new yu.Triple(i,p,h))}}}return n}async convertVault(){let e=this.vault.getAllFiles(),t=[];for(let n of e)try{let i=await this.convertNote(n);t.push(...i)}catch(i){console.warn(`\u26A0\uFE0F Skipping file with invalid IRI: ${n.path}`),console.warn(`   Reason: ${i instanceof Error?i.message:String(i)}`);continue}return t}notePathToIRI(e){let t=encodeURI(e);return new rA.IRI(`${this.OBSIDIAN_VAULT_SCHEME}${t}`)}isExocortexProperty(e){return e.startsWith("exo__")||e.startsWith("ems__")}propertyKeyToIRI(e){if(e.startsWith("exo__")){let t=e.substring(5);return Yn.Namespace.EXO.term(t)}if(e.startsWith("ems__")){let t=e.substring(5);return Yn.Namespace.EMS.term(t)}throw new Error(`Invalid property key: ${e}`)}async valueToRDFObject(e,t){if(typeof e=="string"){let n=this.removeQuotes(e),i=this.extractWikilink(n);if(i){let s=this.vault.getFirstLinkpathDest(i,t.path);if(s)return this.notePathToIRI(s.path);if(this.isClassReference(i)){let a=this.expandClassValue(i);if(a)return a}return new En.Literal(n)}if(this.isClassReference(n)){let s=this.expandClassValue(n);if(s)return s}return this.isISO8601DateTime(n)?new En.Literal(n,Yn.Namespace.XSD.term("dateTime")):new En.Literal(n)}return typeof e=="boolean"?new En.Literal(e.toString()):typeof e=="number"?new En.Literal(e.toString(),Yn.Namespace.XSD.term("decimal")):e instanceof Date?new En.Literal(e.toISOString(),Yn.Namespace.XSD.term("dateTime")):new En.Literal(String(e))}isISO8601DateTime(e){return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{1,3})?(Z|[+-]\d{2}:\d{2})?$/.test(e)}removeQuotes(e){let t=e.trim();return t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'")?t.substring(1,t.length-1):e}extractWikilink(e){let t=e.match(/^\[\[([^\]]+)\]\]$/);return t?t[1]:null}valueToClassURI(e){if(typeof e!="string")return new En.Literal(String(e));let t=this.removeQuotes(e),i=this.extractWikilink(t)||t,s=this.expandClassValue(i);return s||new En.Literal(t)}isClassReference(e){return(e.startsWith("ems__")||e.startsWith("exo__"))&&!/\s/.test(e)}expandClassValue(e){let t=this.removeQuotes(e);if(t.startsWith("ems__")){let n=t.substring(5);return Yn.Namespace.EMS.term(n)}if(t.startsWith("exo__")){let n=t.substring(5);return Yn.Namespace.EXO.term(n)}return null}};sn.NoteToRDFConverter=sp;sn.NoteToRDFConverter=sp=Z5([(0,Fg.injectable)(),tA(0,(0,Fg.inject)(nA.DI_TOKENS.IVaultAdapter)),eA("design:paramtypes",[Object])],sp)});var op=_((Qk,Pg)=>{var Ls=class{static{o(this,"Wildcard")}constructor(){return iA||this}equals(e){return e&&this.termType===e.termType}};Object.defineProperty(Ls.prototype,"value",{enumerable:!0,value:"*"});Object.defineProperty(Ls.prototype,"termType",{enumerable:!0,value:"Wildcard"});var iA=new Ls;Pg.exports.Wildcard=Ls});var Dg=_((Xk,Ig)=>{var sA=(function(){var r=o(function(O,E,F,D){for(F=F||{},D=O.length;D--;F[O[D]]=E);return F},"o"),e=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],t=[2,247],n=[100,110,113,115,116,123,126,131,329,330,331,332,333],i=[2,409],s=[1,18],a=[1,27],c=[13,16,45,197,224,229,308],u=[28,29,53],f=[28,53],l=[1,42],h=[1,45],p=[1,41],m=[1,44],b=[123,126],y=[1,67],x=[39,45,87],A=[13,16,45,197,224,308],C=[1,87],j=[2,281],I=[1,86],U=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],se=[6,28,29,53,63,70,73,81,83,85],Me=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],ee=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],M=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],N=[13,16,308],K=[112,132,327,334],Ae=[13,16,112,132,308],Ve=[1,111],Le=[1,117],we=[112,132,327,328,334],be=[13,16,112,132,308,328],me=[28,29,45,53,87],V=[1,138],L=[1,151],ae=[1,128],qe=[1,127],q=[1,129],ge=[1,140],Ie=[1,141],Y=[1,142],De=[1,143],Re=[1,144],Oe=[1,145],Ne=[1,147],pe=[1,148],Ce=[2,457],ye=[1,158],Fe=[1,159],ke=[1,160],te=[1,152],oe=[1,153],ce=[1,156],re=[1,171],ne=[1,172],ie=[1,173],Z=[1,174],ue=[1,175],le=[1,176],fe=[1,167],he=[1,168],X=[1,169],de=[1,170],$e=[1,157],je=[1,166],Ee=[1,161],v=[1,162],S=[1,163],w=[1,164],P=[1,165],G=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Te=[1,195],Ye=[6,31,73,81,83,85],xe=[2,285],B=[1,199],$=[1,201],W=[6,31,70,73,81,83,85],H=[2,283],ve=[1,207],We=[1,218],Ge=[1,223],xt=[1,219],or=[1,225],gr=[1,226],zt=[1,224],l1=[6,63,70,73,81,83,85],f1=[1,236],h1=[2,334],d1=[1,243],p1=[1,241],At=[6,193],Bo=[2,349],m1=[2,339],ai=[28,128],g1=[47,48,193,272],$o=[47,48,193,242,272],ys=[47,48,193,242,246,272],_s=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],vt=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],y1=[1,271],_1=[1,270],ft=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],v1=[1,281],b1=[1,280],Kt=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Sa=[45,89],Wo=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Go=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Ho=[31,89],zo=[48,87],Ii=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],dn=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],S1=[1,313],vs=[6,85],Gl=[6,31,81,83,85],w1=[2,361],kn=[2,353],Di=[1,343],wa=[31,112,335],jn=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Hl=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],E1=[6,109,193],Ri=[31,112],ht=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],zl=[1,390],Kl=[1,391],oi=[13,16,87,197,308,314],T1=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],Ko=[1,417],Yo=[1,418],x1=[13,16,48,197,229,308],ci=[6,31,85],A1=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],Yl=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],Ni=[29,31,85,112,159,160,161,163,164],Qo=[1,443],Jo=[1,444],O1=[1,449],ki=[31,112,193,232,318,335],Xo=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],C1=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Ql=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Ea=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Ta=[31,45],F1=[1,507],P1=[1,508],I1=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],Zo=[29,31,85,112,159,160,161,163,164,335],ji=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],D1=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],R1=[2,352],Jl=[13,16,197,308,314],N1=[1,565],bs=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],k1=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Mn=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],j1=[13,16,87,308],Ln=[2,364],Ss=[29,31,85,112,159,160,161,163,164,193,232,318,335],ec=[31,112,193,232,272,318,335],Vn=[2,359],M1=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],tc=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],L1=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],V1=[2,347],Xl={trace:o(function(){},"trace"),yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:o(function(E,F,D,Q,Se,d,Qt){var g=d.length-1;switch(Se){case 1:if(d[g-1]=d[g-1]||{},Pe.base&&(d[g-1].base=Pe.base),Pe.base="",d[g-1].prefixes=Pe.prefixes,Pe.prefixes=null,Pe.pathOnly){if(d[g-1].type==="path"||"termType"in d[g-1])return d[g-1];throw new Error("Received full SPARQL query in path only mode")}else if(d[g-1].type==="path"||"termType"in d[g-1])throw new Error("Received only path in full SPARQL mode");if(d[g-1].type==="update"){let Je={};for(let nt of d[g-1].updates)if(nt.updateType==="insert"){let He={};for(let Qe of nt.insert)if(Qe.type==="bgp"||Qe.type==="graph")for(let cr of Qe.triples)cr.subject.termType==="BlankNode"&&(He[cr.subject.value]=!0),cr.predicate.termType==="BlankNode"&&(He[cr.predicate.value]=!0),cr.object.termType==="BlankNode"&&(He[cr.object.value]=!0);for(let Qe of Object.keys(He)){if(Je[Qe])throw new Error("Detected reuse blank node across different INSERT DATA clauses");Je[Qe]=!0}}}return d[g-1];case 2:this.$={...d[g-1],...d[g],type:"query"};break;case 4:Pe.base=xa(d[g]);break;case 5:Pe.prefixes||(Pe.prefixes={}),d[g-1]=d[g-1].substr(0,d[g-1].length-1),d[g]=xa(d[g]),Pe.prefixes[d[g-1]]=d[g];break;case 6:this.$={...d[g-3],...Vi(d[g-2]),...d[g-1],...d[g]};break;case 7:if(!Pe.skipValidation&&(of(d[g-3].variables.map(nt=>af(nt.expression))).some(nt=>nt.aggregation==="count"&&!(nt.expression instanceof rc))||d[g].group)){for(let nt of d[g-3].variables)if(nt.termType==="Variable"){if(!d[g].group||!d[g].group.map(He=>xs(He)).includes(xs(nt)))throw Error("Projection of ungrouped variable (?"+xs(nt)+")")}else if(af(nt.expression).length===0){let He=Xb(nt.expression);for(let Qe of He)if(!d[g].group||!d[g].group.map||!d[g].group.map(cr=>xs(cr)).includes(xs(Qe)))throw Error("Use of ungrouped variable in projection of operation (?"+xs(Qe)+")")}}let yn=d[g-1].where.filter(Je=>Je.type==="query");if(yn.length>0){let Je=d[g-3].variables.filter(He=>He.variable&&He.variable.value).map(He=>He.variable.value),nt=of(yn.map(He=>He.variables)).map(He=>He.value||He.variable.value);for(let He of Je)if(nt.indexOf(He)>=0)throw Error("Target id of 'AS' (?"+He+") already used in subquery")}this.$=ct(d[g-3],Vi(d[g-2]),d[g-1],d[g]);break;case 8:this.$=ct({queryType:"CONSTRUCT",template:d[g-3]},Vi(d[g-2]),d[g-1],d[g]);break;case 9:this.$=ct({queryType:"CONSTRUCT",template:d[g-2]=d[g-2]?d[g-2].triples:[]},Vi(d[g-5]),{where:[{type:"bgp",triples:Li([],d[g-2])}]},d[g]);break;case 10:this.$=ct({queryType:"DESCRIBE",variables:d[g-3]==="*"?[new rc]:d[g-3]},Vi(d[g-2]),d[g-1],d[g]);break;case 11:this.$=ct({queryType:"ASK"},Vi(d[g-2]),d[g-1],d[g]);break;case 12:this.$=ct(d[g-1],{variables:[new rc]});break;case 13:let Pa=d[g].map(Je=>Je.value||Je.variable.value),As=Zb(Pa);if(As.length>0)throw Error("Two or more of the resulting columns have the same name (?"+As[0]+")");this.$=ct(d[g-1],{variables:d[g]});break;case 14:this.$=ct({queryType:"SELECT"},d[g]&&(d[g-1]=Yt(d[g]),d[g]={},d[g][d[g-1]]=!0,d[g]));break;case 16:case 27:this.$=ws(d[g-3],{variable:d[g-1]});break;case 17:case 18:this.$=ct(d[g-3],d[g-2],d[g-1],d[g],{type:"query"});break;case 19:case 58:this.$={iri:d[g],named:!!d[g-1]};break;case 20:this.$={where:d[g].patterns};break;case 21:this.$=ct(d[g-1],d[g]);break;case 22:this.$=ct(d[g-2],d[g-1],d[g]);break;case 23:this.$={group:d[g]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=ws(d[g]);break;case 26:this.$=ws(d[g-1]);break;case 29:this.$={having:d[g]};break;case 30:this.$={order:d[g]};break;case 32:this.$=ws(d[g],{descending:!0});break;case 35:this.$={limit:Ts(d[g])};break;case 36:this.$={offset:Ts(d[g])};break;case 37:this.$={limit:Ts(d[g-2]),offset:Ts(d[g])};break;case 38:this.$={limit:Ts(d[g]),offset:Ts(d[g-2])};break;case 39:case 43:this.$={type:"values",values:d[g]};break;case 40:case 84:this.$=d[g-1].map(Je=>({[d[g-3]]:Je}));break;case 41:case 85:this.$=d[g-1].map(()=>({}));break;case 42:case 86:var gn=d[g-4].length;d[g-4]=d[g-4].map(Zl),this.$=d[g-1].map(function(Je){if(Je.length!==gn)throw Error("Inconsistent VALUES length");for(var nt={},He=0;He<gn;He++)nt["?"+d[g-4][He].value]=Je[He];return nt});break;case 44:case 65:case 100:case 126:case 175:this.$=d[g-1];break;case 45:this.$={type:"update",updates:qn(d[g-2],d[g-1])};break;case 46:this.$=ct({type:"load",silent:!!d[g-2],source:d[g-1]},d[g]&&{destination:d[g]});break;case 47:this.$={type:Yt(d[g-2]),silent:!!d[g-1],graph:d[g]};break;case 48:this.$={type:Yt(d[g-4]),silent:!!d[g-3],source:d[g-2],destination:d[g]};break;case 49:this.$={type:"create",silent:!!d[g-2],graph:{type:"graph",name:d[g]}};break;case 50:this.$={updateType:"insert",insert:Q1(d[g])};break;case 51:this.$={updateType:"delete",delete:lf(Q1(d[g]))};break;case 52:this.$={updateType:"deletewhere",delete:lf(d[g])};break;case 53:this.$={updateType:"insertdelete",...d[g-4],...d[g-3],...Vi(d[g-2],"using"),where:d[g].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=d[g];break;case 55:this.$={delete:lf(d[g-1]),insert:d[g]||[]};break;case 56:this.$={delete:[],insert:d[g]};break;case 59:this.$={graph:d[g]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:d[g]};break;case 64:this.$={[Yt(d[g])]:!0};break;case 66:this.$=d[g-1]?pn(d[g],[d[g-1]]):pn(d[g]);break;case 67:var Ca=ct(d[g-3]||{triples:[]},{type:"graph",name:d[g-5]});this.$=d[g]?[Ca,d[g]]:[Ca];break;case 68:case 73:this.$={type:"bgp",triples:pn(d[g-2],[d[g-1]])};break;case 69:this.$={type:"group",patterns:[d[g-1]]};break;case 70:for(let Je of d[g-1].filter(nt=>nt.type==="bind")){let nt=d[g-1].indexOf(Je),He=new Set;for(let Qe of d[g-1].slice(0,nt))(Qe.type==="group"||Qe.type==="bgp")&&K1(Qe).forEach(cr=>He.add(cr));if(He.has(Je.variable.value))throw Error("Variable used to bind is already bound (?"+Je.variable.value+")")}this.$={type:"group",patterns:d[g-1]};break;case 71:this.$=d[g-1]?pn([d[g-1]],d[g]):pn(d[g]);break;case 72:this.$=d[g]?[d[g-2],d[g]]:d[g-2];break;case 75:this.$=ct(d[g],{type:"optional"});break;case 76:this.$=ct(d[g],{type:"minus"});break;case 77:this.$=ct(d[g],{type:"graph",name:d[g-1]});break;case 78:this.$=ct(d[g],{type:"service",name:d[g-1],silent:!!d[g-2]});break;case 79:this.$={type:"filter",expression:d[g]};break;case 80:this.$={type:"bind",variable:d[g-1],expression:d[g-3]};break;case 89:this.$=Oa(d[g]);break;case 90:this.$=void 0;break;case 91:this.$=d[g-1].length?{type:"union",patterns:pn(d[g-1].map(tf),[tf(d[g])])}:d[g];break;case 95:this.$={...d[g],function:d[g-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:qn(d[g-2],d[g-1]),distinct:!!d[g-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=qn(d[g-2],d[g-1]);break;case 101:this.$=pn(d[g-2],[d[g-1]]);break;case 102:case 112:this.$=uf(d[g].map(Je=>ct(Un(d[g-1]),Je)));break;case 103:this.$=uf(Li(d[g].map(Je=>ct(Un(d[g-1].entity),Je)),d[g-1].triples));break;case 105:this.$=pn([d[g-1]],d[g]);break;case 106:this.$=pn(d[g]);break;case 107:this.$=sf(d[g-1],d[g]);break;case 109:case 237:this.$=Pe.factory.namedNode(Bb);break;case 110:case 118:this.$=qn(d[g-1],d[g]);break;case 111:this.$=d[g]?{annotation:d[g],object:d[g-1]}:d[g-1];break;case 113:this.$=d[g]?uf(Li(d[g].map(Je=>ct(Un(d[g-1].entity),Je)),d[g-1].triples)):d[g-1].triples;break;case 114:this.$=sf(...d[g-1],d[g]);break;case 116:this.$=sf(...d[g]);break;case 117:case 159:case 163:this.$=[d[g-1],d[g]];break;case 119:this.$=d[g]?{object:d[g-1],annotation:d[g]}:d[g-1];break;case 120:this.$=d[g-1].length?Es("|",qn(d[g-1],d[g])):d[g];break;case 121:this.$=d[g-1].length?Es("/",qn(d[g-1],d[g])):d[g];break;case 122:this.$=d[g]?Es(d[g],[d[g-1]]):d[g-1];break;case 123:this.$=d[g-1]?Es(d[g-1],[d[g]]):d[g];break;case 125:case 131:this.$=Es(d[g-1],[d[g]]);break;case 129:this.$=Es("|",qn(d[g-2],d[g-1]));break;case 132:case 134:this.$=Qb(d[g-1]);break;case 133:case 135:this.$=Jb(d[g-1]);break;case 140:this.$={entity:d[g],triples:[]};break;case 145:this.$=Zl(d[g]);break;case 149:this.$=Pe.factory.namedNode(q1);break;case 151:case 153:case 158:case 162:this.$=ef(d[g-1],d[g]);break;case 152:this.$=["||",d[g]];break;case 154:this.$=["&&",d[g]];break;case 156:this.$=Ot(d[g-1],[d[g-2],d[g]]);break;case 157:this.$=Ot(d[g-2]?"notin":"in",[d[g-3],d[g]]);break;case 160:this.$=["+",ef(d[g-1],d[g])];break;case 161:var sc=mn(d[g-1].value.replace("-",""),d[g-1].datatype);this.$=["-",ef(sc,d[g])];break;case 164:this.$=Ot("UPLUS",[d[g]]);break;case 165:this.$=Ot(d[g-1],[d[g]]);break;case 166:this.$=Ot("UMINUS",[d[g]]);break;case 177:this.$=Ot(Yt(d[g-1]));break;case 178:this.$=Ot(Yt(d[g-3]),[d[g-1]]);break;case 179:this.$=Oa(Ot(Yt(d[g-3]),[d[g-1]]));break;case 180:this.$=Ot(Yt(d[g-5]),[d[g-3],d[g-1]]);break;case 181:this.$=Ot(Yt(d[g-7]),[d[g-5],d[g-3],d[g-1]]);break;case 182:this.$=Oa(Ot(Yt(d[g-7]),[d[g-5],d[g-3],d[g-1]]));break;case 183:this.$=Ot(Yt(d[g-1]),d[g]);break;case 184:this.$=Ot("bound",[Zl(d[g-1])]);break;case 185:this.$=Ot(d[g-1],[]);break;case 186:this.$=Ot(d[g-3],[d[g-1]]);break;case 187:this.$=Ot(d[g-2]?"notexists":"exists",[tf(d[g])]);break;case 188:case 189:this.$=ws(d[g-1],{type:"aggregate",aggregation:Yt(d[g-4]),distinct:!!d[g-2]});break;case 190:this.$=ws(d[g-2],{type:"aggregate",aggregation:Yt(d[g-5]),distinct:!!d[g-3],separator:typeof d[g-1]=="string"?d[g-1]:" "});break;case 192:this.$=mn(d[g]);break;case 193:this.$=Hb(d[g-1],Yt(d[g].substr(1)));break;case 194:this.$=mn(d[g-2],d[g]);break;case 195:case 204:this.$=mn(d[g],U1);break;case 196:case 205:this.$=mn(d[g],B1);break;case 197:case 206:this.$=mn(Yt(d[g]),$1);break;case 200:this.$=mn(d[g].toLowerCase(),Gb);break;case 201:this.$=mn(d[g].substr(1),U1);break;case 202:this.$=mn(d[g].substr(1),B1);break;case 203:this.$=mn(d[g].substr(1).toLowerCase(),$1);break;case 207:case 208:this.$=z1(d[g],1);break;case 209:case 210:this.$=z1(d[g],3);break;case 211:this.$=Pe.factory.namedNode(xa(d[g]));break;case 213:var ac=d[g].indexOf(":"),Fa=d[g].substr(0,ac),oc=Pe.prefixes[Fa];if(!oc)throw new Error("Unknown prefix: "+Fa);var at=xa(oc+d[g].substr(ac+1));this.$=Pe.factory.namedNode(at);break;case 214:if(d[g]=d[g].substr(0,d[g].length-1),!(d[g]in Pe.prefixes))throw new Error("Unknown prefix: "+d[g]);var at=xa(Pe.prefixes[d[g]]);this.$=Pe.factory.namedNode(at);break;case 215:this.$=Aa(d[g].replace(/^(_:)/,""));break;case 216:this.$=Aa();break;case 217:case 218:case 232:this.$=Oa(rf(d[g-3],d[g-2],d[g-1]));break;case 230:case 231:this.$=Oa(d[g-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:d[g-1].push(d[g]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[d[g]];break;case 308:d[g-3].push(d[g-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:d[g-2].push(d[g-1]);break}},"anonymous"),table:[r(e,t,{3:1,4:2,10:3}),{1:[3]},r(n,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:i,16:i,45:i,197:i,224:i,229:i,308:i,24:[1,13],32:[1,14],36:[1,15],41:s}),r([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:a},{6:[2,239]},r(c,[2,411],{216:28,217:29}),r(u,[2,249],{18:30}),r(u,[2,251],{22:31}),r(f,[2,255],{25:32,27:33,29:[1,34]}),{13:l,16:h,33:35,39:[1,37],44:39,55:40,87:p,139:38,307:43,308:m,323:36},r(u,[2,267],{37:46}),r(b,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:y,87:p},r(x,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),r(e,[2,248]),r(e,[2,245]),r(e,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},r([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),r(A,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:C,29:j,52:84,53:I,56:85},{19:88,28:C,29:j,52:89,53:I,56:85},r(u,[2,253],{26:90}),{28:[1,91],52:92,53:I},r(U,[2,385],{181:93,182:94,183:95,31:[2,383]}),r(se,[2,263],{34:96}),r(se,[2,261],{44:39,55:40,307:43,139:97,13:l,16:h,87:p,308:m}),r(se,[2,262]),r(Me,[2,259]),r(ee,[2,143]),r(ee,[2,144]),r([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),r(M,[2,211]),r(M,[2,212]),r(M,[2,213]),r(M,[2,214]),{19:98,28:C,29:j,52:99,53:I,56:85},{6:[2,309],99:100,193:[1,101]},r(N,[2,311],{101:102,328:[1,103]}),r(K,[2,317],{104:104,328:[1,105]}),r(Ae,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:Ve,114:110},{29:Ve,114:112},{29:Ve,114:113},{118:114,123:[1,115],125:116,126:Le},r(we,[2,315]),r(we,[2,316]),r(be,[2,319]),r(be,[2,320]),r(be,[2,321]),r(b,[2,327]),{13:l,16:h,55:118,307:43,308:m},r(u,[2,12]),r(u,[2,13],{44:66,43:119,45:y,87:p}),r(me,[2,269]),r(me,[2,15]),{13:l,16:h,44:136,45:V,46:120,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},r(x,[2,14]),r(x,[2,274]),r(x,[2,271]),r(x,[2,272]),r(e,[2,4]),{13:[1,177]},r(G,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},r(c,[2,410]),r([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:l,16:h,45:[1,193],55:194,197:Te,219:189,220:190,223:191,224:[1,192],307:43,308:m},r(A,[2,419]),r(Ye,xe,{20:196,59:197,69:198,70:B}),r(u,[2,250]),{29:$,57:200},r(N,[2,279],{54:202,327:[1,203]}),{29:[2,282]},r(W,H,{23:204,58:205,62:206,63:ve}),r(u,[2,252]),{19:208,28:C,29:j,52:209,53:I,56:85},{29:[1,210]},r(f,[2,256]),{31:[1,211]},{31:[2,384]},{13:l,16:h,44:215,45:We,55:220,82:L,87:p,89:Ge,145:212,172:221,185:213,187:214,231:xt,236:216,237:222,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,309:or,310:gr,311:217,312:zt},r(l1,[2,265],{56:85,35:227,52:228,19:229,28:C,29:j,53:I}),r(Me,[2,260]),r(W,H,{58:205,62:206,23:230,63:ve}),r(u,[2,268]),{6:[2,45]},r(e,t,{10:3,4:231}),{13:l,16:h,55:232,307:43,308:m},r(N,[2,312]),{105:233,112:f1,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},r(K,[2,318]),r(N,h1,{108:240,133:242,112:d1,132:p1}),r(Ae,[2,323]),{112:[1,244]},{112:[2,325]},r(At,[2,50]),r(U,Bo,{135:245,136:246,143:247,144:248,31:m1,112:m1}),r(At,[2,51]),r(At,[2,52]),r(ai,[2,328],{119:249}),{29:Ve,114:250},r(ai,[2,56]),{29:Ve,114:251},r(b,[2,59]),r(me,[2,270]),{47:[1,252]},r(g1,[2,150]),r($o,[2,428],{240:253}),r(ys,[2,430],{244:254}),r(ys,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),r(_s,[2,440],{252:264}),r(vt,[2,448],{260:265}),{13:l,16:h,44:136,45:V,55:133,67:132,68:134,77:131,82:L,87:p,172:135,255:154,257:155,264:266,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},{13:l,16:h,44:136,45:V,55:133,67:132,68:134,77:131,82:L,87:p,172:135,255:154,257:155,264:267,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},{13:l,16:h,44:136,45:V,55:133,67:132,68:134,77:131,82:L,87:p,172:135,255:154,257:155,264:268,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},r(vt,[2,167]),r(vt,[2,168]),r(vt,[2,169]),r(vt,[2,170],{176:269,45:y1,89:_1}),r(vt,[2,171]),r(vt,[2,172]),r(vt,[2,173]),r(vt,[2,174]),{13:l,16:h,44:136,45:V,46:272,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},r(ft,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:v1,89:b1,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},r(Kt,[2,192],{292:[1,286],293:[1,287]}),r(Kt,[2,195]),r(Kt,[2,196]),r(Kt,[2,197]),r(Kt,[2,198]),r(Kt,[2,199]),r(Kt,[2,200]),{13:l,16:h,44:39,55:40,82:L,87:p,139:289,172:291,255:154,257:155,266:290,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},r(Sa,[2,452]),r(Sa,[2,453]),r(Sa,[2,454]),r(Sa,[2,455]),r(Sa,[2,456]),{279:[2,458]},r(Wo,[2,207]),r(Wo,[2,208]),r(Wo,[2,209]),r(Wo,[2,210]),r(Kt,[2,201]),r(Kt,[2,202]),r(Kt,[2,203]),r(Kt,[2,204]),r(Kt,[2,205]),r(Kt,[2,206]),r(e,[2,5]),r(Go,[2,297],{88:295}),r(Ho,[2,299],{90:296}),{48:[1,297],87:[1,298]},r(zo,[2,301]),r(G,[2,43]),r(G,[2,82]),r(G,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},r(c,[2,412]),r(Ii,[2,123]),r(Ii,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),r(dn,[2,124]),{13:l,16:h,45:[1,311],55:194,89:[1,310],197:Te,223:312,225:308,226:309,229:S1,307:43,308:m},r(c,i,{215:10,214:314}),r(dn,[2,236]),r(dn,[2,237]),r(vs,[2,6]),r(Gl,[2,287],{60:315,72:316,73:[1,317]}),r(Ye,[2,286]),{13:l,16:h,45:V,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,307:43,308:m,346:je,347:Ee,348:v,349:S,350:w,351:P},r([6,31,63,70,73,81,83,85],[2,20]),r(U,w1,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:kn,31:kn,85:kn,112:kn,159:kn,160:kn,161:kn,163:kn,164:kn,41:s}),{13:l,16:h,55:331,307:43,308:m},r(N,[2,280]),r(vs,[2,7]),r(Ye,xe,{59:197,69:198,20:332,70:B}),r(W,[2,284]),{64:[1,333]},r(W,H,{58:205,62:206,23:334,63:ve}),r(u,[2,254]),r(U,Bo,{144:248,30:335,143:336,31:[2,257]}),r(u,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:l,16:h,44:39,55:40,87:p,139:342,186:339,190:340,195:341,197:Di,307:43,308:m},r(wa,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:l,16:h,87:p,197:Di,308:m}),r(jn,[2,227]),r(jn,[2,228]),r(jn,[2,229]),{13:l,16:h,44:215,45:We,55:220,82:L,87:p,89:Ge,172:221,185:351,187:350,200:348,230:347,231:xt,234:349,236:216,237:222,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,309:or,310:gr,311:217,312:zt},{13:l,16:h,44:39,55:40,87:p,139:342,186:352,190:340,195:341,197:Di,307:43,308:m},r(jn,[2,146]),r(jn,[2,147]),r(jn,[2,148]),r(jn,[2,149]),{13:l,16:h,44:354,55:355,82:L,87:p,172:357,237:356,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,309:or,310:gr,311:358,312:zt,313:353},r(Hl,[2,215]),r(Hl,[2,216]),r(W,H,{58:205,62:206,23:359,63:ve}),r(se,[2,264]),r(l1,[2,266]),r(vs,[2,11]),r(n,[2,308],{6:[2,310]}),r(At,[2,313],{102:360,120:361,121:[1,362]}),r(At,[2,47]),r(At,[2,63]),r(At,[2,64]),{13:l,16:h,55:363,307:43,308:m},r(At,[2,336]),r(At,[2,337]),r(At,[2,338]),{109:[1,364]},r(E1,[2,60]),{13:l,16:h,55:365,307:43,308:m},r(N,[2,335]),{13:l,16:h,55:366,307:43,308:m},{31:[1,367]},r(Ri,[2,341],{137:368}),r(Ri,[2,340]),{13:l,16:h,44:215,45:We,55:220,82:L,87:p,89:Ge,145:369,172:221,185:213,187:214,231:xt,236:216,237:222,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,309:or,310:gr,311:217,312:zt},{28:[1,370],127:371,128:[1,372]},r(ai,[2,330],{124:373,125:374,126:Le}),r(ai,[2,57]),{44:375,87:p},r(g1,[2,151],{241:376,242:[1,377]}),r($o,[2,153],{245:378,246:[1,379]}),{13:l,16:h,44:136,45:V,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,247:380,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},{250:[1,381]},r(ht,[2,432]),r(ht,[2,433]),r(ht,[2,434]),r(ht,[2,435]),r(ht,[2,436]),r(ht,[2,437]),{250:[2,439]},r([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:re,298:ne,299:ie,300:Z,301:ue,302:le}),r(_s,[2,162],{261:388,262:389,39:zl,338:Kl}),r(vt,[2,164]),r(vt,[2,165]),r(vt,[2,166]),r(ft,[2,95]),r(ft,[2,96]),r(ht,[2,377],{177:392,325:[1,393]}),{48:[1,394]},r(ft,[2,177]),{13:l,16:h,44:136,45:V,46:395,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},{13:l,16:h,44:136,45:V,46:396,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},{13:l,16:h,44:136,45:V,46:397,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},{13:l,16:h,44:136,45:V,46:398,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},{13:l,16:h,44:136,45:V,46:399,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},r(ft,[2,183]),r(ft,[2,98]),r(ht,[2,381],{180:400}),{87:[1,401]},r(ft,[2,185]),{13:l,16:h,44:136,45:V,46:402,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},{29:$,57:403},r(Kt,[2,193]),{13:l,16:h,55:404,307:43,308:m},{13:l,16:h,44:39,55:40,87:p,139:342,195:405,197:Di,307:43,308:m},r(oi,[2,233]),r(oi,[2,234]),r(oi,[2,235]),r(T1,[2,459],{281:406,325:[1,407]}),r(ht,[2,463],{284:408,325:[1,409]}),r(ht,[2,465],{286:410,325:[1,411]}),{13:l,16:h,31:[1,412],55:414,82:L,171:413,172:415,173:416,174:Ko,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:Yo},{31:[1,419],89:[1,420]},{29:[1,421]},r(zo,[2,302]),r(Go,[2,367],{167:422}),r(Ho,[2,369],{168:423}),{48:[1,424],87:[1,425]},r(zo,[2,371]),r(Ii,[2,122]),r(Ii,[2,417]),r(Ii,[2,413]),r(Ii,[2,414]),r(Ii,[2,415]),r(dn,[2,125]),r(dn,[2,127]),r(dn,[2,128]),r(x1,[2,420],{227:426}),r(dn,[2,130]),{13:l,16:h,55:194,197:Te,223:427,307:43,308:m},{48:[1,428]},r(ci,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),r(Gl,[2,288]),{64:[1,433]},r(Ye,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:l,16:h,45:V,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,276:Ne,277:pe,279:Ce,280:ye,283:Fe,285:ke,308:m,346:je,347:Ee,348:v,349:S,350:w,351:P}),r(A1,[2,293]),r(Yl,[2,92]),r(Yl,[2,93]),r(Yl,[2,94]),{45:y1,89:_1,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:C,29:j,56:85},{19:438,28:C,29:j,56:85},r(Ni,[2,355],{149:439}),r(Ni,[2,354]),{13:l,16:h,44:215,45:Qo,55:220,82:L,87:p,89:Ge,156:440,172:221,185:441,203:442,231:Jo,236:216,237:222,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,309:or,310:gr,311:217,312:zt},r(se,[2,19]),r(ci,[2,21]),{13:l,16:h,44:450,45:O1,55:323,65:445,66:446,67:447,68:448,87:p,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,307:43,308:m,346:je,347:Ee,348:v,349:S,350:w,351:P},r(vs,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},r(U,[2,386],{31:[2,388]}),r(wa,[2,102]),r(ki,[2,391],{191:452}),r(U,[2,395],{196:453,198:454}),r(U,[2,108]),r(U,[2,109]),r(wa,[2,103]),r(wa,[2,104]),r(wa,[2,390]),{13:l,16:h,44:215,45:We,48:[1,455],55:220,82:L,87:p,89:Ge,172:221,185:351,187:350,200:456,231:xt,234:349,236:216,237:222,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,309:or,310:gr,311:217,312:zt},r(Xo,[2,424]),r(C1,[2,136]),r(C1,[2,137]),r(Ql,[2,140]),{232:[1,457]},{13:l,16:h,44:39,55:40,87:p,139:342,195:458,197:Di,307:43,308:m},r(oi,[2,219]),r(oi,[2,220]),r(oi,[2,221]),r(oi,[2,222]),r(oi,[2,223]),r(vs,[2,10]),r(At,[2,46]),r(At,[2,314]),{112:f1,122:459},r(At,[2,62]),r(N,h1,{133:242,108:460,112:d1,132:p1}),r(E1,[2,61]),r(At,[2,49]),r([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},r(Ri,[2,351],{146:463,335:[1,464]}),{29:$,57:465},r(ai,[2,329]),r(N,[2,332],{129:466,327:[1,467]}),r(ai,[2,55]),r(ai,[2,331]),{48:[1,468]},r($o,[2,429]),{13:l,16:h,44:136,45:V,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},r(ys,[2,431]),{13:l,16:h,44:136,45:V,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,243:470,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},r(ys,[2,156]),{45:v1,89:b1,179:471},r(_s,[2,441]),{13:l,16:h,44:136,45:V,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,251:472,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},r(vt,[2,444],{256:473}),r(vt,[2,446],{258:474}),r(ht,[2,442]),r(ht,[2,443]),r(vt,[2,449]),{13:l,16:h,44:136,45:V,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,255:154,257:155,259:475,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},r(ht,[2,450]),r(ht,[2,451]),r(ht,[2,379],{178:476}),r(ht,[2,378]),r([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:l,16:h,44:136,45:V,46:482,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},{48:[1,483]},{48:[1,484]},r(ft,[2,187]),r(Kt,[2,194]),{13:l,16:h,44:39,55:40,82:L,87:p,139:289,172:291,255:154,257:155,266:290,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,320:485},{13:l,16:h,39:[1,487],44:136,45:V,46:488,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,282:486,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},r(T1,[2,460]),{13:l,16:h,44:136,45:V,46:489,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},r(ht,[2,464]),{13:l,16:h,44:136,45:V,46:490,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},r(ht,[2,466]),r(G,[2,40]),r(Go,[2,298]),r(Ea,[2,87]),r(Ea,[2,88]),r(Ea,[2,89]),r(Ea,[2,90]),{13:l,16:h,55:492,82:L,172:493,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,311:494,312:zt,315:491},r(G,[2,41]),r(Ho,[2,300]),r(Ta,[2,303],{92:495}),{13:l,16:h,31:[1,496],55:414,82:L,171:497,172:415,173:416,174:Ko,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:Yo},{31:[1,498],89:[1,499]},{29:[1,500]},r(zo,[2,372]),{13:l,16:h,48:[2,422],55:194,197:Te,223:312,226:502,228:501,229:S1,307:43,308:m},r(dn,[2,131]),r(dn,[2,126]),r(ci,[2,22]),r(ci,[2,290]),{82:[1,503]},{82:[1,504]},{13:l,16:h,44:510,45:V,55:323,67:321,68:322,74:505,75:506,76:F1,77:320,78:P1,79:509,87:p,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,307:43,308:m,346:je,347:Ee,348:v,349:S,350:w,351:P},r(A1,[2,294]),r(I1,[2,69]),r(I1,[2,70]),r(Ye,xe,{59:197,69:198,20:511,70:B}),r(W,H,{58:205,62:206,23:512,63:ve}),{29:[2,375],31:[2,71],84:522,85:a,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},r(Ni,[2,363],{157:524,335:[1,525]}),r(c,i,{215:10,202:526,205:527,208:528,214:529,44:530,87:p}),r(Zo,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:i,16:i,45:i,197:i,224:i,229:i,308:i,87:p}),{13:l,16:h,44:215,45:Qo,55:220,82:L,87:p,89:Ge,172:221,185:351,203:536,212:534,231:Jo,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,309:or,310:gr,311:217,312:zt},r(c,i,{215:10,205:527,208:528,214:529,44:530,202:537,87:p}),r(W,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:l,16:h,45:O1,87:p,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,276:Ne,277:pe,279:Ce,280:ye,283:Fe,285:ke,308:m,346:je,347:Ee,348:v,349:S,350:w,351:P}),r(ji,[2,291]),r(ji,[2,24]),r(ji,[2,25]),{13:l,16:h,44:136,45:V,46:539,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},r(ji,[2,28]),r(W,H,{58:205,62:206,23:540,63:ve}),r([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),r(ki,[2,107]),{13:l,16:h,44:215,45:We,55:220,82:L,87:p,89:Ge,172:221,185:351,187:350,199:543,200:544,231:xt,234:349,236:216,237:222,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,309:or,310:gr,311:217,312:zt},r(D1,[2,132]),r(Xo,[2,425]),r(D1,[2,133]),{13:l,16:h,44:354,55:355,82:L,87:p,172:357,237:356,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,309:or,310:gr,311:358,312:zt,313:545},r(At,[2,54]),r(At,[2,48]),r(Ri,[2,342]),{13:l,16:h,44:39,55:40,87:p,139:546,307:43,308:m},r(Ri,[2,68]),r(U,[2,350],{31:R1,112:R1}),r(At,[2,53]),{13:l,16:h,55:547,307:43,308:m},r(N,[2,333]),r(me,[2,16]),r($o,[2,152]),r(ys,[2,154]),r(ys,[2,157]),r(_s,[2,159]),r(_s,[2,160],{262:389,261:548,39:zl,338:Kl}),r(_s,[2,161],{262:389,261:549,39:zl,338:Kl}),r(vt,[2,163]),{13:l,16:h,44:136,45:V,46:550,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},r(ft,[2,178]),r(ft,[2,179]),{13:l,16:h,44:136,45:V,46:551,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},{13:l,16:h,44:136,45:V,46:552,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},{13:l,16:h,44:136,45:V,46:553,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},{48:[1,554],272:[1,555]},r(ft,[2,184]),r(ft,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:l,16:h,55:194,197:Te,223:562,307:43,308:m},r(Jl,[2,224]),r(Jl,[2,225]),r(Jl,[2,226]),{31:[1,563],45:N1,94:564},r(G,[2,84]),r(Go,[2,368]),r(G,[2,85]),r(Ho,[2,370]),r(Ta,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},r(ci,[2,35],{83:[1,569]}),r(ci,[2,36],{81:[1,570]}),r(Gl,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:l,16:h,45:V,76:F1,78:P1,87:p,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,276:Ne,277:pe,279:Ce,280:ye,283:Fe,285:ke,308:m,346:je,347:Ee,348:v,349:S,350:w,351:P}),r(bs,[2,295]),{45:V,77:572},{45:V,77:573},r(bs,[2,33]),r(bs,[2,34]),{31:[2,275],50:574,84:575,85:a},{31:[2,277],51:576,84:577,85:a},r(Ni,[2,356]),r(k1,[2,357],{152:578,335:[1,579]}),r(Mn,[2,74]),{29:$,57:580},{29:$,57:581},{13:l,16:h,44:39,55:40,87:p,139:582,307:43,308:m},r(j1,[2,365],{162:583,328:[1,584]}),{13:l,16:h,45:V,55:323,67:321,68:322,77:320,79:585,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,307:43,308:m,346:je,347:Ee,348:v,349:S,350:w,351:P},{45:[1,586]},r(Mn,[2,81]),{29:$,57:587},r(Ni,[2,73]),r(U,[2,362],{29:Ln,31:Ln,85:Ln,112:Ln,159:Ln,160:Ln,161:Ln,163:Ln,164:Ln}),r(Zo,[2,112]),r(Ss,[2,401],{206:588}),r(U,[2,405],{209:589,210:590}),r(U,[2,403]),r(U,[2,404]),r(Zo,[2,113]),r(Zo,[2,400]),{13:l,16:h,44:215,45:Qo,48:[1,591],55:220,82:L,87:p,89:Ge,172:221,185:351,203:536,212:592,231:Jo,234:535,236:216,237:222,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,309:or,310:gr,311:217,312:zt},r(Xo,[2,426]),r(Ql,[2,138]),r(Ql,[2,139]),{232:[1,593]},r(ji,[2,292]),{47:[1,595],48:[1,594]},r(vs,[2,9]),r(ki,[2,392]),r(ki,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:l,16:h,87:p,197:Di,308:m}),r(ki,[2,110],{272:[1,598]}),r(ec,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},r(ai,[2,58]),r(vt,[2,445]),r(vt,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},r(ft,[2,99]),r(ht,[2,382]),r([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),r(ft,[2,188]),r(ft,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:l,16:h,55:492,82:L,172:493,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,311:494,312:zt,315:611},r(G,[2,42]),r(Ta,[2,304]),{13:l,16:h,55:414,82:L,95:612,171:613,172:415,173:416,174:Ko,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:Yo},{31:[1,614],45:N1,94:615},r(dn,[2,129]),r(x1,[2,421]),{82:[1,616]},{82:[1,617]},r(bs,[2,296]),r(bs,[2,31]),r(bs,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},r(U,w1,{155:330,153:618,154:619,29:Vn,31:Vn,85:Vn,112:Vn,159:Vn,160:Vn,161:Vn,163:Vn,164:Vn}),r(k1,[2,358]),r(Mn,[2,75]),r(Mn,[2,76]),{29:$,57:620},{13:l,16:h,44:39,55:40,87:p,139:621,307:43,308:m},r(j1,[2,366]),r(Mn,[2,79]),{13:l,16:h,44:136,45:V,46:622,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},r(Mn,[2,91],{336:[1,623]}),r([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),r(Ss,[2,117]),{13:l,16:h,44:215,45:Qo,55:220,82:L,87:p,89:Ge,172:221,185:351,203:536,211:626,212:627,231:Jo,234:535,236:216,237:222,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,309:or,310:gr,311:217,312:zt},r(jn,[2,134]),r(Xo,[2,427]),r(jn,[2,135]),r(ji,[2,26]),{44:628,87:p},r(ki,[2,106]),r(ki,[2,394]),r(U,[2,396]),r(ec,[2,111]),r(ec,[2,398]),{13:l,16:h,44:39,55:40,87:p,139:342,186:629,190:340,195:341,197:Di,307:43,308:m},r(Hl,[2,217]),r(U,Bo,{144:248,140:630,143:631,31:[2,343]}),r(ft,[2,97]),r(ht,[2,380]),r(ft,[2,180]),{13:l,16:h,44:136,45:V,46:632,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},{13:l,16:h,44:136,45:V,46:633,55:133,67:132,68:134,77:131,82:L,87:p,172:135,224:ae,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:q,266:137,267:139,268:ge,269:Ie,270:Y,271:De,273:Re,274:Oe,275:146,276:Ne,277:pe,278:149,279:Ce,280:ye,283:Fe,285:ke,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:$e,346:je,347:Ee,348:v,349:S,350:w,351:P},r(ft,[2,190]),{290:[1,634]},{314:[1,635]},{13:l,16:h,48:[1,636],55:414,82:L,171:637,172:415,173:416,174:Ko,255:154,257:155,291:150,294:te,295:oe,296:ce,297:re,298:ne,299:ie,300:Z,301:ue,302:le,303:fe,304:he,305:X,306:de,307:43,308:m,312:Yo},r(M1,[2,305]),r(G,[2,86]),r(Ta,[2,374]),r(ci,[2,37]),r(ci,[2,38]),r(Ni,[2,72]),r(Ni,[2,360]),r(Mn,[2,77]),{29:$,57:638},{47:[1,639]},{29:[2,376]},r(Ss,[2,402]),r(Ss,[2,115],{215:10,208:528,214:529,44:530,205:640,13:i,16:i,45:i,197:i,224:i,229:i,308:i,87:p}),r(Ss,[2,118],{272:[1,641]}),r(tc,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:fe,304:he,305:X,306:de},r(Ea,[2,218]),r(Ta,[2,44]),r(M1,[2,306]),r(Mn,[2,78]),{44:651,87:p},r(Ss,[2,116]),r(U,[2,406]),r(tc,[2,119]),r(tc,[2,408]),r(c,i,{215:10,205:527,208:528,214:529,44:530,202:652,87:p}),r(ji,[2,27]),r(ec,[2,230]),r(L1,[2,345],{141:653,335:[1,654]}),r(ft,[2,181]),r(ft,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},r(U,Bo,{144:248,142:657,143:658,31:V1,112:V1}),r(L1,[2,346]),r(Mn,[2,80]),r(tc,[2,231]),r(Ri,[2,67]),r(Ri,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:o(function(E,F){if(F.recoverable)this.trace(E);else{var D=new Error(E);throw D.hash=F,D}},"parseError"),parse:o(function(E){var F=this,D=[0],Q=[],Se=[null],d=[],Qt=this.table,g="",gn=0,Ca=0,sc=0,ac=2,Fa=1,oc=d.slice.call(arguments,1),at=Object.create(this.lexer),yn={yy:{}};for(var Pa in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Pa)&&(yn.yy[Pa]=this.yy[Pa]);at.setInput(E,yn.yy),yn.yy.lexer=at,yn.yy.parser=this,typeof at.yylloc>"u"&&(at.yylloc={});var As=at.yylloc;d.push(As);var Je=at.options&&at.options.ranges;typeof yn.yy.parseError=="function"?this.parseError=yn.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function nt(_n){D.length=D.length-2*_n,Se.length=Se.length-_n,d.length=d.length-_n}o(nt,"popStack");for(var He=o(function(){var _n;return _n=at.lex()||Fa,typeof _n!="number"&&(_n=F.symbols_[_n]||_n),_n},"lex"),Qe,cr,qi,Ar,MP,ff,Os={},cc,Bn,J1,uc;;){if(qi=D[D.length-1],this.defaultActions[qi]?Ar=this.defaultActions[qi]:((Qe===null||typeof Qe>"u")&&(Qe=He()),Ar=Qt[qi]&&Qt[qi][Qe]),typeof Ar>"u"||!Ar.length||!Ar[0]){var hf="";uc=[];for(cc in Qt[qi])this.terminals_[cc]&&cc>ac&&uc.push("'"+this.terminals_[cc]+"'");at.showPosition?hf="Parse error on line "+(gn+1)+`:
`+at.showPosition()+`
Expecting `+uc.join(", ")+", got '"+(this.terminals_[Qe]||Qe)+"'":hf="Parse error on line "+(gn+1)+": Unexpected "+(Qe==Fa?"end of input":"'"+(this.terminals_[Qe]||Qe)+"'"),this.parseError(hf,{text:at.match,token:this.terminals_[Qe]||Qe,line:at.yylineno,loc:As,expected:uc})}if(Ar[0]instanceof Array&&Ar.length>1)throw new Error("Parse Error: multiple actions possible at state: "+qi+", token: "+Qe);switch(Ar[0]){case 1:D.push(Qe),Se.push(at.yytext),d.push(at.yylloc),D.push(Ar[1]),Qe=null,cr?(Qe=cr,cr=null):(Ca=at.yyleng,g=at.yytext,gn=at.yylineno,As=at.yylloc,sc>0&&sc--);break;case 2:if(Bn=this.productions_[Ar[1]][1],Os.$=Se[Se.length-Bn],Os._$={first_line:d[d.length-(Bn||1)].first_line,last_line:d[d.length-1].last_line,first_column:d[d.length-(Bn||1)].first_column,last_column:d[d.length-1].last_column},Je&&(Os._$.range=[d[d.length-(Bn||1)].range[0],d[d.length-1].range[1]]),ff=this.performAction.apply(Os,[g,Ca,gn,yn.yy,Ar[1],Se,d].concat(oc)),typeof ff<"u")return ff;Bn&&(D=D.slice(0,-1*Bn*2),Se=Se.slice(0,-1*Bn),d=d.slice(0,-1*Bn)),D.push(this.productions_[Ar[1]][0]),Se.push(Os.$),d.push(Os._$),J1=Qt[D[D.length-2]][D[D.length-1]],D.push(J1);break;case 3:return!0}}return!0},"parse")},rc=op().Wildcard,nc="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Bb=nc+"type",$b=nc+"first",Wb=nc+"rest",q1=nc+"nil",ic="http://www.w3.org/2001/XMLSchema#",U1=ic+"integer",B1=ic+"decimal",$1=ic+"double",Gb=ic+"boolean",Mi="",W1="",G1="";function Yt(O){return O.toLowerCase()}o(Yt,"lowercase");function qn(O,E){return O.push(E),O}o(qn,"appendTo");function Li(O,E){return O.push.apply(O,E),O}o(Li,"appendAllTo");function ct(O){O||(O={});for(var E=1,F=arguments.length,D;E<F&&(D=arguments[E]||{});E++)for(var Q in D)O[Q]=D[Q];return O}o(ct,"extend");function pn(){for(var O=[],E=0,F=arguments.length;E<F;E++)O=O.concat.apply(O,arguments[E]);return O}o(pn,"unionAll");function xa(O){if(O[0]==="<"&&(O=O.substring(1,O.length-1)),/^[a-z][a-z0-9.+-]*:/i.test(O))return O;if(!Pe.base)throw new Error("Cannot resolve relative IRI "+O+" because no base IRI was set.");switch(Mi!==Pe.base&&(Mi=Pe.base,W1=Mi.replace(/[^\/:]*$/,""),G1=Mi.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),O[0]){case void 0:return Mi;case"#":return Mi+O;case"?":return Mi.replace(/(?:\?.*)?$/,O);case"/":return G1+O;default:return W1+O}}o(xa,"resolveIRI");function Zl(O){if(O){var E=O[0];if(E==="?"||E==="$")return Pe.factory.variable(O.substr(1))}return O}o(Zl,"toVar");function Ot(O,E){return{type:"operation",operator:O,args:E||[]}}o(Ot,"operation");function ws(O,E){var F={expression:O==="*"?new rc:O};if(E)for(var D in E)F[D]=E[D];return F}o(ws,"expression");function Es(O,E){return{type:"path",pathType:O,items:E}}o(Es,"path");function ef(O,E){for(var F=0,D=E.length,Q;F<D&&(Q=E[F]);F++)O=Ot(Q[0],[O,Q[1]]);return O}o(ef,"createOperationTree");function Vi(O,E){var F=[],D=[],Q=O.length,Se,d={};if(!Q)return null;for(var Qt=0;Qt<Q&&(Se=O[Qt]);Qt++)(Se.named?D:F).push(Se.iri);return d[E||"from"]={default:F,named:D},d}o(Vi,"groupDatasets");function Ts(O){return parseInt(O,10)}o(Ts,"toInt");function tf(O){return O.type==="group"&&O.patterns.length===1?O.patterns[0]:O}o(tf,"degroupSingle");function mn(O,E){return E&&E.termType!=="NamedNode"&&(E=Pe.factory.namedNode(E)),Pe.factory.literal(O,E)}o(mn,"createTypedLiteral");function Hb(O,E){return Pe.factory.literal(O,E)}o(Hb,"createLangLiteral");function rf(O,E,F){if(!("termType"in E))throw new Error("Nested triples cannot contain paths");return Pe.factory.quad(O,E,F)}o(rf,"nestedTriple");function Un(O,E,F,D){var Q={};return O!=null&&(Q.subject=O),E!=null&&(Q.predicate=E),F!=null&&(Q.object=F),D!=null&&(Q.annotations=D),Q}o(Un,"triple");function Aa(O){return typeof O=="string"?O.startsWith("e_")?Pe.factory.blankNode(O):Pe.factory.blankNode("e_"+O):Pe.factory.blankNode("g_"+H1++)}o(Aa,"blank");var H1=0;Pe._resetBlanks=function(){H1=0};var zb=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,Kb={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},Yb=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,nf=String.fromCharCode;function z1(O,E){O=O.substring(E,O.length-E);try{O=O.replace(zb,function(F,D,Q,Se){var d;if(D){if(d=parseInt(D,16),isNaN(d))throw new Error;return nf(d)}else if(Q){if(d=parseInt(Q,16),isNaN(d))throw new Error;return d<65535?nf(d):nf(55296+((d-=65536)>>10),56320+(d&1023))}else{var Qt=Kb[Se];if(!Qt)throw new Error;return Qt}})}catch{return""}if(Yb.exec(O))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+O);return O}o(z1,"unescapeString");function Qb(O){var E=Aa(),F=E,D=[],Q,Se=[];O.forEach(function(gn){D.push(gn.entity),Li(Se,gn.triples)});for(var d=0,Qt=0,g=D.length,Q=Array(g*2);d<g;)Q[Qt++]=Un(F,Pe.factory.namedNode($b),D[d]),Q[Qt++]=Un(F,Pe.factory.namedNode(Wb),F=++d<g?Aa():Pe.factory.namedNode(q1));return{entity:E,triples:Li(Q,Se)}}o(Qb,"createList");function Jb(O){var E=Aa();return{entity:E,triples:O.map(function(F){return ct(Un(E),F)})}}o(Jb,"createAnonymousObject");function sf(O,E,F){var D=[],Q=[];return E.forEach(function(Se){let d=null;Se.annotation&&(d=Se.annotation,Se=Se.object),D.push(Un(null,O,Se.entity,d)),Li(Q,Se.triples)}),pn(D,F||[],Q)}o(sf,"objectListToTriples");function kP(O){for(var E=[],F,D=0,Q;Q=O[D];D++)switch(Q.type){case"bgp":Q.triples.length&&(F?Li(F.triples,Q.triples):qn(E,F=Q));break;default:(!Q.patterns||Q.patterns.length>0)&&(qn(E,Q),F=null)}return E}o(kP,"mergeAdjacentBGPs");function xs(O){return O.variable?O.variable.value:O.value||O.expression.value}o(xs,"getExpressionId");function af(O){if(!O)return[];if(O.type==="aggregate")return[O];if(O.type==="operation"){let E=[];for(let F of O.args)E.push(...af(F));return E}return[]}o(af,"getAggregatesOfExpression");function Xb(O){let E=new Set,F=o(function(D){D&&(D.termType==="Variable"?E.add(D):D.type==="operation"&&D.args.forEach(F))},"visitExpression");return F(O),E}o(Xb,"getVariablesFromExpression");function of(O,E=1,F=[]){for(let D of O)E>0&&D instanceof Array?of(D,E-1,F):F.push(D);return F}o(of,"flatten");function cf(O){return O.termType==="Variable"}o(cf,"isVariable");function K1(O){if(O.triples){let E=[];for(let F of O.triples)cf(F.subject)&&E.push(F.subject.value),cf(F.predicate)&&E.push(F.predicate.value),cf(F.object)&&E.push(F.object.value);return E}else if(O.patterns){let E=[];for(let F of O.patterns)E.push(...K1(F));return E}return[]}o(K1,"getBoundVarsFromGroupGraphPattern");function Zb(O){let E=O.slice().sort(),F=[];for(let D=0;D<E.length-1;D++)E[D+1]==E[D]&&F.push(E[D]);return F}o(Zb,"getDuplicatesInArray");function Oa(O){if(!Pe.sparqlStar)throw new Error("SPARQL-star support is not enabled");return O}o(Oa,"ensureSparqlStar");function Y1(O,E,F){for(let D of E){let Q=Un("subject"in D?D.subject:O,D.predicate,D.object);F.push(Q),D.annotations&&Y1(rf(O,D.predicate,D.object),D.annotations,F)}}o(Y1,"_applyAnnotations");function uf(O){if(Pe.sparqlStar){let E=[];return O.forEach(F=>{let D=Un(F.subject,F.predicate,F.object);E.push(D),F.annotations&&Y1(rf(F.subject,F.predicate,F.object),F.annotations,E)}),E}return O}o(uf,"applyAnnotations");function jP(O){if(!Pe.sparqlStarNestedQuads)throw new Error("Lenient SPARQL-star support with nested quads is not enabled");return O}o(jP,"ensureSparqlStarNestedQuads");function Q1(O){for(let E of O){if(E.type==="graph"&&E.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(E.type==="bgp"||E.type==="graph"){for(let F of E.triples)if(F.subject.termType==="Variable"||F.predicate.termType==="Variable"||F.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return O}o(Q1,"ensureNoVariables");function lf(O){for(let E of O)if(E.type==="bgp"){for(let F of E.triples)if(F.subject.termType==="BlankNode"||F.predicate.termType==="BlankNode"||F.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return O}o(lf,"ensureNoBnodes");var eS=(function(){var O={EOF:1,parseError:o(function(F,D){if(this.yy.parser)this.yy.parser.parseError(F,D);else throw new Error(F)},"parseError"),setInput:o(function(E,F){return this.yy=F||this.yy||{},this._input=E,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:o(function(){var E=this._input[0];this.yytext+=E,this.yyleng++,this.offset++,this.match+=E,this.matched+=E;var F=E.match(/(?:\r\n?|\n).*/g);return F?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),E},"input"),unput:o(function(E){var F=E.length,D=E.split(/(?:\r\n?|\n)/g);this._input=E+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-F),this.offset-=F;var Q=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),D.length-1&&(this.yylineno-=D.length-1);var Se=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:D?(D.length===Q.length?this.yylloc.first_column:0)+Q[Q.length-D.length].length-D[0].length:this.yylloc.first_column-F},this.options.ranges&&(this.yylloc.range=[Se[0],Se[0]+this.yyleng-F]),this.yyleng=this.yytext.length,this},"unput"),more:o(function(){return this._more=!0,this},"more"),reject:o(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:o(function(E){this.unput(this.match.slice(E))},"less"),pastInput:o(function(){var E=this.matched.substr(0,this.matched.length-this.match.length);return(E.length>20?"...":"")+E.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:o(function(){var E=this.match;return E.length<20&&(E+=this._input.substr(0,20-E.length)),(E.substr(0,20)+(E.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:o(function(){var E=this.pastInput(),F=new Array(E.length+1).join("-");return E+this.upcomingInput()+`
`+F+"^"},"showPosition"),test_match:o(function(E,F){var D,Q,Se;if(this.options.backtrack_lexer&&(Se={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Se.yylloc.range=this.yylloc.range.slice(0))),Q=E[0].match(/(?:\r\n?|\n).*/g),Q&&(this.yylineno+=Q.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Q?Q[Q.length-1].length-Q[Q.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+E[0].length},this.yytext+=E[0],this.match+=E[0],this.matches=E,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(E[0].length),this.matched+=E[0],D=this.performAction.call(this,this.yy,this,F,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),D)return D;if(this._backtrack){for(var d in Se)this[d]=Se[d];return!1}return!1},"test_match"),next:o(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var E,F,D,Q;this._more||(this.yytext="",this.match="");for(var Se=this._currentRules(),d=0;d<Se.length;d++)if(D=this._input.match(this.rules[Se[d]]),D&&(!F||D[0].length>F[0].length)){if(F=D,Q=d,this.options.backtrack_lexer){if(E=this.test_match(D,Se[d]),E!==!1)return E;if(this._backtrack){F=!1;continue}else return!1}else if(!this.options.flex)break}return F?(E=this.test_match(F,Se[Q]),E!==!1?E:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:o(function(){var F=this.next();return F||this.lex()},"lex"),begin:o(function(F){this.conditionStack.push(F)},"begin"),popState:o(function(){var F=this.conditionStack.length-1;return F>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:o(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:o(function(F){return F=this.conditionStack.length-1-Math.abs(F||0),F>=0?this.conditionStack[F]:"INITIAL"},"topState"),pushState:o(function(F){this.begin(F)},"pushState"),stateStackSize:o(function(){return this.conditionStack.length},"stateStackSize"),options:{flex:!0,"case-insensitive":!0},performAction:o(function(F,D,Q,Se){var d=Se;switch(Q){case 0:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID";case 125:console.log(D.yytext);break}},"anonymous"),rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return O})();Xl.lexer=eS;function Pe(){this.yy={}}return o(Pe,"Parser"),Pe.prototype=Xl,Xl.Parser=Pe,new Pe})();Ig.exports=sA});var jg=_((ej,kg)=>{var aA="http://www.w3.org/2001/XMLSchema#integer",oA="http://www.w3.org/2001/XMLSchema#string";function tt(r){this._options=r=r||{};var e=r.prefixes||{};this._prefixByIri={};var t=[];for(var n in e){var i=e[n];Ka(i)&&(this._prefixByIri[i]=n,t.push(i))}var s=t.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+s+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=r.sparqlStar,this._indent=Ka(r.indent)?r.indent:"  ",this._newline=Ka(r.newline)?r.newline:`
`,this._explicitDatatype=!!r.explicitDatatype}o(tt,"Generator");tt.prototype.toQuery=function(r){var e="";return r.queryType&&(e+=r.queryType.toUpperCase()+" "),r.reduced&&(e+="REDUCED "),r.distinct&&(e+="DISTINCT "),r.variables?e+=br(r.variables,void 0,function(t){return/^[?$]/.test(t)?t:yi(t)?this.toEntity(t):"("+this.toExpression(t.expression)+" AS "+_u(t.variable)+")"},this)+" ":r.template&&(e+=this.group(r.template,!0)+this._newline),r.from&&(e+=this.graphs("FROM ",r.from.default)+this.graphs("FROM NAMED ",r.from.named)),r.where&&(e+="WHERE "+this.group(r.where,!0)+this._newline),r.updates&&(e+=br(r.updates,";"+this._newline,this.toUpdate,this)),r.group&&(e+="GROUP BY "+br(r.group,void 0,function(t){var n=yi(t.expression)?this.toEntity(t.expression):"("+this.toExpression(t.expression)+")";return t.variable?"("+n+" AS "+_u(t.variable)+")":n},this)+this._newline),r.having&&(e+="HAVING ("+br(r.having,void 0,this.toExpression,this)+")"+this._newline),r.order&&(e+="ORDER BY "+br(r.order,void 0,function(t){var n="("+this.toExpression(t.expression)+")";return t.descending?"DESC "+n:n},this)+this._newline),r.offset&&(e+="OFFSET "+r.offset+this._newline),r.limit&&(e+="LIMIT "+r.limit+this._newline),r.values&&(e+=this.values(r)),e=this.baseAndPrefixes(r)+e,e.trim()};tt.prototype.baseAndPrefixes=function(r){var e=r.base?"BASE <"+r.base+">"+this._newline:"",t="";for(var n in r.prefixes)(this._options.allPrefixes||this._usedPrefixes[n])&&(t+="PREFIX "+n+": <"+r.prefixes[n]+">"+this._newline);return e+t};tt.prototype.toPattern=function(r){var e=r.type||r instanceof Array&&"array"||(r.subject&&r.predicate&&r.object?"triple":"");if(!(e in this))throw new Error("Unknown entry type: "+e);return this[e](r)};tt.prototype.triple=function(r){return this.toEntity(r.subject)+" "+this.toEntity(r.predicate)+" "+this.toEntity(r.object)+"."};tt.prototype.array=function(r){return br(r,this._newline,this.toPattern,this)};tt.prototype.bgp=function(r){return this.encodeTriples(r.triples)};tt.prototype.encodeTriples=function(r){if(!r.length)return"";for(var e=[],t=void 0,n=void 0,i=0;i<r.length;i++){var s=r[i];ns(s.subject,t)?ns(s.predicate,n)?e.push(","):(n=s.predicate,e.push(";"+this._newline,this._indent,this.toEntity(n))):(t&&e.push("."+this._newline),t=s.subject,n=s.predicate,e.push(this.toEntity(t)," ",this.toEntity(n))),e.push(" ",this.toEntity(s.object))}return e.push("."),e.join("")};tt.prototype.graph=function(r){return"GRAPH "+this.toEntity(r.name)+" "+this.group(r)};tt.prototype.graphs=function(r,e){return!e||e.length===0?"":br(e,"",function(t){return r+this.toEntity(t)+this._newline},this)};tt.prototype.group=function(r,e){return r=e!==!0?this.array(r.patterns||r.triples):this.toPattern(r.type!=="group"?r:r.patterns),r.indexOf(this._newline)===-1?"{ "+r+" }":"{"+this._newline+this.indent(r)+this._newline+"}"};tt.prototype.query=function(r){return this.toQuery(r)};tt.prototype.filter=function(r){return"FILTER("+this.toExpression(r.expression)+")"};tt.prototype.bind=function(r){return"BIND("+this.toExpression(r.expression)+" AS "+_u(r.variable)+")"};tt.prototype.optional=function(r){return"OPTIONAL "+this.group(r)};tt.prototype.union=function(r){return br(r.patterns,this._newline+"UNION"+this._newline,function(e){return this.group(e,!0)},this)};tt.prototype.minus=function(r){return"MINUS "+this.group(r)};tt.prototype.values=function(r){var e=Object.keys(r.values.reduce(function(i,s){for(var a in s)i[a]=!0;return i},{})),t,n;return e.length===1?t=n="":(t="(",n=")"),"VALUES "+t+e.join(" ")+n+" {"+this._newline+br(r.values,this._newline,function(i){return"  "+t+br(e,void 0,function(s){return i[s]?this.toEntity(i[s]):"UNDEF"},this)+n},this)+this._newline+"}"};tt.prototype.service=function(r){return"SERVICE "+(r.silent?"SILENT ":"")+this.toEntity(r.name)+" "+this.group(r)};tt.prototype.toExpression=function(r){if(yi(r))return this.toEntity(r);switch(r.type.toLowerCase()){case"aggregate":return r.aggregation.toUpperCase()+"("+(r.distinct?"DISTINCT ":"")+this.toExpression(r.expression)+(typeof r.separator=="string"?'; SEPARATOR = "'+r.separator.replace(Rg,Ng)+'"':"")+")";case"functioncall":return this.toEntity(r.function)+"("+br(r.args,", ",this.toExpression,this)+")";case"operation":var e=r.operator.toUpperCase(),t=r.args||[];switch(r.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(yi(t[0])?this.toEntity(t[0]):"("+this.toExpression(t[0])+")")+" "+e+" "+(yi(t[1])?this.toEntity(t[1]):"("+this.toExpression(t[1])+")");case"!":return"!("+this.toExpression(t[0])+")";case"uplus":return"+("+this.toExpression(t[0])+")";case"uminus":return"-("+this.toExpression(t[0])+")";case"notin":e="NOT IN";case"in":return this.toExpression(t[0])+" "+e+"("+(Ka(t[1])?t[1]:br(t[1],", ",this.toExpression,this))+")";case"notexists":e="NOT EXISTS";case"exists":return e+" "+this.group(t[0],!0);default:return e+"("+br(t,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+r.type)}};tt.prototype.toEntity=function(r){if(yi(r))switch(r.termType){case"Wildcard":return"*";case"Variable":return _u(r);case"BlankNode":return"_:"+r.value;case"Literal":var e=r.value||"",t=r.language||"",n=r.datatype;if(r='"'+e.replace(Rg,Ng)+'"',t)r+="@"+t;else if(n){if(!this._explicitDatatype)switch(n.value){case oA:return r;case aA:if(/^\d+$/.test(e))return e+" "}r+="^^"+this.encodeIRI(n.value)}return r;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return r.graph&&r.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(r.graph)+" { "+this.toEntity(r.subject)+" "+this.toEntity(r.predicate)+" "+this.toEntity(r.object)+" }  >>":"<< "+this.toEntity(r.subject)+" "+this.toEntity(r.predicate)+" "+this.toEntity(r.object)+" >>";default:return this.encodeIRI(r.value)}else{var i=r.items.map(this.toEntity,this),s=r.pathType;switch(s){case"^":case"!":return s+i[0];case"*":case"+":case"?":return"("+i[0]+s+")";default:return"("+i.join(s)+")"}}};var Rg=/["\\\t\n\r\b\f]/g,Ng=o(function(r){return cA[r]},"escapeReplacer"),cA={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};tt.prototype.encodeIRI=function(r){var e=this._prefixRegex.exec(r);if(e){var t=this._prefixByIri[e[1]];return this._usedPrefixes[t]=!0,t+":"+e[2]}return"<"+r+">"};tt.prototype.toUpdate=function(r){switch(r.type||r.updateType){case"load":return"LOAD"+(r.source?" "+this.toEntity(r.source):"")+(r.destination?" INTO GRAPH "+this.toEntity(r.destination):"");case"insert":return"INSERT DATA "+this.group(r.insert,!0);case"delete":return"DELETE DATA "+this.group(r.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(r.delete,!0);case"insertdelete":return(r.graph?"WITH "+this.toEntity(r.graph)+this._newline:"")+(r.delete.length?"DELETE "+this.group(r.delete,!0)+this._newline:"")+(r.insert.length?"INSERT "+this.group(r.insert,!0)+this._newline:"")+(r.using?this.graphs("USING ",r.using.default):"")+(r.using?this.graphs("USING NAMED ",r.using.named):"")+"WHERE "+this.group(r.where,!0);case"add":case"copy":case"move":return r.type.toUpperCase()+" "+(r.silent?"SILENT ":"")+(r.source.default?"DEFAULT":this.toEntity(r.source.name))+" TO "+this.toEntity(r.destination.name);case"create":case"clear":case"drop":return r.type.toUpperCase()+(r.silent?" SILENT ":" ")+(r.graph.default?"DEFAULT":r.graph.named?"NAMED":r.graph.all?"ALL":"GRAPH "+this.toEntity(r.graph.name));default:throw new Error("Unknown update query type: "+r.type)}};tt.prototype.indent=function(r){return r.replace(/^/gm,this._indent)};function _u(r){return"?"+r.value}o(_u,"variableToString");function Ka(r){return typeof r=="string"}o(Ka,"isString");function yi(r){return typeof r.termType=="string"}o(yi,"isTerm");function ns(r,e){if(!r||!yi(r)||!e||!yi(e)||r.termType!==e.termType)return!1;switch(r.termType){case"Literal":return r.value===e.value&&r.language===e.language&&ns(r.datatype,e.datatype);case"Quad":return ns(r.subject,e.subject)&&ns(r.predicate,e.predicate)&&ns(r.object,e.object)&&ns(r.graph,e.graph);default:return r.value===e.value}}o(ns,"equalTerms");function br(r,e,t,n){return r.map(t,n).join(Ka(e)?e:" ")}o(br,"mapJoin");function uA(r={}){return{stringify:o(function(e){var t=Object.create(r);return t.prefixes=e.prefixes,new tt(t).toQuery(e)},"stringify"),createGenerator:o(function(){return new tt(r)},"createGenerator")}}o(uA,"_Generator");kg.exports={Generator:uA}});var up=_(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.BlankNode=void 0;var cp=class{static{o(this,"BlankNode")}constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&e.termType==="BlankNode"&&e.value===this.value}};vu.BlankNode=cp});var lp=_(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.DefaultGraph=void 0;var Ya=class{static{o(this,"DefaultGraph")}constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&e.termType==="DefaultGraph"}};bu.DefaultGraph=Ya;Ya.INSTANCE=new Ya});var wu=_(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.NamedNode=void 0;var fp=class{static{o(this,"NamedNode")}constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&e.termType==="NamedNode"&&e.value===this.value}};Su.NamedNode=fp});var hp=_(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.Literal=void 0;var Mg=wu(),Qa=class r{static{o(this,"Literal")}constructor(e,t){this.termType="Literal",this.value=e,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(e){return!!e&&e.termType==="Literal"&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}};Eu.Literal=Qa;Qa.RDF_LANGUAGE_STRING=new Mg.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString");Qa.XSD_STRING=new Mg.NamedNode("http://www.w3.org/2001/XMLSchema#string")});var pp=_(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.Quad=void 0;var dp=class{static{o(this,"Quad")}constructor(e,t,n,i){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=n,this.graph=i}equals(e){return!!e&&(e.termType==="Quad"||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}};Tu.Quad=dp});var gp=_(xu=>{"use strict";Object.defineProperty(xu,"__esModule",{value:!0});xu.Variable=void 0;var mp=class{static{o(this,"Variable")}constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&e.termType==="Variable"&&e.value===this.value}};xu.Variable=mp});var Vg=_(Au=>{"use strict";Object.defineProperty(Au,"__esModule",{value:!0});Au.DataFactory=void 0;var lA=up(),fA=lp(),Lg=hp(),hA=wu(),dA=pp(),pA=gp(),mA=0,yp=class{static{o(this,"DataFactory")}constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${mA++}_`}namedNode(e){return new hA.NamedNode(e)}blankNode(e){return new lA.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new Lg.Literal(e,t)}variable(e){return new pA.Variable(e)}defaultGraph(){return fA.DefaultGraph.INSTANCE}quad(e,t,n,i){return new dA.Quad(e,t,n,i||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(Lg.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}};Au.DataFactory=yp});var qg=_(Sr=>{"use strict";var gA=Sr&&Sr.__createBinding||(Object.create?(function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,n,i)}):(function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]})),is=Sr&&Sr.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&gA(e,r,t)};Object.defineProperty(Sr,"__esModule",{value:!0});is(up(),Sr);is(Vg(),Sr);is(lp(),Sr);is(hp(),Sr);is(wu(),Sr);is(pp(),Sr);is(gp(),Sr)});var Bg=_((_j,Ug)=>{var{Parser:Qn}=Dg(),{Generator:yA}=jg(),{Wildcard:_A}=op(),{DataFactory:vA}=qg();function bA({prefixes:r,baseIRI:e,factory:t,pathOnly:n,sparqlStar:i,skipValidation:s,skipUngroupedVariableCheck:a}={}){let c={};for(let f in r??{})c[f]=r[f];let u=new Qn;return u.parse=function(){return Qn.base=e||"",Qn.prefixes=Object.create(c),Qn.factory=t||new vA,Qn.sparqlStar=!!i,Qn.pathOnly=!!n,Qn.skipValidation=!!s||!!a,Qn.prototype.parse.apply(u,arguments)},u._resetBlanks=Qn._resetBlanks,u}o(bA,"_Parser");Ug.exports={Parser:bA,Generator:yA,Wildcard:_A}});var vp=_(Vs=>{"use strict";Object.defineProperty(Vs,"__esModule",{value:!0});Vs.CaseWhenTransformerError=Vs.CaseWhenTransformer=void 0;var _p=class{static{o(this,"CaseWhenTransformer")}transform(e){let t=e,n,i=0,s=100;do if(n=t,t=this.transformSinglePass(t),i++,i>s)throw new Jn("Too many nested CASE expressions (max 100 iterations)");while(t!==n);return t}transformSinglePass(e){let t=this.findCasePositions(e);if(t.length===0)return e;let n=e;for(let i=t.length-1;i>=0;i--){let s=t[i],a=this.extractCaseExpression(n,s);if(a){let c=this.convertCaseToIf(a.content);n=n.substring(0,s)+c+n.substring(s+a.length)}}return n}findCasePositions(e){let t=[],n=e.toUpperCase(),i=0;for(;i<e.length;){if(e[i]==="'"||e[i]==='"'){let s=e[i];for(i++;i<e.length&&e[i]!==s;)e[i]==="\\"&&i++,i++;i++;continue}if(n.substring(i,i+4)==="CASE"&&this.isWordBoundary(e,i,4)){t.push(i),i+=4;continue}i++}return t}extractCaseExpression(e,t){let n=1,i=t+4,s=e.toUpperCase();for(;i<e.length&&n>0;){if(e[i]==="'"||e[i]==='"'){let a=e[i];for(i++;i<e.length&&e[i]!==a;)e[i]==="\\"&&i++,i++;i++;continue}if(s.substring(i,i+4)==="CASE"&&this.isWordBoundary(e,i,4)){n++,i+=4;continue}if(s.substring(i,i+3)==="END"&&this.isWordBoundary(e,i,3)){if(n--,n===0){let a=e.substring(t,i+3);return{content:a,length:a.length}}i+=3;continue}i++}if(n>0)throw new Jn(`Unclosed CASE expression at position ${t}`);return null}isWordBoundary(e,t,n){let i=t>0?e[t-1]:"",s=t===0||!/[a-zA-Z0-9_?$]/.test(i),a=t+n<e.length?e[t+n]:"",c=t+n>=e.length||!/[a-zA-Z0-9_]/.test(a);return s&&c}convertCaseToIf(e){let t=this.extractWhenClauses(e),n=this.extractElseClause(e);if(t.length===0)throw new Jn("CASE expression must have at least one WHEN clause");let i=n!==null?n:'""';for(let s=t.length-1;s>=0;s--){let{condition:a,result:c}=t[s];i=`IF(${a}, ${c}, ${i})`}return i}extractWhenClauses(e){let t=[],n=e.replace(/^\s*CASE\s+/i,"").replace(/\s*END\s*$/i,""),i=this.findKeywordPositions(n,"WHEN"),s=this.findKeywordPositions(n,"ELSE"),a=s.length>0?s[0]:n.length;for(let c=0;c<i.length;c++){let u=i[c]+4,f=c+1<i.length?i[c+1]:a,l=n.substring(u,f).trim(),h=this.parseWhenClause(l);h&&t.push(h)}return t}findKeywordPositions(e,t){let n=[],i=e.toUpperCase(),s=0,a=0;for(;s<e.length;){let c=e[s];if(c==="'"||c==='"'){let u=c;for(s++;s<e.length&&e[s]!==u;)e[s]==="\\"&&s++,s++;s++;continue}if(c==="("){a++,s++;continue}if(c===")"){a--,s++;continue}if(a===0&&i.substring(s,s+t.length)===t&&this.isWordBoundary(e,s,t.length)){n.push(s),s+=t.length;continue}s++}return n}parseWhenClause(e){let t=this.findKeywordPositions(e,"THEN");if(t.length===0)throw new Jn(`WHEN clause missing THEN keyword: ${e.substring(0,50)}...`);let n=t[0],i=e.substring(0,n).trim(),s=e.substring(n+4).trim();if(!i)throw new Jn("WHEN clause has empty condition");if(!s)throw new Jn("WHEN clause has empty result");return{condition:i,result:s}}extractElseClause(e){let t=e.replace(/^\s*CASE\s+/i,"").replace(/\s*END\s*$/i,""),n=this.findKeywordPositions(t,"ELSE");if(n.length>0){let i=n[0];return t.substring(i+4).trim()}return null}};Vs.CaseWhenTransformer=_p;var Jn=class extends Error{static{o(this,"CaseWhenTransformerError")}constructor(e){super(`CASE WHEN transformation error: ${e}`),this.name="CaseWhenTransformerError"}};Vs.CaseWhenTransformerError=Jn});var Gg=_(Ir=>{"use strict";var SA=Ir&&Ir.__createBinding||(Object.create?(function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,n,i)}):(function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]})),wA=Ir&&Ir.__setModuleDefault||(Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e}),EA=Ir&&Ir.__importStar||(function(){var r=o(function(e){return r=Object.getOwnPropertyNames||function(t){var n=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[n.length]=i);return n},r(e)},"ownKeys");return function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=r(e),i=0;i<n.length;i++)n[i]!=="default"&&SA(t,e,n[i]);return wA(t,e),t}})();Object.defineProperty(Ir,"__esModule",{value:!0});Ir.SPARQLParser=Ir.SPARQLParseError=void 0;var $g=EA(Bg()),Wg=vp(),Tn=class extends Error{static{o(this,"SPARQLParseError")}constructor(e,t,n,i){super(e,i?{cause:i}:void 0),this.name="SPARQLParseError",this.line=t,this.column=n}};Ir.SPARQLParseError=Tn;var bp=class{static{o(this,"SPARQLParser")}constructor(){this.parser=new $g.Parser,this.generator=new $g.Generator,this.caseWhenTransformer=new Wg.CaseWhenTransformer}parse(e){try{let t=this.caseWhenTransformer.transform(e),n=this.parser.parse(t);return this.validateQuery(n),n}catch(t){if(t instanceof Wg.CaseWhenTransformerError)throw new Tn(t.message);if(t instanceof Error){let n=t.message.match(/line (\d+), column (\d+)/),i=n?parseInt(n[1],10):void 0,s=n?parseInt(n[2],10):void 0;throw new Tn(`SPARQL syntax error: ${t.message}`,i,s,t)}throw t}}toString(e){try{return this.generator.stringify(e)}catch(t){throw t instanceof Error?new Tn(`Failed to serialize SPARQL query: ${t.message}`,void 0,void 0,t):t}}getQueryType(e){if("queryType"in e&&e.type==="query")return e.queryType;throw new Tn("Query does not have a valid queryType property")}isSelectQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="SELECT"}isConstructQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="CONSTRUCT"}isAskQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="ASK"}isDescribeQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="DESCRIBE"}validateQuery(e){if(!e||typeof e!="object")throw new Tn("Invalid query: not an object");if(e.type!=="query"&&e.type!=="update")throw new Tn(`Invalid type: expected "query" or "update", got "${e.type}"`);if(e.type==="query"){let t=["SELECT","CONSTRUCT","ASK","DESCRIBE"];if(!t.includes(e.queryType))throw new Tn(`Invalid query type: expected one of ${t.join(", ")}, got "${e.queryType}"`)}}};Ir.SPARQLParser=bp});var Hg=_(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.AlgebraTranslator=qs.AlgebraTranslatorError=void 0;var Ue=class extends Error{static{o(this,"AlgebraTranslatorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="AlgebraTranslatorError"}};qs.AlgebraTranslatorError=Ue;var Sp=class{static{o(this,"AlgebraTranslator")}constructor(){this.aggregateCounter=0}translate(e){if(e.type!=="query")throw new Ue("Only query operations are supported (not updates)");if(e.queryType==="SELECT")return this.translateSelect(e);if(e.queryType==="CONSTRUCT")return this.translateConstruct(e);if(e.queryType==="ASK")return this.translateAsk(e);throw new Ue(`Query type ${e.queryType} not yet supported`)}translateSelect(e){let t;if(!e.where||e.where.length===0)throw new Ue("SELECT query must have WHERE clause");t=this.translateWhere(e.where),this.aggregateCounter=0;let n=new Map,i=this.extractAggregatesWithMapping(e.variables,n),s=this.extractGroupVariables(e.group);if((i.length>0||s.length>0)&&(t={type:"group",variables:s,aggregates:i,input:t}),e.variables&&e.variables.length>0){for(let c of e.variables){let u=c;if(u.expression&&u.variable){if(u.expression.type==="aggregate")continue;let f=this.transformExpressionWithAggregateVars(u.expression,n);t={type:"extend",variable:u.variable.value,expression:f,input:t}}}let a=e.variables.filter(c=>c.termType==="Variable"||c.variable).map(c=>c.termType==="Variable"?c.value:c.variable.value);a.length>0&&(t={type:"project",variables:a,input:t})}return e.distinct&&(t={type:"distinct",input:t}),e.reduced&&(t={type:"reduced",input:t}),e.order&&e.order.length>0&&(t={type:"orderby",comparators:e.order.map(a=>this.translateOrderComparator(a)),input:t}),(e.limit!==void 0||e.offset!==void 0)&&(t={type:"slice",limit:e.limit,offset:e.offset,input:t}),t}translateConstruct(e){let t=this.translateConstructTemplate(e.template??[]);if(!e.where||e.where.length===0)throw new Ue("CONSTRUCT query must have WHERE clause");let n=this.translateWhere(e.where);return{type:"construct",template:t,where:n}}translateConstructTemplate(e){return!e||!Array.isArray(e)?[]:e.map(t=>this.translateTriple(t))}translateAsk(e){return{type:"ask",where:e.where&&e.where.length>0?this.translateWhere(e.where):{type:"bgp",triples:[]}}}extractAggregatesWithMapping(e,t){if(!e)return[];let n=[];for(let i of e)!i.expression||!i.variable||(i.expression.type==="aggregate"?(n.push({variable:i.variable.value,expression:this.translateAggregateExpression(i.expression)}),t.set(i.expression,i.variable.value)):this.collectNestedAggregates(i.expression,n,t));return n}collectNestedAggregates(e,t,n){if(e){if(e.type==="aggregate"){let i=`__agg${this.aggregateCounter++}`;t.push({variable:i,expression:this.translateAggregateExpression(e)}),n.set(e,i)}else if(e.type==="operation"&&e.args)for(let i of e.args)this.collectNestedAggregates(i,t,n)}}transformExpressionWithAggregateVars(e,t){if(t.has(e))return{type:"variable",name:t.get(e)};if(e.type==="operation"&&e.args){let n=e.args.map(c=>this.transformExpressionWithAggregateVars(c,t)),i=["=","!=","<",">","<=",">="],s=["&&","||","!"],a=["+","-","*","/"];return i.includes(e.operator)?{type:"comparison",operator:e.operator,left:n[0],right:n[1]}:s.includes(e.operator)?{type:"logical",operator:e.operator,operands:n}:a.includes(e.operator)?{type:"arithmetic",operator:e.operator,left:n[0],right:n[1]}:{type:"function",function:e.operator,args:n}}return this.translateExpression(e)}extractGroupVariables(e){return e?e.filter(t=>t.expression&&t.expression.termType==="Variable").map(t=>t.expression.value):[]}translateAggregateExpression(e){return{type:"aggregate",aggregation:e.aggregation.toLowerCase(),expression:e.expression?this.translateExpression(e.expression):void 0,distinct:e.distinct||!1,separator:e.separator}}translateWhere(e){if(e.length===0)throw new Ue("Empty WHERE clause");let t=e.filter(a=>a.type==="filter"),n=e.filter(a=>a.type==="bind"),i=e.filter(a=>a.type!=="filter"&&a.type!=="bind"),s;i.length===0?s={type:"bgp",triples:[]}:i.length===1?s=this.translatePattern(i[0]):s=i.map(c=>this.translatePattern(c)).reduce((c,u)=>({type:"join",left:c,right:u}));for(let a of n)s=this.translateBind(a,s);for(let a of t)s={type:"filter",expression:this.translateExpression(a.expression),input:s};return s}translatePattern(e){if(!e||!e.type)throw new Ue("Invalid pattern: missing type");switch(e.type){case"bgp":return this.translateBGP(e);case"filter":return this.translateFilter(e);case"optional":return this.translateOptional(e);case"union":return this.translateUnion(e);case"minus":return this.translateMinus(e);case"values":return this.translateValues(e);case"group":return this.translateWhere(e.patterns);case"query":return this.translateSubquery(e);default:throw new Ue(`Unsupported pattern type: ${e.type}`)}}translateBGP(e){if(!e.triples||!Array.isArray(e.triples))throw new Ue("BGP pattern must have triples array");return{type:"bgp",triples:e.triples.map(t=>this.translateTriple(t))}}translateTriple(e){if(!e.subject||!e.predicate||!e.object)throw new Ue("Triple must have subject, predicate, and object");return{subject:this.translateTripleElement(e.subject),predicate:this.translatePredicate(e.predicate),object:this.translateTripleElement(e.object)}}translatePredicate(e){return e.type==="path"?this.translatePropertyPath(e):this.translateTripleElement(e)}translatePropertyPath(e){if(!e.pathType)throw new Ue("Property path must have pathType");if(!e.items||!Array.isArray(e.items))throw new Ue("Property path must have items array");let t=e.items.map(n=>this.translatePathItem(n));switch(e.pathType){case"/":return{type:"path",pathType:"/",items:t};case"|":return{type:"path",pathType:"|",items:t};case"^":if(t.length!==1)throw new Ue("Inverse path must have exactly one item");return{type:"path",pathType:"^",items:[t[0]]};case"+":if(t.length!==1)throw new Ue("OneOrMore path must have exactly one item");return{type:"path",pathType:"+",items:[t[0]]};case"*":if(t.length!==1)throw new Ue("ZeroOrMore path must have exactly one item");return{type:"path",pathType:"*",items:[t[0]]};case"?":if(t.length!==1)throw new Ue("ZeroOrOne path must have exactly one item");return{type:"path",pathType:"?",items:[t[0]]};default:throw new Ue(`Unsupported property path type: ${e.pathType}`)}}translatePathItem(e){if(e.type==="path")return this.translatePropertyPath(e);if(e.termType==="NamedNode")return{type:"iri",value:e.value};throw new Ue(`Unsupported path item type: ${e.type||e.termType}`)}translateTripleElement(e){if(!e||!e.termType)throw new Ue("Triple element must have termType");switch(e.termType){case"Variable":return{type:"variable",value:e.value};case"NamedNode":return{type:"iri",value:e.value};case"Literal":return{type:"literal",value:e.value,datatype:e.datatype?.value,language:e.language};case"BlankNode":return{type:"blank",value:e.value};default:throw new Ue(`Unsupported term type: ${e.termType}`)}}translateFilter(e){if(!e.expression)throw new Ue("Filter pattern must have expression");let t=e.patterns?this.translateWhere(e.patterns):{type:"bgp",triples:[]};return{type:"filter",expression:this.translateExpression(e.expression),input:t}}translateExpression(e){if(!e)throw new Ue("Expression cannot be null or undefined");if(e.type==="operation")return this.translateOperationExpression(e);if(e.type==="functioncall"||e.type==="functionCall")return{type:"functionCall",function:e.function,args:e.args.map(t=>this.translateExpression(t))};if(e.termType)return this.translateTermExpression(e);throw new Ue(`Unsupported expression structure: ${JSON.stringify(e)}`)}translateOperationExpression(e){let t=["=","!=","<",">","<=",">="],n=["&&","||","!"],i=["+","-","*","/"];return t.includes(e.operator)?{type:"comparison",operator:e.operator,left:this.translateExpression(e.args[0]),right:this.translateExpression(e.args[1])}:n.includes(e.operator)?{type:"logical",operator:e.operator,operands:e.args.map(s=>this.translateExpression(s))}:i.includes(e.operator)?{type:"arithmetic",operator:e.operator,left:this.translateExpression(e.args[0]),right:this.translateExpression(e.args[1])}:e.operator==="exists"||e.operator==="notexists"?this.translateExistsExpression(e):e.operator==="in"||e.operator==="notin"?this.translateInExpression(e):{type:"function",function:e.operator,args:e.args.map(s=>this.translateExpression(s))}}translateExistsExpression(e){if(!e.args||e.args.length!==1)throw new Ue("EXISTS/NOT EXISTS must have exactly one pattern argument");let t=e.args[0],n;return t.type==="group"&&t.patterns?n=this.translateWhere(t.patterns):t.type==="bgp"?n=this.translateBGP(t):n=this.translatePattern(t),{type:"exists",negated:e.operator==="notexists",pattern:n}}translateInExpression(e){if(!e.args||e.args.length!==2)throw new Ue("IN/NOT IN must have exactly 2 arguments (expression and list)");let t=e.args[0],n=e.args[1];if(!Array.isArray(n))throw new Ue("IN/NOT IN second argument must be an array of values");return{type:"in",expression:this.translateExpression(t),list:n.map(i=>this.translateExpression(i)),negated:e.operator==="notin"}}translateTermExpression(e){if(e.termType==="Variable")return{type:"variable",name:e.value};if(e.termType==="Literal"){let t=e.value;return e.datatype&&(e.datatype.value.includes("#integer")||e.datatype.value.includes("#decimal")?t=parseFloat(e.value):e.datatype.value.includes("#boolean")&&(t=e.value==="true")),{type:"literal",value:t,datatype:e.datatype?.value}}return{type:"literal",value:String(e.value||e)}}translateOptional(e){if(!e.patterns||e.patterns.length===0)throw new Ue("OPTIONAL pattern must have patterns");return{type:"leftjoin",left:{type:"bgp",triples:[]},right:this.translateWhere(e.patterns),expression:e.expression?this.translateExpression(e.expression):void 0}}translateUnion(e){if(!e.patterns||e.patterns.length<2)throw new Ue("UNION pattern must have at least 2 patterns");let t=o(i=>i.patterns&&Array.isArray(i.patterns)?this.translateWhere(i.patterns):this.translateWhere([i]),"translateBranch"),n={type:"union",left:t(e.patterns[0]),right:t(e.patterns[1])};for(let i=2;i<e.patterns.length;i++)n={type:"union",left:n,right:t(e.patterns[i])};return n}translateMinus(e){if(!e.patterns||e.patterns.length===0)throw new Ue("MINUS pattern must have patterns");return{type:"minus",left:{type:"bgp",triples:[]},right:this.translateWhere(e.patterns)}}translateValues(e){if(!e.values||!Array.isArray(e.values))throw new Ue("VALUES pattern must have values array");let t=new Set;for(let i of e.values)for(let s of Object.keys(i)){let a=s.startsWith("?")?s.slice(1):s;t.add(a)}let n=e.values.map(i=>this.translateValuesBinding(i));return{type:"values",variables:Array.from(t),bindings:n}}translateValuesBinding(e){let t={};for(let[n,i]of Object.entries(e)){let s=n.startsWith("?")?n.slice(1):n,a=i;if(a.termType==="NamedNode")t[s]={type:"iri",value:a.value};else if(a.termType==="Literal")t[s]={type:"literal",value:a.value,datatype:a.datatype?.value,language:a.language||void 0};else throw new Ue(`Unsupported VALUES term type: ${a.termType}`)}return t}translateBind(e,t){if(!e.variable||!e.expression)throw new Ue("BIND pattern must have variable and expression");return{type:"extend",variable:e.variable.value,expression:this.translateExpression(e.expression),input:t}}translateOrderComparator(e){return{expression:this.translateExpression(e.expression),descending:e.descending||!1}}translateSubquery(e){if(e.queryType!=="SELECT")throw new Ue(`Only SELECT subqueries are supported, got: ${e.queryType}`);return{type:"subquery",query:this.translateSelect(e)}}};qs.AlgebraTranslator=Sp});var zg=_(Ou=>{"use strict";Object.defineProperty(Ou,"__esModule",{value:!0});Ou.AlgebraOptimizer=void 0;var wp=class{static{o(this,"AlgebraOptimizer")}constructor(){this.stats=new Map}optimize(e){let t=e;return t=this.eliminateEmptyBGPInFilterJoin(t),t=this.filterPushDown(t),t=this.joinReordering(t),t}eliminateEmptyBGPInFilterJoin(e){if(e.type==="join"){if(e.left.type==="filter"){let t=e.left;if(t.input.type==="bgp"&&t.input.triples.length===0)return{type:"filter",expression:t.expression,input:this.eliminateEmptyBGPInFilterJoin(e.right)}}if(e.right.type==="filter"){let t=e.right;if(t.input.type==="bgp"&&t.input.triples.length===0)return{type:"filter",expression:t.expression,input:this.eliminateEmptyBGPInFilterJoin(e.left)}}return{type:"join",left:this.eliminateEmptyBGPInFilterJoin(e.left),right:this.eliminateEmptyBGPInFilterJoin(e.right)}}return e.type==="filter"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="leftjoin"?{...e,left:this.eliminateEmptyBGPInFilterJoin(e.left),right:this.eliminateEmptyBGPInFilterJoin(e.right)}:e.type==="union"?{...e,left:this.eliminateEmptyBGPInFilterJoin(e.left),right:this.eliminateEmptyBGPInFilterJoin(e.right)}:e.type==="minus"?{...e,left:this.eliminateEmptyBGPInFilterJoin(e.left),right:this.eliminateEmptyBGPInFilterJoin(e.right)}:e.type==="project"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="orderby"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="slice"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="distinct"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e}filterPushDown(e){return e.type==="filter"?this.pushDownFilter(e):e.type==="join"?{type:"join",left:this.filterPushDown(e.left),right:this.filterPushDown(e.right)}:e.type==="leftjoin"?{...e,left:this.filterPushDown(e.left),right:this.filterPushDown(e.right)}:e.type==="union"?{type:"union",left:this.filterPushDown(e.left),right:this.filterPushDown(e.right)}:e.type==="minus"?{...e,left:this.filterPushDown(e.left),right:this.filterPushDown(e.right)}:e.type==="project"?{...e,input:this.filterPushDown(e.input)}:e.type==="orderby"?{...e,input:this.filterPushDown(e.input)}:e.type==="slice"?{...e,input:this.filterPushDown(e.input)}:e.type==="distinct"?{...e,input:this.filterPushDown(e.input)}:e}pushDownFilter(e){let t=e.input;if(t.type==="join"){let n=this.getFilterVariables(e.expression),i=this.getOperationVariables(t.left),s=this.getOperationVariables(t.right),a=n.every(u=>i.has(u)),c=n.every(u=>s.has(u));return a&&!c?{type:"join",left:{type:"filter",expression:e.expression,input:this.filterPushDown(t.left)},right:this.filterPushDown(t.right)}:c&&!a?{type:"join",left:this.filterPushDown(t.left),right:{type:"filter",expression:e.expression,input:this.filterPushDown(t.right)}}:{type:"filter",expression:e.expression,input:{type:"join",left:this.filterPushDown(t.left),right:this.filterPushDown(t.right)}}}return t.type==="union"?{type:"union",left:{type:"filter",expression:e.expression,input:this.filterPushDown(t.left)},right:{type:"filter",expression:e.expression,input:this.filterPushDown(t.right)}}:{type:"filter",expression:e.expression,input:this.filterPushDown(t)}}getFilterVariables(e){let t=[];if(e.type==="variable")t.push(e.name);else if(e.type==="comparison")t.push(...this.getFilterVariables(e.left)),t.push(...this.getFilterVariables(e.right));else if(e.type==="logical")for(let n of e.operands)t.push(...this.getFilterVariables(n));else if(e.type==="function")for(let n of e.args)t.push(...this.getFilterVariables(n));return Array.from(new Set(t))}getOperationVariables(e){let t=new Set;if(e.type==="bgp")for(let n of e.triples)n.subject.type==="variable"&&t.add(n.subject.value),n.predicate.type==="variable"&&t.add(n.predicate.value),n.object.type==="variable"&&t.add(n.object.value);else if(e.type==="join"){let n=this.getOperationVariables(e.left),i=this.getOperationVariables(e.right);return new Set([...n,...i])}else{if(e.type==="filter")return this.getOperationVariables(e.input);if(e.type==="leftjoin"){let n=this.getOperationVariables(e.left),i=this.getOperationVariables(e.right);return new Set([...n,...i])}else if(e.type==="union"){let n=this.getOperationVariables(e.left),i=this.getOperationVariables(e.right);return new Set([...n,...i])}else{if(e.type==="minus")return this.getOperationVariables(e.left);if(e.type==="project")return new Set(e.variables)}}return t}joinReordering(e){return e.type==="join"?this.reorderJoin(e):e.type==="filter"?{...e,input:this.joinReordering(e.input)}:e.type==="leftjoin"?{...e,left:this.joinReordering(e.left),right:this.joinReordering(e.right)}:e.type==="union"?{...e,left:this.joinReordering(e.left),right:this.joinReordering(e.right)}:e.type==="minus"?{...e,left:this.joinReordering(e.left),right:this.joinReordering(e.right)}:e.type==="project"?{...e,input:this.joinReordering(e.input)}:e.type==="orderby"?{...e,input:this.joinReordering(e.input)}:e.type==="slice"?{...e,input:this.joinReordering(e.input)}:e.type==="distinct"?{...e,input:this.joinReordering(e.input)}:e}reorderJoin(e){let t=this.estimateCost(e.left);return this.estimateCost(e.right)<t?{type:"join",left:this.joinReordering(e.right),right:this.joinReordering(e.left)}:{type:"join",left:this.joinReordering(e.left),right:this.joinReordering(e.right)}}estimateCost(e){if(e.type==="bgp"){let t=e.triples.length*100;for(let n of e.triples)n.subject.type==="variable"&&(t+=10),n.predicate.type==="variable"&&(t+=20),n.object.type==="variable"&&(t+=10);return t}return e.type==="filter"?this.estimateCost(e.input)*.3:e.type==="join"?this.estimateCost(e.left)*this.estimateCost(e.right):e.type==="leftjoin"?this.estimateCost(e.left)+this.estimateCost(e.right)*.5:e.type==="union"?this.estimateCost(e.left)+this.estimateCost(e.right):e.type==="minus"?this.estimateCost(e.left)+this.estimateCost(e.right)*.3:100}setStatistics(e,t){this.stats.set(e,t)}getStatistics(e){return this.stats.get(e)}};Ou.AlgebraOptimizer=wp});var Kg=_(Cu=>{"use strict";Object.defineProperty(Cu,"__esModule",{value:!0});Cu.AlgebraSerializer=void 0;var Ep=class{static{o(this,"AlgebraSerializer")}toString(e,t=0){let n="  ".repeat(t);switch(e.type){case"bgp":return`${n}BGP [
${e.triples.map(f=>`${n}  ${this.tripleToString(f)}`).join(`
`)}
${n}]`;case"filter":return`${n}Filter(
${n}  ${this.expressionToString(e.expression)}
${this.toString(e.input,t+1)}
${n})`;case"join":return`${n}Join(
${this.toString(e.left,t+1)}
${this.toString(e.right,t+1)}
${n})`;case"leftjoin":let i=e.expression?` ${this.expressionToString(e.expression)}`:"";return`${n}LeftJoin(${i}
${this.toString(e.left,t+1)}
${this.toString(e.right,t+1)}
${n})`;case"union":return`${n}Union(
${this.toString(e.left,t+1)}
${this.toString(e.right,t+1)}
${n})`;case"minus":return`${n}Minus(
${this.toString(e.left,t+1)}
${this.toString(e.right,t+1)}
${n})`;case"project":return`${n}Project [${e.variables.map(f=>`?${f}`).join(", ")}](
${this.toString(e.input,t+1)}
${n})`;case"orderby":let s=e.comparators.map(f=>`${this.expressionToString(f.expression)} ${f.descending?"DESC":"ASC"}`).join(", ");return`${n}OrderBy [${s}](
${this.toString(e.input,t+1)}
${n})`;case"slice":let a=[];return e.offset!==void 0&&a.push(`OFFSET ${e.offset}`),e.limit!==void 0&&a.push(`LIMIT ${e.limit}`),`${n}Slice [${a.join(", ")}](
${this.toString(e.input,t+1)}
${n})`;case"distinct":return`${n}Distinct(
${this.toString(e.input,t+1)}
${n})`;case"group":let c=e.variables.length>0?`[${e.variables.map(f=>`?${f}`).join(", ")}]`:"[]",u=e.aggregates.length>0?e.aggregates.map(f=>`?${f.variable} = ${f.expression.aggregation}(${f.expression.distinct?"DISTINCT ":""}${f.expression.expression?this.expressionToString(f.expression.expression):"*"})`).join(", "):"";return`${n}Group ${c}${u?` [${u}]`:""}(
${this.toString(e.input,t+1)}
${n})`;case"extend":return`${n}Extend (?${e.variable} = ${this.expressionToString(e.expression)})(
${this.toString(e.input,t+1)}
${n})`;case"subquery":return`${n}Subquery(
${this.toString(e.query,t+1)}
${n})`;default:return`${n}Unknown(${e.type})`}}tripleToString(e){return`${this.elementToString(e.subject)} ${this.predicateToString(e.predicate)} ${this.elementToString(e.object)}`}predicateToString(e){return this.isPropertyPath(e)?this.propertyPathToString(e):this.elementToString(e)}isPropertyPath(e){return e.type==="path"}propertyPathToString(e){let t=e.items.map(n=>n.type==="path"?`(${this.propertyPathToString(n)})`:`<${n.value}>`);switch(e.pathType){case"/":return t.join("/");case"|":return t.join("|");case"^":return`^${t[0]}`;case"+":return`${t[0]}+`;case"*":return`${t[0]}*`;case"?":return`${t[0]}?`}}elementToString(e){switch(e.type){case"variable":return`?${e.value}`;case"iri":return`<${e.value}>`;case"literal":let t=`"${e.value}"`;return e.language&&(t+=`@${e.language}`),e.datatype&&(t+=`^^<${e.datatype}>`),t;case"blank":return`_:${e.value}`;default:return String(e)}}expressionToString(e){switch(e.type){case"variable":return`?${e.name}`;case"literal":return typeof e.value=="string"?`"${e.value}"`:String(e.value);case"comparison":return`(${this.expressionToString(e.left)} ${e.operator} ${this.expressionToString(e.right)})`;case"logical":return e.operator==="!"?`!(${this.expressionToString(e.operands[0])})`:`(${e.operands.map(t=>this.expressionToString(t)).join(` ${e.operator} `)})`;case"arithmetic":return`(${this.expressionToString(e.left)} ${e.operator} ${this.expressionToString(e.right)})`;case"function":return`${e.function}(${e.args.map(t=>this.expressionToString(t)).join(", ")})`;case"exists":return`${e.negated?"NOT EXISTS":"EXISTS"} { ${this.toString(e.pattern,0)} }`;default:return"unknown"}}toJSON(e){return JSON.stringify(e,null,2)}};Cu.AlgebraSerializer=Ep});var ss=_(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.SolutionMapping=void 0;var Yg=Mt(),Qg=mt(),Jg=Cr(),Tp=class r{static{o(this,"SolutionMapping")}constructor(e){this.bindings=e?new Map(e):new Map}get(e){return this.bindings.get(e)}set(e,t){this.bindings.set(e,t)}has(e){return this.bindings.has(e)}variables(){return Array.from(this.bindings.keys())}getBindings(){return new Map(this.bindings)}isCompatibleWith(e){for(let[t,n]of this.bindings.entries()){let i=e.get(t);if(i!==void 0&&!this.areEqual(n,i))return!1}return!0}merge(e){if(!this.isCompatibleWith(e))return null;let t=new r(this.bindings);for(let[n,i]of e.getBindings().entries())t.set(n,i);return t}clone(){return new r(this.bindings)}areEqual(e,t){return e instanceof Yg.Literal&&t instanceof Yg.Literal?e.equals(t):e instanceof Qg.IRI&&t instanceof Qg.IRI?e.value===t.value:e instanceof Jg.BlankNode&&t instanceof Jg.BlankNode?e.id===t.id:!1}toJSON(){let e={};for(let[t,n]of this.bindings.entries())e[t]=n.toString();return e}size(){return this.bindings.size}};Fu.SolutionMapping=Tp});var Zg=_(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.PropertyPathExecutor=Us.PropertyPathExecutorError=void 0;var TA=ss(),Pu=mt(),Xg=Cr(),Ja=class extends Error{static{o(this,"PropertyPathExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="PropertyPathExecutorError"}};Us.PropertyPathExecutorError=Ja;var xp=class{static{o(this,"PropertyPathExecutor")}constructor(e){this.tripleStore=e,this.MAX_DEPTH=100}async*execute(e,t,n){let i=await this.resolveElement(e),s=this.isVariable(n)?null:await this.resolveElement(n);for(let a of i){let c=await this.evaluatePath(a,t,s);for(let u of c){let f=new TA.SolutionMapping;this.isVariable(e)&&f.set(e.value,a),this.isVariable(n)&&f.set(n.value,u),yield f}}}async*executeWithBindings(e,t){if(!this.isPropertyPath(e.predicate))throw new Ja("Predicate is not a property path");let n=this.instantiateElement(e.subject,t),i=this.instantiateElement(e.object,t);for await(let s of this.execute(n,e.predicate,i)){let a=t.merge(s);a!==null&&(yield a)}}async evaluatePath(e,t,n){switch(t.pathType){case"/":return this.evaluateSequencePath(e,t.items,n);case"|":return this.evaluateAlternativePath(e,t.items,n);case"^":return this.evaluateInversePath(e,t.items[0],n);case"+":return this.evaluateOneOrMorePath(e,t.items[0],n);case"*":return this.evaluateZeroOrMorePath(e,t.items[0],n);case"?":return this.evaluateZeroOrOnePath(e,t.items[0],n)}}async evaluateSequencePath(e,t,n){let i=new Set([e]);for(let s=0;s<t.length;s++){let a=t[s],c=s===t.length-1,u=new Set;for(let f of i){let l=await this.evaluatePathItem(f,a,c?n:null);for(let h of l)u.add(h)}if(i=u,i.size===0)break}return i}async evaluateAlternativePath(e,t,n){let i=new Set;for(let s of t){let a=await this.evaluatePathItem(e,s,n);for(let c of a)i.add(c)}return i}async evaluateInversePath(e,t,n){if(t.type==="iri"){let i=new Pu.IRI(t.value),s=await this.tripleStore.match(void 0,i,e),a=new Set;for(let c of s)(n===null||this.nodeInSet(c.subject,n))&&a.add(c.subject);return a}else return this.evaluatePath(e,this.invertPath(t),n)}async evaluateOneOrMorePath(e,t,n){let i=new Set,s=new Set,a=[{node:e,depth:0}];for(;a.length>0;){let{node:c,depth:u}=a.shift();if(u>=this.MAX_DEPTH)continue;let f=await this.evaluatePathItem(c,t,null);for(let l of f){let h=this.nodeToKey(l);(n===null||this.nodeInSet(l,n))&&s.add(l),i.has(h)||(i.add(h),a.push({node:l,depth:u+1}))}}return s}async evaluateZeroOrMorePath(e,t,n){let i=await this.evaluateOneOrMorePath(e,t,n);return(n===null||this.nodeInSet(e,n))&&i.add(e),i}async evaluateZeroOrOnePath(e,t,n){let i=new Set;(n===null||this.nodeInSet(e,n))&&i.add(e);let s=await this.evaluatePathItem(e,t,n);for(let a of s)i.add(a);return i}async evaluatePathItem(e,t,n){if(t.type==="iri"){let i=new Pu.IRI(t.value),s=await this.tripleStore.match(e,i,void 0),a=new Set;for(let c of s)(n===null||this.nodeInSet(c.object,n))&&a.add(c.object);return a}else return this.evaluatePath(e,t,n)}invertPath(e){switch(e.pathType){case"^":return e.items[0];case"/":return{type:"path",pathType:"/",items:[...e.items].reverse().map(n=>n.type==="iri"?{type:"path",pathType:"^",items:[n]}:this.invertPath(n))};case"|":return{type:"path",pathType:"|",items:e.items.map(n=>n.type==="iri"?{type:"path",pathType:"^",items:[n]}:this.invertPath(n))};case"+":case"*":case"?":let t=e.items[0].type==="iri"?{type:"path",pathType:"^",items:[e.items[0]]}:this.invertPath(e.items[0]);return{type:"path",pathType:e.pathType,items:[t]}}}async resolveElement(e){if(this.isVariable(e)){let n=new Set,i=await this.tripleStore.match(void 0,void 0,void 0);for(let s of i)n.add(s.subject),n.add(s.object);return n}let t=new Set;switch(e.type){case"iri":t.add(new Pu.IRI(e.value));break;case"blank":t.add(new Xg.BlankNode(e.value));break;default:throw new Ja(`Unsupported element type in subject/object position: ${e.type}`)}return t}instantiateElement(e,t){if(this.isVariable(e)){let n=t.get(e.value);if(n){if(n instanceof Pu.IRI)return{type:"iri",value:n.value};if(n instanceof Xg.BlankNode)return{type:"blank",value:n.id}}}return e}isVariable(e){return e.type==="variable"}isPropertyPath(e){return e.type==="path"}nodeToKey(e){return e.toString()}nodeInSet(e,t){let n=this.nodeToKey(e);for(let i of t)if(this.nodeToKey(i)===n)return!0;return!1}};Us.PropertyPathExecutor=xp});var Cp=_(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.BGPExecutor=Bs.BGPExecutorError=void 0;var ey=ss(),Xa=mt(),ty=Mt(),Ap=Cr(),xA=Zg(),wr=class extends Error{static{o(this,"BGPExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="BGPExecutorError"}};Bs.BGPExecutorError=wr;var Op=class{static{o(this,"BGPExecutor")}constructor(e){this.tripleStore=e,this.propertyPathExecutor=new xA.PropertyPathExecutor(e)}async*execute(e){if(e.triples.length===0){yield new ey.SolutionMapping;return}let t=this.matchTriplePattern(e.triples[0]);for(let n=1;n<e.triples.length;n++)t=this.joinWithPattern(t,e.triples[n]);for await(let n of t)yield n}async executeAll(e){let t=[];for await(let n of this.execute(e))t.push(n);return t}async*matchTriplePattern(e){if(this.isPropertyPath(e.predicate)){yield*this.propertyPathExecutor.execute(e.subject,e.predicate,e.object);return}let t=e.predicate,n=this.isVariable(e.subject)?void 0:this.toRDFTermAsSubject(e.subject),i=this.isVariable(t)?void 0:this.toRDFTermAsPredicate(t),s=this.isVariable(e.object)?void 0:this.toRDFTerm(e.object),a=await this.tripleStore.match(n,i,s);for(let c of a){let u=new ey.SolutionMapping;this.isVariable(e.subject)&&u.set(e.subject.value,c.subject),this.isVariable(t)&&u.set(t.value,c.predicate),this.isVariable(e.object)&&u.set(e.object.value,c.object),yield u}}isPropertyPath(e){return e.type==="path"}async*joinWithPattern(e,t){let n=[];for await(let i of e)n.push(i);for(let i of n){let s=this.instantiatePattern(t,i);for await(let a of this.matchTriplePattern(s)){let c=i.merge(a);c!==null&&(yield c)}}}instantiatePattern(e,t){let n=this.isPropertyPath(e.predicate)?e.predicate:this.instantiateElement(e.predicate,t);return{subject:this.instantiateElement(e.subject,t),predicate:n,object:this.instantiateElement(e.object,t)}}instantiateElement(e,t){if(this.isVariable(e)){let n=t.get(e.value);if(n)return this.toAlgebraElement(n)}return e}isVariable(e){return e.type==="variable"}toRDFTermAsSubject(e){switch(e.type){case"iri":return new Xa.IRI(e.value);case"blank":return new Ap.BlankNode(e.value);case"literal":throw new wr("Literals cannot appear in subject position");case"variable":throw new wr(`Cannot convert variable to RDF term: ${e.value}`);default:throw new wr(`Unknown element type: ${e.type}`)}}toRDFTermAsPredicate(e){switch(e.type){case"iri":return new Xa.IRI(e.value);case"literal":throw new wr("Literals cannot appear in predicate position");case"blank":throw new wr("Blank nodes cannot appear in predicate position");case"variable":throw new wr(`Cannot convert variable to RDF term: ${e.value}`);default:throw new wr(`Unknown element type: ${e.type}`)}}toRDFTerm(e){switch(e.type){case"iri":return new Xa.IRI(e.value);case"literal":return new ty.Literal(e.value,e.datatype?new Xa.IRI(e.datatype):void 0,e.language);case"blank":return new Ap.BlankNode(e.value);case"variable":throw new wr(`Cannot convert variable to RDF term: ${e.value}`);default:throw new wr(`Unknown element type: ${e.type}`)}}toAlgebraElement(e){if(e instanceof Xa.IRI)return{type:"iri",value:e.value};if(e instanceof ty.Literal)return{type:"literal",value:e.value,datatype:e.datatype?.value,language:e.language};if(e instanceof Ap.BlankNode)return{type:"blank",value:e.id};throw new wr(`Unknown RDF term type: ${e.constructor?.name||"unknown"}`)}};Bs.BGPExecutor=Op});var ny=_(as=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});as.md5=AA;as.sha1=OA;as.sha256=CA;as.sha384=FA;as.sha512=PA;function Iu(r){return new TextEncoder().encode(r)}o(Iu,"stringToBytes");function Du(r){return Array.from(r).map(e=>e.toString(16).padStart(2,"0")).join("")}o(Du,"bytesToHex");function AA(r){let e=Iu(r),t=1732584193,n=4023233417,i=2562383102,s=271733878,a=new Uint32Array(64);for(let b=0;b<64;b++)a[b]=Math.floor(Math.abs(Math.sin(b+1))*4294967296)>>>0;let c=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],u=e.length*8,f=(e.length+8>>>6)+1<<6,l=new Uint8Array(f);l.set(e),l[e.length]=128;let h=new DataView(l.buffer);h.setUint32(f-8,u,!0),h.setUint32(f-4,Math.floor(u/4294967296),!0);for(let b=0;b<f;b+=64){let y=new Uint32Array(16);for(let I=0;I<16;I++)y[I]=h.getUint32(b+I*4,!0);let x=t,A=n,C=i,j=s;for(let I=0;I<64;I++){let U,se;I<16?(U=A&C|~A&j,se=I):I<32?(U=j&A|~j&C,se=(5*I+1)%16):I<48?(U=A^C^j,se=(3*I+5)%16):(U=C^(A|~j),se=7*I%16),U=U+x+a[I]+y[se]>>>0,x=j,j=C,C=A,A=A+(U<<c[I]|U>>>32-c[I])>>>0}t=t+x>>>0,n=n+A>>>0,i=i+C>>>0,s=s+j>>>0}let p=new Uint8Array(16),m=new DataView(p.buffer);return m.setUint32(0,t,!0),m.setUint32(4,n,!0),m.setUint32(8,i,!0),m.setUint32(12,s,!0),Du(p)}o(AA,"md5");function OA(r){let e=Iu(r),t=1732584193,n=4023233417,i=2562383102,s=271733878,a=3285377520,c=e.length*8,u=(e.length+8>>>6)+1<<6,f=new Uint8Array(u);f.set(e),f[e.length]=128;let l=new DataView(f.buffer);l.setUint32(u-8,Math.floor(c/4294967296),!1),l.setUint32(u-4,c,!1);for(let m=0;m<u;m+=64){let b=new Uint32Array(80);for(let I=0;I<16;I++)b[I]=l.getUint32(m+I*4,!1);for(let I=16;I<80;I++){let U=b[I-3]^b[I-8]^b[I-14]^b[I-16];b[I]=U<<1|U>>>31}let y=t,x=n,A=i,C=s,j=a;for(let I=0;I<80;I++){let U,se;I<20?(U=x&A|~x&C,se=1518500249):I<40?(U=x^A^C,se=1859775393):I<60?(U=x&A|x&C|A&C,se=2400959708):(U=x^A^C,se=3395469782);let Me=(y<<5|y>>>27)+U+j+se+b[I]>>>0;j=C,C=A,A=x<<30|x>>>2,x=y,y=Me}t=t+y>>>0,n=n+x>>>0,i=i+A>>>0,s=s+C>>>0,a=a+j>>>0}let h=new Uint8Array(20),p=new DataView(h.buffer);return p.setUint32(0,t,!1),p.setUint32(4,n,!1),p.setUint32(8,i,!1),p.setUint32(12,s,!1),p.setUint32(16,a,!1),Du(h)}o(OA,"sha1");function CA(r){let e=Iu(r),t=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),n=1779033703,i=3144134277,s=1013904242,a=2773480762,c=1359893119,u=2600822924,f=528734635,l=1541459225,h=e.length*8,p=(e.length+8>>>6)+1<<6,m=new Uint8Array(p);m.set(e),m[e.length]=128;let b=new DataView(m.buffer);b.setUint32(p-8,Math.floor(h/4294967296),!1),b.setUint32(p-4,h,!1);let y=o((ee,M)=>M>>>ee|M<<32-ee,"rotr"),x=o((ee,M,N)=>ee&M^~ee&N,"ch"),A=o((ee,M,N)=>ee&M^ee&N^M&N,"maj"),C=o(ee=>y(2,ee)^y(13,ee)^y(22,ee),"sigma0"),j=o(ee=>y(6,ee)^y(11,ee)^y(25,ee),"sigma1"),I=o(ee=>y(7,ee)^y(18,ee)^ee>>>3,"gamma0"),U=o(ee=>y(17,ee)^y(19,ee)^ee>>>10,"gamma1");for(let ee=0;ee<p;ee+=64){let M=new Uint32Array(64);for(let V=0;V<16;V++)M[V]=b.getUint32(ee+V*4,!1);for(let V=16;V<64;V++)M[V]=U(M[V-2])+M[V-7]+I(M[V-15])+M[V-16]>>>0;let N=n,K=i,Ae=s,Ve=a,Le=c,we=u,be=f,me=l;for(let V=0;V<64;V++){let L=me+j(Le)+x(Le,we,be)+t[V]+M[V]>>>0,ae=C(N)+A(N,K,Ae)>>>0;me=be,be=we,we=Le,Le=Ve+L>>>0,Ve=Ae,Ae=K,K=N,N=L+ae>>>0}n=n+N>>>0,i=i+K>>>0,s=s+Ae>>>0,a=a+Ve>>>0,c=c+Le>>>0,u=u+we>>>0,f=f+be>>>0,l=l+me>>>0}let se=new Uint8Array(32),Me=new DataView(se.buffer);return Me.setUint32(0,n,!1),Me.setUint32(4,i,!1),Me.setUint32(8,s,!1),Me.setUint32(12,a,!1),Me.setUint32(16,c,!1),Me.setUint32(20,u,!1),Me.setUint32(24,f,!1),Me.setUint32(28,l,!1),Du(se)}o(CA,"sha256");function R(r){return BigInt("0x"+r)}o(R,"B");function ry(r,e){let t=Iu(r),n=[R("428a2f98d728ae22"),R("7137449123ef65cd"),R("b5c0fbcfec4d3b2f"),R("e9b5dba58189dbbc"),R("3956c25bf348b538"),R("59f111f1b605d019"),R("923f82a4af194f9b"),R("ab1c5ed5da6d8118"),R("d807aa98a3030242"),R("12835b0145706fbe"),R("243185be4ee4b28c"),R("550c7dc3d5ffb4e2"),R("72be5d74f27b896f"),R("80deb1fe3b1696b1"),R("9bdc06a725c71235"),R("c19bf174cf692694"),R("e49b69c19ef14ad2"),R("efbe4786384f25e3"),R("0fc19dc68b8cd5b5"),R("240ca1cc77ac9c65"),R("2de92c6f592b0275"),R("4a7484aa6ea6e483"),R("5cb0a9dcbd41fbd4"),R("76f988da831153b5"),R("983e5152ee66dfab"),R("a831c66d2db43210"),R("b00327c898fb213f"),R("bf597fc7beef0ee4"),R("c6e00bf33da88fc2"),R("d5a79147930aa725"),R("06ca6351e003826f"),R("142929670a0e6e70"),R("27b70a8546d22ffc"),R("2e1b21385c26c926"),R("4d2c6dfc5ac42aed"),R("53380d139d95b3df"),R("650a73548baf63de"),R("766a0abb3c77b2a8"),R("81c2c92e47edaee6"),R("92722c851482353b"),R("a2bfe8a14cf10364"),R("a81a664bbc423001"),R("c24b8b70d0f89791"),R("c76c51a30654be30"),R("d192e819d6ef5218"),R("d69906245565a910"),R("f40e35855771202a"),R("106aa07032bbd1b8"),R("19a4c116b8d2d0c8"),R("1e376c085141ab53"),R("2748774cdf8eeb99"),R("34b0bcb5e19b48a8"),R("391c0cb3c5c95a63"),R("4ed8aa4ae3418acb"),R("5b9cca4f7763e373"),R("682e6ff3d6b2b8a3"),R("748f82ee5defb2fc"),R("78a5636f43172f60"),R("84c87814a1f0ab72"),R("8cc702081a6439ec"),R("90befffa23631e28"),R("a4506cebde82bde9"),R("bef9a3f7b2c67915"),R("c67178f2e372532b"),R("ca273eceea26619c"),R("d186b8c721c0c207"),R("eada7dd6cde0eb1e"),R("f57d4f7fee6ed178"),R("06f067aa72176fba"),R("0a637dc5a2c898a6"),R("113f9804bef90dae"),R("1b710b35131c471b"),R("28db77f523047d84"),R("32caab7b40c72493"),R("3c9ebe0a15c9bebc"),R("431d67c49c100d4c"),R("4cc5d4becb3e42b6"),R("597f299cfc657e2a"),R("5fcb6fab3ad6faec"),R("6c44198c4a475817")],i;e?i=[R("cbbb9d5dc1059ed8"),R("629a292a367cd507"),R("9159015a3070dd17"),R("152fecd8f70e5939"),R("67332667ffc00b31"),R("8eb44a8768581511"),R("db0c2e0d64f98fa7"),R("47b5481dbefa4fa4")]:i=[R("6a09e667f3bcc908"),R("bb67ae8584caa73b"),R("3c6ef372fe94f82b"),R("a54ff53a5f1d36f1"),R("510e527fade682d1"),R("9b05688c2b3e6c1f"),R("1f83d9abfb41bd6b"),R("5be0cd19137e2179")];let s=R("ffffffffffffffff"),a=R("ffffffff"),c=BigInt(32),u=BigInt(6),f=BigInt(7),l=BigInt(t.length*8),h=(t.length+16>>>7)+1<<7,p=new Uint8Array(h);p.set(t),p[t.length]=128;let m=new DataView(p.buffer),b=h-8;m.setUint32(b,Number(l>>c&a),!1),m.setUint32(b+4,Number(l&a),!1);let y=o((N,K)=>(K>>BigInt(N)|K<<BigInt(64-N))&s,"rotr"),x=o((N,K,Ae)=>N&K^~N&Ae,"ch"),A=o((N,K,Ae)=>N&K^N&Ae^K&Ae,"maj"),C=o(N=>y(28,N)^y(34,N)^y(39,N),"sigma0"),j=o(N=>y(14,N)^y(18,N)^y(41,N),"sigma1"),I=o(N=>y(1,N)^y(8,N)^N>>f,"gamma0"),U=o(N=>y(19,N)^y(61,N)^N>>u,"gamma1");for(let N=0;N<h;N+=128){let K=new Array(80);for(let ae=0;ae<16;ae++){let qe=BigInt(m.getUint32(N+ae*8,!1)),q=BigInt(m.getUint32(N+ae*8+4,!1));K[ae]=(qe<<c|q)&s}for(let ae=16;ae<80;ae++)K[ae]=U(K[ae-2])+K[ae-7]+I(K[ae-15])+K[ae-16]&s;let[Ae,Ve,Le,we,be,me,V,L]=i;for(let ae=0;ae<80;ae++){let qe=L+j(be)+x(be,me,V)+n[ae]+K[ae]&s,q=C(Ae)+A(Ae,Ve,Le)&s;L=V,V=me,me=be,be=we+qe&s,we=Le,Le=Ve,Ve=Ae,Ae=qe+q&s}i[0]=i[0]+Ae&s,i[1]=i[1]+Ve&s,i[2]=i[2]+Le&s,i[3]=i[3]+we&s,i[4]=i[4]+be&s,i[5]=i[5]+me&s,i[6]=i[6]+V&s,i[7]=i[7]+L&s}let se=e?48:64,Me=e?6:8,ee=new Uint8Array(se),M=new DataView(ee.buffer);for(let N=0;N<Me;N++)M.setUint32(N*8,Number(i[N]>>c&a),!1),M.setUint32(N*8+4,Number(i[N]&a),!1);return Du(ee)}o(ry,"sha512Core");function FA(r){return ry(r,!0)}o(FA,"sha384");function PA(r){return ry(r,!1)}o(PA,"sha512")});var Pp=_(An=>{"use strict";var IA=An&&An.__createBinding||(Object.create?(function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,n,i)}):(function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]})),DA=An&&An.__setModuleDefault||(Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e}),RA=An&&An.__importStar||(function(){var r=o(function(e){return r=Object.getOwnPropertyNames||function(t){var n=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[n.length]=i);return n},r(e)},"ownKeys");return function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n=r(e),i=0;i<n.length;i++)n[i]!=="default"&&IA(t,e,n[i]);return DA(t,e),t}})();Object.defineProperty(An,"__esModule",{value:!0});An.BuiltInFunctions=void 0;var Za=RA(ny()),xn=mt(),an=Mt(),eo=Cr(),Fp=class{static{o(this,"BuiltInFunctions")}static str(e){if(e===void 0)throw new Error("STR: argument is undefined");return e instanceof xn.IRI||e instanceof an.Literal?e.value:e instanceof eo.BlankNode?e.id:String(e)}static lang(e){if(e===void 0)throw new Error("LANG: argument is undefined");return e instanceof an.Literal&&e.language?e.language:""}static langMatches(e,t){let n=e.toLowerCase(),i=t.toLowerCase();return i==="*"?n!=="":n===""?i==="":n===i?!0:n.startsWith(i+"-")}static datatype(e){if(e===void 0)throw new Error("DATATYPE: argument is undefined");if(e instanceof an.Literal)return e.datatype?e.datatype:e.language?new xn.IRI("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"):new xn.IRI("http://www.w3.org/2001/XMLSchema#string");throw new Error("DATATYPE: argument must be a literal")}static bound(e){return e!==void 0}static isIRI(e){return e===void 0?!1:e instanceof xn.IRI}static isBlank(e){return e===void 0?!1:e instanceof eo.BlankNode}static isLiteral(e){return e===void 0?!1:e instanceof an.Literal}static isNumeric(e){if(e===void 0||!(e instanceof an.Literal))return!1;let t=e.datatype?.value;return t?["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float","http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedShort","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#positiveInteger"].includes(t):!1}static regex(e,t,n){try{return new RegExp(t,n).test(e)}catch(i){throw new Error(`REGEX: invalid pattern '${t}': ${i.message}`)}}static compare(e,t,n){let i=this.toComparableValue(e),s=this.toComparableValue(t);switch(n){case"=":return i===s;case"!=":return i!==s;case"<":return i<s;case">":return i>s;case"<=":return i<=s;case">=":return i>=s;default:throw new Error(`Unknown comparison operator: ${n}`)}}static toComparableValue(e){if(typeof e=="string"||typeof e=="number")return e;if(e instanceof an.Literal){let t=e.datatype?.value;if(t?.includes("#integer")||t?.includes("#decimal")||t?.includes("#double")){let n=parseFloat(e.value);if(!isNaN(n))return n}return e.value}return e instanceof xn.IRI?e.value:e instanceof eo.BlankNode?e.id:String(e)}static contains(e,t){return e.includes(t)}static strStarts(e,t){return e.startsWith(t)}static strEnds(e,t){return e.endsWith(t)}static strlen(e){return e.length}static ucase(e){return e.toUpperCase()}static lcase(e){return e.toLowerCase()}static substr(e,t,n){let i=t-1;if(i<0){if(n!==void 0){let s=n+i;return s<=0?"":e.substring(0,s)}return e}return n!==void 0?e.substring(i,i+n):e.substring(i)}static strBefore(e,t){if(t==="")return"";let n=e.indexOf(t);return n===-1?"":e.substring(0,n)}static strAfter(e,t){if(t==="")return e;let n=e.indexOf(t);return n===-1?"":e.substring(n+t.length)}static concat(...e){return e.join("")}static replace(e,t,n,i){try{let s=new RegExp(t,i||"g");return e.replace(s,n)}catch(s){throw new Error(`REPLACE: invalid pattern '${t}': ${s.message}`)}}static parseDate(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`PARSEDATE: invalid date string '${e}'`);return t.getTime()}static dateBefore(e,t){let n=this.parseDate(e),i=this.parseDate(t);return n<i}static dateAfter(e,t){let n=this.parseDate(e),i=this.parseDate(t);return n>i}static dateInRange(e,t,n){let i=this.parseDate(e),s=this.parseDate(t),a=this.parseDate(n);return i>=s&&i<=a}static dateDiffMinutes(e,t){let n=this.parseDate(e),i=this.parseDate(t),s=Math.abs(i-n);return Math.round(s/(1e3*60))}static dateDiffHours(e,t){let n=this.parseDate(e),i=this.parseDate(t),s=Math.abs(i-n);return Math.round(s/(1e3*60*60)*100)/100}static logicalAnd(e){return e.every(t=>t===!0)}static logicalOr(e){return e.some(t=>t===!0)}static logicalNot(e){return!e}static year(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`YEAR: invalid date string '${e}'`);return t.getFullYear()}static month(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`MONTH: invalid date string '${e}'`);return t.getMonth()+1}static day(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`DAY: invalid date string '${e}'`);return t.getDate()}static hours(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`HOURS: invalid date string '${e}'`);return t.getHours()}static minutes(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`MINUTES: invalid date string '${e}'`);return t.getMinutes()}static seconds(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`SECONDS: invalid date string '${e}'`);return t.getSeconds()+t.getMilliseconds()/1e3}static timezone(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`TIMEZONE: invalid date string '${e}'`);if(e.endsWith("Z"))return"PT0S";let n=e.match(/([+-]\d{2}):?(\d{2})$/);if(n){let u=parseInt(n[1],10),f=parseInt(n[2],10),l=u>=0?"":"-",h=Math.abs(u);return f===0?`${l}PT${h}H`:`${l}PT${h}H${f}M`}let i=-t.getTimezoneOffset(),s=Math.floor(Math.abs(i)/60),a=Math.abs(i)%60,c=i>=0?"":"-";return a===0?`${c}PT${s}H`:`${c}PT${s}H${a}M`}static now(){return new Date().toISOString()}static msToMinutes(e){return Math.round(e/(1e3*60))}static msToHours(e){return Math.round(e/(1e3*60*60)*100)/100}static msToSeconds(e){return Math.round(e/1e3)}static abs(e){return Math.abs(e)}static round(e){return Math.round(e)}static ceil(e){return Math.ceil(e)}static floor(e){return Math.floor(e)}static rand(){return Math.random()}static coalesce(e){for(let t of e)if(t!=null)return t}static if(e,t,n){return e?t:n}static xsdDateTime(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`xsd:dateTime: invalid date string '${e}'`);return new an.Literal(t.toISOString(),new xn.IRI("http://www.w3.org/2001/XMLSchema#dateTime"))}static xsdInteger(e){let t=parseInt(e,10);if(isNaN(t))throw new Error(`xsd:integer: cannot convert '${e}' to integer`);return new an.Literal(String(t),new xn.IRI("http://www.w3.org/2001/XMLSchema#integer"))}static xsdDecimal(e){let t=parseFloat(e);if(isNaN(t))throw new Error(`xsd:decimal: cannot convert '${e}' to decimal`);return new an.Literal(String(t),new xn.IRI("http://www.w3.org/2001/XMLSchema#decimal"))}static encodeForUri(e){return encodeURIComponent(e)}static md5(e){return Za.md5(e)}static sha1(e){return Za.sha1(e)}static sha256(e){return Za.sha256(e)}static sha384(e){return Za.sha384(e)}static sha512(e){return Za.sha512(e)}static sameTerm(e,t){if(e===void 0&&t===void 0)return!0;if(e===void 0||t===void 0||e.constructor!==t.constructor)return!1;if(e instanceof xn.IRI&&t instanceof xn.IRI)return e.value===t.value;if(e instanceof eo.BlankNode&&t instanceof eo.BlankNode)return e.id===t.id;if(e instanceof an.Literal&&t instanceof an.Literal){if(e.value!==t.value||e.language!==t.language)return!1;let n=e.datatype?.value,i=t.datatype?.value;return n===i}return!1}};An.BuiltInFunctions=Fp});var Nu=_($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.FilterExecutor=$s.FilterExecutorError=void 0;var z=Pp(),Ru=Mt(),It=class extends Error{static{o(this,"FilterExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="FilterExecutorError"}};$s.FilterExecutorError=It;var Ip=class{static{o(this,"FilterExecutor")}constructor(){this.existsEvaluator=null}setExistsEvaluator(e){this.existsEvaluator=e}async*execute(e,t){let n=this.expressionContainsExists(e.expression);for await(let i of t)try{let s;n?s=await this.evaluateExpressionAsync(e.expression,i):s=this.evaluateExpression(e.expression,i),s===!0&&(yield i)}catch{continue}}expressionContainsExists(e){if(e.type==="exists")return!0;if(e.type==="logical")return e.operands.some(t=>this.expressionContainsExists(t));if(e.type==="comparison")return this.expressionContainsExists(e.left)||this.expressionContainsExists(e.right);if(e.type==="in"){let t=e;return this.expressionContainsExists(t.expression)||t.list.some(n=>this.expressionContainsExists(n))}return!1}async executeAll(e,t){let n=[];async function*i(){for(let s of t)yield s}o(i,"generator");for await(let s of this.execute(e,i()))n.push(s);return n}evaluateExpression(e,t){let n=e;if(n.termType)switch(n.termType){case"Variable":return t.get(n.value);case"Literal":return n.value;case"NamedNode":return n.value;default:throw new It(`Unsupported termType: ${n.termType}`)}switch(e.type){case"comparison":return this.evaluateComparison(e,t);case"logical":return this.evaluateLogical(e,t);case"arithmetic":return this.evaluateArithmetic(e,t);case"function":case"functionCall":return this.evaluateFunction(e,t);case"variable":return t.get(e.name);case"literal":return e.value;case"in":return this.evaluateIn(e,t);case"exists":throw new It("EXISTS expressions require async evaluation. Use evaluateExpressionAsync instead.");default:throw new It(`Unsupported expression type: ${e.type}, expr.termType=${n.termType}`)}}async evaluateExpressionAsync(e,t){return e.type==="exists"?this.evaluateExists(e,t):e.type==="logical"?this.evaluateLogicalAsync(e,t):this.evaluateExpression(e,t)}async evaluateExists(e,t){if(!this.existsEvaluator)throw new It("EXISTS evaluator not set. Call setExistsEvaluator before evaluating EXISTS expressions.");let n=await this.existsEvaluator(e.pattern,t);return e.negated?!n:n}async evaluateLogicalAsync(e,t){if(e.operator==="!"){let i=await this.evaluateExpressionAsync(e.operands[0],t);return z.BuiltInFunctions.logicalNot(i)}let n=[];for(let i of e.operands){let s=await this.evaluateExpressionAsync(i,t);n.push(s)}if(e.operator==="&&")return z.BuiltInFunctions.logicalAnd(n);if(e.operator==="||")return z.BuiltInFunctions.logicalOr(n);throw new It(`Unknown logical operator: ${e.operator}`)}evaluateComparison(e,t){let n=this.evaluateExpression(e.left,t),i=this.evaluateExpression(e.right,t);return z.BuiltInFunctions.compare(n,i,e.operator)}evaluateLogical(e,t){if(e.operator==="!"){let i=this.evaluateExpression(e.operands[0],t);return z.BuiltInFunctions.logicalNot(i)}let n=e.operands.map(i=>this.evaluateExpression(i,t));if(e.operator==="&&")return z.BuiltInFunctions.logicalAnd(n);if(e.operator==="||")return z.BuiltInFunctions.logicalOr(n);throw new It(`Unknown logical operator: ${e.operator}`)}evaluateIn(e,t){let n=this.evaluateExpression(e.expression,t),i=e.list.some(s=>{let a=this.evaluateExpression(s,t);return z.BuiltInFunctions.compare(n,a,"=")});return e.negated?!i:i}evaluateArithmetic(e,t){let n=this.evaluateExpression(e.left,t),i=this.evaluateExpression(e.right,t),s=this.toNumericValue(n),a=this.toNumericValue(i);if(e.operator==="-"&&this.isDateTimeValue(n)&&this.isDateTimeValue(i)){let c=this.parseDateTimeToMs(n),u=this.parseDateTimeToMs(i);return c-u}switch(e.operator){case"+":return s+a;case"-":return s-a;case"*":return s*a;case"/":if(a===0)throw new It("Division by zero");return s/a;default:throw new It(`Unknown arithmetic operator: ${e.operator}`)}}toNumericValue(e){if(typeof e=="number")return e;if(e instanceof Ru.Literal){let t=e.datatype?.value||"";if(t.includes("#integer")||t.includes("#decimal")||t.includes("#double")||t.includes("#float")){let i=parseFloat(e.value);if(!isNaN(i))return i}let n=parseFloat(e.value);if(!isNaN(n))return n}if(typeof e=="string"){let t=parseFloat(e);if(!isNaN(t))return t}if(e&&typeof e=="object"&&"value"in e){let t=parseFloat(String(e.value));if(!isNaN(t))return t}throw new It(`Cannot convert to number: ${e}`)}isDateTimeValue(e){if(e instanceof Ru.Literal){let t=e.datatype?.value||"";return t.includes("#dateTime")||t.includes("#date")?!0:/^\d{4}-\d{2}-\d{2}(T|\s)/.test(e.value)}return typeof e=="string"?/^\d{4}-\d{2}-\d{2}(T|\s)/.test(e):!1}parseDateTimeToMs(e){let t;if(e instanceof Ru.Literal)t=e.value;else if(typeof e=="string")t=e;else if(e&&typeof e=="object"&&"value"in e)t=String(e.value);else throw new It(`Cannot parse dateTime: ${e}`);let n=new Date(t);if(isNaN(n.getTime()))throw new It(`Invalid dateTime format: ${t}`);return n.getTime()}evaluateFunction(e,t){let n;if(typeof e.function=="string")n=e.function.toLowerCase();else if(e.function&&typeof e.function=="object"&&"value"in e.function){let i=e.function.value;n=((i.includes("#")?i.split("#").pop():i.split("/").pop())||i).toLowerCase()}else throw new It(`Unknown function format: ${e.function}`);switch(n){case"str":let i=this.getTermFromExpression(e.args[0],t);return z.BuiltInFunctions.str(i);case"lang":let s=this.getTermFromExpression(e.args[0],t);return z.BuiltInFunctions.lang(s);case"datatype":let a=this.getTermFromExpression(e.args[0],t);return z.BuiltInFunctions.datatype(a).value;case"bound":if(e.args[0].type==="variable"){let Te=t.get(e.args[0].name);return z.BuiltInFunctions.bound(Te)}return!0;case"isiri":case"isuri":let c=this.getTermFromExpression(e.args[0],t);return z.BuiltInFunctions.isIRI(c);case"isblank":let u=this.getTermFromExpression(e.args[0],t);return z.BuiltInFunctions.isBlank(u);case"isliteral":let f=this.getTermFromExpression(e.args[0],t);return z.BuiltInFunctions.isLiteral(f);case"regex":let l=this.getStringValue(this.evaluateExpression(e.args[0],t)),h=this.getStringValue(this.evaluateExpression(e.args[1],t)),p=e.args[2]?this.getStringValue(this.evaluateExpression(e.args[2],t)):void 0;return z.BuiltInFunctions.regex(l,h,p);case"langmatches":let m=this.getStringValue(this.evaluateExpression(e.args[0],t)),b=this.getStringValue(this.evaluateExpression(e.args[1],t));return z.BuiltInFunctions.langMatches(m,b);case"contains":let y=this.getStringValue(this.evaluateExpression(e.args[0],t)),x=this.getStringValue(this.evaluateExpression(e.args[1],t));return z.BuiltInFunctions.contains(y,x);case"strstarts":let A=this.getStringValue(this.evaluateExpression(e.args[0],t)),C=this.getStringValue(this.evaluateExpression(e.args[1],t));return z.BuiltInFunctions.strStarts(A,C);case"strends":let j=this.getStringValue(this.evaluateExpression(e.args[0],t)),I=this.getStringValue(this.evaluateExpression(e.args[1],t));return z.BuiltInFunctions.strEnds(j,I);case"strlen":let U=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.strlen(U);case"ucase":let se=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.ucase(se);case"lcase":let Me=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.lcase(Me);case"substr":let ee=this.getStringValue(this.evaluateExpression(e.args[0],t)),M=Number(this.evaluateExpression(e.args[1],t));if(e.args[2]){let Te=Number(this.evaluateExpression(e.args[2],t));return z.BuiltInFunctions.substr(ee,M,Te)}return z.BuiltInFunctions.substr(ee,M);case"strbefore":let N=this.getStringValue(this.evaluateExpression(e.args[0],t)),K=this.getStringValue(this.evaluateExpression(e.args[1],t));return z.BuiltInFunctions.strBefore(N,K);case"strafter":let Ae=this.getStringValue(this.evaluateExpression(e.args[0],t)),Ve=this.getStringValue(this.evaluateExpression(e.args[1],t));return z.BuiltInFunctions.strAfter(Ae,Ve);case"concat":let Le=e.args.map(Te=>this.getStringValue(this.evaluateExpression(Te,t)));return z.BuiltInFunctions.concat(...Le);case"replace":let we=this.getStringValue(this.evaluateExpression(e.args[0],t)),be=this.getStringValue(this.evaluateExpression(e.args[1],t)),me=this.getStringValue(this.evaluateExpression(e.args[2],t)),V=e.args[3]?this.getStringValue(this.evaluateExpression(e.args[3],t)):void 0;return z.BuiltInFunctions.replace(we,be,me,V);case"parsedate":let L=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.parseDate(L);case"datebefore":let ae=this.getStringValue(this.evaluateExpression(e.args[0],t)),qe=this.getStringValue(this.evaluateExpression(e.args[1],t));return z.BuiltInFunctions.dateBefore(ae,qe);case"dateafter":let q=this.getStringValue(this.evaluateExpression(e.args[0],t)),ge=this.getStringValue(this.evaluateExpression(e.args[1],t));return z.BuiltInFunctions.dateAfter(q,ge);case"dateinrange":let Ie=this.getStringValue(this.evaluateExpression(e.args[0],t)),Y=this.getStringValue(this.evaluateExpression(e.args[1],t)),De=this.getStringValue(this.evaluateExpression(e.args[2],t));return z.BuiltInFunctions.dateInRange(Ie,Y,De);case"datediffminutes":let Re=this.getStringValue(this.evaluateExpression(e.args[0],t)),Oe=this.getStringValue(this.evaluateExpression(e.args[1],t));return z.BuiltInFunctions.dateDiffMinutes(Re,Oe);case"datediffhours":let Ne=this.getStringValue(this.evaluateExpression(e.args[0],t)),pe=this.getStringValue(this.evaluateExpression(e.args[1],t));return z.BuiltInFunctions.dateDiffHours(Ne,pe);case"year":let Ce=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.year(Ce);case"month":let ye=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.month(ye);case"day":let Fe=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.day(Fe);case"hours":let ke=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.hours(ke);case"minutes":let te=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.minutes(te);case"seconds":let oe=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.seconds(oe);case"timezone":case"tz":let ce=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.timezone(ce);case"now":return z.BuiltInFunctions.now();case"datetime":case"xsd:datetime":{let Te=this.evaluateExpression(e.args[0],t);return z.BuiltInFunctions.xsdDateTime(this.getStringValue(Te))}case"integer":case"xsd:integer":{let Te=this.evaluateExpression(e.args[0],t);return z.BuiltInFunctions.xsdInteger(this.getStringValue(Te))}case"decimal":case"xsd:decimal":{let Te=this.evaluateExpression(e.args[0],t);return z.BuiltInFunctions.xsdDecimal(this.getStringValue(Te))}case"mstominutes":let re=Number(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.msToMinutes(re);case"mstohours":let ne=Number(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.msToHours(ne);case"mstoseconds":let ie=Number(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.msToSeconds(ie);case"abs":let Z=Number(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.abs(Z);case"round":let ue=Number(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.round(ue);case"ceil":let le=Number(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.ceil(le);case"floor":let fe=Number(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.floor(fe);case"rand":return z.BuiltInFunctions.rand();case"coalesce":for(let Te of e.args)try{let Ye=this.evaluateExpression(Te,t);if(Ye!=null)return Ye}catch{continue}return;case"if":if(!e.args||e.args.length!==3)throw new It("IF requires exactly 3 arguments");let he=this.evaluateExpression(e.args[0],t);return this.toBoolean(he)?this.evaluateExpression(e.args[1],t):this.evaluateExpression(e.args[2],t);case"encode_for_uri":let de=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.encodeForUri(de);case"md5":let $e=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.md5($e);case"sha1":let je=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.sha1(je);case"sha256":let Ee=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.sha256(Ee);case"sha384":let v=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.sha384(v);case"sha512":let S=this.getStringValue(this.evaluateExpression(e.args[0],t));return z.BuiltInFunctions.sha512(S);case"isnumeric":let w=this.getTermFromExpression(e.args[0],t);return z.BuiltInFunctions.isNumeric(w);case"sameterm":let P=this.getTermFromExpression(e.args[0],t),G=this.getTermFromExpression(e.args[1],t);return z.BuiltInFunctions.sameTerm(P,G);default:throw new It(`Unknown function: ${n}`)}}getTermFromExpression(e,t){if(e.type==="variable")return t.get(e.name)}getStringValue(e){return e==null?"":typeof e=="object"&&"value"in e?String(e.value):String(e)}toBoolean(e){if(typeof e=="boolean")return e;if(typeof e=="number")return!isNaN(e)&&e!==0;if(typeof e=="string")return e.length>0;if(e instanceof Ru.Literal){let t=e.datatype?.value||"";if(t.includes("#boolean"))return e.value==="true"||e.value==="1";if(t.includes("#integer")||t.includes("#decimal")||t.includes("#double")||t.includes("#float")){let n=parseFloat(e.value);return!isNaN(n)&&n!==0}return e.value.length>0}return!!e}};$s.FilterExecutor=Ip});var Rp=_(ku=>{"use strict";Object.defineProperty(ku,"__esModule",{value:!0});ku.OptionalExecutor=void 0;var Dp=class{static{o(this,"OptionalExecutor")}async*execute(e,t){let n=[];for await(let s of e)n.push(s);let i=[];for await(let s of t)i.push(s);for(let s of n){let a=!1;for(let c of i){let u=s.merge(c);u!==null&&(yield u,a=!0)}a||(yield s)}}async executeAll(e,t){let n=[];async function*i(){for(let a of e)yield a}o(i,"generateLeft");async function*s(){for(let a of t)yield a}o(s,"generateRight");for await(let a of this.execute(i(),s()))n.push(a);return n}};ku.OptionalExecutor=Dp});var kp=_(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.UnionExecutor=void 0;var Np=class{static{o(this,"UnionExecutor")}async*execute(e,t){let n=new Set;for await(let i of e){let s=this.getSolutionKey(i);n.has(s)||(n.add(s),yield i)}for await(let i of t){let s=this.getSolutionKey(i);n.has(s)||(n.add(s),yield i)}}async executeAll(e,t){let n=[];async function*i(){for(let a of e)yield a}o(i,"generateLeft");async function*s(){for(let a of t)yield a}o(s,"generateRight");for await(let a of this.execute(i(),s()))n.push(a);return n}getSolutionKey(e){let t=e.toJSON();return Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("|")}};ju.UnionExecutor=Np});var Mp=_(Mu=>{"use strict";Object.defineProperty(Mu,"__esModule",{value:!0});Mu.ConstructExecutor=void 0;var NA=Ui(),iy=mt(),kA=Mt(),jA=Cr(),jp=class{static{o(this,"ConstructExecutor")}async execute(e,t){let n=[],i=new Set;for(let s of t)for(let a of e)try{let c=this.instantiateTriple(a,s),u=`${c.subject.toString()}|${c.predicate.toString()}|${c.object.toString()}`;i.has(u)||(i.add(u),n.push(c))}catch{continue}return n}instantiateTriple(e,t){if(this.isPropertyPath(e.predicate))throw new Error("Property paths are not supported in CONSTRUCT templates");let n=this.instantiateElement(e.subject,t),i=this.instantiateElement(e.predicate,t),s=this.instantiateElement(e.object,t);return new NA.Triple(n,i,s)}isPropertyPath(e){return e.type==="path"}instantiateElement(e,t){if(e.type==="variable"){let n=t.get(e.value);if(!n)throw new Error(`Unbound variable: ${e.value}`);return n}if(e.type==="iri")return new iy.IRI(e.value);if(e.type==="literal")return new kA.Literal(e.value,e.datatype?new iy.IRI(e.datatype):void 0,e.language);if(e.type==="blank")return new jA.BlankNode(e.value);throw new Error(`Unknown element type: ${e.type}`)}};Mu.ConstructExecutor=jp});var sy=_(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.DescribeExecutor=void 0;var MA=mt(),Lp=class{static{o(this,"DescribeExecutor")}constructor(e){this.tripleStore=e}async execute(e){let t=[],n=new Set;for(let i of e){let s=await this.describeResource(i);for(let a of s){let c=`${a.subject.toString()}|${a.predicate.toString()}|${a.object.toString()}`;n.has(c)||(n.add(c),t.push(a))}}return t}async describeResource(e){let t=[],n=await this.tripleStore.match(e,void 0,void 0);t.push(...n);let i=await this.tripleStore.match(void 0,void 0,e);return t.push(...i),t}async describeByIRI(e){let t=new MA.IRI(e);return this.execute([t])}};Lu.DescribeExecutor=Lp});var ay=_(Vu=>{"use strict";Object.defineProperty(Vu,"__esModule",{value:!0});Vu.MinusExecutor=void 0;var Vp=class{static{o(this,"MinusExecutor")}async*execute(e,t){let n=[];for await(let s of e)n.push(s);let i=[];for await(let s of t)i.push(s);for(let s of n){let a=!1;for(let c of i)if(this.areCompatible(s,c)){a=!0;break}a||(yield s)}}async executeAll(e,t){let n=[];async function*i(){for(let a of e)yield a}o(i,"generateLeft");async function*s(){for(let a of t)yield a}o(s,"generateRight");for await(let a of this.execute(i(),s()))n.push(a);return n}areCompatible(e,t){let n=e.variables(),i=new Set(t.variables()),s=n.filter(a=>i.has(a));if(s.length===0)return!1;for(let a of s){let c=e.get(a),u=t.get(a);if(c===void 0||u===void 0||c.toString()!==u.toString())return!1}return!0}};Vu.MinusExecutor=Vp});var cy=_(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.ValuesExecutor=Ws.ValuesExecutorError=void 0;var LA=ss(),oy=mt(),VA=Mt(),qu=class extends Error{static{o(this,"ValuesExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="ValuesExecutorError"}};Ws.ValuesExecutorError=qu;var qp=class{static{o(this,"ValuesExecutor")}async*execute(e){if(e.bindings.length!==0)for(let t of e.bindings)yield this.createSolutionMapping(t)}async executeAll(e){let t=[];for await(let n of this.execute(e))t.push(n);return t}createSolutionMapping(e){let t=new LA.SolutionMapping;for(let[n,i]of Object.entries(e)){let s=this.toRDFTerm(i);t.set(n,s)}return t}toRDFTerm(e){if(e.type==="iri")return new oy.IRI(e.value);if(e.type==="literal")return new VA.Literal(e.value,e.datatype?new oy.IRI(e.datatype):void 0,e.language);throw new qu(`Unknown term type: ${e.type}`)}};Ws.ValuesExecutor=qp});var ly=_(Gs=>{"use strict";Object.defineProperty(Gs,"__esModule",{value:!0});Gs.AggregateExecutor=Gs.AggregateExecutorError=void 0;var pr=Mt(),Bp=mt(),qA=Nu(),uy=new Bp.IRI("http://www.w3.org/2001/XMLSchema#integer"),to=new Bp.IRI("http://www.w3.org/2001/XMLSchema#decimal"),os=new Bp.IRI("http://www.w3.org/2001/XMLSchema#string"),Uu=class extends Error{static{o(this,"AggregateExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="AggregateExecutorError"}};Gs.AggregateExecutorError=Uu;var Up=class{static{o(this,"AggregateExecutor")}constructor(){this.filterExecutor=new qA.FilterExecutor}execute(e,t){let n=this.groupSolutions(t,e.variables),i=[];for(let[s,a]of n.entries()){let c=new Map;for(let l of e.variables)if(a.length>0){let h=a[0].get(l);h&&c.set(l,h)}for(let l of e.aggregates){let h=this.computeAggregate(l.expression,a);c.set(l.variable,h)}let{SolutionMapping:u}=ss(),f=new u;for(let[l,h]of c.entries())f.set(l,h);i.push(f)}if(i.length===0&&e.aggregates.length>0){let s=this.createEmptyAggregateResult(e);s&&i.push(s)}return i}groupSolutions(e,t){let n=new Map;if(t.length===0)return n.set("",e),n;for(let i of e){let s=this.computeGroupKey(i,t),a=n.get(s);a?a.push(i):n.set(s,[i])}return n}computeGroupKey(e,t){return t.map(n=>{let i=e.get(n);return i?this.termToString(i):""}).join("|")}termToString(e){if(e&&typeof e=="object"){if("value"in e)return String(e.value);if("id"in e)return String(e.id)}return String(e)}computeAggregate(e,t){let n=this.extractValues(e,t);switch(e.aggregation){case"count":{let i=this.computeCount(n,e.distinct);return new pr.Literal(String(i),uy)}case"sum":{let i=this.computeSum(n);return new pr.Literal(String(i),to)}case"avg":{let i=this.computeAvg(n);return new pr.Literal(String(i),to)}case"min":{let i=this.computeMin(n);return i===void 0?new pr.Literal("",os):typeof i=="number"?new pr.Literal(String(i),to):new pr.Literal(String(i),os)}case"max":{let i=this.computeMax(n);return i===void 0?new pr.Literal("",os):typeof i=="number"?new pr.Literal(String(i),to):new pr.Literal(String(i),os)}case"group_concat":{let i=this.computeGroupConcat(n,e.separator||" ",e.distinct);return new pr.Literal(i||" ",os)}default:throw new Uu(`Unknown aggregation function: ${e.aggregation}`)}}extractValues(e,t){if(!e.expression)return t.map(()=>1);let n=[];for(let i of t){let s=this.evaluateExpression(e.expression,i);s!=null&&n.push(s)}return n}evaluateExpression(e,t){if(e.type==="variable"){let n=t.get(e.name);return n==null?void 0:typeof n=="number"||typeof n=="string"||typeof n=="boolean"?n:typeof n=="object"&&"value"in n?n.value:n}if(e.type==="literal")return e.value;try{return this.filterExecutor.evaluateExpression(e,t)}catch{return}}computeCount(e,t){return t?new Set(e.map(n=>String(n))).size:e.length}computeSum(e){return e.map(n=>parseFloat(String(n))).filter(n=>!isNaN(n)).reduce((n,i)=>n+i,0)}computeAvg(e){let t=e.map(n=>parseFloat(String(n))).filter(n=>!isNaN(n));return t.length===0?0:t.reduce((n,i)=>n+i,0)/t.length}computeMin(e){if(e.length===0)return;let t=e.map(i=>parseFloat(String(i))).filter(i=>!isNaN(i));if(t.length>0)return Math.min(...t);let n=e.map(i=>String(i));return n.reduce((i,s)=>s<i?s:i,n[0])}computeMax(e){if(e.length===0)return;let t=e.map(i=>parseFloat(String(i))).filter(i=>!isNaN(i));if(t.length>0)return Math.max(...t);let n=e.map(i=>String(i));return n.reduce((i,s)=>s>i?s:i,n[0])}computeGroupConcat(e,t,n){let i=e.map(s=>String(s));return n&&(i=[...new Set(i)]),i.join(t)}createEmptyAggregateResult(e){let{SolutionMapping:t}=ss(),n=new t;for(let i of e.aggregates)switch(i.expression.aggregation){case"count":n.set(i.variable,new pr.Literal("0",uy));break;case"sum":case"avg":n.set(i.variable,new pr.Literal("0",to));break;case"group_concat":n.set(i.variable,new pr.Literal(" ",os));break;default:n.set(i.variable,new pr.Literal("",os))}return n}};Gs.AggregateExecutor=Up});var fy=_(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.QueryExecutor=zs.QueryExecutorError=void 0;var UA=Cp(),BA=Nu(),$A=Rp(),WA=kp(),GA=ay(),HA=cy(),zA=ly(),KA=Mp(),Hs=class extends Error{static{o(this,"QueryExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="QueryExecutorError"}};zs.QueryExecutorError=Hs;var $p=class{static{o(this,"QueryExecutor")}constructor(e){this.bgpExecutor=new UA.BGPExecutor(e),this.filterExecutor=new BA.FilterExecutor,this.optionalExecutor=new $A.OptionalExecutor,this.unionExecutor=new WA.UnionExecutor,this.minusExecutor=new GA.MinusExecutor,this.valuesExecutor=new HA.ValuesExecutor,this.aggregateExecutor=new zA.AggregateExecutor,this.constructExecutor=new KA.ConstructExecutor,this.filterExecutor.setExistsEvaluator(async(t,n)=>this.evaluateExistsPattern(t,n))}async evaluateExistsPattern(e,t){for await(let n of this.execute(e))if(t.merge(n)!==null)return!0;return!1}async executeAll(e){let t=[];for await(let n of this.execute(e))t.push(n);return t}async*execute(e){switch(e.type){case"bgp":yield*this.executeBGP(e);break;case"filter":yield*this.executeFilter(e);break;case"join":yield*this.executeJoin(e);break;case"leftjoin":yield*this.executeLeftJoin(e);break;case"union":yield*this.executeUnion(e);break;case"minus":yield*this.executeMinus(e);break;case"values":yield*this.executeValues(e);break;case"project":yield*this.executeProject(e);break;case"orderby":yield*this.executeOrderBy(e);break;case"slice":yield*this.executeSlice(e);break;case"distinct":yield*this.executeDistinct(e);break;case"reduced":yield*this.executeReduced(e);break;case"group":yield*this.executeGroup(e);break;case"extend":yield*this.executeExtend(e);break;case"subquery":yield*this.executeSubquery(e);break;default:throw new Hs(`Unknown operation type: ${e.type}`)}}async*executeBGP(e){yield*this.bgpExecutor.execute(e)}async*executeFilter(e){let t=this.execute(e.input);yield*this.filterExecutor.execute(e,t)}async*executeJoin(e){let t=[];for await(let n of this.execute(e.left))t.push(n);for(let n of t)for await(let i of this.execute(e.right)){let s=n.merge(i);s!==null&&(yield s)}}async*executeLeftJoin(e){let t=[];for await(let a of this.execute(e.left))t.push(a);let n=[];for await(let a of this.execute(e.right))n.push(a);async function*i(){for(let a of t)yield a}o(i,"leftGen");async function*s(){for(let a of n)yield a}o(s,"rightGen"),yield*this.optionalExecutor.execute(i(),s())}async*executeUnion(e){let t=[];for await(let a of this.execute(e.left))t.push(a);let n=[];for await(let a of this.execute(e.right))n.push(a);async function*i(){for(let a of t)yield a}o(i,"leftGen");async function*s(){for(let a of n)yield a}o(s,"rightGen"),yield*this.unionExecutor.execute(i(),s())}async*executeMinus(e){let t=[];for await(let a of this.execute(e.left))t.push(a);let n=[];for await(let a of this.execute(e.right))n.push(a);async function*i(){for(let a of t)yield a}o(i,"leftGen");async function*s(){for(let a of n)yield a}o(s,"rightGen"),yield*this.minusExecutor.execute(i(),s())}async*executeValues(e){yield*this.valuesExecutor.execute(e)}async*executeProject(e){for await(let t of this.execute(e.input))yield t}async*executeOrderBy(e){let t=[];for await(let n of this.execute(e.input))t.push(n);t.sort((n,i)=>{for(let s of e.comparators){let a=this.getExpressionValue(s.expression,n),c=this.getExpressionValue(s.expression,i),u=0;if(a===void 0&&c===void 0?u=0:a===void 0?u=1:c===void 0?u=-1:typeof a=="number"&&typeof c=="number"?u=a-c:u=String(a).localeCompare(String(c)),s.descending&&(u=-u),u!==0)return u}return 0});for(let n of t)yield n}async*executeSlice(e){let t=0,n=e.offset??0,i=e.limit;for await(let s of this.execute(e.input)){if(t>=n){if(i!==void 0&&t-n>=i)break;yield s}t++}}async*executeDistinct(e){let t=new Set;for await(let n of this.execute(e.input)){let i=this.getSolutionKey(n);t.has(i)||(t.add(i),yield n)}}async*executeReduced(e){let t=new Set;for await(let n of this.execute(e.input)){let i=this.getSolutionKey(n);t.has(i)||(t.add(i),yield n)}}async*executeGroup(e){let t=[];for await(let i of this.execute(e.input))t.push(i);let n=this.aggregateExecutor.execute(e,t);for(let i of n)yield i}async*executeExtend(e){for await(let t of this.execute(e.input)){let n=t.clone(),i=this.evaluateExtendExpression(e.expression,t);i!==void 0&&n.set(e.variable,i),yield n}}async*executeSubquery(e){yield*this.execute(e.query)}evaluateExtendExpression(e,t){if(e.type!=="aggregate")try{return this.filterExecutor.evaluateExpression(e,t)}catch{return}}getExpressionValue(e,t){if(e.type==="variable"){let n=t.get(e.name);return n?n.value??n.id??String(n):void 0}return e.value}getSolutionKey(e){let t=e.toJSON();return Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("|")}isConstructQuery(e){return e.type==="construct"}async executeConstruct(e){if(e.type!=="construct")throw new Hs("executeConstruct requires a CONSTRUCT operation");let t=await this.executeAll(e.where);return this.constructExecutor.execute(e.template,t)}isAskQuery(e){return e.type==="ask"}async executeAsk(e){if(e.type!=="ask")throw new Hs("executeAsk requires an ASK operation");for await(let t of this.execute(e.where))return!0;return!1}};zs.QueryExecutor=$p});var dy=_(Bu=>{"use strict";Object.defineProperty(Bu,"__esModule",{value:!0});Bu.AggregateFunctions=void 0;var Wp=Mt(),hy=mt(),Gp=class{static{o(this,"AggregateFunctions")}static count(e,t){if(!t)return e.length;let n=0;for(let i of e)i.has(t)&&n++;return n}static countDistinct(e,t){let n=new Set;for(let i of e){let s=i.get(t);s&&n.add(s.toString())}return n.size}static sum(e,t){let n=0;for(let i of e){let s=i.get(t);if(s instanceof Wp.Literal){let a=this.toNumber(s);isNaN(a)||(n+=a)}}return n}static avg(e,t){let n=this.sum(e,t),i=this.count(e,t);return i>0?n/i:0}static min(e,t){let n=null;for(let i of e){let s=i.get(t);if(!s)continue;let a=this.toComparable(s);(n===null||a<n)&&(n=a)}return n}static max(e,t){let n=null;for(let i of e){let s=i.get(t);if(!s)continue;let a=this.toComparable(s);(n===null||a>n)&&(n=a)}return n}static groupConcat(e,t,n=" "){let i=[];for(let s of e){let a=s.get(t);a&&(a instanceof Wp.Literal||a instanceof hy.IRI?i.push(a.value):i.push(a.toString()))}return i.join(n)}static toNumber(e){let t=e.datatype?.value;return t?.includes("#integer")||t?.includes("#decimal")||t?.includes("#double"),parseFloat(e.value)}static toComparable(e){if(e instanceof Wp.Literal){let t=this.toNumber(e);return isNaN(t)?e.value:t}return e instanceof hy.IRI?e.value:String(e)}};Bu.AggregateFunctions=Gp});var py=_($u=>{"use strict";Object.defineProperty($u,"__esModule",{value:!0});$u.QueryPlanCache=void 0;var YA=tp(),Hp=class{static{o(this,"QueryPlanCache")}constructor(e=100){this.hits=0,this.misses=0,this.cache=new YA.LRUCache(e)}get(e){let t=this.normalizeQuery(e),n=this.cache.get(t);return n!==void 0?this.hits++:this.misses++,n}set(e,t){let n=this.normalizeQuery(e);this.cache.set(n,t)}has(e){let t=this.normalizeQuery(e);return this.cache.get(t)!==void 0}clear(){this.cache.clear()}getStats(){let e=this.hits+this.misses;return{hits:this.hits,misses:this.misses,hitRate:e>0?this.hits/e:0,size:this.cache.size()}}resetStats(){this.hits=0,this.misses=0}normalizeQuery(e){return e.replace(/\s+/g," ").trim()}};$u.QueryPlanCache=Hp});var my=_(Ks=>{"use strict";Object.defineProperty(Ks,"__esModule",{value:!0});Ks.FileAlreadyExistsError=Ks.FileNotFoundError=void 0;var zp=class extends Error{static{o(this,"FileNotFoundError")}constructor(e){super(`File not found: ${e}`),this.name="FileNotFoundError"}};Ks.FileNotFoundError=zp;var Kp=class extends Error{static{o(this,"FileAlreadyExistsError")}constructor(e){super(`File already exists: ${e}`),this.name="FileAlreadyExistsError"}};Ks.FileAlreadyExistsError=Kp});var gy=_(_i=>{"use strict";Object.defineProperty(_i,"__esModule",{value:!0});_i.container=void 0;_i.registerCoreServices=bO;_i.createChildContainer=SO;_i.getContainer=wO;_i.resetContainer=EO;pf();var ro=Ze();Object.defineProperty(_i,"container",{enumerable:!0,get:o(function(){return ro.container},"get")});var rt=it(),QA=Zh(),JA=Yc(),XA=Id(),ZA=Qc(),eO=Ed(),tO=td(),rO=od(),nO=sd(),iO=tu(),sO=ru(),aO=yd(),oO=vd(),cO=xd(),uO=md(),lO=Rd(),fO=Md(),hO=kd(),dO=fd(),pO=dd(),mO=Fd(),gO=Od(),yO=ap(),_O=ud(),vO=Vd();function bO(r){let e=r||ro.container;e.registerSingleton(rt.DI_TOKENS.TaskFrontmatterGenerator,JA.TaskFrontmatterGenerator),e.registerSingleton(rt.DI_TOKENS.DynamicFrontmatterGenerator,XA.DynamicFrontmatterGenerator),e.registerSingleton(rt.DI_TOKENS.AlgorithmExtractor,ZA.AlgorithmExtractor),e.registerSingleton(rt.DI_TOKENS.EffortStatusWorkflow,iO.EffortStatusWorkflow),e.registerSingleton(rt.DI_TOKENS.StatusTimestampService,sO.StatusTimestampService),e.registerSingleton(rt.DI_TOKENS.TaskStatusService,nO.TaskStatusService),e.registerSingleton(rt.DI_TOKENS.TaskCreationService,QA.TaskCreationService),e.registerSingleton(rt.DI_TOKENS.ProjectCreationService,tO.ProjectCreationService),e.registerSingleton(rt.DI_TOKENS.AreaCreationService,rO.AreaCreationService),e.registerSingleton(rt.DI_TOKENS.ClassCreationService,dO.ClassCreationService),e.registerSingleton(rt.DI_TOKENS.ConceptCreationService,pO.ConceptCreationService),e.registerSingleton(rt.DI_TOKENS.FleetingNoteCreationService,mO.FleetingNoteCreationService),e.registerSingleton(rt.DI_TOKENS.SupervisionCreationService,gO.SupervisionCreationService),e.registerSingleton(rt.DI_TOKENS.PropertyCleanupService,eO.PropertyCleanupService),e.registerSingleton(rt.DI_TOKENS.FolderRepairService,aO.FolderRepairService),e.registerSingleton(rt.DI_TOKENS.LabelToAliasService,oO.LabelToAliasService),e.registerSingleton(rt.DI_TOKENS.RenameToUidService,cO.RenameToUidService),e.registerSingleton(rt.DI_TOKENS.PlanningService,lO.PlanningService),e.registerSingleton(rt.DI_TOKENS.EffortVotingService,uO.EffortVotingService),e.registerSingleton(rt.DI_TOKENS.SessionEventService,fO.SessionEventService),e.registerSingleton(rt.DI_TOKENS.AssetConversionService,hO.AssetConversionService),e.registerSingleton(rt.DI_TOKENS.NoteToRDFConverter,yO.NoteToRDFConverter),e.registerSingleton(rt.DI_TOKENS.AreaHierarchyBuilder,_O.AreaHierarchyBuilder),e.registerSingleton(rt.DI_TOKENS.URIConstructionService,vO.URIConstructionService)}o(bO,"registerCoreServices");function SO(){return ro.container.createChildContainer()}o(SO,"createChildContainer");function wO(){return ro.container}o(wO,"getContainer");function EO(){ro.container.reset()}o(EO,"resetContainer")});var On=_(Wu=>{"use strict";Object.defineProperty(Wu,"__esModule",{value:!0});Wu.ErrorCode=void 0;var yy;(function(r){r[r.INVALID_INPUT=1e3]="INVALID_INPUT",r[r.INVALID_FORMAT=1001]="INVALID_FORMAT",r[r.MISSING_REQUIRED_FIELD=1002]="MISSING_REQUIRED_FIELD",r[r.INVALID_SCHEMA=1003]="INVALID_SCHEMA",r[r.NETWORK_ERROR=2e3]="NETWORK_ERROR",r[r.REQUEST_TIMEOUT=2001]="REQUEST_TIMEOUT",r[r.CONNECTION_FAILED=2002]="CONNECTION_FAILED",r[r.FILE_READ_ERROR=2003]="FILE_READ_ERROR",r[r.FILE_WRITE_ERROR=2004]="FILE_WRITE_ERROR",r[r.INVALID_STATE=3e3]="INVALID_STATE",r[r.INVALID_TRANSITION=3001]="INVALID_TRANSITION",r[r.OPERATION_FAILED=3002]="OPERATION_FAILED",r[r.CONCURRENT_MODIFICATION=3003]="CONCURRENT_MODIFICATION",r[r.PERMISSION_DENIED=4e3]="PERMISSION_DENIED",r[r.UNAUTHORIZED=4001]="UNAUTHORIZED",r[r.FORBIDDEN=4003]="FORBIDDEN",r[r.NOT_FOUND=5e3]="NOT_FOUND",r[r.RESOURCE_EXHAUSTED=5001]="RESOURCE_EXHAUSTED",r[r.ALREADY_EXISTS=5002]="ALREADY_EXISTS",r[r.UNKNOWN_ERROR=9e3]="UNKNOWN_ERROR",r[r.INTERNAL_ERROR=9001]="INTERNAL_ERROR"})(yy||(Wu.ErrorCode=yy={}))});var Cn=_(Gu=>{"use strict";Object.defineProperty(Gu,"__esModule",{value:!0});Gu.ApplicationError=void 0;var Yp=class extends Error{static{o(this,"ApplicationError")}constructor(e,t){super(e),this.name=this.constructor.name,this.context=t,this.timestamp=new Date,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}format(){let e=`\u274C ${this.name}: ${this.message}`;if(this.guidance&&(e+=`

\u{1F4A1} ${this.guidance}`),this.context&&Object.keys(this.context).length>0){e+=`

\u{1F4CB} Context:`;for(let[t,n]of Object.entries(this.context))e+=`
  ${t}: ${JSON.stringify(n)}`}return e}toJSON(){return{name:this.name,message:this.message,code:this.code,retriable:this.retriable,timestamp:this.timestamp.toISOString(),context:this.context,stack:this.stack}}};Gu.ApplicationError=Yp});var _y=_(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.ValidationError=void 0;var TO=Cn(),xO=On(),Qp=class extends TO.ApplicationError{static{o(this,"ValidationError")}constructor(e,t){super(e,t),this.code=xO.ErrorCode.INVALID_INPUT,this.retriable=!1,this.guidance=`Check the input data for correctness.
Common issues:
  \u2022 Missing required fields
  \u2022 Invalid data format or type
  \u2022 Values outside allowed range
  \u2022 Schema validation failed`}};Hu.ValidationError=Qp});var vy=_(zu=>{"use strict";Object.defineProperty(zu,"__esModule",{value:!0});zu.NetworkError=void 0;var AO=Cn(),OO=On(),Jp=class extends AO.ApplicationError{static{o(this,"NetworkError")}constructor(e,t){super(e,t),this.code=OO.ErrorCode.NETWORK_ERROR,this.retriable=!0,this.guidance=`This is typically a transient network issue.
To resolve:
  \u2022 Check your internet connection
  \u2022 Retry the operation
  \u2022 Verify external services are available
  \u2022 Check firewall/proxy settings`}};zu.NetworkError=Jp});var by=_(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.StateTransitionError=void 0;var CO=Cn(),FO=On(),Xp=class extends CO.ApplicationError{static{o(this,"StateTransitionError")}constructor(e,t){super(e,t),this.code=FO.ErrorCode.INVALID_TRANSITION,this.retriable=!1,this.guidance=`The requested state transition is not allowed.
To fix:
  \u2022 Check the current state of the resource
  \u2022 Verify the transition is valid for this workflow
  \u2022 Review state machine documentation
  \u2022 Ensure no concurrent modifications occurred`}};Ku.StateTransitionError=Xp});var Sy=_(Yu=>{"use strict";Object.defineProperty(Yu,"__esModule",{value:!0});Yu.PermissionError=void 0;var PO=Cn(),IO=On(),Zp=class extends PO.ApplicationError{static{o(this,"PermissionError")}constructor(e,t){super(e,t),this.code=IO.ErrorCode.PERMISSION_DENIED,this.retriable=!1,this.guidance=`You don't have permission to perform this operation.
To resolve:
  \u2022 Check file/directory permissions
  \u2022 Verify you're authenticated
  \u2022 Ensure you have sufficient privileges
  \u2022 Contact administrator if access is needed`}};Yu.PermissionError=Zp});var wy=_(Qu=>{"use strict";Object.defineProperty(Qu,"__esModule",{value:!0});Qu.NotFoundError=void 0;var DO=Cn(),RO=On(),em=class extends DO.ApplicationError{static{o(this,"NotFoundError")}constructor(e,t){super(e,t),this.code=RO.ErrorCode.NOT_FOUND,this.retriable=!1,this.guidance=`The requested resource could not be found.
To resolve:
  \u2022 Verify the resource path/ID is correct
  \u2022 Check the resource exists
  \u2022 Ensure proper file extension (.md for notes)
  \u2022 Verify resource hasn't been deleted`}};Qu.NotFoundError=em});var Ey=_(Ju=>{"use strict";Object.defineProperty(Ju,"__esModule",{value:!0});Ju.ResourceExhaustedError=void 0;var NO=Cn(),kO=On(),tm=class extends NO.ApplicationError{static{o(this,"ResourceExhaustedError")}constructor(e,t){super(e,t),this.code=kO.ErrorCode.RESOURCE_EXHAUSTED,this.retriable=!0,this.guidance=`A resource limit has been exceeded.
To resolve:
  \u2022 Free up system resources (memory, disk space)
  \u2022 Reduce the size of your request
  \u2022 Wait and retry (for rate limits)
  \u2022 Close unused files/connections
  \u2022 Paginate large queries`}};Ju.ResourceExhaustedError=tm});var Ty=_(Xu=>{"use strict";Object.defineProperty(Xu,"__esModule",{value:!0});Xu.ServiceError=void 0;var jO=Cn(),MO=On(),rm=class extends jO.ApplicationError{static{o(this,"ServiceError")}constructor(e,t){super(e,t),this.code=MO.ErrorCode.INTERNAL_ERROR,this.retriable=!1,this.guidance=`This is an internal service error.
To resolve:
  \u2022 Check service initialization parameters
  \u2022 Verify all required dependencies are available
  \u2022 Review service logs for detailed error information
  \u2022 Contact support if the issue persists`}};Xu.ServiceError=rm});var xy=_(dt=>{"use strict";Object.defineProperty(dt,"__esModule",{value:!0});dt.ServiceError=dt.ResourceExhaustedError=dt.NotFoundError=dt.PermissionError=dt.StateTransitionError=dt.NetworkError=dt.ValidationError=dt.ApplicationError=dt.ErrorCode=void 0;var LO=On();Object.defineProperty(dt,"ErrorCode",{enumerable:!0,get:o(function(){return LO.ErrorCode},"get")});var VO=Cn();Object.defineProperty(dt,"ApplicationError",{enumerable:!0,get:o(function(){return VO.ApplicationError},"get")});var qO=_y();Object.defineProperty(dt,"ValidationError",{enumerable:!0,get:o(function(){return qO.ValidationError},"get")});var UO=vy();Object.defineProperty(dt,"NetworkError",{enumerable:!0,get:o(function(){return UO.NetworkError},"get")});var BO=by();Object.defineProperty(dt,"StateTransitionError",{enumerable:!0,get:o(function(){return BO.StateTransitionError},"get")});var $O=Sy();Object.defineProperty(dt,"PermissionError",{enumerable:!0,get:o(function(){return $O.PermissionError},"get")});var WO=wy();Object.defineProperty(dt,"NotFoundError",{enumerable:!0,get:o(function(){return WO.NotFoundError},"get")});var GO=Ey();Object.defineProperty(dt,"ResourceExhaustedError",{enumerable:!0,get:o(function(){return GO.ResourceExhaustedError},"get")});var HO=Ty();Object.defineProperty(dt,"ServiceError",{enumerable:!0,get:o(function(){return HO.ServiceError},"get")})});var Ay=_(Zu=>{"use strict";Object.defineProperty(Zu,"__esModule",{value:!0});Zu.ApplicationErrorHandler=void 0;var nm=Cn(),zO=On(),im=class{static{o(this,"ApplicationErrorHandler")}constructor(e={},t,n){this.logger=t,this.notifier=n,this.telemetryHooks=new Set,this.retryConfig={maxRetries:e.maxRetries??3,initialDelayMs:e.initialDelayMs??1e3,backoffMultiplier:e.backoffMultiplier??2,maxDelayMs:e.maxDelayMs??1e4}}handle(e,t){let n=this.ensureApplicationError(e,t);return this.notifier&&this.notifier.error(n.message),this.callTelemetryHooks("onError",n,t),this.formatError(n)}async executeWithRetry(e,t){let n,i=0;for(;i<=this.retryConfig.maxRetries;)try{return await e()}catch(s){if(n=this.ensureApplicationError(s,t),!n.retriable||i>=this.retryConfig.maxRetries)throw this.callTelemetryHooks("onError",n,t),i>=this.retryConfig.maxRetries&&n.retriable&&this.callTelemetryHooks("onRetryExhausted",n,i+1),n;let a=this.calculateDelay(i);this.callTelemetryHooks("onRetry",n,i+1,a),this.logger?.debug(`Retrying after ${a}ms (attempt ${i+1}/${this.retryConfig.maxRetries})`),await this.sleep(a),i++}throw n}registerTelemetryHook(e){this.telemetryHooks.add(e)}unregisterTelemetryHook(e){this.telemetryHooks.delete(e)}ensureApplicationError(e,t){if(e instanceof nm.ApplicationError){if(t){let i=e,s={...e.context,...t};return new class extends nm.ApplicationError{constructor(){super(...arguments),this.code=i.code,this.retriable=i.retriable,this.guidance=i.guidance}}(e.message,s)}return e}return new class extends nm.ApplicationError{static{o(this,"UnknownError")}constructor(s,a){super(s,{originalError:a.name,...t}),this.code=zO.ErrorCode.UNKNOWN_ERROR,this.retriable=!1,this.guidance="An unexpected error occurred"}}(e.message,e)}formatError(e){let t=[];return t.push(`\u274C ${e.name}: ${e.message}`),e.guidance&&t.push(`\u{1F4A1} ${e.guidance}`),e.context&&Object.keys(e.context).length>0&&t.push(`Context: ${JSON.stringify(e.context,null,2)}`),t.join(`
`)}calculateDelay(e){let t=this.retryConfig.initialDelayMs*Math.pow(this.retryConfig.backoffMultiplier,e);return Math.min(t,this.retryConfig.maxDelayMs)}sleep(e){return new Promise(t=>setTimeout(t,e))}callTelemetryHooks(e,...t){for(let n of this.telemetryHooks)try{let i=n[e];i&&i.apply(n,t)}catch(i){console.error("Error in telemetry hook:",i)}}};Zu.ApplicationErrorHandler=im});var Oy=_(el=>{"use strict";Object.defineProperty(el,"__esModule",{value:!0});el.ApplicationErrorHandler=void 0;var KO=Ay();Object.defineProperty(el,"ApplicationErrorHandler",{enumerable:!0,get:o(function(){return KO.ApplicationErrorHandler},"get")})});var vi=_(T=>{"use strict";var YO=T&&T.__createBinding||(Object.create?(function(r,e,t,n){n===void 0&&(n=t);var i=Object.getOwnPropertyDescriptor(e,t);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,n,i)}):(function(r,e,t,n){n===void 0&&(n=t),r[n]=e[t]})),Fn=T&&T.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&YO(e,r,t)};Object.defineProperty(T,"__esModule",{value:!0});T.DescribeExecutor=T.ConstructExecutor=T.UnionExecutor=T.OptionalExecutor=T.FilterExecutor=T.BGPExecutor=T.AlgebraSerializer=T.AlgebraOptimizer=T.AlgebraTranslator=T.SPARQLParseError=T.SPARQLParser=T.NoteToRDFConverter=T.RDFVocabularyMapper=T.InMemoryTripleStore=T.RDFSerializer=T.EffortSortingHelpers=T.MetadataExtractor=T.MetadataHelpers=T.WikiLinkHelpers=T.DateFormatter=T.FrontmatterService=T.URIConstructionService=T.SessionEventService=T.AssetConversionService=T.PlanningService=T.AlgorithmExtractor=T.DynamicFrontmatterGenerator=T.TaskFrontmatterGenerator=T.FleetingNoteCreationService=T.SupervisionCreationService=T.StatusTimestampService=T.RenameToUidService=T.PropertyCleanupService=T.LoggingService=T.LabelToAliasService=T.FolderRepairService=T.EffortVotingService=T.EffortStatusWorkflow=T.ConceptCreationService=T.ClassCreationService=T.AreaHierarchyBuilder=T.AreaCreationService=T.TaskStatusService=T.ProjectCreationService=T.TaskCreationService=T.extractPropertyLabel=T.uriToPropertyName=T.propertyNameToUri=T.rangeToFieldType=T.PropertyFieldType=void 0;T.container=T.resetContainer=T.getContainer=T.createChildContainer=T.registerCoreServices=T.DI_TOKENS=T.FileAlreadyExistsError=T.FileNotFoundError=T.CaseWhenTransformerError=T.CaseWhenTransformer=T.QueryPlanCache=T.AggregateFunctions=T.BuiltInFunctions=T.SolutionMapping=T.QueryExecutor=void 0;Fn(Df(),T);Fn(Rf(),T);Fn(g0(),T);Fn(_0(),T);Fn(b0(),T);Fn(w0(),T);Fn(T0(),T);Fn(V0(),T);var Cy=U0();Object.defineProperty(T,"PropertyFieldType",{enumerable:!0,get:o(function(){return Cy.PropertyFieldType},"get")});Object.defineProperty(T,"rangeToFieldType",{enumerable:!0,get:o(function(){return Cy.rangeToFieldType},"get")});var sm=$0();Object.defineProperty(T,"propertyNameToUri",{enumerable:!0,get:o(function(){return sm.propertyNameToUri},"get")});Object.defineProperty(T,"uriToPropertyName",{enumerable:!0,get:o(function(){return sm.uriToPropertyName},"get")});Object.defineProperty(T,"extractPropertyLabel",{enumerable:!0,get:o(function(){return sm.extractPropertyLabel},"get")});var QO=Zh();Object.defineProperty(T,"TaskCreationService",{enumerable:!0,get:o(function(){return QO.TaskCreationService},"get")});var JO=td();Object.defineProperty(T,"ProjectCreationService",{enumerable:!0,get:o(function(){return JO.ProjectCreationService},"get")});var XO=sd();Object.defineProperty(T,"TaskStatusService",{enumerable:!0,get:o(function(){return XO.TaskStatusService},"get")});var ZO=od();Object.defineProperty(T,"AreaCreationService",{enumerable:!0,get:o(function(){return ZO.AreaCreationService},"get")});var e6=ud();Object.defineProperty(T,"AreaHierarchyBuilder",{enumerable:!0,get:o(function(){return e6.AreaHierarchyBuilder},"get")});var t6=fd();Object.defineProperty(T,"ClassCreationService",{enumerable:!0,get:o(function(){return t6.ClassCreationService},"get")});var r6=dd();Object.defineProperty(T,"ConceptCreationService",{enumerable:!0,get:o(function(){return r6.ConceptCreationService},"get")});var n6=tu();Object.defineProperty(T,"EffortStatusWorkflow",{enumerable:!0,get:o(function(){return n6.EffortStatusWorkflow},"get")});var i6=md();Object.defineProperty(T,"EffortVotingService",{enumerable:!0,get:o(function(){return i6.EffortVotingService},"get")});var s6=yd();Object.defineProperty(T,"FolderRepairService",{enumerable:!0,get:o(function(){return s6.FolderRepairService},"get")});var a6=vd();Object.defineProperty(T,"LabelToAliasService",{enumerable:!0,get:o(function(){return a6.LabelToAliasService},"get")});var o6=bd();Object.defineProperty(T,"LoggingService",{enumerable:!0,get:o(function(){return o6.LoggingService},"get")});var c6=Ed();Object.defineProperty(T,"PropertyCleanupService",{enumerable:!0,get:o(function(){return c6.PropertyCleanupService},"get")});var u6=xd();Object.defineProperty(T,"RenameToUidService",{enumerable:!0,get:o(function(){return u6.RenameToUidService},"get")});var l6=ru();Object.defineProperty(T,"StatusTimestampService",{enumerable:!0,get:o(function(){return l6.StatusTimestampService},"get")});var f6=Od();Object.defineProperty(T,"SupervisionCreationService",{enumerable:!0,get:o(function(){return f6.SupervisionCreationService},"get")});var h6=Fd();Object.defineProperty(T,"FleetingNoteCreationService",{enumerable:!0,get:o(function(){return h6.FleetingNoteCreationService},"get")});var d6=Yc();Object.defineProperty(T,"TaskFrontmatterGenerator",{enumerable:!0,get:o(function(){return d6.TaskFrontmatterGenerator},"get")});var p6=Id();Object.defineProperty(T,"DynamicFrontmatterGenerator",{enumerable:!0,get:o(function(){return p6.DynamicFrontmatterGenerator},"get")});var m6=Qc();Object.defineProperty(T,"AlgorithmExtractor",{enumerable:!0,get:o(function(){return m6.AlgorithmExtractor},"get")});var g6=Rd();Object.defineProperty(T,"PlanningService",{enumerable:!0,get:o(function(){return g6.PlanningService},"get")});var y6=kd();Object.defineProperty(T,"AssetConversionService",{enumerable:!0,get:o(function(){return y6.AssetConversionService},"get")});var _6=Md();Object.defineProperty(T,"SessionEventService",{enumerable:!0,get:o(function(){return _6.SessionEventService},"get")});var v6=Vd();Object.defineProperty(T,"URIConstructionService",{enumerable:!0,get:o(function(){return v6.URIConstructionService},"get")});var b6=Is();Object.defineProperty(T,"FrontmatterService",{enumerable:!0,get:o(function(){return b6.FrontmatterService},"get")});var S6=dr();Object.defineProperty(T,"DateFormatter",{enumerable:!0,get:o(function(){return S6.DateFormatter},"get")});var w6=Bi();Object.defineProperty(T,"WikiLinkHelpers",{enumerable:!0,get:o(function(){return w6.WikiLinkHelpers},"get")});var E6=Vr();Object.defineProperty(T,"MetadataHelpers",{enumerable:!0,get:o(function(){return E6.MetadataHelpers},"get")});var T6=Ga();Object.defineProperty(T,"MetadataExtractor",{enumerable:!0,get:o(function(){return T6.MetadataExtractor},"get")});var x6=yg();Object.defineProperty(T,"EffortSortingHelpers",{enumerable:!0,get:o(function(){return x6.EffortSortingHelpers},"get")});var A6=Tg();Object.defineProperty(T,"RDFSerializer",{enumerable:!0,get:o(function(){return A6.RDFSerializer},"get")});var O6=Ag();Object.defineProperty(T,"InMemoryTripleStore",{enumerable:!0,get:o(function(){return O6.InMemoryTripleStore},"get")});var C6=Cg();Object.defineProperty(T,"RDFVocabularyMapper",{enumerable:!0,get:o(function(){return C6.RDFVocabularyMapper},"get")});var F6=ap();Object.defineProperty(T,"NoteToRDFConverter",{enumerable:!0,get:o(function(){return F6.NoteToRDFConverter},"get")});var Fy=Gg();Object.defineProperty(T,"SPARQLParser",{enumerable:!0,get:o(function(){return Fy.SPARQLParser},"get")});Object.defineProperty(T,"SPARQLParseError",{enumerable:!0,get:o(function(){return Fy.SPARQLParseError},"get")});var P6=Hg();Object.defineProperty(T,"AlgebraTranslator",{enumerable:!0,get:o(function(){return P6.AlgebraTranslator},"get")});var I6=zg();Object.defineProperty(T,"AlgebraOptimizer",{enumerable:!0,get:o(function(){return I6.AlgebraOptimizer},"get")});var D6=Kg();Object.defineProperty(T,"AlgebraSerializer",{enumerable:!0,get:o(function(){return D6.AlgebraSerializer},"get")});var R6=Cp();Object.defineProperty(T,"BGPExecutor",{enumerable:!0,get:o(function(){return R6.BGPExecutor},"get")});var N6=Nu();Object.defineProperty(T,"FilterExecutor",{enumerable:!0,get:o(function(){return N6.FilterExecutor},"get")});var k6=Rp();Object.defineProperty(T,"OptionalExecutor",{enumerable:!0,get:o(function(){return k6.OptionalExecutor},"get")});var j6=kp();Object.defineProperty(T,"UnionExecutor",{enumerable:!0,get:o(function(){return j6.UnionExecutor},"get")});var M6=Mp();Object.defineProperty(T,"ConstructExecutor",{enumerable:!0,get:o(function(){return M6.ConstructExecutor},"get")});var L6=sy();Object.defineProperty(T,"DescribeExecutor",{enumerable:!0,get:o(function(){return L6.DescribeExecutor},"get")});var V6=fy();Object.defineProperty(T,"QueryExecutor",{enumerable:!0,get:o(function(){return V6.QueryExecutor},"get")});var q6=ss();Object.defineProperty(T,"SolutionMapping",{enumerable:!0,get:o(function(){return q6.SolutionMapping},"get")});var U6=Pp();Object.defineProperty(T,"BuiltInFunctions",{enumerable:!0,get:o(function(){return U6.BuiltInFunctions},"get")});var B6=dy();Object.defineProperty(T,"AggregateFunctions",{enumerable:!0,get:o(function(){return B6.AggregateFunctions},"get")});var $6=py();Object.defineProperty(T,"QueryPlanCache",{enumerable:!0,get:o(function(){return $6.QueryPlanCache},"get")});var Py=vp();Object.defineProperty(T,"CaseWhenTransformer",{enumerable:!0,get:o(function(){return Py.CaseWhenTransformer},"get")});Object.defineProperty(T,"CaseWhenTransformerError",{enumerable:!0,get:o(function(){return Py.CaseWhenTransformerError},"get")});var Iy=my();Object.defineProperty(T,"FileNotFoundError",{enumerable:!0,get:o(function(){return Iy.FileNotFoundError},"get")});Object.defineProperty(T,"FileAlreadyExistsError",{enumerable:!0,get:o(function(){return Iy.FileAlreadyExistsError},"get")});var W6=it();Object.defineProperty(T,"DI_TOKENS",{enumerable:!0,get:o(function(){return W6.DI_TOKENS},"get")});var no=gy();Object.defineProperty(T,"registerCoreServices",{enumerable:!0,get:o(function(){return no.registerCoreServices},"get")});Object.defineProperty(T,"createChildContainer",{enumerable:!0,get:o(function(){return no.createChildContainer},"get")});Object.defineProperty(T,"getContainer",{enumerable:!0,get:o(function(){return no.getContainer},"get")});Object.defineProperty(T,"resetContainer",{enumerable:!0,get:o(function(){return no.resetContainer},"get")});Object.defineProperty(T,"container",{enumerable:!0,get:o(function(){return no.container},"get")});Fn(xy(),T);Fn(Oy(),T)});var bt=_(am=>{"use strict";am.fromCallback=function(r){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")r.apply(this,e);else return new Promise((t,n)=>{e.push((i,s)=>i!=null?n(i):t(s)),r.apply(this,e)})},"name",{value:r.name})};am.fromPromise=function(r){return Object.defineProperty(function(...e){let t=e[e.length-1];if(typeof t!="function")return r.apply(this,e);e.pop(),r.apply(this,e).then(n=>t(null,n),t)},"name",{value:r.name})}});var Ry=_((qM,Dy)=>{var bi=require("constants"),G6=process.cwd,tl=null,H6=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return tl||(tl=G6.call(process)),tl};try{process.cwd()}catch{}typeof process.chdir=="function"&&(om=process.chdir,process.chdir=function(r){tl=null,om.call(process,r)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,om));var om;Dy.exports=z6;function z6(r){bi.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(r),r.lutimes||t(r),r.chown=s(r.chown),r.fchown=s(r.fchown),r.lchown=s(r.lchown),r.chmod=n(r.chmod),r.fchmod=n(r.fchmod),r.lchmod=n(r.lchmod),r.chownSync=a(r.chownSync),r.fchownSync=a(r.fchownSync),r.lchownSync=a(r.lchownSync),r.chmodSync=i(r.chmodSync),r.fchmodSync=i(r.fchmodSync),r.lchmodSync=i(r.lchmodSync),r.stat=c(r.stat),r.fstat=c(r.fstat),r.lstat=c(r.lstat),r.statSync=u(r.statSync),r.fstatSync=u(r.fstatSync),r.lstatSync=u(r.lstatSync),r.chmod&&!r.lchmod&&(r.lchmod=function(l,h,p){p&&process.nextTick(p)},r.lchmodSync=function(){}),r.chown&&!r.lchown&&(r.lchown=function(l,h,p,m){m&&process.nextTick(m)},r.lchownSync=function(){}),H6==="win32"&&(r.rename=typeof r.rename!="function"?r.rename:(function(l){function h(p,m,b){var y=Date.now(),x=0;l(p,m,o(function A(C){if(C&&(C.code==="EACCES"||C.code==="EPERM"||C.code==="EBUSY")&&Date.now()-y<6e4){setTimeout(function(){r.stat(m,function(j,I){j&&j.code==="ENOENT"?l(p,m,A):b(C)})},x),x<100&&(x+=10);return}b&&b(C)},"CB"))}return o(h,"rename"),Object.setPrototypeOf&&Object.setPrototypeOf(h,l),h})(r.rename)),r.read=typeof r.read!="function"?r.read:(function(l){function h(p,m,b,y,x,A){var C;if(A&&typeof A=="function"){var j=0;C=o(function(I,U,se){if(I&&I.code==="EAGAIN"&&j<10)return j++,l.call(r,p,m,b,y,x,C);A.apply(this,arguments)},"callback")}return l.call(r,p,m,b,y,x,C)}return o(h,"read"),Object.setPrototypeOf&&Object.setPrototypeOf(h,l),h})(r.read),r.readSync=typeof r.readSync!="function"?r.readSync:(function(l){return function(h,p,m,b,y){for(var x=0;;)try{return l.call(r,h,p,m,b,y)}catch(A){if(A.code==="EAGAIN"&&x<10){x++;continue}throw A}}})(r.readSync);function e(l){l.lchmod=function(h,p,m){l.open(h,bi.O_WRONLY|bi.O_SYMLINK,p,function(b,y){if(b){m&&m(b);return}l.fchmod(y,p,function(x){l.close(y,function(A){m&&m(x||A)})})})},l.lchmodSync=function(h,p){var m=l.openSync(h,bi.O_WRONLY|bi.O_SYMLINK,p),b=!0,y;try{y=l.fchmodSync(m,p),b=!1}finally{if(b)try{l.closeSync(m)}catch{}else l.closeSync(m)}return y}}o(e,"patchLchmod");function t(l){bi.hasOwnProperty("O_SYMLINK")&&l.futimes?(l.lutimes=function(h,p,m,b){l.open(h,bi.O_SYMLINK,function(y,x){if(y){b&&b(y);return}l.futimes(x,p,m,function(A){l.close(x,function(C){b&&b(A||C)})})})},l.lutimesSync=function(h,p,m){var b=l.openSync(h,bi.O_SYMLINK),y,x=!0;try{y=l.futimesSync(b,p,m),x=!1}finally{if(x)try{l.closeSync(b)}catch{}else l.closeSync(b)}return y}):l.futimes&&(l.lutimes=function(h,p,m,b){b&&process.nextTick(b)},l.lutimesSync=function(){})}o(t,"patchLutimes");function n(l){return l&&function(h,p,m){return l.call(r,h,p,function(b){f(b)&&(b=null),m&&m.apply(this,arguments)})}}o(n,"chmodFix");function i(l){return l&&function(h,p){try{return l.call(r,h,p)}catch(m){if(!f(m))throw m}}}o(i,"chmodFixSync");function s(l){return l&&function(h,p,m,b){return l.call(r,h,p,m,function(y){f(y)&&(y=null),b&&b.apply(this,arguments)})}}o(s,"chownFix");function a(l){return l&&function(h,p,m){try{return l.call(r,h,p,m)}catch(b){if(!f(b))throw b}}}o(a,"chownFixSync");function c(l){return l&&function(h,p,m){typeof p=="function"&&(m=p,p=null);function b(y,x){x&&(x.uid<0&&(x.uid+=4294967296),x.gid<0&&(x.gid+=4294967296)),m&&m.apply(this,arguments)}return o(b,"callback"),p?l.call(r,h,p,b):l.call(r,h,b)}}o(c,"statFix");function u(l){return l&&function(h,p){var m=p?l.call(r,h,p):l.call(r,h);return m&&(m.uid<0&&(m.uid+=4294967296),m.gid<0&&(m.gid+=4294967296)),m}}o(u,"statFixSync");function f(l){if(!l||l.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(l.code==="EINVAL"||l.code==="EPERM"))}o(f,"chownErOk")}o(z6,"patch")});var jy=_((BM,ky)=>{var Ny=require("stream").Stream;ky.exports=K6;function K6(r){return{ReadStream:e,WriteStream:t};function e(n,i){if(!(this instanceof e))return new e(n,i);Ny.call(this);var s=this;this.path=n,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,i=i||{};for(var a=Object.keys(i),c=0,u=a.length;c<u;c++){var f=a[c];this[f]=i[f]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}r.open(this.path,this.flags,this.mode,function(l,h){if(l){s.emit("error",l),s.readable=!1;return}s.fd=h,s.emit("open",h),s._read()})}function t(n,i){if(!(this instanceof t))return new t(n,i);Ny.call(this),this.path=n,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,i=i||{};for(var s=Object.keys(i),a=0,c=s.length;a<c;a++){var u=s[a];this[u]=i[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=r.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}o(K6,"legacy")});var Ly=_((WM,My)=>{"use strict";My.exports=Q6;var Y6=Object.getPrototypeOf||function(r){return r.__proto__};function Q6(r){if(r===null||typeof r!="object")return r;if(r instanceof Object)var e={__proto__:Y6(r)};else var e=Object.create(null);return Object.getOwnPropertyNames(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}o(Q6,"clone")});var Qs=_((HM,lm)=>{var st=require("fs"),J6=Ry(),X6=jy(),Z6=Ly(),rl=require("util"),Dt,il;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Dt=Symbol.for("graceful-fs.queue"),il=Symbol.for("graceful-fs.previous")):(Dt="___graceful-fs.queue",il="___graceful-fs.previous");function e9(){}o(e9,"noop");function Uy(r,e){Object.defineProperty(r,Dt,{get:o(function(){return e},"get")})}o(Uy,"publishQueue");var cs=e9;rl.debuglog?cs=rl.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(cs=o(function(){var r=rl.format.apply(rl,arguments);r="GFS4: "+r.split(/\n/).join(`
GFS4: `),console.error(r)},"debug"));st[Dt]||(Vy=global[Dt]||[],Uy(st,Vy),st.close=(function(r){function e(t,n){return r.call(st,t,function(i){i||qy(),typeof n=="function"&&n.apply(this,arguments)})}return o(e,"close"),Object.defineProperty(e,il,{value:r}),e})(st.close),st.closeSync=(function(r){function e(t){r.apply(st,arguments),qy()}return o(e,"closeSync"),Object.defineProperty(e,il,{value:r}),e})(st.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){cs(st[Dt]),require("assert").equal(st[Dt].length,0)}));var Vy;global[Dt]||Uy(global,st[Dt]);lm.exports=cm(Z6(st));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!st.__patched&&(lm.exports=cm(st),st.__patched=!0);function cm(r){J6(r),r.gracefulify=cm,r.createReadStream=U,r.createWriteStream=se;var e=r.readFile;r.readFile=t;function t(M,N,K){return typeof N=="function"&&(K=N,N=null),Ae(M,N,K);function Ae(Ve,Le,we,be){return e(Ve,Le,function(me){me&&(me.code==="EMFILE"||me.code==="ENFILE")?Ys([Ae,[Ve,Le,we],me,be||Date.now(),Date.now()]):typeof we=="function"&&we.apply(this,arguments)})}o(Ae,"go$readFile")}o(t,"readFile");var n=r.writeFile;r.writeFile=i;function i(M,N,K,Ae){return typeof K=="function"&&(Ae=K,K=null),Ve(M,N,K,Ae);function Ve(Le,we,be,me,V){return n(Le,we,be,function(L){L&&(L.code==="EMFILE"||L.code==="ENFILE")?Ys([Ve,[Le,we,be,me],L,V||Date.now(),Date.now()]):typeof me=="function"&&me.apply(this,arguments)})}o(Ve,"go$writeFile")}o(i,"writeFile");var s=r.appendFile;s&&(r.appendFile=a);function a(M,N,K,Ae){return typeof K=="function"&&(Ae=K,K=null),Ve(M,N,K,Ae);function Ve(Le,we,be,me,V){return s(Le,we,be,function(L){L&&(L.code==="EMFILE"||L.code==="ENFILE")?Ys([Ve,[Le,we,be,me],L,V||Date.now(),Date.now()]):typeof me=="function"&&me.apply(this,arguments)})}o(Ve,"go$appendFile")}o(a,"appendFile");var c=r.copyFile;c&&(r.copyFile=u);function u(M,N,K,Ae){return typeof K=="function"&&(Ae=K,K=0),Ve(M,N,K,Ae);function Ve(Le,we,be,me,V){return c(Le,we,be,function(L){L&&(L.code==="EMFILE"||L.code==="ENFILE")?Ys([Ve,[Le,we,be,me],L,V||Date.now(),Date.now()]):typeof me=="function"&&me.apply(this,arguments)})}o(Ve,"go$copyFile")}o(u,"copyFile");var f=r.readdir;r.readdir=h;var l=/^v[0-5]\./;function h(M,N,K){typeof N=="function"&&(K=N,N=null);var Ae=l.test(process.version)?o(function(we,be,me,V){return f(we,Ve(we,be,me,V))},"go$readdir"):o(function(we,be,me,V){return f(we,be,Ve(we,be,me,V))},"go$readdir");return Ae(M,N,K);function Ve(Le,we,be,me){return function(V,L){V&&(V.code==="EMFILE"||V.code==="ENFILE")?Ys([Ae,[Le,we,be],V,me||Date.now(),Date.now()]):(L&&L.sort&&L.sort(),typeof be=="function"&&be.call(this,V,L))}}}if(o(h,"readdir"),process.version.substr(0,4)==="v0.8"){var p=X6(r);A=p.ReadStream,j=p.WriteStream}var m=r.ReadStream;m&&(A.prototype=Object.create(m.prototype),A.prototype.open=C);var b=r.WriteStream;b&&(j.prototype=Object.create(b.prototype),j.prototype.open=I),Object.defineProperty(r,"ReadStream",{get:o(function(){return A},"get"),set:o(function(M){A=M},"set"),enumerable:!0,configurable:!0}),Object.defineProperty(r,"WriteStream",{get:o(function(){return j},"get"),set:o(function(M){j=M},"set"),enumerable:!0,configurable:!0});var y=A;Object.defineProperty(r,"FileReadStream",{get:o(function(){return y},"get"),set:o(function(M){y=M},"set"),enumerable:!0,configurable:!0});var x=j;Object.defineProperty(r,"FileWriteStream",{get:o(function(){return x},"get"),set:o(function(M){x=M},"set"),enumerable:!0,configurable:!0});function A(M,N){return this instanceof A?(m.apply(this,arguments),this):A.apply(Object.create(A.prototype),arguments)}o(A,"ReadStream");function C(){var M=this;ee(M.path,M.flags,M.mode,function(N,K){N?(M.autoClose&&M.destroy(),M.emit("error",N)):(M.fd=K,M.emit("open",K),M.read())})}o(C,"ReadStream$open");function j(M,N){return this instanceof j?(b.apply(this,arguments),this):j.apply(Object.create(j.prototype),arguments)}o(j,"WriteStream");function I(){var M=this;ee(M.path,M.flags,M.mode,function(N,K){N?(M.destroy(),M.emit("error",N)):(M.fd=K,M.emit("open",K))})}o(I,"WriteStream$open");function U(M,N){return new r.ReadStream(M,N)}o(U,"createReadStream");function se(M,N){return new r.WriteStream(M,N)}o(se,"createWriteStream");var Me=r.open;r.open=ee;function ee(M,N,K,Ae){return typeof K=="function"&&(Ae=K,K=null),Ve(M,N,K,Ae);function Ve(Le,we,be,me,V){return Me(Le,we,be,function(L,ae){L&&(L.code==="EMFILE"||L.code==="ENFILE")?Ys([Ve,[Le,we,be,me],L,V||Date.now(),Date.now()]):typeof me=="function"&&me.apply(this,arguments)})}o(Ve,"go$open")}return o(ee,"open"),r}o(cm,"patch");function Ys(r){cs("ENQUEUE",r[0].name,r[1]),st[Dt].push(r),um()}o(Ys,"enqueue");var nl;function qy(){for(var r=Date.now(),e=0;e<st[Dt].length;++e)st[Dt][e].length>2&&(st[Dt][e][3]=r,st[Dt][e][4]=r);um()}o(qy,"resetQueue");function um(){if(clearTimeout(nl),nl=void 0,st[Dt].length!==0){var r=st[Dt].shift(),e=r[0],t=r[1],n=r[2],i=r[3],s=r[4];if(i===void 0)cs("RETRY",e.name,t),e.apply(null,t);else if(Date.now()-i>=6e4){cs("TIMEOUT",e.name,t);var a=t.pop();typeof a=="function"&&a.call(null,n)}else{var c=Date.now()-s,u=Math.max(s-i,1),f=Math.min(u*1.2,100);c>=f?(cs("RETRY",e.name,t),e.apply(null,t.concat([i]))):st[Dt].push(r)}nl===void 0&&(nl=setTimeout(um,0))}}o(um,"retry")});var er=_(Xn=>{"use strict";var By=bt().fromCallback,Zt=Qs(),t9=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(r=>typeof Zt[r]=="function");Object.assign(Xn,Zt);t9.forEach(r=>{Xn[r]=By(Zt[r])});Xn.exists=function(r,e){return typeof e=="function"?Zt.exists(r,e):new Promise(t=>Zt.exists(r,t))};Xn.read=function(r,e,t,n,i,s){return typeof s=="function"?Zt.read(r,e,t,n,i,s):new Promise((a,c)=>{Zt.read(r,e,t,n,i,(u,f,l)=>{if(u)return c(u);a({bytesRead:f,buffer:l})})})};Xn.write=function(r,e,...t){return typeof t[t.length-1]=="function"?Zt.write(r,e,...t):new Promise((n,i)=>{Zt.write(r,e,...t,(s,a,c)=>{if(s)return i(s);n({bytesWritten:a,buffer:c})})})};Xn.readv=function(r,e,...t){return typeof t[t.length-1]=="function"?Zt.readv(r,e,...t):new Promise((n,i)=>{Zt.readv(r,e,...t,(s,a,c)=>{if(s)return i(s);n({bytesRead:a,buffers:c})})})};Xn.writev=function(r,e,...t){return typeof t[t.length-1]=="function"?Zt.writev(r,e,...t):new Promise((n,i)=>{Zt.writev(r,e,...t,(s,a,c)=>{if(s)return i(s);n({bytesWritten:a,buffers:c})})})};typeof Zt.realpath.native=="function"?Xn.realpath.native=By(Zt.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var Wy=_((YM,$y)=>{"use strict";var r9=require("path");$y.exports.checkPath=o(function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(r9.parse(e).root,""))){let n=new Error(`Path contains invalid characters: ${e}`);throw n.code="EINVAL",n}},"checkPath")});var Ky=_((JM,fm)=>{"use strict";var Gy=er(),{checkPath:Hy}=Wy(),zy=o(r=>{let e={mode:511};return typeof r=="number"?r:{...e,...r}.mode},"getMode");fm.exports.makeDir=async(r,e)=>(Hy(r),Gy.mkdir(r,{mode:zy(e),recursive:!0}));fm.exports.makeDirSync=(r,e)=>(Hy(r),Gy.mkdirSync(r,{mode:zy(e),recursive:!0}))});var on=_((ZM,Yy)=>{"use strict";var n9=bt().fromPromise,{makeDir:i9,makeDirSync:hm}=Ky(),dm=n9(i9);Yy.exports={mkdirs:dm,mkdirsSync:hm,mkdirp:dm,mkdirpSync:hm,ensureDir:dm,ensureDirSync:hm}});var Si=_((eL,Jy)=>{"use strict";var s9=bt().fromPromise,Qy=er();function a9(r){return Qy.access(r).then(()=>!0).catch(()=>!1)}o(a9,"pathExists");Jy.exports={pathExists:s9(a9),pathExistsSync:Qy.existsSync}});var pm=_((rL,Xy)=>{"use strict";var Js=er(),o9=bt().fromPromise;async function c9(r,e,t){let n=await Js.open(r,"r+"),i=null;try{await Js.futimes(n,e,t)}finally{try{await Js.close(n)}catch(s){i=s}}if(i)throw i}o(c9,"utimesMillis");function u9(r,e,t){let n=Js.openSync(r,"r+");return Js.futimesSync(n,e,t),Js.closeSync(n)}o(u9,"utimesMillisSync");Xy.exports={utimesMillis:o9(c9),utimesMillisSync:u9}});var us=_((iL,r3)=>{"use strict";var Xs=er(),St=require("path"),Zy=bt().fromPromise;function l9(r,e,t){let n=t.dereference?i=>Xs.stat(i,{bigint:!0}):i=>Xs.lstat(i,{bigint:!0});return Promise.all([n(r),n(e).catch(i=>{if(i.code==="ENOENT")return null;throw i})]).then(([i,s])=>({srcStat:i,destStat:s}))}o(l9,"getStats");function f9(r,e,t){let n,i=t.dereference?a=>Xs.statSync(a,{bigint:!0}):a=>Xs.lstatSync(a,{bigint:!0}),s=i(r);try{n=i(e)}catch(a){if(a.code==="ENOENT")return{srcStat:s,destStat:null};throw a}return{srcStat:s,destStat:n}}o(f9,"getStatsSync");async function h9(r,e,t,n){let{srcStat:i,destStat:s}=await l9(r,e,n);if(s){if(io(i,s)){let a=St.basename(r),c=St.basename(e);if(t==="move"&&a!==c&&a.toLowerCase()===c.toLowerCase())return{srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${r}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${r}'.`)}if(i.isDirectory()&&mm(r,e))throw new Error(sl(r,e,t));return{srcStat:i,destStat:s}}o(h9,"checkPaths");function d9(r,e,t,n){let{srcStat:i,destStat:s}=f9(r,e,n);if(s){if(io(i,s)){let a=St.basename(r),c=St.basename(e);if(t==="move"&&a!==c&&a.toLowerCase()===c.toLowerCase())return{srcStat:i,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(i.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${r}'.`);if(!i.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${r}'.`)}if(i.isDirectory()&&mm(r,e))throw new Error(sl(r,e,t));return{srcStat:i,destStat:s}}o(d9,"checkPathsSync");async function e3(r,e,t,n){let i=St.resolve(St.dirname(r)),s=St.resolve(St.dirname(t));if(s===i||s===St.parse(s).root)return;let a;try{a=await Xs.stat(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(io(e,a))throw new Error(sl(r,t,n));return e3(r,e,s,n)}o(e3,"checkParentPaths");function t3(r,e,t,n){let i=St.resolve(St.dirname(r)),s=St.resolve(St.dirname(t));if(s===i||s===St.parse(s).root)return;let a;try{a=Xs.statSync(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(io(e,a))throw new Error(sl(r,t,n));return t3(r,e,s,n)}o(t3,"checkParentPathsSync");function io(r,e){return e.ino!==void 0&&e.dev!==void 0&&e.ino===r.ino&&e.dev===r.dev}o(io,"areIdentical");function mm(r,e){let t=St.resolve(r).split(St.sep).filter(i=>i),n=St.resolve(e).split(St.sep).filter(i=>i);return t.every((i,s)=>n[s]===i)}o(mm,"isSrcSubdir");function sl(r,e,t){return`Cannot ${t} '${r}' to a subdirectory of itself, '${e}'.`}o(sl,"errMsg");r3.exports={checkPaths:Zy(h9),checkPathsSync:d9,checkParentPaths:Zy(e3),checkParentPathsSync:t3,isSrcSubdir:mm,areIdentical:io}});var i3=_((aL,n3)=>{"use strict";async function p9(r,e){let t=[];for await(let n of r)t.push(e(n).then(()=>null,i=>i??new Error("unknown error")));await Promise.all(t.map(n=>n.then(i=>{if(i!==null)throw i})))}o(p9,"asyncIteratorConcurrentProcess");n3.exports={asyncIteratorConcurrentProcess:p9}});var u3=_((cL,c3)=>{"use strict";var qt=er(),so=require("path"),{mkdirs:m9}=on(),{pathExists:g9}=Si(),{utimesMillis:y9}=pm(),ao=us(),{asyncIteratorConcurrentProcess:_9}=i3();async function v9(r,e,t={}){typeof t=="function"&&(t={filter:t}),t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:n,destStat:i}=await ao.checkPaths(r,e,"copy",t);if(await ao.checkParentPaths(r,n,e,"copy"),!await a3(r,e,t))return;let a=so.dirname(e);await g9(a)||await m9(a),await o3(i,r,e,t)}o(v9,"copy");async function a3(r,e,t){return t.filter?t.filter(r,e):!0}o(a3,"runFilter");async function o3(r,e,t,n){let s=await(n.dereference?qt.stat:qt.lstat)(e);if(s.isDirectory())return E9(s,r,e,t,n);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return b9(s,r,e,t,n);if(s.isSymbolicLink())return T9(r,e,t,n);throw s.isSocket()?new Error(`Cannot copy a socket file: ${e}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}o(o3,"getStatsAndPerformCopy");async function b9(r,e,t,n,i){if(!e)return s3(r,t,n,i);if(i.overwrite)return await qt.unlink(n),s3(r,t,n,i);if(i.errorOnExist)throw new Error(`'${n}' already exists`)}o(b9,"onFile");async function s3(r,e,t,n){if(await qt.copyFile(e,t),n.preserveTimestamps){S9(r.mode)&&await w9(t,r.mode);let i=await qt.stat(e);await y9(t,i.atime,i.mtime)}return qt.chmod(t,r.mode)}o(s3,"copyFile");function S9(r){return(r&128)===0}o(S9,"fileIsNotWritable");function w9(r,e){return qt.chmod(r,e|128)}o(w9,"makeFileWritable");async function E9(r,e,t,n,i){e||await qt.mkdir(n),await _9(await qt.opendir(t),async s=>{let a=so.join(t,s.name),c=so.join(n,s.name);if(await a3(a,c,i)){let{destStat:f}=await ao.checkPaths(a,c,"copy",i);await o3(f,a,c,i)}}),e||await qt.chmod(n,r.mode)}o(E9,"onDir");async function T9(r,e,t,n){let i=await qt.readlink(e);if(n.dereference&&(i=so.resolve(process.cwd(),i)),!r)return qt.symlink(i,t);let s=null;try{s=await qt.readlink(t)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return qt.symlink(i,t);throw a}if(n.dereference&&(s=so.resolve(process.cwd(),s)),ao.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(ao.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return await qt.unlink(t),qt.symlink(i,t)}o(T9,"onLink");c3.exports=v9});var p3=_((lL,d3)=>{"use strict";var tr=Qs(),oo=require("path"),x9=on().mkdirsSync,A9=pm().utimesMillisSync,co=us();function O9(r,e,t){typeof t=="function"&&(t={filter:t}),t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:n,destStat:i}=co.checkPathsSync(r,e,"copy",t);if(co.checkParentPathsSync(r,n,e,"copy"),t.filter&&!t.filter(r,e))return;let s=oo.dirname(e);return tr.existsSync(s)||x9(s),l3(i,r,e,t)}o(O9,"copySync");function l3(r,e,t,n){let s=(n.dereference?tr.statSync:tr.lstatSync)(e);if(s.isDirectory())return N9(s,r,e,t,n);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return C9(s,r,e,t,n);if(s.isSymbolicLink())return M9(r,e,t,n);throw s.isSocket()?new Error(`Cannot copy a socket file: ${e}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}o(l3,"getStats");function C9(r,e,t,n,i){return e?F9(r,t,n,i):f3(r,t,n,i)}o(C9,"onFile");function F9(r,e,t,n){if(n.overwrite)return tr.unlinkSync(t),f3(r,e,t,n);if(n.errorOnExist)throw new Error(`'${t}' already exists`)}o(F9,"mayCopyFile");function f3(r,e,t,n){return tr.copyFileSync(e,t),n.preserveTimestamps&&P9(r.mode,e,t),gm(t,r.mode)}o(f3,"copyFile");function P9(r,e,t){return I9(r)&&D9(t,r),R9(e,t)}o(P9,"handleTimestamps");function I9(r){return(r&128)===0}o(I9,"fileIsNotWritable");function D9(r,e){return gm(r,e|128)}o(D9,"makeFileWritable");function gm(r,e){return tr.chmodSync(r,e)}o(gm,"setDestMode");function R9(r,e){let t=tr.statSync(r);return A9(e,t.atime,t.mtime)}o(R9,"setDestTimestamps");function N9(r,e,t,n,i){return e?h3(t,n,i):k9(r.mode,t,n,i)}o(N9,"onDir");function k9(r,e,t,n){return tr.mkdirSync(t),h3(e,t,n),gm(t,r)}o(k9,"mkDirAndCopy");function h3(r,e,t){let n=tr.opendirSync(r);try{let i;for(;(i=n.readSync())!==null;)j9(i.name,r,e,t)}finally{n.closeSync()}}o(h3,"copyDir");function j9(r,e,t,n){let i=oo.join(e,r),s=oo.join(t,r);if(n.filter&&!n.filter(i,s))return;let{destStat:a}=co.checkPathsSync(i,s,"copy",n);return l3(a,i,s,n)}o(j9,"copyDirItem");function M9(r,e,t,n){let i=tr.readlinkSync(e);if(n.dereference&&(i=oo.resolve(process.cwd(),i)),r){let s;try{s=tr.readlinkSync(t)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return tr.symlinkSync(i,t);throw a}if(n.dereference&&(s=oo.resolve(process.cwd(),s)),co.isSrcSubdir(i,s))throw new Error(`Cannot copy '${i}' to a subdirectory of itself, '${s}'.`);if(co.isSrcSubdir(s,i))throw new Error(`Cannot overwrite '${s}' with '${i}'.`);return L9(i,t)}else return tr.symlinkSync(i,t)}o(M9,"onLink");function L9(r,e){return tr.unlinkSync(e),tr.symlinkSync(r,e)}o(L9,"copyLink");d3.exports=O9});var al=_((hL,m3)=>{"use strict";var V9=bt().fromPromise;m3.exports={copy:V9(u3()),copySync:p3()}});var uo=_((dL,y3)=>{"use strict";var g3=Qs(),q9=bt().fromCallback;function U9(r,e){g3.rm(r,{recursive:!0,force:!0},e)}o(U9,"remove");function B9(r){g3.rmSync(r,{recursive:!0,force:!0})}o(B9,"removeSync");y3.exports={remove:q9(U9),removeSync:B9}});var x3=_((mL,T3)=>{"use strict";var $9=bt().fromPromise,b3=er(),S3=require("path"),w3=on(),E3=uo(),_3=$9(o(async function(e){let t;try{t=await b3.readdir(e)}catch{return w3.mkdirs(e)}return Promise.all(t.map(n=>E3.remove(S3.join(e,n))))},"emptyDir"));function v3(r){let e;try{e=b3.readdirSync(r)}catch{return w3.mkdirsSync(r)}e.forEach(t=>{t=S3.join(r,t),E3.removeSync(t)})}o(v3,"emptyDirSync");T3.exports={emptyDirSync:v3,emptydirSync:v3,emptyDir:_3,emptydir:_3}});var F3=_((yL,C3)=>{"use strict";var W9=bt().fromPromise,A3=require("path"),Zn=er(),O3=on();async function G9(r){let e;try{e=await Zn.stat(r)}catch{}if(e&&e.isFile())return;let t=A3.dirname(r),n=null;try{n=await Zn.stat(t)}catch(i){if(i.code==="ENOENT"){await O3.mkdirs(t),await Zn.writeFile(r,"");return}else throw i}n.isDirectory()?await Zn.writeFile(r,""):await Zn.readdir(t)}o(G9,"createFile");function H9(r){let e;try{e=Zn.statSync(r)}catch{}if(e&&e.isFile())return;let t=A3.dirname(r);try{Zn.statSync(t).isDirectory()||Zn.readdirSync(t)}catch(n){if(n&&n.code==="ENOENT")O3.mkdirsSync(t);else throw n}Zn.writeFileSync(r,"")}o(H9,"createFileSync");C3.exports={createFile:W9(G9),createFileSync:H9}});var N3=_((vL,R3)=>{"use strict";var z9=bt().fromPromise,P3=require("path"),wi=er(),I3=on(),{pathExists:K9}=Si(),{areIdentical:D3}=us();async function Y9(r,e){let t;try{t=await wi.lstat(e)}catch{}let n;try{n=await wi.lstat(r)}catch(a){throw a.message=a.message.replace("lstat","ensureLink"),a}if(t&&D3(n,t))return;let i=P3.dirname(e);await K9(i)||await I3.mkdirs(i),await wi.link(r,e)}o(Y9,"createLink");function Q9(r,e){let t;try{t=wi.lstatSync(e)}catch{}try{let s=wi.lstatSync(r);if(t&&D3(s,t))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let n=P3.dirname(e);return wi.existsSync(n)||I3.mkdirsSync(n),wi.linkSync(r,e)}o(Q9,"createLinkSync");R3.exports={createLink:z9(Y9),createLinkSync:Q9}});var j3=_((SL,k3)=>{"use strict";var Ei=require("path"),lo=er(),{pathExists:J9}=Si(),X9=bt().fromPromise;async function Z9(r,e){if(Ei.isAbsolute(r)){try{await lo.lstat(r)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:r,toDst:r}}let t=Ei.dirname(e),n=Ei.join(t,r);if(await J9(n))return{toCwd:n,toDst:r};try{await lo.lstat(r)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:r,toDst:Ei.relative(t,r)}}o(Z9,"symlinkPaths");function e7(r,e){if(Ei.isAbsolute(r)){if(!lo.existsSync(r))throw new Error("absolute srcpath does not exist");return{toCwd:r,toDst:r}}let t=Ei.dirname(e),n=Ei.join(t,r);if(lo.existsSync(n))return{toCwd:n,toDst:r};if(!lo.existsSync(r))throw new Error("relative srcpath does not exist");return{toCwd:r,toDst:Ei.relative(t,r)}}o(e7,"symlinkPathsSync");k3.exports={symlinkPaths:X9(Z9),symlinkPathsSync:e7}});var V3=_((EL,L3)=>{"use strict";var M3=er(),t7=bt().fromPromise;async function r7(r,e){if(e)return e;let t;try{t=await M3.lstat(r)}catch{return"file"}return t&&t.isDirectory()?"dir":"file"}o(r7,"symlinkType");function n7(r,e){if(e)return e;let t;try{t=M3.lstatSync(r)}catch{return"file"}return t&&t.isDirectory()?"dir":"file"}o(n7,"symlinkTypeSync");L3.exports={symlinkType:t7(r7),symlinkTypeSync:n7}});var $3=_((xL,B3)=>{"use strict";var i7=bt().fromPromise,q3=require("path"),Pn=er(),{mkdirs:s7,mkdirsSync:a7}=on(),{symlinkPaths:o7,symlinkPathsSync:c7}=j3(),{symlinkType:u7,symlinkTypeSync:l7}=V3(),{pathExists:f7}=Si(),{areIdentical:U3}=us();async function h7(r,e,t){let n;try{n=await Pn.lstat(e)}catch{}if(n&&n.isSymbolicLink()){let[c,u]=await Promise.all([Pn.stat(r),Pn.stat(e)]);if(U3(c,u))return}let i=await o7(r,e);r=i.toDst;let s=await u7(i.toCwd,t),a=q3.dirname(e);return await f7(a)||await s7(a),Pn.symlink(r,e,s)}o(h7,"createSymlink");function d7(r,e,t){let n;try{n=Pn.lstatSync(e)}catch{}if(n&&n.isSymbolicLink()){let c=Pn.statSync(r),u=Pn.statSync(e);if(U3(c,u))return}let i=c7(r,e);r=i.toDst,t=l7(i.toCwd,t);let s=q3.dirname(e);return Pn.existsSync(s)||a7(s),Pn.symlinkSync(r,e,t)}o(d7,"createSymlinkSync");B3.exports={createSymlink:i7(h7),createSymlinkSync:d7}});var J3=_((OL,Q3)=>{"use strict";var{createFile:W3,createFileSync:G3}=F3(),{createLink:H3,createLinkSync:z3}=N3(),{createSymlink:K3,createSymlinkSync:Y3}=$3();Q3.exports={createFile:W3,createFileSync:G3,ensureFile:W3,ensureFileSync:G3,createLink:H3,createLinkSync:z3,ensureLink:H3,ensureLinkSync:z3,createSymlink:K3,createSymlinkSync:Y3,ensureSymlink:K3,ensureSymlinkSync:Y3}});var ol=_((CL,X3)=>{function p7(r,{EOL:e=`
`,finalEOL:t=!0,replacer:n=null,spaces:i}={}){let s=t?e:"";return JSON.stringify(r,n,i).replace(/\n/g,e)+s}o(p7,"stringify");function m7(r){return Buffer.isBuffer(r)&&(r=r.toString("utf8")),r.replace(/^\uFEFF/,"")}o(m7,"stripBom");X3.exports={stringify:p7,stripBom:m7}});var r_=_((PL,t_)=>{var Zs;try{Zs=Qs()}catch{Zs=require("fs")}var cl=bt(),{stringify:Z3,stripBom:e_}=ol();async function g7(r,e={}){typeof e=="string"&&(e={encoding:e});let t=e.fs||Zs,n="throws"in e?e.throws:!0,i=await cl.fromCallback(t.readFile)(r,e);i=e_(i);let s;try{s=JSON.parse(i,e?e.reviver:null)}catch(a){if(n)throw a.message=`${r}: ${a.message}`,a;return null}return s}o(g7,"_readFile");var y7=cl.fromPromise(g7);function _7(r,e={}){typeof e=="string"&&(e={encoding:e});let t=e.fs||Zs,n="throws"in e?e.throws:!0;try{let i=t.readFileSync(r,e);return i=e_(i),JSON.parse(i,e.reviver)}catch(i){if(n)throw i.message=`${r}: ${i.message}`,i;return null}}o(_7,"readFileSync");async function v7(r,e,t={}){let n=t.fs||Zs,i=Z3(e,t);await cl.fromCallback(n.writeFile)(r,i,t)}o(v7,"_writeFile");var b7=cl.fromPromise(v7);function S7(r,e,t={}){let n=t.fs||Zs,i=Z3(e,t);return n.writeFileSync(r,i,t)}o(S7,"writeFileSync");t_.exports={readFile:y7,readFileSync:_7,writeFile:b7,writeFileSync:S7}});var i_=_((DL,n_)=>{"use strict";var ul=r_();n_.exports={readJson:ul.readFile,readJsonSync:ul.readFileSync,writeJson:ul.writeFile,writeJsonSync:ul.writeFileSync}});var ll=_((RL,o_)=>{"use strict";var w7=bt().fromPromise,ym=er(),s_=require("path"),a_=on(),E7=Si().pathExists;async function T7(r,e,t="utf-8"){let n=s_.dirname(r);return await E7(n)||await a_.mkdirs(n),ym.writeFile(r,e,t)}o(T7,"outputFile");function x7(r,...e){let t=s_.dirname(r);ym.existsSync(t)||a_.mkdirsSync(t),ym.writeFileSync(r,...e)}o(x7,"outputFileSync");o_.exports={outputFile:w7(T7),outputFileSync:x7}});var u_=_((kL,c_)=>{"use strict";var{stringify:A7}=ol(),{outputFile:O7}=ll();async function C7(r,e,t={}){let n=A7(e,t);await O7(r,n,t)}o(C7,"outputJson");c_.exports=C7});var f_=_((ML,l_)=>{"use strict";var{stringify:F7}=ol(),{outputFileSync:P7}=ll();function I7(r,e,t){let n=F7(e,t);P7(r,n,t)}o(I7,"outputJsonSync");l_.exports=I7});var d_=_((VL,h_)=>{"use strict";var D7=bt().fromPromise,rr=i_();rr.outputJson=D7(u_());rr.outputJsonSync=f_();rr.outputJSON=rr.outputJson;rr.outputJSONSync=rr.outputJsonSync;rr.writeJSON=rr.writeJson;rr.writeJSONSync=rr.writeJsonSync;rr.readJSON=rr.readJson;rr.readJSONSync=rr.readJsonSync;h_.exports=rr});var __=_((qL,y_)=>{"use strict";var R7=er(),p_=require("path"),{copy:N7}=al(),{remove:g_}=uo(),{mkdirp:k7}=on(),{pathExists:j7}=Si(),m_=us();async function M7(r,e,t={}){let n=t.overwrite||t.clobber||!1,{srcStat:i,isChangingCase:s=!1}=await m_.checkPaths(r,e,"move",t);await m_.checkParentPaths(r,i,e,"move");let a=p_.dirname(e);return p_.parse(a).root!==a&&await k7(a),L7(r,e,n,s)}o(M7,"move");async function L7(r,e,t,n){if(!n){if(t)await g_(e);else if(await j7(e))throw new Error("dest already exists.")}try{await R7.rename(r,e)}catch(i){if(i.code!=="EXDEV")throw i;await V7(r,e,t)}}o(L7,"doRename");async function V7(r,e,t){return await N7(r,e,{overwrite:t,errorOnExist:!0,preserveTimestamps:!0}),g_(r)}o(V7,"moveAcrossDevice");y_.exports=M7});var E_=_((BL,w_)=>{"use strict";var b_=Qs(),vm=require("path"),q7=al().copySync,S_=uo().removeSync,U7=on().mkdirpSync,v_=us();function B7(r,e,t){t=t||{};let n=t.overwrite||t.clobber||!1,{srcStat:i,isChangingCase:s=!1}=v_.checkPathsSync(r,e,"move",t);return v_.checkParentPathsSync(r,i,e,"move"),$7(e)||U7(vm.dirname(e)),W7(r,e,n,s)}o(B7,"moveSync");function $7(r){let e=vm.dirname(r);return vm.parse(e).root===e}o($7,"isParentRoot");function W7(r,e,t,n){if(n)return _m(r,e,t);if(t)return S_(e),_m(r,e,t);if(b_.existsSync(e))throw new Error("dest already exists.");return _m(r,e,t)}o(W7,"doRename");function _m(r,e,t){try{b_.renameSync(r,e)}catch(n){if(n.code!=="EXDEV")throw n;return G7(r,e,t)}}o(_m,"rename");function G7(r,e,t){return q7(r,e,{overwrite:t,errorOnExist:!0,preserveTimestamps:!0}),S_(r)}o(G7,"moveAcrossDevice");w_.exports=B7});var x_=_((WL,T_)=>{"use strict";var H7=bt().fromPromise;T_.exports={move:H7(__()),moveSync:E_()}});var ea=_((GL,A_)=>{"use strict";A_.exports={...er(),...al(),...x3(),...J3(),...d_(),...on(),...x_(),...ll(),...Si(),...uo()}});var kv=_((Eq,Nv)=>{"use strict";Nv.exports=Dv;function Dv(r,e,t){r instanceof RegExp&&(r=Iv(r,t)),e instanceof RegExp&&(e=Iv(e,t));var n=Rv(r,e,t);return n&&{start:n[0],end:n[1],pre:t.slice(0,n[0]),body:t.slice(n[0]+r.length,n[1]),post:t.slice(n[1]+e.length)}}o(Dv,"balanced");function Iv(r,e){var t=e.match(r);return t?t[0]:null}o(Iv,"maybeMatch");Dv.range=Rv;function Rv(r,e,t){var n,i,s,a,c,u=t.indexOf(r),f=t.indexOf(e,u+1),l=u;if(u>=0&&f>0){if(r===e)return[u,f];for(n=[],s=t.length;l>=0&&!c;)l==u?(n.push(l),u=t.indexOf(r,l+1)):n.length==1?c=[n.pop(),f]:(i=n.pop(),i<s&&(s=i,a=f),f=t.indexOf(e,l+1)),l=u<f&&u>=0?u:f;n.length&&(c=[s,a])}return c}o(Rv,"range")});var $v=_((xq,Bv)=>{var jv=kv();Bv.exports=_F;var Mv="\0SLASH"+Math.random()+"\0",Lv="\0OPEN"+Math.random()+"\0",jm="\0CLOSE"+Math.random()+"\0",Vv="\0COMMA"+Math.random()+"\0",qv="\0PERIOD"+Math.random()+"\0";function km(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}o(km,"numeric");function gF(r){return r.split("\\\\").join(Mv).split("\\{").join(Lv).split("\\}").join(jm).split("\\,").join(Vv).split("\\.").join(qv)}o(gF,"escapeBraces");function yF(r){return r.split(Mv).join("\\").split(Lv).join("{").split(jm).join("}").split(Vv).join(",").split(qv).join(".")}o(yF,"unescapeBraces");function Uv(r){if(!r)return[""];var e=[],t=jv("{","}",r);if(!t)return r.split(",");var n=t.pre,i=t.body,s=t.post,a=n.split(",");a[a.length-1]+="{"+i+"}";var c=Uv(s);return s.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),e.push.apply(e,a),e}o(Uv,"parseCommaParts");function _F(r){return r?(r.substr(0,2)==="{}"&&(r="\\{\\}"+r.substr(2)),So(gF(r),!0).map(yF)):[]}o(_F,"expandTop");function vF(r){return"{"+r+"}"}o(vF,"embrace");function bF(r){return/^-?0\d/.test(r)}o(bF,"isPadded");function SF(r,e){return r<=e}o(SF,"lte");function wF(r,e){return r>=e}o(wF,"gte");function So(r,e){var t=[],n=jv("{","}",r);if(!n)return[r];var i=n.pre,s=n.post.length?So(n.post,!1):[""];if(/\$$/.test(n.pre))for(var a=0;a<s.length;a++){var c=i+"{"+n.body+"}"+s[a];t.push(c)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(n.body),f=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(n.body),l=u||f,h=n.body.indexOf(",")>=0;if(!l&&!h)return n.post.match(/,(?!,).*\}/)?(r=n.pre+"{"+n.body+jm+n.post,So(r)):[r];var p;if(l)p=n.body.split(/\.\./);else if(p=Uv(n.body),p.length===1&&(p=So(p[0],!1).map(vF),p.length===1))return s.map(function(N){return n.pre+p[0]+N});var m;if(l){var b=km(p[0]),y=km(p[1]),x=Math.max(p[0].length,p[1].length),A=p.length==3?Math.abs(km(p[2])):1,C=SF,j=y<b;j&&(A*=-1,C=wF);var I=p.some(bF);m=[];for(var U=b;C(U,y);U+=A){var se;if(f)se=String.fromCharCode(U),se==="\\"&&(se="");else if(se=String(U),I){var Me=x-se.length;if(Me>0){var ee=new Array(Me+1).join("0");U<0?se="-"+ee+se.slice(1):se=ee+se}}m.push(se)}}else{m=[];for(var M=0;M<p.length;M++)m.push.apply(m,So(p[M],!1))}for(var M=0;M<m.length;M++)for(var a=0;a<s.length;a++){var c=i+m[M]+s[a];(!e||l||c)&&t.push(c)}}return t}o(So,"expand")});var w$=et(pf());var h0=et(f0(),1),{program:tI,createCommand:rI,createArgument:nI,createOption:iI,CommanderError:sI,InvalidArgumentError:aI,InvalidOptionArgumentError:oI,Command:vn,Argument:cI,Option:uI,Help:lI}=h0.default;var bo=require("fs"),Nm=require("path"),sr=et(vi());var yt=et(ea()),Bt=et(require("path"));function B_(r){return typeof r>"u"||r===null}o(B_,"isNothing");function z7(r){return typeof r=="object"&&r!==null}o(z7,"isObject");function K7(r){return Array.isArray(r)?r:B_(r)?[]:[r]}o(K7,"toArray");function Y7(r,e){var t,n,i,s;if(e)for(s=Object.keys(e),t=0,n=s.length;t<n;t+=1)i=s[t],r[i]=e[i];return r}o(Y7,"extend");function Q7(r,e){var t="",n;for(n=0;n<e;n+=1)t+=r;return t}o(Q7,"repeat");function J7(r){return r===0&&Number.NEGATIVE_INFINITY===1/r}o(J7,"isNegativeZero");var X7=B_,Z7=z7,eC=K7,tC=Q7,rC=J7,nC=Y7,gt={isNothing:X7,isObject:Z7,toArray:eC,repeat:tC,isNegativeZero:rC,extend:nC};function $_(r,e){var t="",n=r.reason||"(unknown reason)";return r.mark?(r.mark.name&&(t+='in "'+r.mark.name+'" '),t+="("+(r.mark.line+1)+":"+(r.mark.column+1)+")",!e&&r.mark.snippet&&(t+=`

`+r.mark.snippet),n+" "+t):n}o($_,"formatError");function ho(r,e){Error.call(this),this.name="YAMLException",this.reason=r,this.mark=e,this.message=$_(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}o(ho,"YAMLException$1");ho.prototype=Object.create(Error.prototype);ho.prototype.constructor=ho;ho.prototype.toString=o(function(e){return this.name+": "+$_(this,e)},"toString");var nr=ho;function bm(r,e,t,n,i){var s="",a="",c=Math.floor(i/2)-1;return n-e>c&&(s=" ... ",e=n-c+s.length),t-n>c&&(a=" ...",t=n+c-a.length),{str:s+r.slice(e,t).replace(/\t/g,"\u2192")+a,pos:n-e+s.length}}o(bm,"getLine");function Sm(r,e){return gt.repeat(" ",e-r.length)+r}o(Sm,"padStart");function iC(r,e){if(e=Object.create(e||null),!r.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var t=/\r?\n|\r|\0/g,n=[0],i=[],s,a=-1;s=t.exec(r.buffer);)i.push(s.index),n.push(s.index+s[0].length),r.position<=s.index&&a<0&&(a=n.length-2);a<0&&(a=n.length-1);var c="",u,f,l=Math.min(r.line+e.linesAfter,i.length).toString().length,h=e.maxLength-(e.indent+l+3);for(u=1;u<=e.linesBefore&&!(a-u<0);u++)f=bm(r.buffer,n[a-u],i[a-u],r.position-(n[a]-n[a-u]),h),c=gt.repeat(" ",e.indent)+Sm((r.line-u+1).toString(),l)+" | "+f.str+`
`+c;for(f=bm(r.buffer,n[a],i[a],r.position,h),c+=gt.repeat(" ",e.indent)+Sm((r.line+1).toString(),l)+" | "+f.str+`
`,c+=gt.repeat("-",e.indent+l+3+f.pos)+`^
`,u=1;u<=e.linesAfter&&!(a+u>=i.length);u++)f=bm(r.buffer,n[a+u],i[a+u],r.position-(n[a]-n[a+u]),h),c+=gt.repeat(" ",e.indent)+Sm((r.line+u+1).toString(),l)+" | "+f.str+`
`;return c.replace(/\n$/,"")}o(iC,"makeSnippet");var sC=iC,aC=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],oC=["scalar","sequence","mapping"];function cC(r){var e={};return r!==null&&Object.keys(r).forEach(function(t){r[t].forEach(function(n){e[String(n)]=t})}),e}o(cC,"compileStyleAliases");function uC(r,e){if(e=e||{},Object.keys(e).forEach(function(t){if(aC.indexOf(t)===-1)throw new nr('Unknown option "'+t+'" is met in definition of "'+r+'" YAML type.')}),this.options=e,this.tag=r,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=cC(e.styleAliases||null),oC.indexOf(this.kind)===-1)throw new nr('Unknown kind "'+this.kind+'" is specified for "'+r+'" YAML type.')}o(uC,"Type$1");var Rt=uC;function O_(r,e){var t=[];return r[e].forEach(function(n){var i=t.length;t.forEach(function(s,a){s.tag===n.tag&&s.kind===n.kind&&s.multi===n.multi&&(i=a)}),t[i]=n}),t}o(O_,"compileList");function lC(){var r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function n(i){i.multi?(r.multi[i.kind].push(i),r.multi.fallback.push(i)):r[i.kind][i.tag]=r.fallback[i.tag]=i}for(o(n,"collectType"),e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return r}o(lC,"compileMap");function Em(r){return this.extend(r)}o(Em,"Schema$1");Em.prototype.extend=o(function(e){var t=[],n=[];if(e instanceof Rt)n.push(e);else if(Array.isArray(e))n=n.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(n=n.concat(e.explicit));else throw new nr("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(s){if(!(s instanceof Rt))throw new nr("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new nr("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new nr("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(s){if(!(s instanceof Rt))throw new nr("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Em.prototype);return i.implicit=(this.implicit||[]).concat(t),i.explicit=(this.explicit||[]).concat(n),i.compiledImplicit=O_(i,"implicit"),i.compiledExplicit=O_(i,"explicit"),i.compiledTypeMap=lC(i.compiledImplicit,i.compiledExplicit),i},"extend");var W_=Em,G_=new Rt("tag:yaml.org,2002:str",{kind:"scalar",construct:o(function(r){return r!==null?r:""},"construct")}),H_=new Rt("tag:yaml.org,2002:seq",{kind:"sequence",construct:o(function(r){return r!==null?r:[]},"construct")}),z_=new Rt("tag:yaml.org,2002:map",{kind:"mapping",construct:o(function(r){return r!==null?r:{}},"construct")}),K_=new W_({explicit:[G_,H_,z_]});function fC(r){if(r===null)return!0;var e=r.length;return e===1&&r==="~"||e===4&&(r==="null"||r==="Null"||r==="NULL")}o(fC,"resolveYamlNull");function hC(){return null}o(hC,"constructYamlNull");function dC(r){return r===null}o(dC,"isNull");var Y_=new Rt("tag:yaml.org,2002:null",{kind:"scalar",resolve:fC,construct:hC,predicate:dC,represent:{canonical:o(function(){return"~"},"canonical"),lowercase:o(function(){return"null"},"lowercase"),uppercase:o(function(){return"NULL"},"uppercase"),camelcase:o(function(){return"Null"},"camelcase"),empty:o(function(){return""},"empty")},defaultStyle:"lowercase"});function pC(r){if(r===null)return!1;var e=r.length;return e===4&&(r==="true"||r==="True"||r==="TRUE")||e===5&&(r==="false"||r==="False"||r==="FALSE")}o(pC,"resolveYamlBoolean");function mC(r){return r==="true"||r==="True"||r==="TRUE"}o(mC,"constructYamlBoolean");function gC(r){return Object.prototype.toString.call(r)==="[object Boolean]"}o(gC,"isBoolean");var Q_=new Rt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:pC,construct:mC,predicate:gC,represent:{lowercase:o(function(r){return r?"true":"false"},"lowercase"),uppercase:o(function(r){return r?"TRUE":"FALSE"},"uppercase"),camelcase:o(function(r){return r?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function yC(r){return 48<=r&&r<=57||65<=r&&r<=70||97<=r&&r<=102}o(yC,"isHexCode");function _C(r){return 48<=r&&r<=55}o(_C,"isOctCode");function vC(r){return 48<=r&&r<=57}o(vC,"isDecCode");function bC(r){if(r===null)return!1;var e=r.length,t=0,n=!1,i;if(!e)return!1;if(i=r[t],(i==="-"||i==="+")&&(i=r[++t]),i==="0"){if(t+1===e)return!0;if(i=r[++t],i==="b"){for(t++;t<e;t++)if(i=r[t],i!=="_"){if(i!=="0"&&i!=="1")return!1;n=!0}return n&&i!=="_"}if(i==="x"){for(t++;t<e;t++)if(i=r[t],i!=="_"){if(!yC(r.charCodeAt(t)))return!1;n=!0}return n&&i!=="_"}if(i==="o"){for(t++;t<e;t++)if(i=r[t],i!=="_"){if(!_C(r.charCodeAt(t)))return!1;n=!0}return n&&i!=="_"}}if(i==="_")return!1;for(;t<e;t++)if(i=r[t],i!=="_"){if(!vC(r.charCodeAt(t)))return!1;n=!0}return!(!n||i==="_")}o(bC,"resolveYamlInteger");function SC(r){var e=r,t=1,n;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(t=-1),e=e.slice(1),n=e[0]),e==="0")return 0;if(n==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}o(SC,"constructYamlInteger");function wC(r){return Object.prototype.toString.call(r)==="[object Number]"&&r%1===0&&!gt.isNegativeZero(r)}o(wC,"isInteger");var J_=new Rt("tag:yaml.org,2002:int",{kind:"scalar",resolve:bC,construct:SC,predicate:wC,represent:{binary:o(function(r){return r>=0?"0b"+r.toString(2):"-0b"+r.toString(2).slice(1)},"binary"),octal:o(function(r){return r>=0?"0o"+r.toString(8):"-0o"+r.toString(8).slice(1)},"octal"),decimal:o(function(r){return r.toString(10)},"decimal"),hexadecimal:o(function(r){return r>=0?"0x"+r.toString(16).toUpperCase():"-0x"+r.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),EC=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function TC(r){return!(r===null||!EC.test(r)||r[r.length-1]==="_")}o(TC,"resolveYamlFloat");function xC(r){var e,t;return e=r.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}o(xC,"constructYamlFloat");var AC=/^[-+]?[0-9]+e/;function OC(r,e){var t;if(isNaN(r))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===r)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===r)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(gt.isNegativeZero(r))return"-0.0";return t=r.toString(10),AC.test(t)?t.replace("e",".e"):t}o(OC,"representYamlFloat");function CC(r){return Object.prototype.toString.call(r)==="[object Number]"&&(r%1!==0||gt.isNegativeZero(r))}o(CC,"isFloat");var X_=new Rt("tag:yaml.org,2002:float",{kind:"scalar",resolve:TC,construct:xC,predicate:CC,represent:OC,defaultStyle:"lowercase"}),Z_=K_.extend({implicit:[Y_,Q_,J_,X_]}),ev=Z_,tv=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),rv=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function FC(r){return r===null?!1:tv.exec(r)!==null||rv.exec(r)!==null}o(FC,"resolveYamlTimestamp");function PC(r){var e,t,n,i,s,a,c,u=0,f=null,l,h,p;if(e=tv.exec(r),e===null&&(e=rv.exec(r)),e===null)throw new Error("Date resolve error");if(t=+e[1],n=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(t,n,i));if(s=+e[4],a=+e[5],c=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(l=+e[10],h=+(e[11]||0),f=(l*60+h)*6e4,e[9]==="-"&&(f=-f)),p=new Date(Date.UTC(t,n,i,s,a,c,u)),f&&p.setTime(p.getTime()-f),p}o(PC,"constructYamlTimestamp");function IC(r){return r.toISOString()}o(IC,"representYamlTimestamp");var nv=new Rt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:FC,construct:PC,instanceOf:Date,represent:IC});function DC(r){return r==="<<"||r===null}o(DC,"resolveYamlMerge");var iv=new Rt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:DC}),Cm=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function RC(r){if(r===null)return!1;var e,t,n=0,i=r.length,s=Cm;for(t=0;t<i;t++)if(e=s.indexOf(r.charAt(t)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}o(RC,"resolveYamlBinary");function NC(r){var e,t,n=r.replace(/[\r\n=]/g,""),i=n.length,s=Cm,a=0,c=[];for(e=0;e<i;e++)e%4===0&&e&&(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)),a=a<<6|s.indexOf(n.charAt(e));return t=i%4*6,t===0?(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)):t===18?(c.push(a>>10&255),c.push(a>>2&255)):t===12&&c.push(a>>4&255),new Uint8Array(c)}o(NC,"constructYamlBinary");function kC(r){var e="",t=0,n,i,s=r.length,a=Cm;for(n=0;n<s;n++)n%3===0&&n&&(e+=a[t>>18&63],e+=a[t>>12&63],e+=a[t>>6&63],e+=a[t&63]),t=(t<<8)+r[n];return i=s%3,i===0?(e+=a[t>>18&63],e+=a[t>>12&63],e+=a[t>>6&63],e+=a[t&63]):i===2?(e+=a[t>>10&63],e+=a[t>>4&63],e+=a[t<<2&63],e+=a[64]):i===1&&(e+=a[t>>2&63],e+=a[t<<4&63],e+=a[64],e+=a[64]),e}o(kC,"representYamlBinary");function jC(r){return Object.prototype.toString.call(r)==="[object Uint8Array]"}o(jC,"isBinary");var sv=new Rt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:RC,construct:NC,predicate:jC,represent:kC}),MC=Object.prototype.hasOwnProperty,LC=Object.prototype.toString;function VC(r){if(r===null)return!0;var e=[],t,n,i,s,a,c=r;for(t=0,n=c.length;t<n;t+=1){if(i=c[t],a=!1,LC.call(i)!=="[object Object]")return!1;for(s in i)if(MC.call(i,s))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}o(VC,"resolveYamlOmap");function qC(r){return r!==null?r:[]}o(qC,"constructYamlOmap");var av=new Rt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:VC,construct:qC}),UC=Object.prototype.toString;function BC(r){if(r===null)return!0;var e,t,n,i,s,a=r;for(s=new Array(a.length),e=0,t=a.length;e<t;e+=1){if(n=a[e],UC.call(n)!=="[object Object]"||(i=Object.keys(n),i.length!==1))return!1;s[e]=[i[0],n[i[0]]]}return!0}o(BC,"resolveYamlPairs");function $C(r){if(r===null)return[];var e,t,n,i,s,a=r;for(s=new Array(a.length),e=0,t=a.length;e<t;e+=1)n=a[e],i=Object.keys(n),s[e]=[i[0],n[i[0]]];return s}o($C,"constructYamlPairs");var ov=new Rt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:BC,construct:$C}),WC=Object.prototype.hasOwnProperty;function GC(r){if(r===null)return!0;var e,t=r;for(e in t)if(WC.call(t,e)&&t[e]!==null)return!1;return!0}o(GC,"resolveYamlSet");function HC(r){return r!==null?r:{}}o(HC,"constructYamlSet");var cv=new Rt("tag:yaml.org,2002:set",{kind:"mapping",resolve:GC,construct:HC}),Fm=ev.extend({implicit:[nv,iv],explicit:[sv,av,ov,cv]}),xi=Object.prototype.hasOwnProperty,fl=1,uv=2,lv=3,hl=4,wm=1,zC=2,C_=3,KC=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,YC=/[\x85\u2028\u2029]/,QC=/[,\[\]\{\}]/,fv=/^(?:!|!!|![a-z\-]+!)$/i,hv=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function F_(r){return Object.prototype.toString.call(r)}o(F_,"_class");function In(r){return r===10||r===13}o(In,"is_EOL");function fs(r){return r===9||r===32}o(fs,"is_WHITE_SPACE");function mr(r){return r===9||r===32||r===10||r===13}o(mr,"is_WS_OR_EOL");function ra(r){return r===44||r===91||r===93||r===123||r===125}o(ra,"is_FLOW_INDICATOR");function JC(r){var e;return 48<=r&&r<=57?r-48:(e=r|32,97<=e&&e<=102?e-97+10:-1)}o(JC,"fromHexCode");function XC(r){return r===120?2:r===117?4:r===85?8:0}o(XC,"escapedHexLen");function ZC(r){return 48<=r&&r<=57?r-48:-1}o(ZC,"fromDecimalCode");function P_(r){return r===48?"\0":r===97?"\x07":r===98?"\b":r===116||r===9?"	":r===110?`
`:r===118?"\v":r===102?"\f":r===114?"\r":r===101?"\x1B":r===32?" ":r===34?'"':r===47?"/":r===92?"\\":r===78?"\x85":r===95?"\xA0":r===76?"\u2028":r===80?"\u2029":""}o(P_,"simpleEscapeSequence");function e8(r){return r<=65535?String.fromCharCode(r):String.fromCharCode((r-65536>>10)+55296,(r-65536&1023)+56320)}o(e8,"charFromCodepoint");var dv=new Array(256),pv=new Array(256);for(ls=0;ls<256;ls++)dv[ls]=P_(ls)?1:0,pv[ls]=P_(ls);var ls;function t8(r,e){this.input=r,this.filename=e.filename||null,this.schema=e.schema||Fm,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=r.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}o(t8,"State$1");function mv(r,e){var t={name:r.filename,buffer:r.input.slice(0,-1),position:r.position,line:r.line,column:r.position-r.lineStart};return t.snippet=sC(t),new nr(e,t)}o(mv,"generateError");function J(r,e){throw mv(r,e)}o(J,"throwError");function dl(r,e){r.onWarning&&r.onWarning.call(null,mv(r,e))}o(dl,"throwWarning");var I_={YAML:o(function(e,t,n){var i,s,a;e.version!==null&&J(e,"duplication of %YAML directive"),n.length!==1&&J(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),i===null&&J(e,"ill-formed argument of the YAML directive"),s=parseInt(i[1],10),a=parseInt(i[2],10),s!==1&&J(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&dl(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:o(function(e,t,n){var i,s;n.length!==2&&J(e,"TAG directive accepts exactly two arguments"),i=n[0],s=n[1],fv.test(i)||J(e,"ill-formed tag handle (first argument) of the TAG directive"),xi.call(e.tagMap,i)&&J(e,'there is a previously declared suffix for "'+i+'" tag handle'),hv.test(s)||J(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{J(e,"tag prefix is malformed: "+s)}e.tagMap[i]=s},"handleTagDirective")};function Ti(r,e,t,n){var i,s,a,c;if(e<t){if(c=r.input.slice(e,t),n)for(i=0,s=c.length;i<s;i+=1)a=c.charCodeAt(i),a===9||32<=a&&a<=1114111||J(r,"expected valid JSON character");else KC.test(c)&&J(r,"the stream contains non-printable characters");r.result+=c}}o(Ti,"captureSegment");function D_(r,e,t,n){var i,s,a,c;for(gt.isObject(t)||J(r,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(t),a=0,c=i.length;a<c;a+=1)s=i[a],xi.call(e,s)||(e[s]=t[s],n[s]=!0)}o(D_,"mergeMappings");function na(r,e,t,n,i,s,a,c,u){var f,l;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),f=0,l=i.length;f<l;f+=1)Array.isArray(i[f])&&J(r,"nested arrays are not supported inside keys"),typeof i=="object"&&F_(i[f])==="[object Object]"&&(i[f]="[object Object]");if(typeof i=="object"&&F_(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(f=0,l=s.length;f<l;f+=1)D_(r,e,s[f],t);else D_(r,e,s,t);else!r.json&&!xi.call(t,i)&&xi.call(e,i)&&(r.line=a||r.line,r.lineStart=c||r.lineStart,r.position=u||r.position,J(r,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[i]=s,delete t[i];return e}o(na,"storeMappingPair");function Pm(r){var e;e=r.input.charCodeAt(r.position),e===10?r.position++:e===13?(r.position++,r.input.charCodeAt(r.position)===10&&r.position++):J(r,"a line break is expected"),r.line+=1,r.lineStart=r.position,r.firstTabInLine=-1}o(Pm,"readLineBreak");function pt(r,e,t){for(var n=0,i=r.input.charCodeAt(r.position);i!==0;){for(;fs(i);)i===9&&r.firstTabInLine===-1&&(r.firstTabInLine=r.position),i=r.input.charCodeAt(++r.position);if(e&&i===35)do i=r.input.charCodeAt(++r.position);while(i!==10&&i!==13&&i!==0);if(In(i))for(Pm(r),i=r.input.charCodeAt(r.position),n++,r.lineIndent=0;i===32;)r.lineIndent++,i=r.input.charCodeAt(++r.position);else break}return t!==-1&&n!==0&&r.lineIndent<t&&dl(r,"deficient indentation"),n}o(pt,"skipSeparationSpace");function gl(r){var e=r.position,t;return t=r.input.charCodeAt(e),!!((t===45||t===46)&&t===r.input.charCodeAt(e+1)&&t===r.input.charCodeAt(e+2)&&(e+=3,t=r.input.charCodeAt(e),t===0||mr(t)))}o(gl,"testDocumentSeparator");function Im(r,e){e===1?r.result+=" ":e>1&&(r.result+=gt.repeat(`
`,e-1))}o(Im,"writeFoldedLines");function r8(r,e,t){var n,i,s,a,c,u,f,l,h=r.kind,p=r.result,m;if(m=r.input.charCodeAt(r.position),mr(m)||ra(m)||m===35||m===38||m===42||m===33||m===124||m===62||m===39||m===34||m===37||m===64||m===96||(m===63||m===45)&&(i=r.input.charCodeAt(r.position+1),mr(i)||t&&ra(i)))return!1;for(r.kind="scalar",r.result="",s=a=r.position,c=!1;m!==0;){if(m===58){if(i=r.input.charCodeAt(r.position+1),mr(i)||t&&ra(i))break}else if(m===35){if(n=r.input.charCodeAt(r.position-1),mr(n))break}else{if(r.position===r.lineStart&&gl(r)||t&&ra(m))break;if(In(m))if(u=r.line,f=r.lineStart,l=r.lineIndent,pt(r,!1,-1),r.lineIndent>=e){c=!0,m=r.input.charCodeAt(r.position);continue}else{r.position=a,r.line=u,r.lineStart=f,r.lineIndent=l;break}}c&&(Ti(r,s,a,!1),Im(r,r.line-u),s=a=r.position,c=!1),fs(m)||(a=r.position+1),m=r.input.charCodeAt(++r.position)}return Ti(r,s,a,!1),r.result?!0:(r.kind=h,r.result=p,!1)}o(r8,"readPlainScalar");function n8(r,e){var t,n,i;if(t=r.input.charCodeAt(r.position),t!==39)return!1;for(r.kind="scalar",r.result="",r.position++,n=i=r.position;(t=r.input.charCodeAt(r.position))!==0;)if(t===39)if(Ti(r,n,r.position,!0),t=r.input.charCodeAt(++r.position),t===39)n=r.position,r.position++,i=r.position;else return!0;else In(t)?(Ti(r,n,i,!0),Im(r,pt(r,!1,e)),n=i=r.position):r.position===r.lineStart&&gl(r)?J(r,"unexpected end of the document within a single quoted scalar"):(r.position++,i=r.position);J(r,"unexpected end of the stream within a single quoted scalar")}o(n8,"readSingleQuotedScalar");function i8(r,e){var t,n,i,s,a,c;if(c=r.input.charCodeAt(r.position),c!==34)return!1;for(r.kind="scalar",r.result="",r.position++,t=n=r.position;(c=r.input.charCodeAt(r.position))!==0;){if(c===34)return Ti(r,t,r.position,!0),r.position++,!0;if(c===92){if(Ti(r,t,r.position,!0),c=r.input.charCodeAt(++r.position),In(c))pt(r,!1,e);else if(c<256&&dv[c])r.result+=pv[c],r.position++;else if((a=XC(c))>0){for(i=a,s=0;i>0;i--)c=r.input.charCodeAt(++r.position),(a=JC(c))>=0?s=(s<<4)+a:J(r,"expected hexadecimal character");r.result+=e8(s),r.position++}else J(r,"unknown escape sequence");t=n=r.position}else In(c)?(Ti(r,t,n,!0),Im(r,pt(r,!1,e)),t=n=r.position):r.position===r.lineStart&&gl(r)?J(r,"unexpected end of the document within a double quoted scalar"):(r.position++,n=r.position)}J(r,"unexpected end of the stream within a double quoted scalar")}o(i8,"readDoubleQuotedScalar");function s8(r,e){var t=!0,n,i,s,a=r.tag,c,u=r.anchor,f,l,h,p,m,b=Object.create(null),y,x,A,C;if(C=r.input.charCodeAt(r.position),C===91)l=93,m=!1,c=[];else if(C===123)l=125,m=!0,c={};else return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=c),C=r.input.charCodeAt(++r.position);C!==0;){if(pt(r,!0,e),C=r.input.charCodeAt(r.position),C===l)return r.position++,r.tag=a,r.anchor=u,r.kind=m?"mapping":"sequence",r.result=c,!0;t?C===44&&J(r,"expected the node content, but found ','"):J(r,"missed comma between flow collection entries"),x=y=A=null,h=p=!1,C===63&&(f=r.input.charCodeAt(r.position+1),mr(f)&&(h=p=!0,r.position++,pt(r,!0,e))),n=r.line,i=r.lineStart,s=r.position,ia(r,e,fl,!1,!0),x=r.tag,y=r.result,pt(r,!0,e),C=r.input.charCodeAt(r.position),(p||r.line===n)&&C===58&&(h=!0,C=r.input.charCodeAt(++r.position),pt(r,!0,e),ia(r,e,fl,!1,!0),A=r.result),m?na(r,c,b,x,y,A,n,i,s):h?c.push(na(r,null,b,x,y,A,n,i,s)):c.push(y),pt(r,!0,e),C=r.input.charCodeAt(r.position),C===44?(t=!0,C=r.input.charCodeAt(++r.position)):t=!1}J(r,"unexpected end of the stream within a flow collection")}o(s8,"readFlowCollection");function a8(r,e){var t,n,i=wm,s=!1,a=!1,c=e,u=0,f=!1,l,h;if(h=r.input.charCodeAt(r.position),h===124)n=!1;else if(h===62)n=!0;else return!1;for(r.kind="scalar",r.result="";h!==0;)if(h=r.input.charCodeAt(++r.position),h===43||h===45)wm===i?i=h===43?C_:zC:J(r,"repeat of a chomping mode identifier");else if((l=ZC(h))>=0)l===0?J(r,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?J(r,"repeat of an indentation width identifier"):(c=e+l-1,a=!0);else break;if(fs(h)){do h=r.input.charCodeAt(++r.position);while(fs(h));if(h===35)do h=r.input.charCodeAt(++r.position);while(!In(h)&&h!==0)}for(;h!==0;){for(Pm(r),r.lineIndent=0,h=r.input.charCodeAt(r.position);(!a||r.lineIndent<c)&&h===32;)r.lineIndent++,h=r.input.charCodeAt(++r.position);if(!a&&r.lineIndent>c&&(c=r.lineIndent),In(h)){u++;continue}if(r.lineIndent<c){i===C_?r.result+=gt.repeat(`
`,s?1+u:u):i===wm&&s&&(r.result+=`
`);break}for(n?fs(h)?(f=!0,r.result+=gt.repeat(`
`,s?1+u:u)):f?(f=!1,r.result+=gt.repeat(`
`,u+1)):u===0?s&&(r.result+=" "):r.result+=gt.repeat(`
`,u):r.result+=gt.repeat(`
`,s?1+u:u),s=!0,a=!0,u=0,t=r.position;!In(h)&&h!==0;)h=r.input.charCodeAt(++r.position);Ti(r,t,r.position,!1)}return!0}o(a8,"readBlockScalar");function R_(r,e){var t,n=r.tag,i=r.anchor,s=[],a,c=!1,u;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=s),u=r.input.charCodeAt(r.position);u!==0&&(r.firstTabInLine!==-1&&(r.position=r.firstTabInLine,J(r,"tab characters must not be used in indentation")),!(u!==45||(a=r.input.charCodeAt(r.position+1),!mr(a))));){if(c=!0,r.position++,pt(r,!0,-1)&&r.lineIndent<=e){s.push(null),u=r.input.charCodeAt(r.position);continue}if(t=r.line,ia(r,e,lv,!1,!0),s.push(r.result),pt(r,!0,-1),u=r.input.charCodeAt(r.position),(r.line===t||r.lineIndent>e)&&u!==0)J(r,"bad indentation of a sequence entry");else if(r.lineIndent<e)break}return c?(r.tag=n,r.anchor=i,r.kind="sequence",r.result=s,!0):!1}o(R_,"readBlockSequence");function o8(r,e,t){var n,i,s,a,c,u,f=r.tag,l=r.anchor,h={},p=Object.create(null),m=null,b=null,y=null,x=!1,A=!1,C;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=h),C=r.input.charCodeAt(r.position);C!==0;){if(!x&&r.firstTabInLine!==-1&&(r.position=r.firstTabInLine,J(r,"tab characters must not be used in indentation")),n=r.input.charCodeAt(r.position+1),s=r.line,(C===63||C===58)&&mr(n))C===63?(x&&(na(r,h,p,m,b,null,a,c,u),m=b=y=null),A=!0,x=!0,i=!0):x?(x=!1,i=!0):J(r,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),r.position+=1,C=n;else{if(a=r.line,c=r.lineStart,u=r.position,!ia(r,t,uv,!1,!0))break;if(r.line===s){for(C=r.input.charCodeAt(r.position);fs(C);)C=r.input.charCodeAt(++r.position);if(C===58)C=r.input.charCodeAt(++r.position),mr(C)||J(r,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(na(r,h,p,m,b,null,a,c,u),m=b=y=null),A=!0,x=!1,i=!1,m=r.tag,b=r.result;else if(A)J(r,"can not read an implicit mapping pair; a colon is missed");else return r.tag=f,r.anchor=l,!0}else if(A)J(r,"can not read a block mapping entry; a multiline key may not be an implicit key");else return r.tag=f,r.anchor=l,!0}if((r.line===s||r.lineIndent>e)&&(x&&(a=r.line,c=r.lineStart,u=r.position),ia(r,e,hl,!0,i)&&(x?b=r.result:y=r.result),x||(na(r,h,p,m,b,y,a,c,u),m=b=y=null),pt(r,!0,-1),C=r.input.charCodeAt(r.position)),(r.line===s||r.lineIndent>e)&&C!==0)J(r,"bad indentation of a mapping entry");else if(r.lineIndent<e)break}return x&&na(r,h,p,m,b,null,a,c,u),A&&(r.tag=f,r.anchor=l,r.kind="mapping",r.result=h),A}o(o8,"readBlockMapping");function c8(r){var e,t=!1,n=!1,i,s,a;if(a=r.input.charCodeAt(r.position),a!==33)return!1;if(r.tag!==null&&J(r,"duplication of a tag property"),a=r.input.charCodeAt(++r.position),a===60?(t=!0,a=r.input.charCodeAt(++r.position)):a===33?(n=!0,i="!!",a=r.input.charCodeAt(++r.position)):i="!",e=r.position,t){do a=r.input.charCodeAt(++r.position);while(a!==0&&a!==62);r.position<r.length?(s=r.input.slice(e,r.position),a=r.input.charCodeAt(++r.position)):J(r,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!mr(a);)a===33&&(n?J(r,"tag suffix cannot contain exclamation marks"):(i=r.input.slice(e-1,r.position+1),fv.test(i)||J(r,"named tag handle cannot contain such characters"),n=!0,e=r.position+1)),a=r.input.charCodeAt(++r.position);s=r.input.slice(e,r.position),QC.test(s)&&J(r,"tag suffix cannot contain flow indicator characters")}s&&!hv.test(s)&&J(r,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{J(r,"tag name is malformed: "+s)}return t?r.tag=s:xi.call(r.tagMap,i)?r.tag=r.tagMap[i]+s:i==="!"?r.tag="!"+s:i==="!!"?r.tag="tag:yaml.org,2002:"+s:J(r,'undeclared tag handle "'+i+'"'),!0}o(c8,"readTagProperty");function u8(r){var e,t;if(t=r.input.charCodeAt(r.position),t!==38)return!1;for(r.anchor!==null&&J(r,"duplication of an anchor property"),t=r.input.charCodeAt(++r.position),e=r.position;t!==0&&!mr(t)&&!ra(t);)t=r.input.charCodeAt(++r.position);return r.position===e&&J(r,"name of an anchor node must contain at least one character"),r.anchor=r.input.slice(e,r.position),!0}o(u8,"readAnchorProperty");function l8(r){var e,t,n;if(n=r.input.charCodeAt(r.position),n!==42)return!1;for(n=r.input.charCodeAt(++r.position),e=r.position;n!==0&&!mr(n)&&!ra(n);)n=r.input.charCodeAt(++r.position);return r.position===e&&J(r,"name of an alias node must contain at least one character"),t=r.input.slice(e,r.position),xi.call(r.anchorMap,t)||J(r,'unidentified alias "'+t+'"'),r.result=r.anchorMap[t],pt(r,!0,-1),!0}o(l8,"readAlias");function ia(r,e,t,n,i){var s,a,c,u=1,f=!1,l=!1,h,p,m,b,y,x;if(r.listener!==null&&r.listener("open",r),r.tag=null,r.anchor=null,r.kind=null,r.result=null,s=a=c=hl===t||lv===t,n&&pt(r,!0,-1)&&(f=!0,r.lineIndent>e?u=1:r.lineIndent===e?u=0:r.lineIndent<e&&(u=-1)),u===1)for(;c8(r)||u8(r);)pt(r,!0,-1)?(f=!0,c=s,r.lineIndent>e?u=1:r.lineIndent===e?u=0:r.lineIndent<e&&(u=-1)):c=!1;if(c&&(c=f||i),(u===1||hl===t)&&(fl===t||uv===t?y=e:y=e+1,x=r.position-r.lineStart,u===1?c&&(R_(r,x)||o8(r,x,y))||s8(r,y)?l=!0:(a&&a8(r,y)||n8(r,y)||i8(r,y)?l=!0:l8(r)?(l=!0,(r.tag!==null||r.anchor!==null)&&J(r,"alias node should not have any properties")):r8(r,y,fl===t)&&(l=!0,r.tag===null&&(r.tag="?")),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):u===0&&(l=c&&R_(r,x))),r.tag===null)r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);else if(r.tag==="?"){for(r.result!==null&&r.kind!=="scalar"&&J(r,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+r.kind+'"'),h=0,p=r.implicitTypes.length;h<p;h+=1)if(b=r.implicitTypes[h],b.resolve(r.result)){r.result=b.construct(r.result),r.tag=b.tag,r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);break}}else if(r.tag!=="!"){if(xi.call(r.typeMap[r.kind||"fallback"],r.tag))b=r.typeMap[r.kind||"fallback"][r.tag];else for(b=null,m=r.typeMap.multi[r.kind||"fallback"],h=0,p=m.length;h<p;h+=1)if(r.tag.slice(0,m[h].tag.length)===m[h].tag){b=m[h];break}b||J(r,"unknown tag !<"+r.tag+">"),r.result!==null&&b.kind!==r.kind&&J(r,"unacceptable node kind for !<"+r.tag+'> tag; it should be "'+b.kind+'", not "'+r.kind+'"'),b.resolve(r.result,r.tag)?(r.result=b.construct(r.result,r.tag),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):J(r,"cannot resolve a node with !<"+r.tag+"> explicit tag")}return r.listener!==null&&r.listener("close",r),r.tag!==null||r.anchor!==null||l}o(ia,"composeNode");function f8(r){var e=r.position,t,n,i,s=!1,a;for(r.version=null,r.checkLineBreaks=r.legacy,r.tagMap=Object.create(null),r.anchorMap=Object.create(null);(a=r.input.charCodeAt(r.position))!==0&&(pt(r,!0,-1),a=r.input.charCodeAt(r.position),!(r.lineIndent>0||a!==37));){for(s=!0,a=r.input.charCodeAt(++r.position),t=r.position;a!==0&&!mr(a);)a=r.input.charCodeAt(++r.position);for(n=r.input.slice(t,r.position),i=[],n.length<1&&J(r,"directive name must not be less than one character in length");a!==0;){for(;fs(a);)a=r.input.charCodeAt(++r.position);if(a===35){do a=r.input.charCodeAt(++r.position);while(a!==0&&!In(a));break}if(In(a))break;for(t=r.position;a!==0&&!mr(a);)a=r.input.charCodeAt(++r.position);i.push(r.input.slice(t,r.position))}a!==0&&Pm(r),xi.call(I_,n)?I_[n](r,n,i):dl(r,'unknown document directive "'+n+'"')}if(pt(r,!0,-1),r.lineIndent===0&&r.input.charCodeAt(r.position)===45&&r.input.charCodeAt(r.position+1)===45&&r.input.charCodeAt(r.position+2)===45?(r.position+=3,pt(r,!0,-1)):s&&J(r,"directives end mark is expected"),ia(r,r.lineIndent-1,hl,!1,!0),pt(r,!0,-1),r.checkLineBreaks&&YC.test(r.input.slice(e,r.position))&&dl(r,"non-ASCII line breaks are interpreted as content"),r.documents.push(r.result),r.position===r.lineStart&&gl(r)){r.input.charCodeAt(r.position)===46&&(r.position+=3,pt(r,!0,-1));return}if(r.position<r.length-1)J(r,"end of the stream or a document separator is expected");else return}o(f8,"readDocument");function gv(r,e){r=String(r),e=e||{},r.length!==0&&(r.charCodeAt(r.length-1)!==10&&r.charCodeAt(r.length-1)!==13&&(r+=`
`),r.charCodeAt(0)===65279&&(r=r.slice(1)));var t=new t8(r,e),n=r.indexOf("\0");for(n!==-1&&(t.position=n,J(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)f8(t);return t.documents}o(gv,"loadDocuments");function h8(r,e,t){e!==null&&typeof e=="object"&&typeof t>"u"&&(t=e,e=null);var n=gv(r,t);if(typeof e!="function")return n;for(var i=0,s=n.length;i<s;i+=1)e(n[i])}o(h8,"loadAll$1");function d8(r,e){var t=gv(r,e);if(t.length!==0){if(t.length===1)return t[0];throw new nr("expected a single document in the stream, but found more")}}o(d8,"load$1");var p8=h8,m8=d8,yv={loadAll:p8,load:m8},_v=Object.prototype.toString,vv=Object.prototype.hasOwnProperty,Dm=65279,g8=9,po=10,y8=13,_8=32,v8=33,b8=34,Tm=35,S8=37,w8=38,E8=39,T8=42,bv=44,x8=45,pl=58,A8=61,O8=62,C8=63,F8=64,Sv=91,wv=93,P8=96,Ev=123,I8=124,Tv=125,Ut={};Ut[0]="\\0";Ut[7]="\\a";Ut[8]="\\b";Ut[9]="\\t";Ut[10]="\\n";Ut[11]="\\v";Ut[12]="\\f";Ut[13]="\\r";Ut[27]="\\e";Ut[34]='\\"';Ut[92]="\\\\";Ut[133]="\\N";Ut[160]="\\_";Ut[8232]="\\L";Ut[8233]="\\P";var D8=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],R8=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function N8(r,e){var t,n,i,s,a,c,u;if(e===null)return{};for(t={},n=Object.keys(e),i=0,s=n.length;i<s;i+=1)a=n[i],c=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),u=r.compiledTypeMap.fallback[a],u&&vv.call(u.styleAliases,c)&&(c=u.styleAliases[c]),t[a]=c;return t}o(N8,"compileStyleMap");function k8(r){var e,t,n;if(e=r.toString(16).toUpperCase(),r<=255)t="x",n=2;else if(r<=65535)t="u",n=4;else if(r<=4294967295)t="U",n=8;else throw new nr("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+gt.repeat("0",n-e.length)+e}o(k8,"encodeHex");var j8=1,mo=2;function M8(r){this.schema=r.schema||Fm,this.indent=Math.max(1,r.indent||2),this.noArrayIndent=r.noArrayIndent||!1,this.skipInvalid=r.skipInvalid||!1,this.flowLevel=gt.isNothing(r.flowLevel)?-1:r.flowLevel,this.styleMap=N8(this.schema,r.styles||null),this.sortKeys=r.sortKeys||!1,this.lineWidth=r.lineWidth||80,this.noRefs=r.noRefs||!1,this.noCompatMode=r.noCompatMode||!1,this.condenseFlow=r.condenseFlow||!1,this.quotingType=r.quotingType==='"'?mo:j8,this.forceQuotes=r.forceQuotes||!1,this.replacer=typeof r.replacer=="function"?r.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}o(M8,"State");function N_(r,e){for(var t=gt.repeat(" ",e),n=0,i=-1,s="",a,c=r.length;n<c;)i=r.indexOf(`
`,n),i===-1?(a=r.slice(n),n=c):(a=r.slice(n,i+1),n=i+1),a.length&&a!==`
`&&(s+=t),s+=a;return s}o(N_,"indentString");function xm(r,e){return`
`+gt.repeat(" ",r.indent*e)}o(xm,"generateNextLine");function L8(r,e){var t,n,i;for(t=0,n=r.implicitTypes.length;t<n;t+=1)if(i=r.implicitTypes[t],i.resolve(e))return!0;return!1}o(L8,"testImplicitResolving");function ml(r){return r===_8||r===g8}o(ml,"isWhitespace");function go(r){return 32<=r&&r<=126||161<=r&&r<=55295&&r!==8232&&r!==8233||57344<=r&&r<=65533&&r!==Dm||65536<=r&&r<=1114111}o(go,"isPrintable");function k_(r){return go(r)&&r!==Dm&&r!==y8&&r!==po}o(k_,"isNsCharOrWhitespace");function j_(r,e,t){var n=k_(r),i=n&&!ml(r);return(t?n:n&&r!==bv&&r!==Sv&&r!==wv&&r!==Ev&&r!==Tv)&&r!==Tm&&!(e===pl&&!i)||k_(e)&&!ml(e)&&r===Tm||e===pl&&i}o(j_,"isPlainSafe");function V8(r){return go(r)&&r!==Dm&&!ml(r)&&r!==x8&&r!==C8&&r!==pl&&r!==bv&&r!==Sv&&r!==wv&&r!==Ev&&r!==Tv&&r!==Tm&&r!==w8&&r!==T8&&r!==v8&&r!==I8&&r!==A8&&r!==O8&&r!==E8&&r!==b8&&r!==S8&&r!==F8&&r!==P8}o(V8,"isPlainSafeFirst");function q8(r){return!ml(r)&&r!==pl}o(q8,"isPlainSafeLast");function fo(r,e){var t=r.charCodeAt(e),n;return t>=55296&&t<=56319&&e+1<r.length&&(n=r.charCodeAt(e+1),n>=56320&&n<=57343)?(t-55296)*1024+n-56320+65536:t}o(fo,"codePointAt");function xv(r){var e=/^\n* /;return e.test(r)}o(xv,"needIndentIndicator");var Av=1,Am=2,Ov=3,Cv=4,ta=5;function U8(r,e,t,n,i,s,a,c){var u,f=0,l=null,h=!1,p=!1,m=n!==-1,b=-1,y=V8(fo(r,0))&&q8(fo(r,r.length-1));if(e||a)for(u=0;u<r.length;f>=65536?u+=2:u++){if(f=fo(r,u),!go(f))return ta;y=y&&j_(f,l,c),l=f}else{for(u=0;u<r.length;f>=65536?u+=2:u++){if(f=fo(r,u),f===po)h=!0,m&&(p=p||u-b-1>n&&r[b+1]!==" ",b=u);else if(!go(f))return ta;y=y&&j_(f,l,c),l=f}p=p||m&&u-b-1>n&&r[b+1]!==" "}return!h&&!p?y&&!a&&!i(r)?Av:s===mo?ta:Am:t>9&&xv(r)?ta:a?s===mo?ta:Am:p?Cv:Ov}o(U8,"chooseScalarStyle");function B8(r,e,t,n,i){r.dump=(function(){if(e.length===0)return r.quotingType===mo?'""':"''";if(!r.noCompatMode&&(D8.indexOf(e)!==-1||R8.test(e)))return r.quotingType===mo?'"'+e+'"':"'"+e+"'";var s=r.indent*Math.max(1,t),a=r.lineWidth===-1?-1:Math.max(Math.min(r.lineWidth,40),r.lineWidth-s),c=n||r.flowLevel>-1&&t>=r.flowLevel;function u(f){return L8(r,f)}switch(o(u,"testAmbiguity"),U8(e,c,r.indent,a,u,r.quotingType,r.forceQuotes&&!n,i)){case Av:return e;case Am:return"'"+e.replace(/'/g,"''")+"'";case Ov:return"|"+M_(e,r.indent)+L_(N_(e,s));case Cv:return">"+M_(e,r.indent)+L_(N_($8(e,a),s));case ta:return'"'+W8(e)+'"';default:throw new nr("impossible error: invalid scalar style")}})()}o(B8,"writeScalar");function M_(r,e){var t=xv(r)?String(e):"",n=r[r.length-1]===`
`,i=n&&(r[r.length-2]===`
`||r===`
`),s=i?"+":n?"":"-";return t+s+`
`}o(M_,"blockHeader");function L_(r){return r[r.length-1]===`
`?r.slice(0,-1):r}o(L_,"dropEndingNewline");function $8(r,e){for(var t=/(\n+)([^\n]*)/g,n=(function(){var f=r.indexOf(`
`);return f=f!==-1?f:r.length,t.lastIndex=f,V_(r.slice(0,f),e)})(),i=r[0]===`
`||r[0]===" ",s,a;a=t.exec(r);){var c=a[1],u=a[2];s=u[0]===" ",n+=c+(!i&&!s&&u!==""?`
`:"")+V_(u,e),i=s}return n}o($8,"foldString");function V_(r,e){if(r===""||r[0]===" ")return r;for(var t=/ [^ ]/g,n,i=0,s,a=0,c=0,u="";n=t.exec(r);)c=n.index,c-i>e&&(s=a>i?a:c,u+=`
`+r.slice(i,s),i=s+1),a=c;return u+=`
`,r.length-i>e&&a>i?u+=r.slice(i,a)+`
`+r.slice(a+1):u+=r.slice(i),u.slice(1)}o(V_,"foldLine");function W8(r){for(var e="",t=0,n,i=0;i<r.length;t>=65536?i+=2:i++)t=fo(r,i),n=Ut[t],!n&&go(t)?(e+=r[i],t>=65536&&(e+=r[i+1])):e+=n||k8(t);return e}o(W8,"escapeString");function G8(r,e,t){var n="",i=r.tag,s,a,c;for(s=0,a=t.length;s<a;s+=1)c=t[s],r.replacer&&(c=r.replacer.call(t,String(s),c)),(ei(r,e,c,!1,!1)||typeof c>"u"&&ei(r,e,null,!1,!1))&&(n!==""&&(n+=","+(r.condenseFlow?"":" ")),n+=r.dump);r.tag=i,r.dump="["+n+"]"}o(G8,"writeFlowSequence");function q_(r,e,t,n){var i="",s=r.tag,a,c,u;for(a=0,c=t.length;a<c;a+=1)u=t[a],r.replacer&&(u=r.replacer.call(t,String(a),u)),(ei(r,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&ei(r,e+1,null,!0,!0,!1,!0))&&((!n||i!=="")&&(i+=xm(r,e)),r.dump&&po===r.dump.charCodeAt(0)?i+="-":i+="- ",i+=r.dump);r.tag=s,r.dump=i||"[]"}o(q_,"writeBlockSequence");function H8(r,e,t){var n="",i=r.tag,s=Object.keys(t),a,c,u,f,l;for(a=0,c=s.length;a<c;a+=1)l="",n!==""&&(l+=", "),r.condenseFlow&&(l+='"'),u=s[a],f=t[u],r.replacer&&(f=r.replacer.call(t,u,f)),ei(r,e,u,!1,!1)&&(r.dump.length>1024&&(l+="? "),l+=r.dump+(r.condenseFlow?'"':"")+":"+(r.condenseFlow?"":" "),ei(r,e,f,!1,!1)&&(l+=r.dump,n+=l));r.tag=i,r.dump="{"+n+"}"}o(H8,"writeFlowMapping");function z8(r,e,t,n){var i="",s=r.tag,a=Object.keys(t),c,u,f,l,h,p;if(r.sortKeys===!0)a.sort();else if(typeof r.sortKeys=="function")a.sort(r.sortKeys);else if(r.sortKeys)throw new nr("sortKeys must be a boolean or a function");for(c=0,u=a.length;c<u;c+=1)p="",(!n||i!=="")&&(p+=xm(r,e)),f=a[c],l=t[f],r.replacer&&(l=r.replacer.call(t,f,l)),ei(r,e+1,f,!0,!0,!0)&&(h=r.tag!==null&&r.tag!=="?"||r.dump&&r.dump.length>1024,h&&(r.dump&&po===r.dump.charCodeAt(0)?p+="?":p+="? "),p+=r.dump,h&&(p+=xm(r,e)),ei(r,e+1,l,!0,h)&&(r.dump&&po===r.dump.charCodeAt(0)?p+=":":p+=": ",p+=r.dump,i+=p));r.tag=s,r.dump=i||"{}"}o(z8,"writeBlockMapping");function U_(r,e,t){var n,i,s,a,c,u;for(i=t?r.explicitTypes:r.implicitTypes,s=0,a=i.length;s<a;s+=1)if(c=i[s],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof e=="object"&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(t?c.multi&&c.representName?r.tag=c.representName(e):r.tag=c.tag:r.tag="?",c.represent){if(u=r.styleMap[c.tag]||c.defaultStyle,_v.call(c.represent)==="[object Function]")n=c.represent(e,u);else if(vv.call(c.represent,u))n=c.represent[u](e,u);else throw new nr("!<"+c.tag+'> tag resolver accepts not "'+u+'" style');r.dump=n}return!0}return!1}o(U_,"detectType");function ei(r,e,t,n,i,s,a){r.tag=null,r.dump=t,U_(r,t,!1)||U_(r,t,!0);var c=_v.call(r.dump),u=n,f;n&&(n=r.flowLevel<0||r.flowLevel>e);var l=c==="[object Object]"||c==="[object Array]",h,p;if(l&&(h=r.duplicates.indexOf(t),p=h!==-1),(r.tag!==null&&r.tag!=="?"||p||r.indent!==2&&e>0)&&(i=!1),p&&r.usedDuplicates[h])r.dump="*ref_"+h;else{if(l&&p&&!r.usedDuplicates[h]&&(r.usedDuplicates[h]=!0),c==="[object Object]")n&&Object.keys(r.dump).length!==0?(z8(r,e,r.dump,i),p&&(r.dump="&ref_"+h+r.dump)):(H8(r,e,r.dump),p&&(r.dump="&ref_"+h+" "+r.dump));else if(c==="[object Array]")n&&r.dump.length!==0?(r.noArrayIndent&&!a&&e>0?q_(r,e-1,r.dump,i):q_(r,e,r.dump,i),p&&(r.dump="&ref_"+h+r.dump)):(G8(r,e,r.dump),p&&(r.dump="&ref_"+h+" "+r.dump));else if(c==="[object String]")r.tag!=="?"&&B8(r,r.dump,e,s,u);else{if(c==="[object Undefined]")return!1;if(r.skipInvalid)return!1;throw new nr("unacceptable kind of an object to dump "+c)}r.tag!==null&&r.tag!=="?"&&(f=encodeURI(r.tag[0]==="!"?r.tag.slice(1):r.tag).replace(/!/g,"%21"),r.tag[0]==="!"?f="!"+f:f.slice(0,18)==="tag:yaml.org,2002:"?f="!!"+f.slice(18):f="!<"+f+">",r.dump=f+" "+r.dump)}return!0}o(ei,"writeNode");function K8(r,e){var t=[],n=[],i,s;for(Om(r,t,n),i=0,s=n.length;i<s;i+=1)e.duplicates.push(t[n[i]]);e.usedDuplicates=new Array(s)}o(K8,"getDuplicateReferences");function Om(r,e,t){var n,i,s;if(r!==null&&typeof r=="object")if(i=e.indexOf(r),i!==-1)t.indexOf(i)===-1&&t.push(i);else if(e.push(r),Array.isArray(r))for(i=0,s=r.length;i<s;i+=1)Om(r[i],e,t);else for(n=Object.keys(r),i=0,s=n.length;i<s;i+=1)Om(r[n[i]],e,t)}o(Om,"inspectNode");function Y8(r,e){e=e||{};var t=new M8(e);t.noRefs||K8(r,t);var n=r;return t.replacer&&(n=t.replacer.call({"":n},"",n)),ei(t,0,n,!0,!0)?t.dump+`
`:""}o(Y8,"dump$1");var Q8=Y8,J8={dump:Q8};function Rm(r,e){return function(){throw new Error("Function yaml."+r+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}o(Rm,"renamed");var X8=Rt,Z8=W_,eF=K_,tF=Z_,rF=ev,nF=Fm,iF=yv.load,sF=yv.loadAll,aF=J8.dump,oF=nr,cF={binary:sv,float:X_,map:z_,null:Y_,pairs:ov,set:cv,timestamp:nv,bool:Q_,int:J_,merge:iv,omap:av,seq:H_,str:G_},uF=Rm("safeLoad","load"),lF=Rm("safeLoadAll","loadAll"),fF=Rm("safeDump","dump"),hF={Type:X8,Schema:Z8,FAILSAFE_SCHEMA:eF,JSON_SCHEMA:tF,CORE_SCHEMA:rF,DEFAULT_SCHEMA:nF,load:iF,loadAll:sF,dump:aF,YAMLException:oF,types:cF,safeLoad:uF,safeLoadAll:lF,safeDump:fF},yo=hF;var yl=class{constructor(e){this.rootPath=e}static{o(this,"FileSystemVaultAdapter")}async read(e){let t=this.resolvePath(e.path);if(!await yt.default.pathExists(t))throw new Error(`File not found: ${e.path}`);return yt.default.readFile(t,"utf-8")}async create(e,t){let n=this.resolvePath(e);if(await yt.default.pathExists(n))throw new Error(`File already exists: ${e}`);return await yt.default.ensureDir(Bt.default.dirname(n)),await yt.default.writeFile(n,t,"utf-8"),this.createFileObject(e)}async modify(e,t){let n=this.resolvePath(e.path);if(!await yt.default.pathExists(n))throw new Error(`File not found: ${e.path}`);await yt.default.writeFile(n,t,"utf-8")}async delete(e){let t=this.resolvePath(e.path);if(!await yt.default.pathExists(t))throw new Error(`File not found: ${e.path}`);await yt.default.remove(t)}async exists(e){let t=this.resolvePath(e);return yt.default.pathExists(t)}getAbstractFileByPath(e){let t=this.resolvePath(e);try{let n=yt.default.statSync(t);if(n.isFile())return this.createFileObject(e);if(n.isDirectory())return this.createFolderObject(e)}catch{return null}return null}getAllFiles(){let e=[];return this.walkDirectory(this.rootPath,t=>{if(t.endsWith(".md")){let n=Bt.default.relative(this.rootPath,t);e.push(this.createFileObject(n))}}),e}getFrontmatter(e){try{let t=yt.default.readFileSync(this.resolvePath(e.path),"utf-8");return this.extractFrontmatter(t)}catch{return null}}async updateFrontmatter(e,t){let n=await this.read(e),i=this.extractFrontmatter(n)||{},s=t(i),a=this.replaceFrontmatter(n,s);await this.modify(e,a)}async rename(e,t){let n=this.resolvePath(e.path),i=this.resolvePath(t);if(!await yt.default.pathExists(n))throw new Error(`File not found: ${e.path}`);await yt.default.ensureDir(Bt.default.dirname(i)),await yt.default.move(n,i)}async createFolder(e){let t=this.resolvePath(e);await yt.default.ensureDir(t)}getFirstLinkpathDest(e,t){let n=Bt.default.dirname(this.resolvePath(t)),i;if(Bt.default.isAbsolute(e)?i=this.resolvePath(e):i=Bt.default.resolve(n,e),e.endsWith(".md")||(i+=".md"),yt.default.existsSync(i)){let s=Bt.default.relative(this.rootPath,i);return this.createFileObject(s)}return null}async process(e,t){let n=await this.read(e),i=t(n);return await this.modify(e,i),i}getDefaultNewFileParent(){return{path:"",name:""}}async updateLinks(e,t,n){return Promise.resolve()}resolvePath(e){return Bt.default.isAbsolute(e)?e:Bt.default.join(this.rootPath,e)}createFileObject(e){let t=Bt.default.basename(e),n=Bt.default.basename(e,Bt.default.extname(e)),i=Bt.default.dirname(e);return{path:e,basename:t,name:n,parent:i!=="."?this.createFolderObject(i):null}}createFolderObject(e){return{path:e,name:Bt.default.basename(e)}}extractFrontmatter(e){let t=/^---\n([\s\S]*?)\n---/,n=e.match(t);if(!n)return null;try{let i=yo.load(n[1]);return typeof i=="object"&&i!==null?i:null}catch{return null}}replaceFrontmatter(e,t){let n=yo.dump(t,{lineWidth:-1,noRefs:!0,quotingType:'"'}),i=/^---\n([\s\S]*?)\n---/;return e.match(i)?e.replace(i,`---
${n.trim()}
---`):`---
${n.trim()}
---
${e}`}walkDirectory(e,t){let n=yt.default.readdirSync(e,{withFileTypes:!0});for(let i of n){let s=Bt.default.join(e,i.name);i.isDirectory()?this.walkDirectory(s,t):i.isFile()&&t(s)}}};var _l=class{static{o(this,"TableFormatter")}format(e){if(e.length===0)return"No results";let t=this.getAllVariables(e),n=e.map(i=>this.solutionToRow(i,t));return this.renderTable(t,n)}getAllVariables(e){let t=new Set;for(let n of e)for(let i of n.variables())t.add(i);return Array.from(t).sort()}solutionToRow(e,t){return t.map(n=>{let i=e.get(n);return i?this.formatValue(i.toString()):""})}formatValue(e){return e.length>50?e.substring(0,47)+"...":e}renderTable(e,t){let n=e.map((s,a)=>{let c=s.length+1,u=Math.max(...t.map(f=>f[a]?.length||0));return Math.max(c,u,10)}),i=[];i.push(this.renderSeparator(n,"top")),i.push(this.renderRow(e.map(s=>`?${s}`),n)),i.push(this.renderSeparator(n,"mid"));for(let s of t)i.push(this.renderRow(s,n));return i.push(this.renderSeparator(n,"bottom")),i.join(`
`)}renderRow(e,t){return`\u2502 ${e.map((i,s)=>i.padEnd(t[s])).join(" \u2502 ")} \u2502`}renderSeparator(e,t){let n=t==="top"?"\u250C":t==="mid"?"\u251C":"\u2514",i=t==="top"?"\u2510":t==="mid"?"\u2524":"\u2518",a=t==="mid"?"\u2500\u253C\u2500":"\u2500"+(t==="mid"?"\u253C":"\u2500")+"\u2500",c=e.map(u=>"\u2500".repeat(u+2));return`${n}${c.join(a)}${i}`}};var vl=class{static{o(this,"JsonFormatter")}format(e){let t=e.map(n=>n.toJSON());return JSON.stringify(t,null,2)}};var _o=class{static{o(this,"TriplesFormatter")}formatNTriples(e){return e.map(t=>t.toString()).join(`
`)}formatTable(e){if(e.length===0)return"No triples generated.";let t=[];t.push("Subject | Predicate | Object"),t.push("------- | --------- | ------");for(let n of e){let i=this.formatNode(n.subject),s=this.formatNode(n.predicate),a=this.formatNode(n.object);t.push(`${i} | ${s} | ${a}`)}return t.join(`
`)}formatJson(e){let t=e.map(n=>({subject:this.nodeToJson(n.subject),predicate:this.nodeToJson(n.predicate),object:this.nodeToJson(n.object)}));return JSON.stringify(t,null,2)}formatNode(e){return e.value!==void 0?String(e.value):String(e)}nodeToJson(e){return"datatype"in e||"language"in e?{type:"literal",value:String(e.value),...e.datatype&&{datatype:e.datatype.value||String(e.datatype)},...e.language&&{language:e.language}}:"id"in e&&String(e.id).startsWith("_:")?{type:"bnode",value:String(e.id)}:{type:"uri",value:String(e.value)}}};function Fv(r){return r.startsWith("VALIDATION_")?"validation":r.startsWith("PERMISSION_")?"permission":r.startsWith("STATE_")?"state":"internal"}o(Fv,"getErrorCategory");var $t=class{static{o(this,"ResponseBuilder")}static success(e,t){return{success:!0,data:e,...t&&{meta:t}}}static error(e,t,n,i){return{success:!1,error:{code:e,category:Fv(e),message:t,exitCode:n,...i?.recovery&&{recovery:i.recovery},...i?.context&&{context:i.context},...i?.stack&&{stack:i.stack}}}}};var ir=class extends Error{static{o(this,"CLIError")}constructor(e,t,n){super(e),this.name=this.constructor.name,this.context=t,this.recoveryHint=n,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}format(){let e=`\u274C ${this.name}: ${this.message}`;if(this.guidance&&(e+=`

\u{1F4A1} ${this.guidance}`),this.context&&Object.keys(this.context).length>0){e+=`

\u{1F4CB} Context:`;for(let[t,n]of Object.entries(this.context))e+=`
  ${t}: ${JSON.stringify(n)}`}return e}toStructuredResponse(e=!1){return $t.error(this.errorCode,this.message,this.exitCode,{recovery:this.recoveryHint||{message:this.guidance},context:this.context,stack:e?this.stack:void 0})}formatJson(e=!1){return JSON.stringify(this.toStructuredResponse(e),null,2)}};var Be=class r{static{o(this,"ErrorHandler")}static{this.outputFormat="text"}static setFormat(e){r.outputFormat=e}static getFormat(){return r.outputFormat}static isDebugMode(){return!!process.env.DEBUG}static handle(e){if(e instanceof ir){if(r.outputFormat==="json"){let i=e.toStructuredResponse(r.isDebugMode());console.log(JSON.stringify(i,null,2))}else console.error(e.format()),r.isDebugMode()&&(console.error(`
\u{1F4CD} Stack trace:`),console.error(e.stack));process.exit(e.exitCode)}let{exitCode:t,errorCode:n}=r.classifyError(e);if(r.outputFormat==="json"){let i=r.buildErrorResponse(n,e.message,t,r.isDebugMode()?e.stack:void 0);console.log(JSON.stringify(i,null,2))}else console.error(`\u274C Error: ${e.message}`),r.isDebugMode()&&console.error(e.stack);process.exit(t)}static handleWithMessage(e,t=1,n="INTERNAL_UNKNOWN"){if(r.outputFormat==="json"){let i=r.buildErrorResponse(n,e,t);console.log(JSON.stringify(i,null,2))}else console.error(`\u274C Error: ${e}`);process.exit(t)}static classifyError(e){let t=e.message.toLowerCase();return t.includes("transition")?{exitCode:6,errorCode:"STATE_INVALID_TRANSITION"}:t.includes("transaction")?{exitCode:7,errorCode:"INTERNAL_TRANSACTION_FAILED"}:t.includes("concurrent")||t.includes("modified")?{exitCode:8,errorCode:"STATE_CONCURRENT_MODIFICATION"}:e.message.includes("not found")||e.message.includes("ENOENT")?{exitCode:3,errorCode:"VALIDATION_FILE_NOT_FOUND"}:e.message.includes("EACCES")||e.message.includes("permission denied")?{exitCode:4,errorCode:"PERMISSION_DENIED"}:e.message.includes("Invalid")||e.message.includes("outside vault")||e.message.includes("Not a")?{exitCode:2,errorCode:"VALIDATION_INVALID_ARGUMENTS"}:{exitCode:1,errorCode:"INTERNAL_UNKNOWN"}}static buildErrorResponse(e,t,n,i){return $t.error(e,t,n,{recovery:r.getRecoveryHint(e),stack:i})}static getRecoveryHint(e){switch(e){case"VALIDATION_FILE_NOT_FOUND":return{message:"Verify the file path is correct and the file exists",suggestion:"Check file path spelling and ensure the file is in the vault"};case"VALIDATION_VAULT_NOT_FOUND":return{message:"Verify the vault path is correct",suggestion:"Check --vault option or current directory"};case"VALIDATION_INVALID_ARGUMENTS":return{message:"Check command syntax and argument format",suggestion:"Use --help for usage information"};case"STATE_INVALID_TRANSITION":return{message:"The requested state transition is not allowed",suggestion:"Check the current asset state and valid transitions"};case"STATE_CONCURRENT_MODIFICATION":return{message:"File was modified by another process",suggestion:"Wait and retry the command"};case"PERMISSION_DENIED":return{message:"Check file permissions",suggestion:"Ensure you have write access to the vault"};case"INTERNAL_TRANSACTION_FAILED":return{message:"Transaction could not complete",suggestion:"Check for locked files and retry"};default:return{message:"An unexpected error occurred",suggestion:"Check the error details and retry"}}}};var vo=class extends ir{constructor(t,n){super(`File not found: ${t}`,{filepath:t,...n},{message:"Verify the file path is correct and the file exists",suggestion:`ls -la "${t}" or find . -name "$(basename ${t})"`});this.exitCode=3;this.errorCode="VALIDATION_FILE_NOT_FOUND";this.guidance=`Verify the file path is correct and the file exists.
Check:
  \u2022 File path spelling
  \u2022 File is in the vault directory
  \u2022 File has .md extension`}static{o(this,"FileNotFoundError")}};var ot=class extends ir{constructor(t,n,i){let s=`Check command syntax and argument format.
Use: exocortex command --help for usage information.`;super(t,i,{message:n||"Check command syntax and argument format",suggestion:"exocortex command --help"});this.exitCode=2;this.errorCode="VALIDATION_INVALID_ARGUMENTS";this.guidance=n||s}static{o(this,"InvalidArgumentsError")}};var hs=class extends ir{constructor(t,n){super(`Vault not found: ${t}`,{vaultPath:t,...n},{message:"Verify the vault path is correct and the directory exists",suggestion:`ls -la "${t}" or check --vault option`});this.exitCode=3;this.errorCode="VALIDATION_VAULT_NOT_FOUND";this.guidance=`The specified vault directory does not exist.
Check:
  \u2022 Path spelling and case sensitivity
  \u2022 Directory exists and is accessible
  \u2022 You have read permissions for the directory`}static{o(this,"VaultNotFoundError")}};function Pv(){return new vn("query").description("Execute SPARQL query against Obsidian vault").argument("<query>","SPARQL query string or path to .sparql file").option("--vault <path>","Path to Obsidian vault",process.cwd()).option("--format <type>","Output format: table|json|csv|ntriples","table").option("--output <type>","Response format: text|json (for MCP tools)","text").option("--explain","Show optimized query plan").option("--stats","Show execution statistics").option("--no-optimize","Disable query optimization").action(async(r,e)=>{let t=e.output||"text";Be.setFormat(t);try{let n=Date.now(),i=dF(r),s=(0,Nm.resolve)(e.vault);if(!(0,bo.existsSync)(s))throw new hs(s);t==="text"&&console.log(`\u{1F4E6} Loading vault: ${s}...`);let a=Date.now(),c=new yl(s),f=await new sr.NoteToRDFConverter(c).convertVault(),l=new sr.InMemoryTripleStore;await l.addAll(f);let h=Date.now()-a;t==="text"&&(console.log(`\u2705 Loaded ${f.length} triples in ${h}ms
`),console.log("\u{1F50D} Parsing SPARQL query..."));let m=new sr.SPARQLParser().parse(i);t==="text"&&console.log("\u{1F504} Translating to algebra...");let y=new sr.AlgebraTranslator().translate(m);if(!e.noOptimize&&y.type!=="construct")y=new sr.AlgebraOptimizer().optimize(y);else if(!e.noOptimize&&y.type==="construct"){let C=new sr.AlgebraOptimizer;y.where=C.optimize(y.where)}if(e.explain&&t==="text"){console.log("\u{1F4CA} Query Plan:");let C=new sr.AlgebraSerializer;y.type==="construct"?(console.log("CONSTRUCT Template:"),console.log("  (template patterns)"),console.log("WHERE:"),console.log(C.toString(y.where))):console.log(C.toString(y)),console.log()}t==="text"&&console.log("\u{1F3AF} Executing query...");let x=Date.now(),A=new sr.QueryExecutor(l);if(A.isConstructQuery(y)){let C=await A.executeConstruct(y),j=Date.now()-x,I=Date.now()-n;if(t==="json"){let U=new _o,se={query:i,count:C.length,triples:JSON.parse(U.formatJson(C))},Me=$t.success(se,{durationMs:I,itemCount:C.length,loadDurationMs:h,execDurationMs:j,triplesScanned:f.length});console.log(JSON.stringify(Me,null,2))}else console.log(`\u2705 Generated ${C.length} triple(s) in ${j}ms
`),C.length>0?mF(C,e.format):console.log("No triples generated."),e.stats&&(console.log(`
\u{1F4CA} Execution Statistics:`),console.log(`  Vault loading: ${h}ms`),console.log(`  Query execution: ${j}ms`),console.log(`  Total time: ${I}ms`),console.log(`  Triples scanned: ${f.length}`),console.log(`  Triples generated: ${C.length}`))}else{let C=await A.executeAll(y),j=Date.now()-x,I=Date.now()-n;if(t==="json"){let U=C.map(ee=>ee.toJSON()),se={query:i,count:C.length,bindings:U},Me=$t.success(se,{durationMs:I,itemCount:C.length,loadDurationMs:h,execDurationMs:j,triplesScanned:f.length});console.log(JSON.stringify(Me,null,2))}else console.log(`\u2705 Found ${C.length} result(s) in ${j}ms
`),C.length>0?pF(C,e.format):console.log("No results found."),e.stats&&(console.log(`
\u{1F4CA} Execution Statistics:`),console.log(`  Vault loading: ${h}ms`),console.log(`  Query execution: ${j}ms`),console.log(`  Total time: ${I}ms`),console.log(`  Triples scanned: ${f.length}`),console.log(`  Results returned: ${C.length}`))}}catch(n){Be.handle(n)}})}o(Pv,"sparqlQueryCommand");function dF(r){if(r.includes("SELECT")||r.includes("CONSTRUCT"))return r;let e=(0,Nm.resolve)(r);return(0,bo.existsSync)(e)?(0,bo.readFileSync)(e,"utf-8"):r}o(dF,"loadQuery");function pF(r,e){switch(e){case"json":let t=new vl;console.log(t.format(r));break;case"table":default:let n=new _l;console.log(n.format(r));break}}o(pF,"formatSelectResults");function mF(r,e){let t=new _o;switch(e){case"json":console.log(t.formatJson(r));break;case"ntriples":console.log(t.formatNTriples(r));break;case"table":default:console.log(t.formatTable(r));break}}o(mF,"formatConstructResults");var jb=require("path");var _t=et(ea()),Pi=et(require("path"));var Jv=et($v(),1);var wo=o(r=>{if(typeof r!="string")throw new TypeError("invalid pattern");if(r.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");var EF={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Eo=o(r=>r.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),TF=o(r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),Wv=o(r=>r.join(""),"rangesToString"),Gv=o((r,e)=>{let t=e;if(r.charAt(t)!=="[")throw new Error("not in a brace expression");let n=[],i=[],s=t+1,a=!1,c=!1,u=!1,f=!1,l=t,h="";e:for(;s<r.length;){let y=r.charAt(s);if((y==="!"||y==="^")&&s===t+1){f=!0,s++;continue}if(y==="]"&&a&&!u){l=s+1;break}if(a=!0,y==="\\"&&!u){u=!0,s++;continue}if(y==="["&&!u){for(let[x,[A,C,j]]of Object.entries(EF))if(r.startsWith(x,s)){if(h)return["$.",!1,r.length-t,!0];s+=x.length,j?i.push(A):n.push(A),c=c||C;continue e}}if(u=!1,h){y>h?n.push(Eo(h)+"-"+Eo(y)):y===h&&n.push(Eo(y)),h="",s++;continue}if(r.startsWith("-]",s+1)){n.push(Eo(y+"-")),s+=2;continue}if(r.startsWith("-",s+1)){h=y,s+=2;continue}n.push(Eo(y)),s++}if(l<s)return["",!1,0,!1];if(!n.length&&!i.length)return["$.",!1,r.length-t,!0];if(i.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!f){let y=n[0].length===2?n[0].slice(-1):n[0];return[TF(y),!1,l-t,!1]}let p="["+(f?"^":"")+Wv(n)+"]",m="["+(f?"":"^")+Wv(i)+"]";return[n.length&&i.length?"("+p+"|"+m+")":n.length?p:m,c,l-t,!0]},"parseClass");var cn=o((r,{windowsPathsNoEscape:e=!1}={})=>e?r.replace(/\[([^\/\\])\]/g,"$1"):r.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var xF=new Set(["!","?","+","*","@"]),Hv=o(r=>xF.has(r),"isExtglobType"),AF="(?!(?:^|/)\\.\\.?(?:$|/))",bl="(?!\\.)",OF=new Set(["[","."]),CF=new Set(["..","."]),FF=new Set("().*{}+?[]^$\\!"),PF=o(r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),Mm="[^/]",zv=Mm+"*?",Kv=Mm+"+?",sa=class r{static{o(this,"AST")}type;#e;#t;#s=!1;#n=[];#a;#b;#u;#f=!1;#o;#c;#i=!1;constructor(e,t,n={}){this.type=e,e&&(this.#t=!0),this.#a=t,this.#e=this.#a?this.#a.#e:this,this.#o=this.#e===this?n:this.#e.#o,this.#u=this.#e===this?[]:this.#e.#u,e==="!"&&!this.#e.#f&&this.#u.push(this),this.#b=this.#a?this.#a.#n.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#n)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#n.map(e=>String(e)).join("|")+")":this.#c=this.#n.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#f)return this;this.toString(),this.#f=!0;let e;for(;e=this.#u.pop();){if(e.type!=="!")continue;let t=e,n=t.#a;for(;n;){for(let i=t.#b+1;!n.type&&i<n.#n.length;i++)for(let s of e.#n){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(n.#n[i])}t=n,n=t.#a}}return this}push(...e){for(let t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof r&&t.#a===this))throw new Error("invalid part: "+t);this.#n.push(t)}}toJSON(){let e=this.type===null?this.#n.slice().map(t=>typeof t=="string"?t:t.toJSON()):[this.type,...this.#n.map(t=>t.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#f&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#b===0)return!0;let e=this.#a;for(let t=0;t<this.#b;t++){let n=e.#n[t];if(!(n instanceof r&&n.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#n.length:0;return this.#b===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let t=new r(this.type,e);for(let n of this.#n)t.copyIn(n);return t}static#y(e,t,n,i){let s=!1,a=!1,c=-1,u=!1;if(t.type===null){let m=n,b="";for(;m<e.length;){let y=e.charAt(m++);if(s||y==="\\"){s=!s,b+=y;continue}if(a){m===c+1?(y==="^"||y==="!")&&(u=!0):y==="]"&&!(m===c+2&&u)&&(a=!1),b+=y;continue}else if(y==="["){a=!0,c=m,u=!1,b+=y;continue}if(!i.noext&&Hv(y)&&e.charAt(m)==="("){t.push(b),b="";let x=new r(y,t);m=r.#y(e,x,m,i),t.push(x);continue}b+=y}return t.push(b),m}let f=n+1,l=new r(null,t),h=[],p="";for(;f<e.length;){let m=e.charAt(f++);if(s||m==="\\"){s=!s,p+=m;continue}if(a){f===c+1?(m==="^"||m==="!")&&(u=!0):m==="]"&&!(f===c+2&&u)&&(a=!1),p+=m;continue}else if(m==="["){a=!0,c=f,u=!1,p+=m;continue}if(Hv(m)&&e.charAt(f)==="("){l.push(p),p="";let b=new r(m,l);l.push(b),f=r.#y(e,b,f,i);continue}if(m==="|"){l.push(p),p="",h.push(l),l=new r(null,t);continue}if(m===")")return p===""&&t.#n.length===0&&(t.#i=!0),l.push(p),p="",t.push(...h,l),f;p+=m}return t.type=null,t.#t=void 0,t.#n=[e.substring(n-1)],f}static fromGlob(e,t={}){let n=new r(null,void 0,t);return r.#y(e,n,0,t),n}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[t,n,i,s]=this.toRegExpSource();if(!(i||this.#t||this.#o.nocase&&!this.#o.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let c=(this.#o.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${t}$`,c),{_src:t,_glob:e})}get options(){return this.#o}toRegExpSource(e){let t=e??!!this.#o.dot;if(this.#e===this&&this.#g(),!this.type){let u=this.isStart()&&this.isEnd(),f=this.#n.map(m=>{let[b,y,x,A]=typeof m=="string"?r.#h(m,this.#t,u):m.toRegExpSource(e);return this.#t=this.#t||x,this.#s=this.#s||A,b}).join(""),l="";if(this.isStart()&&typeof this.#n[0]=="string"&&!(this.#n.length===1&&CF.has(this.#n[0]))){let b=OF,y=t&&b.has(f.charAt(0))||f.startsWith("\\.")&&b.has(f.charAt(2))||f.startsWith("\\.\\.")&&b.has(f.charAt(4)),x=!t&&!e&&b.has(f.charAt(0));l=y?AF:x?bl:""}let h="";return this.isEnd()&&this.#e.#f&&this.#a?.type==="!"&&(h="(?:$|\\/)"),[l+f+h,cn(f),this.#t=!!this.#t,this.#s]}let n=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#d(t);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let u=this.toString();return this.#n=[u],this.type=null,this.#t=void 0,[u,cn(this.toString()),!1,!1]}let a=!n||e||t||!bl?"":this.#d(!0);a===s&&(a=""),a&&(s=`(?:${s})(?:${a})*?`);let c="";if(this.type==="!"&&this.#i)c=(this.isStart()&&!t?bl:"")+Kv;else{let u=this.type==="!"?"))"+(this.isStart()&&!t&&!e?bl:"")+zv+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;c=i+s+u}return[c,cn(s),this.#t=!!this.#t,this.#s]}#d(e){return this.#n.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");let[n,i,s,a]=t.toRegExpSource(e);return this.#s=this.#s||a,n}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#h(e,t,n=!1){let i=!1,s="",a=!1;for(let c=0;c<e.length;c++){let u=e.charAt(c);if(i){i=!1,s+=(FF.has(u)?"\\":"")+u;continue}if(u==="\\"){c===e.length-1?s+="\\\\":i=!0;continue}if(u==="["){let[f,l,h,p]=Gv(e,c);if(h){s+=f,a=a||l,c+=h-1,t=t||p;continue}}if(u==="*"){n&&e==="*"?s+=Kv:s+=zv,t=!0;continue}if(u==="?"){s+=Mm,t=!0;continue}s+=PF(u)}return[s,cn(e),!!t,a]}};var aa=o((r,{windowsPathsNoEscape:e=!1}={})=>e?r.replace(/[?*()[\]]/g,"[$&]"):r.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var kt=o((r,e,t={})=>(wo(e),!t.nocomment&&e.charAt(0)==="#"?!1:new Tr(e,t).match(r)),"minimatch"),IF=/^\*+([^+@!?\*\[\(]*)$/,DF=o(r=>e=>!e.startsWith(".")&&e.endsWith(r),"starDotExtTest"),RF=o(r=>e=>e.endsWith(r),"starDotExtTestDot"),NF=o(r=>(r=r.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(r)),"starDotExtTestNocase"),kF=o(r=>(r=r.toLowerCase(),e=>e.toLowerCase().endsWith(r)),"starDotExtTestNocaseDot"),jF=/^\*+\.\*+$/,MF=o(r=>!r.startsWith(".")&&r.includes("."),"starDotStarTest"),LF=o(r=>r!=="."&&r!==".."&&r.includes("."),"starDotStarTestDot"),VF=/^\.\*+$/,qF=o(r=>r!=="."&&r!==".."&&r.startsWith("."),"dotStarTest"),UF=/^\*+$/,BF=o(r=>r.length!==0&&!r.startsWith("."),"starTest"),$F=o(r=>r.length!==0&&r!=="."&&r!=="..","starTestDot"),WF=/^\?+([^+@!?\*\[\(]*)?$/,GF=o(([r,e=""])=>{let t=Xv([r]);return e?(e=e.toLowerCase(),n=>t(n)&&n.toLowerCase().endsWith(e)):t},"qmarksTestNocase"),HF=o(([r,e=""])=>{let t=Zv([r]);return e?(e=e.toLowerCase(),n=>t(n)&&n.toLowerCase().endsWith(e)):t},"qmarksTestNocaseDot"),zF=o(([r,e=""])=>{let t=Zv([r]);return e?n=>t(n)&&n.endsWith(e):t},"qmarksTestDot"),KF=o(([r,e=""])=>{let t=Xv([r]);return e?n=>t(n)&&n.endsWith(e):t},"qmarksTest"),Xv=o(([r])=>{let e=r.length;return t=>t.length===e&&!t.startsWith(".")},"qmarksTestNoExt"),Zv=o(([r])=>{let e=r.length;return t=>t.length===e&&t!=="."&&t!==".."},"qmarksTestNoExtDot"),eb=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Yv={win32:{sep:"\\"},posix:{sep:"/"}},YF=eb==="win32"?Yv.win32.sep:Yv.posix.sep;kt.sep=YF;var Nt=Symbol("globstar **");kt.GLOBSTAR=Nt;var QF="[^/]",JF=QF+"*?",XF="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",ZF="(?:(?!(?:\\/|^)\\.).)*?",eP=o((r,e={})=>t=>kt(t,r,e),"filter");kt.filter=eP;var Dr=o((r,e={})=>Object.assign({},r,e),"ext"),tP=o(r=>{if(!r||typeof r!="object"||!Object.keys(r).length)return kt;let e=kt;return Object.assign(o((n,i,s={})=>e(n,i,Dr(r,s)),"m"),{Minimatch:class extends e.Minimatch{static{o(this,"Minimatch")}constructor(i,s={}){super(i,Dr(r,s))}static defaults(i){return e.defaults(Dr(r,i)).Minimatch}},AST:class extends e.AST{static{o(this,"AST")}constructor(i,s,a={}){super(i,s,Dr(r,a))}static fromGlob(i,s={}){return e.AST.fromGlob(i,Dr(r,s))}},unescape:o((n,i={})=>e.unescape(n,Dr(r,i)),"unescape"),escape:o((n,i={})=>e.escape(n,Dr(r,i)),"escape"),filter:o((n,i={})=>e.filter(n,Dr(r,i)),"filter"),defaults:o(n=>e.defaults(Dr(r,n)),"defaults"),makeRe:o((n,i={})=>e.makeRe(n,Dr(r,i)),"makeRe"),braceExpand:o((n,i={})=>e.braceExpand(n,Dr(r,i)),"braceExpand"),match:o((n,i,s={})=>e.match(n,i,Dr(r,s)),"match"),sep:e.sep,GLOBSTAR:Nt})},"defaults");kt.defaults=tP;var tb=o((r,e={})=>(wo(r),e.nobrace||!/\{(?:(?!\{).)*\}/.test(r)?[r]:(0,Jv.default)(r)),"braceExpand");kt.braceExpand=tb;var rP=o((r,e={})=>new Tr(r,e).makeRe(),"makeRe");kt.makeRe=rP;var nP=o((r,e,t={})=>{let n=new Tr(e,t);return r=r.filter(i=>n.match(i)),n.options.nonull&&!r.length&&r.push(e),r},"match");kt.match=nP;var Qv=/[?*]|[+@!]\(.*?\)|\[|\]/,iP=o(r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),Tr=class{static{o(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){wo(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||eb,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let i=this.globParts.map((s,a,c)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=s[0]===""&&s[1]===""&&(s[2]==="?"||!Qv.test(s[2]))&&!Qv.test(s[3]),f=/^[a-z]:/i.test(s[0]);if(u)return[...s.slice(0,4),...s.slice(4).map(l=>this.parse(l))];if(f)return[s[0],...s.slice(1).map(l=>this.parse(l))]}return s.map(u=>this.parse(u))});if(this.debug(this.pattern,i),this.set=i.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let a=this.set[s];a[0]===""&&a[1]===""&&this.globParts[s][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let i=0;i<e[n].length;i++)e[n][i]==="**"&&(e[n][i]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let n=-1;for(;(n=t.indexOf("**",n+1))!==-1;){let i=n;for(;t[i+1]==="**";)i++;i!==n&&t.splice(n,i-n)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((n,i)=>{let s=n[n.length-1];return i==="**"&&s==="**"?n:i===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(n.pop(),n):(n.push(i),n)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let s=e[i];i===1&&s===""&&e[0]===""||(s==="."||s==="")&&(t=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){let i=e[n-1];i&&i!=="."&&i!==".."&&i!=="**"&&(t=!0,e.splice(n-1,2),n-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let n of e){let i=-1;for(;(i=n.indexOf("**",i+1))!==-1;){let a=i;for(;n[a+1]==="**";)a++;a>i&&n.splice(i+1,a-i);let c=n[i+1],u=n[i+2],f=n[i+3];if(c!==".."||!u||u==="."||u===".."||!f||f==="."||f==="..")continue;t=!0,n.splice(i,1);let l=n.slice(0);l[i]="**",e.push(l),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<n.length-1;a++){let c=n[a];a===1&&c===""&&n[0]===""||(c==="."||c==="")&&(t=!0,n.splice(a,1),a--)}n[0]==="."&&n.length===2&&(n[1]==="."||n[1]==="")&&(t=!0,n.pop())}let s=0;for(;(s=n.indexOf("..",s+1))!==-1;){let a=n[s-1];if(a&&a!=="."&&a!==".."&&a!=="**"){t=!0;let u=s===1&&n[s+1]==="**"?["."]:[];n.splice(s-1,2,...u),n.length===0&&n.push(""),s-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let n=t+1;n<e.length;n++){let i=this.partsMatch(e[t],e[n],!this.preserveMultipleSlashes);if(i){e[t]=[],e[n]=i;break}}return e.filter(t=>t.length)}partsMatch(e,t,n=!1){let i=0,s=0,a=[],c="";for(;i<e.length&&s<t.length;)if(e[i]===t[s])a.push(c==="b"?t[s]:e[i]),i++,s++;else if(n&&e[i]==="**"&&t[s]===e[i+1])a.push(e[i]),i++;else if(n&&t[s]==="**"&&e[i]===t[s+1])a.push(t[s]),s++;else if(e[i]==="*"&&t[s]&&(this.options.dot||!t[s].startsWith("."))&&t[s]!=="**"){if(c==="b")return!1;c="a",a.push(e[i]),i++,s++}else if(t[s]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(c==="a")return!1;c="b",a.push(t[s]),i++,s++}else return!1;return e.length===t.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,n=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)t=!t,n++;n&&(this.pattern=e.slice(n)),this.negate=t}matchOne(e,t,n=!1){let i=this.options;if(this.isWindows){let y=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),x=!y&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),A=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),C=!A&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),j=x?3:y?0:void 0,I=C?3:A?0:void 0;if(typeof j=="number"&&typeof I=="number"){let[U,se]=[e[j],t[I]];U.toLowerCase()===se.toLowerCase()&&(t[I]=U,I>j?t=t.slice(I):j>I&&(e=e.slice(j)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var a=0,c=0,u=e.length,f=t.length;a<u&&c<f;a++,c++){this.debug("matchOne loop");var l=t[c],h=e[a];if(this.debug(t,l,h),l===!1)return!1;if(l===Nt){this.debug("GLOBSTAR",[t,l,h]);var p=a,m=c+1;if(m===f){for(this.debug("** at the end");a<u;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;p<u;){var b=e[p];if(this.debug(`
globstar while`,e,p,t,m,b),this.matchOne(e.slice(p),t.slice(m),n))return this.debug("globstar found match!",p,u,b),!0;if(b==="."||b===".."||!i.dot&&b.charAt(0)==="."){this.debug("dot detected!",e,p,t,m);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,p,t,m),p===u))}let y;if(typeof l=="string"?(y=h===l,this.debug("string match",l,h,y)):(y=l.test(h),this.debug("pattern match",l,h,y)),!y)return!1}if(a===u&&c===f)return!0;if(a===u)return n;if(c===f)return a===u-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return tb(this.pattern,this.options)}parse(e){wo(e);let t=this.options;if(e==="**")return Nt;if(e==="")return"";let n,i=null;(n=e.match(UF))?i=t.dot?$F:BF:(n=e.match(IF))?i=(t.nocase?t.dot?kF:NF:t.dot?RF:DF)(n[1]):(n=e.match(WF))?i=(t.nocase?t.dot?HF:GF:t.dot?zF:KF)(n):(n=e.match(jF))?i=t.dot?LF:MF:(n=e.match(VF))&&(i=qF);let s=sa.fromGlob(e,this.options).toMMPattern();return i&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:i}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,n=t.noglobstar?JF:t.dot?XF:ZF,i=new Set(t.nocase?["i"]:[]),s=e.map(u=>{let f=u.map(l=>{if(l instanceof RegExp)for(let h of l.flags.split(""))i.add(h);return typeof l=="string"?iP(l):l===Nt?Nt:l._src});return f.forEach((l,h)=>{let p=f[h+1],m=f[h-1];l!==Nt||m===Nt||(m===void 0?p!==void 0&&p!==Nt?f[h+1]="(?:\\/|"+n+"\\/)?"+p:f[h]=n:p===void 0?f[h-1]=m+"(?:\\/|"+n+")?":p!==Nt&&(f[h-1]=m+"(?:\\/|\\/"+n+"\\/)"+p,f[h+1]=Nt))}),f.filter(l=>l!==Nt).join("/")}).join("|"),[a,c]=e.length>1?["(?:",")"]:["",""];s="^"+a+s+c+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let n=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let s=this.set;this.debug(this.pattern,"set",s);let a=i[i.length-1];if(!a)for(let c=i.length-2;!a&&c>=0;c--)a=i[c];for(let c=0;c<s.length;c++){let u=s[c],f=i;if(n.matchBase&&u.length===1&&(f=[a]),this.matchOne(f,u,t))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return kt.defaults(e).Minimatch}};kt.AST=sa;kt.Minimatch=Tr;kt.escape=aa;kt.unescape=cn;var xb=require("node:url");var oa=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,nb=new Set,Lm=typeof process=="object"&&process?process:{},ib=o((r,e,t,n)=>{typeof Lm.emitWarning=="function"?Lm.emitWarning(r,e,t,n):console.error(`[${t}] ${e}: ${r}`)},"emitWarning"),Sl=globalThis.AbortController,rb=globalThis.AbortSignal;if(typeof Sl>"u"){rb=class{static{o(this,"AbortSignal")}onabort;_onabort=[];reason;aborted=!1;addEventListener(n,i){this._onabort.push(i)}},Sl=class{static{o(this,"AbortController")}constructor(){e()}signal=new rb;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let i of this.signal._onabort)i(n);this.signal.onabort?.(n)}}};let r=Lm.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=o(()=>{r&&(r=!1,ib("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))},"warnACPolyfill")}var sP=o(r=>!nb.has(r),"shouldWarn"),Xq=Symbol("type"),Ai=o(r=>r&&r===Math.floor(r)&&r>0&&isFinite(r),"isPosInt"),sb=o(r=>Ai(r)?r<=Math.pow(2,8)?Uint8Array:r<=Math.pow(2,16)?Uint16Array:r<=Math.pow(2,32)?Uint32Array:r<=Number.MAX_SAFE_INTEGER?ca:null:null,"getUintArray"),ca=class extends Array{static{o(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},Vm=class r{static{o(this,"Stack")}heap;length;static#e=!1;static create(e){let t=sb(e);if(!t)return[];r.#e=!0;let n=new r(e,t);return r.#e=!1,n}constructor(e,t){if(!r.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},To=class r{static{o(this,"LRUCache")}#e;#t;#s;#n;#a;#b;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#u;#f;#o;#c;#i;#g;#y;#d;#h;#E;#m;#T;#x;#v;#S;#w;#p;static unsafeExposeInternals(e){return{starts:e.#x,ttls:e.#v,sizes:e.#T,keyMap:e.#o,keyList:e.#c,valList:e.#i,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#h},free:e.#E,isBackgroundFetch:o(t=>e.#l(t),"isBackgroundFetch"),backgroundFetch:o((t,n,i,s)=>e.#L(t,n,i,s),"backgroundFetch"),moveToTail:o(t=>e.#q(t),"moveToTail"),indexes:o(t=>e.#O(t),"indexes"),rindexes:o(t=>e.#C(t),"rindexes"),isStale:o(t=>e.#_(t),"isStale")}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#f}get size(){return this.#u}get fetchMethod(){return this.#a}get memoMethod(){return this.#b}get dispose(){return this.#s}get disposeAfter(){return this.#n}constructor(e){let{max:t=0,ttl:n,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:a,updateAgeOnHas:c,allowStale:u,dispose:f,disposeAfter:l,noDisposeOnSet:h,noUpdateTTL:p,maxSize:m=0,maxEntrySize:b=0,sizeCalculation:y,fetchMethod:x,memoMethod:A,noDeleteOnFetchRejection:C,noDeleteOnStaleGet:j,allowStaleOnFetchRejection:I,allowStaleOnFetchAbort:U,ignoreFetchAbort:se}=e;if(t!==0&&!Ai(t))throw new TypeError("max option must be a nonnegative integer");let Me=t?sb(t):Array;if(!Me)throw new Error("invalid max value: "+t);if(this.#e=t,this.#t=m,this.maxEntrySize=b||this.#t,this.sizeCalculation=y,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(A!==void 0&&typeof A!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#b=A,x!==void 0&&typeof x!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=x,this.#w=!!x,this.#o=new Map,this.#c=new Array(t).fill(void 0),this.#i=new Array(t).fill(void 0),this.#g=new Me(t),this.#y=new Me(t),this.#d=0,this.#h=0,this.#E=Vm.create(t),this.#u=0,this.#f=0,typeof f=="function"&&(this.#s=f),typeof l=="function"?(this.#n=l,this.#m=[]):(this.#n=void 0,this.#m=void 0),this.#S=!!this.#s,this.#p=!!this.#n,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!C,this.allowStaleOnFetchRejection=!!I,this.allowStaleOnFetchAbort=!!U,this.ignoreFetchAbort=!!se,this.maxEntrySize!==0){if(this.#t!==0&&!Ai(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!Ai(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#P()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!j,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!c,this.ttlResolution=Ai(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!Ai(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#F()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let ee="LRU_CACHE_UNBOUNDED";sP(ee)&&(nb.add(ee),ib("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",ee,r))}}getRemainingTTL(e){return this.#o.has(e)?1/0:0}#F(){let e=new ca(this.#e),t=new ca(this.#e);this.#v=e,this.#x=t,this.#D=(s,a,c=oa.now())=>{if(t[s]=a!==0?c:0,e[s]=a,a!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#_(s)&&this.#I(this.#c[s],"expire")},a+1);u.unref&&u.unref()}},this.#A=s=>{t[s]=e[s]!==0?oa.now():0},this.#r=(s,a)=>{if(e[a]){let c=e[a],u=t[a];if(!c||!u)return;s.ttl=c,s.start=u,s.now=n||i();let f=s.now-u;s.remainingTTL=c-f}};let n=0,i=o(()=>{let s=oa.now();if(this.ttlResolution>0){n=s;let a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref()}return s},"getNow");this.getRemainingTTL=s=>{let a=this.#o.get(s);if(a===void 0)return 0;let c=e[a],u=t[a];if(!c||!u)return 1/0;let f=(n||i())-u;return c-f},this.#_=s=>{let a=t[s],c=e[s];return!!c&&!!a&&(n||i())-a>c}}#A=o(()=>{},"#updateItemAge");#r=o(()=>{},"#statusTTL");#D=o(()=>{},"#setItemTTL");#_=o(()=>!1,"#isStale");#P(){let e=new ca(this.#e);this.#f=0,this.#T=e,this.#R=t=>{this.#f-=e[t],e[t]=0},this.#k=(t,n,i,s)=>{if(this.#l(n))return 0;if(!Ai(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(n,t),!Ai(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#N=(t,n,i)=>{if(e[t]=n,this.#t){let s=this.#t-e[t];for(;this.#f>s;)this.#M(!0)}this.#f+=e[t],i&&(i.entrySize=n,i.totalCalculatedSize=this.#f)}}#R=o(e=>{},"#removeItemSize");#N=o((e,t,n)=>{},"#addItemSize");#k=o((e,t,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0},"#requireSize");*#O({allowStale:e=this.allowStale}={}){if(this.#u)for(let t=this.#h;!(!this.#j(t)||((e||!this.#_(t))&&(yield t),t===this.#d));)t=this.#y[t]}*#C({allowStale:e=this.allowStale}={}){if(this.#u)for(let t=this.#d;!(!this.#j(t)||((e||!this.#_(t))&&(yield t),t===this.#h));)t=this.#g[t]}#j(e){return e!==void 0&&this.#o.get(this.#c[e])===e}*entries(){for(let e of this.#O())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#l(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*rentries(){for(let e of this.#C())this.#i[e]!==void 0&&this.#c[e]!==void 0&&!this.#l(this.#i[e])&&(yield[this.#c[e],this.#i[e]])}*keys(){for(let e of this.#O()){let t=this.#c[e];t!==void 0&&!this.#l(this.#i[e])&&(yield t)}}*rkeys(){for(let e of this.#C()){let t=this.#c[e];t!==void 0&&!this.#l(this.#i[e])&&(yield t)}}*values(){for(let e of this.#O())this.#i[e]!==void 0&&!this.#l(this.#i[e])&&(yield this.#i[e])}*rvalues(){for(let e of this.#C())this.#i[e]!==void 0&&!this.#l(this.#i[e])&&(yield this.#i[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let n of this.#O()){let i=this.#i[n],s=this.#l(i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,this.#c[n],this))return this.get(this.#c[n],t)}}forEach(e,t=this){for(let n of this.#O()){let i=this.#i[n],s=this.#l(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#c[n],this)}}rforEach(e,t=this){for(let n of this.#C()){let i=this.#i[n],s=this.#l(i)?i.__staleWhileFetching:i;s!==void 0&&e.call(t,s,this.#c[n],this)}}purgeStale(){let e=!1;for(let t of this.#C({allowStale:!0}))this.#_(t)&&(this.#I(this.#c[t],"expire"),e=!0);return e}info(e){let t=this.#o.get(e);if(t===void 0)return;let n=this.#i[t],i=this.#l(n)?n.__staleWhileFetching:n;if(i===void 0)return;let s={value:i};if(this.#v&&this.#x){let a=this.#v[t],c=this.#x[t];if(a&&c){let u=a-(oa.now()-c);s.ttl=u,s.start=Date.now()}}return this.#T&&(s.size=this.#T[t]),s}dump(){let e=[];for(let t of this.#O({allowStale:!0})){let n=this.#c[t],i=this.#i[t],s=this.#l(i)?i.__staleWhileFetching:i;if(s===void 0||n===void 0)continue;let a={value:s};if(this.#v&&this.#x){a.ttl=this.#v[t];let c=oa.now()-this.#x[t];a.start=Math.floor(Date.now()-c)}this.#T&&(a.size=this.#T[t]),e.unshift([n,a])}return e}load(e){this.clear();for(let[t,n]of e){if(n.start){let i=Date.now()-n.start;n.start=oa.now()-i}this.set(t,n.value,n)}}set(e,t,n={}){if(t===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:c=this.sizeCalculation,status:u}=n,{noUpdateTTL:f=this.noUpdateTTL}=n,l=this.#k(e,t,n.size||0,c);if(this.maxEntrySize&&l>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#I(e,"set"),this;let h=this.#u===0?void 0:this.#o.get(e);if(h===void 0)h=this.#u===0?this.#h:this.#E.length!==0?this.#E.pop():this.#u===this.#e?this.#M(!1):this.#u,this.#c[h]=e,this.#i[h]=t,this.#o.set(e,h),this.#g[this.#h]=h,this.#y[h]=this.#h,this.#h=h,this.#u++,this.#N(h,l,u),u&&(u.set="add"),f=!1;else{this.#q(h);let p=this.#i[h];if(t!==p){if(this.#w&&this.#l(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:m}=p;m!==void 0&&!a&&(this.#S&&this.#s?.(m,e,"set"),this.#p&&this.#m?.push([m,e,"set"]))}else a||(this.#S&&this.#s?.(p,e,"set"),this.#p&&this.#m?.push([p,e,"set"]));if(this.#R(h),this.#N(h,l,u),this.#i[h]=t,u){u.set="replace";let m=p&&this.#l(p)?p.__staleWhileFetching:p;m!==void 0&&(u.oldValue=m)}}else u&&(u.set="update")}if(i!==0&&!this.#v&&this.#F(),this.#v&&(f||this.#D(h,i,s),u&&this.#r(u,h)),!a&&this.#p&&this.#m){let p=this.#m,m;for(;m=p?.shift();)this.#n?.(...m)}return this}pop(){try{for(;this.#u;){let e=this.#i[this.#d];if(this.#M(!0),this.#l(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#p&&this.#m){let e=this.#m,t;for(;t=e?.shift();)this.#n?.(...t)}}}#M(e){let t=this.#d,n=this.#c[t],i=this.#i[t];return this.#w&&this.#l(i)?i.__abortController.abort(new Error("evicted")):(this.#S||this.#p)&&(this.#S&&this.#s?.(i,n,"evict"),this.#p&&this.#m?.push([i,n,"evict"])),this.#R(t),e&&(this.#c[t]=void 0,this.#i[t]=void 0,this.#E.push(t)),this.#u===1?(this.#d=this.#h=0,this.#E.length=0):this.#d=this.#g[t],this.#o.delete(n),this.#u--,t}has(e,t={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=t,s=this.#o.get(e);if(s!==void 0){let a=this.#i[s];if(this.#l(a)&&a.__staleWhileFetching===void 0)return!1;if(this.#_(s))i&&(i.has="stale",this.#r(i,s));else return n&&this.#A(s),i&&(i.has="hit",this.#r(i,s)),!0}else i&&(i.has="miss");return!1}peek(e,t={}){let{allowStale:n=this.allowStale}=t,i=this.#o.get(e);if(i===void 0||!n&&this.#_(i))return;let s=this.#i[i];return this.#l(s)?s.__staleWhileFetching:s}#L(e,t,n,i){let s=t===void 0?void 0:this.#i[t];if(this.#l(s))return s;let a=new Sl,{signal:c}=n;c?.addEventListener("abort",()=>a.abort(c.reason),{signal:a.signal});let u={signal:a.signal,options:n,context:i},f=o((y,x=!1)=>{let{aborted:A}=a.signal,C=n.ignoreFetchAbort&&y!==void 0;if(n.status&&(A&&!x?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,C&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),A&&!C&&!x)return h(a.signal.reason);let j=m;return this.#i[t]===m&&(y===void 0?j.__staleWhileFetching?this.#i[t]=j.__staleWhileFetching:this.#I(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,y,u.options))),y},"cb"),l=o(y=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=y),h(y)),"eb"),h=o(y=>{let{aborted:x}=a.signal,A=x&&n.allowStaleOnFetchAbort,C=A||n.allowStaleOnFetchRejection,j=C||n.noDeleteOnFetchRejection,I=m;if(this.#i[t]===m&&(!j||I.__staleWhileFetching===void 0?this.#I(e,"fetch"):A||(this.#i[t]=I.__staleWhileFetching)),C)return n.status&&I.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),I.__staleWhileFetching;if(I.__returned===I)throw y},"fetchFail"),p=o((y,x)=>{let A=this.#a?.(e,s,u);A&&A instanceof Promise&&A.then(C=>y(C===void 0?void 0:C),x),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(y(void 0),n.allowStaleOnFetchAbort&&(y=o(C=>f(C,!0),"res")))})},"pcall");n.status&&(n.status.fetchDispatched=!0);let m=new Promise(p).then(f,l),b=Object.assign(m,{__abortController:a,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,b,{...u.options,status:void 0}),t=this.#o.get(e)):this.#i[t]=b,b}#l(e){if(!this.#w)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Sl}async fetch(e,t={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:c=this.noDisposeOnSet,size:u=0,sizeCalculation:f=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:m=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:y,forceRefresh:x=!1,status:A,signal:C}=t;if(!this.#w)return A&&(A.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:A});let j={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:a,noDisposeOnSet:c,size:u,sizeCalculation:f,noUpdateTTL:l,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:b,ignoreFetchAbort:m,status:A,signal:C},I=this.#o.get(e);if(I===void 0){A&&(A.fetch="miss");let U=this.#L(e,I,j,y);return U.__returned=U}else{let U=this.#i[I];if(this.#l(U)){let N=n&&U.__staleWhileFetching!==void 0;return A&&(A.fetch="inflight",N&&(A.returnedStale=!0)),N?U.__staleWhileFetching:U.__returned=U}let se=this.#_(I);if(!x&&!se)return A&&(A.fetch="hit"),this.#q(I),i&&this.#A(I),A&&this.#r(A,I),U;let Me=this.#L(e,I,j,y),M=Me.__staleWhileFetching!==void 0&&n;return A&&(A.fetch=se?"stale":"refresh",M&&se&&(A.returnedStale=!0)),M?Me.__staleWhileFetching:Me.__returned=Me}}async forceFetch(e,t={}){let n=await this.fetch(e,t);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,t={}){let n=this.#b;if(!n)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:s,...a}=t,c=this.get(e,a);if(!s&&c!==void 0)return c;let u=n(e,c,{options:a,context:i});return this.set(e,u,a),u}get(e,t={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:a}=t,c=this.#o.get(e);if(c!==void 0){let u=this.#i[c],f=this.#l(u);return a&&this.#r(a,c),this.#_(c)?(a&&(a.get="stale"),f?(a&&n&&u.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?u.__staleWhileFetching:void 0):(s||this.#I(e,"expire"),a&&n&&(a.returnedStale=!0),n?u:void 0)):(a&&(a.get="hit"),f?u.__staleWhileFetching:(this.#q(c),i&&this.#A(c),u))}else a&&(a.get="miss")}#V(e,t){this.#y[t]=e,this.#g[e]=t}#q(e){e!==this.#h&&(e===this.#d?this.#d=this.#g[e]:this.#V(this.#y[e],this.#g[e]),this.#V(this.#h,e),this.#h=e)}delete(e){return this.#I(e,"delete")}#I(e,t){let n=!1;if(this.#u!==0){let i=this.#o.get(e);if(i!==void 0)if(n=!0,this.#u===1)this.#U(t);else{this.#R(i);let s=this.#i[i];if(this.#l(s)?s.__abortController.abort(new Error("deleted")):(this.#S||this.#p)&&(this.#S&&this.#s?.(s,e,t),this.#p&&this.#m?.push([s,e,t])),this.#o.delete(e),this.#c[i]=void 0,this.#i[i]=void 0,i===this.#h)this.#h=this.#y[i];else if(i===this.#d)this.#d=this.#g[i];else{let a=this.#y[i];this.#g[a]=this.#g[i];let c=this.#g[i];this.#y[c]=this.#y[i]}this.#u--,this.#E.push(i)}}if(this.#p&&this.#m?.length){let i=this.#m,s;for(;s=i?.shift();)this.#n?.(...s)}return n}clear(){return this.#U("delete")}#U(e){for(let t of this.#C({allowStale:!0})){let n=this.#i[t];if(this.#l(n))n.__abortController.abort(new Error("deleted"));else{let i=this.#c[t];this.#S&&this.#s?.(n,i,e),this.#p&&this.#m?.push([n,i,e])}}if(this.#o.clear(),this.#i.fill(void 0),this.#c.fill(void 0),this.#v&&this.#x&&(this.#v.fill(0),this.#x.fill(0)),this.#T&&this.#T.fill(0),this.#d=0,this.#h=0,this.#E.length=0,this.#f=0,this.#u=0,this.#p&&this.#m){let t=this.#m,n;for(;n=t?.shift();)this.#n?.(...n)}}};var fa=require("node:path"),mb=require("node:url"),Nn=require("fs"),mP=et(require("node:fs"),1),Fi=require("node:fs/promises");var Cl=require("node:events"),Hm=et(require("node:stream"),1),lb=require("node:string_decoder");var ab=typeof process=="object"&&process?process:{stdout:null,stderr:null},aP=o(r=>!!r&&typeof r=="object"&&(r instanceof Ci||r instanceof Hm.default||oP(r)||cP(r)),"isStream"),oP=o(r=>!!r&&typeof r=="object"&&r instanceof Cl.EventEmitter&&typeof r.pipe=="function"&&r.pipe!==Hm.default.Writable.prototype.pipe,"isReadable"),cP=o(r=>!!r&&typeof r=="object"&&r instanceof Cl.EventEmitter&&typeof r.write=="function"&&typeof r.end=="function","isWritable"),ri=Symbol("EOF"),ni=Symbol("maybeEmitEnd"),Oi=Symbol("emittedEnd"),wl=Symbol("emittingEnd"),xo=Symbol("emittedError"),El=Symbol("closed"),ob=Symbol("read"),Tl=Symbol("flush"),cb=Symbol("flushChunk"),un=Symbol("encoding"),ua=Symbol("decoder"),wt=Symbol("flowing"),Ao=Symbol("paused"),la=Symbol("resume"),Et=Symbol("buffer"),ar=Symbol("pipes"),Tt=Symbol("bufferLength"),qm=Symbol("bufferPush"),xl=Symbol("bufferShift"),Wt=Symbol("objectMode"),lt=Symbol("destroyed"),Um=Symbol("error"),Bm=Symbol("emitData"),ub=Symbol("emitEnd"),$m=Symbol("emitEnd2"),Dn=Symbol("async"),Wm=Symbol("abort"),Al=Symbol("aborted"),Oo=Symbol("signal"),ds=Symbol("dataListeners"),xr=Symbol("discarded"),Co=o(r=>Promise.resolve().then(r),"defer"),uP=o(r=>r(),"nodefer"),lP=o(r=>r==="end"||r==="finish"||r==="prefinish","isEndish"),fP=o(r=>r instanceof ArrayBuffer||!!r&&typeof r=="object"&&r.constructor&&r.constructor.name==="ArrayBuffer"&&r.byteLength>=0,"isArrayBufferLike"),hP=o(r=>!Buffer.isBuffer(r)&&ArrayBuffer.isView(r),"isArrayBufferView"),Ol=class{static{o(this,"Pipe")}src;dest;opts;ondrain;constructor(e,t,n){this.src=e,this.dest=t,this.opts=n,this.ondrain=()=>e[la](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},Gm=class extends Ol{static{o(this,"PipeProxyErrors")}unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,n){super(e,t,n),this.proxyErrors=i=>t.emit("error",i),e.on("error",this.proxyErrors)}},dP=o(r=>!!r.objectMode,"isObjectModeOptions"),pP=o(r=>!r.objectMode&&!!r.encoding&&r.encoding!=="buffer","isEncodingOptions"),Ci=class extends Cl.EventEmitter{static{o(this,"Minipass")}[wt]=!1;[Ao]=!1;[ar]=[];[Et]=[];[Wt];[un];[Dn];[ua];[ri]=!1;[Oi]=!1;[wl]=!1;[El]=!1;[xo]=null;[Tt]=0;[lt]=!1;[Oo];[Al]=!1;[ds]=0;[xr]=!1;writable=!0;readable=!0;constructor(...e){let t=e[0]||{};if(super(),t.objectMode&&typeof t.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");dP(t)?(this[Wt]=!0,this[un]=null):pP(t)?(this[un]=t.encoding,this[Wt]=!1):(this[Wt]=!1,this[un]=null),this[Dn]=!!t.async,this[ua]=this[un]?new lb.StringDecoder(this[un]):null,t&&t.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:o(()=>this[Et],"get")}),t&&t.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:o(()=>this[ar],"get")});let{signal:n}=t;n&&(this[Oo]=n,n.aborted?this[Wm]():n.addEventListener("abort",()=>this[Wm]()))}get bufferLength(){return this[Tt]}get encoding(){return this[un]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Wt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[Dn]}set async(e){this[Dn]=this[Dn]||!!e}[Wm](){this[Al]=!0,this.emit("abort",this[Oo]?.reason),this.destroy(this[Oo]?.reason)}get aborted(){return this[Al]}set aborted(e){}write(e,t,n){if(this[Al])return!1;if(this[ri])throw new Error("write after end");if(this[lt])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(n=t,t="utf8"),t||(t="utf8");let i=this[Dn]?Co:uP;if(!this[Wt]&&!Buffer.isBuffer(e)){if(hP(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(fP(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Wt]?(this[wt]&&this[Tt]!==0&&this[Tl](!0),this[wt]?this.emit("data",e):this[qm](e),this[Tt]!==0&&this.emit("readable"),n&&i(n),this[wt]):e.length?(typeof e=="string"&&!(t===this[un]&&!this[ua]?.lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[un]&&(e=this[ua].write(e)),this[wt]&&this[Tt]!==0&&this[Tl](!0),this[wt]?this.emit("data",e):this[qm](e),this[Tt]!==0&&this.emit("readable"),n&&i(n),this[wt]):(this[Tt]!==0&&this.emit("readable"),n&&i(n),this[wt])}read(e){if(this[lt])return null;if(this[xr]=!1,this[Tt]===0||e===0||e&&e>this[Tt])return this[ni](),null;this[Wt]&&(e=null),this[Et].length>1&&!this[Wt]&&(this[Et]=[this[un]?this[Et].join(""):Buffer.concat(this[Et],this[Tt])]);let t=this[ob](e||null,this[Et][0]);return this[ni](),t}[ob](e,t){if(this[Wt])this[xl]();else{let n=t;e===n.length||e===null?this[xl]():typeof n=="string"?(this[Et][0]=n.slice(e),t=n.slice(0,e),this[Tt]-=e):(this[Et][0]=n.subarray(e),t=n.subarray(0,e),this[Tt]-=e)}return this.emit("data",t),!this[Et].length&&!this[ri]&&this.emit("drain"),t}end(e,t,n){return typeof e=="function"&&(n=e,e=void 0),typeof t=="function"&&(n=t,t="utf8"),e!==void 0&&this.write(e,t),n&&this.once("end",n),this[ri]=!0,this.writable=!1,(this[wt]||!this[Ao])&&this[ni](),this}[la](){this[lt]||(!this[ds]&&!this[ar].length&&(this[xr]=!0),this[Ao]=!1,this[wt]=!0,this.emit("resume"),this[Et].length?this[Tl]():this[ri]?this[ni]():this.emit("drain"))}resume(){return this[la]()}pause(){this[wt]=!1,this[Ao]=!0,this[xr]=!1}get destroyed(){return this[lt]}get flowing(){return this[wt]}get paused(){return this[Ao]}[qm](e){this[Wt]?this[Tt]+=1:this[Tt]+=e.length,this[Et].push(e)}[xl](){return this[Wt]?this[Tt]-=1:this[Tt]-=this[Et][0].length,this[Et].shift()}[Tl](e=!1){do;while(this[cb](this[xl]())&&this[Et].length);!e&&!this[Et].length&&!this[ri]&&this.emit("drain")}[cb](e){return this.emit("data",e),this[wt]}pipe(e,t){if(this[lt])return e;this[xr]=!1;let n=this[Oi];return t=t||{},e===ab.stdout||e===ab.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,n?t.end&&e.end():(this[ar].push(t.proxyErrors?new Gm(this,e,t):new Ol(this,e,t)),this[Dn]?Co(()=>this[la]()):this[la]()),e}unpipe(e){let t=this[ar].find(n=>n.dest===e);t&&(this[ar].length===1?(this[wt]&&this[ds]===0&&(this[wt]=!1),this[ar]=[]):this[ar].splice(this[ar].indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let n=super.on(e,t);if(e==="data")this[xr]=!1,this[ds]++,!this[ar].length&&!this[wt]&&this[la]();else if(e==="readable"&&this[Tt]!==0)super.emit("readable");else if(lP(e)&&this[Oi])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[xo]){let i=t;this[Dn]?Co(()=>i.call(this,this[xo])):i.call(this,this[xo])}return n}removeListener(e,t){return this.off(e,t)}off(e,t){let n=super.off(e,t);return e==="data"&&(this[ds]=this.listeners("data").length,this[ds]===0&&!this[xr]&&!this[ar].length&&(this[wt]=!1)),n}removeAllListeners(e){let t=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[ds]=0,!this[xr]&&!this[ar].length&&(this[wt]=!1)),t}get emittedEnd(){return this[Oi]}[ni](){!this[wl]&&!this[Oi]&&!this[lt]&&this[Et].length===0&&this[ri]&&(this[wl]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[El]&&this.emit("close"),this[wl]=!1)}emit(e,...t){let n=t[0];if(e!=="error"&&e!=="close"&&e!==lt&&this[lt])return!1;if(e==="data")return!this[Wt]&&!n?!1:this[Dn]?(Co(()=>this[Bm](n)),!0):this[Bm](n);if(e==="end")return this[ub]();if(e==="close"){if(this[El]=!0,!this[Oi]&&!this[lt])return!1;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[xo]=n,super.emit(Um,n);let s=!this[Oo]||this.listeners("error").length?super.emit("error",n):!1;return this[ni](),s}else if(e==="resume"){let s=super.emit("resume");return this[ni](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let i=super.emit(e,...t);return this[ni](),i}[Bm](e){for(let n of this[ar])n.dest.write(e)===!1&&this.pause();let t=this[xr]?!1:super.emit("data",e);return this[ni](),t}[ub](){return this[Oi]?!1:(this[Oi]=!0,this.readable=!1,this[Dn]?(Co(()=>this[$m]()),!0):this[$m]())}[$m](){if(this[ua]){let t=this[ua].end();if(t){for(let n of this[ar])n.dest.write(t);this[xr]||super.emit("data",t)}}for(let t of this[ar])t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Wt]||(e.dataLength=0);let t=this.promise();return this.on("data",n=>{e.push(n),this[Wt]||(e.dataLength+=n.length)}),await t,e}async concat(){if(this[Wt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[un]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,t)=>{this.on(lt,()=>t(new Error("stream destroyed"))),this.on("error",n=>t(n)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[xr]=!1;let e=!1,t=o(async()=>(this.pause(),e=!0,{value:void 0,done:!0}),"stop");return{next:o(()=>{if(e)return t();let i=this.read();if(i!==null)return Promise.resolve({done:!1,value:i});if(this[ri])return t();let s,a,c=o(h=>{this.off("data",u),this.off("end",f),this.off(lt,l),t(),a(h)},"onerr"),u=o(h=>{this.off("error",c),this.off("end",f),this.off(lt,l),this.pause(),s({value:h,done:!!this[ri]})},"ondata"),f=o(()=>{this.off("error",c),this.off("data",u),this.off(lt,l),t(),s({done:!0,value:void 0})},"onend"),l=o(()=>c(new Error("stream destroyed")),"ondestroy");return new Promise((h,p)=>{a=p,s=h,this.once(lt,l),this.once("error",c),this.once("end",f),this.once("data",u)})},"next"),throw:t,return:t,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[xr]=!1;let e=!1,t=o(()=>(this.pause(),this.off(Um,t),this.off(lt,t),this.off("end",t),e=!0,{done:!0,value:void 0}),"stop"),n=o(()=>{if(e)return t();let i=this.read();return i===null?t():{done:!1,value:i}},"next");return this.once("end",t),this.once(Um,t),this.once(lt,t),{next:n,throw:t,return:t,[Symbol.iterator](){return this}}}destroy(e){if(this[lt])return e?this.emit("error",e):this.emit(lt),this;this[lt]=!0,this[xr]=!0,this[Et].length=0,this[Tt]=0;let t=this;return typeof t.close=="function"&&!this[El]&&t.close(),e?this.emit("error",e):this.emit(lt),this}static get isStream(){return aP}};var gP=Nn.realpathSync.native,Po={lstatSync:Nn.lstatSync,readdir:Nn.readdir,readdirSync:Nn.readdirSync,readlinkSync:Nn.readlinkSync,realpathSync:gP,promises:{lstat:Fi.lstat,readdir:Fi.readdir,readlink:Fi.readlink,realpath:Fi.realpath}},gb=o(r=>!r||r===Po||r===mP?Po:{...Po,...r,promises:{...Po.promises,...r.promises||{}}},"fsFromOption"),yb=/^\\\\\?\\([a-z]:)\\?$/i,yP=o(r=>r.replace(/\//g,"\\").replace(yb,"$1\\"),"uncToDrive"),_P=/[\\\/]/,Nr=0,_b=1,vb=2,Rn=4,bb=6,Sb=8,ps=10,wb=12,Rr=15,Fo=~Rr,zm=16,fb=32,Io=64,ln=128,Fl=256,Il=512,hb=Io|ln|Il,vP=1023,Km=o(r=>r.isFile()?Sb:r.isDirectory()?Rn:r.isSymbolicLink()?ps:r.isCharacterDevice()?vb:r.isBlockDevice()?bb:r.isSocket()?wb:r.isFIFO()?_b:Nr,"entToType"),db=new Map,Do=o(r=>{let e=db.get(r);if(e)return e;let t=r.normalize("NFKD");return db.set(r,t),t},"normalize"),pb=new Map,Pl=o(r=>{let e=pb.get(r);if(e)return e;let t=Do(r.toLowerCase());return pb.set(r,t),t},"normalizeNocase"),Dl=class extends To{static{o(this,"ResolveCache")}constructor(){super({max:256})}},Ym=class extends To{static{o(this,"ChildrenCache")}constructor(e=16*1024){super({maxSize:e,sizeCalculation:o(t=>t.length+1,"sizeCalculation")})}},Eb=Symbol("PathScurry setAsCwd"),Gt=class{static{o(this,"PathBase")}name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#s;get mode(){return this.#s}#n;get nlink(){return this.#n}#a;get uid(){return this.#a}#b;get gid(){return this.#b}#u;get rdev(){return this.#u}#f;get blksize(){return this.#f}#o;get ino(){return this.#o}#c;get size(){return this.#c}#i;get blocks(){return this.#i}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#h;get birthtimeMs(){return this.#h}#E;get atime(){return this.#E}#m;get mtime(){return this.#m}#T;get ctime(){return this.#T}#x;get birthtime(){return this.#x}#v;#S;#w;#p;#F;#A;#r;#D;#_;#P;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,t=Nr,n,i,s,a,c){this.name=e,this.#v=s?Pl(e):Do(e),this.#r=t&vP,this.nocase=s,this.roots=i,this.root=n||this,this.#D=a,this.#w=c.fullpath,this.#F=c.relative,this.#A=c.relativePosix,this.parent=c.parent,this.parent?this.#e=this.parent.#e:this.#e=gb(c.fs)}depth(){return this.#S!==void 0?this.#S:this.parent?this.#S=this.parent.depth()+1:this.#S=0}childrenCache(){return this.#D}resolve(e){if(!e)return this;let t=this.getRootString(e),i=e.substring(t.length).split(this.splitSep);return t?this.getRoot(t).#R(i):this.#R(i)}#R(e){let t=this;for(let n of e)t=t.child(n);return t}children(){let e=this.#D.get(this);if(e)return e;let t=Object.assign([],{provisional:0});return this.#D.set(this,t),this.#r&=~zm,t}child(e,t){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let n=this.children(),i=this.nocase?Pl(e):Do(e);for(let u of n)if(u.#v===i)return u;let s=this.parent?this.sep:"",a=this.#w?this.#w+s+e:void 0,c=this.newChild(e,Nr,{...t,parent:this,fullpath:a});return this.canReaddir()||(c.#r|=ln),n.push(c),c}relative(){if(this.isCWD)return"";if(this.#F!==void 0)return this.#F;let e=this.name,t=this.parent;if(!t)return this.#F=this.name;let n=t.relative();return n+(!n||!t.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#A!==void 0)return this.#A;let e=this.name,t=this.parent;if(!t)return this.#A=this.fullpathPosix();let n=t.relativePosix();return n+(!n||!t.parent?"":"/")+e}fullpath(){if(this.#w!==void 0)return this.#w;let e=this.name,t=this.parent;if(!t)return this.#w=this.name;let i=t.fullpath()+(t.parent?this.sep:"")+e;return this.#w=i}fullpathPosix(){if(this.#p!==void 0)return this.#p;if(this.sep==="/")return this.#p=this.fullpath();if(!this.parent){let i=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(i)?this.#p=`//?/${i}`:this.#p=i}let e=this.parent,t=e.fullpathPosix(),n=t+(!t||!e.parent?"":"/")+this.name;return this.#p=n}isUnknown(){return(this.#r&Rr)===Nr}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&Rr)===Sb}isDirectory(){return(this.#r&Rr)===Rn}isCharacterDevice(){return(this.#r&Rr)===vb}isBlockDevice(){return(this.#r&Rr)===bb}isFIFO(){return(this.#r&Rr)===_b}isSocket(){return(this.#r&Rr)===wb}isSymbolicLink(){return(this.#r&ps)===ps}lstatCached(){return this.#r&fb?this:void 0}readlinkCached(){return this.#_}realpathCached(){return this.#P}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#_)return!0;if(!this.parent)return!1;let e=this.#r&Rr;return!(e!==Nr&&e!==ps||this.#r&Fl||this.#r&ln)}calledReaddir(){return!!(this.#r&zm)}isENOENT(){return!!(this.#r&ln)}isNamed(e){return this.nocase?this.#v===Pl(e):this.#v===Do(e)}async readlink(){let e=this.#_;if(e)return e;if(this.canReadlink()&&this.parent)try{let t=await this.#e.promises.readlink(this.fullpath()),n=(await this.parent.realpath())?.resolve(t);if(n)return this.#_=n}catch(t){this.#l(t.code);return}}readlinkSync(){let e=this.#_;if(e)return e;if(this.canReadlink()&&this.parent)try{let t=this.#e.readlinkSync(this.fullpath()),n=this.parent.realpathSync()?.resolve(t);if(n)return this.#_=n}catch(t){this.#l(t.code);return}}#N(e){this.#r|=zm;for(let t=e.provisional;t<e.length;t++){let n=e[t];n&&n.#k()}}#k(){this.#r&ln||(this.#r=(this.#r|ln)&Fo,this.#O())}#O(){let e=this.children();e.provisional=0;for(let t of e)t.#k()}#C(){this.#r|=Il,this.#j()}#j(){if(this.#r&Io)return;let e=this.#r;(e&Rr)===Rn&&(e&=Fo),this.#r=e|Io,this.#O()}#M(e=""){e==="ENOTDIR"||e==="EPERM"?this.#j():e==="ENOENT"?this.#k():this.children().provisional=0}#L(e=""){e==="ENOTDIR"?this.parent.#j():e==="ENOENT"&&this.#k()}#l(e=""){let t=this.#r;t|=Fl,e==="ENOENT"&&(t|=ln),(e==="EINVAL"||e==="UNKNOWN")&&(t&=Fo),this.#r=t,e==="ENOTDIR"&&this.parent&&this.parent.#j()}#V(e,t){return this.#I(e,t)||this.#q(e,t)}#q(e,t){let n=Km(e),i=this.newChild(e.name,n,{parent:this}),s=i.#r&Rr;return s!==Rn&&s!==ps&&s!==Nr&&(i.#r|=Io),t.unshift(i),t.provisional++,i}#I(e,t){for(let n=t.provisional;n<t.length;n++){let i=t[n];if((this.nocase?Pl(e.name):Do(e.name))===i.#v)return this.#U(e,i,n,t)}}#U(e,t,n,i){let s=t.name;return t.#r=t.#r&Fo|Km(e),s!==e.name&&(t.name=e.name),n!==i.provisional&&(n===i.length-1?i.pop():i.splice(n,1),i.unshift(t)),i.provisional++,t}async lstat(){if((this.#r&ln)===0)try{return this.#G(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#L(e.code)}}lstatSync(){if((this.#r&ln)===0)try{return this.#G(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#L(e.code)}}#G(e){let{atime:t,atimeMs:n,birthtime:i,birthtimeMs:s,blksize:a,blocks:c,ctime:u,ctimeMs:f,dev:l,gid:h,ino:p,mode:m,mtime:b,mtimeMs:y,nlink:x,rdev:A,size:C,uid:j}=e;this.#E=t,this.#g=n,this.#x=i,this.#h=s,this.#f=a,this.#i=c,this.#T=u,this.#d=f,this.#t=l,this.#b=h,this.#o=p,this.#s=m,this.#m=b,this.#y=y,this.#n=x,this.#u=A,this.#c=C,this.#a=j;let I=Km(e);this.#r=this.#r&Fo|I|fb,I!==Nr&&I!==Rn&&I!==ps&&(this.#r|=Io)}#$=[];#W=!1;#H(e){this.#W=!1;let t=this.#$.slice();this.#$.length=0,t.forEach(n=>n(null,e))}readdirCB(e,t=!1){if(!this.canReaddir()){t?e(null,[]):queueMicrotask(()=>e(null,[]));return}let n=this.children();if(this.calledReaddir()){let s=n.slice(0,n.provisional);t?e(null,s):queueMicrotask(()=>e(null,s));return}if(this.#$.push(e),this.#W)return;this.#W=!0;let i=this.fullpath();this.#e.readdir(i,{withFileTypes:!0},(s,a)=>{if(s)this.#M(s.code),n.provisional=0;else{for(let c of a)this.#V(c,n);this.#N(n)}this.#H(n.slice(0,n.provisional))})}#B;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let t=this.fullpath();if(this.#B)await this.#B;else{let n=o(()=>{},"resolve");this.#B=new Promise(i=>n=i);try{for(let i of await this.#e.promises.readdir(t,{withFileTypes:!0}))this.#V(i,e);this.#N(e)}catch(i){this.#M(i.code),e.provisional=0}this.#B=void 0,n()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let t=this.fullpath();try{for(let n of this.#e.readdirSync(t,{withFileTypes:!0}))this.#V(n,e);this.#N(e)}catch(n){this.#M(n.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&hb)return!1;let e=Rr&this.#r;return e===Nr||e===Rn||e===ps}shouldWalk(e,t){return(this.#r&Rn)===Rn&&!(this.#r&hb)&&!e.has(this)&&(!t||t(this))}async realpath(){if(this.#P)return this.#P;if(!((Il|Fl|ln)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#P=this.resolve(e)}catch{this.#C()}}realpathSync(){if(this.#P)return this.#P;if(!((Il|Fl|ln)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#P=this.resolve(e)}catch{this.#C()}}[Eb](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let t=new Set([]),n=[],i=this;for(;i&&i.parent;)t.add(i),i.#F=n.join(this.sep),i.#A=n.join("/"),i=i.parent,n.push("..");for(i=e;i&&i.parent&&!t.has(i);)i.#F=void 0,i.#A=void 0,i=i.parent}},Rl=class r extends Gt{static{o(this,"PathWin32")}sep="\\";splitSep=_P;constructor(e,t=Nr,n,i,s,a,c){super(e,t,n,i,s,a,c)}newChild(e,t=Nr,n={}){return new r(e,t,this.root,this.roots,this.nocase,this.childrenCache(),n)}getRootString(e){return fa.win32.parse(e).root}getRoot(e){if(e=yP(e.toUpperCase()),e===this.root.name)return this.root;for(let[t,n]of Object.entries(this.roots))if(this.sameRoot(e,t))return this.roots[e]=n;return this.roots[e]=new ha(e,this).root}sameRoot(e,t=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(yb,"$1\\"),e===t}},Nl=class r extends Gt{static{o(this,"PathPosix")}splitSep="/";sep="/";constructor(e,t=Nr,n,i,s,a,c){super(e,t,n,i,s,a,c)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,t=Nr,n={}){return new r(e,t,this.root,this.roots,this.nocase,this.childrenCache(),n)}},kl=class{static{o(this,"PathScurryBase")}root;rootPath;roots;cwd;#e;#t;#s;nocase;#n;constructor(e=process.cwd(),t,n,{nocase:i,childrenCacheSize:s=16*1024,fs:a=Po}={}){this.#n=gb(a),(e instanceof URL||e.startsWith("file://"))&&(e=(0,mb.fileURLToPath)(e));let c=t.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(c),this.#e=new Dl,this.#t=new Dl,this.#s=new Ym(s);let u=c.substring(this.rootPath.length).split(n);if(u.length===1&&!u[0]&&u.pop(),i===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=i,this.root=this.newRoot(this.#n),this.roots[this.rootPath]=this.root;let f=this.root,l=u.length-1,h=t.sep,p=this.rootPath,m=!1;for(let b of u){let y=l--;f=f.child(b,{relative:new Array(y).fill("..").join(h),relativePosix:new Array(y).fill("..").join("/"),fullpath:p+=(m?"":h)+b}),m=!0}this.cwd=f}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#s}resolve(...e){let t="";for(let s=e.length-1;s>=0;s--){let a=e[s];if(!(!a||a===".")&&(t=t?`${a}/${t}`:a,this.isAbsolute(a)))break}let n=this.#e.get(t);if(n!==void 0)return n;let i=this.cwd.resolve(t).fullpath();return this.#e.set(t,i),i}resolvePosix(...e){let t="";for(let s=e.length-1;s>=0;s--){let a=e[s];if(!(!a||a===".")&&(t=t?`${a}/${t}`:a,this.isAbsolute(a)))break}let n=this.#t.get(t);if(n!==void 0)return n;let i=this.cwd.resolve(t).fullpathPosix();return this.#t.set(t,i),i}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,t={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(t=e,e=this.cwd);let{withFileTypes:n}=t;if(e.canReaddir()){let i=await e.readdir();return n?i:i.map(s=>s.name)}else return[]}readdirSync(e=this.cwd,t={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(t=e,e=this.cwd);let{withFileTypes:n=!0}=t;return e.canReaddir()?n?e.readdirSync():e.readdirSync().map(i=>i.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(t=e.withFileTypes,e=this.cwd);let n=await e.readlink();return t?n:n?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(t=e.withFileTypes,e=this.cwd);let n=e.readlinkSync();return t?n:n?.fullpath()}async realpath(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(t=e.withFileTypes,e=this.cwd);let n=await e.realpath();return t?n:n?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(t=e.withFileTypes,e=this.cwd);let n=e.realpathSync();return t?n:n?.fullpath()}async walk(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(t=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:a}=t,c=[];(!s||s(e))&&c.push(n?e:e.fullpath());let u=new Set,f=o((h,p)=>{u.add(h),h.readdirCB((m,b)=>{if(m)return p(m);let y=b.length;if(!y)return p();let x=o(()=>{--y===0&&p()},"next");for(let A of b)(!s||s(A))&&c.push(n?A:A.fullpath()),i&&A.isSymbolicLink()?A.realpath().then(C=>C?.isUnknown()?C.lstat():C).then(C=>C?.shouldWalk(u,a)?f(C,x):x()):A.shouldWalk(u,a)?f(A,x):x()},!0)},"walk"),l=e;return new Promise((h,p)=>{f(l,m=>{if(m)return p(m);h(c)})})}walkSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(t=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:a}=t,c=[];(!s||s(e))&&c.push(n?e:e.fullpath());let u=new Set([e]);for(let f of u){let l=f.readdirSync();for(let h of l){(!s||s(h))&&c.push(n?h:h.fullpath());let p=h;if(h.isSymbolicLink()){if(!(i&&(p=h.realpathSync())))continue;p.isUnknown()&&p.lstatSync()}p.shouldWalk(u,a)&&u.add(p)}}return c}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,t={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(t=e,e=this.cwd),this.stream(e,t)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(t=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:a}=t;(!s||s(e))&&(yield n?e:e.fullpath());let c=new Set([e]);for(let u of c){let f=u.readdirSync();for(let l of f){(!s||s(l))&&(yield n?l:l.fullpath());let h=l;if(l.isSymbolicLink()){if(!(i&&(h=l.realpathSync())))continue;h.isUnknown()&&h.lstatSync()}h.shouldWalk(c,a)&&c.add(h)}}}stream(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(t=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:a}=t,c=new Ci({objectMode:!0});(!s||s(e))&&c.write(n?e:e.fullpath());let u=new Set,f=[e],l=0,h=o(()=>{let p=!1;for(;!p;){let m=f.shift();if(!m){l===0&&c.end();return}l++,u.add(m);let b=o((x,A,C=!1)=>{if(x)return c.emit("error",x);if(i&&!C){let j=[];for(let I of A)I.isSymbolicLink()&&j.push(I.realpath().then(U=>U?.isUnknown()?U.lstat():U));if(j.length){Promise.all(j).then(()=>b(null,A,!0));return}}for(let j of A)j&&(!s||s(j))&&(c.write(n?j:j.fullpath())||(p=!0));l--;for(let j of A){let I=j.realpathCached()||j;I.shouldWalk(u,a)&&f.push(I)}p&&!c.flowing?c.once("drain",h):y||h()},"onReaddir"),y=!0;m.readdirCB(b,!0),y=!1}},"process");return h(),c}streamSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Gt||(t=e,e=this.cwd);let{withFileTypes:n=!0,follow:i=!1,filter:s,walkFilter:a}=t,c=new Ci({objectMode:!0}),u=new Set;(!s||s(e))&&c.write(n?e:e.fullpath());let f=[e],l=0,h=o(()=>{let p=!1;for(;!p;){let m=f.shift();if(!m){l===0&&c.end();return}l++,u.add(m);let b=m.readdirSync();for(let y of b)(!s||s(y))&&(c.write(n?y:y.fullpath())||(p=!0));l--;for(let y of b){let x=y;if(y.isSymbolicLink()){if(!(i&&(x=y.realpathSync())))continue;x.isUnknown()&&x.lstatSync()}x.shouldWalk(u,a)&&f.push(x)}}p&&!c.flowing&&c.once("drain",h)},"process");return h(),c}chdir(e=this.cwd){let t=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[Eb](t)}},ha=class extends kl{static{o(this,"PathScurryWin32")}sep="\\";constructor(e=process.cwd(),t={}){let{nocase:n=!0}=t;super(e,fa.win32,"\\",{...t,nocase:n}),this.nocase=n;for(let i=this.cwd;i;i=i.parent)i.nocase=this.nocase}parseRootPath(e){return fa.win32.parse(e).root.toUpperCase()}newRoot(e){return new Rl(this.rootPath,Rn,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},da=class extends kl{static{o(this,"PathScurryPosix")}sep="/";constructor(e=process.cwd(),t={}){let{nocase:n=!1}=t;super(e,fa.posix,"/",{...t,nocase:n}),this.nocase=n}parseRootPath(e){return"/"}newRoot(e){return new Nl(this.rootPath,Rn,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},Ro=class extends da{static{o(this,"PathScurryDarwin")}constructor(e=process.cwd(),t={}){let{nocase:n=!0}=t;super(e,{...t,nocase:n})}},sU=process.platform==="win32"?Rl:Nl,Tb=process.platform==="win32"?ha:process.platform==="darwin"?Ro:da;var bP=o(r=>r.length>=1,"isPatternList"),SP=o(r=>r.length>=1,"isGlobList"),pa=class r{static{o(this,"Pattern")}#e;#t;#s;length;#n;#a;#b;#u;#f;#o;#c=!0;constructor(e,t,n,i){if(!bP(e))throw new TypeError("empty pattern list");if(!SP(t))throw new TypeError("empty glob list");if(t.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,n<0||n>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=t,this.#s=n,this.#n=i,this.#s===0){if(this.isUNC()){let[s,a,c,u,...f]=this.#e,[l,h,p,m,...b]=this.#t;f[0]===""&&(f.shift(),b.shift());let y=[s,a,c,u,""].join("/"),x=[l,h,p,m,""].join("/");this.#e=[y,...f],this.#t=[x,...b],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[s,...a]=this.#e,[c,...u]=this.#t;a[0]===""&&(a.shift(),u.shift());let f=s+"/",l=c+"/";this.#e=[f,...a],this.#t=[l,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#s]}isString(){return typeof this.#e[this.#s]=="string"}isGlobstar(){return this.#e[this.#s]===Nt}isRegExp(){return this.#e[this.#s]instanceof RegExp}globString(){return this.#b=this.#b||(this.#s===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#s).join("/"))}hasMore(){return this.length>this.#s+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new r(this.#e,this.#t,this.#s+1,this.#n),this.#a.#o=this.#o,this.#a.#f=this.#f,this.#a.#u=this.#u,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#f!==void 0?this.#f:this.#f=this.#n==="win32"&&this.#s===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#n==="win32"&&this.#s===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#o!==void 0?this.#o:this.#o=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#s===0?e:""}checkFollowGlobstar(){return!(this.#s===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#s===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var wP=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",ma=class{static{o(this,"Ignore")}relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:t,nocase:n,noext:i,noglobstar:s,platform:a=wP}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=a,this.mmopts={dot:!0,nobrace:t,nocase:n,noext:i,noglobstar:s,optimizationLevel:2,platform:a,nocomment:!0,nonegate:!0};for(let c of e)this.add(c)}add(e){let t=new Tr(e,this.mmopts);for(let n=0;n<t.set.length;n++){let i=t.set[n],s=t.globParts[n];if(!i||!s)throw new Error("invalid pattern object");for(;i[0]==="."&&s[0]===".";)i.shift(),s.shift();let a=new pa(i,s,0,this.platform),c=new Tr(a.globString(),this.mmopts),u=s[s.length-1]==="**",f=a.isAbsolute();f?this.absolute.push(c):this.relative.push(c),u&&(f?this.absoluteChildren.push(c):this.relativeChildren.push(c))}}ignored(e){let t=e.fullpath(),n=`${t}/`,i=e.relative()||".",s=`${i}/`;for(let a of this.relative)if(a.match(i)||a.match(s))return!0;for(let a of this.absolute)if(a.match(t)||a.match(n))return!0;return!1}childrenIgnored(e){let t=e.fullpath()+"/",n=(e.relative()||".")+"/";for(let i of this.relativeChildren)if(i.match(n))return!0;for(let i of this.absoluteChildren)if(i.match(t))return!0;return!1}};var Qm=class r{static{o(this,"HasWalkedCache")}store;constructor(e=new Map){this.store=e}copy(){return new r(new Map(this.store))}hasWalked(e,t){return this.store.get(e.fullpath())?.has(t.globString())}storeWalked(e,t){let n=e.fullpath(),i=this.store.get(n);i?i.add(t.globString()):this.store.set(n,new Set([t.globString()]))}},Jm=class{static{o(this,"MatchRecord")}store=new Map;add(e,t,n){let i=(t?2:0)|(n?1:0),s=this.store.get(e);this.store.set(e,s===void 0?i:i&s)}entries(){return[...this.store.entries()].map(([e,t])=>[e,!!(t&2),!!(t&1)])}},Xm=class{static{o(this,"SubWalks")}store=new Map;add(e,t){if(!e.canReaddir())return;let n=this.store.get(e);n?n.find(i=>i.globString()===t.globString())||n.push(t):this.store.set(e,[t])}get(e){let t=this.store.get(e);if(!t)throw new Error("attempting to walk unknown path");return t}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},No=class r{static{o(this,"Processor")}hasWalkedCache;matches=new Jm;subwalks=new Xm;patterns;follow;dot;opts;constructor(e,t){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=t?t.copy():new Qm}processPatterns(e,t){this.patterns=t;let n=t.map(i=>[e,i]);for(let[i,s]of n){this.hasWalkedCache.storeWalked(i,s);let a=s.root(),c=s.isAbsolute()&&this.opts.absolute!==!1;if(a){i=i.resolve(a==="/"&&this.opts.root!==void 0?this.opts.root:a);let h=s.rest();if(h)s=h;else{this.matches.add(i,!0,!1);continue}}if(i.isENOENT())continue;let u,f,l=!1;for(;typeof(u=s.pattern())=="string"&&(f=s.rest());)i=i.resolve(u),s=f,l=!0;if(u=s.pattern(),f=s.rest(),l){if(this.hasWalkedCache.hasWalked(i,s))continue;this.hasWalkedCache.storeWalked(i,s)}if(typeof u=="string"){let h=u===".."||u===""||u===".";this.matches.add(i.resolve(u),c,h);continue}else if(u===Nt){(!i.isSymbolicLink()||this.follow||s.checkFollowGlobstar())&&this.subwalks.add(i,s);let h=f?.pattern(),p=f?.rest();if(!f||(h===""||h===".")&&!p)this.matches.add(i,c,h===""||h===".");else if(h===".."){let m=i.parent||i;p?this.hasWalkedCache.hasWalked(m,p)||this.subwalks.add(m,p):this.matches.add(m,c,!0)}}else u instanceof RegExp&&this.subwalks.add(i,s)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new r(this.opts,this.hasWalkedCache)}filterEntries(e,t){let n=this.subwalks.get(e),i=this.child();for(let s of t)for(let a of n){let c=a.isAbsolute(),u=a.pattern(),f=a.rest();u===Nt?i.testGlobstar(s,a,f,c):u instanceof RegExp?i.testRegExp(s,u,f,c):i.testString(s,u,f,c)}return i}testGlobstar(e,t,n,i){if((this.dot||!e.name.startsWith("."))&&(t.hasMore()||this.matches.add(e,i,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,t):e.isSymbolicLink()&&(n&&t.checkFollowGlobstar()?this.subwalks.add(e,n):t.markFollowGlobstar()&&this.subwalks.add(e,t)))),n){let s=n.pattern();if(typeof s=="string"&&s!==".."&&s!==""&&s!==".")this.testString(e,s,n.rest(),i);else if(s===".."){let a=e.parent||e;this.subwalks.add(a,n)}else s instanceof RegExp&&this.testRegExp(e,s,n.rest(),i)}}testRegExp(e,t,n,i){t.test(e.name)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}testString(e,t,n,i){e.isNamed(t)&&(n?this.subwalks.add(e,n):this.matches.add(e,i,!1))}};var EP=o((r,e)=>typeof r=="string"?new ma([r],e):Array.isArray(r)?new ma(r,e):r,"makeIgnore"),jl=class{static{o(this,"GlobUtil")}path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#s;signal;maxDepth;includeChildMatches;constructor(e,t,n){if(this.patterns=e,this.path=t,this.opts=n,this.#s=!n.posix&&n.platform==="win32"?"\\":"/",this.includeChildMatches=n.includeChildMatches!==!1,(n.ignore||!this.includeChildMatches)&&(this.#t=EP(n.ignore??[],n),!this.includeChildMatches&&typeof this.#t.add!="function")){let i="cannot ignore child matches, ignore lacks add() method.";throw new Error(i)}this.maxDepth=n.maxDepth||1/0,n.signal&&(this.signal=n.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#n(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,t){if(t&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||await e.realpath(),!n)return;e=n}let s=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let a=await s.realpath();a&&(a.isUnknown()||this.opts.stat)&&await a.lstat()}return this.matchCheckTest(s,t)}matchCheckTest(e,t){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!t||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#n(e)?e:void 0}matchCheckSync(e,t){if(t&&this.opts.nodir)return;let n;if(this.opts.realpath){if(n=e.realpathCached()||e.realpathSync(),!n)return;e=n}let s=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let a=s.realpathSync();a&&(a?.isUnknown()||this.opts.stat)&&a.lstatSync()}return this.matchCheckTest(s,t)}matchFinish(e,t){if(this.#n(e))return;if(!this.includeChildMatches&&this.#t?.add){let s=`${e.relativePosix()}/**`;this.#t.add(s)}let n=this.opts.absolute===void 0?t:this.opts.absolute;this.seen.add(e);let i=this.opts.mark&&e.isDirectory()?this.#s:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(n){let s=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(s+i)}else{let s=this.opts.posix?e.relativePosix():e.relative(),a=this.opts.dotRelative&&!s.startsWith(".."+this.#s)?"."+this.#s:"";this.matchEmit(s?a+s+i:"."+i)}}async match(e,t,n){let i=await this.matchCheck(e,n);i&&this.matchFinish(i,t)}matchSync(e,t,n){let i=this.matchCheckSync(e,n);i&&this.matchFinish(i,t)}walkCB(e,t,n){this.signal?.aborted&&n(),this.walkCB2(e,t,new No(this.opts),n)}walkCB2(e,t,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2(e,t,n,i));return}n.processPatterns(e,t);let s=1,a=o(()=>{--s===0&&i()},"next");for(let[c,u,f]of n.matches.entries())this.#n(c)||(s++,this.match(c,u,f).then(()=>a()));for(let c of n.subwalkTargets()){if(this.maxDepth!==1/0&&c.depth()>=this.maxDepth)continue;s++;let u=c.readdirCached();c.calledReaddir()?this.walkCB3(c,u,n,a):c.readdirCB((f,l)=>this.walkCB3(c,l,n,a),!0)}a()}walkCB3(e,t,n,i){n=n.filterEntries(e,t);let s=1,a=o(()=>{--s===0&&i()},"next");for(let[c,u,f]of n.matches.entries())this.#n(c)||(s++,this.match(c,u,f).then(()=>a()));for(let[c,u]of n.subwalks.entries())s++,this.walkCB2(c,u,n.child(),a);a()}walkCBSync(e,t,n){this.signal?.aborted&&n(),this.walkCB2Sync(e,t,new No(this.opts),n)}walkCB2Sync(e,t,n,i){if(this.#a(e))return i();if(this.signal?.aborted&&i(),this.paused){this.onResume(()=>this.walkCB2Sync(e,t,n,i));return}n.processPatterns(e,t);let s=1,a=o(()=>{--s===0&&i()},"next");for(let[c,u,f]of n.matches.entries())this.#n(c)||this.matchSync(c,u,f);for(let c of n.subwalkTargets()){if(this.maxDepth!==1/0&&c.depth()>=this.maxDepth)continue;s++;let u=c.readdirSync();this.walkCB3Sync(c,u,n,a)}a()}walkCB3Sync(e,t,n,i){n=n.filterEntries(e,t);let s=1,a=o(()=>{--s===0&&i()},"next");for(let[c,u,f]of n.matches.entries())this.#n(c)||this.matchSync(c,u,f);for(let[c,u]of n.subwalks.entries())s++,this.walkCB2Sync(c,u,n.child(),a);a()}},ko=class extends jl{static{o(this,"GlobWalker")}matches=new Set;constructor(e,t,n){super(e,t,n)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,t)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?t(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},jo=class extends jl{static{o(this,"GlobStream")}results;constructor(e,t,n){super(e,t,n),this.results=new Ci({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var TP=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",fn=class{static{o(this,"Glob")}absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,t){if(!t)throw new TypeError("glob options required");if(this.withFileTypes=!!t.withFileTypes,this.signal=t.signal,this.follow=!!t.follow,this.dot=!!t.dot,this.dotRelative=!!t.dotRelative,this.nodir=!!t.nodir,this.mark=!!t.mark,t.cwd?(t.cwd instanceof URL||t.cwd.startsWith("file://"))&&(t.cwd=(0,xb.fileURLToPath)(t.cwd)):this.cwd="",this.cwd=t.cwd||"",this.root=t.root,this.magicalBraces=!!t.magicalBraces,this.nobrace=!!t.nobrace,this.noext=!!t.noext,this.realpath=!!t.realpath,this.absolute=t.absolute,this.includeChildMatches=t.includeChildMatches!==!1,this.noglobstar=!!t.noglobstar,this.matchBase=!!t.matchBase,this.maxDepth=typeof t.maxDepth=="number"?t.maxDepth:1/0,this.stat=!!t.stat,this.ignore=t.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(t.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=t.platform||TP,this.opts={...t,platform:this.platform},t.scurry){if(this.scurry=t.scurry,t.nocase!==void 0&&t.nocase!==t.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=t.platform==="win32"?ha:t.platform==="darwin"?Ro:t.platform?da:Tb;this.scurry=new u(this.cwd,{nocase:t.nocase,fs:t.fs})}this.nocase=this.scurry.nocase;let n=this.platform==="darwin"||this.platform==="win32",i={...t,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:n,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},s=this.pattern.map(u=>new Tr(u,i)),[a,c]=s.reduce((u,f)=>(u[0].push(...f.set),u[1].push(...f.globParts),u),[[],[]]);this.patterns=a.map((u,f)=>{let l=c[f];if(!l)throw new Error("invalid pattern object");return new pa(u,l,0,this.platform)})}async walk(){return[...await new ko(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new ko(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new jo(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new jo(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var Zm=o((r,e={})=>{Array.isArray(r)||(r=[r]);for(let t of r)if(new Tr(t,e).hasMagic())return!0;return!1},"hasMagic");function Ll(r,e={}){return new fn(r,e).streamSync()}o(Ll,"globStreamSync");function Ob(r,e={}){return new fn(r,e).stream()}o(Ob,"globStream");function Cb(r,e={}){return new fn(r,e).walkSync()}o(Cb,"globSync");async function Ab(r,e={}){return new fn(r,e).walk()}o(Ab,"glob_");function Vl(r,e={}){return new fn(r,e).iterateSync()}o(Vl,"globIterateSync");function Fb(r,e={}){return new fn(r,e).iterate()}o(Fb,"globIterate");var xP=Ll,AP=Object.assign(Ob,{sync:Ll}),OP=Vl,CP=Object.assign(Fb,{sync:Vl}),FP=Object.assign(Cb,{stream:Ll,iterate:Vl}),Ml=Object.assign(Ab,{glob:Ab,globSync:Cb,sync:FP,globStream:Ob,stream:AP,globStreamSync:Ll,streamSync:xP,globIterate:Fb,iterate:CP,globIterateSync:Vl,iterateSync:OP,Glob:fn,hasMagic:Zm,escape:aa,unescape:cn});Ml.glob=Ml;var ms=et(vi());var ga=class{constructor(e){this.rootPath=e}static{o(this,"NodeFsAdapter")}async readFile(e){let t=this.resolvePath(e);if(!await _t.default.pathExists(t))throw new ms.FileNotFoundError(e);return _t.default.readFile(t,"utf-8")}async fileExists(e){let t=this.resolvePath(e);return _t.default.pathExists(t)}async getFileMetadata(e){let t=await this.readFile(e);return this.extractFrontmatter(t)}async createFile(e,t){let n=this.resolvePath(e);if(await _t.default.pathExists(n))throw new ms.FileAlreadyExistsError(e);return await _t.default.ensureDir(Pi.default.dirname(n)),await _t.default.writeFile(n,t,"utf-8"),e}async updateFile(e,t){let n=this.resolvePath(e);if(!await _t.default.pathExists(n))throw new ms.FileNotFoundError(e);await _t.default.writeFile(n,t,"utf-8")}async writeFile(e,t){let n=this.resolvePath(e);await _t.default.ensureDir(Pi.default.dirname(n)),await _t.default.writeFile(n,t,"utf-8")}async deleteFile(e){let t=this.resolvePath(e);if(!await _t.default.pathExists(t))throw new ms.FileNotFoundError(e);await _t.default.remove(t)}async renameFile(e,t){let n=this.resolvePath(e),i=this.resolvePath(t);if(!await _t.default.pathExists(n))throw new ms.FileNotFoundError(e);await _t.default.ensureDir(Pi.default.dirname(i)),await _t.default.move(n,i)}async createDirectory(e){let t=this.resolvePath(e);await _t.default.ensureDir(t)}async directoryExists(e){let t=this.resolvePath(e);return await _t.default.pathExists(t)?(await _t.default.stat(t)).isDirectory():!1}async getMarkdownFiles(e){let t=e?this.resolvePath(e):this.rootPath,n=Pi.default.join(t,"**/*.md");return(await Ml(n,{nodir:!0})).map(a=>Pi.default.relative(this.rootPath,a))}async findFilesByMetadata(e){let t=await this.getMarkdownFiles(),n=[];for(let i of t)try{let s=await this.getFileMetadata(i);this.matchesQuery(s,e)&&n.push(i)}catch{continue}return n}async findFileByUID(e){let t=await this.findFilesByMetadata({exo__Asset_uid:e});return t.length>0?t[0]:null}resolvePath(e){return Pi.default.isAbsolute(e)?e:Pi.default.join(this.rootPath,e)}extractFrontmatter(e){let t=/^---\n([\s\S]*?)\n---/,n=e.match(t);if(!n)return{};try{let i=yo.load(n[1]);return typeof i=="object"&&i!==null?i:{}}catch{return{}}}matchesQuery(e,t){for(let[n,i]of Object.entries(t)){let s=e[n];if(Array.isArray(s)){if(!s.some(a=>this.normalizeValue(a)===this.normalizeValue(i)))return!1}else if(this.normalizeValue(s)!==this.normalizeValue(i))return!1}return!0}normalizeValue(e){return e==null?"":String(e).replace(/["'[\]]/g,"").trim()}};var Mo=et(require("path")),e1=et(ea());var ya=class{constructor(e){this.vaultRoot=e}static{o(this,"PathResolver")}resolve(e){if(!Mo.default.isAbsolute(e))return Mo.default.resolve(this.vaultRoot,e);let t=Mo.default.resolve(e),n=Mo.default.resolve(this.vaultRoot);if(!t.startsWith(n))throw new ot(`File path ${e} is outside vault root ${this.vaultRoot}`,"Provide a file path within the vault directory.",{filepath:e,vaultRoot:this.vaultRoot});return t}validate(e){if(!e1.default.existsSync(e))throw new vo(e);if(!e1.default.statSync(e).isFile())throw new ot(`Not a file: ${e}`,"Provide a path to a file, not a directory.",{filepath:e});if(!e.endsWith(".md"))throw new ot(`Not a Markdown file: ${e}`,"Provide a path to a .md file.",{filepath:e})}getVaultRoot(){return this.vaultRoot}};var kb=et(vi());var Pb=et(vi());var ii=class{static{o(this,"BaseCommandExecutor")}constructor(e){this.pathResolver=e.pathResolver,this.fsAdapter=e.fsAdapter,this.frontmatterService=e.frontmatterService,this.dryRun=e.dryRun}resolveAndValidate(e){let t=this.pathResolver.resolve(e);this.pathResolver.validate(t);let n=t.replace(this.pathResolver.getVaultRoot()+"/","");return{resolvedPath:t,relativePath:n}}getCurrentTimestamp(){return Pb.DateFormatter.toLocalTimestamp(new Date)}isAssetArchived(e){if(e?.exo__Asset_isArchived===!0)return!0;let t=e?.archived;if(t==null)return!1;if(typeof t=="boolean")return t;if(typeof t=="number")return t!==0;if(typeof t=="string"){let n=t.toLowerCase().trim();return n==="true"||n==="yes"||n==="1"}return!1}extractAliasesFromFrontmatter(e){let t=e.match(/aliases:\s*\n((?:  - .*\n?)*)/);return t?t[1].split(`
`).filter(i=>i.trim()).map(i=>i.replace(/^\s*-\s*/,"").trim()):[]}};var Lo=class extends ii{static{o(this,"StatusCommandExecutor")}constructor(e){super(e)}async executeStart(e){try{let{relativePath:t}=this.resolveAndValidate(e),n=await this.fsAdapter.readFile(t),i=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(n,"ems__Effort_status",'"[[ems__EffortStatusDoing]]"');s=this.frontmatterService.updateProperty(s,"ems__Effort_startTimestamp",i),await this.fsAdapter.updateFile(t,s),console.log(`\u2705 Started: ${e}`),console.log("   Status: Doing"),console.log(`   Start time: ${i}`),process.exit(0)}catch(t){Be.handle(t)}}async executeComplete(e){try{let{relativePath:t}=this.resolveAndValidate(e),n=await this.fsAdapter.readFile(t),i=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(n,"ems__Effort_status",'"[[ems__EffortStatusDone]]"');s=this.frontmatterService.updateProperty(s,"ems__Effort_endTimestamp",i),s=this.frontmatterService.updateProperty(s,"ems__Effort_resolutionTimestamp",i),await this.fsAdapter.updateFile(t,s),console.log(`\u2705 Completed: ${e}`),console.log("   Status: Done"),console.log(`   Completion time: ${i}`),process.exit(0)}catch(t){Be.handle(t)}}async executeTrash(e){try{let{relativePath:t}=this.resolveAndValidate(e),n=await this.fsAdapter.readFile(t),i=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(n,"ems__Effort_status",'"[[ems__EffortStatusTrashed]]"');s=this.frontmatterService.updateProperty(s,"ems__Effort_resolutionTimestamp",i),await this.fsAdapter.updateFile(t,s),console.log(`\u2705 Trashed: ${e}`),console.log("   Status: Trashed"),console.log(`   Resolution time: ${i}`),process.exit(0)}catch(t){Be.handle(t)}}async executeArchive(e){try{let{relativePath:t}=this.resolveAndValidate(e),n=await this.fsAdapter.readFile(t),i=this.frontmatterService.updateProperty(n,"archived","true");i=this.frontmatterService.removeProperty(i,"aliases"),await this.fsAdapter.updateFile(t,i),console.log(`\u2705 Archived: ${e}`),console.log("   Archived: true"),console.log("   Aliases removed"),process.exit(0)}catch(t){Be.handle(t)}}async executeMoveToBacklog(e){try{await this.updateStatus(e,"ems__EffortStatusBacklog","Backlog"),process.exit(0)}catch(t){Be.handle(t)}}async executeMoveToAnalysis(e){try{await this.updateStatus(e,"ems__EffortStatusAnalysis","Analysis"),process.exit(0)}catch(t){Be.handle(t)}}async executeMoveToToDo(e){try{await this.updateStatus(e,"ems__EffortStatusToDo","ToDo"),process.exit(0)}catch(t){Be.handle(t)}}async updateStatus(e,t,n){let{relativePath:i}=this.resolveAndValidate(e),s=await this.fsAdapter.readFile(i),a=this.frontmatterService.updateProperty(s,"ems__Effort_status",`"[[${t}]]"`);await this.fsAdapter.updateFile(i,a),console.log(`\u2705 Moved to ${n}: ${e}`),console.log(`   Status: ${n}`)}};var jt=[];for(let r=0;r<256;++r)jt.push((r+256).toString(16).slice(1));function Ib(r,e=0){return(jt[r[e+0]]+jt[r[e+1]]+jt[r[e+2]]+jt[r[e+3]]+"-"+jt[r[e+4]]+jt[r[e+5]]+"-"+jt[r[e+6]]+jt[r[e+7]]+"-"+jt[r[e+8]]+jt[r[e+9]]+"-"+jt[r[e+10]]+jt[r[e+11]]+jt[r[e+12]]+jt[r[e+13]]+jt[r[e+14]]+jt[r[e+15]]).toLowerCase()}o(Ib,"unsafeStringify");var Db=require("node:crypto");var Ul=new Uint8Array(256),ql=Ul.length;function t1(){return ql>Ul.length-16&&((0,Db.randomFillSync)(Ul),ql=0),Ul.slice(ql,ql+=16)}o(t1,"rng");var Rb=require("node:crypto"),r1={randomUUID:Rb.randomUUID};function IP(r,e,t){r=r||{};let n=r.random??r.rng?.()??t1();if(n.length<16)throw new Error("Random bytes length must be >= 16");if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[t+i]=n[i];return e}return Ib(n)}o(IP,"_v4");function DP(r,e,t){return r1.randomUUID&&!e&&!r?r1.randomUUID():IP(r,e,t)}o(DP,"v4");var n1=DP;var _a=et(vi());var Vo=class extends ii{static{o(this,"AssetCreationExecutor")}constructor(e){super(e)}async executeCreateTask(e,t,n={}){try{await this.createAsset(e,t,"ems__Task",n),process.exit(0)}catch(i){Be.handle(i)}}async executeCreateMeeting(e,t,n={}){try{await this.createAsset(e,t,"ems__Meeting",n),process.exit(0)}catch(i){Be.handle(i)}}async executeCreateProject(e,t,n={}){try{await this.createAsset(e,t,"ems__Project",n),process.exit(0)}catch(i){Be.handle(i)}}async executeCreateArea(e,t,n={}){try{await this.createAsset(e,t,"ems__Area",n),process.exit(0)}catch(i){Be.handle(i)}}async createAsset(e,t,n,i={}){if(!t||t.trim().length===0)throw new Error("Label cannot be empty");let s=t.trim(),{relativePath:a}=this.resolveAndValidate(e);if(await this.fsAdapter.fileExists(a))throw new _a.FileAlreadyExistsError(e);let u=n1(),f=this.buildAssetFrontmatter(n,u,s,i),l=_a.MetadataHelpers.buildFileContent(f);await this.fsAdapter.createFile(a,l),console.log(`\u2705 Created ${this.getAssetTypeName(n)}: ${e}`),console.log(`   UID: ${u}`),console.log(`   Label: ${s}`),console.log(`   Class: ${n}`)}buildAssetFrontmatter(e,t,n,i={}){let s=_a.DateFormatter.toLocalTimestamp(new Date),a={exo__Asset_isDefinedBy:'"[[Ontology/EMS]]"',exo__Asset_uid:t,exo__Asset_label:n,exo__Asset_createdAt:s,exo__Instance_class:[`"[[${e}]]"`],aliases:[n]};return(e==="ems__Task"||e==="ems__Project"||e==="ems__Meeting")&&(a.ems__Effort_status='"[[ems__EffortStatusDraft]]"'),i.prototype&&(a.ems__Effort_prototype=`"[[${i.prototype}]]"`),i.area&&(a.ems__Effort_area=`"[[${i.area}]]"`),i.parent&&(a.ems__Effort_parent=`"[[${i.parent}]]"`),a}getAssetTypeName(e){return{ems__Task:"task",ems__Meeting:"meeting",ems__Project:"project",ems__Area:"area"}[e]||"asset"}};var i1=et(require("path"));var Nb=et(vi());var qo=class extends ii{static{o(this,"PropertyCommandExecutor")}constructor(e){super(e)}async executeRenameToUid(e){try{let{relativePath:t}=this.resolveAndValidate(e),n=await this.fsAdapter.getFileMetadata(t);if(!n.exo__Asset_uid)throw new Error("Asset missing exo__Asset_uid property");let i=i1.default.basename(t,".md"),s=n.exo__Asset_uid;if(i===s&&(console.log(`\u2705 Already renamed: ${e}`),console.log(`   Current filename matches UID: ${s}.md`),process.exit(0)),!n.exo__Asset_label||n.exo__Asset_label.trim()===""){let u=await this.fsAdapter.readFile(t),f=this.frontmatterService.updateProperty(u,"exo__Asset_label",i),l=this.isAssetArchived(n),h=f;l||(h=this.frontmatterService.updateProperty(f,"aliases",`
  - ${i}`)),await this.fsAdapter.updateFile(t,h),console.log(`   Updated label: "${i}"`)}let a=i1.default.dirname(t),c=a!=="."?`${a}/${s}.md`:`${s}.md`;await this.fsAdapter.renameFile(t,c),console.log("\u2705 Renamed to UID format"),console.log(`   Old: ${t}`),console.log(`   New: ${c}`),process.exit(0)}catch(t){Be.handle(t)}}async executeUpdateLabel(e,t){try{if(!t||t.trim().length===0)throw new Error("Label cannot be empty");let n=t.trim(),{relativePath:i}=this.resolveAndValidate(e),s=await this.fsAdapter.readFile(i),a=this.frontmatterService.updateProperty(s,"exo__Asset_label",n),c=this.frontmatterService.parse(a),u=this.extractAliasesFromFrontmatter(c.content);if(u.includes(n)||(u.length===0?a=this.frontmatterService.updateProperty(a,"aliases",`
  - ${n}`):a=this.frontmatterService.updateProperty(a,"aliases",`${u.map(f=>`
  - ${f}`).join("")}
  - ${n}`)),this.dryRun){if(console.log("\u{1F50D} DRY RUN: Preview of changes (not applied)"),console.log(`   File: ${e}`),console.log("   Changes:"),console.log(`     \u2022 exo__Asset_label: "${n}"`),u.includes(n))console.log("     \u2022 aliases: unchanged (label already present)");else{let f=u.length===0?[n]:[...u,n];console.log(`     \u2022 aliases: [${f.map(l=>`"${l}"`).join(", ")}]`)}console.log(`
\u{1F4A1} Run without --dry-run to apply changes`),process.exit(0)}await this.fsAdapter.updateFile(i,a),console.log("\u2705 Updated label"),console.log(`   File: ${e}`),console.log(`   New label: "${n}"`),console.log("   Aliases synchronized"),process.exit(0)}catch(n){Be.handle(n)}}async executeSchedule(e,t){try{await this.updatePlannedTimestamp(e,t,"ems__Effort_plannedStartTimestamp"),process.exit(0)}catch(n){Be.handle(n)}}async executeSetDeadline(e,t){try{await this.updatePlannedTimestamp(e,t,"ems__Effort_plannedEndTimestamp"),process.exit(0)}catch(n){Be.handle(n)}}async updatePlannedTimestamp(e,t,n){let{relativePath:i}=this.resolveAndValidate(e);if(!await this.fsAdapter.fileExists(i))throw new Error(`File not found: ${e}`);if(!/^\d{4}-\d{2}-\d{2}$/.test(t))throw new Error(`Invalid date format: ${t}. Expected YYYY-MM-DD (e.g., 2025-11-25)`);let a=Nb.DateFormatter.toTimestampAtStartOfDay(t),c=await this.fsAdapter.readFile(i),u=this.frontmatterService.updateProperty(c,n,a);await this.fsAdapter.writeFile(i,u),console.log(`\u2705 ${n==="ems__Effort_plannedStartTimestamp"?"Scheduled":"Set deadline for"}: ${e}`),console.log(`   Date: ${t}`),console.log(`   Timestamp: ${a}`)}};var Bl=class{static{o(this,"CommandExecutor")}constructor(e,t=!1){this.context={pathResolver:new ya(e),fsAdapter:new ga(e),frontmatterService:new kb.FrontmatterService,dryRun:t},this.statusExecutor=new Lo(this.context),this.creationExecutor=new Vo(this.context),this.propertyExecutor=new qo(this.context)}async execute(e,t,n){try{let i=this.context.pathResolver.resolve(t);this.context.pathResolver.validate(i),await this.context.fsAdapter.readFile(i.replace(this.context.pathResolver.getVaultRoot()+"/","")),console.log("\u2705 Command infrastructure verified"),console.log(`   Command: ${e}`),console.log(`   File: ${i}`),console.log(`   Vault: ${this.context.pathResolver.getVaultRoot()}`),Object.keys(n).length>0&&console.log(`   Options: ${JSON.stringify(n,null,2)}`),console.log(`
\u{1F4DD} Note: Actual command execution will be implemented in follow-up issues.`),console.log("    This PR establishes the infrastructure foundation."),process.exit(0)}catch(i){Be.handle(i)}}getVaultRoot(){return this.context.pathResolver.getVaultRoot()}async executeStart(e){return this.statusExecutor.executeStart(e)}async executeComplete(e){return this.statusExecutor.executeComplete(e)}async executeTrash(e){return this.statusExecutor.executeTrash(e)}async executeArchive(e){return this.statusExecutor.executeArchive(e)}async executeMoveToBacklog(e){return this.statusExecutor.executeMoveToBacklog(e)}async executeMoveToAnalysis(e){return this.statusExecutor.executeMoveToAnalysis(e)}async executeMoveToToDo(e){return this.statusExecutor.executeMoveToToDo(e)}async executeCreateTask(e,t,n={}){return this.creationExecutor.executeCreateTask(e,t,n)}async executeCreateMeeting(e,t,n={}){return this.creationExecutor.executeCreateMeeting(e,t,n)}async executeCreateProject(e,t,n={}){return this.creationExecutor.executeCreateProject(e,t,n)}async executeCreateArea(e,t,n={}){return this.creationExecutor.executeCreateArea(e,t,n)}async executeRenameToUid(e){return this.propertyExecutor.executeRenameToUid(e)}async executeUpdateLabel(e,t){return this.propertyExecutor.executeUpdateLabel(e,t)}async executeSchedule(e,t){return this.propertyExecutor.executeSchedule(e,t)}async executeSetDeadline(e,t){return this.propertyExecutor.executeSetDeadline(e,t)}};function Ht(r,e,t,n,i){if(r==="json"){let s={command:e,filepath:t,action:n,...i&&{changes:i}},a=$t.success(s);console.log(JSON.stringify(a,null,2))}else console.log(`\u2705 ${n}`)}o(Ht,"outputResult");function gs(r,e,t,n){let i=new ot(`--${e} option is required for ${t} command`,n,{command:t,missingOption:e});Be.handle(i)}o(gs,"handleMissingOption");function Mb(){return new vn("command").description("Execute plugin command on single asset").argument("<command-name>","Command to execute (rename-to-uid, start, complete, schedule, set-deadline, etc.)").argument("<filepath>","Path to asset file (relative to vault root or absolute)").option("--vault <path>","Path to Obsidian vault",process.cwd()).option("--label <value>","Asset label (required for update-label and creation commands)").option("--prototype <uid>","Prototype UID for inheritance (creation commands)").option("--area <uid>","Area UID for effort linkage (creation commands)").option("--parent <uid>","Parent UID for effort linkage (creation commands)").option("--date <value>","Date in YYYY-MM-DD format (required for schedule and set-deadline commands)").option("--dry-run","Preview changes without modifying files").option("--format <type>","Output format: text|json (default: text)","text").action(async(r,e,t)=>{let n=t.format||"text";Be.setFormat(n);try{let i=(0,jb.resolve)(t.vault),s=new Bl(i,t.dryRun);switch(r){case"rename-to-uid":await s.executeRenameToUid(e),Ht(n,r,e,"Renamed file to UID-based name");break;case"update-label":t.label||gs(n,"label","update-label",'exocortex command update-label <filepath> --label "<value>"'),await s.executeUpdateLabel(e,t.label),Ht(n,r,e,`Updated label to "${t.label}"`,{label:t.label});break;case"start":await s.executeStart(e),Ht(n,r,e,"Started task");break;case"complete":await s.executeComplete(e),Ht(n,r,e,"Completed task");break;case"trash":await s.executeTrash(e),Ht(n,r,e,"Moved task to trash");break;case"archive":await s.executeArchive(e),Ht(n,r,e,"Archived task");break;case"move-to-backlog":await s.executeMoveToBacklog(e),Ht(n,r,e,"Moved task to backlog");break;case"move-to-analysis":await s.executeMoveToAnalysis(e),Ht(n,r,e,"Moved task to analysis");break;case"move-to-todo":await s.executeMoveToToDo(e),Ht(n,r,e,"Moved task to todo");break;case"create-task":t.label||gs(n,"label","create-task",'exocortex command create-task <filepath> --label "<value>"'),await s.executeCreateTask(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent}),Ht(n,r,e,`Created task "${t.label}"`,{label:t.label,prototype:t.prototype,area:t.area,parent:t.parent});break;case"create-meeting":t.label||gs(n,"label","create-meeting",'exocortex command create-meeting <filepath> --label "<value>"'),await s.executeCreateMeeting(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent}),Ht(n,r,e,`Created meeting "${t.label}"`,{label:t.label,prototype:t.prototype,area:t.area,parent:t.parent});break;case"create-project":t.label||gs(n,"label","create-project",'exocortex command create-project <filepath> --label "<value>"'),await s.executeCreateProject(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent}),Ht(n,r,e,`Created project "${t.label}"`,{label:t.label,prototype:t.prototype,area:t.area,parent:t.parent});break;case"create-area":t.label||gs(n,"label","create-area",'exocortex command create-area <filepath> --label "<value>"'),await s.executeCreateArea(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent}),Ht(n,r,e,`Created area "${t.label}"`,{label:t.label,prototype:t.prototype,area:t.area,parent:t.parent});break;case"schedule":t.date||gs(n,"date","schedule",'exocortex command schedule <filepath> --date "YYYY-MM-DD"'),await s.executeSchedule(e,t.date),Ht(n,r,e,`Scheduled task for ${t.date}`,{date:t.date});break;case"set-deadline":t.date||gs(n,"date","set-deadline",'exocortex command set-deadline <filepath> --date "YYYY-MM-DD"'),await s.executeSetDeadline(e,t.date),Ht(n,r,e,`Set deadline to ${t.date}`,{date:t.date});break;default:await s.execute(r,e,t),Ht(n,r,e,`Executed ${r}`);break}}catch(i){Be.handle(i)}})}o(Mb,"commandCommand");var Vb=require("path");var si=et(require("fs")),s1=et(require("path")),Lb=require("events");var RP={watch:si.default.watch.bind(si.default),existsSync:si.default.existsSync.bind(si.default),statSync:si.default.statSync.bind(si.default),readFileSync:si.default.readFileSync.bind(si.default)},$l=class extends Lb.EventEmitter{constructor(t,n={}){super();this.watcher=null;this.debounceTimers=new Map;this.isRunning=!1;this.vaultPath=s1.default.resolve(t),this.fsAdapter=n.fsAdapter??RP,this.options={pattern:n.pattern??"**/*.md",assetType:n.assetType??"",debounceMs:n.debounceMs??100,recursive:n.recursive??!0}}static{o(this,"FileSystemWatcher")}start(){this.isRunning||(this.watcher=this.fsAdapter.watch(this.vaultPath,{recursive:this.options.recursive},(t,n)=>{n&&this.handleFileEvent(t,n.toString())}),this.watcher.on("error",t=>{this.emit("error",t)}),this.isRunning=!0,this.emit("started"))}stop(){if(this.isRunning){for(let t of this.debounceTimers.values())clearTimeout(t);this.debounceTimers.clear(),this.watcher&&(this.watcher.close(),this.watcher=null),this.isRunning=!1,this.emit("stopped")}}isWatching(){return this.isRunning}handleFileEvent(t,n){let i=s1.default.join(this.vaultPath,n),s=n;if(!this.matchesPattern(s))return;let a=this.debounceTimers.get(i);a&&clearTimeout(a);let c=setTimeout(()=>{this.debounceTimers.delete(i),this.processFileEvent(i,s)},this.options.debounceMs);this.debounceTimers.set(i,c)}processFileEvent(t,n){let i=this.fsAdapter.existsSync(t),s;if(!i)s="delete";else{let u=this.fsAdapter.statSync(t);s=Date.now()-u.birthtimeMs<1e3?"create":"modify"}let a;if(i&&t.endsWith(".md")&&(a=this.extractAssetType(t)),this.options.assetType&&a!==this.options.assetType)return;let c={type:s,path:t,relativePath:n,timestamp:new Date().toISOString(),assetType:a};this.emit("change",c)}matchesPattern(t){return this.options.pattern?kt(t,this.options.pattern):!0}extractAssetType(t){try{let i=this.fsAdapter.readFileSync(t,"utf-8").match(/^---\n([\s\S]*?)\n---/);if(!i)return;let a=i[1].match(/exo__Instance_class:\s*(?:\[?"?\[\[([^\]]+)\]\]"?\]?|"?\[\[([^\]]+)\]\]"?)/);return a?a[1]||a[2]:void 0}catch{return}}};var a1=et(require("fs"));function qb(){return new vn("watch").description("Watch vault for file changes and emit NDJSON events").option("--vault <path>","Path to Obsidian vault",process.cwd()).option("--pattern <glob>","Glob pattern to filter files (e.g., '*.md', 'tasks/**')").option("--asset-type <type>","Filter by asset type (e.g., 'ems__Task', 'ems__Project')").option("--debounce <ms>","Debounce interval in milliseconds","100").action(async r=>{Be.setFormat("json");try{let e=(0,Vb.resolve)(r.vault);if(!a1.default.existsSync(e))throw new hs(e);if(!a1.default.statSync(e).isDirectory())throw new ot(`Vault path is not a directory: ${e}`,"Provide a path to a directory, not a file",{vaultPath:e});let t=parseInt(r.debounce?.toString()??"100",10);if(isNaN(t)||t<0)throw new ot("--debounce must be a non-negative integer","Use a positive integer value for debounce",{debounce:r.debounce});let n=new $l(e,{pattern:r.pattern,assetType:r.assetType,debounceMs:t});n.on("change",s=>{console.log(JSON.stringify(s))}),n.on("error",s=>{let a=$t.error("INTERNAL_OPERATION_FAILED",s.message,5,{recovery:{message:"Check file permissions and vault access",suggestion:"Ensure the vault directory is accessible"}});console.log(JSON.stringify(a))});let i=o(()=>{n.stop(),process.exit(0)},"shutdown");process.on("SIGINT",i),process.on("SIGTERM",i),console.error(`Watching vault: ${e}`),r.pattern&&console.error(`  Pattern filter: ${r.pattern}`),r.assetType&&console.error(`  Asset type filter: ${r.assetType}`),console.error(`  Debounce: ${t}ms`),console.error("Press Ctrl+C to stop"),n.start()}catch(e){Be.handle(e)}})}o(qb,"watchCommand");var c1=require("path"),u1=et(ea());var va=et(vi());var hn=et(ea()),o1=et(require("crypto"));var Wl=class{constructor(){this.backups=new Map;this.fileHashes=new Map}static{o(this,"TransactionManager")}async begin(e){if(!hn.default.existsSync(e))throw new Error(`Cannot backup non-existent file: ${e}`);let t=await hn.default.readFile(e,"utf-8"),n=o1.default.createHash("sha256").update(t).digest("hex");this.fileHashes.set(e,n);let i=`${e}.backup.${Date.now()}`;await hn.default.writeFile(i,t,"utf-8"),this.backups.set(e,i)}async verify(e){let t=this.fileHashes.get(e);if(!t)return!0;if(!hn.default.existsSync(e))return!1;let n=await hn.default.readFile(e,"utf-8");return o1.default.createHash("sha256").update(n).digest("hex")===t}async commit(){for(let e of this.backups.values())hn.default.existsSync(e)&&await hn.default.remove(e);this.backups.clear(),this.fileHashes.clear()}async rollback(){for(let[e,t]of this.backups.entries())hn.default.existsSync(t)&&(await hn.default.copy(t,e,{overwrite:!0}),await hn.default.remove(t));this.backups.clear(),this.fileHashes.clear()}getTrackedFiles(){return Array.from(this.backups.keys())}};var Uo=class{static{o(this,"BatchExecutor")}constructor(e,t=!1){this.pathResolver=new ya(e),this.fsAdapter=new ga(e),this.frontmatterService=new va.FrontmatterService,this.transactionManager=new Wl,this.dryRun=t}async executeBatch(e,t=!1){let n=Date.now(),i=[],s=0,a=0,c=!1;if(e.length===0)return{success:!0,total:0,succeeded:0,failed:0,results:[],durationMs:Date.now()-n,atomic:t};if(t&&!this.dryRun)try{await this.backupAllFiles(e)}catch(f){return{success:!1,total:e.length,succeeded:0,failed:e.length,results:e.map(l=>({success:!1,command:l.command,filepath:l.filepath,error:`Backup failed: ${f.message}`})),durationMs:Date.now()-n,atomic:t}}for(let f of e){let l=await this.executeSingleOperation(f);if(i.push(l),l.success)s++;else if(a++,t&&!this.dryRun){await this.transactionManager.rollback(),c=!0;let h=i.length;for(let p=h;p<e.length;p++)i.push({success:!1,command:e[p].command,filepath:e[p].filepath,error:"Not executed due to atomic rollback"}),a++;return{success:!1,total:e.length,succeeded:0,failed:e.length,results:i,durationMs:Date.now()-n,atomic:t,rolledBack:!0}}}return t&&!this.dryRun&&!c&&await this.transactionManager.commit(),{success:a===0,total:e.length,succeeded:s,failed:a,results:i,durationMs:Date.now()-n,atomic:t,...t&&{rolledBack:c}}}static parseInput(e){try{let t=JSON.parse(e);if(!Array.isArray(t))throw new ot("Batch input must be a JSON array of operations",`exo batch --input '[{"command":"start","filepath":"task.md"}]'`);for(let n of t){if(!n.command||typeof n.command!="string")throw new ot('Each operation must have a "command" string property','{"command":"start","filepath":"task.md"}');if(!n.filepath||typeof n.filepath!="string")throw new ot('Each operation must have a "filepath" string property','{"command":"start","filepath":"task.md"}')}return t}catch(t){throw t instanceof ot?t:new ot(`Failed to parse batch input: ${t.message}`,`exo batch --input '[{"command":"start","filepath":"task.md"}]'`)}}async backupAllFiles(e){let t=new Set;for(let n of e){let i=this.pathResolver.resolve(n.filepath);t.add(i)}for(let n of t)await this.transactionManager.begin(n)}async executeSingleOperation(e){try{let t=this.pathResolver.resolve(e.filepath);this.pathResolver.validate(t);let n=t.replace(this.pathResolver.getVaultRoot()+"/",""),i=await this.fsAdapter.readFile(n);if(this.dryRun)return{success:!0,command:e.command,filepath:e.filepath,action:`Would execute ${e.command} (dry-run)`};switch(e.command){case"start":return await this.executeStart(n,e);case"complete":return await this.executeComplete(n,e);case"trash":return await this.executeTrash(n,e);case"archive":return await this.executeArchive(n,e);case"move-to-backlog":return await this.executeStatusUpdate(n,e,"ems__EffortStatusBacklog","Moved to backlog");case"move-to-analysis":return await this.executeStatusUpdate(n,e,"ems__EffortStatusAnalysis","Moved to analysis");case"move-to-todo":return await this.executeStatusUpdate(n,e,"ems__EffortStatusToDo","Moved to todo");case"update-label":return await this.executeUpdateLabel(n,e);case"schedule":return await this.executeSchedule(n,e);case"set-deadline":return await this.executeSetDeadline(n,e);default:return{success:!1,command:e.command,filepath:e.filepath,error:`Unknown command: ${e.command}`}}}catch(t){return{success:!1,command:e.command,filepath:e.filepath,error:t.message}}}getCurrentTimestamp(){return va.DateFormatter.toLocalTimestamp(new Date)}async executeStart(e,t){let n=await this.fsAdapter.readFile(e),i=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(n,"ems__Effort_status",'"[[ems__EffortStatusDoing]]"');return s=this.frontmatterService.updateProperty(s,"ems__Effort_startTimestamp",i),await this.fsAdapter.updateFile(e,s),{success:!0,command:t.command,filepath:t.filepath,action:"Started task",changes:{status:"Doing",startTimestamp:i}}}async executeComplete(e,t){let n=await this.fsAdapter.readFile(e),i=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(n,"ems__Effort_status",'"[[ems__EffortStatusDone]]"');return s=this.frontmatterService.updateProperty(s,"ems__Effort_endTimestamp",i),s=this.frontmatterService.updateProperty(s,"ems__Effort_resolutionTimestamp",i),await this.fsAdapter.updateFile(e,s),{success:!0,command:t.command,filepath:t.filepath,action:"Completed task",changes:{status:"Done",endTimestamp:i,resolutionTimestamp:i}}}async executeTrash(e,t){let n=await this.fsAdapter.readFile(e),i=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(n,"ems__Effort_status",'"[[ems__EffortStatusTrashed]]"');return s=this.frontmatterService.updateProperty(s,"ems__Effort_resolutionTimestamp",i),await this.fsAdapter.updateFile(e,s),{success:!0,command:t.command,filepath:t.filepath,action:"Trashed task",changes:{status:"Trashed",resolutionTimestamp:i}}}async executeArchive(e,t){let n=await this.fsAdapter.readFile(e),i=this.frontmatterService.updateProperty(n,"archived","true");return i=this.frontmatterService.removeProperty(i,"aliases"),await this.fsAdapter.updateFile(e,i),{success:!0,command:t.command,filepath:t.filepath,action:"Archived task",changes:{archived:!0,aliasesRemoved:!0}}}async executeStatusUpdate(e,t,n,i){let s=await this.fsAdapter.readFile(e),a=this.frontmatterService.updateProperty(s,"ems__Effort_status",`"[[${n}]]"`);return await this.fsAdapter.updateFile(e,a),{success:!0,command:t.command,filepath:t.filepath,action:i,changes:{status:n.replace("ems__EffortStatus","")}}}async executeUpdateLabel(e,t){let n=t.options?.label;if(!n||n.trim()==="")return{success:!1,command:t.command,filepath:t.filepath,error:'Missing required option: "label"'};let i=n.trim(),s=await this.fsAdapter.readFile(e),a=this.frontmatterService.updateProperty(s,"exo__Asset_label",`"${i}"`);return await this.fsAdapter.updateFile(e,a),{success:!0,command:t.command,filepath:t.filepath,action:`Updated label to "${i}"`,changes:{label:i}}}async executeSchedule(e,t){let n=t.options?.date;if(!n)return{success:!1,command:t.command,filepath:t.filepath,error:'Missing required option: "date"'};if(!/^\d{4}-\d{2}-\d{2}$/.test(n))return{success:!1,command:t.command,filepath:t.filepath,error:`Invalid date format: ${n}. Expected YYYY-MM-DD`};let i=await this.fsAdapter.readFile(e),s=va.DateFormatter.toTimestampAtStartOfDay(n),a=this.frontmatterService.updateProperty(i,"ems__Effort_scheduledTimestamp",s);return await this.fsAdapter.updateFile(e,a),{success:!0,command:t.command,filepath:t.filepath,action:`Scheduled for ${n}`,changes:{scheduledTimestamp:s}}}async executeSetDeadline(e,t){let n=t.options?.date;if(!n)return{success:!1,command:t.command,filepath:t.filepath,error:'Missing required option: "date"'};if(!/^\d{4}-\d{2}-\d{2}$/.test(n))return{success:!1,command:t.command,filepath:t.filepath,error:`Invalid date format: ${n}. Expected YYYY-MM-DD`};let i=await this.fsAdapter.readFile(e),s=va.DateFormatter.toTimestampAtStartOfDay(n),a=this.frontmatterService.updateProperty(i,"ems__Effort_deadlineTimestamp",s);return await this.fsAdapter.updateFile(e,a),{success:!0,command:t.command,filepath:t.filepath,action:`Set deadline to ${n}`,changes:{deadlineTimestamp:s}}}};function NP(r,e){if(r==="json"){let t=$t.success(e,{durationMs:e.durationMs,itemCount:e.total});console.log(JSON.stringify(t,null,2))}else{if(console.log(`
\u{1F4E6} Batch Execution ${e.success?"Complete":"Failed"}`),console.log(`   Total: ${e.total} operations`),console.log(`   \u2705 Succeeded: ${e.succeeded}`),console.log(`   \u274C Failed: ${e.failed}`),console.log(`   \u23F1\uFE0F  Duration: ${e.durationMs}ms`),e.atomic&&console.log(`   \u{1F512} Atomic mode: ${e.rolledBack?"Rolled back":"Committed"}`),e.failed>0){console.log(`
\u{1F4CB} Failed Operations:`);for(let t of e.results.filter(n=>!n.success))console.log(`   \u274C ${t.command} ${t.filepath}: ${t.error}`)}if(e.succeeded>0&&r==="text"){console.log(`
\u{1F4CB} Successful Operations:`);for(let t of e.results.filter(n=>n.success))console.log(`   \u2705 ${t.command} ${t.filepath}: ${t.action}`)}}}o(NP,"outputResult");function Ub(){return new vn("batch").description("Execute multiple operations in a single CLI invocation").option("--vault <path>","Path to Obsidian vault",process.cwd()).option("--input <json>","JSON array of operations to execute").option("--file <path>","Path to JSON file containing operations").option("--atomic","All-or-nothing execution (rollback on any failure)").option("--dry-run","Preview changes without modifying files").option("--format <type>","Output format: text|json (default: text)","text").action(async r=>{let e=r.format||"text";Be.setFormat(e);try{let t=(0,c1.resolve)(r.vault),n;if(r.input)n=r.input;else if(r.file){let c=(0,c1.resolve)(r.file);if(!u1.default.existsSync(c))throw new ot(`Batch file not found: ${c}`,"exocortex batch --file operations.json");n=await u1.default.readFile(c,"utf-8")}else throw new ot("Either --input or --file option is required",`exocortex batch --input '[{"command":"start","filepath":"task.md"}]' or exocortex batch --file operations.json`);let i=Uo.parseInput(n);if(i.length===0)throw new ot("Batch input contains no operations",`exocortex batch --input '[{"command":"start","filepath":"task.md"}]'`);let a=await new Uo(t,r.dryRun).executeBatch(i,r.atomic);NP(e,a),process.exit(a.success?0:5)}catch(t){Be.handle(t)}})}o(Ub,"batchCommand");var ba=new vn;ba.name("exocortex").description("CLI tool for Exocortex knowledge management system").version("0.1.0");ba.command("sparql").description("SPARQL query execution").addCommand(Pv());ba.addCommand(Mb());ba.addCommand(qb());ba.addCommand(Ub());ba.parse();
/*! Bundled license information:

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
