#!/usr/bin/env node
// exocortex-cli v0.1.0
// CLI tool for Exocortex knowledge management system - SPARQL queries, task management, and more
// License: MIT

"use strict";var jv=Object.create;var ra=Object.defineProperty;var Mv=Object.getOwnPropertyDescriptor;var Lv=Object.getOwnPropertyNames;var qv=Object.getPrototypeOf,Vv=Object.prototype.hasOwnProperty;var a=(r,e)=>ra(r,"name",{value:e,configurable:!0});var Uv=(r,e)=>()=>(r&&(e=r(r=0)),e);var y=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),Bv=(r,e)=>{for(var t in e)ra(r,t,{get:e[t],enumerable:!0})},r1=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of Lv(e))!Vv.call(r,n)&&n!==t&&ra(r,n,{get:()=>e[n],enumerable:!(i=Mv(e,n))||i.enumerable});return r};var mt=(r,e,t)=>(t=r!=null?jv(qv(r)):{},r1(e||!r||!r.__esModule?ra(t,"default",{value:r,enumerable:!0}):t,r)),Fl=r=>r1(ra({},"__esModule",{value:!0}),r);var Pl=y(()=>{var i1;(function(r){(function(e){var t=typeof globalThis=="object"?globalThis:typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:c(),i=n(r);typeof t.Reflect<"u"&&(i=n(t.Reflect,i)),e(i,t),typeof t.Reflect>"u"&&(t.Reflect=r);function n(u,f){return function(l,h){Object.defineProperty(u,l,{configurable:!0,writable:!0,value:h}),f&&f(l,h)}}a(n,"makeExporter");function s(){try{return Function("return this;")()}catch{}}a(s,"functionThis");function o(){try{return(0,eval)("(function() { return this; })()")}catch{}}a(o,"indirectEvalThis");function c(){return s()||o()}a(c,"sloppyModeThis")})(function(e,t){var i=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",s=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",u={__proto__:[]}instanceof Array,f=!c&&!u,l={create:c?function(){return Ae(Object.create(null))}:u?function(){return Ae({__proto__:null})}:function(){return Ae({})},has:f?function(_,b){return i.call(_,b)}:function(_,b){return b in _},get:f?function(_,b){return i.call(_,b)?_[b]:void 0}:function(_,b){return _[b]}},h=Object.getPrototypeOf(Function),p=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ae(),g=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:De(),v=typeof WeakMap=="function"?WeakMap:Ce(),S=n?Symbol.for("@reflect-metadata:registry"):void 0,x=ie(),F=ne(x);function D(_,b,w,O){if(j(w)){if(!ye(_))throw new TypeError;if(!_e(b))throw new TypeError;return Qe(_,b)}else{if(!ye(_))throw new TypeError;if(!B(b))throw new TypeError;if(!B(O)&&!j(O)&&!ue(O))throw new TypeError;return ue(O)&&(O=void 0),w=ce(w),Be(_,b,w,O)}}a(D,"decorate"),e("decorate",D);function U(_,b){function w(O,q){if(!B(O))throw new TypeError;if(!j(q)&&!Te(q))throw new TypeError;$(_,b,O,q)}return a(w,"decorator"),w}a(U,"metadata"),e("metadata",U);function G(_,b,w,O){if(!B(w))throw new TypeError;return j(O)||(O=ce(O)),$(_,b,w,O)}a(G,"defineMetadata"),e("defineMetadata",G);function ee(_,b,w){if(!B(b))throw new TypeError;return j(w)||(w=ce(w)),We(_,b,w)}a(ee,"hasMetadata"),e("hasMetadata",ee);function Fe(_,b,w){if(!B(b))throw new TypeError;return j(w)||(w=ce(w)),Pe(_,b,w)}a(Fe,"hasOwnMetadata"),e("hasOwnMetadata",Fe);function it(_,b,w){if(!B(b))throw new TypeError;return j(w)||(w=ce(w)),Re(_,b,w)}a(it,"getMetadata"),e("getMetadata",it);function dt(_,b,w){if(!B(b))throw new TypeError;return j(w)||(w=ce(w)),Oe(_,b,w)}a(dt,"getOwnMetadata"),e("getOwnMetadata",dt);function V(_,b){if(!B(_))throw new TypeError;return j(b)||(b=ce(b)),I(_,b)}a(V,"getMetadataKeys"),e("getMetadataKeys",V);function oe(_,b){if(!B(_))throw new TypeError;return j(b)||(b=ce(b)),Ie(_,b)}a(oe,"getOwnMetadataKeys"),e("getOwnMetadataKeys",oe);function xe(_,b,w){if(!B(b))throw new TypeError;if(j(w)||(w=ce(w)),!B(b))throw new TypeError;j(w)||(w=ce(w));var O=K(b,w,!1);return j(O)?!1:O.OrdinaryDeleteMetadata(_,b,w)}a(xe,"deleteMetadata"),e("deleteMetadata",xe);function Qe(_,b){for(var w=_.length-1;w>=0;--w){var O=_[w],q=O(b);if(!j(q)&&!ue(q)){if(!_e(q))throw new TypeError;b=q}}return b}a(Qe,"DecorateConstructor");function Be(_,b,w,O){for(var q=_.length-1;q>=0;--q){var $e=_[q],ze=$e(b,w,O);if(!j(ze)&&!ue(ze)){if(!B(ze))throw new TypeError;O=ze}}return O}a(Be,"DecorateProperty");function We(_,b,w){var O=Pe(_,b,w);if(O)return!0;var q=Z(b);return ue(q)?!1:We(_,q,w)}a(We,"OrdinaryHasMetadata");function Pe(_,b,w){var O=K(b,w,!1);return j(O)?!1:ge(O.OrdinaryHasOwnMetadata(_,b,w))}a(Pe,"OrdinaryHasOwnMetadata");function Re(_,b,w){var O=Pe(_,b,w);if(O)return Oe(_,b,w);var q=Z(b);if(!ue(q))return Re(_,q,w)}a(Re,"OrdinaryGetMetadata");function Oe(_,b,w){var O=K(b,w,!1);if(!j(O))return O.OrdinaryGetOwnMetadata(_,b,w)}a(Oe,"OrdinaryGetOwnMetadata");function $(_,b,w,O){var q=K(w,O,!0);q.OrdinaryDefineOwnMetadata(_,b,w,O)}a($,"OrdinaryDefineOwnMetadata");function I(_,b){var w=Ie(_,b),O=Z(_);if(O===null)return w;var q=I(O,b);if(q.length<=0)return w;if(w.length<=0)return q;for(var $e=new g,ze=[],me=0,N=w;me<N.length;me++){var k=N[me],M=$e.has(k);M||($e.add(k),ze.push(k))}for(var L=0,de=q;L<de.length;L++){var k=de[L],M=$e.has(k);M||($e.add(k),ze.push(k))}return ze}a(I,"OrdinaryMetadataKeys");function Ie(_,b){var w=K(_,b,!1);return w?w.OrdinaryOwnMetadataKeys(_,b):[]}a(Ie,"OrdinaryOwnMetadataKeys");function Le(_){if(_===null)return 1;switch(typeof _){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return _===null?1:6;default:return 6}}a(Le,"Type");function j(_){return _===void 0}a(j,"IsUndefined");function ue(_){return _===null}a(ue,"IsNull");function be(_){return typeof _=="symbol"}a(be,"IsSymbol");function B(_){return typeof _=="object"?_!==null:typeof _=="function"}a(B,"IsObject");function Se(_,b){switch(Le(_)){case 0:return _;case 1:return _;case 2:return _;case 3:return _;case 4:return _;case 5:return _}var w=b===3?"string":b===5?"number":"default",O=J(_,s);if(O!==void 0){var q=O.call(_,w);if(B(q))throw new TypeError;return q}return we(_,w==="default"?"number":w)}a(Se,"ToPrimitive");function we(_,b){if(b==="string"){var w=_.toString;if(le(w)){var O=w.call(_);if(!B(O))return O}var q=_.valueOf;if(le(q)){var O=q.call(_);if(!B(O))return O}}else{var q=_.valueOf;if(le(q)){var O=q.call(_);if(!B(O))return O}var $e=_.toString;if(le($e)){var O=$e.call(_);if(!B(O))return O}}throw new TypeError}a(we,"OrdinaryToPrimitive");function ge(_){return!!_}a(ge,"ToBoolean");function Ee(_){return""+_}a(Ee,"ToString");function ce(_){var b=Se(_,3);return be(b)?b:Ee(b)}a(ce,"ToPropertyKey");function ye(_){return Array.isArray?Array.isArray(_):_ instanceof Object?_ instanceof Array:Object.prototype.toString.call(_)==="[object Array]"}a(ye,"IsArray");function le(_){return typeof _=="function"}a(le,"IsCallable");function _e(_){return typeof _=="function"}a(_e,"IsConstructor");function Te(_){switch(Le(_)){case 3:return!0;case 4:return!0;default:return!1}}a(Te,"IsPropertyKey");function Y(_,b){return _===b||_!==_&&b!==b}a(Y,"SameValueZero");function J(_,b){var w=_[b];if(w!=null){if(!le(w))throw new TypeError;return w}}a(J,"GetMethod");function X(_){var b=J(_,o);if(!le(b))throw new TypeError;var w=b.call(_);if(!B(w))throw new TypeError;return w}a(X,"GetIterator");function Q(_){return _.value}a(Q,"IteratorValue");function W(_){var b=_.next();return b.done?!1:b}a(W,"IteratorStep");function te(_){var b=_.return;b&&b.call(_)}a(te,"IteratorClose");function Z(_){var b=Object.getPrototypeOf(_);if(typeof _!="function"||_===h||b!==h)return b;var w=_.prototype,O=w&&Object.getPrototypeOf(w);if(O==null||O===Object.prototype)return b;var q=O.constructor;return typeof q!="function"||q===_?b:q}a(Z,"OrdinaryGetPrototypeOf");function re(){var _;!j(S)&&typeof t.Reflect<"u"&&!(S in t.Reflect)&&typeof t.Reflect.defineMetadata=="function"&&(_=se(t.Reflect));var b,w,O,q=new v,$e={registerProvider:ze,getProvider:N,setProvider:M};return $e;function ze(L){if(!Object.isExtensible($e))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case _===L:break;case j(b):b=L;break;case b===L:break;case j(w):w=L;break;case w===L:break;default:O===void 0&&(O=new g),O.add(L);break}}function me(L,de){if(!j(b)){if(b.isProviderFor(L,de))return b;if(!j(w)){if(w.isProviderFor(L,de))return b;if(!j(O))for(var Ne=X(O);;){var ke=W(Ne);if(!ke)return;var wt=Q(ke);if(wt.isProviderFor(L,de))return te(Ne),wt}}}if(!j(_)&&_.isProviderFor(L,de))return _}function N(L,de){var Ne=q.get(L),ke;return j(Ne)||(ke=Ne.get(de)),j(ke)&&(ke=me(L,de),j(ke)||(j(Ne)&&(Ne=new p,q.set(L,Ne)),Ne.set(de,ke))),ke}function k(L){if(j(L))throw new TypeError;return b===L||w===L||!j(O)&&O.has(L)}function M(L,de,Ne){if(!k(Ne))throw new Error("Metadata provider not registered.");var ke=N(L,de);if(ke!==Ne){if(!j(ke))return!1;var wt=q.get(L);j(wt)&&(wt=new p,q.set(L,wt)),wt.set(de,Ne)}return!0}}a(re,"CreateMetadataRegistry");function ie(){var _;return!j(S)&&B(t.Reflect)&&Object.isExtensible(t.Reflect)&&(_=t.Reflect[S]),j(_)&&(_=re()),!j(S)&&B(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,S,{enumerable:!1,configurable:!1,writable:!1,value:_}),_}a(ie,"GetOrCreateMetadataRegistry");function ne(_){var b=new v,w={isProviderFor:a(function(k,M){var L=b.get(k);return j(L)?!1:L.has(M)},"isProviderFor"),OrdinaryDefineOwnMetadata:ze,OrdinaryHasOwnMetadata:q,OrdinaryGetOwnMetadata:$e,OrdinaryOwnMetadataKeys:me,OrdinaryDeleteMetadata:N};return x.registerProvider(w),w;function O(k,M,L){var de=b.get(k),Ne=!1;if(j(de)){if(!L)return;de=new p,b.set(k,de),Ne=!0}var ke=de.get(M);if(j(ke)){if(!L)return;if(ke=new p,de.set(M,ke),!_.setProvider(k,M,w))throw de.delete(M),Ne&&b.delete(k),new Error("Wrong provider for target.")}return ke}a(O,"GetOrCreateMetadataMap");function q(k,M,L){var de=O(M,L,!1);return j(de)?!1:ge(de.has(k))}a(q,"OrdinaryHasOwnMetadata");function $e(k,M,L){var de=O(M,L,!1);if(!j(de))return de.get(k)}a($e,"OrdinaryGetOwnMetadata");function ze(k,M,L,de){var Ne=O(L,de,!0);Ne.set(k,M)}a(ze,"OrdinaryDefineOwnMetadata");function me(k,M){var L=[],de=O(k,M,!1);if(j(de))return L;for(var Ne=de.keys(),ke=X(Ne),wt=0;;){var Xt=W(ke);if(!Xt)return L.length=wt,L;var ar=Q(Xt);try{L[wt]=ar}catch(Lt){try{te(ke)}finally{throw Lt}}wt++}}a(me,"OrdinaryOwnMetadataKeys");function N(k,M,L){var de=O(M,L,!1);if(j(de)||!de.delete(k))return!1;if(de.size===0){var Ne=b.get(M);j(Ne)||(Ne.delete(L),Ne.size===0&&b.delete(Ne))}return!0}a(N,"OrdinaryDeleteMetadata")}a(ne,"CreateMetadataProvider");function se(_){var b=_.defineMetadata,w=_.hasOwnMetadata,O=_.getOwnMetadata,q=_.getOwnMetadataKeys,$e=_.deleteMetadata,ze=new v,me={isProviderFor:a(function(N,k){var M=ze.get(N);return!j(M)&&M.has(k)?!0:q(N,k).length?(j(M)&&(M=new g,ze.set(N,M)),M.add(k),!0):!1},"isProviderFor"),OrdinaryDefineOwnMetadata:b,OrdinaryHasOwnMetadata:w,OrdinaryGetOwnMetadata:O,OrdinaryOwnMetadataKeys:q,OrdinaryDeleteMetadata:$e};return me}a(se,"CreateFallbackProvider");function K(_,b,w){var O=x.getProvider(_,b);if(!j(O))return O;if(w){if(x.setProvider(_,b,F))return F;throw new Error("Illegal state.")}}a(K,"GetMetadataProvider");function ae(){var _={},b=[],w=(function(){function me(N,k,M){this._index=0,this._keys=N,this._values=k,this._selector=M}return a(me,"MapIterator"),me.prototype["@@iterator"]=function(){return this},me.prototype[o]=function(){return this},me.prototype.next=function(){var N=this._index;if(N>=0&&N<this._keys.length){var k=this._selector(this._keys[N],this._values[N]);return N+1>=this._keys.length?(this._index=-1,this._keys=b,this._values=b):this._index++,{value:k,done:!1}}return{value:void 0,done:!0}},me.prototype.throw=function(N){throw this._index>=0&&(this._index=-1,this._keys=b,this._values=b),N},me.prototype.return=function(N){return this._index>=0&&(this._index=-1,this._keys=b,this._values=b),{value:N,done:!0}},me})(),O=(function(){function me(){this._keys=[],this._values=[],this._cacheKey=_,this._cacheIndex=-2}return a(me,"Map"),Object.defineProperty(me.prototype,"size",{get:a(function(){return this._keys.length},"get"),enumerable:!0,configurable:!0}),me.prototype.has=function(N){return this._find(N,!1)>=0},me.prototype.get=function(N){var k=this._find(N,!1);return k>=0?this._values[k]:void 0},me.prototype.set=function(N,k){var M=this._find(N,!0);return this._values[M]=k,this},me.prototype.delete=function(N){var k=this._find(N,!1);if(k>=0){for(var M=this._keys.length,L=k+1;L<M;L++)this._keys[L-1]=this._keys[L],this._values[L-1]=this._values[L];return this._keys.length--,this._values.length--,Y(N,this._cacheKey)&&(this._cacheKey=_,this._cacheIndex=-2),!0}return!1},me.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=_,this._cacheIndex=-2},me.prototype.keys=function(){return new w(this._keys,this._values,q)},me.prototype.values=function(){return new w(this._keys,this._values,$e)},me.prototype.entries=function(){return new w(this._keys,this._values,ze)},me.prototype["@@iterator"]=function(){return this.entries()},me.prototype[o]=function(){return this.entries()},me.prototype._find=function(N,k){if(!Y(this._cacheKey,N)){this._cacheIndex=-1;for(var M=0;M<this._keys.length;M++)if(Y(this._keys[M],N)){this._cacheIndex=M;break}}return this._cacheIndex<0&&k&&(this._cacheIndex=this._keys.length,this._keys.push(N),this._values.push(void 0)),this._cacheIndex},me})();return O;function q(me,N){return me}function $e(me,N){return N}function ze(me,N){return[me,N]}}a(ae,"CreateMapPolyfill");function De(){var _=(function(){function b(){this._map=new p}return a(b,"Set"),Object.defineProperty(b.prototype,"size",{get:a(function(){return this._map.size},"get"),enumerable:!0,configurable:!0}),b.prototype.has=function(w){return this._map.has(w)},b.prototype.add=function(w){return this._map.set(w,w),this},b.prototype.delete=function(w){return this._map.delete(w)},b.prototype.clear=function(){this._map.clear()},b.prototype.keys=function(){return this._map.keys()},b.prototype.values=function(){return this._map.keys()},b.prototype.entries=function(){return this._map.entries()},b.prototype["@@iterator"]=function(){return this.keys()},b.prototype[o]=function(){return this.keys()},b})();return _}a(De,"CreateSetPolyfill");function Ce(){var _=16,b=l.create(),w=O();return(function(){function N(){this._key=O()}return a(N,"WeakMap"),N.prototype.has=function(k){var M=q(k,!1);return M!==void 0?l.has(M,this._key):!1},N.prototype.get=function(k){var M=q(k,!1);return M!==void 0?l.get(M,this._key):void 0},N.prototype.set=function(k,M){var L=q(k,!0);return L[this._key]=M,this},N.prototype.delete=function(k){var M=q(k,!1);return M!==void 0?delete M[this._key]:!1},N.prototype.clear=function(){this._key=O()},N})();function O(){var N;do N="@@WeakMap@@"+me();while(l.has(b,N));return b[N]=!0,N}function q(N,k){if(!i.call(N,w)){if(!k)return;Object.defineProperty(N,w,{value:l.create()})}return N[w]}function $e(N,k){for(var M=0;M<k;++M)N[M]=Math.random()*255|0;return N}function ze(N){if(typeof Uint8Array=="function"){var k=new Uint8Array(N);return typeof crypto<"u"?crypto.getRandomValues(k):typeof msCrypto<"u"?msCrypto.getRandomValues(k):$e(k,N),k}return $e(new Array(N),N)}function me(){var N=ze(_);N[6]=N[6]&79|64,N[8]=N[8]&191|128;for(var k="",M=0;M<_;++M){var L=N[M];(M===4||M===6||M===8)&&(k+="-"),L<16&&(k+="0"),k+=L.toString(16).toLowerCase()}return k}}a(Ce,"CreateWeakMapPolyfill");function Ae(_){return _.__=void 0,delete _.__,_}a(Ae,"MakeDictionary")})})(i1||(i1={}))});var ia=y(Rl=>{var Po=class extends Error{static{a(this,"CommanderError")}constructor(e,t,i){super(i),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=t,this.exitCode=e,this.nestedError=void 0}},Dl=class extends Po{static{a(this,"InvalidArgumentError")}constructor(e){super(1,"commander.invalidArgument",e),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};Rl.CommanderError=Po;Rl.InvalidArgumentError=Dl});var Do=y(Nl=>{var{InvalidArgumentError:$v}=ia(),Il=class{static{a(this,"Argument")}constructor(e,t){switch(this.description=t||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,e[0]){case"<":this.required=!0,this._name=e.slice(1,-1);break;case"[":this.required=!1,this._name=e.slice(1,-1);break;default:this.required=!0,this._name=e;break}this._name.endsWith("...")&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_collectValue(e,t){return t===this.defaultValue||!Array.isArray(t)?[e]:(t.push(e),t)}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}argParser(e){return this.parseArg=e,this}choices(e){return this.argChoices=e.slice(),this.parseArg=(t,i)=>{if(!this.argChoices.includes(t))throw new $v(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._collectValue(t,i):t},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}};function Gv(r){let e=r.name()+(r.variadic===!0?"...":"");return r.required?"<"+e+">":"["+e+"]"}a(Gv,"humanReadableArgName");Nl.Argument=Il;Nl.humanReadableArgName=Gv});var Ml=y(jl=>{var{humanReadableArgName:Wv}=Do(),kl=class{static{a(this,"Help")}constructor(){this.helpWidth=void 0,this.minWidthToWrap=40,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}prepareContext(e){this.helpWidth=this.helpWidth??e.helpWidth??80}visibleCommands(e){let t=e.commands.filter(n=>!n._hidden),i=e._getHelpCommand();return i&&!i._hidden&&t.push(i),this.sortSubcommands&&t.sort((n,s)=>n.name().localeCompare(s.name())),t}compareOptions(e,t){let i=a(n=>n.short?n.short.replace(/^-/,""):n.long.replace(/^--/,""),"getSortKey");return i(e).localeCompare(i(t))}visibleOptions(e){let t=e.options.filter(n=>!n.hidden),i=e._getHelpOption();if(i&&!i.hidden){let n=i.short&&e._findOption(i.short),s=i.long&&e._findOption(i.long);!n&&!s?t.push(i):i.long&&!s?t.push(e.createOption(i.long,i.description)):i.short&&!n&&t.push(e.createOption(i.short,i.description))}return this.sortOptions&&t.sort(this.compareOptions),t}visibleGlobalOptions(e){if(!this.showGlobalOptions)return[];let t=[];for(let i=e.parent;i;i=i.parent){let n=i.options.filter(s=>!s.hidden);t.push(...n)}return this.sortOptions&&t.sort(this.compareOptions),t}visibleArguments(e){return e._argsDescription&&e.registeredArguments.forEach(t=>{t.description=t.description||e._argsDescription[t.name()]||""}),e.registeredArguments.find(t=>t.description)?e.registeredArguments:[]}subcommandTerm(e){let t=e.registeredArguments.map(i=>Wv(i)).join(" ");return e._name+(e._aliases[0]?"|"+e._aliases[0]:"")+(e.options.length?" [options]":"")+(t?" "+t:"")}optionTerm(e){return e.flags}argumentTerm(e){return e.name()}longestSubcommandTermLength(e,t){return t.visibleCommands(e).reduce((i,n)=>Math.max(i,this.displayWidth(t.styleSubcommandTerm(t.subcommandTerm(n)))),0)}longestOptionTermLength(e,t){return t.visibleOptions(e).reduce((i,n)=>Math.max(i,this.displayWidth(t.styleOptionTerm(t.optionTerm(n)))),0)}longestGlobalOptionTermLength(e,t){return t.visibleGlobalOptions(e).reduce((i,n)=>Math.max(i,this.displayWidth(t.styleOptionTerm(t.optionTerm(n)))),0)}longestArgumentTermLength(e,t){return t.visibleArguments(e).reduce((i,n)=>Math.max(i,this.displayWidth(t.styleArgumentTerm(t.argumentTerm(n)))),0)}commandUsage(e){let t=e._name;e._aliases[0]&&(t=t+"|"+e._aliases[0]);let i="";for(let n=e.parent;n;n=n.parent)i=n.name()+" "+i;return i+t+" "+e.usage()}commandDescription(e){return e.description()}subcommandDescription(e){return e.summary()||e.description()}optionDescription(e){let t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map(i=>JSON.stringify(i)).join(", ")}`),e.defaultValue!==void 0&&(e.required||e.optional||e.isBoolean()&&typeof e.defaultValue=="boolean")&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),e.presetArg!==void 0&&e.optional&&t.push(`preset: ${JSON.stringify(e.presetArg)}`),e.envVar!==void 0&&t.push(`env: ${e.envVar}`),t.length>0){let i=`(${t.join(", ")})`;return e.description?`${e.description} ${i}`:i}return e.description}argumentDescription(e){let t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map(i=>JSON.stringify(i)).join(", ")}`),e.defaultValue!==void 0&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),t.length>0){let i=`(${t.join(", ")})`;return e.description?`${e.description} ${i}`:i}return e.description}formatItemList(e,t,i){return t.length===0?[]:[i.styleTitle(e),...t,""]}groupItems(e,t,i){let n=new Map;return e.forEach(s=>{let o=i(s);n.has(o)||n.set(o,[])}),t.forEach(s=>{let o=i(s);n.has(o)||n.set(o,[]),n.get(o).push(s)}),n}formatHelp(e,t){let i=t.padWidth(e,t),n=t.helpWidth??80;function s(h,p){return t.formatItem(h,i,p,t)}a(s,"callFormatItem");let o=[`${t.styleTitle("Usage:")} ${t.styleUsage(t.commandUsage(e))}`,""],c=t.commandDescription(e);c.length>0&&(o=o.concat([t.boxWrap(t.styleCommandDescription(c),n),""]));let u=t.visibleArguments(e).map(h=>s(t.styleArgumentTerm(t.argumentTerm(h)),t.styleArgumentDescription(t.argumentDescription(h))));if(o=o.concat(this.formatItemList("Arguments:",u,t)),this.groupItems(e.options,t.visibleOptions(e),h=>h.helpGroupHeading??"Options:").forEach((h,p)=>{let g=h.map(v=>s(t.styleOptionTerm(t.optionTerm(v)),t.styleOptionDescription(t.optionDescription(v))));o=o.concat(this.formatItemList(p,g,t))}),t.showGlobalOptions){let h=t.visibleGlobalOptions(e).map(p=>s(t.styleOptionTerm(t.optionTerm(p)),t.styleOptionDescription(t.optionDescription(p))));o=o.concat(this.formatItemList("Global Options:",h,t))}return this.groupItems(e.commands,t.visibleCommands(e),h=>h.helpGroup()||"Commands:").forEach((h,p)=>{let g=h.map(v=>s(t.styleSubcommandTerm(t.subcommandTerm(v)),t.styleSubcommandDescription(t.subcommandDescription(v))));o=o.concat(this.formatItemList(p,g,t))}),o.join(`
`)}displayWidth(e){return n1(e).length}styleTitle(e){return e}styleUsage(e){return e.split(" ").map(t=>t==="[options]"?this.styleOptionText(t):t==="[command]"?this.styleSubcommandText(t):t[0]==="["||t[0]==="<"?this.styleArgumentText(t):this.styleCommandText(t)).join(" ")}styleCommandDescription(e){return this.styleDescriptionText(e)}styleOptionDescription(e){return this.styleDescriptionText(e)}styleSubcommandDescription(e){return this.styleDescriptionText(e)}styleArgumentDescription(e){return this.styleDescriptionText(e)}styleDescriptionText(e){return e}styleOptionTerm(e){return this.styleOptionText(e)}styleSubcommandTerm(e){return e.split(" ").map(t=>t==="[options]"?this.styleOptionText(t):t[0]==="["||t[0]==="<"?this.styleArgumentText(t):this.styleSubcommandText(t)).join(" ")}styleArgumentTerm(e){return this.styleArgumentText(e)}styleOptionText(e){return e}styleArgumentText(e){return e}styleSubcommandText(e){return e}styleCommandText(e){return e}padWidth(e,t){return Math.max(t.longestOptionTermLength(e,t),t.longestGlobalOptionTermLength(e,t),t.longestSubcommandTermLength(e,t),t.longestArgumentTermLength(e,t))}preformatted(e){return/\n[^\S\r\n]/.test(e)}formatItem(e,t,i,n){let o=" ".repeat(2);if(!i)return o+e;let c=e.padEnd(t+e.length-n.displayWidth(e)),u=2,l=(this.helpWidth??80)-t-u-2,h;return l<this.minWidthToWrap||n.preformatted(i)?h=i:h=n.boxWrap(i,l).replace(/\n/g,`
`+" ".repeat(t+u)),o+c+" ".repeat(u)+h.replace(/\n/g,`
${o}`)}boxWrap(e,t){if(t<this.minWidthToWrap)return e;let i=e.split(/\r\n|\n/),n=/[\s]*[^\s]+/g,s=[];return i.forEach(o=>{let c=o.match(n);if(c===null){s.push("");return}let u=[c.shift()],f=this.displayWidth(u[0]);c.forEach(l=>{let h=this.displayWidth(l);if(f+h<=t){u.push(l),f+=h;return}s.push(u.join(""));let p=l.trimStart();u=[p],f=this.displayWidth(p)}),s.push(u.join(""))}),s.join(`
`)}};function n1(r){let e=/\x1b\[\d*(;\d*)*m/g;return r.replace(e,"")}a(n1,"stripColor");jl.Help=kl;jl.stripColor=n1});var Ul=y(Vl=>{var{InvalidArgumentError:Hv}=ia(),Ll=class{static{a(this,"Option")}constructor(e,t){this.flags=e,this.description=t||"",this.required=e.includes("<"),this.optional=e.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(e),this.mandatory=!1;let i=zv(e);this.short=i.shortFlag,this.long=i.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0,this.helpGroupHeading=void 0}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}preset(e){return this.presetArg=e,this}conflicts(e){return this.conflictsWith=this.conflictsWith.concat(e),this}implies(e){let t=e;return typeof e=="string"&&(t={[e]:!0}),this.implied=Object.assign(this.implied||{},t),this}env(e){return this.envVar=e,this}argParser(e){return this.parseArg=e,this}makeOptionMandatory(e=!0){return this.mandatory=!!e,this}hideHelp(e=!0){return this.hidden=!!e,this}_collectValue(e,t){return t===this.defaultValue||!Array.isArray(t)?[e]:(t.push(e),t)}choices(e){return this.argChoices=e.slice(),this.parseArg=(t,i)=>{if(!this.argChoices.includes(t))throw new Hv(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._collectValue(t,i):t},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.negate?s1(this.name().replace(/^no-/,"")):s1(this.name())}helpGroup(e){return this.helpGroupHeading=e,this}is(e){return this.short===e||this.long===e}isBoolean(){return!this.required&&!this.optional&&!this.negate}},ql=class{static{a(this,"DualOptions")}constructor(e){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,e.forEach(t=>{t.negate?this.negativeOptions.set(t.attributeName(),t):this.positiveOptions.set(t.attributeName(),t)}),this.negativeOptions.forEach((t,i)=>{this.positiveOptions.has(i)&&this.dualOptions.add(i)})}valueFromOption(e,t){let i=t.attributeName();if(!this.dualOptions.has(i))return!0;let n=this.negativeOptions.get(i).presetArg,s=n!==void 0?n:!1;return t.negate===(s===e)}};function s1(r){return r.split("-").reduce((e,t)=>e+t[0].toUpperCase()+t.slice(1))}a(s1,"camelcase");function zv(r){let e,t,i=/^-[^-]$/,n=/^--[^-]/,s=r.split(/[ |,]+/).concat("guard");if(i.test(s[0])&&(e=s.shift()),n.test(s[0])&&(t=s.shift()),!e&&i.test(s[0])&&(e=s.shift()),!e&&n.test(s[0])&&(e=t,t=s.shift()),s[0].startsWith("-")){let o=s[0],c=`option creation failed due to '${o}' in option flags '${r}'`;throw/^-[^-][^-]/.test(o)?new Error(`${c}
- a short flag is a single dash and a single character
  - either use a single dash and a single character (for a short flag)
  - or use a double dash for a long option (and can have two, like '--ws, --workspace')`):i.test(o)?new Error(`${c}
- too many short flags`):n.test(o)?new Error(`${c}
- too many long flags`):new Error(`${c}
- unrecognised flag format`)}if(e===void 0&&t===void 0)throw new Error(`option creation failed due to no flags found in '${r}'.`);return{shortFlag:e,longFlag:t}}a(zv,"splitOptionFlags");Vl.Option=Ll;Vl.DualOptions=ql});var o1=y(a1=>{function Kv(r,e){if(Math.abs(r.length-e.length)>3)return Math.max(r.length,e.length);let t=[];for(let i=0;i<=r.length;i++)t[i]=[i];for(let i=0;i<=e.length;i++)t[0][i]=i;for(let i=1;i<=e.length;i++)for(let n=1;n<=r.length;n++){let s=1;r[n-1]===e[i-1]?s=0:s=1,t[n][i]=Math.min(t[n-1][i]+1,t[n][i-1]+1,t[n-1][i-1]+s),n>1&&i>1&&r[n-1]===e[i-2]&&r[n-2]===e[i-1]&&(t[n][i]=Math.min(t[n][i],t[n-2][i-2]+1))}return t[r.length][e.length]}a(Kv,"editDistance");function Yv(r,e){if(!e||e.length===0)return"";e=Array.from(new Set(e));let t=r.startsWith("--");t&&(r=r.slice(2),e=e.map(o=>o.slice(2)));let i=[],n=3,s=.4;return e.forEach(o=>{if(o.length<=1)return;let c=Kv(r,o),u=Math.max(r.length,o.length);(u-c)/u>s&&(c<n?(n=c,i=[o]):c===n&&i.push(o))}),i.sort((o,c)=>o.localeCompare(c)),t&&(i=i.map(o=>`--${o}`)),i.length>1?`
(Did you mean one of ${i.join(", ")}?)`:i.length===1?`
(Did you mean ${i[0]}?)`:""}a(Yv,"suggestSimilar");a1.suggestSimilar=Yv});var f1=y(Hl=>{var Qv=require("node:events").EventEmitter,Bl=require("node:child_process"),Ci=require("node:path"),Ro=require("node:fs"),Me=require("node:process"),{Argument:Jv,humanReadableArgName:Xv}=Do(),{CommanderError:$l}=ia(),{Help:Zv,stripColor:eb}=Ml(),{Option:c1,DualOptions:tb}=Ul(),{suggestSimilar:u1}=o1(),Gl=class r extends Qv{static{a(this,"Command")}constructor(e){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!1,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=e||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._savedState=null,this._outputConfiguration={writeOut:a(t=>Me.stdout.write(t),"writeOut"),writeErr:a(t=>Me.stderr.write(t),"writeErr"),outputError:a((t,i)=>i(t),"outputError"),getOutHelpWidth:a(()=>Me.stdout.isTTY?Me.stdout.columns:void 0,"getOutHelpWidth"),getErrHelpWidth:a(()=>Me.stderr.isTTY?Me.stderr.columns:void 0,"getErrHelpWidth"),getOutHasColors:a(()=>Wl()??(Me.stdout.isTTY&&Me.stdout.hasColors?.()),"getOutHasColors"),getErrHasColors:a(()=>Wl()??(Me.stderr.isTTY&&Me.stderr.hasColors?.()),"getErrHasColors"),stripColor:a(t=>eb(t),"stripColor")},this._hidden=!1,this._helpOption=void 0,this._addImplicitHelpCommand=void 0,this._helpCommand=void 0,this._helpConfiguration={},this._helpGroupHeading=void 0,this._defaultCommandGroup=void 0,this._defaultOptionGroup=void 0}copyInheritedSettings(e){return this._outputConfiguration=e._outputConfiguration,this._helpOption=e._helpOption,this._helpCommand=e._helpCommand,this._helpConfiguration=e._helpConfiguration,this._exitCallback=e._exitCallback,this._storeOptionsAsProperties=e._storeOptionsAsProperties,this._combineFlagAndOptionalValue=e._combineFlagAndOptionalValue,this._allowExcessArguments=e._allowExcessArguments,this._enablePositionalOptions=e._enablePositionalOptions,this._showHelpAfterError=e._showHelpAfterError,this._showSuggestionAfterError=e._showSuggestionAfterError,this}_getCommandAndAncestors(){let e=[];for(let t=this;t;t=t.parent)e.push(t);return e}command(e,t,i){let n=t,s=i;typeof n=="object"&&n!==null&&(s=n,n=null),s=s||{};let[,o,c]=e.match(/([^ ]+) *(.*)/),u=this.createCommand(o);return n&&(u.description(n),u._executableHandler=!0),s.isDefault&&(this._defaultCommandName=u._name),u._hidden=!!(s.noHelp||s.hidden),u._executableFile=s.executableFile||null,c&&u.arguments(c),this._registerCommand(u),u.parent=this,u.copyInheritedSettings(this),n?this:u}createCommand(e){return new r(e)}createHelp(){return Object.assign(new Zv,this.configureHelp())}configureHelp(e){return e===void 0?this._helpConfiguration:(this._helpConfiguration=e,this)}configureOutput(e){return e===void 0?this._outputConfiguration:(this._outputConfiguration={...this._outputConfiguration,...e},this)}showHelpAfterError(e=!0){return typeof e!="string"&&(e=!!e),this._showHelpAfterError=e,this}showSuggestionAfterError(e=!0){return this._showSuggestionAfterError=!!e,this}addCommand(e,t){if(!e._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);return t=t||{},t.isDefault&&(this._defaultCommandName=e._name),(t.noHelp||t.hidden)&&(e._hidden=!0),this._registerCommand(e),e.parent=this,e._checkForBrokenPassThrough(),this}createArgument(e,t){return new Jv(e,t)}argument(e,t,i,n){let s=this.createArgument(e,t);return typeof i=="function"?s.default(n).argParser(i):s.default(i),this.addArgument(s),this}arguments(e){return e.trim().split(/ +/).forEach(t=>{this.argument(t)}),this}addArgument(e){let t=this.registeredArguments.slice(-1)[0];if(t?.variadic)throw new Error(`only the last argument can be variadic '${t.name()}'`);if(e.required&&e.defaultValue!==void 0&&e.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${e.name()}'`);return this.registeredArguments.push(e),this}helpCommand(e,t){if(typeof e=="boolean")return this._addImplicitHelpCommand=e,e&&this._defaultCommandGroup&&this._initCommandGroup(this._getHelpCommand()),this;let i=e??"help [command]",[,n,s]=i.match(/([^ ]+) *(.*)/),o=t??"display help for command",c=this.createCommand(n);return c.helpOption(!1),s&&c.arguments(s),o&&c.description(o),this._addImplicitHelpCommand=!0,this._helpCommand=c,(e||t)&&this._initCommandGroup(c),this}addHelpCommand(e,t){return typeof e!="object"?(this.helpCommand(e,t),this):(this._addImplicitHelpCommand=!0,this._helpCommand=e,this._initCommandGroup(e),this)}_getHelpCommand(){return this._addImplicitHelpCommand??(this.commands.length&&!this._actionHandler&&!this._findCommand("help"))?(this._helpCommand===void 0&&this.helpCommand(void 0,void 0),this._helpCommand):null}hook(e,t){let i=["preSubcommand","preAction","postAction"];if(!i.includes(e))throw new Error(`Unexpected value for event passed to hook : '${e}'.
Expecting one of '${i.join("', '")}'`);return this._lifeCycleHooks[e]?this._lifeCycleHooks[e].push(t):this._lifeCycleHooks[e]=[t],this}exitOverride(e){return e?this._exitCallback=e:this._exitCallback=t=>{if(t.code!=="commander.executeSubCommandAsync")throw t},this}_exit(e,t,i){this._exitCallback&&this._exitCallback(new $l(e,t,i)),Me.exit(e)}action(e){let t=a(i=>{let n=this.registeredArguments.length,s=i.slice(0,n);return this._storeOptionsAsProperties?s[n]=this:s[n]=this.opts(),s.push(this),e.apply(this,s)},"listener");return this._actionHandler=t,this}createOption(e,t){return new c1(e,t)}_callParseArg(e,t,i,n){try{return e.parseArg(t,i)}catch(s){if(s.code==="commander.invalidArgument"){let o=`${n} ${s.message}`;this.error(o,{exitCode:s.exitCode,code:s.code})}throw s}}_registerOption(e){let t=e.short&&this._findOption(e.short)||e.long&&this._findOption(e.long);if(t){let i=e.long&&this._findOption(e.long)?e.long:e.short;throw new Error(`Cannot add option '${e.flags}'${this._name&&` to command '${this._name}'`} due to conflicting flag '${i}'
-  already used by option '${t.flags}'`)}this._initOptionGroup(e),this.options.push(e)}_registerCommand(e){let t=a(n=>[n.name()].concat(n.aliases()),"knownBy"),i=t(e).find(n=>this._findCommand(n));if(i){let n=t(this._findCommand(i)).join("|"),s=t(e).join("|");throw new Error(`cannot add command '${s}' as already have command '${n}'`)}this._initCommandGroup(e),this.commands.push(e)}addOption(e){this._registerOption(e);let t=e.name(),i=e.attributeName();if(e.negate){let s=e.long.replace(/^--no-/,"--");this._findOption(s)||this.setOptionValueWithSource(i,e.defaultValue===void 0?!0:e.defaultValue,"default")}else e.defaultValue!==void 0&&this.setOptionValueWithSource(i,e.defaultValue,"default");let n=a((s,o,c)=>{s==null&&e.presetArg!==void 0&&(s=e.presetArg);let u=this.getOptionValue(i);s!==null&&e.parseArg?s=this._callParseArg(e,s,u,o):s!==null&&e.variadic&&(s=e._collectValue(s,u)),s==null&&(e.negate?s=!1:e.isBoolean()||e.optional?s=!0:s=""),this.setOptionValueWithSource(i,s,c)},"handleOptionValue");return this.on("option:"+t,s=>{let o=`error: option '${e.flags}' argument '${s}' is invalid.`;n(s,o,"cli")}),e.envVar&&this.on("optionEnv:"+t,s=>{let o=`error: option '${e.flags}' value '${s}' from env '${e.envVar}' is invalid.`;n(s,o,"env")}),this}_optionEx(e,t,i,n,s){if(typeof t=="object"&&t instanceof c1)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");let o=this.createOption(t,i);if(o.makeOptionMandatory(!!e.mandatory),typeof n=="function")o.default(s).argParser(n);else if(n instanceof RegExp){let c=n;n=a((u,f)=>{let l=c.exec(u);return l?l[0]:f},"fn"),o.default(s).argParser(n)}else o.default(n);return this.addOption(o)}option(e,t,i,n){return this._optionEx({},e,t,i,n)}requiredOption(e,t,i,n){return this._optionEx({mandatory:!0},e,t,i,n)}combineFlagAndOptionalValue(e=!0){return this._combineFlagAndOptionalValue=!!e,this}allowUnknownOption(e=!0){return this._allowUnknownOption=!!e,this}allowExcessArguments(e=!0){return this._allowExcessArguments=!!e,this}enablePositionalOptions(e=!0){return this._enablePositionalOptions=!!e,this}passThroughOptions(e=!0){return this._passThroughOptions=!!e,this._checkForBrokenPassThrough(),this}_checkForBrokenPassThrough(){if(this.parent&&this._passThroughOptions&&!this.parent._enablePositionalOptions)throw new Error(`passThroughOptions cannot be used for '${this._name}' without turning on enablePositionalOptions for parent command(s)`)}storeOptionsAsProperties(e=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");if(Object.keys(this._optionValues).length)throw new Error("call .storeOptionsAsProperties() before setting option values");return this._storeOptionsAsProperties=!!e,this}getOptionValue(e){return this._storeOptionsAsProperties?this[e]:this._optionValues[e]}setOptionValue(e,t){return this.setOptionValueWithSource(e,t,void 0)}setOptionValueWithSource(e,t,i){return this._storeOptionsAsProperties?this[e]=t:this._optionValues[e]=t,this._optionValueSources[e]=i,this}getOptionValueSource(e){return this._optionValueSources[e]}getOptionValueSourceWithGlobals(e){let t;return this._getCommandAndAncestors().forEach(i=>{i.getOptionValueSource(e)!==void 0&&(t=i.getOptionValueSource(e))}),t}_prepareUserArgs(e,t){if(e!==void 0&&!Array.isArray(e))throw new Error("first parameter to parse must be array or undefined");if(t=t||{},e===void 0&&t.from===void 0){Me.versions?.electron&&(t.from="electron");let n=Me.execArgv??[];(n.includes("-e")||n.includes("--eval")||n.includes("-p")||n.includes("--print"))&&(t.from="eval")}e===void 0&&(e=Me.argv),this.rawArgs=e.slice();let i;switch(t.from){case void 0:case"node":this._scriptPath=e[1],i=e.slice(2);break;case"electron":Me.defaultApp?(this._scriptPath=e[1],i=e.slice(2)):i=e.slice(1);break;case"user":i=e.slice(0);break;case"eval":i=e.slice(1);break;default:throw new Error(`unexpected parse option { from: '${t.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",i}parse(e,t){this._prepareForParse();let i=this._prepareUserArgs(e,t);return this._parseCommand([],i),this}async parseAsync(e,t){this._prepareForParse();let i=this._prepareUserArgs(e,t);return await this._parseCommand([],i),this}_prepareForParse(){this._savedState===null?this.saveStateBeforeParse():this.restoreStateBeforeParse()}saveStateBeforeParse(){this._savedState={_name:this._name,_optionValues:{...this._optionValues},_optionValueSources:{...this._optionValueSources}}}restoreStateBeforeParse(){if(this._storeOptionsAsProperties)throw new Error(`Can not call parse again when storeOptionsAsProperties is true.
- either make a new Command for each call to parse, or stop storing options as properties`);this._name=this._savedState._name,this._scriptPath=null,this.rawArgs=[],this._optionValues={...this._savedState._optionValues},this._optionValueSources={...this._savedState._optionValueSources},this.args=[],this.processedArgs=[]}_checkForMissingExecutable(e,t,i){if(Ro.existsSync(e))return;let n=t?`searched for local subcommand relative to directory '${t}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",s=`'${e}' does not exist
 - if '${i}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${n}`;throw new Error(s)}_executeSubCommand(e,t){t=t.slice();let i=!1,n=[".js",".ts",".tsx",".mjs",".cjs"];function s(l,h){let p=Ci.resolve(l,h);if(Ro.existsSync(p))return p;if(n.includes(Ci.extname(h)))return;let g=n.find(v=>Ro.existsSync(`${p}${v}`));if(g)return`${p}${g}`}a(s,"findFile"),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let o=e._executableFile||`${this._name}-${e._name}`,c=this._executableDir||"";if(this._scriptPath){let l;try{l=Ro.realpathSync(this._scriptPath)}catch{l=this._scriptPath}c=Ci.resolve(Ci.dirname(l),c)}if(c){let l=s(c,o);if(!l&&!e._executableFile&&this._scriptPath){let h=Ci.basename(this._scriptPath,Ci.extname(this._scriptPath));h!==this._name&&(l=s(c,`${h}-${e._name}`))}o=l||o}i=n.includes(Ci.extname(o));let u;Me.platform!=="win32"?i?(t.unshift(o),t=l1(Me.execArgv).concat(t),u=Bl.spawn(Me.argv[0],t,{stdio:"inherit"})):u=Bl.spawn(o,t,{stdio:"inherit"}):(this._checkForMissingExecutable(o,c,e._name),t.unshift(o),t=l1(Me.execArgv).concat(t),u=Bl.spawn(Me.execPath,t,{stdio:"inherit"})),u.killed||["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach(h=>{Me.on(h,()=>{u.killed===!1&&u.exitCode===null&&u.kill(h)})});let f=this._exitCallback;u.on("close",l=>{l=l??1,f?f(new $l(l,"commander.executeSubCommandAsync","(close)")):Me.exit(l)}),u.on("error",l=>{if(l.code==="ENOENT")this._checkForMissingExecutable(o,c,e._name);else if(l.code==="EACCES")throw new Error(`'${o}' not executable`);if(!f)Me.exit(1);else{let h=new $l(1,"commander.executeSubCommandAsync","(error)");h.nestedError=l,f(h)}}),this.runningCommand=u}_dispatchSubcommand(e,t,i){let n=this._findCommand(e);n||this.help({error:!0}),n._prepareForParse();let s;return s=this._chainOrCallSubCommandHook(s,n,"preSubcommand"),s=this._chainOrCall(s,()=>{if(n._executableHandler)this._executeSubCommand(n,t.concat(i));else return n._parseCommand(t,i)}),s}_dispatchHelpCommand(e){e||this.help();let t=this._findCommand(e);return t&&!t._executableHandler&&t.help(),this._dispatchSubcommand(e,[],[this._getHelpOption()?.long??this._getHelpOption()?.short??"--help"])}_checkNumberOfArguments(){this.registeredArguments.forEach((e,t)=>{e.required&&this.args[t]==null&&this.missingArgument(e.name())}),!(this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic)&&this.args.length>this.registeredArguments.length&&this._excessArguments(this.args)}_processArguments(){let e=a((i,n,s)=>{let o=n;if(n!==null&&i.parseArg){let c=`error: command-argument value '${n}' is invalid for argument '${i.name()}'.`;o=this._callParseArg(i,n,s,c)}return o},"myParseArg");this._checkNumberOfArguments();let t=[];this.registeredArguments.forEach((i,n)=>{let s=i.defaultValue;i.variadic?n<this.args.length?(s=this.args.slice(n),i.parseArg&&(s=s.reduce((o,c)=>e(i,c,o),i.defaultValue))):s===void 0&&(s=[]):n<this.args.length&&(s=this.args[n],i.parseArg&&(s=e(i,s,i.defaultValue))),t[n]=s}),this.processedArgs=t}_chainOrCall(e,t){return e?.then&&typeof e.then=="function"?e.then(()=>t()):t()}_chainOrCallHooks(e,t){let i=e,n=[];return this._getCommandAndAncestors().reverse().filter(s=>s._lifeCycleHooks[t]!==void 0).forEach(s=>{s._lifeCycleHooks[t].forEach(o=>{n.push({hookedCommand:s,callback:o})})}),t==="postAction"&&n.reverse(),n.forEach(s=>{i=this._chainOrCall(i,()=>s.callback(s.hookedCommand,this))}),i}_chainOrCallSubCommandHook(e,t,i){let n=e;return this._lifeCycleHooks[i]!==void 0&&this._lifeCycleHooks[i].forEach(s=>{n=this._chainOrCall(n,()=>s(this,t))}),n}_parseCommand(e,t){let i=this.parseOptions(t);if(this._parseOptionsEnv(),this._parseOptionsImplied(),e=e.concat(i.operands),t=i.unknown,this.args=e.concat(t),e&&this._findCommand(e[0]))return this._dispatchSubcommand(e[0],e.slice(1),t);if(this._getHelpCommand()&&e[0]===this._getHelpCommand().name())return this._dispatchHelpCommand(e[1]);if(this._defaultCommandName)return this._outputHelpIfRequested(t),this._dispatchSubcommand(this._defaultCommandName,e,t);this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName&&this.help({error:!0}),this._outputHelpIfRequested(i.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let n=a(()=>{i.unknown.length>0&&this.unknownOption(i.unknown[0])},"checkForUnknownOptions"),s=`command:${this.name()}`;if(this._actionHandler){n(),this._processArguments();let o;return o=this._chainOrCallHooks(o,"preAction"),o=this._chainOrCall(o,()=>this._actionHandler(this.processedArgs)),this.parent&&(o=this._chainOrCall(o,()=>{this.parent.emit(s,e,t)})),o=this._chainOrCallHooks(o,"postAction"),o}if(this.parent?.listenerCount(s))n(),this._processArguments(),this.parent.emit(s,e,t);else if(e.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",e,t);this.listenerCount("command:*")?this.emit("command:*",e,t):this.commands.length?this.unknownCommand():(n(),this._processArguments())}else this.commands.length?(n(),this.help({error:!0})):(n(),this._processArguments())}_findCommand(e){if(e)return this.commands.find(t=>t._name===e||t._aliases.includes(e))}_findOption(e){return this.options.find(t=>t.is(e))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach(e=>{e.options.forEach(t=>{t.mandatory&&e.getOptionValue(t.attributeName())===void 0&&e.missingMandatoryOptionValue(t)})})}_checkForConflictingLocalOptions(){let e=this.options.filter(i=>{let n=i.attributeName();return this.getOptionValue(n)===void 0?!1:this.getOptionValueSource(n)!=="default"});e.filter(i=>i.conflictsWith.length>0).forEach(i=>{let n=e.find(s=>i.conflictsWith.includes(s.attributeName()));n&&this._conflictingOption(i,n)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach(e=>{e._checkForConflictingLocalOptions()})}parseOptions(e){let t=[],i=[],n=t;function s(l){return l.length>1&&l[0]==="-"}a(s,"maybeOption");let o=a(l=>/^-(\d+|\d*\.\d+)(e[+-]?\d+)?$/.test(l)?!this._getCommandAndAncestors().some(h=>h.options.map(p=>p.short).some(p=>/^-\d$/.test(p))):!1,"negativeNumberArg"),c=null,u=null,f=0;for(;f<e.length||u;){let l=u??e[f++];if(u=null,l==="--"){n===i&&n.push(l),n.push(...e.slice(f));break}if(c&&(!s(l)||o(l))){this.emit(`option:${c.name()}`,l);continue}if(c=null,s(l)){let h=this._findOption(l);if(h){if(h.required){let p=e[f++];p===void 0&&this.optionMissingArgument(h),this.emit(`option:${h.name()}`,p)}else if(h.optional){let p=null;f<e.length&&(!s(e[f])||o(e[f]))&&(p=e[f++]),this.emit(`option:${h.name()}`,p)}else this.emit(`option:${h.name()}`);c=h.variadic?h:null;continue}}if(l.length>2&&l[0]==="-"&&l[1]!=="-"){let h=this._findOption(`-${l[1]}`);if(h){h.required||h.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${h.name()}`,l.slice(2)):(this.emit(`option:${h.name()}`),u=`-${l.slice(2)}`);continue}}if(/^--[^=]+=/.test(l)){let h=l.indexOf("="),p=this._findOption(l.slice(0,h));if(p&&(p.required||p.optional)){this.emit(`option:${p.name()}`,l.slice(h+1));continue}}if(n===t&&s(l)&&!(this.commands.length===0&&o(l))&&(n=i),(this._enablePositionalOptions||this._passThroughOptions)&&t.length===0&&i.length===0){if(this._findCommand(l)){t.push(l),i.push(...e.slice(f));break}else if(this._getHelpCommand()&&l===this._getHelpCommand().name()){t.push(l,...e.slice(f));break}else if(this._defaultCommandName){i.push(l,...e.slice(f));break}}if(this._passThroughOptions){n.push(l,...e.slice(f));break}n.push(l)}return{operands:t,unknown:i}}opts(){if(this._storeOptionsAsProperties){let e={},t=this.options.length;for(let i=0;i<t;i++){let n=this.options[i].attributeName();e[n]=n===this._versionOptionName?this._version:this[n]}return e}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((e,t)=>Object.assign(e,t.opts()),{})}error(e,t){this._outputConfiguration.outputError(`${e}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError=="string"?this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`):this._showHelpAfterError&&(this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0}));let i=t||{},n=i.exitCode||1,s=i.code||"commander.error";this._exit(n,s,e)}_parseOptionsEnv(){this.options.forEach(e=>{if(e.envVar&&e.envVar in Me.env){let t=e.attributeName();(this.getOptionValue(t)===void 0||["default","config","env"].includes(this.getOptionValueSource(t)))&&(e.required||e.optional?this.emit(`optionEnv:${e.name()}`,Me.env[e.envVar]):this.emit(`optionEnv:${e.name()}`))}})}_parseOptionsImplied(){let e=new tb(this.options),t=a(i=>this.getOptionValue(i)!==void 0&&!["default","implied"].includes(this.getOptionValueSource(i)),"hasCustomOptionValue");this.options.filter(i=>i.implied!==void 0&&t(i.attributeName())&&e.valueFromOption(this.getOptionValue(i.attributeName()),i)).forEach(i=>{Object.keys(i.implied).filter(n=>!t(n)).forEach(n=>{this.setOptionValueWithSource(n,i.implied[n],"implied")})})}missingArgument(e){let t=`error: missing required argument '${e}'`;this.error(t,{code:"commander.missingArgument"})}optionMissingArgument(e){let t=`error: option '${e.flags}' argument missing`;this.error(t,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(e){let t=`error: required option '${e.flags}' not specified`;this.error(t,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(e,t){let i=a(o=>{let c=o.attributeName(),u=this.getOptionValue(c),f=this.options.find(h=>h.negate&&c===h.attributeName()),l=this.options.find(h=>!h.negate&&c===h.attributeName());return f&&(f.presetArg===void 0&&u===!1||f.presetArg!==void 0&&u===f.presetArg)?f:l||o},"findBestOptionFromValue"),n=a(o=>{let c=i(o),u=c.attributeName();return this.getOptionValueSource(u)==="env"?`environment variable '${c.envVar}'`:`option '${c.flags}'`},"getErrorMessage"),s=`error: ${n(e)} cannot be used with ${n(t)}`;this.error(s,{code:"commander.conflictingOption"})}unknownOption(e){if(this._allowUnknownOption)return;let t="";if(e.startsWith("--")&&this._showSuggestionAfterError){let n=[],s=this;do{let o=s.createHelp().visibleOptions(s).filter(c=>c.long).map(c=>c.long);n=n.concat(o),s=s.parent}while(s&&!s._enablePositionalOptions);t=u1(e,n)}let i=`error: unknown option '${e}'${t}`;this.error(i,{code:"commander.unknownOption"})}_excessArguments(e){if(this._allowExcessArguments)return;let t=this.registeredArguments.length,i=t===1?"":"s",s=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${t} argument${i} but got ${e.length}.`;this.error(s,{code:"commander.excessArguments"})}unknownCommand(){let e=this.args[0],t="";if(this._showSuggestionAfterError){let n=[];this.createHelp().visibleCommands(this).forEach(s=>{n.push(s.name()),s.alias()&&n.push(s.alias())}),t=u1(e,n)}let i=`error: unknown command '${e}'${t}`;this.error(i,{code:"commander.unknownCommand"})}version(e,t,i){if(e===void 0)return this._version;this._version=e,t=t||"-V, --version",i=i||"output the version number";let n=this.createOption(t,i);return this._versionOptionName=n.attributeName(),this._registerOption(n),this.on("option:"+n.name(),()=>{this._outputConfiguration.writeOut(`${e}
`),this._exit(0,"commander.version",e)}),this}description(e,t){return e===void 0&&t===void 0?this._description:(this._description=e,t&&(this._argsDescription=t),this)}summary(e){return e===void 0?this._summary:(this._summary=e,this)}alias(e){if(e===void 0)return this._aliases[0];let t=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler&&(t=this.commands[this.commands.length-1]),e===t._name)throw new Error("Command alias can't be the same as its name");let i=this.parent?._findCommand(e);if(i){let n=[i.name()].concat(i.aliases()).join("|");throw new Error(`cannot add alias '${e}' to command '${this.name()}' as already have command '${n}'`)}return t._aliases.push(e),this}aliases(e){return e===void 0?this._aliases:(e.forEach(t=>this.alias(t)),this)}usage(e){if(e===void 0){if(this._usage)return this._usage;let t=this.registeredArguments.map(i=>Xv(i));return[].concat(this.options.length||this._helpOption!==null?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?t:[]).join(" ")}return this._usage=e,this}name(e){return e===void 0?this._name:(this._name=e,this)}helpGroup(e){return e===void 0?this._helpGroupHeading??"":(this._helpGroupHeading=e,this)}commandsGroup(e){return e===void 0?this._defaultCommandGroup??"":(this._defaultCommandGroup=e,this)}optionsGroup(e){return e===void 0?this._defaultOptionGroup??"":(this._defaultOptionGroup=e,this)}_initOptionGroup(e){this._defaultOptionGroup&&!e.helpGroupHeading&&e.helpGroup(this._defaultOptionGroup)}_initCommandGroup(e){this._defaultCommandGroup&&!e.helpGroup()&&e.helpGroup(this._defaultCommandGroup)}nameFromFilename(e){return this._name=Ci.basename(e,Ci.extname(e)),this}executableDir(e){return e===void 0?this._executableDir:(this._executableDir=e,this)}helpInformation(e){let t=this.createHelp(),i=this._getOutputContext(e);t.prepareContext({error:i.error,helpWidth:i.helpWidth,outputHasColors:i.hasColors});let n=t.formatHelp(this,t);return i.hasColors?n:this._outputConfiguration.stripColor(n)}_getOutputContext(e){e=e||{};let t=!!e.error,i,n,s;return t?(i=a(c=>this._outputConfiguration.writeErr(c),"baseWrite"),n=this._outputConfiguration.getErrHasColors(),s=this._outputConfiguration.getErrHelpWidth()):(i=a(c=>this._outputConfiguration.writeOut(c),"baseWrite"),n=this._outputConfiguration.getOutHasColors(),s=this._outputConfiguration.getOutHelpWidth()),{error:t,write:a(c=>(n||(c=this._outputConfiguration.stripColor(c)),i(c)),"write"),hasColors:n,helpWidth:s}}outputHelp(e){let t;typeof e=="function"&&(t=e,e=void 0);let i=this._getOutputContext(e),n={error:i.error,write:i.write,command:this};this._getCommandAndAncestors().reverse().forEach(o=>o.emit("beforeAllHelp",n)),this.emit("beforeHelp",n);let s=this.helpInformation({error:i.error});if(t&&(s=t(s),typeof s!="string"&&!Buffer.isBuffer(s)))throw new Error("outputHelp callback must return a string or a Buffer");i.write(s),this._getHelpOption()?.long&&this.emit(this._getHelpOption().long),this.emit("afterHelp",n),this._getCommandAndAncestors().forEach(o=>o.emit("afterAllHelp",n))}helpOption(e,t){return typeof e=="boolean"?(e?(this._helpOption===null&&(this._helpOption=void 0),this._defaultOptionGroup&&this._initOptionGroup(this._getHelpOption())):this._helpOption=null,this):(this._helpOption=this.createOption(e??"-h, --help",t??"display help for command"),(e||t)&&this._initOptionGroup(this._helpOption),this)}_getHelpOption(){return this._helpOption===void 0&&this.helpOption(void 0,void 0),this._helpOption}addHelpOption(e){return this._helpOption=e,this._initOptionGroup(e),this}help(e){this.outputHelp(e);let t=Number(Me.exitCode??0);t===0&&e&&typeof e!="function"&&e.error&&(t=1),this._exit(t,"commander.help","(outputHelp)")}addHelpText(e,t){let i=["beforeAll","before","after","afterAll"];if(!i.includes(e))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${i.join("', '")}'`);let n=`${e}Help`;return this.on(n,s=>{let o;typeof t=="function"?o=t({error:s.error,command:s.command}):o=t,o&&s.write(`${o}
`)}),this}_outputHelpIfRequested(e){let t=this._getHelpOption();t&&e.find(n=>t.is(n))&&(this.outputHelp(),this._exit(0,"commander.helpDisplayed","(outputHelp)"))}};function l1(r){return r.map(e=>{if(!e.startsWith("--inspect"))return e;let t,i="127.0.0.1",n="9229",s;return(s=e.match(/^(--inspect(-brk)?)$/))!==null?t=s[1]:(s=e.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null?(t=s[1],/^\d+$/.test(s[3])?n=s[3]:i=s[3]):(s=e.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null&&(t=s[1],i=s[3],n=s[4]),t&&n!=="0"?`${t}=${i}:${parseInt(n)+1}`:e})}a(l1,"incrementNodeInspectorPort");function Wl(){if(Me.env.NO_COLOR||Me.env.FORCE_COLOR==="0"||Me.env.FORCE_COLOR==="false")return!1;if(Me.env.FORCE_COLOR||Me.env.CLICOLOR_FORCE!==void 0)return!0}a(Wl,"useColor");Hl.Command=Gl;Hl.useColor=Wl});var m1=y(yr=>{var{Argument:h1}=Do(),{Command:zl}=f1(),{CommanderError:rb,InvalidArgumentError:d1}=ia(),{Help:ib}=Ml(),{Option:p1}=Ul();yr.program=new zl;yr.createCommand=r=>new zl(r);yr.createOption=(r,e)=>new p1(r,e);yr.createArgument=(r,e)=>new h1(r,e);yr.Command=zl;yr.Option=p1;yr.Argument=h1;yr.Help=ib;yr.CommanderError=rb;yr.InvalidArgumentError=d1;yr.InvalidOptionArgumentError=d1});var Kl=y(Io=>{"use strict";Object.defineProperty(Io,"__esModule",{value:!0});Io.AssetClass=void 0;var y1;(function(r){r.AREA="ems__Area",r.TASK="ems__Task",r.PROJECT="ems__Project",r.MEETING="ems__Meeting",r.INITIATIVE="ems__Initiative",r.TASK_PROTOTYPE="ems__TaskPrototype",r.MEETING_PROTOTYPE="ems__MeetingPrototype",r.EVENT_PROTOTYPE="exo__EventPrototype",r.EVENT="exo__Event",r.DAILY_NOTE="pn__DailyNote",r.CONCEPT="ims__Concept",r.SESSION_START_EVENT="ems__SessionStartEvent",r.SESSION_END_EVENT="ems__SessionEndEvent"})(y1||(Io.AssetClass=y1={}))});var Yl=y(No=>{"use strict";Object.defineProperty(No,"__esModule",{value:!0});No.EffortStatus=void 0;var _1;(function(r){r.DRAFT="ems__EffortStatusDraft",r.BACKLOG="ems__EffortStatusBacklog",r.ANALYSIS="ems__EffortStatusAnalysis",r.TODO="ems__EffortStatusToDo",r.DOING="ems__EffortStatusDoing",r.DONE="ems__EffortStatusDone",r.TRASHED="ems__EffortStatusTrashed"})(_1||(No.EffortStatus=_1={}))});var b1=y(v1=>{"use strict";Object.defineProperty(v1,"__esModule",{value:!0})});var w1=y(S1=>{"use strict";Object.defineProperty(S1,"__esModule",{value:!0})});var T1=y(E1=>{"use strict";Object.defineProperty(E1,"__esModule",{value:!0})});var x1=y(A1=>{"use strict";Object.defineProperty(A1,"__esModule",{value:!0})});var Bt=y(ko=>{"use strict";Object.defineProperty(ko,"__esModule",{value:!0});ko.IRI=void 0;var Ql=class r{static{a(this,"IRI")}constructor(e){let t=e.trim();if(t.length===0)throw new Error("IRI cannot be empty");if(!r.isValidIRI(t))throw new Error("Invalid IRI format");this._value=t}get value(){return this._value}equals(e){return this._value===e._value}toString(){return this._value}static isValidIRI(e){if(!e||e.trim().length===0||/\s/.test(e)||!/^[a-z][a-z0-9+.-]*:/i.test(e))return!1;let i=["http","https","ftp","ftps","file","mailto","tel","data","ws","wss","urn","obsidian"],n=e.match(/^([a-z][a-z0-9+.-]*?):/i);if(n){let s=n[1].toLowerCase();if(!i.includes(s))return!1}try{return new URL(e),!0}catch{return/^urn:[a-z0-9][a-z0-9-]{0,31}:[^\s]+$/i.test(e)}}};ko.IRI=Ql});var or=y(jo=>{"use strict";Object.defineProperty(jo,"__esModule",{value:!0});jo.Literal=void 0;var Jl=class{static{a(this,"Literal")}constructor(e,t,i){if(e.length===0)throw new Error("Literal value cannot be empty");if(t&&i)throw new Error("Literal cannot have both datatype and language tag");this._value=e,this._datatype=t,this._language=i?i.toLowerCase():void 0}get value(){return this._value}get datatype(){return this._datatype}get language(){return this._language}equals(e){if(this._value!==e._value)return!1;if(this._datatype&&e._datatype){if(!this._datatype.equals(e._datatype))return!1}else if(this._datatype||e._datatype)return!1;return this._language===e._language}toString(){let e=`"${this._value}"`;return this._datatype?e+=`^^<${this._datatype.value}>`:this._language&&(e+=`@${this._language}`),e}};jo.Literal=Jl});var ai=y(Lo=>{"use strict";Object.defineProperty(Lo,"__esModule",{value:!0});Lo.BlankNode=void 0;var Mo=class r{static{a(this,"BlankNode")}constructor(e){let t=e.trim();if(t.length===0)throw new Error("BlankNode id cannot be empty");this._id=t}get id(){return this._id}equals(e){return this._id===e._id}toString(){return`_:${this._id}`}static generateId(){return`b${++r.counter}`}static create(){return new r(r.generateId())}};Lo.BlankNode=Mo;Mo.counter=0});var Oi=y(qo=>{"use strict";Object.defineProperty(qo,"__esModule",{value:!0});qo.Namespace=void 0;var C1=Bt(),$t=class{static{a(this,"Namespace")}constructor(e,t){if(e.trim().length===0)throw new Error("Namespace prefix cannot be empty");this._prefix=e,this._iri=new C1.IRI(t)}get prefix(){return this._prefix}get iri(){return this._iri}term(e){return new C1.IRI(`${this._iri.value}${e}`)}expand(e){let t=e.split(":");if(t.length!==2)return null;let[i,n]=t;return i!==this._prefix?null:this.term(n)}};qo.Namespace=$t;$t.RDF=new $t("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");$t.RDFS=new $t("rdfs","http://www.w3.org/2000/01/rdf-schema#");$t.OWL=new $t("owl","http://www.w3.org/2002/07/owl#");$t.XSD=new $t("xsd","http://www.w3.org/2001/XMLSchema#");$t.EXO=new $t("exo","https://exocortex.my/ontology/exo#");$t.EMS=new $t("ems","https://exocortex.my/ontology/ems#")});var Sn=y(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.Triple=void 0;var Xl=Bt(),Zl=or(),ef=ai(),tf=class{static{a(this,"Triple")}constructor(e,t,i){this._subject=e,this._predicate=t,this._object=i}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}equals(e){return!(!this.equalsNode(this._subject,e._subject)||!this._predicate.equals(e._predicate)||!this.equalsNode(this._object,e._object))}equalsNode(e,t){return e instanceof Xl.IRI&&t instanceof Xl.IRI||e instanceof ef.BlankNode&&t instanceof ef.BlankNode||e instanceof Zl.Literal&&t instanceof Zl.Literal?e.equals(t):!1}toString(){let e=this.nodeToString(this._subject),t=`<${this._predicate.value}>`,i=this.nodeToString(this._object);return`${e} ${t} ${i} .`}nodeToString(e){return e instanceof Xl.IRI?`<${e.value}>`:e instanceof ef.BlankNode||e instanceof Zl.Literal?e.toString():""}};Vo.Triple=tf});var O1=y(_r=>{"use strict";Object.defineProperty(_r,"__esModule",{value:!0});_r.Triple=_r.Namespace=_r.BlankNode=_r.Literal=_r.IRI=void 0;var nb=Bt();Object.defineProperty(_r,"IRI",{enumerable:!0,get:a(function(){return nb.IRI},"get")});var sb=or();Object.defineProperty(_r,"Literal",{enumerable:!0,get:a(function(){return sb.Literal},"get")});var ab=ai();Object.defineProperty(_r,"BlankNode",{enumerable:!0,get:a(function(){return ab.BlankNode},"get")});var ob=Oi();Object.defineProperty(_r,"Namespace",{enumerable:!0,get:a(function(){return ob.Namespace},"get")});var cb=Sn();Object.defineProperty(_r,"Triple",{enumerable:!0,get:a(function(){return cb.Triple},"get")})});var wn=y(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.WikiLinkHelpers=void 0;var Uo=class{static{a(this,"WikiLinkHelpers")}static normalize(e){return e?e.replace(this.WIKI_LINK_PATTERN,"").trim():""}static normalizeArray(e){return e?(Array.isArray(e)?e:[e]).map(i=>this.normalize(i)).filter(i=>i.length>0):[]}static equals(e,t){return this.normalize(e)===this.normalize(t)}static includes(e,t){let i=this.normalizeArray(e),n=this.normalize(t);return i.includes(n)}};Bo.WikiLinkHelpers=Uo;Uo.WIKI_LINK_PATTERN=/\[\[|\]\]/g});var Dt=y(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.EffortStatus=ss.AssetClass=void 0;var ub=Kl();Object.defineProperty(ss,"AssetClass",{enumerable:!0,get:a(function(){return ub.AssetClass},"get")});var lb=Yl();Object.defineProperty(ss,"EffortStatus",{enumerable:!0,get:a(function(){return lb.EffortStatus},"get")})});var En=y(er=>{"use strict";Object.defineProperty(er,"__esModule",{value:!0});er.hasClass=as;er.isAreaOrProject=fb;er.isEffort=hb;er.hasStatus=db;er.isAssetArchived=pb;er.hasEmptyProperties=mb;er.needsFolderRepair=gb;er.getTodayDateString=rf;er.isPlannedForToday=yb;er.hasPlannedStartTimestamp=_b;er.extractDailyNoteDate=vb;er.isCurrentDateGteDay=bb;var F1=wn(),na=Dt();function as(r,e){return r?(Array.isArray(r)?r:[r]).some(i=>F1.WikiLinkHelpers.normalize(i)===e):!1}a(as,"hasClass");function fb(r){return as(r,na.AssetClass.AREA)||as(r,na.AssetClass.PROJECT)}a(fb,"isAreaOrProject");function hb(r){return as(r,na.AssetClass.TASK)||as(r,na.AssetClass.PROJECT)||as(r,na.AssetClass.MEETING)}a(hb,"isEffort");function db(r,e){if(!r)return!1;let t=Array.isArray(r)?r[0]:r;return t?F1.WikiLinkHelpers.normalize(t)===e:!1}a(db,"hasStatus");function pb(r){if(r===!0||r===1)return!0;if(typeof r=="string"){let e=r.toLowerCase();return e==="true"||e==="yes"}return!1}a(pb,"isAssetArchived");function mb(r){return!r||Object.keys(r).length===0?!1:Object.values(r).some(e=>!!(e==null||typeof e=="string"&&e.trim()===""||Array.isArray(e)&&e.length===0||typeof e=="object"&&!Array.isArray(e)&&Object.keys(e).length===0))}a(mb,"hasEmptyProperties");function gb(r,e){if(!e)return!1;let t=r.replace(/\/$/,""),i=e.replace(/\/$/,"");return t!==i}a(gb,"needsFolderRepair");function rf(){let r=new Date,e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),i=String(r.getDate()).padStart(2,"0");return`${e}-${t}-${i}`}a(rf,"getTodayDateString");function yb(r){let e=r.ems__Effort_plannedStartTimestamp;if(!e)return!1;let t=rf();return typeof e=="string"?e.split("T")[0]===t:Array.isArray(e)&&e.length>0?String(e[0]).split("T")[0]===t:!1}a(yb,"isPlannedForToday");function _b(r){let e=r.ems__Effort_plannedStartTimestamp;return e?typeof e=="string"?e.trim().length>0:Array.isArray(e)&&e.length>0?String(e[0]).trim().length>0:!1:!1}a(_b,"hasPlannedStartTimestamp");function vb(r){let e=r.pn__DailyNote_day;if(!e)return null;if(typeof e=="string"){let t=e.match(/\[\[(.+?)\]\]/);return t?t[1]:e}if(Array.isArray(e)&&e.length>0){let t=String(e[0]),i=t.match(/\[\[(.+?)\]\]/);return i?i[1]:t}return null}a(vb,"extractDailyNoteDate");function bb(r){return rf()>=r}a(bb,"isCurrentDateGteDay")});var D1=y(sa=>{"use strict";Object.defineProperty(sa,"__esModule",{value:!0});sa.canCreateTask=Sb;sa.canCreateRelatedTask=wb;sa.canConvertTaskToProject=Eb;var $o=En(),P1=Dt();function Sb(r){return(0,$o.isAreaOrProject)(r.instanceClass)}a(Sb,"canCreateTask");function wb(r){return!(!(0,$o.hasClass)(r.instanceClass,P1.AssetClass.TASK)||(0,$o.isAssetArchived)(r.isArchived))}a(wb,"canCreateRelatedTask");function Eb(r){return(0,$o.hasClass)(r.instanceClass,P1.AssetClass.TASK)}a(Eb,"canConvertTaskToProject")});var R1=y(os=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.canCreateProject=Tb;os.canMoveToAnalysis=Ab;os.canMoveToToDo=xb;os.canConvertProjectToTask=Cb;var Wi=En(),Hi=Dt();function Tb(r){return(0,Wi.hasClass)(r.instanceClass,Hi.AssetClass.AREA)||(0,Wi.hasClass)(r.instanceClass,Hi.AssetClass.INITIATIVE)||(0,Wi.hasClass)(r.instanceClass,Hi.AssetClass.PROJECT)}a(Tb,"canCreateProject");function Ab(r){return(0,Wi.hasClass)(r.instanceClass,Hi.AssetClass.PROJECT)?(0,Wi.hasStatus)(r.currentStatus,Hi.EffortStatus.BACKLOG):!1}a(Ab,"canMoveToAnalysis");function xb(r){return(0,Wi.hasClass)(r.instanceClass,Hi.AssetClass.PROJECT)?(0,Wi.hasStatus)(r.currentStatus,Hi.EffortStatus.ANALYSIS):!1}a(xb,"canMoveToToDo");function Cb(r){return(0,Wi.hasClass)(r.instanceClass,Hi.AssetClass.PROJECT)}a(Cb,"canConvertProjectToTask")});var k1=y(Go=>{"use strict";Object.defineProperty(Go,"__esModule",{value:!0});Go.canCreateChildArea=Ob;Go.canSetActiveFocus=Fb;var I1=En(),N1=Dt();function Ob(r){return(0,I1.hasClass)(r.instanceClass,N1.AssetClass.AREA)}a(Ob,"canCreateChildArea");function Fb(r){return(0,I1.hasClass)(r.instanceClass,N1.AssetClass.AREA)}a(Fb,"canSetActiveFocus")});var M1=y(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.canPlanOnToday=Pb;tr.canPlanForEvening=Db;tr.canShiftDayBackward=Rb;tr.canShiftDayForward=Ib;tr.canSetDraftStatus=Nb;tr.canMoveToBacklog=kb;tr.canStartEffort=jb;tr.canMarkDone=Mb;tr.canTrashEffort=Lb;tr.canVoteOnEffort=qb;tr.canRollbackStatus=Vb;tr.canArchiveTask=Ub;var j1=wn(),He=En(),cr=Dt();function Pb(r){return!(!(0,He.isEffort)(r.instanceClass)||(0,He.isPlannedForToday)(r.metadata))}a(Pb,"canPlanOnToday");function Db(r){return!(0,He.hasClass)(r.instanceClass,cr.AssetClass.TASK)&&!(0,He.hasClass)(r.instanceClass,cr.AssetClass.MEETING)?!1:(0,He.hasStatus)(r.currentStatus,cr.EffortStatus.BACKLOG)}a(Db,"canPlanForEvening");function Rb(r){return(0,He.isEffort)(r.instanceClass)?(0,He.hasPlannedStartTimestamp)(r.metadata):!1}a(Rb,"canShiftDayBackward");function Ib(r){return(0,He.isEffort)(r.instanceClass)?(0,He.hasPlannedStartTimestamp)(r.metadata):!1}a(Ib,"canShiftDayForward");function Nb(r){return(0,He.isEffort)(r.instanceClass)?!r.currentStatus:!1}a(Nb,"canSetDraftStatus");function kb(r){return(0,He.isEffort)(r.instanceClass)?(0,He.hasStatus)(r.currentStatus,cr.EffortStatus.DRAFT):!1}a(kb,"canMoveToBacklog");function jb(r){return(0,He.isEffort)(r.instanceClass)?(0,He.hasClass)(r.instanceClass,cr.AssetClass.TASK)||(0,He.hasClass)(r.instanceClass,cr.AssetClass.MEETING)?(0,He.hasStatus)(r.currentStatus,cr.EffortStatus.BACKLOG):(0,He.hasClass)(r.instanceClass,cr.AssetClass.PROJECT)?(0,He.hasStatus)(r.currentStatus,cr.EffortStatus.TODO):!1:!1}a(jb,"canStartEffort");function Mb(r){return(0,He.isEffort)(r.instanceClass)?(0,He.hasStatus)(r.currentStatus,cr.EffortStatus.DOING):!1}a(Mb,"canMarkDone");function Lb(r){return(0,He.isEffort)(r.instanceClass)?r.currentStatus?!(Array.isArray(r.currentStatus)?r.currentStatus:[r.currentStatus]).some(i=>{let n=j1.WikiLinkHelpers.normalize(i);return n===cr.EffortStatus.TRASHED||n===cr.EffortStatus.DONE}):!0:!1}a(Lb,"canTrashEffort");function qb(r){return!(!(0,He.isEffort)(r.instanceClass)||(0,He.isAssetArchived)(r.isArchived))}a(qb,"canVoteOnEffort");function Vb(r){if(!(0,He.isEffort)(r.instanceClass)||(0,He.isAssetArchived)(r.isArchived)||!r.currentStatus)return!1;let e=Array.isArray(r.currentStatus)?r.currentStatus[0]:r.currentStatus;return!(!e||j1.WikiLinkHelpers.normalize(e)===cr.EffortStatus.TRASHED)}a(Vb,"canRollbackStatus");function Ub(r){return!(0,He.isAssetArchived)(r.isArchived)}a(Ub,"canArchiveTask")});var L1=y(xr=>{"use strict";Object.defineProperty(xr,"__esModule",{value:!0});xr.canCreateEvent=Bb;xr.canCreateInstance=$b;xr.canCleanProperties=Gb;xr.canRepairFolder=Wb;xr.canRenameToUid=Hb;xr.canCopyLabelToAliases=zb;xr.canCreateNarrowerConcept=Kb;xr.canCreateSubclass=Yb;xr.canCreateTaskForDailyNote=Qb;var vr=En(),cs=Dt();function Bb(r){return(0,vr.isAreaOrProject)(r.instanceClass)}a(Bb,"canCreateEvent");function $b(r){return(0,vr.hasClass)(r.instanceClass,cs.AssetClass.TASK_PROTOTYPE)||(0,vr.hasClass)(r.instanceClass,cs.AssetClass.MEETING_PROTOTYPE)||(0,vr.hasClass)(r.instanceClass,cs.AssetClass.EVENT_PROTOTYPE)}a($b,"canCreateInstance");function Gb(r){return(0,vr.hasEmptyProperties)(r.metadata)}a(Gb,"canCleanProperties");function Wb(r){return(0,vr.needsFolderRepair)(r.currentFolder,r.expectedFolder)}a(Wb,"canRepairFolder");function Hb(r,e){let t=r.metadata.exo__Asset_uid;return!t||(0,vr.hasClass)(r.instanceClass,cs.AssetClass.CONCEPT)?!1:e!==t}a(Hb,"canRenameToUid");function zb(r){let e=r.metadata.exo__Asset_label;if(!e||typeof e!="string"||e.trim()==="")return!1;let t=e.trim(),i=r.metadata.aliases;return!i||!Array.isArray(i)||i.length===0?!0:!i.some(n=>typeof n!="string"?!1:n.trim()===t)}a(zb,"canCopyLabelToAliases");function Kb(r){return(0,vr.hasClass)(r.instanceClass,cs.AssetClass.CONCEPT)}a(Kb,"canCreateNarrowerConcept");function Yb(r){return(0,vr.hasClass)(r.instanceClass,"exo__Class")}a(Yb,"canCreateSubclass");function Qb(r){if(!(0,vr.hasClass)(r.instanceClass,cs.AssetClass.DAILY_NOTE)||r.isArchived)return!1;let e=(0,vr.extractDailyNoteDate)(r.metadata);return e?(0,vr.isCurrentDateGteDay)(e):!1}a(Qb,"canCreateTaskForDailyNote")});var V1=y(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.canCreateTaskForDailyNote=R.canCreateSubclass=R.canCreateNarrowerConcept=R.canCopyLabelToAliases=R.canRenameToUid=R.canRepairFolder=R.canCleanProperties=R.canCreateInstance=R.canCreateEvent=R.canArchiveTask=R.canRollbackStatus=R.canVoteOnEffort=R.canTrashEffort=R.canMarkDone=R.canStartEffort=R.canMoveToBacklog=R.canSetDraftStatus=R.canShiftDayForward=R.canShiftDayBackward=R.canPlanForEvening=R.canPlanOnToday=R.canSetActiveFocus=R.canCreateChildArea=R.canConvertProjectToTask=R.canMoveToToDo=R.canMoveToAnalysis=R.canCreateProject=R.canConvertTaskToProject=R.canCreateRelatedTask=R.canCreateTask=R.isCurrentDateGteDay=R.extractDailyNoteDate=R.hasPlannedStartTimestamp=R.isPlannedForToday=R.getTodayDateString=R.needsFolderRepair=R.hasEmptyProperties=R.isAssetArchived=R.hasStatus=R.isEffort=R.isAreaOrProject=R.hasClass=void 0;var br=En();Object.defineProperty(R,"hasClass",{enumerable:!0,get:a(function(){return br.hasClass},"get")});Object.defineProperty(R,"isAreaOrProject",{enumerable:!0,get:a(function(){return br.isAreaOrProject},"get")});Object.defineProperty(R,"isEffort",{enumerable:!0,get:a(function(){return br.isEffort},"get")});Object.defineProperty(R,"hasStatus",{enumerable:!0,get:a(function(){return br.hasStatus},"get")});Object.defineProperty(R,"isAssetArchived",{enumerable:!0,get:a(function(){return br.isAssetArchived},"get")});Object.defineProperty(R,"hasEmptyProperties",{enumerable:!0,get:a(function(){return br.hasEmptyProperties},"get")});Object.defineProperty(R,"needsFolderRepair",{enumerable:!0,get:a(function(){return br.needsFolderRepair},"get")});Object.defineProperty(R,"getTodayDateString",{enumerable:!0,get:a(function(){return br.getTodayDateString},"get")});Object.defineProperty(R,"isPlannedForToday",{enumerable:!0,get:a(function(){return br.isPlannedForToday},"get")});Object.defineProperty(R,"hasPlannedStartTimestamp",{enumerable:!0,get:a(function(){return br.hasPlannedStartTimestamp},"get")});Object.defineProperty(R,"extractDailyNoteDate",{enumerable:!0,get:a(function(){return br.extractDailyNoteDate},"get")});Object.defineProperty(R,"isCurrentDateGteDay",{enumerable:!0,get:a(function(){return br.isCurrentDateGteDay},"get")});var nf=D1();Object.defineProperty(R,"canCreateTask",{enumerable:!0,get:a(function(){return nf.canCreateTask},"get")});Object.defineProperty(R,"canCreateRelatedTask",{enumerable:!0,get:a(function(){return nf.canCreateRelatedTask},"get")});Object.defineProperty(R,"canConvertTaskToProject",{enumerable:!0,get:a(function(){return nf.canConvertTaskToProject},"get")});var Wo=R1();Object.defineProperty(R,"canCreateProject",{enumerable:!0,get:a(function(){return Wo.canCreateProject},"get")});Object.defineProperty(R,"canMoveToAnalysis",{enumerable:!0,get:a(function(){return Wo.canMoveToAnalysis},"get")});Object.defineProperty(R,"canMoveToToDo",{enumerable:!0,get:a(function(){return Wo.canMoveToToDo},"get")});Object.defineProperty(R,"canConvertProjectToTask",{enumerable:!0,get:a(function(){return Wo.canConvertProjectToTask},"get")});var q1=k1();Object.defineProperty(R,"canCreateChildArea",{enumerable:!0,get:a(function(){return q1.canCreateChildArea},"get")});Object.defineProperty(R,"canSetActiveFocus",{enumerable:!0,get:a(function(){return q1.canSetActiveFocus},"get")});var Sr=M1();Object.defineProperty(R,"canPlanOnToday",{enumerable:!0,get:a(function(){return Sr.canPlanOnToday},"get")});Object.defineProperty(R,"canPlanForEvening",{enumerable:!0,get:a(function(){return Sr.canPlanForEvening},"get")});Object.defineProperty(R,"canShiftDayBackward",{enumerable:!0,get:a(function(){return Sr.canShiftDayBackward},"get")});Object.defineProperty(R,"canShiftDayForward",{enumerable:!0,get:a(function(){return Sr.canShiftDayForward},"get")});Object.defineProperty(R,"canSetDraftStatus",{enumerable:!0,get:a(function(){return Sr.canSetDraftStatus},"get")});Object.defineProperty(R,"canMoveToBacklog",{enumerable:!0,get:a(function(){return Sr.canMoveToBacklog},"get")});Object.defineProperty(R,"canStartEffort",{enumerable:!0,get:a(function(){return Sr.canStartEffort},"get")});Object.defineProperty(R,"canMarkDone",{enumerable:!0,get:a(function(){return Sr.canMarkDone},"get")});Object.defineProperty(R,"canTrashEffort",{enumerable:!0,get:a(function(){return Sr.canTrashEffort},"get")});Object.defineProperty(R,"canVoteOnEffort",{enumerable:!0,get:a(function(){return Sr.canVoteOnEffort},"get")});Object.defineProperty(R,"canRollbackStatus",{enumerable:!0,get:a(function(){return Sr.canRollbackStatus},"get")});Object.defineProperty(R,"canArchiveTask",{enumerable:!0,get:a(function(){return Sr.canArchiveTask},"get")});var Fi=L1();Object.defineProperty(R,"canCreateEvent",{enumerable:!0,get:a(function(){return Fi.canCreateEvent},"get")});Object.defineProperty(R,"canCreateInstance",{enumerable:!0,get:a(function(){return Fi.canCreateInstance},"get")});Object.defineProperty(R,"canCleanProperties",{enumerable:!0,get:a(function(){return Fi.canCleanProperties},"get")});Object.defineProperty(R,"canRepairFolder",{enumerable:!0,get:a(function(){return Fi.canRepairFolder},"get")});Object.defineProperty(R,"canRenameToUid",{enumerable:!0,get:a(function(){return Fi.canRenameToUid},"get")});Object.defineProperty(R,"canCopyLabelToAliases",{enumerable:!0,get:a(function(){return Fi.canCopyLabelToAliases},"get")});Object.defineProperty(R,"canCreateNarrowerConcept",{enumerable:!0,get:a(function(){return Fi.canCreateNarrowerConcept},"get")});Object.defineProperty(R,"canCreateSubclass",{enumerable:!0,get:a(function(){return Fi.canCreateSubclass},"get")});Object.defineProperty(R,"canCreateTaskForDailyNote",{enumerable:!0,get:a(function(){return Fi.canCreateTaskForDailyNote},"get")})});var U1=y(Tn=>{"use strict";var Jb=Tn&&Tn.__createBinding||(Object.create?(function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:a(function(){return e[t]},"get")}),Object.defineProperty(r,i,n)}):(function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]})),Xb=Tn&&Tn.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&Jb(e,r,t)};Object.defineProperty(Tn,"__esModule",{value:!0});Xb(V1(),Tn)});var Ho={};Bv(Ho,{__assign:()=>af,__asyncDelegator:()=>fS,__asyncGenerator:()=>lS,__asyncValues:()=>hS,__await:()=>aa,__awaiter:()=>nS,__classPrivateFieldGet:()=>gS,__classPrivateFieldSet:()=>yS,__createBinding:()=>aS,__decorate:()=>tS,__exportStar:()=>oS,__extends:()=>Zb,__generator:()=>sS,__importDefault:()=>mS,__importStar:()=>pS,__makeTemplateObject:()=>dS,__metadata:()=>iS,__param:()=>rS,__read:()=>B1,__rest:()=>eS,__spread:()=>cS,__spreadArrays:()=>uS,__values:()=>of});function Zb(r,e){sf(r,e);function t(){this.constructor=r}a(t,"__"),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function eS(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t}function tS(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}function rS(r,e){return function(t,i){e(t,i,r)}}function iS(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function nS(r,e,t,i){function n(s){return s instanceof t?s:new t(function(o){o(s)})}return a(n,"adopt"),new(t||(t=Promise))(function(s,o){function c(l){try{f(i.next(l))}catch(h){o(h)}}a(c,"fulfilled");function u(l){try{f(i.throw(l))}catch(h){o(h)}}a(u,"rejected");function f(l){l.done?s(l.value):n(l.value).then(c,u)}a(f,"step"),f((i=i.apply(r,e||[])).next())})}function sS(r,e){var t={label:0,sent:a(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},i,n,s,o;return o={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function c(f){return function(l){return u([f,l])}}function u(f){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(s=f[0]&2?n.return:f[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,f[1])).done)return s;switch(n=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,n=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(r,t)}catch(l){f=[6,l],n=0}finally{i=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function aS(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function oS(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function of(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:a(function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function B1(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],o;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(c){o={error:c}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(o)throw o.error}}return s}function cS(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(B1(arguments[e]));return r}function uS(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),n=0,e=0;e<t;e++)for(var s=arguments[e],o=0,c=s.length;o<c;o++,n++)i[n]=s[o];return i}function aa(r){return this instanceof aa?(this.v=r,this):new aa(r)}function lS(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),n,s=[];return n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n;function o(p){i[p]&&(n[p]=function(g){return new Promise(function(v,S){s.push([p,g,v,S])>1||c(p,g)})})}function c(p,g){try{u(i[p](g))}catch(v){h(s[0][3],v)}}function u(p){p.value instanceof aa?Promise.resolve(p.value.v).then(f,l):h(s[0][2],p)}function f(p){c("next",p)}function l(p){c("throw",p)}function h(p,g){p(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function fS(r){var e,t;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=r[n]?function(o){return(t=!t)?{value:aa(r[n](o)),done:n==="return"}:s?s(o):o}:s}}function hS(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof of=="function"?of(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=r[s]&&function(o){return new Promise(function(c,u){o=r[s](o),n(c,u,o.done,o.value)})}}function n(s,o,c,u){Promise.resolve(u).then(function(f){s({value:f,done:c})},o)}}function dS(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function pS(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function mS(r){return r&&r.__esModule?r:{default:r}}function gS(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function yS(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}var sf,af,zo=Uv(()=>{sf=a(function(r,e){return sf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},sf(r,e)},"extendStatics");a(Zb,"__extends");af=a(function(){return af=Object.assign||a(function(e){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},"__assign"),af.apply(this,arguments)},"__assign");a(eS,"__rest");a(tS,"__decorate");a(rS,"__param");a(iS,"__metadata");a(nS,"__awaiter");a(sS,"__generator");a(aS,"__createBinding");a(oS,"__exportStar");a(of,"__values");a(B1,"__read");a(cS,"__spread");a(uS,"__spreadArrays");a(aa,"__await");a(lS,"__asyncGenerator");a(fS,"__asyncDelegator");a(hS,"__asyncValues");a(dS,"__makeTemplateObject");a(pS,"__importStar");a(mS,"__importDefault");a(gS,"__classPrivateFieldGet");a(yS,"__classPrivateFieldSet")});var lf=y(uf=>{"use strict";Object.defineProperty(uf,"__esModule",{value:!0});var cf;(function(r){r[r.Transient=0]="Transient",r[r.Singleton=1]="Singleton",r[r.ResolutionScoped=2]="ResolutionScoped",r[r.ContainerScoped=3]="ContainerScoped"})(cf||(cf={}));uf.default=cf});var $1=y(ff=>{"use strict";Object.defineProperty(ff,"__esModule",{value:!0});var _S=lf();Object.defineProperty(ff,"Lifecycle",{enumerable:!0,get:a(function(){return _S.default},"get")})});var An=y(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.defineInjectionTokenMetadata=Cr.getParamInfo=Cr.INJECTION_TOKEN_METADATA_KEY=void 0;Cr.INJECTION_TOKEN_METADATA_KEY="injectionTokens";function vS(r){let e=Reflect.getMetadata("design:paramtypes",r)||[],t=Reflect.getOwnMetadata(Cr.INJECTION_TOKEN_METADATA_KEY,r)||{};return Object.keys(t).forEach(i=>{e[+i]=t[i]}),e}a(vS,"getParamInfo");Cr.getParamInfo=vS;function bS(r,e){return function(t,i,n){let s=Reflect.getOwnMetadata(Cr.INJECTION_TOKEN_METADATA_KEY,t)||{};s[n]=e?{token:r,transform:e.transformToken,transformArgs:e.args||[]}:r,Reflect.defineMetadata(Cr.INJECTION_TOKEN_METADATA_KEY,s,t)}}a(bS,"defineInjectionTokenMetadata");Cr.defineInjectionTokenMetadata=bS});var hf=y(Ko=>{"use strict";Object.defineProperty(Ko,"__esModule",{value:!0});Ko.isClassProvider=void 0;function SS(r){return!!r.useClass}a(SS,"isClassProvider");Ko.isClassProvider=SS});var df=y(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.isFactoryProvider=void 0;function wS(r){return!!r.useFactory}a(wS,"isFactoryProvider");Yo.isFactoryProvider=wS});var Jo=y(us=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.delay=us.DelayedConstructor=void 0;var Qo=class{static{a(this,"DelayedConstructor")}constructor(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}createProxy(e){let t={},i=!1,n,s=a(()=>(i||(n=e(this.wrap()),i=!0),n),"delayedObject");return new Proxy(t,this.createHandler(s))}createHandler(e){let t={},i=a(n=>{t[n]=(...s)=>{s[0]=e();let o=Reflect[n];return o(...s)}},"install");return this.reflectMethods.forEach(i),t}};us.DelayedConstructor=Qo;function ES(r){if(typeof r>"u")throw new Error("Attempt to `delay` undefined. Constructor must be wrapped in a callback");return new Qo(r)}a(ES,"delay");us.delay=ES});var Xo=y(oi=>{"use strict";Object.defineProperty(oi,"__esModule",{value:!0});oi.isConstructorToken=oi.isTransformDescriptor=oi.isTokenDescriptor=oi.isNormalToken=void 0;var TS=Jo();function AS(r){return typeof r=="string"||typeof r=="symbol"}a(AS,"isNormalToken");oi.isNormalToken=AS;function xS(r){return typeof r=="object"&&"token"in r&&"multiple"in r}a(xS,"isTokenDescriptor");oi.isTokenDescriptor=xS;function CS(r){return typeof r=="object"&&"token"in r&&"transform"in r}a(CS,"isTransformDescriptor");oi.isTransformDescriptor=CS;function OS(r){return typeof r=="function"||r instanceof TS.DelayedConstructor}a(OS,"isConstructorToken");oi.isConstructorToken=OS});var pf=y(Zo=>{"use strict";Object.defineProperty(Zo,"__esModule",{value:!0});Zo.isTokenProvider=void 0;function FS(r){return!!r.useToken}a(FS,"isTokenProvider");Zo.isTokenProvider=FS});var mf=y(ec=>{"use strict";Object.defineProperty(ec,"__esModule",{value:!0});ec.isValueProvider=void 0;function PS(r){return r.useValue!=null}a(PS,"isValueProvider");ec.isValueProvider=PS});var gf=y(xn=>{"use strict";Object.defineProperty(xn,"__esModule",{value:!0});var DS=hf();Object.defineProperty(xn,"isClassProvider",{enumerable:!0,get:a(function(){return DS.isClassProvider},"get")});var RS=df();Object.defineProperty(xn,"isFactoryProvider",{enumerable:!0,get:a(function(){return RS.isFactoryProvider},"get")});var IS=Xo();Object.defineProperty(xn,"isNormalToken",{enumerable:!0,get:a(function(){return IS.isNormalToken},"get")});var NS=pf();Object.defineProperty(xn,"isTokenProvider",{enumerable:!0,get:a(function(){return NS.isTokenProvider},"get")});var kS=mf();Object.defineProperty(xn,"isValueProvider",{enumerable:!0,get:a(function(){return kS.isValueProvider},"get")})});var G1=y(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.isProvider=void 0;var jS=hf(),MS=mf(),LS=pf(),qS=df();function VS(r){return jS.isClassProvider(r)||MS.isValueProvider(r)||LS.isTokenProvider(r)||qS.isFactoryProvider(r)}a(VS,"isProvider");tc.isProvider=VS});var vf=y(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});var yf=class{static{a(this,"RegistryBase")}constructor(){this._registryMap=new Map}entries(){return this._registryMap.entries()}getAll(e){return this.ensure(e),this._registryMap.get(e)}get(e){this.ensure(e);let t=this._registryMap.get(e);return t[t.length-1]||null}set(e,t){this.ensure(e),this._registryMap.get(e).push(t)}setAll(e,t){this._registryMap.set(e,t)}has(e){return this.ensure(e),this._registryMap.get(e).length>0}clear(){this._registryMap.clear()}ensure(e){this._registryMap.has(e)||this._registryMap.set(e,[])}};_f.default=yf});var W1=y(Sf=>{"use strict";Object.defineProperty(Sf,"__esModule",{value:!0});var US=vf(),bf=class extends US.default{static{a(this,"Registry")}};Sf.default=bf});var H1=y(Ef=>{"use strict";Object.defineProperty(Ef,"__esModule",{value:!0});var wf=class{static{a(this,"ResolutionContext")}constructor(){this.scopedResolutions=new Map}};Ef.default=wf});var Tf=y(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.formatErrorCtor=void 0;function BS(r,e){return r===null?`at position #${e}`:`"${r.split(",")[e].trim()}" at position #${e}`}a(BS,"formatDependency");function $S(r,e,t="    "){return[r,...e.message.split(`
`).map(i=>t+i)].join(`
`)}a($S,"composeErrorMessage");function GS(r,e,t){let[,i=null]=r.toString().match(/constructor\(([\w, ]+)\)/)||[],n=BS(i,e);return $S(`Cannot inject the dependency ${n} of "${r.name}" constructor. Reason:`,t)}a(GS,"formatErrorCtor");rc.formatErrorCtor=GS});var z1=y(ic=>{"use strict";Object.defineProperty(ic,"__esModule",{value:!0});ic.isDisposable=void 0;function WS(r){return!(typeof r.dispose!="function"||r.dispose.length>0)}a(WS,"isDisposable");ic.isDisposable=WS});var Y1=y(Cn=>{"use strict";Object.defineProperty(Cn,"__esModule",{value:!0});Cn.PostResolutionInterceptors=Cn.PreResolutionInterceptors=void 0;var K1=vf(),nc=class extends K1.default{static{a(this,"PreResolutionInterceptors")}};Cn.PreResolutionInterceptors=nc;var sc=class extends K1.default{static{a(this,"PostResolutionInterceptors")}};Cn.PostResolutionInterceptors=sc;var Af=class{static{a(this,"Interceptors")}constructor(){this.preResolution=new nc,this.postResolution=new sc}};Cn.default=Af});var zi=y(Pi=>{"use strict";Object.defineProperty(Pi,"__esModule",{value:!0});Pi.instance=Pi.typeInfo=void 0;var HS=(zo(),Fl(Ho)),Gt=gf(),zS=G1(),ac=Xo(),KS=W1(),rr=lf(),oc=H1(),YS=Tf(),QS=Jo(),JS=z1(),XS=Y1();Pi.typeInfo=new Map;var xf=class r{static{a(this,"InternalDependencyContainer")}constructor(e){this.parent=e,this._registry=new KS.default,this.interceptors=new XS.default,this.disposed=!1,this.disposables=new Set}register(e,t,i={lifecycle:rr.default.Transient}){this.ensureNotDisposed();let n;if(zS.isProvider(t)?n=t:n={useClass:t},Gt.isTokenProvider(n)){let s=[e],o=n;for(;o!=null;){let c=o.useToken;if(s.includes(c))throw new Error(`Token registration cycle detected! ${[...s,c].join(" -> ")}`);s.push(c);let u=this._registry.get(c);u&&Gt.isTokenProvider(u.provider)?o=u.provider:o=null}}if((i.lifecycle===rr.default.Singleton||i.lifecycle==rr.default.ContainerScoped||i.lifecycle==rr.default.ResolutionScoped)&&(Gt.isValueProvider(n)||Gt.isFactoryProvider(n)))throw new Error(`Cannot use lifecycle "${rr.default[i.lifecycle]}" with ValueProviders or FactoryProviders`);return this._registry.set(e,{provider:n,options:i}),this}registerType(e,t){return this.ensureNotDisposed(),Gt.isNormalToken(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})}registerInstance(e,t){return this.ensureNotDisposed(),this.register(e,{useValue:t})}registerSingleton(e,t){if(this.ensureNotDisposed(),Gt.isNormalToken(e)){if(Gt.isNormalToken(t))return this.register(e,{useToken:t},{lifecycle:rr.default.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:rr.default.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}let i=e;return t&&!Gt.isNormalToken(t)&&(i=t),this.register(e,{useClass:i},{lifecycle:rr.default.Singleton})}resolve(e,t=new oc.default,i=!1){this.ensureNotDisposed();let n=this.getRegistration(e);if(!n&&Gt.isNormalToken(e)){if(i)return;throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}if(this.executePreResolutionInterceptor(e,"Single"),n){let s=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,s,"Single"),s}if(ac.isConstructorToken(e)){let s=this.construct(e,t);return this.executePostResolutionInterceptor(e,s,"Single"),s}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")}executePreResolutionInterceptor(e,t){if(this.interceptors.preResolution.has(e)){let i=[];for(let n of this.interceptors.preResolution.getAll(e))n.options.frequency!="Once"&&i.push(n),n.callback(e,t);this.interceptors.preResolution.setAll(e,i)}}executePostResolutionInterceptor(e,t,i){if(this.interceptors.postResolution.has(e)){let n=[];for(let s of this.interceptors.postResolution.getAll(e))s.options.frequency!="Once"&&n.push(s),s.callback(e,t,i);this.interceptors.postResolution.setAll(e,n)}}resolveRegistration(e,t){if(this.ensureNotDisposed(),e.options.lifecycle===rr.default.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);let i=e.options.lifecycle===rr.default.Singleton,n=e.options.lifecycle===rr.default.ContainerScoped,s=i||n,o;return Gt.isValueProvider(e.provider)?o=e.provider.useValue:Gt.isTokenProvider(e.provider)?o=s?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):Gt.isClassProvider(e.provider)?o=s?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):Gt.isFactoryProvider(e.provider)?o=e.provider.useFactory(this):o=this.construct(e.provider,t),e.options.lifecycle===rr.default.ResolutionScoped&&t.scopedResolutions.set(e,o),o}resolveAll(e,t=new oc.default,i=!1){this.ensureNotDisposed();let n=this.getAllRegistrations(e);if(!n&&Gt.isNormalToken(e)){if(i)return[];throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}if(this.executePreResolutionInterceptor(e,"All"),n){let o=n.map(c=>this.resolveRegistration(c,t));return this.executePostResolutionInterceptor(e,o,"All"),o}let s=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,s,"All"),s}isRegistered(e,t=!1){return this.ensureNotDisposed(),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)}reset(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()}clearInstances(){this.ensureNotDisposed();for(let[e,t]of this._registry.entries())this._registry.setAll(e,t.filter(i=>!Gt.isValueProvider(i.provider)).map(i=>(i.instance=void 0,i)))}createChildContainer(){this.ensureNotDisposed();let e=new r(this);for(let[t,i]of this._registry.entries())i.some(({options:n})=>n.lifecycle===rr.default.ContainerScoped)&&e._registry.setAll(t,i.map(n=>n.options.lifecycle===rr.default.ContainerScoped?{provider:n.provider,options:n.options}:n));return e}beforeResolution(e,t,i={frequency:"Always"}){this.interceptors.preResolution.set(e,{callback:t,options:i})}afterResolution(e,t,i={frequency:"Always"}){this.interceptors.postResolution.set(e,{callback:t,options:i})}dispose(){return HS.__awaiter(this,void 0,void 0,function*(){this.disposed=!0;let e=[];this.disposables.forEach(t=>{let i=t.dispose();i&&e.push(i)}),yield Promise.all(e)})}getRegistration(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null}getAllRegistrations(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null}construct(e,t){if(e instanceof QS.DelayedConstructor)return e.createProxy(n=>this.resolve(n,t));let i=(()=>{let n=Pi.typeInfo.get(e);if(!n||n.length===0){if(e.length===0)return new e;throw new Error(`TypeInfo not known for "${e.name}"`)}let s=n.map(this.resolveParams(t,e));return new e(...s)})();return JS.isDisposable(i)&&this.disposables.add(i),i}resolveParams(e,t){return(i,n)=>{try{return ac.isTokenDescriptor(i)?ac.isTransformDescriptor(i)?i.multiple?this.resolve(i.transform).transform(this.resolveAll(i.token,new oc.default,i.isOptional),...i.transformArgs):this.resolve(i.transform).transform(this.resolve(i.token,e,i.isOptional),...i.transformArgs):i.multiple?this.resolveAll(i.token,new oc.default,i.isOptional):this.resolve(i.token,e,i.isOptional):ac.isTransformDescriptor(i)?this.resolve(i.transform,e).transform(this.resolve(i.token,e),...i.transformArgs):this.resolve(i,e)}catch(s){throw new Error(YS.formatErrorCtor(t,n,s))}}}ensureNotDisposed(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")}};Pi.instance=new xf;Pi.default=Pi.instance});var Q1=y(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});var ZS=An(),Di=zi(),Cf=Xo(),ew=Tf();function tw(){return function(r){let e=ZS.getParamInfo(r);return class extends r{constructor(...t){super(...t.concat(e.slice(t.length).map((i,n)=>{try{return Cf.isTokenDescriptor(i)?Cf.isTransformDescriptor(i)?i.multiple?Di.instance.resolve(i.transform).transform(Di.instance.resolveAll(i.token),...i.transformArgs):Di.instance.resolve(i.transform).transform(Di.instance.resolve(i.token),...i.transformArgs):i.multiple?Di.instance.resolveAll(i.token):Di.instance.resolve(i.token):Cf.isTransformDescriptor(i)?Di.instance.resolve(i.transform).transform(Di.instance.resolve(i.token),...i.transformArgs):Di.instance.resolve(i)}catch(s){let o=n+t.length;throw new Error(ew.formatErrorCtor(r,o,s))}})))}}}}a(tw,"autoInjectable");Of.default=tw});var J1=y(Ff=>{"use strict";Object.defineProperty(Ff,"__esModule",{value:!0});var rw=An();function iw(r,e){let t={token:r,multiple:!1,isOptional:e&&e.isOptional};return rw.defineInjectionTokenMetadata(t)}a(iw,"inject");Ff.default=iw});var cc=y(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});var nw=An(),sw=zi(),X1=zi();function aw(r){return function(e){sw.typeInfo.set(e,nw.getParamInfo(e)),r&&r.token&&(Array.isArray(r.token)?r.token.forEach(t=>{X1.instance.register(t,e)}):X1.instance.register(r.token,e))}}a(aw,"injectable");Pf.default=aw});var Z1=y(Df=>{"use strict";Object.defineProperty(Df,"__esModule",{value:!0});var ow=(zo(),Fl(Ho)),cw=zi();function uw(r=[]){return function(e){return r.forEach(t=>{var{token:i,options:n}=t,s=ow.__rest(t,["token","options"]);return cw.instance.register(i,s,n)}),e}}a(uw,"registry");Df.default=uw});var e2=y(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});var lw=cc(),fw=zi();function hw(){return function(r){lw.default()(r),fw.instance.registerSingleton(r)}}a(hw,"singleton");Rf.default=hw});var t2=y(If=>{"use strict";Object.defineProperty(If,"__esModule",{value:!0});var dw=An();function pw(r,e){let t={token:r,multiple:!0,isOptional:e&&e.isOptional};return dw.defineInjectionTokenMetadata(t)}a(pw,"injectAll");If.default=pw});var r2=y(Nf=>{"use strict";Object.defineProperty(Nf,"__esModule",{value:!0});var mw=An();function gw(r,e,...t){let i={token:r,multiple:!0,transform:e,transformArgs:t};return mw.defineInjectionTokenMetadata(i)}a(gw,"injectAllWithTransform");Nf.default=gw});var i2=y(kf=>{"use strict";Object.defineProperty(kf,"__esModule",{value:!0});var yw=An();function _w(r,e,...t){return yw.defineInjectionTokenMetadata(r,{transformToken:e,args:t})}a(_w,"injectWithTransform");kf.default=_w});var n2=y(jf=>{"use strict";Object.defineProperty(jf,"__esModule",{value:!0});var vw=cc(),bw=zi();function Sw(r,e){return function(t){vw.default()(t),bw.instance.register(e||t,t,{lifecycle:r})}}a(Sw,"scoped");jf.default=Sw});var s2=y(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});var ww=Q1();Object.defineProperty(Or,"autoInjectable",{enumerable:!0,get:a(function(){return ww.default},"get")});var Ew=J1();Object.defineProperty(Or,"inject",{enumerable:!0,get:a(function(){return Ew.default},"get")});var Tw=cc();Object.defineProperty(Or,"injectable",{enumerable:!0,get:a(function(){return Tw.default},"get")});var Aw=Z1();Object.defineProperty(Or,"registry",{enumerable:!0,get:a(function(){return Aw.default},"get")});var xw=e2();Object.defineProperty(Or,"singleton",{enumerable:!0,get:a(function(){return xw.default},"get")});var Cw=t2();Object.defineProperty(Or,"injectAll",{enumerable:!0,get:a(function(){return Cw.default},"get")});var Ow=r2();Object.defineProperty(Or,"injectAllWithTransform",{enumerable:!0,get:a(function(){return Ow.default},"get")});var Fw=i2();Object.defineProperty(Or,"injectWithTransform",{enumerable:!0,get:a(function(){return Fw.default},"get")});var Pw=n2();Object.defineProperty(Or,"scoped",{enumerable:!0,get:a(function(){return Pw.default},"get")})});var a2=y(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});function Dw(r){let e;return t=>(e==null&&(e=r(t)),e)}a(Dw,"instanceCachingFactory");Mf.default=Dw});var o2=y(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});function Rw(r){let e=new WeakMap;return t=>{let i=e.get(t);return i==null&&(i=r(t),e.set(t,i)),i}}a(Rw,"instancePerContainerCachingFactory");Lf.default=Rw});var c2=y(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});function Iw(r,e,t,i=!0){let n,s;return o=>{let c=r(o);return(!i||s!==c)&&((s=c)?n=o.resolve(e):n=o.resolve(t)),n}}a(Iw,"predicateAwareClassFactory");qf.default=Iw});var u2=y(oa=>{"use strict";Object.defineProperty(oa,"__esModule",{value:!0});var Nw=a2();Object.defineProperty(oa,"instanceCachingFactory",{enumerable:!0,get:a(function(){return Nw.default},"get")});var kw=o2();Object.defineProperty(oa,"instancePerContainerCachingFactory",{enumerable:!0,get:a(function(){return kw.default},"get")});var jw=c2();Object.defineProperty(oa,"predicateAwareClassFactory",{enumerable:!0,get:a(function(){return jw.default},"get")})});var Ke=y(Ki=>{"use strict";Object.defineProperty(Ki,"__esModule",{value:!0});var Vf=(zo(),Fl(Ho));if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var Mw=$1();Object.defineProperty(Ki,"Lifecycle",{enumerable:!0,get:a(function(){return Mw.Lifecycle},"get")});Vf.__exportStar(s2(),Ki);Vf.__exportStar(u2(),Ki);Vf.__exportStar(gf(),Ki);var Lw=Jo();Object.defineProperty(Ki,"delay",{enumerable:!0,get:a(function(){return Lw.delay},"get")});var qw=zi();Object.defineProperty(Ki,"container",{enumerable:!0,get:a(function(){return qw.instance},"get")})});var l2=y(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});Uf.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var f2=y(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});Bf.default="00000000-0000-0000-0000-000000000000"});var h2=y($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});$f.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var ca=y(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});var Vw=h2();function Uw(r){return typeof r=="string"&&Vw.default.test(r)}a(Uw,"validate");Gf.default=Uw});var ua=y(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});var Bw=ca();function $w(r){if(!(0,Bw.default)(r))throw TypeError("Invalid UUID");let e;return Uint8Array.of((e=parseInt(r.slice(0,8),16))>>>24,e>>>16&255,e>>>8&255,e&255,(e=parseInt(r.slice(9,13),16))>>>8,e&255,(e=parseInt(r.slice(14,18),16))>>>8,e&255,(e=parseInt(r.slice(19,23),16))>>>8,e&255,(e=parseInt(r.slice(24,36),16))/1099511627776&255,e/4294967296&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255)}a($w,"parse");Wf.default=$w});var Ri=y(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.unsafeStringify=void 0;var Gw=ca(),At=[];for(let r=0;r<256;++r)At.push((r+256).toString(16).slice(1));function d2(r,e=0){return(At[r[e+0]]+At[r[e+1]]+At[r[e+2]]+At[r[e+3]]+"-"+At[r[e+4]]+At[r[e+5]]+"-"+At[r[e+6]]+At[r[e+7]]+"-"+At[r[e+8]]+At[r[e+9]]+"-"+At[r[e+10]]+At[r[e+11]]+At[r[e+12]]+At[r[e+13]]+At[r[e+14]]+At[r[e+15]]).toLowerCase()}a(d2,"unsafeStringify");la.unsafeStringify=d2;function Ww(r,e=0){let t=d2(r,e);if(!(0,Gw.default)(t))throw TypeError("Stringified UUID is invalid");return t}a(Ww,"stringify");la.default=Ww});var fc=y(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});var Hw=require("crypto"),lc=new Uint8Array(256),uc=lc.length;function zw(){return uc>lc.length-16&&((0,Hw.randomFillSync)(lc),uc=0),lc.slice(uc,uc+=16)}a(zw,"rng");Hf.default=zw});var zf=y(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});ha.updateV1State=void 0;var p2=fc(),Kw=Ri(),fa={};function Yw(r,e,t){let i,n=r?._v6??!1;if(r){let s=Object.keys(r);s.length===1&&s[0]==="_v6"&&(r=void 0)}if(r)i=m2(r.random??r.rng?.()??(0,p2.default)(),r.msecs,r.nsecs,r.clockseq,r.node,e,t);else{let s=Date.now(),o=(0,p2.default)();g2(fa,s,o),i=m2(o,fa.msecs,fa.nsecs,n?void 0:fa.clockseq,n?void 0:fa.node,e,t)}return e??(0,Kw.unsafeStringify)(i)}a(Yw,"v1");function g2(r,e,t){return r.msecs??=-1/0,r.nsecs??=0,e===r.msecs?(r.nsecs++,r.nsecs>=1e4&&(r.node=void 0,r.nsecs=0)):e>r.msecs?r.nsecs=0:e<r.msecs&&(r.node=void 0),r.node||(r.node=t.slice(10,16),r.node[0]|=1,r.clockseq=(t[8]<<8|t[9])&16383),r.msecs=e,r}a(g2,"updateV1State");ha.updateV1State=g2;function m2(r,e,t,i,n,s,o=0){if(r.length<16)throw new Error("Random bytes length must be >= 16");if(!s)s=new Uint8Array(16),o=0;else if(o<0||o+16>s.length)throw new RangeError(`UUID byte range ${o}:${o+15} is out of buffer bounds`);e??=Date.now(),t??=0,i??=(r[8]<<8|r[9])&16383,n??=r.slice(10,16),e+=122192928e5;let c=((e&268435455)*1e4+t)%4294967296;s[o++]=c>>>24&255,s[o++]=c>>>16&255,s[o++]=c>>>8&255,s[o++]=c&255;let u=e/4294967296*1e4&268435455;s[o++]=u>>>8&255,s[o++]=u&255,s[o++]=u>>>24&15|16,s[o++]=u>>>16&255,s[o++]=i>>>8|128,s[o++]=i&255;for(let f=0;f<6;++f)s[o++]=n[f];return s}a(m2,"v1Bytes");ha.default=Yw});var Yf=y(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});var Qw=ua(),Jw=Ri();function Xw(r){let e=typeof r=="string"?(0,Qw.default)(r):r,t=Zw(e);return typeof r=="string"?(0,Jw.unsafeStringify)(t):t}a(Xw,"v1ToV6");Kf.default=Xw;function Zw(r){return Uint8Array.of((r[6]&15)<<4|r[7]>>4&15,(r[7]&15)<<4|(r[4]&240)>>4,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,(r[1]&15)<<4|(r[2]&240)>>4,96|r[2]&15,r[3],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}a(Zw,"_v1ToV6")});var y2=y(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});var eE=require("crypto");function tE(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),(0,eE.createHash)("md5").update(r).digest()}a(tE,"md5");Qf.default=tE});var da=y(Ii=>{"use strict";Object.defineProperty(Ii,"__esModule",{value:!0});Ii.URL=Ii.DNS=Ii.stringToBytes=void 0;var _2=ua(),rE=Ri();function v2(r){r=unescape(encodeURIComponent(r));let e=new Uint8Array(r.length);for(let t=0;t<r.length;++t)e[t]=r.charCodeAt(t);return e}a(v2,"stringToBytes");Ii.stringToBytes=v2;Ii.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Ii.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function iE(r,e,t,i,n,s){let o=typeof t=="string"?v2(t):t,c=typeof i=="string"?(0,_2.default)(i):i;if(typeof i=="string"&&(i=(0,_2.default)(i)),i?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+o.length);if(u.set(c),u.set(o,c.length),u=e(u),u[6]=u[6]&15|r,u[8]=u[8]&63|128,n){s=s||0;for(let f=0;f<16;++f)n[s+f]=u[f];return n}return(0,rE.unsafeStringify)(u)}a(iE,"v35");Ii.default=iE});var S2=y(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.URL=On.DNS=void 0;var nE=y2(),Jf=da(),b2=da();Object.defineProperty(On,"DNS",{enumerable:!0,get:a(function(){return b2.DNS},"get")});Object.defineProperty(On,"URL",{enumerable:!0,get:a(function(){return b2.URL},"get")});function Xf(r,e,t,i){return(0,Jf.default)(48,nE.default,r,e,t,i)}a(Xf,"v3");Xf.DNS=Jf.DNS;Xf.URL=Jf.URL;On.default=Xf});var w2=y(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});var sE=require("crypto");Zf.default={randomUUID:sE.randomUUID}});var T2=y(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});var E2=w2(),aE=fc(),oE=Ri();function cE(r,e,t){if(E2.default.randomUUID&&!e&&!r)return E2.default.randomUUID();r=r||{};let i=r.random??r.rng?.()??(0,aE.default)();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let n=0;n<16;++n)e[t+n]=i[n];return e}return(0,oE.unsafeStringify)(i)}a(cE,"v4");eh.default=cE});var A2=y(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});var uE=require("crypto");function lE(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),(0,uE.createHash)("sha1").update(r).digest()}a(lE,"sha1");th.default=lE});var C2=y(Fn=>{"use strict";Object.defineProperty(Fn,"__esModule",{value:!0});Fn.URL=Fn.DNS=void 0;var fE=A2(),rh=da(),x2=da();Object.defineProperty(Fn,"DNS",{enumerable:!0,get:a(function(){return x2.DNS},"get")});Object.defineProperty(Fn,"URL",{enumerable:!0,get:a(function(){return x2.URL},"get")});function ih(r,e,t,i){return(0,rh.default)(80,fE.default,r,e,t,i)}a(ih,"v5");ih.DNS=rh.DNS;ih.URL=rh.URL;Fn.default=ih});var O2=y(nh=>{"use strict";Object.defineProperty(nh,"__esModule",{value:!0});var hE=Ri(),dE=zf(),pE=Yf();function mE(r,e,t){r??={},t??=0;let i=(0,dE.default)({...r,_v6:!0},new Uint8Array(16));if(i=(0,pE.default)(i),e){for(let n=0;n<16;n++)e[t+n]=i[n];return e}return(0,hE.unsafeStringify)(i)}a(mE,"v6");nh.default=mE});var F2=y(sh=>{"use strict";Object.defineProperty(sh,"__esModule",{value:!0});var gE=ua(),yE=Ri();function _E(r){let e=typeof r=="string"?(0,gE.default)(r):r,t=vE(e);return typeof r=="string"?(0,yE.unsafeStringify)(t):t}a(_E,"v6ToV1");sh.default=_E;function vE(r){return Uint8Array.of((r[3]&15)<<4|r[4]>>4&15,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|r[6]&15,r[7],(r[1]&15)<<4|(r[2]&240)>>4,(r[2]&15)<<4|(r[3]&240)>>4,16|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}a(vE,"_v6ToV1")});var I2=y(pa=>{"use strict";Object.defineProperty(pa,"__esModule",{value:!0});pa.updateV7State=void 0;var P2=fc(),bE=Ri(),ah={};function SE(r,e,t){let i;if(r)i=D2(r.random??r.rng?.()??(0,P2.default)(),r.msecs,r.seq,e,t);else{let n=Date.now(),s=(0,P2.default)();R2(ah,n,s),i=D2(s,ah.msecs,ah.seq,e,t)}return e??(0,bE.unsafeStringify)(i)}a(SE,"v7");function R2(r,e,t){return r.msecs??=-1/0,r.seq??=0,e>r.msecs?(r.seq=t[6]<<23|t[7]<<16|t[8]<<8|t[9],r.msecs=e):(r.seq=r.seq+1|0,r.seq===0&&r.msecs++),r}a(R2,"updateV7State");pa.updateV7State=R2;function D2(r,e,t,i,n=0){if(r.length<16)throw new Error("Random bytes length must be >= 16");if(!i)i=new Uint8Array(16),n=0;else if(n<0||n+16>i.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);return e??=Date.now(),t??=r[6]*127<<24|r[7]<<16|r[8]<<8|r[9],i[n++]=e/1099511627776&255,i[n++]=e/4294967296&255,i[n++]=e/16777216&255,i[n++]=e/65536&255,i[n++]=e/256&255,i[n++]=e&255,i[n++]=112|t>>>28&15,i[n++]=t>>>20&255,i[n++]=128|t>>>14&63,i[n++]=t>>>6&255,i[n++]=t<<2&255|r[10]&3,i[n++]=r[11],i[n++]=r[12],i[n++]=r[13],i[n++]=r[14],i[n++]=r[15],i}a(D2,"v7Bytes");pa.default=SE});var N2=y(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});var wE=ca();function EE(r){if(!(0,wE.default)(r))throw TypeError("Invalid UUID");return parseInt(r.slice(14,15),16)}a(EE,"version");oh.default=EE});var ci=y(qe=>{"use strict";Object.defineProperty(qe,"__esModule",{value:!0});qe.version=qe.validate=qe.v7=qe.v6ToV1=qe.v6=qe.v5=qe.v4=qe.v3=qe.v1ToV6=qe.v1=qe.stringify=qe.parse=qe.NIL=qe.MAX=void 0;var TE=l2();Object.defineProperty(qe,"MAX",{enumerable:!0,get:a(function(){return TE.default},"get")});var AE=f2();Object.defineProperty(qe,"NIL",{enumerable:!0,get:a(function(){return AE.default},"get")});var xE=ua();Object.defineProperty(qe,"parse",{enumerable:!0,get:a(function(){return xE.default},"get")});var CE=Ri();Object.defineProperty(qe,"stringify",{enumerable:!0,get:a(function(){return CE.default},"get")});var OE=zf();Object.defineProperty(qe,"v1",{enumerable:!0,get:a(function(){return OE.default},"get")});var FE=Yf();Object.defineProperty(qe,"v1ToV6",{enumerable:!0,get:a(function(){return FE.default},"get")});var PE=S2();Object.defineProperty(qe,"v3",{enumerable:!0,get:a(function(){return PE.default},"get")});var DE=T2();Object.defineProperty(qe,"v4",{enumerable:!0,get:a(function(){return DE.default},"get")});var RE=C2();Object.defineProperty(qe,"v5",{enumerable:!0,get:a(function(){return RE.default},"get")});var IE=O2();Object.defineProperty(qe,"v6",{enumerable:!0,get:a(function(){return IE.default},"get")});var NE=F2();Object.defineProperty(qe,"v6ToV1",{enumerable:!0,get:a(function(){return NE.default},"get")});var kE=I2();Object.defineProperty(qe,"v7",{enumerable:!0,get:a(function(){return kE.default},"get")});var jE=ca();Object.defineProperty(qe,"validate",{enumerable:!0,get:a(function(){return jE.default},"get")});var ME=N2();Object.defineProperty(qe,"version",{enumerable:!0,get:a(function(){return ME.default},"get")})});var Fr=y(hc=>{"use strict";Object.defineProperty(hc,"__esModule",{value:!0});hc.MetadataHelpers=void 0;var ch=class{static{a(this,"MetadataHelpers")}static findAllReferencingProperties(e,t){let i=[];for(let[n,s]of Object.entries(e))this.containsReference(s,t)&&i.push(n);return i}static findReferencingProperty(e,t){for(let[i,n]of Object.entries(e))if(this.containsReference(n,t))return i}static containsReference(e,t){if(!e)return!1;let i=t.replace(/\.md$/,"");if(typeof e=="string"){let n=/\[\[([^\]]+)\]\]/g,s;for(;(s=n.exec(e))!==null;){let c=s[1].split("|")[0].trim();if(c===i||c.endsWith(`/${i}`))return!0}return!1}return Array.isArray(e)?e.some(n=>this.containsReference(n,t)):!1}static isAssetArchived(e){if(e?.exo__Asset_isArchived===!0)return!0;let t=e?.archived;if(t==null)return!1;if(typeof t=="boolean")return t;if(typeof t=="number")return t!==0;if(typeof t=="string"){let i=t.toLowerCase().trim();return i==="true"||i==="yes"||i==="1"}return!1}static getPropertyValue(e,t){return t==="Name"||t==="title"?e.title:t==="created"?e.created:t==="modified"?e.modified:t==="path"?e.path:e.metadata?.[t]}static ensureQuoted(e){return!e||e==='""'?'""':e.startsWith('"')&&e.endsWith('"')?e:`"${e}"`}static buildFileContent(e,t){let i=Object.entries(e).map(([s,o])=>{if(Array.isArray(o)){let c=o.map(u=>`  - ${u}`).join(`
`);return`${s}:
${c}`}return`${s}: ${o}`}).join(`
`),n=t?`
${t}
`:`
`;return`---
${i}
---
${n}`}};hc.MetadataHelpers=ch});var ur=y(dc=>{"use strict";Object.defineProperty(dc,"__esModule",{value:!0});dc.DateFormatter=void 0;var uh=class r{static{a(this,"DateFormatter")}static toLocalTimestamp(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0"),c=String(e.getSeconds()).padStart(2,"0");return`${t}-${i}-${n}T${s}:${o}:${c}`}static toDateWikilink(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`"[[${t}-${i}-${n}]]"`}static getTodayWikilink(){return r.toDateWikilink(new Date)}static toDateString(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${i}-${n}`}static parseWikilink(e){let i=e.replace(/^["']|["']$/g,"").match(/\[\[(\d{4}-\d{2}-\d{2})\]\]/);return i?i[1]:null}static addDays(e,t){let i=new Date(e);return i.setDate(i.getDate()+t),i}static isSameDay(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}static getTodayStartTimestamp(){let e=new Date;return e.setHours(0,0,0,0),r.toLocalTimestamp(e)}static toTimestampAtStartOfDay(e){let t=e.split("-").map(Number);if(t.length!==3||t.some(isNaN))throw new Error(`Invalid date format: ${e}. Expected YYYY-MM-DD`);let[i,n,s]=t,o=new Date(i,n-1,s,0,0,0,0);if(isNaN(o.getTime()))throw new Error(`Invalid date values: ${e}`);return r.toLocalTimestamp(o)}};dc.DateFormatter=uh});var ma=y(pc=>{"use strict";Object.defineProperty(pc,"__esModule",{value:!0});pc.MetadataExtractor=void 0;var LE=Fr(),lh=class{static{a(this,"MetadataExtractor")}constructor(e){this.vault=e}extractMetadata(e){return e?this.vault.getFrontmatter(e)||{}:{}}extractInstanceClass(e){return e.exo__Instance_class||null}extractStatus(e){return e.ems__Effort_status||null}extractIsArchived(e){return LE.MetadataHelpers.isAssetArchived(e)}static extractIsDefinedBy(e){let t=e.exo__Asset_isDefinedBy||'""';return Array.isArray(t)&&(t=t[0]||'""'),t}extractExpectedFolder(e){let t=e.exo__Asset_isDefinedBy;if(!t)return null;let i=Array.isArray(t)?t[0]:t;if(!i||typeof i!="string")return null;let n=i.replace(/["'[\]]/g,"").trim();if(!n)return null;let s=n.split("/");return s.pop(),s.join("/")}extractCommandVisibilityContext(e){let t=this.extractMetadata(e),i=this.extractInstanceClass(t),n=this.extractStatus(t),s=this.extractIsArchived(t),o=e.parent?.path||"",c=this.extractExpectedFolder(t);return{instanceClass:i,currentStatus:n,metadata:t,isArchived:s,currentFolder:o,expectedFolder:c}}extractCache(e){return e?this.vault.getFrontmatter(e):null}};pc.MetadataExtractor=lh});var mc=y(Pn=>{"use strict";var qE=Pn&&Pn.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.TaskFrontmatterGenerator=void 0;var VE=Ke(),k2=ci(),fh=ur(),UE=wn(),j2=ma(),M2=Fr(),gt=Dt(),BE={[gt.AssetClass.AREA]:"ems__Effort_area",[gt.AssetClass.PROJECT]:"ems__Effort_parent",[gt.AssetClass.TASK_PROTOTYPE]:"exo__Asset_prototype",[gt.AssetClass.MEETING_PROTOTYPE]:"exo__Asset_prototype",[gt.AssetClass.EVENT_PROTOTYPE]:"exo__Asset_prototype"},$E={[gt.AssetClass.AREA]:gt.AssetClass.TASK,[gt.AssetClass.PROJECT]:gt.AssetClass.TASK,[gt.AssetClass.TASK_PROTOTYPE]:gt.AssetClass.TASK,[gt.AssetClass.MEETING_PROTOTYPE]:gt.AssetClass.MEETING,[gt.AssetClass.EVENT_PROTOTYPE]:gt.AssetClass.EVENT},hh=class{static{a(this,"TaskFrontmatterGenerator")}generateTaskFrontmatter(e,t,i,n,s,o,c){let u=new Date,f=fh.DateFormatter.toLocalTimestamp(u),l=j2.MetadataExtractor.extractIsDefinedBy(e),h=UE.WikiLinkHelpers.normalize(i),p=BE[h],g=$E[h]||gt.AssetClass.TASK,v={};v.exo__Asset_isDefinedBy=M2.MetadataHelpers.ensureQuoted(l),v.exo__Asset_uid=s||(0,k2.v4)(),v.exo__Asset_createdAt=f,v.exo__Instance_class=[`"[[${g}]]"`],v.ems__Effort_status='"[[ems__EffortStatusDraft]]"',p&&(v[p]=`"[[${t}]]"`);let S=n;if(g===gt.AssetClass.MEETING&&(!n||n.trim()==="")){let x=e.exo__Asset_label||t,F=fh.DateFormatter.toDateString(u);S=`${x} ${F}`}if(S&&S.trim()!==""){let x=S.trim();v.exo__Asset_label=x,v.aliases=[x]}return o&&(v.ems__Task_size=o),c&&(v.ems__Effort_plannedStartTimestamp=c),v}generateRelatedTaskFrontmatter(e,t,i,n,s){let o=new Date,c=fh.DateFormatter.toLocalTimestamp(o),u=j2.MetadataExtractor.extractIsDefinedBy(e),f={};if(f.exo__Asset_isDefinedBy=M2.MetadataHelpers.ensureQuoted(u),f.exo__Asset_uid=n||(0,k2.v4)(),f.exo__Asset_createdAt=c,f.exo__Instance_class=[`"[[${gt.AssetClass.TASK}]]"`],f.ems__Effort_status='"[[ems__EffortStatusDraft]]"',f.exo__Asset_relates=[`"[[${t}]]"`],i&&i.trim()!==""){let l=i.trim();f.exo__Asset_label=l,f.aliases=[l]}return s&&(f.ems__Task_size=s),f}};Pn.TaskFrontmatterGenerator=hh;Pn.TaskFrontmatterGenerator=hh=qE([(0,VE.injectable)()],hh)});var gc=y(Dn=>{"use strict";var GE=Dn&&Dn.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Dn,"__esModule",{value:!0});Dn.AlgorithmExtractor=void 0;var WE=Ke(),dh=class{static{a(this,"AlgorithmExtractor")}extractH2Section(e,t){let i=e.split(`
`),n=`## ${t}`,s=!1,o=[];for(let u of i){if(u.trim()===n){s=!0;continue}if(s){if(u.startsWith("## ")||u.startsWith("# "))break;o.push(u)}}return o.length===0?null:o.join(`
`).trim()||null}};Dn.AlgorithmExtractor=dh;Dn.AlgorithmExtractor=dh=GE([(0,WE.injectable)()],dh)});var q2=y(L2=>{"use strict";Object.defineProperty(L2,"__esModule",{value:!0})});var Xe=y(yc=>{"use strict";Object.defineProperty(yc,"__esModule",{value:!0});yc.DI_TOKENS=void 0;yc.DI_TOKENS={IFileSystemAdapter:Symbol.for("IFileSystemAdapter"),IVaultAdapter:Symbol.for("IVaultAdapter"),IVaultContext:Symbol.for("IVaultContext"),IMultiVaultManager:Symbol.for("IMultiVaultManager"),ILogger:Symbol.for("ILogger"),IEventBus:Symbol.for("IEventBus"),IConfiguration:Symbol.for("IConfiguration"),INotificationService:Symbol.for("INotificationService"),TaskCreationService:Symbol.for("TaskCreationService"),ProjectCreationService:Symbol.for("ProjectCreationService"),AreaCreationService:Symbol.for("AreaCreationService"),ClassCreationService:Symbol.for("ClassCreationService"),ConceptCreationService:Symbol.for("ConceptCreationService"),FleetingNoteCreationService:Symbol.for("FleetingNoteCreationService"),SupervisionCreationService:Symbol.for("SupervisionCreationService"),TaskFrontmatterGenerator:Symbol.for("TaskFrontmatterGenerator"),AlgorithmExtractor:Symbol.for("AlgorithmExtractor"),TaskStatusService:Symbol.for("TaskStatusService"),EffortStatusWorkflow:Symbol.for("EffortStatusWorkflow"),StatusTimestampService:Symbol.for("StatusTimestampService"),PropertyCleanupService:Symbol.for("PropertyCleanupService"),FolderRepairService:Symbol.for("FolderRepairService"),LabelToAliasService:Symbol.for("LabelToAliasService"),RenameToUidService:Symbol.for("RenameToUidService"),PlanningService:Symbol.for("PlanningService"),EffortVotingService:Symbol.for("EffortVotingService"),SessionEventService:Symbol.for("SessionEventService"),AssetConversionService:Symbol.for("AssetConversionService"),NoteToRDFConverter:Symbol.for("NoteToRDFConverter"),AreaHierarchyBuilder:Symbol.for("AreaHierarchyBuilder"),URIConstructionService:Symbol.for("URIConstructionService")}});var mh=y(xt=>{"use strict";var HE=xt&&xt.__createBinding||(Object.create?(function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:a(function(){return e[t]},"get")}),Object.defineProperty(r,i,n)}):(function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]})),zE=xt&&xt.__setModuleDefault||(Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e}),KE=xt&&xt.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},YE=xt&&xt.__importStar||(function(){var r=a(function(e){return r=Object.getOwnPropertyNames||function(t){var i=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[i.length]=n);return i},r(e)},"ownKeys");return function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i=r(e),n=0;n<i.length;n++)i[n]!=="default"&&HE(t,e,i[n]);return zE(t,e),t}})(),QE=xt&&xt.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},JE=xt&&xt.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(xt,"__esModule",{value:!0});xt.TaskCreationService=void 0;var V2=Ke(),U2=ci(),XE=wn(),B2=Fr(),ZE=Dt(),e4=mc(),t4=gc(),sR=YE(q2()),r4=Xe(),ph=class{static{a(this,"TaskCreationService")}constructor(e,t,i){this.vault=e,this.frontmatterGenerator=t,this.algorithmExtractor=i}async createTask(e,t,i,n,s,o){let c=(0,U2.v4)(),u=`${c}.md`,f=this.frontmatterGenerator.generateTaskFrontmatter(t,e.basename,i,n,c,s,o),l="";if(XE.WikiLinkHelpers.normalize(i)===ZE.AssetClass.TASK_PROTOTYPE){let x=await this.vault.read(e),F=this.algorithmExtractor.extractH2Section(x,"Algorithm");F&&(l=`## Algorithm

${F}`)}let p=B2.MetadataHelpers.buildFileContent(f,l),g=e.parent?.path||"",v=g?`${g}/${u}`:u;return await this.vault.create(v,p)}async createRelatedTask(e,t,i,n){let s=(0,U2.v4)(),o=`${s}.md`,c=this.frontmatterGenerator.generateRelatedTaskFrontmatter(t,e.basename,i,s,n),u=B2.MetadataHelpers.buildFileContent(c),f=e.parent?.path||"",l=f?`${f}/${o}`:o,h=await this.vault.create(l,u);return await this.addRelationToSourceFile(e,s),h}generateTaskFrontmatter(e,t,i,n,s,o,c){return this.frontmatterGenerator.generateTaskFrontmatter(e,t,i,n,s,o,c)}generateRelatedTaskFrontmatter(e,t,i,n,s){return this.frontmatterGenerator.generateRelatedTaskFrontmatter(e,t,i,n,s)}extractH2Section(e,t){return this.algorithmExtractor.extractH2Section(e,t)}async addRelationToSourceFile(e,t){let i=await this.vault.read(e),n=this.addRelationToFrontmatter(i,t);await this.vault.modify(e,n)}addRelationToFrontmatter(e,t){let i=/^---\r?\n([\s\S]*?)\r?\n---/,n=e.match(i),s=e.includes(`\r
`)?`\r
`:`
`;if(!n)return`---${s}exo__Asset_relates:${s}  - "[[${t}]]"${s}---${s}${e}`;let c=n[1];if(c.includes("exo__Asset_relates:")){let u=c.match(/exo__Asset_relates:\r?\n((?: {2}- .*\r?\n)*)/);if(u){let f=u[1],l=`  - "[[${t}]]"${s}`;c=c.replace(/exo__Asset_relates:\r?\n((?: {2}- .*\r?\n)*)/,`exo__Asset_relates:${s}${f}${l}`)}}else c+=`${s}exo__Asset_relates:${s}  - "[[${t}]]"`;return e.replace(i,`---${s}${c}${s}---`)}};xt.TaskCreationService=ph;xt.TaskCreationService=ph=KE([(0,V2.injectable)(),JE(0,(0,V2.inject)(r4.DI_TOKENS.IVaultAdapter)),QE("design:paramtypes",[Object,e4.TaskFrontmatterGenerator,t4.AlgorithmExtractor])],ph)});var yh=y(Pr=>{"use strict";var i4=Pr&&Pr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},n4=Pr&&Pr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},s4=Pr&&Pr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Pr,"__esModule",{value:!0});Pr.ProjectCreationService=void 0;var $2=Ke(),G2=ci(),a4=wn(),_c=Dt(),o4=ur(),c4=ma(),W2=Fr(),u4=Xe(),l4={[_c.AssetClass.AREA]:"ems__Effort_area",[_c.AssetClass.INITIATIVE]:"ems__Effort_parent",[_c.AssetClass.PROJECT]:"ems__Effort_parent"},gh=class{static{a(this,"ProjectCreationService")}constructor(e){this.vault=e}async createProject(e,t,i,n){let s=(0,G2.v4)(),o=`${s}.md`,c=this.generateProjectFrontmatter(t,e.basename,i,n,s),u=W2.MetadataHelpers.buildFileContent(c),f=e.parent?.path||"",l=f?`${f}/${o}`:o;return await this.vault.create(l,u)}generateProjectFrontmatter(e,t,i,n,s){let o=new Date,c=o4.DateFormatter.toLocalTimestamp(o),u=c4.MetadataExtractor.extractIsDefinedBy(e),f=a4.WikiLinkHelpers.normalize(i),l=l4[f]||"ems__Effort_area",h={};if(h.exo__Asset_isDefinedBy=W2.MetadataHelpers.ensureQuoted(u),h.exo__Asset_uid=s||(0,G2.v4)(),h.exo__Asset_createdAt=c,h.exo__Instance_class=[`"[[${_c.AssetClass.PROJECT}]]"`],h.ems__Effort_status='"[[ems__EffortStatusDraft]]"',h[l]=`"[[${t}]]"`,n&&n.trim()!==""){let p=n.trim();h.exo__Asset_label=p,h.aliases=[p]}return h}};Pr.ProjectCreationService=gh;Pr.ProjectCreationService=gh=i4([(0,$2.injectable)(),s4(0,(0,$2.inject)(u4.DI_TOKENS.IVaultAdapter)),n4("design:paramtypes",[Object])],gh)});var ls=y(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.FrontmatterService=void 0;var vc=class r{static{a(this,"FrontmatterService")}parse(e){let t=e.match(r.FRONTMATTER_REGEX);return t?{exists:!0,content:t[1],originalContent:e}:{exists:!1,content:"",originalContent:e}}updateProperty(e,t,i){let n=this.parse(e);if(!n.exists)return this.createFrontmatter(e,{[t]:i});let s=n.content;if(this.hasProperty(s,t)){let o=new RegExp(`${this.escapeRegex(t)}:.*$`,"m");s=s.replace(o,`${t}: ${i}`)}else{let o=s.length>0?`
`:"";s+=`${o}${t}: ${i}`}return e.replace(r.FRONTMATTER_REGEX,`---
${s}
---`)}addProperty(e,t,i){return this.updateProperty(e,t,i)}removeProperty(e,t){let i=this.parse(e);if(!i.exists||!this.hasProperty(i.content,t))return e;let n=new RegExp(`
?${this.escapeRegex(t)}:.*(?:
 {2}- .*)*`,"gm"),s=i.content.replace(n,"");return e.replace(r.FRONTMATTER_REGEX,`---
${s}
---`)}hasProperty(e,t){return e.includes(`${t}:`)}createFrontmatter(e,t){let n=`---
${Object.entries(t).map(([o,c])=>`${o}: ${c}`).join(`
`)}
---`,s=e.startsWith(`
`)?"":`
`;return`${n}${s}${e}`}getPropertyValue(e,t){let i=new RegExp(`${this.escapeRegex(t)}:\\s*(.*)$`,"m"),n=e.match(i);return n?n[1].trim():null}escapeRegex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}};bc.FrontmatterService=vc;vc.FRONTMATTER_REGEX=/^---\n([\s\S]*?)\n---/});var Sc=y(Rn=>{"use strict";var f4=Rn&&Rn.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Rn,"__esModule",{value:!0});Rn.EffortStatusWorkflow=void 0;var h4=Ke(),lr=Dt(),_h=class{static{a(this,"EffortStatusWorkflow")}getPreviousStatus(e,t){let i=this.normalizeStatus(e);if(i===lr.EffortStatus.DRAFT)return null;if(i===lr.EffortStatus.BACKLOG)return this.wrapStatus(lr.EffortStatus.DRAFT);if(i===lr.EffortStatus.ANALYSIS)return this.wrapStatus(lr.EffortStatus.BACKLOG);if(i===lr.EffortStatus.TODO)return this.wrapStatus(lr.EffortStatus.ANALYSIS);if(i===lr.EffortStatus.DOING)return this.hasInstanceClass(t,lr.AssetClass.PROJECT)?this.wrapStatus(lr.EffortStatus.TODO):this.wrapStatus(lr.EffortStatus.BACKLOG);if(i===lr.EffortStatus.DONE)return this.wrapStatus(lr.EffortStatus.DOING)}normalizeStatus(e){return e.replace(/["'[\]]/g,"").trim()}wrapStatus(e){return`"[[${e}]]"`}hasInstanceClass(e,t){return e?(Array.isArray(e)?e:[e]).some(n=>n.replace(/["'[\]]/g,"").trim()===t):!1}};Rn.EffortStatusWorkflow=_h;Rn.EffortStatusWorkflow=_h=f4([(0,h4.injectable)()],_h)});var wc=y(Dr=>{"use strict";var d4=Dr&&Dr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},p4=Dr&&Dr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},m4=Dr&&Dr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.StatusTimestampService=void 0;var H2=Ke(),g4=ls(),ga=ur(),y4=Xe(),vh=class{static{a(this,"StatusTimestampService")}constructor(e){this.vault=e,this.frontmatterService=new g4.FrontmatterService}async addStartTimestamp(e){let t=await this.vault.read(e),i=ga.DateFormatter.toLocalTimestamp(new Date),n=this.frontmatterService.updateProperty(t,"ems__Effort_startTimestamp",i);await this.vault.modify(e,n)}async addEndTimestamp(e,t){let i=await this.vault.read(e),n=t||new Date,s=ga.DateFormatter.toLocalTimestamp(n),o=this.frontmatterService.updateProperty(i,"ems__Effort_endTimestamp",s);await this.vault.modify(e,o)}async addResolutionTimestamp(e){let t=await this.vault.read(e),i=ga.DateFormatter.toLocalTimestamp(new Date),n=this.frontmatterService.updateProperty(t,"ems__Effort_resolutionTimestamp",i);await this.vault.modify(e,n)}async addEndAndResolutionTimestamps(e,t){let i=await this.vault.read(e),n=t||new Date,s=ga.DateFormatter.toLocalTimestamp(n),o=this.frontmatterService.updateProperty(i,"ems__Effort_endTimestamp",s);o=this.frontmatterService.updateProperty(o,"ems__Effort_resolutionTimestamp",s),await this.vault.modify(e,o)}async removeStartTimestamp(e){let t=await this.vault.read(e),i=this.frontmatterService.removeProperty(t,"ems__Effort_startTimestamp");await this.vault.modify(e,i)}async removeEndTimestamp(e){let t=await this.vault.read(e),i=this.frontmatterService.removeProperty(t,"ems__Effort_endTimestamp");await this.vault.modify(e,i)}async removeResolutionTimestamp(e){let t=await this.vault.read(e),i=this.frontmatterService.removeProperty(t,"ems__Effort_resolutionTimestamp");await this.vault.modify(e,i)}async removeEndAndResolutionTimestamps(e){let t=await this.vault.read(e),i=this.frontmatterService.removeProperty(t,"ems__Effort_endTimestamp");i=this.frontmatterService.removeProperty(i,"ems__Effort_resolutionTimestamp"),await this.vault.modify(e,i)}async shiftPlannedEndTimestamp(e,t){let i=await this.vault.read(e),n=this.frontmatterService.parse(i);if(!n.exists)return;let s=this.frontmatterService.getPropertyValue(n.content,"ems__Effort_plannedEndTimestamp");if(!s)return;let o=new Date(s.replace(/["']/g,""));if(isNaN(o.getTime()))return;let c=new Date(o.getTime()+t),u=ga.DateFormatter.toLocalTimestamp(c),f=this.frontmatterService.updateProperty(i,"ems__Effort_plannedEndTimestamp",u);await this.vault.modify(e,f)}};Dr.StatusTimestampService=vh;Dr.StatusTimestampService=vh=d4([(0,H2.injectable)(),m4(0,(0,H2.inject)(y4.DI_TOKENS.IVaultAdapter)),p4("design:paramtypes",[Object])],vh)});var Sh=y(Rr=>{"use strict";var _4=Rr&&Rr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},v4=Rr&&Rr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},b4=Rr&&Rr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.TaskStatusService=void 0;var z2=Ke(),S4=ls(),In=ur(),w4=Sc(),E4=wc(),T4=Xe(),bh=class{static{a(this,"TaskStatusService")}constructor(e,t,i){this.vault=e,this.workflow=t,this.timestampService=i,this.frontmatterService=new S4.FrontmatterService}async setDraftStatus(e){await this.updateStatus(e,"ems__EffortStatusDraft")}async moveToBacklog(e){await this.updateStatus(e,"ems__EffortStatusBacklog")}async moveToAnalysis(e){await this.updateStatus(e,"ems__EffortStatusAnalysis")}async moveToToDo(e){await this.updateStatus(e,"ems__EffortStatusToDo")}async startEffort(e){let t=await this.vault.read(e),i=In.DateFormatter.toLocalTimestamp(new Date),n=this.frontmatterService.updateProperty(t,"ems__Effort_status",'"[[ems__EffortStatusDoing]]"');n=this.frontmatterService.updateProperty(n,"ems__Effort_startTimestamp",i),await this.vault.modify(e,n)}async markTaskAsDone(e){let t=await this.vault.read(e),i=In.DateFormatter.toLocalTimestamp(new Date),n=this.frontmatterService.updateProperty(t,"ems__Effort_status",'"[[ems__EffortStatusDone]]"');n=this.frontmatterService.updateProperty(n,"ems__Effort_endTimestamp",i),n=this.frontmatterService.updateProperty(n,"ems__Effort_resolutionTimestamp",i),await this.vault.modify(e,n)}async syncEffortEndTimestamp(e,t){await this.timestampService.addEndAndResolutionTimestamps(e,t)}async shiftPlannedEndTimestamp(e,t){await this.timestampService.shiftPlannedEndTimestamp(e,t)}async trashEffort(e){let t=await this.vault.read(e),i=In.DateFormatter.toLocalTimestamp(new Date),n=this.frontmatterService.updateProperty(t,"ems__Effort_status",'"[[ems__EffortStatusTrashed]]"');n=this.frontmatterService.updateProperty(n,"ems__Effort_resolutionTimestamp",i),await this.vault.modify(e,n)}async archiveTask(e){let t=await this.vault.read(e),i=this.frontmatterService.updateProperty(t,"archived","true");i=this.frontmatterService.removeProperty(i,"aliases"),await this.vault.modify(e,i)}async planOnToday(e){let t=await this.vault.read(e),i=In.DateFormatter.getTodayStartTimestamp(),n=this.frontmatterService.updateProperty(t,"ems__Effort_plannedStartTimestamp",i);await this.vault.modify(e,n)}async planForEvening(e){let t=await this.vault.read(e),i=new Date;i.setHours(19,0,0,0);let n=In.DateFormatter.toLocalTimestamp(i),s=this.frontmatterService.updateProperty(t,"ems__Effort_plannedStartTimestamp",n);await this.vault.modify(e,s)}async shiftDayBackward(e){await this.shiftDay(e,-1)}async shiftDayForward(e){await this.shiftDay(e,1)}async rollbackStatus(e){let t=await this.vault.read(e),i=this.extractCurrentStatus(t),n=this.extractInstanceClass(t);if(!i)throw new Error("No current status to rollback from");let s=this.workflow.getPreviousStatus(i,n);if(s===void 0)throw new Error("Cannot rollback from current status");let o=t;s===null?o=this.frontmatterService.removeProperty(o,"ems__Effort_status"):o=this.frontmatterService.updateProperty(o,"ems__Effort_status",s);let c=this.workflow.normalizeStatus(i);c==="ems__EffortStatusDone"?(o=this.frontmatterService.removeProperty(o,"ems__Effort_endTimestamp"),o=this.frontmatterService.removeProperty(o,"ems__Effort_resolutionTimestamp")):c==="ems__EffortStatusDoing"&&(o=this.frontmatterService.removeProperty(o,"ems__Effort_startTimestamp")),await this.vault.modify(e,o)}async updateStatus(e,t){let i=await this.vault.read(e),n=this.frontmatterService.updateProperty(i,"ems__Effort_status",`"[[${t}]]"`);await this.vault.modify(e,n)}async shiftDay(e,t){let i=await this.vault.read(e),n=this.extractPlannedStartTimestamp(i);if(!n)throw new Error("ems__Effort_plannedStartTimestamp property not found");let s=this.parseDateFromTimestamp(n);if(!s)throw new Error("Invalid date format in ems__Effort_plannedStartTimestamp");let o=In.DateFormatter.addDays(s,t);o.setHours(0,0,0,0);let c=In.DateFormatter.toLocalTimestamp(o),u=this.frontmatterService.updateProperty(i,"ems__Effort_plannedStartTimestamp",c);await this.vault.modify(e,u)}parseDateFromTimestamp(e){let t=new Date(e);return isNaN(t.getTime())?null:t}extractPlannedStartTimestamp(e){let t=this.frontmatterService.parse(e);return t.exists?this.frontmatterService.getPropertyValue(t.content,"ems__Effort_plannedStartTimestamp"):null}extractCurrentStatus(e){let t=this.frontmatterService.parse(e);return t.exists?this.frontmatterService.getPropertyValue(t.content,"ems__Effort_status"):null}extractInstanceClass(e){let t=this.frontmatterService.parse(e);if(!t.exists)return null;let i=t.content.match(/exo__Instance_class:\s*\n((?:\s*-\s*.*\n?)+)/);return i?i[1].split(`
`).filter(s=>s.trim()).map(s=>s.replace(/^\s*-\s*/,"").trim()):this.frontmatterService.getPropertyValue(t.content,"exo__Instance_class")}};Rr.TaskStatusService=bh;Rr.TaskStatusService=bh=_4([(0,z2.injectable)(),b4(0,(0,z2.inject)(T4.DI_TOKENS.IVaultAdapter)),v4("design:paramtypes",[Object,w4.EffortStatusWorkflow,E4.StatusTimestampService])],bh)});var Eh=y(Ir=>{"use strict";var A4=Ir&&Ir.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},x4=Ir&&Ir.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},C4=Ir&&Ir.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.AreaCreationService=void 0;var K2=Ke(),Y2=ci(),O4=Dt(),F4=ur(),P4=ma(),Q2=Fr(),D4=Xe(),wh=class{static{a(this,"AreaCreationService")}constructor(e){this.vault=e}async createChildArea(e,t,i){let n=(0,Y2.v4)(),s=`${n}.md`,o=this.generateChildAreaFrontmatter(t,e.basename,i,n),c=Q2.MetadataHelpers.buildFileContent(o),u=e.parent?.path||"",f=u?`${u}/${s}`:s;return await this.vault.create(f,c)}generateChildAreaFrontmatter(e,t,i,n){let s=new Date,o=F4.DateFormatter.toLocalTimestamp(s),c=P4.MetadataExtractor.extractIsDefinedBy(e),u={};if(u.exo__Asset_isDefinedBy=Q2.MetadataHelpers.ensureQuoted(c),u.exo__Asset_uid=n||(0,Y2.v4)(),u.exo__Asset_createdAt=o,u.exo__Instance_class=[`"[[${O4.AssetClass.AREA}]]"`],u.ems__Area_parent=`"[[${t}]]"`,i&&i.trim()!==""){let f=i.trim();u.exo__Asset_label=f,u.aliases=[f]}return u}};Ir.AreaCreationService=wh;Ir.AreaCreationService=wh=A4([(0,K2.injectable)(),C4(0,(0,K2.inject)(D4.DI_TOKENS.IVaultAdapter)),x4("design:paramtypes",[Object])],wh)});var Ah=y(Nr=>{"use strict";var R4=Nr&&Nr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},I4=Nr&&Nr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},N4=Nr&&Nr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.AreaHierarchyBuilder=void 0;var J2=Ke(),X2=Dt(),k4=Xe(),Th=class{static{a(this,"AreaHierarchyBuilder")}constructor(e){this.vault=e}buildHierarchy(e,t){let i=this.vault.getAbstractFileByPath(e);if(!this.isFile(i))return null;let n=this.vault.getFrontmatter(i)||{};if(this.extractInstanceClass(n)!==X2.AssetClass.AREA)return null;let o=this.collectAllAreasFromVault(),c=new Set;return this.buildTree(e,o,c,0)}isFile(e){return e&&typeof e=="object"&&"basename"in e&&"path"in e}extractInstanceClass(e){let t=e.exo__Instance_class||"";return Array.isArray(t)?this.cleanWikiLink(t[0]||""):this.cleanWikiLink(t)}cleanWikiLink(e){return typeof e!="string"?"":e.replace(/^\[\[|\]\]$/g,"").trim()}collectAllAreasFromVault(){let e=new Map,t=new Map,i=this.vault.getAllFiles();for(let n of i){let s=this.vault.getFrontmatter(n)||{};if(this.extractInstanceClass(s)===X2.AssetClass.AREA){let c=this.extractParentPath(s);e.set(n.path,{path:n.path,title:n.basename,label:s.exo__Asset_label||void 0,isArchived:this.isArchived(s),depth:0,parentPath:c||void 0}),t.set(n.basename,n.path)}}for(let[,n]of e.entries())n.parentPath&&t.has(n.parentPath)&&(n.parentPath=t.get(n.parentPath));return e}extractParentPath(e){let t=e.ems__Area_parent;if(!t)return null;if(Array.isArray(t)){let i=t[0]||"";return this.cleanWikiLink(i)}return this.cleanWikiLink(t)}isArchived(e){let t=e.exo__Asset_archived;if(t===!0||t==="true")return!0;if(Array.isArray(t)&&t.length>0){let i=t[0];return i===!0||i==="true"}return!1}buildTree(e,t,i,n){if(i.has(e))return null;i.add(e);let s=t.get(e);if(!s)return null;let o=[];for(let[c,u]of t.entries())if(u.parentPath===e){let f=this.buildTree(c,t,i,n+1);f&&o.push(f)}return o.sort((c,u)=>{let f=c.label||c.title,l=u.label||u.title;return f.localeCompare(l)}),{path:s.path,title:s.title,label:s.label,isArchived:s.isArchived,depth:n,parentPath:s.parentPath,children:o}}};Nr.AreaHierarchyBuilder=Th;Nr.AreaHierarchyBuilder=Th=R4([(0,J2.injectable)(),N4(0,(0,J2.inject)(k4.DI_TOKENS.IVaultAdapter)),I4("design:paramtypes",[Object])],Th)});var Ch=y(kr=>{"use strict";var j4=kr&&kr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},M4=kr&&kr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},L4=kr&&kr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(kr,"__esModule",{value:!0});kr.ClassCreationService=void 0;var Z2=Ke(),q4=ci(),V4=ur(),U4=Fr(),B4=Xe(),xh=class{static{a(this,"ClassCreationService")}constructor(e){this.vault=e}async createSubclass(e,t,i){let n=(0,q4.v4)(),s=this.generateFileName(t),o=s.endsWith(".md")?s:`${s}.md`,c=this.generateClassFrontmatter(e.basename,t,n,i),u=U4.MetadataHelpers.buildFileContent(c),f="classes",l=`${f}/${o}`;return this.vault.getAbstractFileByPath(f)||await this.vault.createFolder(f),await this.vault.create(l,u)}generateFileName(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}generateClassFrontmatter(e,t,i,n){let s=new Date,o=V4.DateFormatter.toLocalTimestamp(s),c={};c.exo__Asset_uid=i,c.exo__Asset_label=t,c.exo__Asset_createdAt=o,c.exo__Instance_class=['"[[exo__Class]]"'],c.exo__Class_superClass=`"[[${e}]]"`;let u=n.exo__Asset_isDefinedBy||'"[[Ontology/EXO]]"';return c.exo__Asset_isDefinedBy=u,c.aliases=[t],c}};kr.ClassCreationService=xh;kr.ClassCreationService=xh=j4([(0,Z2.injectable)(),L4(0,(0,Z2.inject)(B4.DI_TOKENS.IVaultAdapter)),M4("design:paramtypes",[Object])],xh)});var Fh=y(jr=>{"use strict";var $4=jr&&jr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},G4=jr&&jr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},W4=jr&&jr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(jr,"__esModule",{value:!0});jr.ConceptCreationService=void 0;var e0=Ke(),H4=ci(),z4=ur(),K4=Fr(),Y4=Dt(),Q4=Xe(),Oh=class{static{a(this,"ConceptCreationService")}constructor(e){this.vault=e}async createNarrowerConcept(e,t,i,n){let s=(0,H4.v4)(),o=t.endsWith(".md")?t:`${t}.md`,c=this.generateConceptFrontmatter(e.basename,i,n,s),u=K4.MetadataHelpers.buildFileContent(c),f="concepts",l=`${f}/${o}`;return this.vault.getAbstractFileByPath(f)||await this.vault.createFolder(f),await this.vault.create(l,u)}generateConceptFrontmatter(e,t,i,n){let s=new Date,o=z4.DateFormatter.toLocalTimestamp(s),c={};return c.exo__Asset_isDefinedBy='"[[!concepts]]"',c.exo__Asset_uid=n,c.exo__Asset_createdAt=o,c.exo__Instance_class=[`"[[${Y4.AssetClass.CONCEPT}]]"`],c.ims__Concept_broader=`"[[${e}]]"`,c.ims__Concept_definition=t,i.length>0&&(c.aliases=i),c}};jr.ConceptCreationService=Oh;jr.ConceptCreationService=Oh=$4([(0,e0.injectable)(),W4(0,(0,e0.inject)(Q4.DI_TOKENS.IVaultAdapter)),G4("design:paramtypes",[Object])],Oh)});var Dh=y(Mr=>{"use strict";var J4=Mr&&Mr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},X4=Mr&&Mr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Z4=Mr&&Mr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.EffortVotingService=void 0;var t0=Ke(),e5=Xe(),Ph=class{static{a(this,"EffortVotingService")}constructor(e){this.vault=e}async incrementEffortVotes(e){let t=await this.vault.read(e),n=this.extractVoteCount(t)+1,s=this.updateFrontmatterWithVotes(t,n);return await this.vault.modify(e,s),n}extractVoteCount(e){let t=/^---\r?\n([\s\S]*?)\r?\n---/,i=e.match(t);if(!i)return 0;let s=i[1].match(/ems__Effort_votes:\s*(\d+)/);return s&&s[1]?parseInt(s[1],10):0}updateFrontmatterWithVotes(e,t){let i=/^---\r?\n([\s\S]*?)\r?\n---/,n=e.match(i),s=e.includes(`\r
`)?`\r
`:`
`;if(!n)return`---${s}ems__Effort_votes: ${t}${s}---${s}${e}`;let c=n[1];return c.includes("ems__Effort_votes:")?c=c.replace(/ems__Effort_votes:.*$/m,`ems__Effort_votes: ${t}`):c+=`${s}ems__Effort_votes: ${t}`,e.replace(i,`---${s}${c}${s}---`)}};Mr.EffortVotingService=Ph;Mr.EffortVotingService=Ph=J4([(0,t0.injectable)(),Z4(0,(0,t0.inject)(e5.DI_TOKENS.IVaultAdapter)),X4("design:paramtypes",[Object])],Ph)});var Ih=y(Lr=>{"use strict";var t5=Lr&&Lr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},r5=Lr&&Lr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},i5=Lr&&Lr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.FolderRepairService=void 0;var r0=Ke(),n5=Xe(),Rh=class{static{a(this,"FolderRepairService")}constructor(e){this.vault=e}async getExpectedFolder(e,t){let i=t?.exo__Asset_isDefinedBy;if(!i)return null;let n=this.extractReference(i);if(!n)return null;let s=this.vault.getFirstLinkpathDest(n,e.path);return s?this.getFileFolder(s):null}async repairFolder(e,t){let i=`${t}/${e.name}`;if(this.vault.getAbstractFileByPath(i))throw new Error(`Cannot move file: ${i} already exists`);await this.ensureFolderExists(t),await this.vault.rename(e,i)}getFileFolder(e){return e.parent?.path||""}extractReference(e){if(typeof e!="string")return null;let t=e.trim().replace(/^["']|["']$/g,"");return t=t.replace(/^\[\[|\]\]$/g,""),t||null}async ensureFolderExists(e){if(!e)return;let t=this.vault.getAbstractFileByPath(e);if(!(t&&"children"in t))try{await this.vault.createFolder(e)}catch(i){if(i instanceof Error&&i.message.includes("Folder already exists"))return;throw i}}};Lr.FolderRepairService=Rh;Lr.FolderRepairService=Rh=t5([(0,r0.injectable)(),i5(0,(0,r0.inject)(n5.DI_TOKENS.IVaultAdapter)),r5("design:paramtypes",[Object])],Rh)});var kh=y(qr=>{"use strict";var s5=qr&&qr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},a5=qr&&qr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},o5=qr&&qr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(qr,"__esModule",{value:!0});qr.LabelToAliasService=void 0;var i0=Ke(),c5=Xe(),Nh=class{static{a(this,"LabelToAliasService")}constructor(e){this.vault=e}async copyLabelToAliases(e){let t=await this.vault.read(e),i=this.extractLabel(t);if(!i)throw new Error("No exo__Asset_label found in file");let n=this.addLabelToAliases(t,i);await this.vault.modify(e,n)}extractLabel(e){let t=/^---\r?\n([\s\S]*?)\r?\n---/,i=e.match(t);if(!i)return null;let s=i[1].match(/exo__Asset_label:\s*["']?([^"'\r\n]+)["']?/);return s&&s[1]?s[1].trim():null}addLabelToAliases(e,t){let i=/^---\r?\n([\s\S]*?)\r?\n---/,n=e.match(i),s=e.includes(`\r
`)?`\r
`:`
`;if(!n)return`---${s}aliases:${s}  - "${t}"${s}---${s}${e}`;let c=n[1];return c.includes("aliases:")?c.match(/(aliases:\r?\n(?: {2}- .*\r?\n)*)/)&&(c=c.replace(/(aliases:\r?\n(?: {2}- .*\r?\n)*)/,`$1  - "${t}"${s}`)):c+=`${s}aliases:${s}  - "${t}"`,e.replace(i,`---${s}${c}${s}---`)}};qr.LabelToAliasService=Nh;qr.LabelToAliasService=Nh=s5([(0,i0.injectable)(),o5(0,(0,i0.inject)(c5.DI_TOKENS.IVaultAdapter)),a5("design:paramtypes",[Object])],Nh)});var jh=y(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.LoggingService=void 0;var Ec=class{static{a(this,"LoggingService")}static setVerbose(e){this.isVerbose=e}static debug(e,t){this.isVerbose&&console.debug(`[Exocortex] ${e}`,t??"")}static info(e,t){console.log(`[Exocortex] ${e}`,t??"")}static warn(e,t){console.warn(`[Exocortex] ${e}`,t??"")}static error(e,t){console.error(`[Exocortex ERROR] ${e}`,t??""),t?.stack&&console.error(t.stack)}};Tc.LoggingService=Ec;Ec.isVerbose=!1});var qh=y(Vr=>{"use strict";var u5=Vr&&Vr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},l5=Vr&&Vr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},n0=Vr&&Vr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.PropertyCleanupService=void 0;var Mh=Ke(),s0=Xe(),Lh=class{static{a(this,"PropertyCleanupService")}constructor(e,t){this.vault=e,this.logger=t,this.logger.debug("PropertyCleanupService initialized")}async cleanEmptyProperties(e){this.logger.debug("Cleaning empty properties",{path:e.path});let t=await this.vault.read(e),i=this.removeEmptyPropertiesFromContent(t);await this.vault.modify(e,i),this.logger.info("Empty properties cleaned",{path:e.path})}removeEmptyPropertiesFromContent(e){let t=/^---\n([\s\S]*?)\n---/,i=e.match(t);if(!i)return e;let s=i[1].split(`
`),o=[],c=0;for(;c<s.length;){let f=s[c],l=f.trim();if(l===""){o.push(f),c++;continue}let h=l.match(/^([^:]+):\s*(.*)$/);if(h){let p=h[2];if(p===""&&c+1<s.length&&s[c+1].match(/^\s+- /)){let v=[],S=c+1;for(;S<s.length&&s[S].match(/^\s+- /);)v.push(s[S]),S++;if(v.every(F=>{let D=F.replace(/^\s+- /,"").trim();return this.isEmptyValue(D)})){c=S;continue}else{o.push(f);for(let F=c+1;F<S;F++)o.push(s[F]);c=S;continue}}if(this.isEmptyValue(p)){c++;continue}o.push(f),c++}else l.match(/^\s*- /)||o.push(f),c++}let u=o.join(`
`);return e.replace(t,`---
${u}
---`)}isEmptyValue(e){let t=e.trim();return t===""||t==="null"||t==="undefined"||t==="[]"||t==="{}"||t==='""'||t==="''"}};Vr.PropertyCleanupService=Lh;Vr.PropertyCleanupService=Lh=u5([(0,Mh.injectable)(),n0(0,(0,Mh.inject)(s0.DI_TOKENS.IVaultAdapter)),n0(1,(0,Mh.inject)(s0.DI_TOKENS.ILogger)),l5("design:paramtypes",[Object,Object])],Lh)});var Uh=y(Ur=>{"use strict";var f5=Ur&&Ur.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},h5=Ur&&Ur.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},d5=Ur&&Ur.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.RenameToUidService=void 0;var a0=Ke(),p5=Xe(),Vh=class{static{a(this,"RenameToUidService")}constructor(e){this.vault=e}async renameToUid(e,t){let i=t.exo__Asset_uid;if(!i)throw new Error("Asset has no exo__Asset_uid property");let n=e.basename,s=i;if(n===s)throw new Error("File is already named according to UID");let o=t.exo__Asset_label;if(!o||o.trim()===""){let l=this.isAssetArchived(t);await this.updateLabel(e,n,l)}let u=e.parent?.path||"",f=u?`${u}/${s}.md`:`${s}.md`;await this.vault.updateLinks(e.path,f,n),await this.vault.rename(e,f)}async updateLabel(e,t,i){await this.vault.process(e,n=>{let s=/^---\n([\s\S]*?)\n---/,o=n.match(s);if(!o)return n;let c=o[1],u=i?`${c}
exo__Asset_label: ${t}`:`${c}
exo__Asset_label: ${t}
aliases:
  - ${t}`;return n.replace(s,`---
${u}
---`)})}isAssetArchived(e){if(e?.exo__Asset_isArchived===!0)return!0;let t=e?.archived;if(t==null)return!1;if(typeof t=="boolean")return t;if(typeof t=="number")return t!==0;if(typeof t=="string"){let i=t.toLowerCase().trim();return i==="true"||i==="yes"||i==="1"}return!1}};Ur.RenameToUidService=Vh;Ur.RenameToUidService=Vh=f5([(0,a0.injectable)(),d5(0,(0,a0.inject)(p5.DI_TOKENS.IVaultAdapter)),h5("design:paramtypes",[Object])],Vh)});var $h=y(Br=>{"use strict";var m5=Br&&Br.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},g5=Br&&Br.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},y5=Br&&Br.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Br,"__esModule",{value:!0});Br.SupervisionCreationService=void 0;var o0=Ke(),_5=ci(),v5=ur(),b5=Xe(),Bh=class{static{a(this,"SupervisionCreationService")}constructor(e){this.vault=e}async createSupervision(e){let t=(0,_5.v4)(),i=`${t}.md`,n=this.generateFrontmatter(t),s=this.generateBody(e),o=this.buildFileContent(n,s),c=`01 Inbox/${i}`;return await this.vault.create(c,o)}generateFrontmatter(e){let t=new Date,i=v5.DateFormatter.toLocalTimestamp(t);return{exo__Asset_isDefinedBy:'"[[!kitelev]]"',exo__Asset_uid:e,exo__Asset_createdAt:i,exo__Instance_class:['"[[ztlk__FleetingNote]]"'],ztlk__FleetingNote_type:'"[[CBT-Diary Record]]"'}}generateBody(e){return[{label:"\u0421\u0438\u0442\u0443\u0430\u0446\u0438\u044F/\u0442\u0440\u0438\u0433\u0433\u0435\u0440",value:e.situation},{label:"\u042D\u043C\u043E\u0446\u0438\u0438",value:e.emotions},{label:"\u041C\u044B\u0441\u043B\u0438",value:e.thoughts},{label:"\u041F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u0435",value:e.behavior},{label:"\u041A\u0440\u0430\u0442\u043A\u043E\u0441\u0440\u043E\u0447\u043D\u044B\u0435 \u043F\u043E\u0441\u043B\u0435\u0434\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F",value:e.shortTermConsequences},{label:"\u0414\u043E\u043B\u0433\u043E\u0441\u0440\u043E\u0447\u043D\u044B\u0435 \u043F\u043E\u0441\u043B\u0435\u0434\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F",value:e.longTermConsequences}].map(i=>`- ${i.label}: ${i.value}`).join(`
`)}buildFileContent(e,t){return`---
${Object.entries(e).map(([n,s])=>{if(Array.isArray(s)){let o=s.map(c=>`  - ${c}`).join(`
`);return`${n}:
${o}`}return`${n}: ${s}`}).join(`
`)}
---

${t}
`}};Br.SupervisionCreationService=Bh;Br.SupervisionCreationService=Bh=m5([(0,o0.injectable)(),y5(0,(0,o0.inject)(b5.DI_TOKENS.IVaultAdapter)),g5("design:paramtypes",[Object])],Bh)});var Wh=y($r=>{"use strict";var S5=$r&&$r.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},w5=$r&&$r.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},E5=$r&&$r.__param||function(r,e){return function(t,i){e(t,i,r)}},Gh;Object.defineProperty($r,"__esModule",{value:!0});$r.FleetingNoteCreationService=void 0;var c0=Ke(),T5=ci(),A5=ur(),x5=Fr(),C5=Xe(),Ac=Gh=class{static{a(this,"FleetingNoteCreationService")}constructor(e){this.vault=e}async createFleetingNote(e){let t=(0,T5.v4)(),i=`${t}.md`,n=this.generateFrontmatter(t,e),s=x5.MetadataHelpers.buildFileContent(n),o=`${Gh.INBOX_FOLDER}/${i}`;return await this.vault.create(o,s)}generateFrontmatter(e,t){let i=new Date,n=A5.DateFormatter.toLocalTimestamp(i),s=t.trim();return{exo__Asset_isDefinedBy:'"[[!kitelev]]"',exo__Asset_uid:e,exo__Asset_createdAt:n,exo__Instance_class:['"[[ztlk__FleetingNote]]"'],exo__Asset_label:s,aliases:[s]}}};$r.FleetingNoteCreationService=Ac;Ac.INBOX_FOLDER="01 Inbox";$r.FleetingNoteCreationService=Ac=Gh=S5([(0,c0.injectable)(),E5(0,(0,c0.inject)(C5.DI_TOKENS.IVaultAdapter)),w5("design:paramtypes",[Object])],Ac)});var zh=y(Gr=>{"use strict";var O5=Gr&&Gr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},F5=Gr&&Gr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},P5=Gr&&Gr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Gr,"__esModule",{value:!0});Gr.PlanningService=void 0;var u0=Ke(),D5=ls(),R5=ur(),I5=Xe(),Hh=class{static{a(this,"PlanningService")}constructor(e){this.vault=e,this.frontmatterService=new D5.FrontmatterService}async planOnToday(e){let t=this.vault.getAbstractFileByPath(e);if(!t||!this.isFile(t))throw new Error(`File not found: ${e}`);let i=await this.vault.read(t),n=R5.DateFormatter.getTodayStartTimestamp(),s=this.frontmatterService.updateProperty(i,"ems__Effort_plannedStartTimestamp",n);await this.vault.modify(t,s)}isFile(e){return"basename"in e}};Gr.PlanningService=Hh;Gr.PlanningService=Hh=O5([(0,u0.injectable)(),P5(0,(0,u0.inject)(I5.DI_TOKENS.IVaultAdapter)),F5("design:paramtypes",[Object])],Hh)});var Yh=y(Wr=>{"use strict";var N5=Wr&&Wr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},k5=Wr&&Wr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},j5=Wr&&Wr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.AssetConversionService=void 0;var l0=Ke(),f0=Dt(),M5=ls(),xc=jh(),L5=Xe(),Kh=class{static{a(this,"AssetConversionService")}constructor(e){this.vault=e,this.frontmatterService=new M5.FrontmatterService}async convertTaskToProject(e){try{let t=await this.vault.read(e),i=this.removeInstanceClassProperty(t);return i=this.frontmatterService.updateProperty(i,"exo__Instance_class",`["[[${f0.AssetClass.PROJECT}]]"]`),await this.vault.modify(e,i),xc.LoggingService.info(`Converted Task to Project: ${e.basename} (${e.path})`),e}catch(t){let i=`Failed to convert Task to Project: ${e.path}`;throw xc.LoggingService.error(i,t instanceof Error?t:void 0),new Error(i)}}async convertProjectToTask(e){try{let t=await this.vault.read(e),i=this.removeInstanceClassProperty(t);return i=this.frontmatterService.updateProperty(i,"exo__Instance_class",`["[[${f0.AssetClass.TASK}]]"]`),await this.vault.modify(e,i),xc.LoggingService.info(`Converted Project to Task: ${e.basename} (${e.path})`),e}catch(t){let i=`Failed to convert Project to Task: ${e.path}`;throw xc.LoggingService.error(i,t instanceof Error?t:void 0),new Error(i)}}removeInstanceClassProperty(e){let t=this.frontmatterService.parse(e);if(!t.exists)return e;let i=/^exo__Instance_class:.*$(\n  -.*$)*/gm,n=t.content.replace(i,"").replace(/\n\n+/g,`
`).trim();return e.replace(/^---\n[\s\S]*?\n---/,`---
${n}
---`)}};Wr.AssetConversionService=Kh;Wr.AssetConversionService=Kh=N5([(0,l0.injectable)(),j5(0,(0,l0.inject)(L5.DI_TOKENS.IVaultAdapter)),k5("design:paramtypes",[Object])],Kh)});var Jh=y(Hr=>{"use strict";var q5=Hr&&Hr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},V5=Hr&&Hr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},U5=Hr&&Hr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.SessionEventService=void 0;var h0=Ke(),B5=ci(),d0=Dt(),$5=ur(),G5=Fr(),W5=Xe(),Qh=class{static{a(this,"SessionEventService")}constructor(e){this.vault=e,this.folderPathCache=null,this.defaultOntologyAsset=null}setDefaultOntologyAsset(e){this.defaultOntologyAsset=e,this.folderPathCache=null}async createSessionStartEvent(e){return this.createSessionEvent(e,d0.AssetClass.SESSION_START_EVENT)}async createSessionEndEvent(e){return this.createSessionEvent(e,d0.AssetClass.SESSION_END_EVENT)}async getOntologyAssetFolder(){if(this.folderPathCache!==null)return this.folderPathCache;if(!this.defaultOntologyAsset){let i=this.vault.getDefaultNewFileParent();return this.folderPathCache=i?.path||"",this.folderPathCache}let e=this.vault.getAllFiles();for(let i of e)if(i.basename===this.defaultOntologyAsset){let n=i.parent?.path||"";return this.folderPathCache=n,this.folderPathCache}let t=this.vault.getDefaultNewFileParent();return this.folderPathCache=t?.path||"",this.folderPathCache}async createSessionEvent(e,t){let i=(0,B5.v4)(),n=$5.DateFormatter.toLocalTimestamp(new Date),s=this.defaultOntologyAsset?`"[[${this.defaultOntologyAsset}]]"`:'"[[!kitelev]]"',o={exo__Asset_uid:i,exo__Asset_createdAt:n,exo__Asset_isDefinedBy:s,exo__Instance_class:[`"[[${t}]]"`],ems__SessionEvent_timestamp:n,ems__Session_area:`"[[${e}]]"`},c=G5.MetadataHelpers.buildFileContent(o),u=await this.getOntologyAssetFolder();u&&!await this.vault.exists(u)&&await this.vault.createFolder(u);let f=u?`${u}/${i}.md`:`${i}.md`;return await this.vault.create(f,c)}};Hr.SessionEventService=Qh;Hr.SessionEventService=Qh=q5([(0,h0.injectable)(),U5(0,(0,h0.inject)(W5.DI_TOKENS.IVaultAdapter)),V5("design:paramtypes",[Object])],Qh)});var Zh=y(zr=>{"use strict";var H5=zr&&zr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},z5=zr&&zr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},K5=zr&&zr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(zr,"__esModule",{value:!0});zr.URIConstructionService=void 0;var p0=Ke(),Y5=Xe(),Xh=class{static{a(this,"URIConstructionService")}constructor(e){this.fileSystem=e,this.defaultOntologyURL="https://exocortex.my/default/",this.strictValidation=!0}configure(e){e?.defaultOntologyURL&&(this.defaultOntologyURL=e.defaultOntologyURL),e?.strictValidation!==void 0&&(this.strictValidation=e.strictValidation)}async constructAssetURI(e){let t=this.extractUID(e);if(!t){if(this.strictValidation)throw new Error(`Asset missing exo__Asset_uid: ${e.path}`);return console.warn(`Asset ${e.path} missing UID, using filename fallback`),this.constructFallbackURI(e)}let i=await this.resolveOntologyURL(e);if(!this.validateOntologyURL(i))throw new Error(`Invalid ontology URL: ${i}`);return`${i.endsWith("/")?i:`${i}/`}${t}`}validateOntologyURL(e){if(!e)return!1;try{let t=new URL(e);return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}}async resolveOntologyURL(e){let t=e.frontmatter?.exo__Asset_isDefinedBy;if(!t)return this.defaultOntologyURL;let i=this.extractWikiLink(t),n=i,s=await this.fileSystem.fileExists(i);return!s&&!i.endsWith(".md")&&(n=`${i}.md`,s=await this.fileSystem.fileExists(n)),s?(await this.fileSystem.getFileMetadata(n))?.exo__Ontology_url||this.defaultOntologyURL:(console.warn(`Ontology file not found: ${i}, using default`),this.defaultOntologyURL)}extractUID(e){return e.frontmatter?.exo__Asset_uid||null}extractWikiLink(e){return e.replace(/^\[\[|\]\]$/g,"")}constructFallbackURI(e){let t=e.path.split("/").pop()?.replace(".md","")||"unknown";return`${this.defaultOntologyURL}${t}`}};zr.URIConstructionService=Xh;zr.URIConstructionService=Xh=H5([(0,p0.injectable)(),K5(0,(0,p0.inject)(Y5.DI_TOKENS.IFileSystemAdapter)),z5("design:paramtypes",[Object])],Xh)});var m0=y(Cc=>{"use strict";Object.defineProperty(Cc,"__esModule",{value:!0});Cc.EffortSortingHelpers=void 0;var ed=class{static{a(this,"EffortSortingHelpers")}static sortByPriority(e,t){if(e.isTrashed!==t.isTrashed)return e.isTrashed?1:-1;if(e.isDone!==t.isDone)return e.isDone?1:-1;let i=typeof e.metadata.ems__Effort_votes=="number"?e.metadata.ems__Effort_votes:0,n=typeof t.metadata.ems__Effort_votes=="number"?t.metadata.ems__Effort_votes:0;return i!==n?n-i:e.startTime&&t.startTime?e.startTime.localeCompare(t.startTime):e.startTime?-1:t.startTime?1:0}};Cc.EffortSortingHelpers=ed});var rd=y(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.NTriplesSerializer=void 0;var td=class{static{a(this,"NTriplesSerializer")}serialize(e,t={}){let i=t.newline??`
`;return e.length===0?"":e.map(n=>n.toString()).join(i)+i}serializeChunk(e,t){return e.length===0?"":e.map(i=>i.toString()).join(t)+t}};Oc.NTriplesSerializer=td});var g0=y(Fc=>{"use strict";Object.defineProperty(Fc,"__esModule",{value:!0});Fc.TurtleSerializer=void 0;var fs=Oi(),Q5=rd(),J5={rdf:fs.Namespace.RDF.iri.value,rdfs:fs.Namespace.RDFS.iri.value,owl:fs.Namespace.OWL.iri.value,xsd:fs.Namespace.XSD.iri.value,exo:fs.Namespace.EXO.iri.value,ems:fs.Namespace.EMS.iri.value},id=class{static{a(this,"TurtleSerializer")}constructor(){this.nTriplesSerializer=new Q5.NTriplesSerializer}serialize(e,t={}){let i=t.newline??`
`,n=this.composePrefixes(t),s=this.serializePrefixes(n,i),o=this.nTriplesSerializer.serialize(e,{newline:i}).trimEnd();return s?o?`${s}${i}${i}${o}${i}`:`${s}${i}`:o?`${o}${i}`:""}serializePrefixes(e,t){let i=Object.entries(e);return i.length===0?"":i.map(([n,s])=>`@prefix ${n}: <${s}> .`).join(t)}composePrefixes(e){return e.includeDefaultPrefixes??!0?{...J5,...e.prefixes??{}}:{...e.prefixes??{}}}serializeTriplesOnly(e,t){return this.nTriplesSerializer.serializeChunk(e,t).trimEnd()}};Fc.TurtleSerializer=id});var v0=y(Pc=>{"use strict";Object.defineProperty(Pc,"__esModule",{value:!0});Pc.JSONLDSerializer=void 0;var y0=Bt(),_0=ai(),X5=or(),hs=Oi(),Z5={rdf:hs.Namespace.RDF.iri.value,rdfs:hs.Namespace.RDFS.iri.value,owl:hs.Namespace.OWL.iri.value,xsd:hs.Namespace.XSD.iri.value,exo:hs.Namespace.EXO.iri.value,ems:hs.Namespace.EMS.iri.value},nd=class{static{a(this,"JSONLDSerializer")}toDocument(e,t={}){let i={...Z5,...t.context??{}},n=new Map;for(let s of e){let o=this.subjectToId(s.subject),c=this.compactIri(s.predicate.value,i),u=this.objectToJSONLD(s.object,i),f=n.get(o)??{"@id":o},l=f[c];l===void 0?f[c]=u:Array.isArray(l)?l.push(u):f[c]=[l,u],n.set(o,f)}return{"@context":i,"@graph":Array.from(n.values())}}serialize(e,t={}){let i=this.toDocument(e,t),n=t.pretty?t.indent??2:void 0;return JSON.stringify(i,null,n)}subjectToId(e){return e instanceof y0.IRI?e.value:e instanceof _0.BlankNode?`_:${e.id}`:String(e)}compactIri(e,t){for(let[i,n]of Object.entries(t))if(e.startsWith(n)){let s=e.slice(n.length);if(s.length>0)return`${i}:${s}`}return e}objectToJSONLD(e,t){if(e instanceof y0.IRI)return{"@id":e.value};if(e instanceof _0.BlankNode)return{"@id":`_:${e.id}`};if(e instanceof X5.Literal){let i={"@value":e.value};return e.datatype?i["@type"]=this.compactIri(e.datatype.value,t):e.language&&(i["@language"]=e.language),i}return e}};Pc.JSONLDSerializer=nd});var od=y(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.NTriplesParser=void 0;var eT=Sn(),b0=Bt(),sd=or(),tT=ai(),ds=Oi(),rT={rdf:ds.Namespace.RDF.iri.value,rdfs:ds.Namespace.RDFS.iri.value,owl:ds.Namespace.OWL.iri.value,xsd:ds.Namespace.XSD.iri.value,exo:ds.Namespace.EXO.iri.value,ems:ds.Namespace.EMS.iri.value},ad=class{static{a(this,"NTriplesParser")}parse(e,t={}){let i={prefixes:{...rT,...t.prefixes??{}},strict:t.strict??!1},n=[];return e.split(/\r?\n/).forEach((o,c)=>{let u=o.trim();!u||u.startsWith("#")||n.push(this.parseLine(u,c+1,i))}),n}parseLine(e,t,i){if(!e.endsWith("."))throw new Error(`Invalid RDF statement at line ${t}: missing '.' terminator`);let s=e.slice(0,-1).trim(),o=this.parseSubject(s,t,i);s=o.rest.trim();let c=this.parsePredicate(s,t,i);s=c.rest.trim();let u=this.parseObject(s,t,i);if(s=u.rest.trim(),s.length>0)throw new Error(`Unexpected tokens after object at line ${t}`);return new eT.Triple(o.node,c.node,u.node)}parseSubject(e,t,i){return e.startsWith("<")?this.consumeIRI(e,t,i):e.startsWith("_:")?this.consumeBlankNode(e,t):this.consumePrefixedName(e,t,i)}parsePredicate(e,t,i){return e.startsWith("<")?this.consumeIRI(e,t,i):this.consumePrefixedName(e,t,i)}parseObject(e,t,i){return e.startsWith("<")?this.consumeIRI(e,t,i):e.startsWith("_:")?this.consumeBlankNode(e,t):e.startsWith('"')?this.consumeLiteral(e,t,i):this.consumePrefixedName(e,t,i)}consumePrefixedName(e,t,i){let n=e.match(/^([a-zA-Z_][\w-]*):([^\s]+)(?:\s+(.*))?$/);if(!n)throw new Error(`Invalid token at line ${t}: ${e}`);let[,s,o,c]=n,u=i.prefixes[s];if(!u)throw new Error(`Unknown prefix "${s}" at line ${t}`);return{node:new b0.IRI(`${u}${o}`),rest:(c??"").trimStart()}}consumeIRI(e,t,i){let n=this.findClosingBracket(e,"<",">");if(n===-1)throw new Error(`Invalid IRI at line ${t}`);let s=e.slice(1,n),o=new b0.IRI(s),c=e.slice(n+1).trimStart();return{node:o,rest:c}}consumeBlankNode(e,t){let i=e.match(/^_:(\w+)(?:\s+(.*))?$/);if(!i)throw new Error(`Invalid blank node identifier at line ${t}`);let[,n,s]=i;return{node:new tT.BlankNode(n),rest:(s??"").trimStart()}}consumeLiteral(e,t,i){let{value:n,rest:s}=this.consumeQuotedString(e,t),o=s.trimStart();if(o.startsWith("^^")){o=o.slice(2).trimStart();let c=o.startsWith("<")?this.consumeIRI(o,t,i):this.consumePrefixedName(o,t,i);return{node:new sd.Literal(n,c.node),rest:c.rest}}if(o.startsWith("@")){let c=o.match(/^@([a-zA-Z-]+)(?:\s+(.*))?$/);if(!c)throw new Error(`Invalid language tag at line ${t}`);let[,u,f]=c;return{node:new sd.Literal(n,void 0,u),rest:(f??"").trimStart()}}return{node:new sd.Literal(n),rest:o}}consumeQuotedString(e,t){if(!e.startsWith('"'))throw new Error(`Expected quoted string at line ${t}`);let i="";for(let n=1;n<e.length;n++){let s=e[n];if(s==="\\"){if(n+1>=e.length)throw new Error(`Invalid escape sequence at line ${t}`);let o=e[n+1];switch(o){case"t":i+="	",n+=1;break;case"b":i+="\b",n+=1;break;case"n":i+=`
`,n+=1;break;case"r":i+="\r",n+=1;break;case"f":i+="\f",n+=1;break;case'"':i+='"',n+=1;break;case"\\":i+="\\",n+=1;break;case"u":{let c=e.slice(n+2,n+6);if(c.length!==4||!/^[0-9a-fA-F]{4}$/.test(c))throw new Error(`Invalid \\u escape at line ${t}`);i+=String.fromCharCode(parseInt(c,16)),n+=5;break}case"U":{let c=e.slice(n+2,n+10);if(c.length!==8||!/^[0-9a-fA-F]{8}$/.test(c))throw new Error(`Invalid \\U escape at line ${t}`);i+=String.fromCodePoint(parseInt(c,16)),n+=9;break}default:throw new Error(`Unknown escape sequence \\${o} at line ${t}`)}continue}if(s==='"'){let o=e.slice(n+1);return{value:i,rest:o}}i+=s}throw new Error(`Unterminated string literal at line ${t}`)}findClosingBracket(e,t,i){let n=0;for(let s=0;s<e.length;s++){let o=e[s];if(o===t){n++;continue}if(o===i&&(n--,n===0))return s}return-1}};Dc.NTriplesParser=ad});var S0=y(Rc=>{"use strict";Object.defineProperty(Rc,"__esModule",{value:!0});Rc.TurtleParser=void 0;var ps=Oi(),iT=od(),nT={rdf:ps.Namespace.RDF.iri.value,rdfs:ps.Namespace.RDFS.iri.value,owl:ps.Namespace.OWL.iri.value,xsd:ps.Namespace.XSD.iri.value,exo:ps.Namespace.EXO.iri.value,ems:ps.Namespace.EMS.iri.value},sT=/^@prefix\s+([a-zA-Z_][\w-]*):\s*<([^>]+)>\s*\.$/,cd=class{static{a(this,"TurtleParser")}constructor(){this.nTriplesParser=new iT.NTriplesParser}parse(e,t={}){let i={...nT,...t.prefixes??{}},n=this.collectStatements(e),s=[];return n.forEach(({statement:o,lineNumber:c})=>{if(this.isPrefixStatement(o)){let f=o.match(sT);if(!f)throw new Error(`Invalid prefix declaration at line ${c}`);let[,l,h]=f;i[l]=h;return}if(o.includes(";")||o.includes(","))throw new Error(`Complex Turtle statements with ';' or ',' are not supported (line ${c})`);let u=this.normalizeShortcuts(o);s.push(this.nTriplesParser.parseLine(u,c,{prefixes:i,strict:!1}))}),s}collectStatements(e){let t=e.split(/\r?\n/),i=[],n="",s=0;if(t.forEach((o,c)=>{let u=o.trim();!u||u.startsWith("#")||(n||(s=c+1),n=n?`${n} ${u}`:u,u.endsWith(".")&&(i.push({statement:n,lineNumber:s}),n=""))}),n)throw new Error(`Unterminated Turtle statement near line ${s}`);return i}isPrefixStatement(e){return e.startsWith("@prefix")}normalizeShortcuts(e){return e.includes(" a ")?e.replace(/\sa\s/g," rdf:type "):e}};Rc.TurtleParser=cd});var w0=y(Ic=>{"use strict";Object.defineProperty(Ic,"__esModule",{value:!0});Ic.RDFSerializer=void 0;var ms=Sn(),Nn=Bt(),gs=or(),ud=ai(),ui=Oi(),aT=g0(),oT=rd(),cT=v0(),uT=S0(),lT=od(),fT=1024,hT=`
`,dT={rdf:ui.Namespace.RDF.iri.value,rdfs:ui.Namespace.RDFS.iri.value,owl:ui.Namespace.OWL.iri.value,xsd:ui.Namespace.XSD.iri.value,exo:ui.Namespace.EXO.iri.value,ems:ui.Namespace.EMS.iri.value},ld=class{static{a(this,"RDFSerializer")}constructor(e){this.store=e,this.turtleSerializer=new aT.TurtleSerializer,this.nTriplesSerializer=new oT.NTriplesSerializer,this.jsonldSerializer=new cT.JSONLDSerializer,this.turtleParser=new uT.TurtleParser,this.nTriplesParser=new lT.NTriplesParser}async serialize(e,t={}){let i=await this.store.match();return this.serializeTriples(i,e,t)}serializeTriples(e,t,i={}){switch(t){case"turtle":return this.turtleSerializer.serialize(e,{prefixes:i.prefixes,includeDefaultPrefixes:i.includeDefaultPrefixes,newline:i.newline});case"n-triples":return this.nTriplesSerializer.serialize(e,{newline:i.newline});case"json-ld":return this.jsonldSerializer.serialize(e,{context:i.prefixes,pretty:i.pretty,indent:i.indent});default:throw new Error(`Unsupported serialization format: ${t}`)}}stream(e,t={}){let i=t.newline??hT,n=t.batchSize??fT,s=t.includeDefaultPrefixes,o=t.prefixes,c=this,u=!1,f=[],l=[],h=0,p=a(async()=>{if(!u){if(l=await c.store.match(),e==="json-ld"){let v=c.jsonldSerializer.toDocument(l,{context:o,pretty:!1});f.push(...c.buildJsonLdChunks(v))}else if(e==="turtle"){let v=c.turtleSerializer.serializePrefixes(c.composePrefixes(o,s),i);v&&f.push(`${v}${i}${i}`)}u=!0}},"ensureInitialized");return{async next(){if(await p(),f.length>0)return{value:f.shift(),done:!1};if(e==="json-ld")return{value:void 0,done:!0};if(h>=l.length)return{value:void 0,done:!0};let v=l.slice(h,h+n);h+=v.length;let S="";if(e==="turtle"){let x=c.turtleSerializer.serializeTriplesOnly(v,i);x&&(S=`${x}${i}`)}else e==="n-triples"&&(S=c.nTriplesSerializer.serializeChunk(v,i));return S?{value:S,done:!1}:this.next()},async return(){return f=[],l=[],h=0,{value:void 0,done:!0}},[Symbol.asyncIterator](){return this}}}async load(e,t,i={}){let n=this.parse(e,t,i);return i.mode!=="append"&&await this.store.clear(),await this.store.addAll(n),n.length}parse(e,t,i={}){switch(t){case"turtle":return this.turtleParser.parse(e,this.buildTurtleParseOptions(i));case"n-triples":return this.nTriplesParser.parse(e,this.buildNTriplesParseOptions(i));case"json-ld":return this.parseJsonLd(e,i);default:throw new Error(`Unsupported serialization format: ${t}`)}}buildTurtleParseOptions(e){return{prefixes:this.composePrefixes(e.prefixes,!0),strict:e.strict}}buildNTriplesParseOptions(e){return{prefixes:this.composePrefixes(e.prefixes,!0),strict:e.strict}}composePrefixes(e,t){return t??!0?{...dT,...e??{}}:{...e??{}}}parseJsonLd(e,t){let i;try{i=JSON.parse(e)}catch(f){throw new Error(`Invalid JSON-LD document: ${f.message}`)}let n=this.composePrefixes(t.prefixes,!0),s=this.extractContext(i),o={...n,...s},c=this.extractGraph(i),u=[];return c.forEach((f,l)=>{if(!f||typeof f!="object"||Array.isArray(f))throw new Error(`Invalid JSON-LD node at index ${l}`);let h=this.parseSubjectFromNode(f,o,l),p=Object.entries(f);for(let[g,v]of p){if(g==="@id"||g==="@context")continue;if(g==="@type"){this.collectTypeTriples(h,v,u,o);continue}let S=this.expandTerm(g,o),x=new Nn.IRI(S);this.collectTriplesForValue(h,x,v,u,o)}}),u}extractContext(e){if(!e||typeof e!="object"||Array.isArray(e))return{};let t=e["@context"];if(!t||typeof t!="object"||Array.isArray(t))return{};let i={};return Object.entries(t).forEach(([n,s])=>{typeof s=="string"&&(i[n]=s)}),i}extractGraph(e){if(Array.isArray(e))return e;if(!e||typeof e!="object")return[];let t=e["@graph"];return Array.isArray(t)?t:[e]}parseSubjectFromNode(e,t,i){let n=e["@id"];if(typeof n=="string"){if(n.startsWith("_:"))return new ud.BlankNode(n.slice(2));if(this.isAbsoluteIri(n))return new Nn.IRI(n);let s=this.expandTerm(n,t);return new Nn.IRI(s)}return new ud.BlankNode(`jsonld_${i}`)}collectTypeTriples(e,t,i,n){let s=ui.Namespace.RDF.term("type");(Array.isArray(t)?t:[t]).forEach(c=>{if(typeof c!="string")throw new Error("Invalid @type value in JSON-LD node");let u=this.expandTerm(c,n);i.push(new ms.Triple(e,s,new Nn.IRI(u)))})}collectTriplesForValue(e,t,i,n,s){if(i!=null){if(Array.isArray(i)){i.forEach(o=>this.collectTriplesForValue(e,t,o,n,s));return}if(typeof i=="object"){let o=i;if(typeof o["@id"]=="string"){let c=this.parseIdNode(o["@id"],s);n.push(new ms.Triple(e,t,c));return}if(o["@value"]!==void 0){let c=this.parseLiteralObject(o,s);n.push(new ms.Triple(e,t,c));return}}if(typeof i=="string"){n.push(new ms.Triple(e,t,new gs.Literal(i)));return}if(typeof i=="number"){let o=Number.isInteger(i)?ui.Namespace.XSD.term("integer"):ui.Namespace.XSD.term("decimal");n.push(new ms.Triple(e,t,new gs.Literal(i.toString(),o)));return}if(typeof i=="boolean"){let o=ui.Namespace.XSD.term("boolean");n.push(new ms.Triple(e,t,new gs.Literal(i.toString(),o)));return}throw new Error("Unsupported JSON-LD value encountered")}}parseIdNode(e,t){if(e.startsWith("_:"))return new ud.BlankNode(e.slice(2));if(this.isAbsoluteIri(e))return new Nn.IRI(e);let i=this.expandTerm(e,t);return new Nn.IRI(i)}parseLiteralObject(e,t){let i=e["@value"];if(typeof i!="string")throw new Error("JSON-LD literal values must be strings");if(typeof e["@language"]=="string")return new gs.Literal(i,void 0,e["@language"]);if(typeof e["@type"]=="string"){let n=this.expandTerm(e["@type"],t);return new gs.Literal(i,new Nn.IRI(n))}return new gs.Literal(i)}expandTerm(e,t){if(this.isAbsoluteIri(e))return e;let i=e.indexOf(":");if(i>0){let s=e.slice(0,i),o=e.slice(i+1),c=t[s];if(!c)throw new Error(`Unknown prefix "${s}" in JSON-LD document`);return`${c}${o}`}let n=t["@vocab"];if(n)return`${n}${e}`;throw new Error(`Unable to expand JSON-LD term "${e}"`)}isAbsoluteIri(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)}buildJsonLdChunks(e){let t=[],i=JSON.stringify(e["@context"]);return t.push(`{"@context":${i},"@graph":[`),e["@graph"].forEach((n,s)=>{let o=JSON.stringify(n);s>0?t.push(`,${o}`):t.push(o)}),t.push(`]}
`),t}};Ic.RDFSerializer=ld});var E0=y(Yi=>{"use strict";Object.defineProperty(Yi,"__esModule",{value:!0});Yi.TransactionError=Yi.TripleNotFoundError=Yi.TripleAlreadyExistsError=void 0;var fd=class extends Error{static{a(this,"TripleAlreadyExistsError")}constructor(e){super(`Triple already exists: ${e.toString()}`),this.name="TripleAlreadyExistsError"}};Yi.TripleAlreadyExistsError=fd;var hd=class extends Error{static{a(this,"TripleNotFoundError")}constructor(e){super(`Triple not found: ${e.toString()}`),this.name="TripleNotFoundError"}};Yi.TripleNotFoundError=hd;var dd=class extends Error{static{a(this,"TransactionError")}constructor(e){super(e),this.name="TransactionError"}};Yi.TransactionError=dd});var md=y(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.LRUCache=void 0;var pd=class{static{a(this,"LRUCache")}constructor(e){this.maxSize=e,this.cache=new Map}get(e){let t=this.cache.get(e);return t!==void 0&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){let i=this.cache.keys().next().value;i!==void 0&&this.cache.delete(i)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}};Nc.LRUCache=pd});var T0=y(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.InMemoryTripleStore=void 0;var Qi=E0(),pT=Bt(),mT=ai(),gT=or(),yT=md(),gd=class{static{a(this,"InMemoryTripleStore")}constructor(){this.triples=new Map,this.spo=new Map,this.sop=new Map,this.pso=new Map,this.pos=new Map,this.osp=new Map,this.ops=new Map,this.queryCache=new yT.LRUCache(1e3)}async add(e){let t=this.getTripleKey(e);if(this.triples.has(t))return;this.triples.set(t,e);let i=this.getNodeKey(e.subject),n=this.getNodeKey(e.predicate),s=this.getNodeKey(e.object);this.addToIndex(this.spo,i,n,s),this.addToIndex(this.sop,i,s,n),this.addToIndex(this.pso,n,i,s),this.addToIndex(this.pos,n,s,i),this.addToIndex(this.osp,s,i,n),this.addToIndex(this.ops,s,n,i),this.queryCache.clear()}async remove(e){let t=this.getTripleKey(e);if(!this.triples.has(t))return!1;this.triples.delete(t);let i=this.getNodeKey(e.subject),n=this.getNodeKey(e.predicate),s=this.getNodeKey(e.object);return this.removeFromIndex(this.spo,i,n,s),this.removeFromIndex(this.sop,i,s,n),this.removeFromIndex(this.pso,n,i,s),this.removeFromIndex(this.pos,n,s,i),this.removeFromIndex(this.osp,s,i,n),this.removeFromIndex(this.ops,s,n,i),this.queryCache.clear(),!0}async has(e){let t=this.getTripleKey(e);return this.triples.has(t)}async match(e,t,i){let n=this.getMatchCacheKey(e,t,i),s=this.queryCache.get(n);if(s!==void 0)return s;let o;return!e&&!t&&!i?o=Array.from(this.triples.values()):e&&t&&i?o=this.matchSPO(e,t,i):e&&t?o=this.matchSP(e,t):e&&i?o=this.matchSO(e,i):t&&i?o=this.matchPO(t,i):e?o=this.matchS(e):t?o=this.matchP(t):i?o=this.matchO(i):o=[],this.queryCache.set(n,o),o}async addAll(e){for(let t of e)await this.add(t)}async removeAll(e){let t=0;for(let i of e)await this.remove(i)&&t++;return t}async clear(){this.triples.clear(),this.spo.clear(),this.sop.clear(),this.pso.clear(),this.pos.clear(),this.osp.clear(),this.ops.clear(),this.queryCache.clear()}async count(){return this.triples.size}async subjects(){let e=new Set;for(let t of this.triples.values())e.add(t.subject);return Array.from(e)}async predicates(){let e=new Set;for(let t of this.triples.values())e.add(t.predicate);return Array.from(e)}async objects(){let e=new Set;for(let t of this.triples.values())e.add(t.object);return Array.from(e)}async beginTransaction(){return new yd(this)}matchSPO(e,t,i){let n=this.getNodeKey(e),s=this.getNodeKey(t),o=this.getNodeKey(i),c=this.spo.get(n);if(!c)return[];let u=c.get(s);if(!u)return[];if(u.has(o)){let f=this.buildTripleKey(n,s,o),l=this.triples.get(f);return l?[l]:[]}return[]}matchSP(e,t){let i=this.getNodeKey(e),n=this.getNodeKey(t),s=this.spo.get(i);if(!s)return[];let o=s.get(n);return o?this.getTriplesByKeys(Array.from(o).map(c=>this.buildTripleKey(i,n,c))):[]}matchSO(e,t){let i=this.getNodeKey(e),n=this.getNodeKey(t),s=this.sop.get(i);if(!s)return[];let o=s.get(n);return o?this.getTriplesByKeys(Array.from(o).map(c=>this.buildTripleKey(i,c,n))):[]}matchPO(e,t){let i=this.getNodeKey(e),n=this.getNodeKey(t),s=this.pos.get(i);if(!s)return[];let o=s.get(n);return o?this.getTriplesByKeys(Array.from(o).map(c=>this.buildTripleKey(c,i,n))):[]}matchS(e){let t=this.getNodeKey(e),i=this.spo.get(t);if(!i)return[];let n=[];for(let[s,o]of i.entries())for(let c of o)n.push(this.buildTripleKey(t,s,c));return this.getTriplesByKeys(n)}matchP(e){let t=this.getNodeKey(e),i=this.pso.get(t);if(!i)return[];let n=[];for(let[s,o]of i.entries())for(let c of o)n.push(this.buildTripleKey(s,t,c));return this.getTriplesByKeys(n)}matchO(e){let t=this.getNodeKey(e),i=this.osp.get(t);if(!i)return[];let n=[];for(let[s,o]of i.entries())for(let c of o)n.push(this.buildTripleKey(s,c,t));return this.getTriplesByKeys(n)}getTriplesByKeys(e){let t=[];for(let i of e){let n=this.triples.get(i);n&&t.push(n)}return t}addToIndex(e,t,i,n){e.has(t)||e.set(t,new Map);let s=e.get(t);s.has(i)||s.set(i,new Set),s.get(i).add(n)}removeFromIndex(e,t,i,n){let s=e.get(t);if(!s)return;let o=s.get(i);o&&(o.delete(n),o.size===0&&s.delete(i),s.size===0&&e.delete(t))}getTripleKey(e){let t=this.getNodeKey(e.subject),i=this.getNodeKey(e.predicate),n=this.getNodeKey(e.object);return this.buildTripleKey(t,i,n)}buildTripleKey(e,t,i){return`${e}|${t}|${i}`}getNodeKey(e){if(e instanceof pT.IRI)return`i:${e.value}`;if(e instanceof mT.BlankNode)return`b:${e.id}`;if(e instanceof gT.Literal){let t=`l:${e.value}`;return e.datatype?t+=`^^${e.datatype.value}`:e.language&&(t+=`@${e.language}`),t}return""}getMatchCacheKey(e,t,i){let n=e?this.getNodeKey(e):"?",s=t?this.getNodeKey(t):"?",o=i?this.getNodeKey(i):"?";return`${n}|${s}|${o}`}};kc.InMemoryTripleStore=gd;var yd=class{static{a(this,"InMemoryTransaction")}constructor(e){this.store=e,this.operations=[],this.committed=!1,this.rolledBack=!1}async add(e){if(this.committed)throw new Qi.TransactionError("Transaction already committed");if(this.rolledBack)throw new Qi.TransactionError("Transaction already rolled back");this.operations.push({type:"add",triple:e})}async remove(e){if(this.committed)throw new Qi.TransactionError("Transaction already committed");if(this.rolledBack)throw new Qi.TransactionError("Transaction already rolled back");return this.operations.push({type:"remove",triple:e}),!0}async commit(){if(this.committed)throw new Qi.TransactionError("Transaction already committed");if(this.rolledBack)throw new Qi.TransactionError("Transaction already rolled back");for(let e of this.operations)e.type==="add"?await this.store.add(e.triple):await this.store.remove(e.triple);this.committed=!0,this.operations=[]}async rollback(){if(this.committed)throw new Qi.TransactionError("Transaction already committed");if(this.rolledBack)throw new Qi.TransactionError("Transaction already rolled back");this.operations=[],this.rolledBack=!0}}});var x0=y(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.RDFVocabularyMapper=void 0;var fr=Sn(),A0=Bt(),fe=Oi(),_d=class{static{a(this,"RDFVocabularyMapper")}constructor(){this.propertyMappings=new Map([["exo__Instance_class",fe.Namespace.RDF.term("type")],["exo__Asset_isDefinedBy",fe.Namespace.RDFS.term("isDefinedBy")],["exo__Class_superClass",fe.Namespace.RDFS.term("subClassOf")],["exo__Property_range",fe.Namespace.RDFS.term("range")],["exo__Property_domain",fe.Namespace.RDFS.term("domain")],["exo__Property_superProperty",fe.Namespace.RDFS.term("subPropertyOf")]])}generateClassHierarchyTriples(){let e=[];return e.push(new fr.Triple(fe.Namespace.EXO.term("Asset"),fe.Namespace.RDFS.term("subClassOf"),fe.Namespace.RDFS.term("Resource"))),e.push(new fr.Triple(fe.Namespace.EXO.term("Class"),fe.Namespace.RDFS.term("subClassOf"),fe.Namespace.RDFS.term("Class"))),e.push(new fr.Triple(fe.Namespace.EXO.term("Property"),fe.Namespace.RDFS.term("subClassOf"),fe.Namespace.RDF.term("Property"))),e.push(new fr.Triple(fe.Namespace.EMS.term("Task"),fe.Namespace.RDFS.term("subClassOf"),fe.Namespace.EXO.term("Asset"))),e.push(new fr.Triple(fe.Namespace.EMS.term("Project"),fe.Namespace.RDFS.term("subClassOf"),fe.Namespace.EXO.term("Asset"))),e.push(new fr.Triple(fe.Namespace.EMS.term("Area"),fe.Namespace.RDFS.term("subClassOf"),fe.Namespace.EXO.term("Asset"))),e}generatePropertyHierarchyTriples(){let e=[];return e.push(new fr.Triple(fe.Namespace.EXO.term("Instance_class"),fe.Namespace.RDFS.term("subPropertyOf"),fe.Namespace.RDF.term("type"))),e.push(new fr.Triple(fe.Namespace.EXO.term("Asset_isDefinedBy"),fe.Namespace.RDFS.term("subPropertyOf"),fe.Namespace.RDFS.term("isDefinedBy"))),e.push(new fr.Triple(fe.Namespace.EXO.term("Class_superClass"),fe.Namespace.RDFS.term("subPropertyOf"),fe.Namespace.RDFS.term("subClassOf"))),e.push(new fr.Triple(fe.Namespace.EXO.term("Property_range"),fe.Namespace.RDFS.term("subPropertyOf"),fe.Namespace.RDFS.term("range"))),e.push(new fr.Triple(fe.Namespace.EXO.term("Property_domain"),fe.Namespace.RDFS.term("subPropertyOf"),fe.Namespace.RDFS.term("domain"))),e.push(new fr.Triple(fe.Namespace.EXO.term("Property_superProperty"),fe.Namespace.RDFS.term("subPropertyOf"),fe.Namespace.RDFS.term("subPropertyOf"))),e}generateMappedTriple(e,t,i){let n=this.propertyMappings.get(t);if(!n)return null;let s;if(i instanceof A0.IRI)s=i;else{let o=i.match(/^(ems|exo)__(.+)$/);if(o){let[,c,u]=o;s=(c==="ems"?fe.Namespace.EMS:fe.Namespace.EXO).term(u)}else s=new A0.IRI(i)}return new fr.Triple(e,n,s)}hasMappingFor(e){return this.propertyMappings.has(e)}};jc.RDFVocabularyMapper=_d});var bd=y(Kr=>{"use strict";var _T=Kr&&Kr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(o=r[c])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},vT=Kr&&Kr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},bT=Kr&&Kr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.NoteToRDFConverter=void 0;var C0=Ke(),O0=Sn(),ST=Bt(),ya=or(),ys=Oi(),wT=Xe(),vd=class{static{a(this,"NoteToRDFConverter")}constructor(e){this.vault=e,this.OBSIDIAN_VAULT_SCHEME="obsidian://vault/"}async convertNote(e){let t=this.vault.getFrontmatter(e);if(!t)return[];let i=[],n=this.notePathToIRI(e.path);for(let[s,o]of Object.entries(t)){if(!this.isExocortexProperty(s))continue;let c=this.propertyKeyToIRI(s),u=Array.isArray(o)?o:[o];for(let f of u){let l=await this.valueToRDFObject(f,e);i.push(new O0.Triple(n,c,l))}if(s==="exo__Instance_class")for(let f of u){let l=this.expandClassValue(f);if(l){let h=ys.Namespace.RDF.term("type");i.push(new O0.Triple(n,h,l))}}}return i}async convertVault(){let e=this.vault.getAllFiles(),t=[];for(let i of e)try{let n=await this.convertNote(i);t.push(...n)}catch(n){throw console.error(`\u274C Error converting note: ${i.path}`),console.error(`   Error: ${n instanceof Error?n.message:String(n)}`),n}return t}notePathToIRI(e){let t=encodeURIComponent(e);return new ST.IRI(`${this.OBSIDIAN_VAULT_SCHEME}${t}`)}isExocortexProperty(e){return e.startsWith("exo__")||e.startsWith("ems__")}propertyKeyToIRI(e){if(e.startsWith("exo__")){let t=e.substring(5);return ys.Namespace.EXO.term(t)}if(e.startsWith("ems__")){let t=e.substring(5);return ys.Namespace.EMS.term(t)}throw new Error(`Invalid property key: ${e}`)}async valueToRDFObject(e,t){if(typeof e=="string"){let i=this.removeQuotes(e),n=this.extractWikilink(i);if(n){let s=this.vault.getFirstLinkpathDest(n,t.path);return s?this.notePathToIRI(s.path):new ya.Literal(i)}if(this.isClassReference(i)){let s=this.expandClassValue(i);if(s)return s}return new ya.Literal(i)}return typeof e=="boolean"?new ya.Literal(e.toString()):typeof e=="number"?new ya.Literal(e.toString(),ys.Namespace.XSD.term("decimal")):new ya.Literal(String(e))}removeQuotes(e){let t=e.trim();return t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'")?t.substring(1,t.length-1):e}extractWikilink(e){let t=e.match(/^\[\[([^\]]+)\]\]$/);return t?t[1]:null}isClassReference(e){return(e.startsWith("ems__")||e.startsWith("exo__"))&&!/\s/.test(e)}expandClassValue(e){let t=this.removeQuotes(e);if(t.startsWith("ems__")){let i=t.substring(5);return ys.Namespace.EMS.term(i)}if(t.startsWith("exo__")){let i=t.substring(5);return ys.Namespace.EXO.term(i)}return null}};Kr.NoteToRDFConverter=vd;Kr.NoteToRDFConverter=vd=_T([(0,C0.injectable)(),bT(0,(0,C0.inject)(wT.DI_TOKENS.IVaultAdapter)),vT("design:paramtypes",[Object])],vd)});var Sd=y((UI,F0)=>{var _s=class{static{a(this,"Wildcard")}constructor(){return ET||this}equals(e){return e&&this.termType===e.termType}};Object.defineProperty(_s.prototype,"value",{enumerable:!0,value:"*"});Object.defineProperty(_s.prototype,"termType",{enumerable:!0,value:"Wildcard"});var ET=new _s;F0.exports.Wildcard=_s});var D0=y(($I,P0)=>{var TT=(function(){var r=a(function(T,E,C,P){for(C=C||{},P=T.length;P--;C[T[P]]=E);return C},"o"),e=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],t=[2,247],i=[100,110,113,115,116,123,126,131,329,330,331,332,333],n=[2,409],s=[1,18],o=[1,27],c=[13,16,45,197,224,229,308],u=[28,29,53],f=[28,53],l=[1,42],h=[1,45],p=[1,41],g=[1,44],v=[123,126],S=[1,67],x=[39,45,87],F=[13,16,45,197,224,308],D=[1,87],U=[2,281],G=[1,86],ee=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Fe=[6,28,29,53,63,70,73,81,83,85],it=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],dt=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],V=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],oe=[13,16,308],xe=[112,132,327,334],Qe=[13,16,112,132,308],Be=[1,111],We=[1,117],Pe=[112,132,327,328,334],Re=[13,16,112,132,308,328],Oe=[28,29,45,53,87],$=[1,138],I=[1,151],Ie=[1,128],Le=[1,127],j=[1,129],ue=[1,140],be=[1,141],B=[1,142],Se=[1,143],we=[1,144],ge=[1,145],Ee=[1,147],ce=[1,148],ye=[2,457],le=[1,158],_e=[1,159],Te=[1,160],Y=[1,152],J=[1,153],X=[1,156],Q=[1,171],W=[1,172],te=[1,173],Z=[1,174],re=[1,175],ie=[1,176],ne=[1,167],se=[1,168],K=[1,169],ae=[1,170],De=[1,157],Ce=[1,166],Ae=[1,161],_=[1,162],b=[1,163],w=[1,164],O=[1,165],q=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],$e=[1,195],ze=[6,31,73,81,83,85],me=[2,285],N=[1,199],k=[1,201],M=[6,31,70,73,81,83,85],L=[2,283],de=[1,207],Ne=[1,218],ke=[1,223],wt=[1,219],Xt=[1,225],ar=[1,226],Lt=[1,224],pm=[6,63,70,73,81,83,85],mm=[1,236],gm=[2,334],ym=[1,243],_m=[1,241],Et=[6,193],oo=[2,349],vm=[2,339],Bi=[28,128],bm=[47,48,193,272],co=[47,48,193,242,272],zn=[47,48,193,242,246,272],Kn=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],pt=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],Sm=[1,271],wm=[1,270],at=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],Em=[1,281],Tm=[1,280],qt=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Hs=[45,89],uo=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],lo=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],fo=[31,89],ho=[48,87],fn=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],ei=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],Am=[1,313],Yn=[6,85],cl=[6,31,81,83,85],xm=[2,361],vi=[2,353],hn=[1,343],zs=[31,112,335],bi=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],ul=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],Cm=[6,109,193],dn=[31,112],ot=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],ll=[1,390],fl=[1,391],$i=[13,16,87,197,308,314],Om=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],po=[1,417],mo=[1,418],Fm=[13,16,48,197,229,308],Gi=[6,31,85],Pm=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],hl=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],pn=[29,31,85,112,159,160,161,163,164],go=[1,443],yo=[1,444],Dm=[1,449],mn=[31,112,193,232,318,335],_o=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Rm=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],dl=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Ks=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Ys=[31,45],Im=[1,507],Nm=[1,508],km=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],vo=[29,31,85,112,159,160,161,163,164,335],gn=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],jm=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Mm=[2,352],pl=[13,16,197,308,314],Lm=[1,565],Qn=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],qm=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Si=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Vm=[13,16,87,308],wi=[2,364],Jn=[29,31,85,112,159,160,161,163,164,193,232,318,335],bo=[31,112,193,232,272,318,335],Ei=[2,359],Um=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],So=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],Bm=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],$m=[2,347],ml={trace:a(function(){},"trace"),yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:a(function(E,C,P,H,pe,d,Ut){var m=d.length-1;switch(pe){case 1:if(d[m-1]=d[m-1]||{},ve.base&&(d[m-1].base=ve.base),ve.base="",d[m-1].prefixes=ve.prefixes,ve.prefixes=null,ve.pathOnly){if(d[m-1].type==="path"||"termType"in d[m-1])return d[m-1];throw new Error("Received full SPARQL query in path only mode")}else if(d[m-1].type==="path"||"termType"in d[m-1])throw new Error("Received only path in full SPARQL mode");if(d[m-1].type==="update"){let Ge={};for(let Je of d[m-1].updates)if(Je.updateType==="insert"){let je={};for(let Ve of Je.insert)if(Ve.type==="bgp"||Ve.type==="graph")for(let Zt of Ve.triples)Zt.subject.termType==="BlankNode"&&(je[Zt.subject.value]=!0),Zt.predicate.termType==="BlankNode"&&(je[Zt.predicate.value]=!0),Zt.object.termType==="BlankNode"&&(je[Zt.object.value]=!0);for(let Ve of Object.keys(je)){if(Ge[Ve])throw new Error("Detected reuse blank node across different INSERT DATA clauses");Ge[Ve]=!0}}}return d[m-1];case 2:this.$={...d[m-1],...d[m],type:"query"};break;case 4:ve.base=Qs(d[m]);break;case 5:ve.prefixes||(ve.prefixes={}),d[m-1]=d[m-1].substr(0,d[m-1].length-1),d[m]=Qs(d[m]),ve.prefixes[d[m-1]]=d[m];break;case 6:this.$={...d[m-3],...vn(d[m-2]),...d[m-1],...d[m]};break;case 7:if(!ve.skipValidation&&(El(d[m-3].variables.map(Je=>wl(Je.expression))).some(Je=>Je.aggregation==="count"&&!(Je.expression instanceof wo))||d[m].group)){for(let Je of d[m-3].variables)if(Je.termType==="Variable"){if(!d[m].group||!d[m].group.map(je=>ts(je)).includes(ts(Je)))throw Error("Projection of ungrouped variable (?"+ts(Je)+")")}else if(wl(Je.expression).length===0){let je=Iv(Je.expression);for(let Ve of je)if(!d[m].group||!d[m].group.map||!d[m].group.map(Zt=>ts(Zt)).includes(ts(Ve)))throw Error("Use of ungrouped variable in projection of operation (?"+ts(Ve)+")")}}let ni=d[m-1].where.filter(Ge=>Ge.type==="query");if(ni.length>0){let Ge=d[m-3].variables.filter(je=>je.variable&&je.variable.value).map(je=>je.variable.value),Je=El(ni.map(je=>je.variables)).map(je=>je.value||je.variable.value);for(let je of Ge)if(Je.indexOf(je)>=0)throw Error("Target id of 'AS' (?"+je+") already used in subquery")}this.$=nt(d[m-3],vn(d[m-2]),d[m-1],d[m]);break;case 8:this.$=nt({queryType:"CONSTRUCT",template:d[m-3]},vn(d[m-2]),d[m-1],d[m]);break;case 9:this.$=nt({queryType:"CONSTRUCT",template:d[m-2]=d[m-2]?d[m-2].triples:[]},vn(d[m-5]),{where:[{type:"bgp",triples:_n([],d[m-2])}]},d[m]);break;case 10:this.$=nt({queryType:"DESCRIBE",variables:d[m-3]==="*"?[new wo]:d[m-3]},vn(d[m-2]),d[m-1],d[m]);break;case 11:this.$=nt({queryType:"ASK"},vn(d[m-2]),d[m-1],d[m]);break;case 12:this.$=nt(d[m-1],{variables:[new wo]});break;case 13:let ta=d[m].map(Ge=>Ge.value||Ge.variable.value),rs=Nv(ta);if(rs.length>0)throw Error("Two or more of the resulting columns have the same name (?"+rs[0]+")");this.$=nt(d[m-1],{variables:d[m]});break;case 14:this.$=nt({queryType:"SELECT"},d[m]&&(d[m-1]=Vt(d[m]),d[m]={},d[m][d[m-1]]=!0,d[m]));break;case 16:case 27:this.$=Xn(d[m-3],{variable:d[m-1]});break;case 17:case 18:this.$=nt(d[m-3],d[m-2],d[m-1],d[m],{type:"query"});break;case 19:case 58:this.$={iri:d[m],named:!!d[m-1]};break;case 20:this.$={where:d[m].patterns};break;case 21:this.$=nt(d[m-1],d[m]);break;case 22:this.$=nt(d[m-2],d[m-1],d[m]);break;case 23:this.$={group:d[m]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=Xn(d[m]);break;case 26:this.$=Xn(d[m-1]);break;case 29:this.$={having:d[m]};break;case 30:this.$={order:d[m]};break;case 32:this.$=Xn(d[m],{descending:!0});break;case 35:this.$={limit:es(d[m])};break;case 36:this.$={offset:es(d[m])};break;case 37:this.$={limit:es(d[m-2]),offset:es(d[m])};break;case 38:this.$={limit:es(d[m]),offset:es(d[m-2])};break;case 39:case 43:this.$={type:"values",values:d[m]};break;case 40:case 84:this.$=d[m-1].map(Ge=>({[d[m-3]]:Ge}));break;case 41:case 85:this.$=d[m-1].map(()=>({}));break;case 42:case 86:var ii=d[m-4].length;d[m-4]=d[m-4].map(gl),this.$=d[m-1].map(function(Ge){if(Ge.length!==ii)throw Error("Inconsistent VALUES length");for(var Je={},je=0;je<ii;je++)Je["?"+d[m-4][je].value]=Ge[je];return Je});break;case 44:case 65:case 100:case 126:case 175:this.$=d[m-1];break;case 45:this.$={type:"update",updates:Ti(d[m-2],d[m-1])};break;case 46:this.$=nt({type:"load",silent:!!d[m-2],source:d[m-1]},d[m]&&{destination:d[m]});break;case 47:this.$={type:Vt(d[m-2]),silent:!!d[m-1],graph:d[m]};break;case 48:this.$={type:Vt(d[m-4]),silent:!!d[m-3],source:d[m-2],destination:d[m]};break;case 49:this.$={type:"create",silent:!!d[m-2],graph:{type:"graph",name:d[m]}};break;case 50:this.$={updateType:"insert",insert:e1(d[m])};break;case 51:this.$={updateType:"delete",delete:xl(e1(d[m]))};break;case 52:this.$={updateType:"deletewhere",delete:xl(d[m])};break;case 53:this.$={updateType:"insertdelete",...d[m-4],...d[m-3],...vn(d[m-2],"using"),where:d[m].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=d[m];break;case 55:this.$={delete:xl(d[m-1]),insert:d[m]||[]};break;case 56:this.$={delete:[],insert:d[m]};break;case 59:this.$={graph:d[m]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:d[m]};break;case 64:this.$={[Vt(d[m])]:!0};break;case 66:this.$=d[m-1]?ti(d[m],[d[m-1]]):ti(d[m]);break;case 67:var Zs=nt(d[m-3]||{triples:[]},{type:"graph",name:d[m-5]});this.$=d[m]?[Zs,d[m]]:[Zs];break;case 68:case 73:this.$={type:"bgp",triples:ti(d[m-2],[d[m-1]])};break;case 69:this.$={type:"group",patterns:[d[m-1]]};break;case 70:for(let Ge of d[m-1].filter(Je=>Je.type==="bind")){let Je=d[m-1].indexOf(Ge),je=new Set;for(let Ve of d[m-1].slice(0,Je))(Ve.type==="group"||Ve.type==="bgp")&&Xm(Ve).forEach(Zt=>je.add(Zt));if(je.has(Ge.variable.value))throw Error("Variable used to bind is already bound (?"+Ge.variable.value+")")}this.$={type:"group",patterns:d[m-1]};break;case 71:this.$=d[m-1]?ti([d[m-1]],d[m]):ti(d[m]);break;case 72:this.$=d[m]?[d[m-2],d[m]]:d[m-2];break;case 75:this.$=nt(d[m],{type:"optional"});break;case 76:this.$=nt(d[m],{type:"minus"});break;case 77:this.$=nt(d[m],{type:"graph",name:d[m-1]});break;case 78:this.$=nt(d[m],{type:"service",name:d[m-1],silent:!!d[m-2]});break;case 79:this.$={type:"filter",expression:d[m]};break;case 80:this.$={type:"bind",variable:d[m-1],expression:d[m-3]};break;case 89:this.$=Xs(d[m]);break;case 90:this.$=void 0;break;case 91:this.$=d[m-1].length?{type:"union",patterns:ti(d[m-1].map(_l),[_l(d[m])])}:d[m];break;case 95:this.$={...d[m],function:d[m-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:Ti(d[m-2],d[m-1]),distinct:!!d[m-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=Ti(d[m-2],d[m-1]);break;case 101:this.$=ti(d[m-2],[d[m-1]]);break;case 102:case 112:this.$=Al(d[m].map(Ge=>nt(Ai(d[m-1]),Ge)));break;case 103:this.$=Al(_n(d[m].map(Ge=>nt(Ai(d[m-1].entity),Ge)),d[m-1].triples));break;case 105:this.$=ti([d[m-1]],d[m]);break;case 106:this.$=ti(d[m]);break;case 107:this.$=Sl(d[m-1],d[m]);break;case 109:case 237:this.$=ve.factory.namedNode(Ev);break;case 110:case 118:this.$=Ti(d[m-1],d[m]);break;case 111:this.$=d[m]?{annotation:d[m],object:d[m-1]}:d[m-1];break;case 113:this.$=d[m]?Al(_n(d[m].map(Ge=>nt(Ai(d[m-1].entity),Ge)),d[m-1].triples)):d[m-1].triples;break;case 114:this.$=Sl(...d[m-1],d[m]);break;case 116:this.$=Sl(...d[m]);break;case 117:case 159:case 163:this.$=[d[m-1],d[m]];break;case 119:this.$=d[m]?{object:d[m-1],annotation:d[m]}:d[m-1];break;case 120:this.$=d[m-1].length?Zn("|",Ti(d[m-1],d[m])):d[m];break;case 121:this.$=d[m-1].length?Zn("/",Ti(d[m-1],d[m])):d[m];break;case 122:this.$=d[m]?Zn(d[m],[d[m-1]]):d[m-1];break;case 123:this.$=d[m-1]?Zn(d[m-1],[d[m]]):d[m];break;case 125:case 131:this.$=Zn(d[m-1],[d[m]]);break;case 129:this.$=Zn("|",Ti(d[m-2],d[m-1]));break;case 132:case 134:this.$=Dv(d[m-1]);break;case 133:case 135:this.$=Rv(d[m-1]);break;case 140:this.$={entity:d[m],triples:[]};break;case 145:this.$=gl(d[m]);break;case 149:this.$=ve.factory.namedNode(Gm);break;case 151:case 153:case 158:case 162:this.$=yl(d[m-1],d[m]);break;case 152:this.$=["||",d[m]];break;case 154:this.$=["&&",d[m]];break;case 156:this.$=Tt(d[m-1],[d[m-2],d[m]]);break;case 157:this.$=Tt(d[m-2]?"notin":"in",[d[m-3],d[m]]);break;case 160:this.$=["+",yl(d[m-1],d[m])];break;case 161:var Ao=ri(d[m-1].value.replace("-",""),d[m-1].datatype);this.$=["-",yl(Ao,d[m])];break;case 164:this.$=Tt("UPLUS",[d[m]]);break;case 165:this.$=Tt(d[m-1],[d[m]]);break;case 166:this.$=Tt("UMINUS",[d[m]]);break;case 177:this.$=Tt(Vt(d[m-1]));break;case 178:this.$=Tt(Vt(d[m-3]),[d[m-1]]);break;case 179:this.$=Xs(Tt(Vt(d[m-3]),[d[m-1]]));break;case 180:this.$=Tt(Vt(d[m-5]),[d[m-3],d[m-1]]);break;case 181:this.$=Tt(Vt(d[m-7]),[d[m-5],d[m-3],d[m-1]]);break;case 182:this.$=Xs(Tt(Vt(d[m-7]),[d[m-5],d[m-3],d[m-1]]));break;case 183:this.$=Tt(Vt(d[m-1]),d[m]);break;case 184:this.$=Tt("bound",[gl(d[m-1])]);break;case 185:this.$=Tt(d[m-1],[]);break;case 186:this.$=Tt(d[m-3],[d[m-1]]);break;case 187:this.$=Tt(d[m-2]?"notexists":"exists",[_l(d[m])]);break;case 188:case 189:this.$=Xn(d[m-1],{type:"aggregate",aggregation:Vt(d[m-4]),distinct:!!d[m-2]});break;case 190:this.$=Xn(d[m-2],{type:"aggregate",aggregation:Vt(d[m-5]),distinct:!!d[m-3],separator:typeof d[m-1]=="string"?d[m-1]:" "});break;case 192:this.$=ri(d[m]);break;case 193:this.$=Cv(d[m-1],Vt(d[m].substr(1)));break;case 194:this.$=ri(d[m-2],d[m]);break;case 195:case 204:this.$=ri(d[m],Wm);break;case 196:case 205:this.$=ri(d[m],Hm);break;case 197:case 206:this.$=ri(Vt(d[m]),zm);break;case 200:this.$=ri(d[m].toLowerCase(),xv);break;case 201:this.$=ri(d[m].substr(1),Wm);break;case 202:this.$=ri(d[m].substr(1),Hm);break;case 203:this.$=ri(d[m].substr(1).toLowerCase(),zm);break;case 207:case 208:this.$=Jm(d[m],1);break;case 209:case 210:this.$=Jm(d[m],3);break;case 211:this.$=ve.factory.namedNode(Qs(d[m]));break;case 213:var xo=d[m].indexOf(":"),ea=d[m].substr(0,xo),Co=ve.prefixes[ea];if(!Co)throw new Error("Unknown prefix: "+ea);var tt=Qs(Co+d[m].substr(xo+1));this.$=ve.factory.namedNode(tt);break;case 214:if(d[m]=d[m].substr(0,d[m].length-1),!(d[m]in ve.prefixes))throw new Error("Unknown prefix: "+d[m]);var tt=Qs(ve.prefixes[d[m]]);this.$=ve.factory.namedNode(tt);break;case 215:this.$=Js(d[m].replace(/^(_:)/,""));break;case 216:this.$=Js();break;case 217:case 218:case 232:this.$=Xs(vl(d[m-3],d[m-2],d[m-1]));break;case 230:case 231:this.$=Xs(d[m-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:d[m-1].push(d[m]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[d[m]];break;case 308:d[m-3].push(d[m-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:d[m-2].push(d[m-1]);break}},"anonymous"),table:[r(e,t,{3:1,4:2,10:3}),{1:[3]},r(i,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:n,16:n,45:n,197:n,224:n,229:n,308:n,24:[1,13],32:[1,14],36:[1,15],41:s}),r([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:o},{6:[2,239]},r(c,[2,411],{216:28,217:29}),r(u,[2,249],{18:30}),r(u,[2,251],{22:31}),r(f,[2,255],{25:32,27:33,29:[1,34]}),{13:l,16:h,33:35,39:[1,37],44:39,55:40,87:p,139:38,307:43,308:g,323:36},r(u,[2,267],{37:46}),r(v,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:S,87:p},r(x,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),r(e,[2,248]),r(e,[2,245]),r(e,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},r([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),r(F,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:D,29:U,52:84,53:G,56:85},{19:88,28:D,29:U,52:89,53:G,56:85},r(u,[2,253],{26:90}),{28:[1,91],52:92,53:G},r(ee,[2,385],{181:93,182:94,183:95,31:[2,383]}),r(Fe,[2,263],{34:96}),r(Fe,[2,261],{44:39,55:40,307:43,139:97,13:l,16:h,87:p,308:g}),r(Fe,[2,262]),r(it,[2,259]),r(dt,[2,143]),r(dt,[2,144]),r([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),r(V,[2,211]),r(V,[2,212]),r(V,[2,213]),r(V,[2,214]),{19:98,28:D,29:U,52:99,53:G,56:85},{6:[2,309],99:100,193:[1,101]},r(oe,[2,311],{101:102,328:[1,103]}),r(xe,[2,317],{104:104,328:[1,105]}),r(Qe,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:Be,114:110},{29:Be,114:112},{29:Be,114:113},{118:114,123:[1,115],125:116,126:We},r(Pe,[2,315]),r(Pe,[2,316]),r(Re,[2,319]),r(Re,[2,320]),r(Re,[2,321]),r(v,[2,327]),{13:l,16:h,55:118,307:43,308:g},r(u,[2,12]),r(u,[2,13],{44:66,43:119,45:S,87:p}),r(Oe,[2,269]),r(Oe,[2,15]),{13:l,16:h,44:136,45:$,46:120,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(x,[2,14]),r(x,[2,274]),r(x,[2,271]),r(x,[2,272]),r(e,[2,4]),{13:[1,177]},r(q,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},r(c,[2,410]),r([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:l,16:h,45:[1,193],55:194,197:$e,219:189,220:190,223:191,224:[1,192],307:43,308:g},r(F,[2,419]),r(ze,me,{20:196,59:197,69:198,70:N}),r(u,[2,250]),{29:k,57:200},r(oe,[2,279],{54:202,327:[1,203]}),{29:[2,282]},r(M,L,{23:204,58:205,62:206,63:de}),r(u,[2,252]),{19:208,28:D,29:U,52:209,53:G,56:85},{29:[1,210]},r(f,[2,256]),{31:[1,211]},{31:[2,384]},{13:l,16:h,44:215,45:Ne,55:220,82:I,87:p,89:ke,145:212,172:221,185:213,187:214,231:wt,236:216,237:222,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,309:Xt,310:ar,311:217,312:Lt},r(pm,[2,265],{56:85,35:227,52:228,19:229,28:D,29:U,53:G}),r(it,[2,260]),r(M,L,{58:205,62:206,23:230,63:de}),r(u,[2,268]),{6:[2,45]},r(e,t,{10:3,4:231}),{13:l,16:h,55:232,307:43,308:g},r(oe,[2,312]),{105:233,112:mm,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},r(xe,[2,318]),r(oe,gm,{108:240,133:242,112:ym,132:_m}),r(Qe,[2,323]),{112:[1,244]},{112:[2,325]},r(Et,[2,50]),r(ee,oo,{135:245,136:246,143:247,144:248,31:vm,112:vm}),r(Et,[2,51]),r(Et,[2,52]),r(Bi,[2,328],{119:249}),{29:Be,114:250},r(Bi,[2,56]),{29:Be,114:251},r(v,[2,59]),r(Oe,[2,270]),{47:[1,252]},r(bm,[2,150]),r(co,[2,428],{240:253}),r(zn,[2,430],{244:254}),r(zn,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),r(Kn,[2,440],{252:264}),r(pt,[2,448],{260:265}),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,255:154,257:155,264:266,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,255:154,257:155,264:267,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,255:154,257:155,264:268,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(pt,[2,167]),r(pt,[2,168]),r(pt,[2,169]),r(pt,[2,170],{176:269,45:Sm,89:wm}),r(pt,[2,171]),r(pt,[2,172]),r(pt,[2,173]),r(pt,[2,174]),{13:l,16:h,44:136,45:$,46:272,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(at,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:Em,89:Tm,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},r(qt,[2,192],{292:[1,286],293:[1,287]}),r(qt,[2,195]),r(qt,[2,196]),r(qt,[2,197]),r(qt,[2,198]),r(qt,[2,199]),r(qt,[2,200]),{13:l,16:h,44:39,55:40,82:I,87:p,139:289,172:291,255:154,257:155,266:290,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},r(Hs,[2,452]),r(Hs,[2,453]),r(Hs,[2,454]),r(Hs,[2,455]),r(Hs,[2,456]),{279:[2,458]},r(uo,[2,207]),r(uo,[2,208]),r(uo,[2,209]),r(uo,[2,210]),r(qt,[2,201]),r(qt,[2,202]),r(qt,[2,203]),r(qt,[2,204]),r(qt,[2,205]),r(qt,[2,206]),r(e,[2,5]),r(lo,[2,297],{88:295}),r(fo,[2,299],{90:296}),{48:[1,297],87:[1,298]},r(ho,[2,301]),r(q,[2,43]),r(q,[2,82]),r(q,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},r(c,[2,412]),r(fn,[2,123]),r(fn,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),r(ei,[2,124]),{13:l,16:h,45:[1,311],55:194,89:[1,310],197:$e,223:312,225:308,226:309,229:Am,307:43,308:g},r(c,n,{215:10,214:314}),r(ei,[2,236]),r(ei,[2,237]),r(Yn,[2,6]),r(cl,[2,287],{60:315,72:316,73:[1,317]}),r(ze,[2,286]),{13:l,16:h,45:$,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,307:43,308:g,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r([6,31,63,70,73,81,83,85],[2,20]),r(ee,xm,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:vi,31:vi,85:vi,112:vi,159:vi,160:vi,161:vi,163:vi,164:vi,41:s}),{13:l,16:h,55:331,307:43,308:g},r(oe,[2,280]),r(Yn,[2,7]),r(ze,me,{59:197,69:198,20:332,70:N}),r(M,[2,284]),{64:[1,333]},r(M,L,{58:205,62:206,23:334,63:de}),r(u,[2,254]),r(ee,oo,{144:248,30:335,143:336,31:[2,257]}),r(u,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:l,16:h,44:39,55:40,87:p,139:342,186:339,190:340,195:341,197:hn,307:43,308:g},r(zs,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:l,16:h,87:p,197:hn,308:g}),r(bi,[2,227]),r(bi,[2,228]),r(bi,[2,229]),{13:l,16:h,44:215,45:Ne,55:220,82:I,87:p,89:ke,172:221,185:351,187:350,200:348,230:347,231:wt,234:349,236:216,237:222,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,309:Xt,310:ar,311:217,312:Lt},{13:l,16:h,44:39,55:40,87:p,139:342,186:352,190:340,195:341,197:hn,307:43,308:g},r(bi,[2,146]),r(bi,[2,147]),r(bi,[2,148]),r(bi,[2,149]),{13:l,16:h,44:354,55:355,82:I,87:p,172:357,237:356,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,309:Xt,310:ar,311:358,312:Lt,313:353},r(ul,[2,215]),r(ul,[2,216]),r(M,L,{58:205,62:206,23:359,63:de}),r(Fe,[2,264]),r(pm,[2,266]),r(Yn,[2,11]),r(i,[2,308],{6:[2,310]}),r(Et,[2,313],{102:360,120:361,121:[1,362]}),r(Et,[2,47]),r(Et,[2,63]),r(Et,[2,64]),{13:l,16:h,55:363,307:43,308:g},r(Et,[2,336]),r(Et,[2,337]),r(Et,[2,338]),{109:[1,364]},r(Cm,[2,60]),{13:l,16:h,55:365,307:43,308:g},r(oe,[2,335]),{13:l,16:h,55:366,307:43,308:g},{31:[1,367]},r(dn,[2,341],{137:368}),r(dn,[2,340]),{13:l,16:h,44:215,45:Ne,55:220,82:I,87:p,89:ke,145:369,172:221,185:213,187:214,231:wt,236:216,237:222,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,309:Xt,310:ar,311:217,312:Lt},{28:[1,370],127:371,128:[1,372]},r(Bi,[2,330],{124:373,125:374,126:We}),r(Bi,[2,57]),{44:375,87:p},r(bm,[2,151],{241:376,242:[1,377]}),r(co,[2,153],{245:378,246:[1,379]}),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,247:380,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},{250:[1,381]},r(ot,[2,432]),r(ot,[2,433]),r(ot,[2,434]),r(ot,[2,435]),r(ot,[2,436]),r(ot,[2,437]),{250:[2,439]},r([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:Q,298:W,299:te,300:Z,301:re,302:ie}),r(Kn,[2,162],{261:388,262:389,39:ll,338:fl}),r(pt,[2,164]),r(pt,[2,165]),r(pt,[2,166]),r(at,[2,95]),r(at,[2,96]),r(ot,[2,377],{177:392,325:[1,393]}),{48:[1,394]},r(at,[2,177]),{13:l,16:h,44:136,45:$,46:395,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},{13:l,16:h,44:136,45:$,46:396,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},{13:l,16:h,44:136,45:$,46:397,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},{13:l,16:h,44:136,45:$,46:398,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},{13:l,16:h,44:136,45:$,46:399,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(at,[2,183]),r(at,[2,98]),r(ot,[2,381],{180:400}),{87:[1,401]},r(at,[2,185]),{13:l,16:h,44:136,45:$,46:402,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},{29:k,57:403},r(qt,[2,193]),{13:l,16:h,55:404,307:43,308:g},{13:l,16:h,44:39,55:40,87:p,139:342,195:405,197:hn,307:43,308:g},r($i,[2,233]),r($i,[2,234]),r($i,[2,235]),r(Om,[2,459],{281:406,325:[1,407]}),r(ot,[2,463],{284:408,325:[1,409]}),r(ot,[2,465],{286:410,325:[1,411]}),{13:l,16:h,31:[1,412],55:414,82:I,171:413,172:415,173:416,174:po,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:mo},{31:[1,419],89:[1,420]},{29:[1,421]},r(ho,[2,302]),r(lo,[2,367],{167:422}),r(fo,[2,369],{168:423}),{48:[1,424],87:[1,425]},r(ho,[2,371]),r(fn,[2,122]),r(fn,[2,417]),r(fn,[2,413]),r(fn,[2,414]),r(fn,[2,415]),r(ei,[2,125]),r(ei,[2,127]),r(ei,[2,128]),r(Fm,[2,420],{227:426}),r(ei,[2,130]),{13:l,16:h,55:194,197:$e,223:427,307:43,308:g},{48:[1,428]},r(Gi,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),r(cl,[2,288]),{64:[1,433]},r(ze,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:l,16:h,45:$,268:ue,269:be,270:B,271:Se,273:we,274:ge,276:Ee,277:ce,279:ye,280:le,283:_e,285:Te,308:g,346:Ce,347:Ae,348:_,349:b,350:w,351:O}),r(Pm,[2,293]),r(hl,[2,92]),r(hl,[2,93]),r(hl,[2,94]),{45:Sm,89:wm,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:D,29:U,56:85},{19:438,28:D,29:U,56:85},r(pn,[2,355],{149:439}),r(pn,[2,354]),{13:l,16:h,44:215,45:go,55:220,82:I,87:p,89:ke,156:440,172:221,185:441,203:442,231:yo,236:216,237:222,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,309:Xt,310:ar,311:217,312:Lt},r(Fe,[2,19]),r(Gi,[2,21]),{13:l,16:h,44:450,45:Dm,55:323,65:445,66:446,67:447,68:448,87:p,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,307:43,308:g,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(Yn,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},r(ee,[2,386],{31:[2,388]}),r(zs,[2,102]),r(mn,[2,391],{191:452}),r(ee,[2,395],{196:453,198:454}),r(ee,[2,108]),r(ee,[2,109]),r(zs,[2,103]),r(zs,[2,104]),r(zs,[2,390]),{13:l,16:h,44:215,45:Ne,48:[1,455],55:220,82:I,87:p,89:ke,172:221,185:351,187:350,200:456,231:wt,234:349,236:216,237:222,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,309:Xt,310:ar,311:217,312:Lt},r(_o,[2,424]),r(Rm,[2,136]),r(Rm,[2,137]),r(dl,[2,140]),{232:[1,457]},{13:l,16:h,44:39,55:40,87:p,139:342,195:458,197:hn,307:43,308:g},r($i,[2,219]),r($i,[2,220]),r($i,[2,221]),r($i,[2,222]),r($i,[2,223]),r(Yn,[2,10]),r(Et,[2,46]),r(Et,[2,314]),{112:mm,122:459},r(Et,[2,62]),r(oe,gm,{133:242,108:460,112:ym,132:_m}),r(Cm,[2,61]),r(Et,[2,49]),r([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},r(dn,[2,351],{146:463,335:[1,464]}),{29:k,57:465},r(Bi,[2,329]),r(oe,[2,332],{129:466,327:[1,467]}),r(Bi,[2,55]),r(Bi,[2,331]),{48:[1,468]},r(co,[2,429]),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(zn,[2,431]),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,243:470,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(zn,[2,156]),{45:Em,89:Tm,179:471},r(Kn,[2,441]),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,251:472,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(pt,[2,444],{256:473}),r(pt,[2,446],{258:474}),r(ot,[2,442]),r(ot,[2,443]),r(pt,[2,449]),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,255:154,257:155,259:475,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(ot,[2,450]),r(ot,[2,451]),r(ot,[2,379],{178:476}),r(ot,[2,378]),r([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:l,16:h,44:136,45:$,46:482,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},{48:[1,483]},{48:[1,484]},r(at,[2,187]),r(qt,[2,194]),{13:l,16:h,44:39,55:40,82:I,87:p,139:289,172:291,255:154,257:155,266:290,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,320:485},{13:l,16:h,39:[1,487],44:136,45:$,46:488,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,282:486,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(Om,[2,460]),{13:l,16:h,44:136,45:$,46:489,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(ot,[2,464]),{13:l,16:h,44:136,45:$,46:490,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(ot,[2,466]),r(q,[2,40]),r(lo,[2,298]),r(Ks,[2,87]),r(Ks,[2,88]),r(Ks,[2,89]),r(Ks,[2,90]),{13:l,16:h,55:492,82:I,172:493,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,311:494,312:Lt,315:491},r(q,[2,41]),r(fo,[2,300]),r(Ys,[2,303],{92:495}),{13:l,16:h,31:[1,496],55:414,82:I,171:497,172:415,173:416,174:po,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:mo},{31:[1,498],89:[1,499]},{29:[1,500]},r(ho,[2,372]),{13:l,16:h,48:[2,422],55:194,197:$e,223:312,226:502,228:501,229:Am,307:43,308:g},r(ei,[2,131]),r(ei,[2,126]),r(Gi,[2,22]),r(Gi,[2,290]),{82:[1,503]},{82:[1,504]},{13:l,16:h,44:510,45:$,55:323,67:321,68:322,74:505,75:506,76:Im,77:320,78:Nm,79:509,87:p,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,307:43,308:g,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(Pm,[2,294]),r(km,[2,69]),r(km,[2,70]),r(ze,me,{59:197,69:198,20:511,70:N}),r(M,L,{58:205,62:206,23:512,63:de}),{29:[2,375],31:[2,71],84:522,85:o,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},r(pn,[2,363],{157:524,335:[1,525]}),r(c,n,{215:10,202:526,205:527,208:528,214:529,44:530,87:p}),r(vo,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:n,16:n,45:n,197:n,224:n,229:n,308:n,87:p}),{13:l,16:h,44:215,45:go,55:220,82:I,87:p,89:ke,172:221,185:351,203:536,212:534,231:yo,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,309:Xt,310:ar,311:217,312:Lt},r(c,n,{215:10,205:527,208:528,214:529,44:530,202:537,87:p}),r(M,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:l,16:h,45:Dm,87:p,268:ue,269:be,270:B,271:Se,273:we,274:ge,276:Ee,277:ce,279:ye,280:le,283:_e,285:Te,308:g,346:Ce,347:Ae,348:_,349:b,350:w,351:O}),r(gn,[2,291]),r(gn,[2,24]),r(gn,[2,25]),{13:l,16:h,44:136,45:$,46:539,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(gn,[2,28]),r(M,L,{58:205,62:206,23:540,63:de}),r([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),r(mn,[2,107]),{13:l,16:h,44:215,45:Ne,55:220,82:I,87:p,89:ke,172:221,185:351,187:350,199:543,200:544,231:wt,234:349,236:216,237:222,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,309:Xt,310:ar,311:217,312:Lt},r(jm,[2,132]),r(_o,[2,425]),r(jm,[2,133]),{13:l,16:h,44:354,55:355,82:I,87:p,172:357,237:356,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,309:Xt,310:ar,311:358,312:Lt,313:545},r(Et,[2,54]),r(Et,[2,48]),r(dn,[2,342]),{13:l,16:h,44:39,55:40,87:p,139:546,307:43,308:g},r(dn,[2,68]),r(ee,[2,350],{31:Mm,112:Mm}),r(Et,[2,53]),{13:l,16:h,55:547,307:43,308:g},r(oe,[2,333]),r(Oe,[2,16]),r(co,[2,152]),r(zn,[2,154]),r(zn,[2,157]),r(Kn,[2,159]),r(Kn,[2,160],{262:389,261:548,39:ll,338:fl}),r(Kn,[2,161],{262:389,261:549,39:ll,338:fl}),r(pt,[2,163]),{13:l,16:h,44:136,45:$,46:550,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(at,[2,178]),r(at,[2,179]),{13:l,16:h,44:136,45:$,46:551,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},{13:l,16:h,44:136,45:$,46:552,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},{13:l,16:h,44:136,45:$,46:553,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},{48:[1,554],272:[1,555]},r(at,[2,184]),r(at,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:l,16:h,55:194,197:$e,223:562,307:43,308:g},r(pl,[2,224]),r(pl,[2,225]),r(pl,[2,226]),{31:[1,563],45:Lm,94:564},r(q,[2,84]),r(lo,[2,368]),r(q,[2,85]),r(fo,[2,370]),r(Ys,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},r(Gi,[2,35],{83:[1,569]}),r(Gi,[2,36],{81:[1,570]}),r(cl,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:l,16:h,45:$,76:Im,78:Nm,87:p,268:ue,269:be,270:B,271:Se,273:we,274:ge,276:Ee,277:ce,279:ye,280:le,283:_e,285:Te,308:g,346:Ce,347:Ae,348:_,349:b,350:w,351:O}),r(Qn,[2,295]),{45:$,77:572},{45:$,77:573},r(Qn,[2,33]),r(Qn,[2,34]),{31:[2,275],50:574,84:575,85:o},{31:[2,277],51:576,84:577,85:o},r(pn,[2,356]),r(qm,[2,357],{152:578,335:[1,579]}),r(Si,[2,74]),{29:k,57:580},{29:k,57:581},{13:l,16:h,44:39,55:40,87:p,139:582,307:43,308:g},r(Vm,[2,365],{162:583,328:[1,584]}),{13:l,16:h,45:$,55:323,67:321,68:322,77:320,79:585,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,307:43,308:g,346:Ce,347:Ae,348:_,349:b,350:w,351:O},{45:[1,586]},r(Si,[2,81]),{29:k,57:587},r(pn,[2,73]),r(ee,[2,362],{29:wi,31:wi,85:wi,112:wi,159:wi,160:wi,161:wi,163:wi,164:wi}),r(vo,[2,112]),r(Jn,[2,401],{206:588}),r(ee,[2,405],{209:589,210:590}),r(ee,[2,403]),r(ee,[2,404]),r(vo,[2,113]),r(vo,[2,400]),{13:l,16:h,44:215,45:go,48:[1,591],55:220,82:I,87:p,89:ke,172:221,185:351,203:536,212:592,231:yo,234:535,236:216,237:222,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,309:Xt,310:ar,311:217,312:Lt},r(_o,[2,426]),r(dl,[2,138]),r(dl,[2,139]),{232:[1,593]},r(gn,[2,292]),{47:[1,595],48:[1,594]},r(Yn,[2,9]),r(mn,[2,392]),r(mn,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:l,16:h,87:p,197:hn,308:g}),r(mn,[2,110],{272:[1,598]}),r(bo,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},r(Bi,[2,58]),r(pt,[2,445]),r(pt,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},r(at,[2,99]),r(ot,[2,382]),r([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),r(at,[2,188]),r(at,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:l,16:h,55:492,82:I,172:493,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,311:494,312:Lt,315:611},r(q,[2,42]),r(Ys,[2,304]),{13:l,16:h,55:414,82:I,95:612,171:613,172:415,173:416,174:po,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:mo},{31:[1,614],45:Lm,94:615},r(ei,[2,129]),r(Fm,[2,421]),{82:[1,616]},{82:[1,617]},r(Qn,[2,296]),r(Qn,[2,31]),r(Qn,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},r(ee,xm,{155:330,153:618,154:619,29:Ei,31:Ei,85:Ei,112:Ei,159:Ei,160:Ei,161:Ei,163:Ei,164:Ei}),r(qm,[2,358]),r(Si,[2,75]),r(Si,[2,76]),{29:k,57:620},{13:l,16:h,44:39,55:40,87:p,139:621,307:43,308:g},r(Vm,[2,366]),r(Si,[2,79]),{13:l,16:h,44:136,45:$,46:622,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(Si,[2,91],{336:[1,623]}),r([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),r(Jn,[2,117]),{13:l,16:h,44:215,45:go,55:220,82:I,87:p,89:ke,172:221,185:351,203:536,211:626,212:627,231:yo,234:535,236:216,237:222,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,309:Xt,310:ar,311:217,312:Lt},r(bi,[2,134]),r(_o,[2,427]),r(bi,[2,135]),r(gn,[2,26]),{44:628,87:p},r(mn,[2,106]),r(mn,[2,394]),r(ee,[2,396]),r(bo,[2,111]),r(bo,[2,398]),{13:l,16:h,44:39,55:40,87:p,139:342,186:629,190:340,195:341,197:hn,307:43,308:g},r(ul,[2,217]),r(ee,oo,{144:248,140:630,143:631,31:[2,343]}),r(at,[2,97]),r(ot,[2,380]),r(at,[2,180]),{13:l,16:h,44:136,45:$,46:632,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},{13:l,16:h,44:136,45:$,46:633,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ie,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:Le,264:130,265:j,266:137,267:139,268:ue,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ce,278:149,279:ye,280:le,283:_e,285:Te,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:De,346:Ce,347:Ae,348:_,349:b,350:w,351:O},r(at,[2,190]),{290:[1,634]},{314:[1,635]},{13:l,16:h,48:[1,636],55:414,82:I,171:637,172:415,173:416,174:po,255:154,257:155,291:150,294:Y,295:J,296:X,297:Q,298:W,299:te,300:Z,301:re,302:ie,303:ne,304:se,305:K,306:ae,307:43,308:g,312:mo},r(Um,[2,305]),r(q,[2,86]),r(Ys,[2,374]),r(Gi,[2,37]),r(Gi,[2,38]),r(pn,[2,72]),r(pn,[2,360]),r(Si,[2,77]),{29:k,57:638},{47:[1,639]},{29:[2,376]},r(Jn,[2,402]),r(Jn,[2,115],{215:10,208:528,214:529,44:530,205:640,13:n,16:n,45:n,197:n,224:n,229:n,308:n,87:p}),r(Jn,[2,118],{272:[1,641]}),r(So,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:ne,304:se,305:K,306:ae},r(Ks,[2,218]),r(Ys,[2,44]),r(Um,[2,306]),r(Si,[2,78]),{44:651,87:p},r(Jn,[2,116]),r(ee,[2,406]),r(So,[2,119]),r(So,[2,408]),r(c,n,{215:10,205:527,208:528,214:529,44:530,202:652,87:p}),r(gn,[2,27]),r(bo,[2,230]),r(Bm,[2,345],{141:653,335:[1,654]}),r(at,[2,181]),r(at,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},r(ee,oo,{144:248,142:657,143:658,31:$m,112:$m}),r(Bm,[2,346]),r(Si,[2,80]),r(So,[2,231]),r(dn,[2,67]),r(dn,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:a(function(E,C){if(C.recoverable)this.trace(E);else{var P=new Error(E);throw P.hash=C,P}},"parseError"),parse:a(function(E){var C=this,P=[0],H=[],pe=[null],d=[],Ut=this.table,m="",ii=0,Zs=0,Ao=0,xo=2,ea=1,Co=d.slice.call(arguments,1),tt=Object.create(this.lexer),ni={yy:{}};for(var ta in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ta)&&(ni.yy[ta]=this.yy[ta]);tt.setInput(E,ni.yy),ni.yy.lexer=tt,ni.yy.parser=this,typeof tt.yylloc>"u"&&(tt.yylloc={});var rs=tt.yylloc;d.push(rs);var Ge=tt.options&&tt.options.ranges;typeof ni.yy.parseError=="function"?this.parseError=ni.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Je(si){P.length=P.length-2*si,pe.length=pe.length-si,d.length=d.length-si}a(Je,"popStack");for(var je=a(function(){var si;return si=tt.lex()||ea,typeof si!="number"&&(si=C.symbols_[si]||si),si},"lex"),Ve,Zt,bn,gr,k8,Cl,is={},Oo,xi,t1,Fo;;){if(bn=P[P.length-1],this.defaultActions[bn]?gr=this.defaultActions[bn]:((Ve===null||typeof Ve>"u")&&(Ve=je()),gr=Ut[bn]&&Ut[bn][Ve]),typeof gr>"u"||!gr.length||!gr[0]){var Ol="";Fo=[];for(Oo in Ut[bn])this.terminals_[Oo]&&Oo>xo&&Fo.push("'"+this.terminals_[Oo]+"'");tt.showPosition?Ol="Parse error on line "+(ii+1)+`:
`+tt.showPosition()+`
Expecting `+Fo.join(", ")+", got '"+(this.terminals_[Ve]||Ve)+"'":Ol="Parse error on line "+(ii+1)+": Unexpected "+(Ve==ea?"end of input":"'"+(this.terminals_[Ve]||Ve)+"'"),this.parseError(Ol,{text:tt.match,token:this.terminals_[Ve]||Ve,line:tt.yylineno,loc:rs,expected:Fo})}if(gr[0]instanceof Array&&gr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+bn+", token: "+Ve);switch(gr[0]){case 1:P.push(Ve),pe.push(tt.yytext),d.push(tt.yylloc),P.push(gr[1]),Ve=null,Zt?(Ve=Zt,Zt=null):(Zs=tt.yyleng,m=tt.yytext,ii=tt.yylineno,rs=tt.yylloc,Ao>0&&Ao--);break;case 2:if(xi=this.productions_[gr[1]][1],is.$=pe[pe.length-xi],is._$={first_line:d[d.length-(xi||1)].first_line,last_line:d[d.length-1].last_line,first_column:d[d.length-(xi||1)].first_column,last_column:d[d.length-1].last_column},Ge&&(is._$.range=[d[d.length-(xi||1)].range[0],d[d.length-1].range[1]]),Cl=this.performAction.apply(is,[m,Zs,ii,ni.yy,gr[1],pe,d].concat(Co)),typeof Cl<"u")return Cl;xi&&(P=P.slice(0,-1*xi*2),pe=pe.slice(0,-1*xi),d=d.slice(0,-1*xi)),P.push(this.productions_[gr[1]][0]),pe.push(is.$),d.push(is._$),t1=Ut[P[P.length-2]][P[P.length-1]],P.push(t1);break;case 3:return!0}}return!0},"parse")},wo=Sd().Wildcard,Eo="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Ev=Eo+"type",Tv=Eo+"first",Av=Eo+"rest",Gm=Eo+"nil",To="http://www.w3.org/2001/XMLSchema#",Wm=To+"integer",Hm=To+"decimal",zm=To+"double",xv=To+"boolean",yn="",Km="",Ym="";function Vt(T){return T.toLowerCase()}a(Vt,"lowercase");function Ti(T,E){return T.push(E),T}a(Ti,"appendTo");function _n(T,E){return T.push.apply(T,E),T}a(_n,"appendAllTo");function nt(T){T||(T={});for(var E=1,C=arguments.length,P;E<C&&(P=arguments[E]||{});E++)for(var H in P)T[H]=P[H];return T}a(nt,"extend");function ti(){for(var T=[],E=0,C=arguments.length;E<C;E++)T=T.concat.apply(T,arguments[E]);return T}a(ti,"unionAll");function Qs(T){if(T[0]==="<"&&(T=T.substring(1,T.length-1)),/^[a-z][a-z0-9.+-]*:/i.test(T))return T;if(!ve.base)throw new Error("Cannot resolve relative IRI "+T+" because no base IRI was set.");switch(yn!==ve.base&&(yn=ve.base,Km=yn.replace(/[^\/:]*$/,""),Ym=yn.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),T[0]){case void 0:return yn;case"#":return yn+T;case"?":return yn.replace(/(?:\?.*)?$/,T);case"/":return Ym+T;default:return Km+T}}a(Qs,"resolveIRI");function gl(T){if(T){var E=T[0];if(E==="?"||E==="$")return ve.factory.variable(T.substr(1))}return T}a(gl,"toVar");function Tt(T,E){return{type:"operation",operator:T,args:E||[]}}a(Tt,"operation");function Xn(T,E){var C={expression:T==="*"?new wo:T};if(E)for(var P in E)C[P]=E[P];return C}a(Xn,"expression");function Zn(T,E){return{type:"path",pathType:T,items:E}}a(Zn,"path");function yl(T,E){for(var C=0,P=E.length,H;C<P&&(H=E[C]);C++)T=Tt(H[0],[T,H[1]]);return T}a(yl,"createOperationTree");function vn(T,E){var C=[],P=[],H=T.length,pe,d={};if(!H)return null;for(var Ut=0;Ut<H&&(pe=T[Ut]);Ut++)(pe.named?P:C).push(pe.iri);return d[E||"from"]={default:C,named:P},d}a(vn,"groupDatasets");function es(T){return parseInt(T,10)}a(es,"toInt");function _l(T){return T.type==="group"&&T.patterns.length===1?T.patterns[0]:T}a(_l,"degroupSingle");function ri(T,E){return E&&E.termType!=="NamedNode"&&(E=ve.factory.namedNode(E)),ve.factory.literal(T,E)}a(ri,"createTypedLiteral");function Cv(T,E){return ve.factory.literal(T,E)}a(Cv,"createLangLiteral");function vl(T,E,C){if(!("termType"in E))throw new Error("Nested triples cannot contain paths");return ve.factory.quad(T,E,C)}a(vl,"nestedTriple");function Ai(T,E,C,P){var H={};return T!=null&&(H.subject=T),E!=null&&(H.predicate=E),C!=null&&(H.object=C),P!=null&&(H.annotations=P),H}a(Ai,"triple");function Js(T){return typeof T=="string"?T.startsWith("e_")?ve.factory.blankNode(T):ve.factory.blankNode("e_"+T):ve.factory.blankNode("g_"+Qm++)}a(Js,"blank");var Qm=0;ve._resetBlanks=function(){Qm=0};var Ov=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,Fv={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},Pv=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,bl=String.fromCharCode;function Jm(T,E){T=T.substring(E,T.length-E);try{T=T.replace(Ov,function(C,P,H,pe){var d;if(P){if(d=parseInt(P,16),isNaN(d))throw new Error;return bl(d)}else if(H){if(d=parseInt(H,16),isNaN(d))throw new Error;return d<65535?bl(d):bl(55296+((d-=65536)>>10),56320+(d&1023))}else{var Ut=Fv[pe];if(!Ut)throw new Error;return Ut}})}catch{return""}if(Pv.exec(T))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+T);return T}a(Jm,"unescapeString");function Dv(T){var E=Js(),C=E,P=[],H,pe=[];T.forEach(function(ii){P.push(ii.entity),_n(pe,ii.triples)});for(var d=0,Ut=0,m=P.length,H=Array(m*2);d<m;)H[Ut++]=Ai(C,ve.factory.namedNode(Tv),P[d]),H[Ut++]=Ai(C,ve.factory.namedNode(Av),C=++d<m?Js():ve.factory.namedNode(Gm));return{entity:E,triples:_n(H,pe)}}a(Dv,"createList");function Rv(T){var E=Js();return{entity:E,triples:T.map(function(C){return nt(Ai(E),C)})}}a(Rv,"createAnonymousObject");function Sl(T,E,C){var P=[],H=[];return E.forEach(function(pe){let d=null;pe.annotation&&(d=pe.annotation,pe=pe.object),P.push(Ai(null,T,pe.entity,d)),_n(H,pe.triples)}),ti(P,C||[],H)}a(Sl,"objectListToTriples");function I8(T){for(var E=[],C,P=0,H;H=T[P];P++)switch(H.type){case"bgp":H.triples.length&&(C?_n(C.triples,H.triples):Ti(E,C=H));break;default:(!H.patterns||H.patterns.length>0)&&(Ti(E,H),C=null)}return E}a(I8,"mergeAdjacentBGPs");function ts(T){return T.variable?T.variable.value:T.value||T.expression.value}a(ts,"getExpressionId");function wl(T){if(!T)return[];if(T.type==="aggregate")return[T];if(T.type==="operation"){let E=[];for(let C of T.args)E.push(...wl(C));return E}return[]}a(wl,"getAggregatesOfExpression");function Iv(T){let E=new Set,C=a(function(P){P&&(P.termType==="Variable"?E.add(P):P.type==="operation"&&P.args.forEach(C))},"visitExpression");return C(T),E}a(Iv,"getVariablesFromExpression");function El(T,E=1,C=[]){for(let P of T)E>0&&P instanceof Array?El(P,E-1,C):C.push(P);return C}a(El,"flatten");function Tl(T){return T.termType==="Variable"}a(Tl,"isVariable");function Xm(T){if(T.triples){let E=[];for(let C of T.triples)Tl(C.subject)&&E.push(C.subject.value),Tl(C.predicate)&&E.push(C.predicate.value),Tl(C.object)&&E.push(C.object.value);return E}else if(T.patterns){let E=[];for(let C of T.patterns)E.push(...Xm(C));return E}return[]}a(Xm,"getBoundVarsFromGroupGraphPattern");function Nv(T){let E=T.slice().sort(),C=[];for(let P=0;P<E.length-1;P++)E[P+1]==E[P]&&C.push(E[P]);return C}a(Nv,"getDuplicatesInArray");function Xs(T){if(!ve.sparqlStar)throw new Error("SPARQL-star support is not enabled");return T}a(Xs,"ensureSparqlStar");function Zm(T,E,C){for(let P of E){let H=Ai("subject"in P?P.subject:T,P.predicate,P.object);C.push(H),P.annotations&&Zm(vl(T,P.predicate,P.object),P.annotations,C)}}a(Zm,"_applyAnnotations");function Al(T){if(ve.sparqlStar){let E=[];return T.forEach(C=>{let P=Ai(C.subject,C.predicate,C.object);E.push(P),C.annotations&&Zm(vl(C.subject,C.predicate,C.object),C.annotations,E)}),E}return T}a(Al,"applyAnnotations");function N8(T){if(!ve.sparqlStarNestedQuads)throw new Error("Lenient SPARQL-star support with nested quads is not enabled");return T}a(N8,"ensureSparqlStarNestedQuads");function e1(T){for(let E of T){if(E.type==="graph"&&E.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(E.type==="bgp"||E.type==="graph"){for(let C of E.triples)if(C.subject.termType==="Variable"||C.predicate.termType==="Variable"||C.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return T}a(e1,"ensureNoVariables");function xl(T){for(let E of T)if(E.type==="bgp"){for(let C of E.triples)if(C.subject.termType==="BlankNode"||C.predicate.termType==="BlankNode"||C.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return T}a(xl,"ensureNoBnodes");var kv=(function(){var T={EOF:1,parseError:a(function(C,P){if(this.yy.parser)this.yy.parser.parseError(C,P);else throw new Error(C)},"parseError"),setInput:a(function(E,C){return this.yy=C||this.yy||{},this._input=E,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:a(function(){var E=this._input[0];this.yytext+=E,this.yyleng++,this.offset++,this.match+=E,this.matched+=E;var C=E.match(/(?:\r\n?|\n).*/g);return C?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),E},"input"),unput:a(function(E){var C=E.length,P=E.split(/(?:\r\n?|\n)/g);this._input=E+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-C),this.offset-=C;var H=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),P.length-1&&(this.yylineno-=P.length-1);var pe=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:P?(P.length===H.length?this.yylloc.first_column:0)+H[H.length-P.length].length-P[0].length:this.yylloc.first_column-C},this.options.ranges&&(this.yylloc.range=[pe[0],pe[0]+this.yyleng-C]),this.yyleng=this.yytext.length,this},"unput"),more:a(function(){return this._more=!0,this},"more"),reject:a(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:a(function(E){this.unput(this.match.slice(E))},"less"),pastInput:a(function(){var E=this.matched.substr(0,this.matched.length-this.match.length);return(E.length>20?"...":"")+E.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:a(function(){var E=this.match;return E.length<20&&(E+=this._input.substr(0,20-E.length)),(E.substr(0,20)+(E.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:a(function(){var E=this.pastInput(),C=new Array(E.length+1).join("-");return E+this.upcomingInput()+`
`+C+"^"},"showPosition"),test_match:a(function(E,C){var P,H,pe;if(this.options.backtrack_lexer&&(pe={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(pe.yylloc.range=this.yylloc.range.slice(0))),H=E[0].match(/(?:\r\n?|\n).*/g),H&&(this.yylineno+=H.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:H?H[H.length-1].length-H[H.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+E[0].length},this.yytext+=E[0],this.match+=E[0],this.matches=E,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(E[0].length),this.matched+=E[0],P=this.performAction.call(this,this.yy,this,C,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),P)return P;if(this._backtrack){for(var d in pe)this[d]=pe[d];return!1}return!1},"test_match"),next:a(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var E,C,P,H;this._more||(this.yytext="",this.match="");for(var pe=this._currentRules(),d=0;d<pe.length;d++)if(P=this._input.match(this.rules[pe[d]]),P&&(!C||P[0].length>C[0].length)){if(C=P,H=d,this.options.backtrack_lexer){if(E=this.test_match(P,pe[d]),E!==!1)return E;if(this._backtrack){C=!1;continue}else return!1}else if(!this.options.flex)break}return C?(E=this.test_match(C,pe[H]),E!==!1?E:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:a(function(){var C=this.next();return C||this.lex()},"lex"),begin:a(function(C){this.conditionStack.push(C)},"begin"),popState:a(function(){var C=this.conditionStack.length-1;return C>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:a(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:a(function(C){return C=this.conditionStack.length-1-Math.abs(C||0),C>=0?this.conditionStack[C]:"INITIAL"},"topState"),pushState:a(function(C){this.begin(C)},"pushState"),stateStackSize:a(function(){return this.conditionStack.length},"stateStackSize"),options:{flex:!0,"case-insensitive":!0},performAction:a(function(C,P,H,pe){var d=pe;switch(H){case 0:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID";case 125:console.log(P.yytext);break}},"anonymous"),rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return T})();ml.lexer=kv;function ve(){this.yy={}}return a(ve,"Parser"),ve.prototype=ml,ml.Parser=ve,new ve})();P0.exports=TT});var k0=y((WI,N0)=>{var AT="http://www.w3.org/2001/XMLSchema#integer",xT="http://www.w3.org/2001/XMLSchema#string";function Ye(r){this._options=r=r||{};var e=r.prefixes||{};this._prefixByIri={};var t=[];for(var i in e){var n=e[i];_a(n)&&(this._prefixByIri[n]=i,t.push(n))}var s=t.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+s+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=r.sparqlStar,this._indent=_a(r.indent)?r.indent:"  ",this._newline=_a(r.newline)?r.newline:`
`,this._explicitDatatype=!!r.explicitDatatype}a(Ye,"Generator");Ye.prototype.toQuery=function(r){var e="";return r.queryType&&(e+=r.queryType.toUpperCase()+" "),r.reduced&&(e+="REDUCED "),r.distinct&&(e+="DISTINCT "),r.variables?e+=hr(r.variables,void 0,function(t){return/^[?$]/.test(t)?t:Ji(t)?this.toEntity(t):"("+this.toExpression(t.expression)+" AS "+Mc(t.variable)+")"},this)+" ":r.template&&(e+=this.group(r.template,!0)+this._newline),r.from&&(e+=this.graphs("FROM ",r.from.default)+this.graphs("FROM NAMED ",r.from.named)),r.where&&(e+="WHERE "+this.group(r.where,!0)+this._newline),r.updates&&(e+=hr(r.updates,";"+this._newline,this.toUpdate,this)),r.group&&(e+="GROUP BY "+hr(r.group,void 0,function(t){var i=Ji(t.expression)?this.toEntity(t.expression):"("+this.toExpression(t.expression)+")";return t.variable?"("+i+" AS "+Mc(t.variable)+")":i},this)+this._newline),r.having&&(e+="HAVING ("+hr(r.having,void 0,this.toExpression,this)+")"+this._newline),r.order&&(e+="ORDER BY "+hr(r.order,void 0,function(t){var i="("+this.toExpression(t.expression)+")";return t.descending?"DESC "+i:i},this)+this._newline),r.offset&&(e+="OFFSET "+r.offset+this._newline),r.limit&&(e+="LIMIT "+r.limit+this._newline),r.values&&(e+=this.values(r)),e=this.baseAndPrefixes(r)+e,e.trim()};Ye.prototype.baseAndPrefixes=function(r){var e=r.base?"BASE <"+r.base+">"+this._newline:"",t="";for(var i in r.prefixes)(this._options.allPrefixes||this._usedPrefixes[i])&&(t+="PREFIX "+i+": <"+r.prefixes[i]+">"+this._newline);return e+t};Ye.prototype.toPattern=function(r){var e=r.type||r instanceof Array&&"array"||(r.subject&&r.predicate&&r.object?"triple":"");if(!(e in this))throw new Error("Unknown entry type: "+e);return this[e](r)};Ye.prototype.triple=function(r){return this.toEntity(r.subject)+" "+this.toEntity(r.predicate)+" "+this.toEntity(r.object)+"."};Ye.prototype.array=function(r){return hr(r,this._newline,this.toPattern,this)};Ye.prototype.bgp=function(r){return this.encodeTriples(r.triples)};Ye.prototype.encodeTriples=function(r){if(!r.length)return"";for(var e=[],t=void 0,i=void 0,n=0;n<r.length;n++){var s=r[n];kn(s.subject,t)?kn(s.predicate,i)?e.push(","):(i=s.predicate,e.push(";"+this._newline,this._indent,this.toEntity(i))):(t&&e.push("."+this._newline),t=s.subject,i=s.predicate,e.push(this.toEntity(t)," ",this.toEntity(i))),e.push(" ",this.toEntity(s.object))}return e.push("."),e.join("")};Ye.prototype.graph=function(r){return"GRAPH "+this.toEntity(r.name)+" "+this.group(r)};Ye.prototype.graphs=function(r,e){return!e||e.length===0?"":hr(e,"",function(t){return r+this.toEntity(t)+this._newline},this)};Ye.prototype.group=function(r,e){return r=e!==!0?this.array(r.patterns||r.triples):this.toPattern(r.type!=="group"?r:r.patterns),r.indexOf(this._newline)===-1?"{ "+r+" }":"{"+this._newline+this.indent(r)+this._newline+"}"};Ye.prototype.query=function(r){return this.toQuery(r)};Ye.prototype.filter=function(r){return"FILTER("+this.toExpression(r.expression)+")"};Ye.prototype.bind=function(r){return"BIND("+this.toExpression(r.expression)+" AS "+Mc(r.variable)+")"};Ye.prototype.optional=function(r){return"OPTIONAL "+this.group(r)};Ye.prototype.union=function(r){return hr(r.patterns,this._newline+"UNION"+this._newline,function(e){return this.group(e,!0)},this)};Ye.prototype.minus=function(r){return"MINUS "+this.group(r)};Ye.prototype.values=function(r){var e=Object.keys(r.values.reduce(function(n,s){for(var o in s)n[o]=!0;return n},{})),t,i;return e.length===1?t=i="":(t="(",i=")"),"VALUES "+t+e.join(" ")+i+" {"+this._newline+hr(r.values,this._newline,function(n){return"  "+t+hr(e,void 0,function(s){return n[s]?this.toEntity(n[s]):"UNDEF"},this)+i},this)+this._newline+"}"};Ye.prototype.service=function(r){return"SERVICE "+(r.silent?"SILENT ":"")+this.toEntity(r.name)+" "+this.group(r)};Ye.prototype.toExpression=function(r){if(Ji(r))return this.toEntity(r);switch(r.type.toLowerCase()){case"aggregate":return r.aggregation.toUpperCase()+"("+(r.distinct?"DISTINCT ":"")+this.toExpression(r.expression)+(typeof r.separator=="string"?'; SEPARATOR = "'+r.separator.replace(R0,I0)+'"':"")+")";case"functioncall":return this.toEntity(r.function)+"("+hr(r.args,", ",this.toExpression,this)+")";case"operation":var e=r.operator.toUpperCase(),t=r.args||[];switch(r.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(Ji(t[0])?this.toEntity(t[0]):"("+this.toExpression(t[0])+")")+" "+e+" "+(Ji(t[1])?this.toEntity(t[1]):"("+this.toExpression(t[1])+")");case"!":return"!("+this.toExpression(t[0])+")";case"uplus":return"+("+this.toExpression(t[0])+")";case"uminus":return"-("+this.toExpression(t[0])+")";case"notin":e="NOT IN";case"in":return this.toExpression(t[0])+" "+e+"("+(_a(t[1])?t[1]:hr(t[1],", ",this.toExpression,this))+")";case"notexists":e="NOT EXISTS";case"exists":return e+" "+this.group(t[0],!0);default:return e+"("+hr(t,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+r.type)}};Ye.prototype.toEntity=function(r){if(Ji(r))switch(r.termType){case"Wildcard":return"*";case"Variable":return Mc(r);case"BlankNode":return"_:"+r.value;case"Literal":var e=r.value||"",t=r.language||"",i=r.datatype;if(r='"'+e.replace(R0,I0)+'"',t)r+="@"+t;else if(i){if(!this._explicitDatatype)switch(i.value){case xT:return r;case AT:if(/^\d+$/.test(e))return e+" "}r+="^^"+this.encodeIRI(i.value)}return r;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return r.graph&&r.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(r.graph)+" { "+this.toEntity(r.subject)+" "+this.toEntity(r.predicate)+" "+this.toEntity(r.object)+" }  >>":"<< "+this.toEntity(r.subject)+" "+this.toEntity(r.predicate)+" "+this.toEntity(r.object)+" >>";default:return this.encodeIRI(r.value)}else{var n=r.items.map(this.toEntity,this),s=r.pathType;switch(s){case"^":case"!":return s+n[0];case"*":case"+":case"?":return"("+n[0]+s+")";default:return"("+n.join(s)+")"}}};var R0=/["\\\t\n\r\b\f]/g,I0=a(function(r){return CT[r]},"escapeReplacer"),CT={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};Ye.prototype.encodeIRI=function(r){var e=this._prefixRegex.exec(r);if(e){var t=this._prefixByIri[e[1]];return this._usedPrefixes[t]=!0,t+":"+e[2]}return"<"+r+">"};Ye.prototype.toUpdate=function(r){switch(r.type||r.updateType){case"load":return"LOAD"+(r.source?" "+this.toEntity(r.source):"")+(r.destination?" INTO GRAPH "+this.toEntity(r.destination):"");case"insert":return"INSERT DATA "+this.group(r.insert,!0);case"delete":return"DELETE DATA "+this.group(r.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(r.delete,!0);case"insertdelete":return(r.graph?"WITH "+this.toEntity(r.graph)+this._newline:"")+(r.delete.length?"DELETE "+this.group(r.delete,!0)+this._newline:"")+(r.insert.length?"INSERT "+this.group(r.insert,!0)+this._newline:"")+(r.using?this.graphs("USING ",r.using.default):"")+(r.using?this.graphs("USING NAMED ",r.using.named):"")+"WHERE "+this.group(r.where,!0);case"add":case"copy":case"move":return r.type.toUpperCase()+" "+(r.silent?"SILENT ":"")+(r.source.default?"DEFAULT":this.toEntity(r.source.name))+" TO "+this.toEntity(r.destination.name);case"create":case"clear":case"drop":return r.type.toUpperCase()+(r.silent?" SILENT ":" ")+(r.graph.default?"DEFAULT":r.graph.named?"NAMED":r.graph.all?"ALL":"GRAPH "+this.toEntity(r.graph.name));default:throw new Error("Unknown update query type: "+r.type)}};Ye.prototype.indent=function(r){return r.replace(/^/gm,this._indent)};function Mc(r){return"?"+r.value}a(Mc,"variableToString");function _a(r){return typeof r=="string"}a(_a,"isString");function Ji(r){return typeof r.termType=="string"}a(Ji,"isTerm");function kn(r,e){if(!r||!Ji(r)||!e||!Ji(e)||r.termType!==e.termType)return!1;switch(r.termType){case"Literal":return r.value===e.value&&r.language===e.language&&kn(r.datatype,e.datatype);case"Quad":return kn(r.subject,e.subject)&&kn(r.predicate,e.predicate)&&kn(r.object,e.object)&&kn(r.graph,e.graph);default:return r.value===e.value}}a(kn,"equalTerms");function hr(r,e,t,i){return r.map(t,i).join(_a(e)?e:" ")}a(hr,"mapJoin");function OT(r={}){return{stringify:a(function(e){var t=Object.create(r);return t.prefixes=e.prefixes,new Ye(t).toQuery(e)},"stringify"),createGenerator:a(function(){return new Ye(r)},"createGenerator")}}a(OT,"_Generator");N0.exports={Generator:OT}});var Ed=y(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.BlankNode=void 0;var wd=class{static{a(this,"BlankNode")}constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&e.termType==="BlankNode"&&e.value===this.value}};Lc.BlankNode=wd});var Td=y(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.DefaultGraph=void 0;var va=class{static{a(this,"DefaultGraph")}constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&e.termType==="DefaultGraph"}};qc.DefaultGraph=va;va.INSTANCE=new va});var Uc=y(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});Vc.NamedNode=void 0;var Ad=class{static{a(this,"NamedNode")}constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&e.termType==="NamedNode"&&e.value===this.value}};Vc.NamedNode=Ad});var xd=y(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.Literal=void 0;var j0=Uc(),ba=class r{static{a(this,"Literal")}constructor(e,t){this.termType="Literal",this.value=e,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(e){return!!e&&e.termType==="Literal"&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}};Bc.Literal=ba;ba.RDF_LANGUAGE_STRING=new j0.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString");ba.XSD_STRING=new j0.NamedNode("http://www.w3.org/2001/XMLSchema#string")});var Od=y($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.Quad=void 0;var Cd=class{static{a(this,"Quad")}constructor(e,t,i,n){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=i,this.graph=n}equals(e){return!!e&&(e.termType==="Quad"||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}};$c.Quad=Cd});var Pd=y(Gc=>{"use strict";Object.defineProperty(Gc,"__esModule",{value:!0});Gc.Variable=void 0;var Fd=class{static{a(this,"Variable")}constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&e.termType==="Variable"&&e.value===this.value}};Gc.Variable=Fd});var L0=y(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.DataFactory=void 0;var FT=Ed(),PT=Td(),M0=xd(),DT=Uc(),RT=Od(),IT=Pd(),NT=0,Dd=class{static{a(this,"DataFactory")}constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${NT++}_`}namedNode(e){return new DT.NamedNode(e)}blankNode(e){return new FT.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new M0.Literal(e,t)}variable(e){return new IT.Variable(e)}defaultGraph(){return PT.DefaultGraph.INSTANCE}quad(e,t,i,n){return new RT.Quad(e,t,i,n||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(M0.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}};Wc.DataFactory=Dd});var q0=y(dr=>{"use strict";var kT=dr&&dr.__createBinding||(Object.create?(function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:a(function(){return e[t]},"get")}),Object.defineProperty(r,i,n)}):(function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]})),jn=dr&&dr.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&kT(e,r,t)};Object.defineProperty(dr,"__esModule",{value:!0});jn(Ed(),dr);jn(L0(),dr);jn(Td(),dr);jn(xd(),dr);jn(Uc(),dr);jn(Od(),dr);jn(Pd(),dr)});var U0=y((uN,V0)=>{var{Parser:Ni}=D0(),{Generator:jT}=k0(),{Wildcard:MT}=Sd(),{DataFactory:LT}=q0();function qT({prefixes:r,baseIRI:e,factory:t,pathOnly:i,sparqlStar:n,skipValidation:s,skipUngroupedVariableCheck:o}={}){let c={};for(let f in r??{})c[f]=r[f];let u=new Ni;return u.parse=function(){return Ni.base=e||"",Ni.prefixes=Object.create(c),Ni.factory=t||new LT,Ni.sparqlStar=!!n,Ni.pathOnly=!!i,Ni.skipValidation=!!s||!!o,Ni.prototype.parse.apply(u,arguments)},u._resetBlanks=Ni._resetBlanks,u}a(qT,"_Parser");V0.exports={Parser:qT,Generator:jT,Wildcard:MT}});var $0=y(wr=>{"use strict";var VT=wr&&wr.__createBinding||(Object.create?(function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:a(function(){return e[t]},"get")}),Object.defineProperty(r,i,n)}):(function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]})),UT=wr&&wr.__setModuleDefault||(Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e}),BT=wr&&wr.__importStar||(function(){var r=a(function(e){return r=Object.getOwnPropertyNames||function(t){var i=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[i.length]=n);return i},r(e)},"ownKeys");return function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i=r(e),n=0;n<i.length;n++)i[n]!=="default"&&VT(t,e,i[n]);return UT(t,e),t}})();Object.defineProperty(wr,"__esModule",{value:!0});wr.SPARQLParser=wr.SPARQLParseError=void 0;var B0=BT(U0()),ki=class extends Error{static{a(this,"SPARQLParseError")}constructor(e,t,i,n){super(e,n?{cause:n}:void 0),this.name="SPARQLParseError",this.line=t,this.column=i}};wr.SPARQLParseError=ki;var Rd=class{static{a(this,"SPARQLParser")}constructor(){this.parser=new B0.Parser,this.generator=new B0.Generator}parse(e){try{let t=this.parser.parse(e);return this.validateQuery(t),t}catch(t){if(t instanceof Error){let i=t.message.match(/line (\d+), column (\d+)/),n=i?parseInt(i[1],10):void 0,s=i?parseInt(i[2],10):void 0;throw new ki(`SPARQL syntax error: ${t.message}`,n,s,t)}throw t}}toString(e){try{return this.generator.stringify(e)}catch(t){throw t instanceof Error?new ki(`Failed to serialize SPARQL query: ${t.message}`,void 0,void 0,t):t}}getQueryType(e){if("queryType"in e&&e.type==="query")return e.queryType;throw new ki("Query does not have a valid queryType property")}isSelectQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="SELECT"}isConstructQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="CONSTRUCT"}isAskQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="ASK"}isDescribeQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="DESCRIBE"}validateQuery(e){if(!e||typeof e!="object")throw new ki("Invalid query: not an object");if(e.type!=="query"&&e.type!=="update")throw new ki(`Invalid type: expected "query" or "update", got "${e.type}"`);if(e.type==="query"){let t=["SELECT","CONSTRUCT","ASK","DESCRIBE"];if(!t.includes(e.queryType))throw new ki(`Invalid query type: expected one of ${t.join(", ")}, got "${e.queryType}"`)}}};wr.SPARQLParser=Rd});var G0=y(vs=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});vs.AlgebraTranslator=vs.AlgebraTranslatorError=void 0;var Ue=class extends Error{static{a(this,"AlgebraTranslatorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="AlgebraTranslatorError"}};vs.AlgebraTranslatorError=Ue;var Id=class{static{a(this,"AlgebraTranslator")}translate(e){if(e.type!=="query")throw new Ue("Only SELECT queries are currently supported");if(e.queryType!=="SELECT")throw new Ue(`Query type ${e.queryType} not yet supported`);return this.translateSelect(e)}translateSelect(e){let t;if(!e.where||e.where.length===0)throw new Ue("SELECT query must have WHERE clause");t=this.translateWhere(e.where);let i=this.extractAggregates(e.variables),n=this.extractGroupVariables(e.group);if((i.length>0||n.length>0)&&(t={type:"group",variables:n,aggregates:i,input:t}),e.variables&&e.variables.length>0){for(let o of e.variables){let c=o;c.expression&&c.variable&&(t={type:"extend",variable:c.variable.value,expression:c.expression,input:t})}let s=e.variables.filter(o=>o.termType==="Variable"||o.variable).map(o=>o.termType==="Variable"?o.value:o.variable.value);s.length>0&&(t={type:"project",variables:s,input:t})}return e.distinct&&(t={type:"distinct",input:t}),e.order&&e.order.length>0&&(t={type:"orderby",comparators:e.order.map(s=>this.translateOrderComparator(s)),input:t}),(e.limit!==void 0||e.offset!==void 0)&&(t={type:"slice",limit:e.limit,offset:e.offset,input:t}),t}extractAggregates(e){return e?e.filter(t=>t.expression&&t.expression.type==="aggregate").map(t=>({variable:t.variable.value,expression:this.translateAggregateExpression(t.expression)})):[]}extractGroupVariables(e){return e?e.filter(t=>t.expression&&t.expression.termType==="Variable").map(t=>t.expression.value):[]}translateAggregateExpression(e){return{type:"aggregate",aggregation:e.aggregation.toLowerCase(),expression:e.expression?this.translateExpression(e.expression):void 0,distinct:e.distinct||!1,separator:e.separator}}translateWhere(e){if(e.length===0)throw new Ue("Empty WHERE clause");let t=e.filter(o=>o.type==="filter"),i=e.filter(o=>o.type==="bind"),n=e.filter(o=>o.type!=="filter"&&o.type!=="bind"),s;n.length===0?s={type:"bgp",triples:[]}:n.length===1?s=this.translatePattern(n[0]):s=n.map(c=>this.translatePattern(c)).reduce((c,u)=>({type:"join",left:c,right:u}));for(let o of i)s=this.translateBind(o,s);for(let o of t)s={type:"filter",expression:this.translateExpression(o.expression),input:s};return s}translatePattern(e){if(!e||!e.type)throw new Ue("Invalid pattern: missing type");switch(e.type){case"bgp":return this.translateBGP(e);case"filter":return this.translateFilter(e);case"optional":return this.translateOptional(e);case"union":return this.translateUnion(e);case"group":return this.translateWhere(e.patterns);case"query":return this.translateSubquery(e);default:throw new Ue(`Unsupported pattern type: ${e.type}`)}}translateBGP(e){if(!e.triples||!Array.isArray(e.triples))throw new Ue("BGP pattern must have triples array");return{type:"bgp",triples:e.triples.map(t=>this.translateTriple(t))}}translateTriple(e){if(!e.subject||!e.predicate||!e.object)throw new Ue("Triple must have subject, predicate, and object");return{subject:this.translateTripleElement(e.subject),predicate:this.translatePredicate(e.predicate),object:this.translateTripleElement(e.object)}}translatePredicate(e){return e.type==="path"?this.translatePropertyPath(e):this.translateTripleElement(e)}translatePropertyPath(e){if(!e.pathType)throw new Ue("Property path must have pathType");if(!e.items||!Array.isArray(e.items))throw new Ue("Property path must have items array");let t=e.items.map(i=>this.translatePathItem(i));switch(e.pathType){case"/":return{type:"path",pathType:"/",items:t};case"|":return{type:"path",pathType:"|",items:t};case"^":if(t.length!==1)throw new Ue("Inverse path must have exactly one item");return{type:"path",pathType:"^",items:[t[0]]};case"+":if(t.length!==1)throw new Ue("OneOrMore path must have exactly one item");return{type:"path",pathType:"+",items:[t[0]]};case"*":if(t.length!==1)throw new Ue("ZeroOrMore path must have exactly one item");return{type:"path",pathType:"*",items:[t[0]]};case"?":if(t.length!==1)throw new Ue("ZeroOrOne path must have exactly one item");return{type:"path",pathType:"?",items:[t[0]]};default:throw new Ue(`Unsupported property path type: ${e.pathType}`)}}translatePathItem(e){if(e.type==="path")return this.translatePropertyPath(e);if(e.termType==="NamedNode")return{type:"iri",value:e.value};throw new Ue(`Unsupported path item type: ${e.type||e.termType}`)}translateTripleElement(e){if(!e||!e.termType)throw new Ue("Triple element must have termType");switch(e.termType){case"Variable":return{type:"variable",value:e.value};case"NamedNode":return{type:"iri",value:e.value};case"Literal":return{type:"literal",value:e.value,datatype:e.datatype?.value,language:e.language};case"BlankNode":return{type:"blank",value:e.value};default:throw new Ue(`Unsupported term type: ${e.termType}`)}}translateFilter(e){if(!e.expression)throw new Ue("Filter pattern must have expression");let t=e.patterns?this.translateWhere(e.patterns):{type:"bgp",triples:[]};return{type:"filter",expression:this.translateExpression(e.expression),input:t}}translateExpression(e){if(!e)throw new Ue("Expression cannot be null or undefined");if(e.type==="operation")return this.translateOperationExpression(e);if(e.type==="functioncall"||e.type==="functionCall")return{type:"functionCall",function:e.function,args:e.args.map(t=>this.translateExpression(t))};if(e.termType)return this.translateTermExpression(e);throw new Ue(`Unsupported expression structure: ${JSON.stringify(e)}`)}translateOperationExpression(e){let t=["=","!=","<",">","<=",">="],i=["&&","||","!"],n=["+","-","*","/"];return t.includes(e.operator)?{type:"comparison",operator:e.operator,left:this.translateExpression(e.args[0]),right:this.translateExpression(e.args[1])}:i.includes(e.operator)?{type:"logical",operator:e.operator,operands:e.args.map(s=>this.translateExpression(s))}:n.includes(e.operator)?{type:"arithmetic",operator:e.operator,left:this.translateExpression(e.args[0]),right:this.translateExpression(e.args[1])}:e.operator==="exists"||e.operator==="notexists"?this.translateExistsExpression(e):{type:"function",function:e.operator,args:e.args.map(s=>this.translateExpression(s))}}translateExistsExpression(e){if(!e.args||e.args.length!==1)throw new Ue("EXISTS/NOT EXISTS must have exactly one pattern argument");let t=e.args[0],i;return t.type==="group"&&t.patterns?i=this.translateWhere(t.patterns):t.type==="bgp"?i=this.translateBGP(t):i=this.translatePattern(t),{type:"exists",negated:e.operator==="notexists",pattern:i}}translateTermExpression(e){if(e.termType==="Variable")return{type:"variable",name:e.value};if(e.termType==="Literal"){let t=e.value;return e.datatype&&(e.datatype.value.includes("#integer")||e.datatype.value.includes("#decimal")?t=parseFloat(e.value):e.datatype.value.includes("#boolean")&&(t=e.value==="true")),{type:"literal",value:t,datatype:e.datatype?.value}}return{type:"literal",value:String(e.value||e)}}translateOptional(e){if(!e.patterns||e.patterns.length===0)throw new Ue("OPTIONAL pattern must have patterns");return{type:"leftjoin",left:{type:"bgp",triples:[]},right:this.translateWhere(e.patterns),expression:e.expression?this.translateExpression(e.expression):void 0}}translateUnion(e){if(!e.patterns||e.patterns.length!==2)throw new Ue("UNION pattern must have exactly 2 patterns");return{type:"union",left:this.translateWhere(e.patterns[0].patterns||[e.patterns[0]]),right:this.translateWhere(e.patterns[1].patterns||[e.patterns[1]])}}translateBind(e,t){if(!e.variable||!e.expression)throw new Ue("BIND pattern must have variable and expression");return{type:"extend",variable:e.variable.value,expression:this.translateExpression(e.expression),input:t}}translateOrderComparator(e){return{expression:this.translateExpression(e.expression),descending:e.descending||!1}}translateSubquery(e){if(e.queryType!=="SELECT")throw new Ue(`Only SELECT subqueries are supported, got: ${e.queryType}`);return{type:"subquery",query:this.translateSelect(e)}}};vs.AlgebraTranslator=Id});var W0=y(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.AlgebraOptimizer=void 0;var Nd=class{static{a(this,"AlgebraOptimizer")}constructor(){this.stats=new Map}optimize(e){let t=e;return t=this.eliminateEmptyBGPInFilterJoin(t),t=this.filterPushDown(t),t=this.joinReordering(t),t}eliminateEmptyBGPInFilterJoin(e){if(e.type==="join"){if(e.left.type==="filter"){let t=e.left;if(t.input.type==="bgp"&&t.input.triples.length===0)return{type:"filter",expression:t.expression,input:this.eliminateEmptyBGPInFilterJoin(e.right)}}if(e.right.type==="filter"){let t=e.right;if(t.input.type==="bgp"&&t.input.triples.length===0)return{type:"filter",expression:t.expression,input:this.eliminateEmptyBGPInFilterJoin(e.left)}}return{type:"join",left:this.eliminateEmptyBGPInFilterJoin(e.left),right:this.eliminateEmptyBGPInFilterJoin(e.right)}}return e.type==="filter"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="leftjoin"?{...e,left:this.eliminateEmptyBGPInFilterJoin(e.left),right:this.eliminateEmptyBGPInFilterJoin(e.right)}:e.type==="union"?{...e,left:this.eliminateEmptyBGPInFilterJoin(e.left),right:this.eliminateEmptyBGPInFilterJoin(e.right)}:e.type==="project"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="orderby"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="slice"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="distinct"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e}filterPushDown(e){return e.type==="filter"?this.pushDownFilter(e):e.type==="join"?{type:"join",left:this.filterPushDown(e.left),right:this.filterPushDown(e.right)}:e.type==="leftjoin"?{...e,left:this.filterPushDown(e.left),right:this.filterPushDown(e.right)}:e.type==="union"?{type:"union",left:this.filterPushDown(e.left),right:this.filterPushDown(e.right)}:e.type==="project"?{...e,input:this.filterPushDown(e.input)}:e.type==="orderby"?{...e,input:this.filterPushDown(e.input)}:e.type==="slice"?{...e,input:this.filterPushDown(e.input)}:e.type==="distinct"?{...e,input:this.filterPushDown(e.input)}:e}pushDownFilter(e){let t=e.input;if(t.type==="join"){let i=this.getFilterVariables(e.expression),n=this.getOperationVariables(t.left),s=this.getOperationVariables(t.right),o=i.every(u=>n.has(u)),c=i.every(u=>s.has(u));return o&&!c?{type:"join",left:{type:"filter",expression:e.expression,input:this.filterPushDown(t.left)},right:this.filterPushDown(t.right)}:c&&!o?{type:"join",left:this.filterPushDown(t.left),right:{type:"filter",expression:e.expression,input:this.filterPushDown(t.right)}}:{type:"filter",expression:e.expression,input:{type:"join",left:this.filterPushDown(t.left),right:this.filterPushDown(t.right)}}}return t.type==="union"?{type:"union",left:{type:"filter",expression:e.expression,input:this.filterPushDown(t.left)},right:{type:"filter",expression:e.expression,input:this.filterPushDown(t.right)}}:{type:"filter",expression:e.expression,input:this.filterPushDown(t)}}getFilterVariables(e){let t=[];if(e.type==="variable")t.push(e.name);else if(e.type==="comparison")t.push(...this.getFilterVariables(e.left)),t.push(...this.getFilterVariables(e.right));else if(e.type==="logical")for(let i of e.operands)t.push(...this.getFilterVariables(i));else if(e.type==="function")for(let i of e.args)t.push(...this.getFilterVariables(i));return Array.from(new Set(t))}getOperationVariables(e){let t=new Set;if(e.type==="bgp")for(let i of e.triples)i.subject.type==="variable"&&t.add(i.subject.value),i.predicate.type==="variable"&&t.add(i.predicate.value),i.object.type==="variable"&&t.add(i.object.value);else if(e.type==="join"){let i=this.getOperationVariables(e.left),n=this.getOperationVariables(e.right);return new Set([...i,...n])}else{if(e.type==="filter")return this.getOperationVariables(e.input);if(e.type==="leftjoin"){let i=this.getOperationVariables(e.left),n=this.getOperationVariables(e.right);return new Set([...i,...n])}else if(e.type==="union"){let i=this.getOperationVariables(e.left),n=this.getOperationVariables(e.right);return new Set([...i,...n])}else if(e.type==="project")return new Set(e.variables)}return t}joinReordering(e){return e.type==="join"?this.reorderJoin(e):e.type==="filter"?{...e,input:this.joinReordering(e.input)}:e.type==="leftjoin"?{...e,left:this.joinReordering(e.left),right:this.joinReordering(e.right)}:e.type==="union"?{...e,left:this.joinReordering(e.left),right:this.joinReordering(e.right)}:e.type==="project"?{...e,input:this.joinReordering(e.input)}:e.type==="orderby"?{...e,input:this.joinReordering(e.input)}:e.type==="slice"?{...e,input:this.joinReordering(e.input)}:e.type==="distinct"?{...e,input:this.joinReordering(e.input)}:e}reorderJoin(e){let t=this.estimateCost(e.left);return this.estimateCost(e.right)<t?{type:"join",left:this.joinReordering(e.right),right:this.joinReordering(e.left)}:{type:"join",left:this.joinReordering(e.left),right:this.joinReordering(e.right)}}estimateCost(e){if(e.type==="bgp"){let t=e.triples.length*100;for(let i of e.triples)i.subject.type==="variable"&&(t+=10),i.predicate.type==="variable"&&(t+=20),i.object.type==="variable"&&(t+=10);return t}return e.type==="filter"?this.estimateCost(e.input)*.3:e.type==="join"?this.estimateCost(e.left)*this.estimateCost(e.right):e.type==="leftjoin"?this.estimateCost(e.left)+this.estimateCost(e.right)*.5:e.type==="union"?this.estimateCost(e.left)+this.estimateCost(e.right):100}setStatistics(e,t){this.stats.set(e,t)}getStatistics(e){return this.stats.get(e)}};Hc.AlgebraOptimizer=Nd});var H0=y(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.AlgebraSerializer=void 0;var kd=class{static{a(this,"AlgebraSerializer")}toString(e,t=0){let i="  ".repeat(t);switch(e.type){case"bgp":return`${i}BGP [
${e.triples.map(f=>`${i}  ${this.tripleToString(f)}`).join(`
`)}
${i}]`;case"filter":return`${i}Filter(
${i}  ${this.expressionToString(e.expression)}
${this.toString(e.input,t+1)}
${i})`;case"join":return`${i}Join(
${this.toString(e.left,t+1)}
${this.toString(e.right,t+1)}
${i})`;case"leftjoin":let n=e.expression?` ${this.expressionToString(e.expression)}`:"";return`${i}LeftJoin(${n}
${this.toString(e.left,t+1)}
${this.toString(e.right,t+1)}
${i})`;case"union":return`${i}Union(
${this.toString(e.left,t+1)}
${this.toString(e.right,t+1)}
${i})`;case"project":return`${i}Project [${e.variables.map(f=>`?${f}`).join(", ")}](
${this.toString(e.input,t+1)}
${i})`;case"orderby":let s=e.comparators.map(f=>`${this.expressionToString(f.expression)} ${f.descending?"DESC":"ASC"}`).join(", ");return`${i}OrderBy [${s}](
${this.toString(e.input,t+1)}
${i})`;case"slice":let o=[];return e.offset!==void 0&&o.push(`OFFSET ${e.offset}`),e.limit!==void 0&&o.push(`LIMIT ${e.limit}`),`${i}Slice [${o.join(", ")}](
${this.toString(e.input,t+1)}
${i})`;case"distinct":return`${i}Distinct(
${this.toString(e.input,t+1)}
${i})`;case"group":let c=e.variables.length>0?`[${e.variables.map(f=>`?${f}`).join(", ")}]`:"[]",u=e.aggregates.length>0?e.aggregates.map(f=>`?${f.variable} = ${f.expression.aggregation}(${f.expression.distinct?"DISTINCT ":""}${f.expression.expression?this.expressionToString(f.expression.expression):"*"})`).join(", "):"";return`${i}Group ${c}${u?` [${u}]`:""}(
${this.toString(e.input,t+1)}
${i})`;case"extend":return`${i}Extend (?${e.variable} = ${this.expressionToString(e.expression)})(
${this.toString(e.input,t+1)}
${i})`;case"subquery":return`${i}Subquery(
${this.toString(e.query,t+1)}
${i})`;default:return`${i}Unknown(${e.type})`}}tripleToString(e){return`${this.elementToString(e.subject)} ${this.predicateToString(e.predicate)} ${this.elementToString(e.object)}`}predicateToString(e){return this.isPropertyPath(e)?this.propertyPathToString(e):this.elementToString(e)}isPropertyPath(e){return e.type==="path"}propertyPathToString(e){let t=e.items.map(i=>i.type==="path"?`(${this.propertyPathToString(i)})`:`<${i.value}>`);switch(e.pathType){case"/":return t.join("/");case"|":return t.join("|");case"^":return`^${t[0]}`;case"+":return`${t[0]}+`;case"*":return`${t[0]}*`;case"?":return`${t[0]}?`}}elementToString(e){switch(e.type){case"variable":return`?${e.value}`;case"iri":return`<${e.value}>`;case"literal":let t=`"${e.value}"`;return e.language&&(t+=`@${e.language}`),e.datatype&&(t+=`^^<${e.datatype}>`),t;case"blank":return`_:${e.value}`;default:return String(e)}}expressionToString(e){switch(e.type){case"variable":return`?${e.name}`;case"literal":return typeof e.value=="string"?`"${e.value}"`:String(e.value);case"comparison":return`(${this.expressionToString(e.left)} ${e.operator} ${this.expressionToString(e.right)})`;case"logical":return e.operator==="!"?`!(${this.expressionToString(e.operands[0])})`:`(${e.operands.map(t=>this.expressionToString(t)).join(` ${e.operator} `)})`;case"arithmetic":return`(${this.expressionToString(e.left)} ${e.operator} ${this.expressionToString(e.right)})`;case"function":return`${e.function}(${e.args.map(t=>this.expressionToString(t)).join(", ")})`;case"exists":return`${e.negated?"NOT EXISTS":"EXISTS"} { ${this.toString(e.pattern,0)} }`;default:return"unknown"}}toJSON(e){return JSON.stringify(e,null,2)}};zc.AlgebraSerializer=kd});var Yc=y(Kc=>{"use strict";Object.defineProperty(Kc,"__esModule",{value:!0});Kc.SolutionMapping=void 0;var jd=class r{static{a(this,"SolutionMapping")}constructor(e){this.bindings=e?new Map(e):new Map}get(e){return this.bindings.get(e)}set(e,t){this.bindings.set(e,t)}has(e){return this.bindings.has(e)}variables(){return Array.from(this.bindings.keys())}getBindings(){return new Map(this.bindings)}isCompatibleWith(e){for(let[t,i]of this.bindings.entries()){let n=e.get(t);if(n!==void 0&&!this.areEqual(i,n))return!1}return!0}merge(e){if(!this.isCompatibleWith(e))return null;let t=new r(this.bindings);for(let[i,n]of e.getBindings().entries())t.set(i,n);return t}clone(){return new r(this.bindings)}areEqual(e,t){return e.toString()===t.toString()}toJSON(){let e={};for(let[t,i]of this.bindings.entries())e[t]=i.toString();return e}size(){return this.bindings.size}};Kc.SolutionMapping=jd});var qd=y(bs=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});bs.BGPExecutor=bs.BGPExecutorError=void 0;var z0=Yc(),Sa=Bt(),K0=or(),Md=ai(),ir=class extends Error{static{a(this,"BGPExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="BGPExecutorError"}};bs.BGPExecutorError=ir;var Ld=class{static{a(this,"BGPExecutor")}constructor(e){this.tripleStore=e}async*execute(e){if(e.triples.length===0){yield new z0.SolutionMapping;return}let t=this.matchTriplePattern(e.triples[0]);for(let i=1;i<e.triples.length;i++)t=this.joinWithPattern(t,e.triples[i]);for await(let i of t)yield i}async executeAll(e){let t=[];for await(let i of this.execute(e))t.push(i);return t}async*matchTriplePattern(e){if(this.isPropertyPath(e.predicate))throw new ir("Property paths are not supported in BGPExecutor. Use PropertyPathExecutor for path expressions.");let t=e.predicate,i=this.isVariable(e.subject)?void 0:this.toRDFTermAsSubject(e.subject),n=this.isVariable(t)?void 0:this.toRDFTermAsPredicate(t),s=this.isVariable(e.object)?void 0:this.toRDFTerm(e.object),o=await this.tripleStore.match(i,n,s);for(let c of o){let u=new z0.SolutionMapping;this.isVariable(e.subject)&&u.set(e.subject.value,c.subject),this.isVariable(t)&&u.set(t.value,c.predicate),this.isVariable(e.object)&&u.set(e.object.value,c.object),yield u}}isPropertyPath(e){return e.type==="path"}async*joinWithPattern(e,t){let i=[];for await(let n of e)i.push(n);for(let n of i){let s=this.instantiatePattern(t,n);for await(let o of this.matchTriplePattern(s)){let c=n.merge(o);c!==null&&(yield c)}}}instantiatePattern(e,t){let i=this.isPropertyPath(e.predicate)?e.predicate:this.instantiateElement(e.predicate,t);return{subject:this.instantiateElement(e.subject,t),predicate:i,object:this.instantiateElement(e.object,t)}}instantiateElement(e,t){if(this.isVariable(e)){let i=t.get(e.value);if(i)return this.toAlgebraElement(i)}return e}isVariable(e){return e.type==="variable"}toRDFTermAsSubject(e){switch(e.type){case"iri":return new Sa.IRI(e.value);case"blank":return new Md.BlankNode(e.value);case"literal":throw new ir("Literals cannot appear in subject position");case"variable":throw new ir(`Cannot convert variable to RDF term: ${e.value}`);default:throw new ir(`Unknown element type: ${e.type}`)}}toRDFTermAsPredicate(e){switch(e.type){case"iri":return new Sa.IRI(e.value);case"literal":throw new ir("Literals cannot appear in predicate position");case"blank":throw new ir("Blank nodes cannot appear in predicate position");case"variable":throw new ir(`Cannot convert variable to RDF term: ${e.value}`);default:throw new ir(`Unknown element type: ${e.type}`)}}toRDFTerm(e){switch(e.type){case"iri":return new Sa.IRI(e.value);case"literal":return new K0.Literal(e.value,e.datatype?new Sa.IRI(e.datatype):void 0,e.language);case"blank":return new Md.BlankNode(e.value);case"variable":throw new ir(`Cannot convert variable to RDF term: ${e.value}`);default:throw new ir(`Unknown element type: ${e.type}`)}}toAlgebraElement(e){if(e instanceof Sa.IRI)return{type:"iri",value:e.value};if(e instanceof K0.Literal)return{type:"literal",value:e.value,datatype:e.datatype?.value,language:e.language};if(e instanceof Md.BlankNode)return{type:"blank",value:e.id};throw new ir(`Unknown RDF term type: ${e.constructor?.name||"unknown"}`)}};bs.BGPExecutor=Ld});var Bd=y(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.BuiltInFunctions=void 0;var wa=Bt(),Ea=or(),Vd=ai(),Ud=class{static{a(this,"BuiltInFunctions")}static str(e){if(e===void 0)throw new Error("STR: argument is undefined");return e instanceof wa.IRI||e instanceof Ea.Literal?e.value:e instanceof Vd.BlankNode?e.id:String(e)}static lang(e){if(e===void 0)throw new Error("LANG: argument is undefined");return e instanceof Ea.Literal&&e.language?e.language:""}static datatype(e){if(e===void 0)throw new Error("DATATYPE: argument is undefined");if(e instanceof Ea.Literal)return e.datatype?e.datatype:e.language?new wa.IRI("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"):new wa.IRI("http://www.w3.org/2001/XMLSchema#string");throw new Error("DATATYPE: argument must be a literal")}static bound(e){return e!==void 0}static isIRI(e){return e===void 0?!1:e instanceof wa.IRI}static isBlank(e){return e===void 0?!1:e instanceof Vd.BlankNode}static isLiteral(e){return e===void 0?!1:e instanceof Ea.Literal}static regex(e,t,i){try{return new RegExp(t,i).test(e)}catch(n){throw new Error(`REGEX: invalid pattern '${t}': ${n.message}`)}}static compare(e,t,i){let n=this.toComparableValue(e),s=this.toComparableValue(t);switch(i){case"=":return n===s;case"!=":return n!==s;case"<":return n<s;case">":return n>s;case"<=":return n<=s;case">=":return n>=s;default:throw new Error(`Unknown comparison operator: ${i}`)}}static toComparableValue(e){if(typeof e=="string"||typeof e=="number")return e;if(e instanceof Ea.Literal){let t=e.datatype?.value;if(t?.includes("#integer")||t?.includes("#decimal")||t?.includes("#double")){let i=parseFloat(e.value);if(!isNaN(i))return i}return e.value}return e instanceof wa.IRI?e.value:e instanceof Vd.BlankNode?e.id:String(e)}static contains(e,t){return e.includes(t)}static strStarts(e,t){return e.startsWith(t)}static strEnds(e,t){return e.endsWith(t)}static strlen(e){return e.length}static ucase(e){return e.toUpperCase()}static lcase(e){return e.toLowerCase()}static substr(e,t,i){let n=t-1;if(n<0){if(i!==void 0){let s=i+n;return s<=0?"":e.substring(0,s)}return e}return i!==void 0?e.substring(n,n+i):e.substring(n)}static strBefore(e,t){if(t==="")return"";let i=e.indexOf(t);return i===-1?"":e.substring(0,i)}static strAfter(e,t){if(t==="")return e;let i=e.indexOf(t);return i===-1?"":e.substring(i+t.length)}static concat(...e){return e.join("")}static replace(e,t,i,n){try{let s=new RegExp(t,n||"g");return e.replace(s,i)}catch(s){throw new Error(`REPLACE: invalid pattern '${t}': ${s.message}`)}}static parseDate(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`PARSEDATE: invalid date string '${e}'`);return t.getTime()}static dateBefore(e,t){let i=this.parseDate(e),n=this.parseDate(t);return i<n}static dateAfter(e,t){let i=this.parseDate(e),n=this.parseDate(t);return i>n}static dateInRange(e,t,i){let n=this.parseDate(e),s=this.parseDate(t),o=this.parseDate(i);return n>=s&&n<=o}static dateDiffMinutes(e,t){let i=this.parseDate(e),n=this.parseDate(t),s=Math.abs(n-i);return Math.round(s/(1e3*60))}static dateDiffHours(e,t){let i=this.parseDate(e),n=this.parseDate(t),s=Math.abs(n-i);return Math.round(s/(1e3*60*60)*100)/100}static logicalAnd(e){return e.every(t=>t===!0)}static logicalOr(e){return e.some(t=>t===!0)}static logicalNot(e){return!e}static year(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`YEAR: invalid date string '${e}'`);return t.getFullYear()}static month(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`MONTH: invalid date string '${e}'`);return t.getMonth()+1}static day(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`DAY: invalid date string '${e}'`);return t.getDate()}static hours(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`HOURS: invalid date string '${e}'`);return t.getHours()}static minutes(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`MINUTES: invalid date string '${e}'`);return t.getMinutes()}static seconds(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`SECONDS: invalid date string '${e}'`);return t.getSeconds()+t.getMilliseconds()/1e3}static timezone(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`TIMEZONE: invalid date string '${e}'`);if(e.endsWith("Z"))return"PT0S";let i=e.match(/([+-]\d{2}):?(\d{2})$/);if(i){let u=parseInt(i[1],10),f=parseInt(i[2],10),l=u>=0?"":"-",h=Math.abs(u);return f===0?`${l}PT${h}H`:`${l}PT${h}H${f}M`}let n=-t.getTimezoneOffset(),s=Math.floor(Math.abs(n)/60),o=Math.abs(n)%60,c=n>=0?"":"-";return o===0?`${c}PT${s}H`:`${c}PT${s}H${o}M`}static now(){return new Date().toISOString()}static msToMinutes(e){return Math.round(e/(1e3*60))}static msToHours(e){return Math.round(e/(1e3*60*60)*100)/100}static msToSeconds(e){return Math.round(e/1e3)}};Qc.BuiltInFunctions=Ud});var Wd=y(Ss=>{"use strict";Object.defineProperty(Ss,"__esModule",{value:!0});Ss.FilterExecutor=Ss.FilterExecutorError=void 0;var he=Bd(),$d=or(),Rt=class extends Error{static{a(this,"FilterExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="FilterExecutorError"}};Ss.FilterExecutorError=Rt;var Gd=class{static{a(this,"FilterExecutor")}constructor(){this.existsEvaluator=null}setExistsEvaluator(e){this.existsEvaluator=e}async*execute(e,t){let i=this.expressionContainsExists(e.expression);for await(let n of t)try{let s;i?s=await this.evaluateExpressionAsync(e.expression,n):s=this.evaluateExpression(e.expression,n),s===!0&&(yield n)}catch{continue}}expressionContainsExists(e){return e.type==="exists"?!0:e.type==="logical"?e.operands.some(t=>this.expressionContainsExists(t)):e.type==="comparison"?this.expressionContainsExists(e.left)||this.expressionContainsExists(e.right):!1}async executeAll(e,t){let i=[];async function*n(){for(let s of t)yield s}a(n,"generator");for await(let s of this.execute(e,n()))i.push(s);return i}evaluateExpression(e,t){let i=e;if(i.termType)switch(i.termType){case"Variable":return t.get(i.value);case"Literal":return i.value;case"NamedNode":return i.value;default:throw new Rt(`Unsupported termType: ${i.termType}`)}switch(e.type){case"comparison":return this.evaluateComparison(e,t);case"logical":return this.evaluateLogical(e,t);case"arithmetic":return this.evaluateArithmetic(e,t);case"function":case"functionCall":return this.evaluateFunction(e,t);case"variable":return t.get(e.name);case"literal":return e.value;case"exists":throw new Rt("EXISTS expressions require async evaluation. Use evaluateExpressionAsync instead.");default:throw new Rt(`Unsupported expression type: ${e.type}, expr.termType=${i.termType}`)}}async evaluateExpressionAsync(e,t){return e.type==="exists"?this.evaluateExists(e,t):e.type==="logical"?this.evaluateLogicalAsync(e,t):this.evaluateExpression(e,t)}async evaluateExists(e,t){if(!this.existsEvaluator)throw new Rt("EXISTS evaluator not set. Call setExistsEvaluator before evaluating EXISTS expressions.");let i=await this.existsEvaluator(e.pattern,t);return e.negated?!i:i}async evaluateLogicalAsync(e,t){if(e.operator==="!"){let n=await this.evaluateExpressionAsync(e.operands[0],t);return he.BuiltInFunctions.logicalNot(n)}let i=[];for(let n of e.operands){let s=await this.evaluateExpressionAsync(n,t);i.push(s)}if(e.operator==="&&")return he.BuiltInFunctions.logicalAnd(i);if(e.operator==="||")return he.BuiltInFunctions.logicalOr(i);throw new Rt(`Unknown logical operator: ${e.operator}`)}evaluateComparison(e,t){let i=this.evaluateExpression(e.left,t),n=this.evaluateExpression(e.right,t);return he.BuiltInFunctions.compare(i,n,e.operator)}evaluateLogical(e,t){if(e.operator==="!"){let n=this.evaluateExpression(e.operands[0],t);return he.BuiltInFunctions.logicalNot(n)}let i=e.operands.map(n=>this.evaluateExpression(n,t));if(e.operator==="&&")return he.BuiltInFunctions.logicalAnd(i);if(e.operator==="||")return he.BuiltInFunctions.logicalOr(i);throw new Rt(`Unknown logical operator: ${e.operator}`)}evaluateArithmetic(e,t){let i=this.evaluateExpression(e.left,t),n=this.evaluateExpression(e.right,t),s=this.toNumericValue(i),o=this.toNumericValue(n);if(e.operator==="-"&&this.isDateTimeValue(i)&&this.isDateTimeValue(n)){let c=this.parseDateTimeToMs(i),u=this.parseDateTimeToMs(n);return c-u}switch(e.operator){case"+":return s+o;case"-":return s-o;case"*":return s*o;case"/":if(o===0)throw new Rt("Division by zero");return s/o;default:throw new Rt(`Unknown arithmetic operator: ${e.operator}`)}}toNumericValue(e){if(typeof e=="number")return e;if(e instanceof $d.Literal){let t=e.datatype?.value||"";if(t.includes("#integer")||t.includes("#decimal")||t.includes("#double")||t.includes("#float")){let n=parseFloat(e.value);if(!isNaN(n))return n}let i=parseFloat(e.value);if(!isNaN(i))return i}if(typeof e=="string"){let t=parseFloat(e);if(!isNaN(t))return t}if(e&&typeof e=="object"&&"value"in e){let t=parseFloat(String(e.value));if(!isNaN(t))return t}throw new Rt(`Cannot convert to number: ${e}`)}isDateTimeValue(e){if(e instanceof $d.Literal){let t=e.datatype?.value||"";return t.includes("#dateTime")||t.includes("#date")?!0:/^\d{4}-\d{2}-\d{2}(T|\s)/.test(e.value)}return typeof e=="string"?/^\d{4}-\d{2}-\d{2}(T|\s)/.test(e):!1}parseDateTimeToMs(e){let t;if(e instanceof $d.Literal)t=e.value;else if(typeof e=="string")t=e;else if(e&&typeof e=="object"&&"value"in e)t=String(e.value);else throw new Rt(`Cannot parse dateTime: ${e}`);let i=new Date(t);if(isNaN(i.getTime()))throw new Rt(`Invalid dateTime format: ${t}`);return i.getTime()}evaluateFunction(e,t){let i;if(typeof e.function=="string")i=e.function.toLowerCase();else if(e.function&&typeof e.function=="object"&&"value"in e.function){let n=e.function.value;i=((n.includes("#")?n.split("#").pop():n.split("/").pop())||n).toLowerCase()}else throw new Rt(`Unknown function format: ${e.function}`);switch(i){case"str":let n=this.getTermFromExpression(e.args[0],t);return he.BuiltInFunctions.str(n);case"lang":let s=this.getTermFromExpression(e.args[0],t);return he.BuiltInFunctions.lang(s);case"datatype":let o=this.getTermFromExpression(e.args[0],t);return he.BuiltInFunctions.datatype(o).value;case"bound":if(e.args[0].type==="variable"){let W=t.get(e.args[0].name);return he.BuiltInFunctions.bound(W)}return!0;case"isiri":case"isuri":let c=this.getTermFromExpression(e.args[0],t);return he.BuiltInFunctions.isIRI(c);case"isblank":let u=this.getTermFromExpression(e.args[0],t);return he.BuiltInFunctions.isBlank(u);case"isliteral":let f=this.getTermFromExpression(e.args[0],t);return he.BuiltInFunctions.isLiteral(f);case"regex":let l=this.getStringValue(this.evaluateExpression(e.args[0],t)),h=this.getStringValue(this.evaluateExpression(e.args[1],t)),p=e.args[2]?this.getStringValue(this.evaluateExpression(e.args[2],t)):void 0;return he.BuiltInFunctions.regex(l,h,p);case"contains":let g=this.getStringValue(this.evaluateExpression(e.args[0],t)),v=this.getStringValue(this.evaluateExpression(e.args[1],t));return he.BuiltInFunctions.contains(g,v);case"strstarts":let S=this.getStringValue(this.evaluateExpression(e.args[0],t)),x=this.getStringValue(this.evaluateExpression(e.args[1],t));return he.BuiltInFunctions.strStarts(S,x);case"strends":let F=this.getStringValue(this.evaluateExpression(e.args[0],t)),D=this.getStringValue(this.evaluateExpression(e.args[1],t));return he.BuiltInFunctions.strEnds(F,D);case"strlen":let U=this.getStringValue(this.evaluateExpression(e.args[0],t));return he.BuiltInFunctions.strlen(U);case"ucase":let G=this.getStringValue(this.evaluateExpression(e.args[0],t));return he.BuiltInFunctions.ucase(G);case"lcase":let ee=this.getStringValue(this.evaluateExpression(e.args[0],t));return he.BuiltInFunctions.lcase(ee);case"substr":let Fe=this.getStringValue(this.evaluateExpression(e.args[0],t)),it=Number(this.evaluateExpression(e.args[1],t));if(e.args[2]){let W=Number(this.evaluateExpression(e.args[2],t));return he.BuiltInFunctions.substr(Fe,it,W)}return he.BuiltInFunctions.substr(Fe,it);case"strbefore":let dt=this.getStringValue(this.evaluateExpression(e.args[0],t)),V=this.getStringValue(this.evaluateExpression(e.args[1],t));return he.BuiltInFunctions.strBefore(dt,V);case"strafter":let oe=this.getStringValue(this.evaluateExpression(e.args[0],t)),xe=this.getStringValue(this.evaluateExpression(e.args[1],t));return he.BuiltInFunctions.strAfter(oe,xe);case"concat":let Qe=e.args.map(W=>this.getStringValue(this.evaluateExpression(W,t)));return he.BuiltInFunctions.concat(...Qe);case"replace":let Be=this.getStringValue(this.evaluateExpression(e.args[0],t)),We=this.getStringValue(this.evaluateExpression(e.args[1],t)),Pe=this.getStringValue(this.evaluateExpression(e.args[2],t)),Re=e.args[3]?this.getStringValue(this.evaluateExpression(e.args[3],t)):void 0;return he.BuiltInFunctions.replace(Be,We,Pe,Re);case"parsedate":let Oe=this.getStringValue(this.evaluateExpression(e.args[0],t));return he.BuiltInFunctions.parseDate(Oe);case"datebefore":let $=this.getStringValue(this.evaluateExpression(e.args[0],t)),I=this.getStringValue(this.evaluateExpression(e.args[1],t));return he.BuiltInFunctions.dateBefore($,I);case"dateafter":let Ie=this.getStringValue(this.evaluateExpression(e.args[0],t)),Le=this.getStringValue(this.evaluateExpression(e.args[1],t));return he.BuiltInFunctions.dateAfter(Ie,Le);case"dateinrange":let j=this.getStringValue(this.evaluateExpression(e.args[0],t)),ue=this.getStringValue(this.evaluateExpression(e.args[1],t)),be=this.getStringValue(this.evaluateExpression(e.args[2],t));return he.BuiltInFunctions.dateInRange(j,ue,be);case"datediffminutes":let B=this.getStringValue(this.evaluateExpression(e.args[0],t)),Se=this.getStringValue(this.evaluateExpression(e.args[1],t));return he.BuiltInFunctions.dateDiffMinutes(B,Se);case"datediffhours":let we=this.getStringValue(this.evaluateExpression(e.args[0],t)),ge=this.getStringValue(this.evaluateExpression(e.args[1],t));return he.BuiltInFunctions.dateDiffHours(we,ge);case"year":let Ee=this.getStringValue(this.evaluateExpression(e.args[0],t));return he.BuiltInFunctions.year(Ee);case"month":let ce=this.getStringValue(this.evaluateExpression(e.args[0],t));return he.BuiltInFunctions.month(ce);case"day":let ye=this.getStringValue(this.evaluateExpression(e.args[0],t));return he.BuiltInFunctions.day(ye);case"hours":let le=this.getStringValue(this.evaluateExpression(e.args[0],t));return he.BuiltInFunctions.hours(le);case"minutes":let _e=this.getStringValue(this.evaluateExpression(e.args[0],t));return he.BuiltInFunctions.minutes(_e);case"seconds":let Te=this.getStringValue(this.evaluateExpression(e.args[0],t));return he.BuiltInFunctions.seconds(Te);case"timezone":case"tz":let Y=this.getStringValue(this.evaluateExpression(e.args[0],t));return he.BuiltInFunctions.timezone(Y);case"now":return he.BuiltInFunctions.now();case"mstominutes":let J=Number(this.evaluateExpression(e.args[0],t));return he.BuiltInFunctions.msToMinutes(J);case"mstohours":let X=Number(this.evaluateExpression(e.args[0],t));return he.BuiltInFunctions.msToHours(X);case"mstoseconds":let Q=Number(this.evaluateExpression(e.args[0],t));return he.BuiltInFunctions.msToSeconds(Q);default:throw new Rt(`Unknown function: ${i}`)}}getTermFromExpression(e,t){if(e.type==="variable")return t.get(e.name)}getStringValue(e){return e==null?"":typeof e=="object"&&"value"in e?String(e.value):String(e)}};Ss.FilterExecutor=Gd});var zd=y(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.OptionalExecutor=void 0;var Hd=class{static{a(this,"OptionalExecutor")}async*execute(e,t){let i=[];for await(let s of e)i.push(s);let n=[];for await(let s of t)n.push(s);for(let s of i){let o=!1;for(let c of n){let u=s.merge(c);u!==null&&(yield u,o=!0)}o||(yield s)}}async executeAll(e,t){let i=[];async function*n(){for(let o of e)yield o}a(n,"generateLeft");async function*s(){for(let o of t)yield o}a(s,"generateRight");for await(let o of this.execute(n(),s()))i.push(o);return i}};Jc.OptionalExecutor=Hd});var Yd=y(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.UnionExecutor=void 0;var Kd=class{static{a(this,"UnionExecutor")}async*execute(e,t){let i=new Set;for await(let n of e){let s=this.getSolutionKey(n);i.has(s)||(i.add(s),yield n)}for await(let n of t){let s=this.getSolutionKey(n);i.has(s)||(i.add(s),yield n)}}async executeAll(e,t){let i=[];async function*n(){for(let o of e)yield o}a(n,"generateLeft");async function*s(){for(let o of t)yield o}a(s,"generateRight");for await(let o of this.execute(n(),s()))i.push(o);return i}getSolutionKey(e){let t=e.toJSON();return Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("|")}};Xc.UnionExecutor=Kd});var Q0=y(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.ConstructExecutor=void 0;var $T=Sn(),Y0=Bt(),GT=or(),WT=ai(),Qd=class{static{a(this,"ConstructExecutor")}async execute(e,t){let i=[],n=new Set;for(let s of t)for(let o of e)try{let c=this.instantiateTriple(o,s),u=`${c.subject.toString()}|${c.predicate.toString()}|${c.object.toString()}`;n.has(u)||(n.add(u),i.push(c))}catch{continue}return i}instantiateTriple(e,t){if(this.isPropertyPath(e.predicate))throw new Error("Property paths are not supported in CONSTRUCT templates");let i=this.instantiateElement(e.subject,t),n=this.instantiateElement(e.predicate,t),s=this.instantiateElement(e.object,t);return new $T.Triple(i,n,s)}isPropertyPath(e){return e.type==="path"}instantiateElement(e,t){if(e.type==="variable"){let i=t.get(e.value);if(!i)throw new Error(`Unbound variable: ${e.value}`);return i}if(e.type==="iri")return new Y0.IRI(e.value);if(e.type==="literal")return new GT.Literal(e.value,e.datatype?new Y0.IRI(e.datatype):void 0,e.language);if(e.type==="blank")return new WT.BlankNode(e.value);throw new Error(`Unknown element type: ${e.type}`)}};Zc.ConstructExecutor=Qd});var J0=y(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.DescribeExecutor=void 0;var HT=Bt(),Jd=class{static{a(this,"DescribeExecutor")}constructor(e){this.tripleStore=e}async execute(e){let t=[],i=new Set;for(let n of e){let s=await this.describeResource(n);for(let o of s){let c=`${o.subject.toString()}|${o.predicate.toString()}|${o.object.toString()}`;i.has(c)||(i.add(c),t.push(o))}}return t}async describeResource(e){let t=[],i=await this.tripleStore.match(e,void 0,void 0);t.push(...i);let n=await this.tripleStore.match(void 0,void 0,e);return t.push(...n),t}async describeByIRI(e){let t=new HT.IRI(e);return this.execute([t])}};eu.DescribeExecutor=Jd});var X0=y(ws=>{"use strict";Object.defineProperty(ws,"__esModule",{value:!0});ws.AggregateExecutor=ws.AggregateExecutorError=void 0;var tu=class extends Error{static{a(this,"AggregateExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="AggregateExecutorError"}};ws.AggregateExecutorError=tu;var Xd=class{static{a(this,"AggregateExecutor")}execute(e,t){let i=this.groupSolutions(t,e.variables),n=[];for(let[s,o]of i.entries()){let c=new Map;for(let u of e.variables)if(o.length>0){let f=o[0].get(u);f&&c.set(u,f)}for(let u of e.aggregates){let f=this.computeAggregate(u.expression,o);c.set(u.variable,f)}if(o.length>0){let u=o[0].clone();for(let[f,l]of c.entries())u.set(f,l);n.push(u)}else{let u=new(o[0]?.constructor||Map);for(let[f,l]of c.entries())u.set(f,l);n.push(u)}}if(n.length===0&&e.aggregates.length>0){let s=this.createEmptyAggregateResult(e);s&&n.push(s)}return n}groupSolutions(e,t){let i=new Map;if(t.length===0)return i.set("",e),i;for(let n of e){let s=this.computeGroupKey(n,t),o=i.get(s);o?o.push(n):i.set(s,[n])}return i}computeGroupKey(e,t){return t.map(i=>{let n=e.get(i);return n?this.termToString(n):""}).join("|")}termToString(e){if(e&&typeof e=="object"){if("value"in e)return String(e.value);if("id"in e)return String(e.id)}return String(e)}computeAggregate(e,t){let i=this.extractValues(e,t);switch(e.aggregation){case"count":return this.computeCount(i,e.distinct);case"sum":return this.computeSum(i);case"avg":return this.computeAvg(i);case"min":return this.computeMin(i);case"max":return this.computeMax(i);case"group_concat":return this.computeGroupConcat(i,e.separator||" ",e.distinct);default:throw new tu(`Unknown aggregation function: ${e.aggregation}`)}}extractValues(e,t){if(!e.expression)return t.map(()=>1);let i=[];for(let n of t){let s=this.evaluateExpression(e.expression,n);s!=null&&i.push(s)}return i}evaluateExpression(e,t){if(e.type==="variable"){let i=t.get(e.name);return i?typeof i=="object"&&"value"in i?i.value:i:void 0}if(e.type==="literal")return e.value}computeCount(e,t){return t?new Set(e.map(i=>String(i))).size:e.length}computeSum(e){return e.map(i=>parseFloat(String(i))).filter(i=>!isNaN(i)).reduce((i,n)=>i+n,0)}computeAvg(e){let t=e.map(i=>parseFloat(String(i))).filter(i=>!isNaN(i));return t.length===0?0:t.reduce((i,n)=>i+n,0)/t.length}computeMin(e){if(e.length===0)return;let t=e.map(n=>parseFloat(String(n))).filter(n=>!isNaN(n));if(t.length>0)return Math.min(...t);let i=e.map(n=>String(n));return i.reduce((n,s)=>s<n?s:n,i[0])}computeMax(e){if(e.length===0)return;let t=e.map(n=>parseFloat(String(n))).filter(n=>!isNaN(n));if(t.length>0)return Math.max(...t);let i=e.map(n=>String(n));return i.reduce((n,s)=>s>n?s:n,i[0])}computeGroupConcat(e,t,i){let n=e.map(s=>String(s));return i&&(n=[...new Set(n)]),n.join(t)}createEmptyAggregateResult(e){let{SolutionMapping:t}=Yc(),i=new t;for(let n of e.aggregates)switch(n.expression.aggregation){case"count":i.set(n.variable,0);break;case"sum":case"avg":i.set(n.variable,0);break;default:i.set(n.variable,void 0)}return i}};ws.AggregateExecutor=Xd});var Z0=y(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.QueryExecutor=Es.QueryExecutorError=void 0;var zT=qd(),KT=Wd(),YT=zd(),QT=Yd(),JT=X0(),ru=class extends Error{static{a(this,"QueryExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="QueryExecutorError"}};Es.QueryExecutorError=ru;var Zd=class{static{a(this,"QueryExecutor")}constructor(e){this.bgpExecutor=new zT.BGPExecutor(e),this.filterExecutor=new KT.FilterExecutor,this.optionalExecutor=new YT.OptionalExecutor,this.unionExecutor=new QT.UnionExecutor,this.aggregateExecutor=new JT.AggregateExecutor,this.filterExecutor.setExistsEvaluator(async(t,i)=>this.evaluateExistsPattern(t,i))}async evaluateExistsPattern(e,t){for await(let i of this.execute(e))if(t.merge(i)!==null)return!0;return!1}async executeAll(e){let t=[];for await(let i of this.execute(e))t.push(i);return t}async*execute(e){switch(e.type){case"bgp":yield*this.executeBGP(e);break;case"filter":yield*this.executeFilter(e);break;case"join":yield*this.executeJoin(e);break;case"leftjoin":yield*this.executeLeftJoin(e);break;case"union":yield*this.executeUnion(e);break;case"project":yield*this.executeProject(e);break;case"orderby":yield*this.executeOrderBy(e);break;case"slice":yield*this.executeSlice(e);break;case"distinct":yield*this.executeDistinct(e);break;case"group":yield*this.executeGroup(e);break;case"extend":yield*this.executeExtend(e);break;case"subquery":yield*this.executeSubquery(e);break;default:throw new ru(`Unknown operation type: ${e.type}`)}}async*executeBGP(e){yield*this.bgpExecutor.execute(e)}async*executeFilter(e){let t=this.execute(e.input);yield*this.filterExecutor.execute(e,t)}async*executeJoin(e){let t=[];for await(let i of this.execute(e.left))t.push(i);for(let i of t)for await(let n of this.execute(e.right)){let s=i.merge(n);s!==null&&(yield s)}}async*executeLeftJoin(e){let t=[];for await(let o of this.execute(e.left))t.push(o);let i=[];for await(let o of this.execute(e.right))i.push(o);async function*n(){for(let o of t)yield o}a(n,"leftGen");async function*s(){for(let o of i)yield o}a(s,"rightGen"),yield*this.optionalExecutor.execute(n(),s())}async*executeUnion(e){let t=[];for await(let o of this.execute(e.left))t.push(o);let i=[];for await(let o of this.execute(e.right))i.push(o);async function*n(){for(let o of t)yield o}a(n,"leftGen");async function*s(){for(let o of i)yield o}a(s,"rightGen"),yield*this.unionExecutor.execute(n(),s())}async*executeProject(e){for await(let t of this.execute(e.input))yield t}async*executeOrderBy(e){let t=[];for await(let i of this.execute(e.input))t.push(i);t.sort((i,n)=>{for(let s of e.comparators){let o=this.getExpressionValue(s.expression,i),c=this.getExpressionValue(s.expression,n),u=0;if(o===void 0&&c===void 0?u=0:o===void 0?u=1:c===void 0?u=-1:typeof o=="number"&&typeof c=="number"?u=o-c:u=String(o).localeCompare(String(c)),s.descending&&(u=-u),u!==0)return u}return 0});for(let i of t)yield i}async*executeSlice(e){let t=0,i=e.offset??0,n=e.limit;for await(let s of this.execute(e.input)){if(t>=i){if(n!==void 0&&t-i>=n)break;yield s}t++}}async*executeDistinct(e){let t=new Set;for await(let i of this.execute(e.input)){let n=this.getSolutionKey(i);t.has(n)||(t.add(n),yield i)}}async*executeGroup(e){let t=[];for await(let n of this.execute(e.input))t.push(n);let i=this.aggregateExecutor.execute(e,t);for(let n of i)yield n}async*executeExtend(e){for await(let t of this.execute(e.input)){let i=t.clone(),n=this.evaluateExtendExpression(e.expression,t);n!==void 0&&i.set(e.variable,n),yield i}}async*executeSubquery(e){yield*this.execute(e.query)}evaluateExtendExpression(e,t){if(e.type!=="aggregate")try{return this.filterExecutor.evaluateExpression(e,t)}catch{return}}getExpressionValue(e,t){if(e.type==="variable"){let i=t.get(e.name);return i?i.value??i.id??String(i):void 0}return e.value}getSolutionKey(e){let t=e.toJSON();return Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("|")}};Es.QueryExecutor=Zd});var tg=y(iu=>{"use strict";Object.defineProperty(iu,"__esModule",{value:!0});iu.AggregateFunctions=void 0;var ep=or(),eg=Bt(),tp=class{static{a(this,"AggregateFunctions")}static count(e,t){if(!t)return e.length;let i=0;for(let n of e)n.has(t)&&i++;return i}static countDistinct(e,t){let i=new Set;for(let n of e){let s=n.get(t);s&&i.add(s.toString())}return i.size}static sum(e,t){let i=0;for(let n of e){let s=n.get(t);if(s instanceof ep.Literal){let o=this.toNumber(s);isNaN(o)||(i+=o)}}return i}static avg(e,t){let i=this.sum(e,t),n=this.count(e,t);return n>0?i/n:0}static min(e,t){let i=null;for(let n of e){let s=n.get(t);if(!s)continue;let o=this.toComparable(s);(i===null||o<i)&&(i=o)}return i}static max(e,t){let i=null;for(let n of e){let s=n.get(t);if(!s)continue;let o=this.toComparable(s);(i===null||o>i)&&(i=o)}return i}static groupConcat(e,t,i=" "){let n=[];for(let s of e){let o=s.get(t);o&&(o instanceof ep.Literal||o instanceof eg.IRI?n.push(o.value):n.push(o.toString()))}return n.join(i)}static toNumber(e){let t=e.datatype?.value;return t?.includes("#integer")||t?.includes("#decimal")||t?.includes("#double"),parseFloat(e.value)}static toComparable(e){if(e instanceof ep.Literal){let t=this.toNumber(e);return isNaN(t)?e.value:t}return e instanceof eg.IRI?e.value:String(e)}};iu.AggregateFunctions=tp});var rg=y(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.QueryPlanCache=void 0;var XT=md(),rp=class{static{a(this,"QueryPlanCache")}constructor(e=100){this.hits=0,this.misses=0,this.cache=new XT.LRUCache(e)}get(e){let t=this.normalizeQuery(e),i=this.cache.get(t);return i!==void 0?this.hits++:this.misses++,i}set(e,t){let i=this.normalizeQuery(e);this.cache.set(i,t)}has(e){let t=this.normalizeQuery(e);return this.cache.get(t)!==void 0}clear(){this.cache.clear()}getStats(){let e=this.hits+this.misses;return{hits:this.hits,misses:this.misses,hitRate:e>0?this.hits/e:0,size:this.cache.size()}}resetStats(){this.hits=0,this.misses=0}normalizeQuery(e){return e.replace(/\s+/g," ").trim()}};nu.QueryPlanCache=rp});var ig=y(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.FileAlreadyExistsError=Ts.FileNotFoundError=void 0;var ip=class extends Error{static{a(this,"FileNotFoundError")}constructor(e){super(`File not found: ${e}`),this.name="FileNotFoundError"}};Ts.FileNotFoundError=ip;var np=class extends Error{static{a(this,"FileAlreadyExistsError")}constructor(e){super(`File already exists: ${e}`),this.name="FileAlreadyExistsError"}};Ts.FileAlreadyExistsError=np});var ng=y(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.container=void 0;Xi.registerCoreServices=w9;Xi.createChildContainer=E9;Xi.getContainer=T9;Xi.resetContainer=A9;Pl();var Ta=Ke();Object.defineProperty(Xi,"container",{enumerable:!0,get:a(function(){return Ta.container},"get")});var Ze=Xe(),ZT=mh(),e9=mc(),t9=gc(),r9=qh(),i9=yh(),n9=Eh(),s9=Sh(),a9=Sc(),o9=wc(),c9=Ih(),u9=kh(),l9=Uh(),f9=Dh(),h9=zh(),d9=Jh(),p9=Yh(),m9=Ch(),g9=Fh(),y9=Wh(),_9=$h(),v9=bd(),b9=Ah(),S9=Zh();function w9(r){let e=r||Ta.container;e.registerSingleton(Ze.DI_TOKENS.TaskFrontmatterGenerator,e9.TaskFrontmatterGenerator),e.registerSingleton(Ze.DI_TOKENS.AlgorithmExtractor,t9.AlgorithmExtractor),e.registerSingleton(Ze.DI_TOKENS.EffortStatusWorkflow,a9.EffortStatusWorkflow),e.registerSingleton(Ze.DI_TOKENS.StatusTimestampService,o9.StatusTimestampService),e.registerSingleton(Ze.DI_TOKENS.TaskStatusService,s9.TaskStatusService),e.registerSingleton(Ze.DI_TOKENS.TaskCreationService,ZT.TaskCreationService),e.registerSingleton(Ze.DI_TOKENS.ProjectCreationService,i9.ProjectCreationService),e.registerSingleton(Ze.DI_TOKENS.AreaCreationService,n9.AreaCreationService),e.registerSingleton(Ze.DI_TOKENS.ClassCreationService,m9.ClassCreationService),e.registerSingleton(Ze.DI_TOKENS.ConceptCreationService,g9.ConceptCreationService),e.registerSingleton(Ze.DI_TOKENS.FleetingNoteCreationService,y9.FleetingNoteCreationService),e.registerSingleton(Ze.DI_TOKENS.SupervisionCreationService,_9.SupervisionCreationService),e.registerSingleton(Ze.DI_TOKENS.PropertyCleanupService,r9.PropertyCleanupService),e.registerSingleton(Ze.DI_TOKENS.FolderRepairService,c9.FolderRepairService),e.registerSingleton(Ze.DI_TOKENS.LabelToAliasService,u9.LabelToAliasService),e.registerSingleton(Ze.DI_TOKENS.RenameToUidService,l9.RenameToUidService),e.registerSingleton(Ze.DI_TOKENS.PlanningService,h9.PlanningService),e.registerSingleton(Ze.DI_TOKENS.EffortVotingService,f9.EffortVotingService),e.registerSingleton(Ze.DI_TOKENS.SessionEventService,d9.SessionEventService),e.registerSingleton(Ze.DI_TOKENS.AssetConversionService,p9.AssetConversionService),e.registerSingleton(Ze.DI_TOKENS.NoteToRDFConverter,v9.NoteToRDFConverter),e.registerSingleton(Ze.DI_TOKENS.AreaHierarchyBuilder,b9.AreaHierarchyBuilder),e.registerSingleton(Ze.DI_TOKENS.URIConstructionService,S9.URIConstructionService)}a(w9,"registerCoreServices");function E9(){return Ta.container.createChildContainer()}a(E9,"createChildContainer");function T9(){return Ta.container}a(T9,"getContainer");function A9(){Ta.container.reset()}a(A9,"resetContainer")});var li=y(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.ErrorCode=void 0;var sg;(function(r){r[r.INVALID_INPUT=1e3]="INVALID_INPUT",r[r.INVALID_FORMAT=1001]="INVALID_FORMAT",r[r.MISSING_REQUIRED_FIELD=1002]="MISSING_REQUIRED_FIELD",r[r.INVALID_SCHEMA=1003]="INVALID_SCHEMA",r[r.NETWORK_ERROR=2e3]="NETWORK_ERROR",r[r.REQUEST_TIMEOUT=2001]="REQUEST_TIMEOUT",r[r.CONNECTION_FAILED=2002]="CONNECTION_FAILED",r[r.FILE_READ_ERROR=2003]="FILE_READ_ERROR",r[r.FILE_WRITE_ERROR=2004]="FILE_WRITE_ERROR",r[r.INVALID_STATE=3e3]="INVALID_STATE",r[r.INVALID_TRANSITION=3001]="INVALID_TRANSITION",r[r.OPERATION_FAILED=3002]="OPERATION_FAILED",r[r.CONCURRENT_MODIFICATION=3003]="CONCURRENT_MODIFICATION",r[r.PERMISSION_DENIED=4e3]="PERMISSION_DENIED",r[r.UNAUTHORIZED=4001]="UNAUTHORIZED",r[r.FORBIDDEN=4003]="FORBIDDEN",r[r.NOT_FOUND=5e3]="NOT_FOUND",r[r.RESOURCE_EXHAUSTED=5001]="RESOURCE_EXHAUSTED",r[r.ALREADY_EXISTS=5002]="ALREADY_EXISTS",r[r.UNKNOWN_ERROR=9e3]="UNKNOWN_ERROR",r[r.INTERNAL_ERROR=9001]="INTERNAL_ERROR"})(sg||(su.ErrorCode=sg={}))});var fi=y(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.ApplicationError=void 0;var sp=class extends Error{static{a(this,"ApplicationError")}constructor(e,t){super(e),this.name=this.constructor.name,this.context=t,this.timestamp=new Date,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}format(){let e=`\u274C ${this.name}: ${this.message}`;if(this.guidance&&(e+=`

\u{1F4A1} ${this.guidance}`),this.context&&Object.keys(this.context).length>0){e+=`

\u{1F4CB} Context:`;for(let[t,i]of Object.entries(this.context))e+=`
  ${t}: ${JSON.stringify(i)}`}return e}toJSON(){return{name:this.name,message:this.message,code:this.code,retriable:this.retriable,timestamp:this.timestamp.toISOString(),context:this.context,stack:this.stack}}};au.ApplicationError=sp});var ag=y(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.ValidationError=void 0;var x9=fi(),C9=li(),ap=class extends x9.ApplicationError{static{a(this,"ValidationError")}constructor(e,t){super(e,t),this.code=C9.ErrorCode.INVALID_INPUT,this.retriable=!1,this.guidance=`Check the input data for correctness.
Common issues:
  \u2022 Missing required fields
  \u2022 Invalid data format or type
  \u2022 Values outside allowed range
  \u2022 Schema validation failed`}};ou.ValidationError=ap});var og=y(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.NetworkError=void 0;var O9=fi(),F9=li(),op=class extends O9.ApplicationError{static{a(this,"NetworkError")}constructor(e,t){super(e,t),this.code=F9.ErrorCode.NETWORK_ERROR,this.retriable=!0,this.guidance=`This is typically a transient network issue.
To resolve:
  \u2022 Check your internet connection
  \u2022 Retry the operation
  \u2022 Verify external services are available
  \u2022 Check firewall/proxy settings`}};cu.NetworkError=op});var cg=y(uu=>{"use strict";Object.defineProperty(uu,"__esModule",{value:!0});uu.StateTransitionError=void 0;var P9=fi(),D9=li(),cp=class extends P9.ApplicationError{static{a(this,"StateTransitionError")}constructor(e,t){super(e,t),this.code=D9.ErrorCode.INVALID_TRANSITION,this.retriable=!1,this.guidance=`The requested state transition is not allowed.
To fix:
  \u2022 Check the current state of the resource
  \u2022 Verify the transition is valid for this workflow
  \u2022 Review state machine documentation
  \u2022 Ensure no concurrent modifications occurred`}};uu.StateTransitionError=cp});var ug=y(lu=>{"use strict";Object.defineProperty(lu,"__esModule",{value:!0});lu.PermissionError=void 0;var R9=fi(),I9=li(),up=class extends R9.ApplicationError{static{a(this,"PermissionError")}constructor(e,t){super(e,t),this.code=I9.ErrorCode.PERMISSION_DENIED,this.retriable=!1,this.guidance=`You don't have permission to perform this operation.
To resolve:
  \u2022 Check file/directory permissions
  \u2022 Verify you're authenticated
  \u2022 Ensure you have sufficient privileges
  \u2022 Contact administrator if access is needed`}};lu.PermissionError=up});var lg=y(fu=>{"use strict";Object.defineProperty(fu,"__esModule",{value:!0});fu.NotFoundError=void 0;var N9=fi(),k9=li(),lp=class extends N9.ApplicationError{static{a(this,"NotFoundError")}constructor(e,t){super(e,t),this.code=k9.ErrorCode.NOT_FOUND,this.retriable=!1,this.guidance=`The requested resource could not be found.
To resolve:
  \u2022 Verify the resource path/ID is correct
  \u2022 Check the resource exists
  \u2022 Ensure proper file extension (.md for notes)
  \u2022 Verify resource hasn't been deleted`}};fu.NotFoundError=lp});var fg=y(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.ResourceExhaustedError=void 0;var j9=fi(),M9=li(),fp=class extends j9.ApplicationError{static{a(this,"ResourceExhaustedError")}constructor(e,t){super(e,t),this.code=M9.ErrorCode.RESOURCE_EXHAUSTED,this.retriable=!0,this.guidance=`A resource limit has been exceeded.
To resolve:
  \u2022 Free up system resources (memory, disk space)
  \u2022 Reduce the size of your request
  \u2022 Wait and retry (for rate limits)
  \u2022 Close unused files/connections
  \u2022 Paginate large queries`}};hu.ResourceExhaustedError=fp});var hg=y(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.ServiceError=void 0;var L9=fi(),q9=li(),hp=class extends L9.ApplicationError{static{a(this,"ServiceError")}constructor(e,t){super(e,t),this.code=q9.ErrorCode.INTERNAL_ERROR,this.retriable=!1,this.guidance=`This is an internal service error.
To resolve:
  \u2022 Check service initialization parameters
  \u2022 Verify all required dependencies are available
  \u2022 Review service logs for detailed error information
  \u2022 Contact support if the issue persists`}};du.ServiceError=hp});var dg=y(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.ServiceError=ct.ResourceExhaustedError=ct.NotFoundError=ct.PermissionError=ct.StateTransitionError=ct.NetworkError=ct.ValidationError=ct.ApplicationError=ct.ErrorCode=void 0;var V9=li();Object.defineProperty(ct,"ErrorCode",{enumerable:!0,get:a(function(){return V9.ErrorCode},"get")});var U9=fi();Object.defineProperty(ct,"ApplicationError",{enumerable:!0,get:a(function(){return U9.ApplicationError},"get")});var B9=ag();Object.defineProperty(ct,"ValidationError",{enumerable:!0,get:a(function(){return B9.ValidationError},"get")});var $9=og();Object.defineProperty(ct,"NetworkError",{enumerable:!0,get:a(function(){return $9.NetworkError},"get")});var G9=cg();Object.defineProperty(ct,"StateTransitionError",{enumerable:!0,get:a(function(){return G9.StateTransitionError},"get")});var W9=ug();Object.defineProperty(ct,"PermissionError",{enumerable:!0,get:a(function(){return W9.PermissionError},"get")});var H9=lg();Object.defineProperty(ct,"NotFoundError",{enumerable:!0,get:a(function(){return H9.NotFoundError},"get")});var z9=fg();Object.defineProperty(ct,"ResourceExhaustedError",{enumerable:!0,get:a(function(){return z9.ResourceExhaustedError},"get")});var K9=hg();Object.defineProperty(ct,"ServiceError",{enumerable:!0,get:a(function(){return K9.ServiceError},"get")})});var pg=y(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.ApplicationErrorHandler=void 0;var dp=fi(),Y9=li(),pp=class{static{a(this,"ApplicationErrorHandler")}constructor(e={},t,i){this.logger=t,this.notifier=i,this.telemetryHooks=new Set,this.retryConfig={maxRetries:e.maxRetries??3,initialDelayMs:e.initialDelayMs??1e3,backoffMultiplier:e.backoffMultiplier??2,maxDelayMs:e.maxDelayMs??1e4}}handle(e,t){let i=this.ensureApplicationError(e,t);return this.notifier&&this.notifier.error(i.message),this.callTelemetryHooks("onError",i,t),this.formatError(i)}async executeWithRetry(e,t){let i,n=0;for(;n<=this.retryConfig.maxRetries;)try{return await e()}catch(s){if(i=this.ensureApplicationError(s,t),!i.retriable||n>=this.retryConfig.maxRetries)throw this.callTelemetryHooks("onError",i,t),n>=this.retryConfig.maxRetries&&i.retriable&&this.callTelemetryHooks("onRetryExhausted",i,n+1),i;let o=this.calculateDelay(n);this.callTelemetryHooks("onRetry",i,n+1,o),this.logger?.debug(`Retrying after ${o}ms (attempt ${n+1}/${this.retryConfig.maxRetries})`),await this.sleep(o),n++}throw i}registerTelemetryHook(e){this.telemetryHooks.add(e)}unregisterTelemetryHook(e){this.telemetryHooks.delete(e)}ensureApplicationError(e,t){if(e instanceof dp.ApplicationError){if(t){let n=e,s={...e.context,...t};return new class extends dp.ApplicationError{constructor(){super(...arguments),this.code=n.code,this.retriable=n.retriable,this.guidance=n.guidance}}(e.message,s)}return e}return new class extends dp.ApplicationError{static{a(this,"UnknownError")}constructor(s,o){super(s,{originalError:o.name,...t}),this.code=Y9.ErrorCode.UNKNOWN_ERROR,this.retriable=!1,this.guidance="An unexpected error occurred"}}(e.message,e)}formatError(e){let t=[];return t.push(`\u274C ${e.name}: ${e.message}`),e.guidance&&t.push(`\u{1F4A1} ${e.guidance}`),e.context&&Object.keys(e.context).length>0&&t.push(`Context: ${JSON.stringify(e.context,null,2)}`),t.join(`
`)}calculateDelay(e){let t=this.retryConfig.initialDelayMs*Math.pow(this.retryConfig.backoffMultiplier,e);return Math.min(t,this.retryConfig.maxDelayMs)}sleep(e){return new Promise(t=>setTimeout(t,e))}callTelemetryHooks(e,...t){for(let i of this.telemetryHooks)try{let n=i[e];n&&n.apply(i,t)}catch(n){console.error("Error in telemetry hook:",n)}}};pu.ApplicationErrorHandler=pp});var mg=y(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.ApplicationErrorHandler=void 0;var Q9=pg();Object.defineProperty(mu,"ApplicationErrorHandler",{enumerable:!0,get:a(function(){return Q9.ApplicationErrorHandler},"get")})});var Mn=y(A=>{"use strict";var J9=A&&A.__createBinding||(Object.create?(function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:a(function(){return e[t]},"get")}),Object.defineProperty(r,i,n)}):(function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]})),hi=A&&A.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&J9(e,r,t)};Object.defineProperty(A,"__esModule",{value:!0});A.FileNotFoundError=A.QueryPlanCache=A.AggregateFunctions=A.BuiltInFunctions=A.SolutionMapping=A.QueryExecutor=A.DescribeExecutor=A.ConstructExecutor=A.UnionExecutor=A.OptionalExecutor=A.FilterExecutor=A.BGPExecutor=A.AlgebraSerializer=A.AlgebraOptimizer=A.AlgebraTranslator=A.SPARQLParseError=A.SPARQLParser=A.NoteToRDFConverter=A.RDFVocabularyMapper=A.InMemoryTripleStore=A.RDFSerializer=A.EffortSortingHelpers=A.MetadataExtractor=A.MetadataHelpers=A.WikiLinkHelpers=A.DateFormatter=A.FrontmatterService=A.URIConstructionService=A.SessionEventService=A.AssetConversionService=A.PlanningService=A.AlgorithmExtractor=A.TaskFrontmatterGenerator=A.FleetingNoteCreationService=A.SupervisionCreationService=A.StatusTimestampService=A.RenameToUidService=A.PropertyCleanupService=A.LoggingService=A.LabelToAliasService=A.FolderRepairService=A.EffortVotingService=A.EffortStatusWorkflow=A.ConceptCreationService=A.ClassCreationService=A.AreaHierarchyBuilder=A.AreaCreationService=A.TaskStatusService=A.ProjectCreationService=A.TaskCreationService=void 0;A.container=A.resetContainer=A.getContainer=A.createChildContainer=A.registerCoreServices=A.DI_TOKENS=A.FileAlreadyExistsError=void 0;hi(Kl(),A);hi(Yl(),A);hi(b1(),A);hi(w1(),A);hi(T1(),A);hi(x1(),A);hi(O1(),A);hi(U1(),A);var X9=mh();Object.defineProperty(A,"TaskCreationService",{enumerable:!0,get:a(function(){return X9.TaskCreationService},"get")});var Z9=yh();Object.defineProperty(A,"ProjectCreationService",{enumerable:!0,get:a(function(){return Z9.ProjectCreationService},"get")});var eA=Sh();Object.defineProperty(A,"TaskStatusService",{enumerable:!0,get:a(function(){return eA.TaskStatusService},"get")});var tA=Eh();Object.defineProperty(A,"AreaCreationService",{enumerable:!0,get:a(function(){return tA.AreaCreationService},"get")});var rA=Ah();Object.defineProperty(A,"AreaHierarchyBuilder",{enumerable:!0,get:a(function(){return rA.AreaHierarchyBuilder},"get")});var iA=Ch();Object.defineProperty(A,"ClassCreationService",{enumerable:!0,get:a(function(){return iA.ClassCreationService},"get")});var nA=Fh();Object.defineProperty(A,"ConceptCreationService",{enumerable:!0,get:a(function(){return nA.ConceptCreationService},"get")});var sA=Sc();Object.defineProperty(A,"EffortStatusWorkflow",{enumerable:!0,get:a(function(){return sA.EffortStatusWorkflow},"get")});var aA=Dh();Object.defineProperty(A,"EffortVotingService",{enumerable:!0,get:a(function(){return aA.EffortVotingService},"get")});var oA=Ih();Object.defineProperty(A,"FolderRepairService",{enumerable:!0,get:a(function(){return oA.FolderRepairService},"get")});var cA=kh();Object.defineProperty(A,"LabelToAliasService",{enumerable:!0,get:a(function(){return cA.LabelToAliasService},"get")});var uA=jh();Object.defineProperty(A,"LoggingService",{enumerable:!0,get:a(function(){return uA.LoggingService},"get")});var lA=qh();Object.defineProperty(A,"PropertyCleanupService",{enumerable:!0,get:a(function(){return lA.PropertyCleanupService},"get")});var fA=Uh();Object.defineProperty(A,"RenameToUidService",{enumerable:!0,get:a(function(){return fA.RenameToUidService},"get")});var hA=wc();Object.defineProperty(A,"StatusTimestampService",{enumerable:!0,get:a(function(){return hA.StatusTimestampService},"get")});var dA=$h();Object.defineProperty(A,"SupervisionCreationService",{enumerable:!0,get:a(function(){return dA.SupervisionCreationService},"get")});var pA=Wh();Object.defineProperty(A,"FleetingNoteCreationService",{enumerable:!0,get:a(function(){return pA.FleetingNoteCreationService},"get")});var mA=mc();Object.defineProperty(A,"TaskFrontmatterGenerator",{enumerable:!0,get:a(function(){return mA.TaskFrontmatterGenerator},"get")});var gA=gc();Object.defineProperty(A,"AlgorithmExtractor",{enumerable:!0,get:a(function(){return gA.AlgorithmExtractor},"get")});var yA=zh();Object.defineProperty(A,"PlanningService",{enumerable:!0,get:a(function(){return yA.PlanningService},"get")});var _A=Yh();Object.defineProperty(A,"AssetConversionService",{enumerable:!0,get:a(function(){return _A.AssetConversionService},"get")});var vA=Jh();Object.defineProperty(A,"SessionEventService",{enumerable:!0,get:a(function(){return vA.SessionEventService},"get")});var bA=Zh();Object.defineProperty(A,"URIConstructionService",{enumerable:!0,get:a(function(){return bA.URIConstructionService},"get")});var SA=ls();Object.defineProperty(A,"FrontmatterService",{enumerable:!0,get:a(function(){return SA.FrontmatterService},"get")});var wA=ur();Object.defineProperty(A,"DateFormatter",{enumerable:!0,get:a(function(){return wA.DateFormatter},"get")});var EA=wn();Object.defineProperty(A,"WikiLinkHelpers",{enumerable:!0,get:a(function(){return EA.WikiLinkHelpers},"get")});var TA=Fr();Object.defineProperty(A,"MetadataHelpers",{enumerable:!0,get:a(function(){return TA.MetadataHelpers},"get")});var AA=ma();Object.defineProperty(A,"MetadataExtractor",{enumerable:!0,get:a(function(){return AA.MetadataExtractor},"get")});var xA=m0();Object.defineProperty(A,"EffortSortingHelpers",{enumerable:!0,get:a(function(){return xA.EffortSortingHelpers},"get")});var CA=w0();Object.defineProperty(A,"RDFSerializer",{enumerable:!0,get:a(function(){return CA.RDFSerializer},"get")});var OA=T0();Object.defineProperty(A,"InMemoryTripleStore",{enumerable:!0,get:a(function(){return OA.InMemoryTripleStore},"get")});var FA=x0();Object.defineProperty(A,"RDFVocabularyMapper",{enumerable:!0,get:a(function(){return FA.RDFVocabularyMapper},"get")});var PA=bd();Object.defineProperty(A,"NoteToRDFConverter",{enumerable:!0,get:a(function(){return PA.NoteToRDFConverter},"get")});var gg=$0();Object.defineProperty(A,"SPARQLParser",{enumerable:!0,get:a(function(){return gg.SPARQLParser},"get")});Object.defineProperty(A,"SPARQLParseError",{enumerable:!0,get:a(function(){return gg.SPARQLParseError},"get")});var DA=G0();Object.defineProperty(A,"AlgebraTranslator",{enumerable:!0,get:a(function(){return DA.AlgebraTranslator},"get")});var RA=W0();Object.defineProperty(A,"AlgebraOptimizer",{enumerable:!0,get:a(function(){return RA.AlgebraOptimizer},"get")});var IA=H0();Object.defineProperty(A,"AlgebraSerializer",{enumerable:!0,get:a(function(){return IA.AlgebraSerializer},"get")});var NA=qd();Object.defineProperty(A,"BGPExecutor",{enumerable:!0,get:a(function(){return NA.BGPExecutor},"get")});var kA=Wd();Object.defineProperty(A,"FilterExecutor",{enumerable:!0,get:a(function(){return kA.FilterExecutor},"get")});var jA=zd();Object.defineProperty(A,"OptionalExecutor",{enumerable:!0,get:a(function(){return jA.OptionalExecutor},"get")});var MA=Yd();Object.defineProperty(A,"UnionExecutor",{enumerable:!0,get:a(function(){return MA.UnionExecutor},"get")});var LA=Q0();Object.defineProperty(A,"ConstructExecutor",{enumerable:!0,get:a(function(){return LA.ConstructExecutor},"get")});var qA=J0();Object.defineProperty(A,"DescribeExecutor",{enumerable:!0,get:a(function(){return qA.DescribeExecutor},"get")});var VA=Z0();Object.defineProperty(A,"QueryExecutor",{enumerable:!0,get:a(function(){return VA.QueryExecutor},"get")});var UA=Yc();Object.defineProperty(A,"SolutionMapping",{enumerable:!0,get:a(function(){return UA.SolutionMapping},"get")});var BA=Bd();Object.defineProperty(A,"BuiltInFunctions",{enumerable:!0,get:a(function(){return BA.BuiltInFunctions},"get")});var $A=tg();Object.defineProperty(A,"AggregateFunctions",{enumerable:!0,get:a(function(){return $A.AggregateFunctions},"get")});var GA=rg();Object.defineProperty(A,"QueryPlanCache",{enumerable:!0,get:a(function(){return GA.QueryPlanCache},"get")});var yg=ig();Object.defineProperty(A,"FileNotFoundError",{enumerable:!0,get:a(function(){return yg.FileNotFoundError},"get")});Object.defineProperty(A,"FileAlreadyExistsError",{enumerable:!0,get:a(function(){return yg.FileAlreadyExistsError},"get")});var WA=Xe();Object.defineProperty(A,"DI_TOKENS",{enumerable:!0,get:a(function(){return WA.DI_TOKENS},"get")});var Aa=ng();Object.defineProperty(A,"registerCoreServices",{enumerable:!0,get:a(function(){return Aa.registerCoreServices},"get")});Object.defineProperty(A,"createChildContainer",{enumerable:!0,get:a(function(){return Aa.createChildContainer},"get")});Object.defineProperty(A,"getContainer",{enumerable:!0,get:a(function(){return Aa.getContainer},"get")});Object.defineProperty(A,"resetContainer",{enumerable:!0,get:a(function(){return Aa.resetContainer},"get")});Object.defineProperty(A,"container",{enumerable:!0,get:a(function(){return Aa.container},"get")});hi(dg(),A);hi(mg(),A)});var yt=y(mp=>{"use strict";mp.fromCallback=function(r){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")r.apply(this,e);else return new Promise((t,i)=>{e.push((n,s)=>n!=null?i(n):t(s)),r.apply(this,e)})},"name",{value:r.name})};mp.fromPromise=function(r){return Object.defineProperty(function(...e){let t=e[e.length-1];if(typeof t!="function")return r.apply(this,e);e.pop(),r.apply(this,e).then(i=>t(null,i),t)},"name",{value:r.name})}});var vg=y((Sk,_g)=>{var Zi=require("constants"),HA=process.cwd,gu=null,zA=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return gu||(gu=HA.call(process)),gu};try{process.cwd()}catch{}typeof process.chdir=="function"&&(gp=process.chdir,process.chdir=function(r){gu=null,gp.call(process,r)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,gp));var gp;_g.exports=KA;function KA(r){Zi.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(r),r.lutimes||t(r),r.chown=s(r.chown),r.fchown=s(r.fchown),r.lchown=s(r.lchown),r.chmod=i(r.chmod),r.fchmod=i(r.fchmod),r.lchmod=i(r.lchmod),r.chownSync=o(r.chownSync),r.fchownSync=o(r.fchownSync),r.lchownSync=o(r.lchownSync),r.chmodSync=n(r.chmodSync),r.fchmodSync=n(r.fchmodSync),r.lchmodSync=n(r.lchmodSync),r.stat=c(r.stat),r.fstat=c(r.fstat),r.lstat=c(r.lstat),r.statSync=u(r.statSync),r.fstatSync=u(r.fstatSync),r.lstatSync=u(r.lstatSync),r.chmod&&!r.lchmod&&(r.lchmod=function(l,h,p){p&&process.nextTick(p)},r.lchmodSync=function(){}),r.chown&&!r.lchown&&(r.lchown=function(l,h,p,g){g&&process.nextTick(g)},r.lchownSync=function(){}),zA==="win32"&&(r.rename=typeof r.rename!="function"?r.rename:(function(l){function h(p,g,v){var S=Date.now(),x=0;l(p,g,a(function F(D){if(D&&(D.code==="EACCES"||D.code==="EPERM"||D.code==="EBUSY")&&Date.now()-S<6e4){setTimeout(function(){r.stat(g,function(U,G){U&&U.code==="ENOENT"?l(p,g,F):v(D)})},x),x<100&&(x+=10);return}v&&v(D)},"CB"))}return a(h,"rename"),Object.setPrototypeOf&&Object.setPrototypeOf(h,l),h})(r.rename)),r.read=typeof r.read!="function"?r.read:(function(l){function h(p,g,v,S,x,F){var D;if(F&&typeof F=="function"){var U=0;D=a(function(G,ee,Fe){if(G&&G.code==="EAGAIN"&&U<10)return U++,l.call(r,p,g,v,S,x,D);F.apply(this,arguments)},"callback")}return l.call(r,p,g,v,S,x,D)}return a(h,"read"),Object.setPrototypeOf&&Object.setPrototypeOf(h,l),h})(r.read),r.readSync=typeof r.readSync!="function"?r.readSync:(function(l){return function(h,p,g,v,S){for(var x=0;;)try{return l.call(r,h,p,g,v,S)}catch(F){if(F.code==="EAGAIN"&&x<10){x++;continue}throw F}}})(r.readSync);function e(l){l.lchmod=function(h,p,g){l.open(h,Zi.O_WRONLY|Zi.O_SYMLINK,p,function(v,S){if(v){g&&g(v);return}l.fchmod(S,p,function(x){l.close(S,function(F){g&&g(x||F)})})})},l.lchmodSync=function(h,p){var g=l.openSync(h,Zi.O_WRONLY|Zi.O_SYMLINK,p),v=!0,S;try{S=l.fchmodSync(g,p),v=!1}finally{if(v)try{l.closeSync(g)}catch{}else l.closeSync(g)}return S}}a(e,"patchLchmod");function t(l){Zi.hasOwnProperty("O_SYMLINK")&&l.futimes?(l.lutimes=function(h,p,g,v){l.open(h,Zi.O_SYMLINK,function(S,x){if(S){v&&v(S);return}l.futimes(x,p,g,function(F){l.close(x,function(D){v&&v(F||D)})})})},l.lutimesSync=function(h,p,g){var v=l.openSync(h,Zi.O_SYMLINK),S,x=!0;try{S=l.futimesSync(v,p,g),x=!1}finally{if(x)try{l.closeSync(v)}catch{}else l.closeSync(v)}return S}):l.futimes&&(l.lutimes=function(h,p,g,v){v&&process.nextTick(v)},l.lutimesSync=function(){})}a(t,"patchLutimes");function i(l){return l&&function(h,p,g){return l.call(r,h,p,function(v){f(v)&&(v=null),g&&g.apply(this,arguments)})}}a(i,"chmodFix");function n(l){return l&&function(h,p){try{return l.call(r,h,p)}catch(g){if(!f(g))throw g}}}a(n,"chmodFixSync");function s(l){return l&&function(h,p,g,v){return l.call(r,h,p,g,function(S){f(S)&&(S=null),v&&v.apply(this,arguments)})}}a(s,"chownFix");function o(l){return l&&function(h,p,g){try{return l.call(r,h,p,g)}catch(v){if(!f(v))throw v}}}a(o,"chownFixSync");function c(l){return l&&function(h,p,g){typeof p=="function"&&(g=p,p=null);function v(S,x){x&&(x.uid<0&&(x.uid+=4294967296),x.gid<0&&(x.gid+=4294967296)),g&&g.apply(this,arguments)}return a(v,"callback"),p?l.call(r,h,p,v):l.call(r,h,v)}}a(c,"statFix");function u(l){return l&&function(h,p){var g=p?l.call(r,h,p):l.call(r,h);return g&&(g.uid<0&&(g.uid+=4294967296),g.gid<0&&(g.gid+=4294967296)),g}}a(u,"statFixSync");function f(l){if(!l||l.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(l.code==="EINVAL"||l.code==="EPERM"))}a(f,"chownErOk")}a(KA,"patch")});var wg=y((Ek,Sg)=>{var bg=require("stream").Stream;Sg.exports=YA;function YA(r){return{ReadStream:e,WriteStream:t};function e(i,n){if(!(this instanceof e))return new e(i,n);bg.call(this);var s=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,n=n||{};for(var o=Object.keys(n),c=0,u=o.length;c<u;c++){var f=o[c];this[f]=n[f]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}r.open(this.path,this.flags,this.mode,function(l,h){if(l){s.emit("error",l),s.readable=!1;return}s.fd=h,s.emit("open",h),s._read()})}function t(i,n){if(!(this instanceof t))return new t(i,n);bg.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var s=Object.keys(n),o=0,c=s.length;o<c;o++){var u=s[o];this[u]=n[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=r.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}a(YA,"legacy")});var Tg=y((Ak,Eg)=>{"use strict";Eg.exports=JA;var QA=Object.getPrototypeOf||function(r){return r.__proto__};function JA(r){if(r===null||typeof r!="object")return r;if(r instanceof Object)var e={__proto__:QA(r)};else var e=Object.create(null);return Object.getOwnPropertyNames(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}a(JA,"clone")});var xs=y((Ck,vp)=>{var et=require("fs"),XA=vg(),ZA=wg(),ex=Tg(),yu=require("util"),Ct,vu;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Ct=Symbol.for("graceful-fs.queue"),vu=Symbol.for("graceful-fs.previous")):(Ct="___graceful-fs.queue",vu="___graceful-fs.previous");function tx(){}a(tx,"noop");function Cg(r,e){Object.defineProperty(r,Ct,{get:a(function(){return e},"get")})}a(Cg,"publishQueue");var Ln=tx;yu.debuglog?Ln=yu.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Ln=a(function(){var r=yu.format.apply(yu,arguments);r="GFS4: "+r.split(/\n/).join(`
GFS4: `),console.error(r)},"debug"));et[Ct]||(Ag=global[Ct]||[],Cg(et,Ag),et.close=(function(r){function e(t,i){return r.call(et,t,function(n){n||xg(),typeof i=="function"&&i.apply(this,arguments)})}return a(e,"close"),Object.defineProperty(e,vu,{value:r}),e})(et.close),et.closeSync=(function(r){function e(t){r.apply(et,arguments),xg()}return a(e,"closeSync"),Object.defineProperty(e,vu,{value:r}),e})(et.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Ln(et[Ct]),require("assert").equal(et[Ct].length,0)}));var Ag;global[Ct]||Cg(global,et[Ct]);vp.exports=yp(ex(et));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!et.__patched&&(vp.exports=yp(et),et.__patched=!0);function yp(r){XA(r),r.gracefulify=yp,r.createReadStream=ee,r.createWriteStream=Fe;var e=r.readFile;r.readFile=t;function t(V,oe,xe){return typeof oe=="function"&&(xe=oe,oe=null),Qe(V,oe,xe);function Qe(Be,We,Pe,Re){return e(Be,We,function(Oe){Oe&&(Oe.code==="EMFILE"||Oe.code==="ENFILE")?As([Qe,[Be,We,Pe],Oe,Re||Date.now(),Date.now()]):typeof Pe=="function"&&Pe.apply(this,arguments)})}a(Qe,"go$readFile")}a(t,"readFile");var i=r.writeFile;r.writeFile=n;function n(V,oe,xe,Qe){return typeof xe=="function"&&(Qe=xe,xe=null),Be(V,oe,xe,Qe);function Be(We,Pe,Re,Oe,$){return i(We,Pe,Re,function(I){I&&(I.code==="EMFILE"||I.code==="ENFILE")?As([Be,[We,Pe,Re,Oe],I,$||Date.now(),Date.now()]):typeof Oe=="function"&&Oe.apply(this,arguments)})}a(Be,"go$writeFile")}a(n,"writeFile");var s=r.appendFile;s&&(r.appendFile=o);function o(V,oe,xe,Qe){return typeof xe=="function"&&(Qe=xe,xe=null),Be(V,oe,xe,Qe);function Be(We,Pe,Re,Oe,$){return s(We,Pe,Re,function(I){I&&(I.code==="EMFILE"||I.code==="ENFILE")?As([Be,[We,Pe,Re,Oe],I,$||Date.now(),Date.now()]):typeof Oe=="function"&&Oe.apply(this,arguments)})}a(Be,"go$appendFile")}a(o,"appendFile");var c=r.copyFile;c&&(r.copyFile=u);function u(V,oe,xe,Qe){return typeof xe=="function"&&(Qe=xe,xe=0),Be(V,oe,xe,Qe);function Be(We,Pe,Re,Oe,$){return c(We,Pe,Re,function(I){I&&(I.code==="EMFILE"||I.code==="ENFILE")?As([Be,[We,Pe,Re,Oe],I,$||Date.now(),Date.now()]):typeof Oe=="function"&&Oe.apply(this,arguments)})}a(Be,"go$copyFile")}a(u,"copyFile");var f=r.readdir;r.readdir=h;var l=/^v[0-5]\./;function h(V,oe,xe){typeof oe=="function"&&(xe=oe,oe=null);var Qe=l.test(process.version)?a(function(Pe,Re,Oe,$){return f(Pe,Be(Pe,Re,Oe,$))},"go$readdir"):a(function(Pe,Re,Oe,$){return f(Pe,Re,Be(Pe,Re,Oe,$))},"go$readdir");return Qe(V,oe,xe);function Be(We,Pe,Re,Oe){return function($,I){$&&($.code==="EMFILE"||$.code==="ENFILE")?As([Qe,[We,Pe,Re],$,Oe||Date.now(),Date.now()]):(I&&I.sort&&I.sort(),typeof Re=="function"&&Re.call(this,$,I))}}}if(a(h,"readdir"),process.version.substr(0,4)==="v0.8"){var p=ZA(r);F=p.ReadStream,U=p.WriteStream}var g=r.ReadStream;g&&(F.prototype=Object.create(g.prototype),F.prototype.open=D);var v=r.WriteStream;v&&(U.prototype=Object.create(v.prototype),U.prototype.open=G),Object.defineProperty(r,"ReadStream",{get:a(function(){return F},"get"),set:a(function(V){F=V},"set"),enumerable:!0,configurable:!0}),Object.defineProperty(r,"WriteStream",{get:a(function(){return U},"get"),set:a(function(V){U=V},"set"),enumerable:!0,configurable:!0});var S=F;Object.defineProperty(r,"FileReadStream",{get:a(function(){return S},"get"),set:a(function(V){S=V},"set"),enumerable:!0,configurable:!0});var x=U;Object.defineProperty(r,"FileWriteStream",{get:a(function(){return x},"get"),set:a(function(V){x=V},"set"),enumerable:!0,configurable:!0});function F(V,oe){return this instanceof F?(g.apply(this,arguments),this):F.apply(Object.create(F.prototype),arguments)}a(F,"ReadStream");function D(){var V=this;dt(V.path,V.flags,V.mode,function(oe,xe){oe?(V.autoClose&&V.destroy(),V.emit("error",oe)):(V.fd=xe,V.emit("open",xe),V.read())})}a(D,"ReadStream$open");function U(V,oe){return this instanceof U?(v.apply(this,arguments),this):U.apply(Object.create(U.prototype),arguments)}a(U,"WriteStream");function G(){var V=this;dt(V.path,V.flags,V.mode,function(oe,xe){oe?(V.destroy(),V.emit("error",oe)):(V.fd=xe,V.emit("open",xe))})}a(G,"WriteStream$open");function ee(V,oe){return new r.ReadStream(V,oe)}a(ee,"createReadStream");function Fe(V,oe){return new r.WriteStream(V,oe)}a(Fe,"createWriteStream");var it=r.open;r.open=dt;function dt(V,oe,xe,Qe){return typeof xe=="function"&&(Qe=xe,xe=null),Be(V,oe,xe,Qe);function Be(We,Pe,Re,Oe,$){return it(We,Pe,Re,function(I,Ie){I&&(I.code==="EMFILE"||I.code==="ENFILE")?As([Be,[We,Pe,Re,Oe],I,$||Date.now(),Date.now()]):typeof Oe=="function"&&Oe.apply(this,arguments)})}a(Be,"go$open")}return a(dt,"open"),r}a(yp,"patch");function As(r){Ln("ENQUEUE",r[0].name,r[1]),et[Ct].push(r),_p()}a(As,"enqueue");var _u;function xg(){for(var r=Date.now(),e=0;e<et[Ct].length;++e)et[Ct][e].length>2&&(et[Ct][e][3]=r,et[Ct][e][4]=r);_p()}a(xg,"resetQueue");function _p(){if(clearTimeout(_u),_u=void 0,et[Ct].length!==0){var r=et[Ct].shift(),e=r[0],t=r[1],i=r[2],n=r[3],s=r[4];if(n===void 0)Ln("RETRY",e.name,t),e.apply(null,t);else if(Date.now()-n>=6e4){Ln("TIMEOUT",e.name,t);var o=t.pop();typeof o=="function"&&o.call(null,i)}else{var c=Date.now()-s,u=Math.max(s-n,1),f=Math.min(u*1.2,100);c>=f?(Ln("RETRY",e.name,t),e.apply(null,t.concat([n]))):et[Ct].push(r)}_u===void 0&&(_u=setTimeout(_p,0))}}a(_p,"retry")});var Ht=y(ji=>{"use strict";var Og=yt().fromCallback,Wt=xs(),rx=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(r=>typeof Wt[r]=="function");Object.assign(ji,Wt);rx.forEach(r=>{ji[r]=Og(Wt[r])});ji.exists=function(r,e){return typeof e=="function"?Wt.exists(r,e):new Promise(t=>Wt.exists(r,t))};ji.read=function(r,e,t,i,n,s){return typeof s=="function"?Wt.read(r,e,t,i,n,s):new Promise((o,c)=>{Wt.read(r,e,t,i,n,(u,f,l)=>{if(u)return c(u);o({bytesRead:f,buffer:l})})})};ji.write=function(r,e,...t){return typeof t[t.length-1]=="function"?Wt.write(r,e,...t):new Promise((i,n)=>{Wt.write(r,e,...t,(s,o,c)=>{if(s)return n(s);i({bytesWritten:o,buffer:c})})})};ji.readv=function(r,e,...t){return typeof t[t.length-1]=="function"?Wt.readv(r,e,...t):new Promise((i,n)=>{Wt.readv(r,e,...t,(s,o,c)=>{if(s)return n(s);i({bytesRead:o,buffers:c})})})};ji.writev=function(r,e,...t){return typeof t[t.length-1]=="function"?Wt.writev(r,e,...t):new Promise((i,n)=>{Wt.writev(r,e,...t,(s,o,c)=>{if(s)return n(s);i({bytesWritten:o,buffers:c})})})};typeof Wt.realpath.native=="function"?ji.realpath.native=Og(Wt.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var Pg=y((Pk,Fg)=>{"use strict";var ix=require("path");Fg.exports.checkPath=a(function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(ix.parse(e).root,""))){let i=new Error(`Path contains invalid characters: ${e}`);throw i.code="EINVAL",i}},"checkPath")});var Ng=y((Rk,bp)=>{"use strict";var Dg=Ht(),{checkPath:Rg}=Pg(),Ig=a(r=>{let e={mode:511};return typeof r=="number"?r:{...e,...r}.mode},"getMode");bp.exports.makeDir=async(r,e)=>(Rg(r),Dg.mkdir(r,{mode:Ig(e),recursive:!0}));bp.exports.makeDirSync=(r,e)=>(Rg(r),Dg.mkdirSync(r,{mode:Ig(e),recursive:!0}))});var Yr=y((Nk,kg)=>{"use strict";var nx=yt().fromPromise,{makeDir:sx,makeDirSync:Sp}=Ng(),wp=nx(sx);kg.exports={mkdirs:wp,mkdirsSync:Sp,mkdirp:wp,mkdirpSync:Sp,ensureDir:wp,ensureDirSync:Sp}});var en=y((kk,Mg)=>{"use strict";var ax=yt().fromPromise,jg=Ht();function ox(r){return jg.access(r).then(()=>!0).catch(()=>!1)}a(ox,"pathExists");Mg.exports={pathExists:ax(ox),pathExistsSync:jg.existsSync}});var Ep=y((Mk,Lg)=>{"use strict";var Cs=Ht(),cx=yt().fromPromise;async function ux(r,e,t){let i=await Cs.open(r,"r+"),n=null;try{await Cs.futimes(i,e,t)}finally{try{await Cs.close(i)}catch(s){n=s}}if(n)throw n}a(ux,"utimesMillis");function lx(r,e,t){let i=Cs.openSync(r,"r+");return Cs.futimesSync(i,e,t),Cs.closeSync(i)}a(lx,"utimesMillisSync");Lg.exports={utimesMillis:cx(ux),utimesMillisSync:lx}});var qn=y((qk,Bg)=>{"use strict";var Os=Ht(),_t=require("path"),qg=yt().fromPromise;function fx(r,e,t){let i=t.dereference?n=>Os.stat(n,{bigint:!0}):n=>Os.lstat(n,{bigint:!0});return Promise.all([i(r),i(e).catch(n=>{if(n.code==="ENOENT")return null;throw n})]).then(([n,s])=>({srcStat:n,destStat:s}))}a(fx,"getStats");function hx(r,e,t){let i,n=t.dereference?o=>Os.statSync(o,{bigint:!0}):o=>Os.lstatSync(o,{bigint:!0}),s=n(r);try{i=n(e)}catch(o){if(o.code==="ENOENT")return{srcStat:s,destStat:null};throw o}return{srcStat:s,destStat:i}}a(hx,"getStatsSync");async function dx(r,e,t,i){let{srcStat:n,destStat:s}=await fx(r,e,i);if(s){if(xa(n,s)){let o=_t.basename(r),c=_t.basename(e);if(t==="move"&&o!==c&&o.toLowerCase()===c.toLowerCase())return{srcStat:n,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${r}'.`);if(!n.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${r}'.`)}if(n.isDirectory()&&Tp(r,e))throw new Error(bu(r,e,t));return{srcStat:n,destStat:s}}a(dx,"checkPaths");function px(r,e,t,i){let{srcStat:n,destStat:s}=hx(r,e,i);if(s){if(xa(n,s)){let o=_t.basename(r),c=_t.basename(e);if(t==="move"&&o!==c&&o.toLowerCase()===c.toLowerCase())return{srcStat:n,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${r}'.`);if(!n.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${r}'.`)}if(n.isDirectory()&&Tp(r,e))throw new Error(bu(r,e,t));return{srcStat:n,destStat:s}}a(px,"checkPathsSync");async function Vg(r,e,t,i){let n=_t.resolve(_t.dirname(r)),s=_t.resolve(_t.dirname(t));if(s===n||s===_t.parse(s).root)return;let o;try{o=await Os.stat(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(xa(e,o))throw new Error(bu(r,t,i));return Vg(r,e,s,i)}a(Vg,"checkParentPaths");function Ug(r,e,t,i){let n=_t.resolve(_t.dirname(r)),s=_t.resolve(_t.dirname(t));if(s===n||s===_t.parse(s).root)return;let o;try{o=Os.statSync(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(xa(e,o))throw new Error(bu(r,t,i));return Ug(r,e,s,i)}a(Ug,"checkParentPathsSync");function xa(r,e){return e.ino!==void 0&&e.dev!==void 0&&e.ino===r.ino&&e.dev===r.dev}a(xa,"areIdentical");function Tp(r,e){let t=_t.resolve(r).split(_t.sep).filter(n=>n),i=_t.resolve(e).split(_t.sep).filter(n=>n);return t.every((n,s)=>i[s]===n)}a(Tp,"isSrcSubdir");function bu(r,e,t){return`Cannot ${t} '${r}' to a subdirectory of itself, '${e}'.`}a(bu,"errMsg");Bg.exports={checkPaths:qg(dx),checkPathsSync:px,checkParentPaths:qg(Vg),checkParentPathsSync:Ug,isSrcSubdir:Tp,areIdentical:xa}});var Gg=y((Uk,$g)=>{"use strict";async function mx(r,e){let t=[];for await(let i of r)t.push(e(i).then(()=>null,n=>n??new Error("unknown error")));await Promise.all(t.map(i=>i.then(n=>{if(n!==null)throw n})))}a(mx,"asyncIteratorConcurrentProcess");$g.exports={asyncIteratorConcurrentProcess:mx}});var Yg=y(($k,Kg)=>{"use strict";var It=Ht(),Ca=require("path"),{mkdirs:gx}=Yr(),{pathExists:yx}=en(),{utimesMillis:_x}=Ep(),Oa=qn(),{asyncIteratorConcurrentProcess:vx}=Gg();async function bx(r,e,t={}){typeof t=="function"&&(t={filter:t}),t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:i,destStat:n}=await Oa.checkPaths(r,e,"copy",t);if(await Oa.checkParentPaths(r,i,e,"copy"),!await Hg(r,e,t))return;let o=Ca.dirname(e);await yx(o)||await gx(o),await zg(n,r,e,t)}a(bx,"copy");async function Hg(r,e,t){return t.filter?t.filter(r,e):!0}a(Hg,"runFilter");async function zg(r,e,t,i){let s=await(i.dereference?It.stat:It.lstat)(e);if(s.isDirectory())return Tx(s,r,e,t,i);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return Sx(s,r,e,t,i);if(s.isSymbolicLink())return Ax(r,e,t,i);throw s.isSocket()?new Error(`Cannot copy a socket file: ${e}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}a(zg,"getStatsAndPerformCopy");async function Sx(r,e,t,i,n){if(!e)return Wg(r,t,i,n);if(n.overwrite)return await It.unlink(i),Wg(r,t,i,n);if(n.errorOnExist)throw new Error(`'${i}' already exists`)}a(Sx,"onFile");async function Wg(r,e,t,i){if(await It.copyFile(e,t),i.preserveTimestamps){wx(r.mode)&&await Ex(t,r.mode);let n=await It.stat(e);await _x(t,n.atime,n.mtime)}return It.chmod(t,r.mode)}a(Wg,"copyFile");function wx(r){return(r&128)===0}a(wx,"fileIsNotWritable");function Ex(r,e){return It.chmod(r,e|128)}a(Ex,"makeFileWritable");async function Tx(r,e,t,i,n){e||await It.mkdir(i),await vx(await It.opendir(t),async s=>{let o=Ca.join(t,s.name),c=Ca.join(i,s.name);if(await Hg(o,c,n)){let{destStat:f}=await Oa.checkPaths(o,c,"copy",n);await zg(f,o,c,n)}}),e||await It.chmod(i,r.mode)}a(Tx,"onDir");async function Ax(r,e,t,i){let n=await It.readlink(e);if(i.dereference&&(n=Ca.resolve(process.cwd(),n)),!r)return It.symlink(n,t);let s=null;try{s=await It.readlink(t)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return It.symlink(n,t);throw o}if(i.dereference&&(s=Ca.resolve(process.cwd(),s)),Oa.isSrcSubdir(n,s))throw new Error(`Cannot copy '${n}' to a subdirectory of itself, '${s}'.`);if(Oa.isSrcSubdir(s,n))throw new Error(`Cannot overwrite '${s}' with '${n}'.`);return await It.unlink(t),It.symlink(n,t)}a(Ax,"onLink");Kg.exports=bx});var ey=y((Wk,Zg)=>{"use strict";var zt=xs(),Fa=require("path"),xx=Yr().mkdirsSync,Cx=Ep().utimesMillisSync,Pa=qn();function Ox(r,e,t){typeof t=="function"&&(t={filter:t}),t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:i,destStat:n}=Pa.checkPathsSync(r,e,"copy",t);if(Pa.checkParentPathsSync(r,i,e,"copy"),t.filter&&!t.filter(r,e))return;let s=Fa.dirname(e);return zt.existsSync(s)||xx(s),Qg(n,r,e,t)}a(Ox,"copySync");function Qg(r,e,t,i){let s=(i.dereference?zt.statSync:zt.lstatSync)(e);if(s.isDirectory())return kx(s,r,e,t,i);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return Fx(s,r,e,t,i);if(s.isSymbolicLink())return Lx(r,e,t,i);throw s.isSocket()?new Error(`Cannot copy a socket file: ${e}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}a(Qg,"getStats");function Fx(r,e,t,i,n){return e?Px(r,t,i,n):Jg(r,t,i,n)}a(Fx,"onFile");function Px(r,e,t,i){if(i.overwrite)return zt.unlinkSync(t),Jg(r,e,t,i);if(i.errorOnExist)throw new Error(`'${t}' already exists`)}a(Px,"mayCopyFile");function Jg(r,e,t,i){return zt.copyFileSync(e,t),i.preserveTimestamps&&Dx(r.mode,e,t),Ap(t,r.mode)}a(Jg,"copyFile");function Dx(r,e,t){return Rx(r)&&Ix(t,r),Nx(e,t)}a(Dx,"handleTimestamps");function Rx(r){return(r&128)===0}a(Rx,"fileIsNotWritable");function Ix(r,e){return Ap(r,e|128)}a(Ix,"makeFileWritable");function Ap(r,e){return zt.chmodSync(r,e)}a(Ap,"setDestMode");function Nx(r,e){let t=zt.statSync(r);return Cx(e,t.atime,t.mtime)}a(Nx,"setDestTimestamps");function kx(r,e,t,i,n){return e?Xg(t,i,n):jx(r.mode,t,i,n)}a(kx,"onDir");function jx(r,e,t,i){return zt.mkdirSync(t),Xg(e,t,i),Ap(t,r)}a(jx,"mkDirAndCopy");function Xg(r,e,t){let i=zt.opendirSync(r);try{let n;for(;(n=i.readSync())!==null;)Mx(n.name,r,e,t)}finally{i.closeSync()}}a(Xg,"copyDir");function Mx(r,e,t,i){let n=Fa.join(e,r),s=Fa.join(t,r);if(i.filter&&!i.filter(n,s))return;let{destStat:o}=Pa.checkPathsSync(n,s,"copy",i);return Qg(o,n,s,i)}a(Mx,"copyDirItem");function Lx(r,e,t,i){let n=zt.readlinkSync(e);if(i.dereference&&(n=Fa.resolve(process.cwd(),n)),r){let s;try{s=zt.readlinkSync(t)}catch(o){if(o.code==="EINVAL"||o.code==="UNKNOWN")return zt.symlinkSync(n,t);throw o}if(i.dereference&&(s=Fa.resolve(process.cwd(),s)),Pa.isSrcSubdir(n,s))throw new Error(`Cannot copy '${n}' to a subdirectory of itself, '${s}'.`);if(Pa.isSrcSubdir(s,n))throw new Error(`Cannot overwrite '${s}' with '${n}'.`);return qx(n,t)}else return zt.symlinkSync(n,t)}a(Lx,"onLink");function qx(r,e){return zt.unlinkSync(e),zt.symlinkSync(r,e)}a(qx,"copyLink");Zg.exports=Ox});var Su=y((zk,ty)=>{"use strict";var Vx=yt().fromPromise;ty.exports={copy:Vx(Yg()),copySync:ey()}});var Da=y((Kk,iy)=>{"use strict";var ry=xs(),Ux=yt().fromCallback;function Bx(r,e){ry.rm(r,{recursive:!0,force:!0},e)}a(Bx,"remove");function $x(r){ry.rmSync(r,{recursive:!0,force:!0})}a($x,"removeSync");iy.exports={remove:Ux(Bx),removeSync:$x}});var fy=y((Qk,ly)=>{"use strict";var Gx=yt().fromPromise,ay=Ht(),oy=require("path"),cy=Yr(),uy=Da(),ny=Gx(a(async function(e){let t;try{t=await ay.readdir(e)}catch{return cy.mkdirs(e)}return Promise.all(t.map(i=>uy.remove(oy.join(e,i))))},"emptyDir"));function sy(r){let e;try{e=ay.readdirSync(r)}catch{return cy.mkdirsSync(r)}e.forEach(t=>{t=oy.join(r,t),uy.removeSync(t)})}a(sy,"emptyDirSync");ly.exports={emptyDirSync:sy,emptydirSync:sy,emptyDir:ny,emptydir:ny}});var my=y((Xk,py)=>{"use strict";var Wx=yt().fromPromise,hy=require("path"),Mi=Ht(),dy=Yr();async function Hx(r){let e;try{e=await Mi.stat(r)}catch{}if(e&&e.isFile())return;let t=hy.dirname(r),i=null;try{i=await Mi.stat(t)}catch(n){if(n.code==="ENOENT"){await dy.mkdirs(t),await Mi.writeFile(r,"");return}else throw n}i.isDirectory()?await Mi.writeFile(r,""):await Mi.readdir(t)}a(Hx,"createFile");function zx(r){let e;try{e=Mi.statSync(r)}catch{}if(e&&e.isFile())return;let t=hy.dirname(r);try{Mi.statSync(t).isDirectory()||Mi.readdirSync(t)}catch(i){if(i&&i.code==="ENOENT")dy.mkdirsSync(t);else throw i}Mi.writeFileSync(r,"")}a(zx,"createFileSync");py.exports={createFile:Wx(Hx),createFileSync:zx}});var by=y((ej,vy)=>{"use strict";var Kx=yt().fromPromise,gy=require("path"),tn=Ht(),yy=Yr(),{pathExists:Yx}=en(),{areIdentical:_y}=qn();async function Qx(r,e){let t;try{t=await tn.lstat(e)}catch{}let i;try{i=await tn.lstat(r)}catch(o){throw o.message=o.message.replace("lstat","ensureLink"),o}if(t&&_y(i,t))return;let n=gy.dirname(e);await Yx(n)||await yy.mkdirs(n),await tn.link(r,e)}a(Qx,"createLink");function Jx(r,e){let t;try{t=tn.lstatSync(e)}catch{}try{let s=tn.lstatSync(r);if(t&&_y(s,t))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let i=gy.dirname(e);return tn.existsSync(i)||yy.mkdirsSync(i),tn.linkSync(r,e)}a(Jx,"createLinkSync");vy.exports={createLink:Kx(Qx),createLinkSync:Jx}});var wy=y((rj,Sy)=>{"use strict";var rn=require("path"),Ra=Ht(),{pathExists:Xx}=en(),Zx=yt().fromPromise;async function e7(r,e){if(rn.isAbsolute(r)){try{await Ra.lstat(r)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:r,toDst:r}}let t=rn.dirname(e),i=rn.join(t,r);if(await Xx(i))return{toCwd:i,toDst:r};try{await Ra.lstat(r)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:r,toDst:rn.relative(t,r)}}a(e7,"symlinkPaths");function t7(r,e){if(rn.isAbsolute(r)){if(!Ra.existsSync(r))throw new Error("absolute srcpath does not exist");return{toCwd:r,toDst:r}}let t=rn.dirname(e),i=rn.join(t,r);if(Ra.existsSync(i))return{toCwd:i,toDst:r};if(!Ra.existsSync(r))throw new Error("relative srcpath does not exist");return{toCwd:r,toDst:rn.relative(t,r)}}a(t7,"symlinkPathsSync");Sy.exports={symlinkPaths:Zx(e7),symlinkPathsSync:t7}});var Ay=y((nj,Ty)=>{"use strict";var Ey=Ht(),r7=yt().fromPromise;async function i7(r,e){if(e)return e;let t;try{t=await Ey.lstat(r)}catch{return"file"}return t&&t.isDirectory()?"dir":"file"}a(i7,"symlinkType");function n7(r,e){if(e)return e;let t;try{t=Ey.lstatSync(r)}catch{return"file"}return t&&t.isDirectory()?"dir":"file"}a(n7,"symlinkTypeSync");Ty.exports={symlinkType:r7(i7),symlinkTypeSync:n7}});var Fy=y((aj,Oy)=>{"use strict";var s7=yt().fromPromise,xy=require("path"),di=Ht(),{mkdirs:a7,mkdirsSync:o7}=Yr(),{symlinkPaths:c7,symlinkPathsSync:u7}=wy(),{symlinkType:l7,symlinkTypeSync:f7}=Ay(),{pathExists:h7}=en(),{areIdentical:Cy}=qn();async function d7(r,e,t){let i;try{i=await di.lstat(e)}catch{}if(i&&i.isSymbolicLink()){let[c,u]=await Promise.all([di.stat(r),di.stat(e)]);if(Cy(c,u))return}let n=await c7(r,e);r=n.toDst;let s=await l7(n.toCwd,t),o=xy.dirname(e);return await h7(o)||await a7(o),di.symlink(r,e,s)}a(d7,"createSymlink");function p7(r,e,t){let i;try{i=di.lstatSync(e)}catch{}if(i&&i.isSymbolicLink()){let c=di.statSync(r),u=di.statSync(e);if(Cy(c,u))return}let n=u7(r,e);r=n.toDst,t=f7(n.toCwd,t);let s=xy.dirname(e);return di.existsSync(s)||o7(s),di.symlinkSync(r,e,t)}a(p7,"createSymlinkSync");Oy.exports={createSymlink:s7(d7),createSymlinkSync:p7}});var My=y((cj,jy)=>{"use strict";var{createFile:Py,createFileSync:Dy}=my(),{createLink:Ry,createLinkSync:Iy}=by(),{createSymlink:Ny,createSymlinkSync:ky}=Fy();jy.exports={createFile:Py,createFileSync:Dy,ensureFile:Py,ensureFileSync:Dy,createLink:Ry,createLinkSync:Iy,ensureLink:Ry,ensureLinkSync:Iy,createSymlink:Ny,createSymlinkSync:ky,ensureSymlink:Ny,ensureSymlinkSync:ky}});var wu=y((uj,Ly)=>{function m7(r,{EOL:e=`
`,finalEOL:t=!0,replacer:i=null,spaces:n}={}){let s=t?e:"";return JSON.stringify(r,i,n).replace(/\n/g,e)+s}a(m7,"stringify");function g7(r){return Buffer.isBuffer(r)&&(r=r.toString("utf8")),r.replace(/^\uFEFF/,"")}a(g7,"stripBom");Ly.exports={stringify:m7,stripBom:g7}});var By=y((fj,Uy)=>{var Fs;try{Fs=xs()}catch{Fs=require("fs")}var Eu=yt(),{stringify:qy,stripBom:Vy}=wu();async function y7(r,e={}){typeof e=="string"&&(e={encoding:e});let t=e.fs||Fs,i="throws"in e?e.throws:!0,n=await Eu.fromCallback(t.readFile)(r,e);n=Vy(n);let s;try{s=JSON.parse(n,e?e.reviver:null)}catch(o){if(i)throw o.message=`${r}: ${o.message}`,o;return null}return s}a(y7,"_readFile");var _7=Eu.fromPromise(y7);function v7(r,e={}){typeof e=="string"&&(e={encoding:e});let t=e.fs||Fs,i="throws"in e?e.throws:!0;try{let n=t.readFileSync(r,e);return n=Vy(n),JSON.parse(n,e.reviver)}catch(n){if(i)throw n.message=`${r}: ${n.message}`,n;return null}}a(v7,"readFileSync");async function b7(r,e,t={}){let i=t.fs||Fs,n=qy(e,t);await Eu.fromCallback(i.writeFile)(r,n,t)}a(b7,"_writeFile");var S7=Eu.fromPromise(b7);function w7(r,e,t={}){let i=t.fs||Fs,n=qy(e,t);return i.writeFileSync(r,n,t)}a(w7,"writeFileSync");Uy.exports={readFile:_7,readFileSync:v7,writeFile:S7,writeFileSync:w7}});var Gy=y((dj,$y)=>{"use strict";var Tu=By();$y.exports={readJson:Tu.readFile,readJsonSync:Tu.readFileSync,writeJson:Tu.writeFile,writeJsonSync:Tu.writeFileSync}});var Au=y((pj,zy)=>{"use strict";var E7=yt().fromPromise,xp=Ht(),Wy=require("path"),Hy=Yr(),T7=en().pathExists;async function A7(r,e,t="utf-8"){let i=Wy.dirname(r);return await T7(i)||await Hy.mkdirs(i),xp.writeFile(r,e,t)}a(A7,"outputFile");function x7(r,...e){let t=Wy.dirname(r);xp.existsSync(t)||Hy.mkdirsSync(t),xp.writeFileSync(r,...e)}a(x7,"outputFileSync");zy.exports={outputFile:E7(A7),outputFileSync:x7}});var Yy=y((gj,Ky)=>{"use strict";var{stringify:C7}=wu(),{outputFile:O7}=Au();async function F7(r,e,t={}){let i=C7(e,t);await O7(r,i,t)}a(F7,"outputJson");Ky.exports=F7});var Jy=y((_j,Qy)=>{"use strict";var{stringify:P7}=wu(),{outputFileSync:D7}=Au();function R7(r,e,t){let i=P7(e,t);D7(r,i,t)}a(R7,"outputJsonSync");Qy.exports=R7});var Zy=y((bj,Xy)=>{"use strict";var I7=yt().fromPromise,Kt=Gy();Kt.outputJson=I7(Yy());Kt.outputJsonSync=Jy();Kt.outputJSON=Kt.outputJson;Kt.outputJSONSync=Kt.outputJsonSync;Kt.writeJSON=Kt.writeJson;Kt.writeJSONSync=Kt.writeJsonSync;Kt.readJSON=Kt.readJson;Kt.readJSONSync=Kt.readJsonSync;Xy.exports=Kt});var n3=y((Sj,i3)=>{"use strict";var N7=Ht(),e3=require("path"),{copy:k7}=Su(),{remove:r3}=Da(),{mkdirp:j7}=Yr(),{pathExists:M7}=en(),t3=qn();async function L7(r,e,t={}){let i=t.overwrite||t.clobber||!1,{srcStat:n,isChangingCase:s=!1}=await t3.checkPaths(r,e,"move",t);await t3.checkParentPaths(r,n,e,"move");let o=e3.dirname(e);return e3.parse(o).root!==o&&await j7(o),q7(r,e,i,s)}a(L7,"move");async function q7(r,e,t,i){if(!i){if(t)await r3(e);else if(await M7(e))throw new Error("dest already exists.")}try{await N7.rename(r,e)}catch(n){if(n.code!=="EXDEV")throw n;await V7(r,e,t)}}a(q7,"doRename");async function V7(r,e,t){return await k7(r,e,{overwrite:t,errorOnExist:!0,preserveTimestamps:!0}),r3(r)}a(V7,"moveAcrossDevice");i3.exports=L7});var u3=y((Ej,c3)=>{"use strict";var a3=xs(),Op=require("path"),U7=Su().copySync,o3=Da().removeSync,B7=Yr().mkdirpSync,s3=qn();function $7(r,e,t){t=t||{};let i=t.overwrite||t.clobber||!1,{srcStat:n,isChangingCase:s=!1}=s3.checkPathsSync(r,e,"move",t);return s3.checkParentPathsSync(r,n,e,"move"),G7(e)||B7(Op.dirname(e)),W7(r,e,i,s)}a($7,"moveSync");function G7(r){let e=Op.dirname(r);return Op.parse(e).root===e}a(G7,"isParentRoot");function W7(r,e,t,i){if(i)return Cp(r,e,t);if(t)return o3(e),Cp(r,e,t);if(a3.existsSync(e))throw new Error("dest already exists.");return Cp(r,e,t)}a(W7,"doRename");function Cp(r,e,t){try{a3.renameSync(r,e)}catch(i){if(i.code!=="EXDEV")throw i;return H7(r,e,t)}}a(Cp,"rename");function H7(r,e,t){return U7(r,e,{overwrite:t,errorOnExist:!0,preserveTimestamps:!0}),o3(r)}a(H7,"moveAcrossDevice");c3.exports=$7});var f3=y((Aj,l3)=>{"use strict";var z7=yt().fromPromise;l3.exports={move:z7(n3()),moveSync:u3()}});var xu=y((xj,h3)=>{"use strict";h3.exports={...Ht(),...Su(),...fy(),...My(),...Zy(),...Yr(),...f3(),...Au(),...en(),...Da()}});var b_=y((Bj,v_)=>{"use strict";v_.exports=y_;function y_(r,e,t){r instanceof RegExp&&(r=g_(r,t)),e instanceof RegExp&&(e=g_(e,t));var i=__(r,e,t);return i&&{start:i[0],end:i[1],pre:t.slice(0,i[0]),body:t.slice(i[0]+r.length,i[1]),post:t.slice(i[1]+e.length)}}a(y_,"balanced");function g_(r,e){var t=e.match(r);return t?t[0]:null}a(g_,"maybeMatch");y_.range=__;function __(r,e,t){var i,n,s,o,c,u=t.indexOf(r),f=t.indexOf(e,u+1),l=u;if(u>=0&&f>0){if(r===e)return[u,f];for(i=[],s=t.length;l>=0&&!c;)l==u?(i.push(l),u=t.indexOf(r,l+1)):i.length==1?c=[i.pop(),f]:(n=i.pop(),n<s&&(s=n,o=f),f=t.indexOf(e,l+1)),l=u<f&&u>=0?u:f;i.length&&(c=[s,o])}return c}a(__,"range")});var O_=y((Gj,C_)=>{var S_=b_();C_.exports=_O;var w_="\0SLASH"+Math.random()+"\0",E_="\0OPEN"+Math.random()+"\0",Wp="\0CLOSE"+Math.random()+"\0",T_="\0COMMA"+Math.random()+"\0",A_="\0PERIOD"+Math.random()+"\0";function Gp(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}a(Gp,"numeric");function gO(r){return r.split("\\\\").join(w_).split("\\{").join(E_).split("\\}").join(Wp).split("\\,").join(T_).split("\\.").join(A_)}a(gO,"escapeBraces");function yO(r){return r.split(w_).join("\\").split(E_).join("{").split(Wp).join("}").split(T_).join(",").split(A_).join(".")}a(yO,"unescapeBraces");function x_(r){if(!r)return[""];var e=[],t=S_("{","}",r);if(!t)return r.split(",");var i=t.pre,n=t.body,s=t.post,o=i.split(",");o[o.length-1]+="{"+n+"}";var c=x_(s);return s.length&&(o[o.length-1]+=c.shift(),o.push.apply(o,c)),e.push.apply(e,o),e}a(x_,"parseCommaParts");function _O(r){return r?(r.substr(0,2)==="{}"&&(r="\\{\\}"+r.substr(2)),Va(gO(r),!0).map(yO)):[]}a(_O,"expandTop");function vO(r){return"{"+r+"}"}a(vO,"embrace");function bO(r){return/^-?0\d/.test(r)}a(bO,"isPadded");function SO(r,e){return r<=e}a(SO,"lte");function wO(r,e){return r>=e}a(wO,"gte");function Va(r,e){var t=[],i=S_("{","}",r);if(!i)return[r];var n=i.pre,s=i.post.length?Va(i.post,!1):[""];if(/\$$/.test(i.pre))for(var o=0;o<s.length;o++){var c=n+"{"+i.body+"}"+s[o];t.push(c)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),f=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),l=u||f,h=i.body.indexOf(",")>=0;if(!l&&!h)return i.post.match(/,(?!,).*\}/)?(r=i.pre+"{"+i.body+Wp+i.post,Va(r)):[r];var p;if(l)p=i.body.split(/\.\./);else if(p=x_(i.body),p.length===1&&(p=Va(p[0],!1).map(vO),p.length===1))return s.map(function(oe){return i.pre+p[0]+oe});var g;if(l){var v=Gp(p[0]),S=Gp(p[1]),x=Math.max(p[0].length,p[1].length),F=p.length==3?Math.abs(Gp(p[2])):1,D=SO,U=S<v;U&&(F*=-1,D=wO);var G=p.some(bO);g=[];for(var ee=v;D(ee,S);ee+=F){var Fe;if(f)Fe=String.fromCharCode(ee),Fe==="\\"&&(Fe="");else if(Fe=String(ee),G){var it=x-Fe.length;if(it>0){var dt=new Array(it+1).join("0");ee<0?Fe="-"+dt+Fe.slice(1):Fe=dt+Fe}}g.push(Fe)}}else{g=[];for(var V=0;V<p.length;V++)g.push.apply(g,Va(p[V],!1))}for(var V=0;V<g.length;V++)for(var o=0;o<s.length;o++){var c=n+g[V]+s[o];(!e||l||c)&&t.push(c)}}return t}a(Va,"expand")});var Iq=mt(Pl());var g1=mt(m1(),1),{program:Z8,createCommand:eF,createArgument:tF,createOption:rF,CommanderError:iF,InvalidArgumentError:nF,InvalidOptionArgumentError:sF,Command:ns,Argument:aF,Option:oF,Help:cF}=g1.default;var qa=require("fs"),$p=require("path"),sr=mt(Mn());var ft=mt(xu()),kt=mt(require("path"));function O3(r){return typeof r>"u"||r===null}a(O3,"isNothing");function K7(r){return typeof r=="object"&&r!==null}a(K7,"isObject");function Y7(r){return Array.isArray(r)?r:O3(r)?[]:[r]}a(Y7,"toArray");function Q7(r,e){var t,i,n,s;if(e)for(s=Object.keys(e),t=0,i=s.length;t<i;t+=1)n=s[t],r[n]=e[n];return r}a(Q7,"extend");function J7(r,e){var t="",i;for(i=0;i<e;i+=1)t+=r;return t}a(J7,"repeat");function X7(r){return r===0&&Number.NEGATIVE_INFINITY===1/r}a(X7,"isNegativeZero");var Z7=O3,e6=K7,t6=Y7,r6=J7,i6=X7,n6=Q7,lt={isNothing:Z7,isObject:e6,toArray:t6,repeat:r6,isNegativeZero:i6,extend:n6};function F3(r,e){var t="",i=r.reason||"(unknown reason)";return r.mark?(r.mark.name&&(t+='in "'+r.mark.name+'" '),t+="("+(r.mark.line+1)+":"+(r.mark.column+1)+")",!e&&r.mark.snippet&&(t+=`

`+r.mark.snippet),i+" "+t):i}a(F3,"formatError");function Na(r,e){Error.call(this),this.name="YAMLException",this.reason=r,this.mark=e,this.message=F3(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}a(Na,"YAMLException$1");Na.prototype=Object.create(Error.prototype);Na.prototype.constructor=Na;Na.prototype.toString=a(function(e){return this.name+": "+F3(this,e)},"toString");var Yt=Na;function Fp(r,e,t,i,n){var s="",o="",c=Math.floor(n/2)-1;return i-e>c&&(s=" ... ",e=i-c+s.length),t-i>c&&(o=" ...",t=i+c-o.length),{str:s+r.slice(e,t).replace(/\t/g,"\u2192")+o,pos:i-e+s.length}}a(Fp,"getLine");function Pp(r,e){return lt.repeat(" ",e-r.length)+r}a(Pp,"padStart");function s6(r,e){if(e=Object.create(e||null),!r.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var t=/\r?\n|\r|\0/g,i=[0],n=[],s,o=-1;s=t.exec(r.buffer);)n.push(s.index),i.push(s.index+s[0].length),r.position<=s.index&&o<0&&(o=i.length-2);o<0&&(o=i.length-1);var c="",u,f,l=Math.min(r.line+e.linesAfter,n.length).toString().length,h=e.maxLength-(e.indent+l+3);for(u=1;u<=e.linesBefore&&!(o-u<0);u++)f=Fp(r.buffer,i[o-u],n[o-u],r.position-(i[o]-i[o-u]),h),c=lt.repeat(" ",e.indent)+Pp((r.line-u+1).toString(),l)+" | "+f.str+`
`+c;for(f=Fp(r.buffer,i[o],n[o],r.position,h),c+=lt.repeat(" ",e.indent)+Pp((r.line+1).toString(),l)+" | "+f.str+`
`,c+=lt.repeat("-",e.indent+l+3+f.pos)+`^
`,u=1;u<=e.linesAfter&&!(o+u>=n.length);u++)f=Fp(r.buffer,i[o+u],n[o+u],r.position-(i[o]-i[o+u]),h),c+=lt.repeat(" ",e.indent)+Pp((r.line+u+1).toString(),l)+" | "+f.str+`
`;return c.replace(/\n$/,"")}a(s6,"makeSnippet");var a6=s6,o6=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],c6=["scalar","sequence","mapping"];function u6(r){var e={};return r!==null&&Object.keys(r).forEach(function(t){r[t].forEach(function(i){e[String(i)]=t})}),e}a(u6,"compileStyleAliases");function l6(r,e){if(e=e||{},Object.keys(e).forEach(function(t){if(o6.indexOf(t)===-1)throw new Yt('Unknown option "'+t+'" is met in definition of "'+r+'" YAML type.')}),this.options=e,this.tag=r,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=u6(e.styleAliases||null),c6.indexOf(this.kind)===-1)throw new Yt('Unknown kind "'+this.kind+'" is specified for "'+r+'" YAML type.')}a(l6,"Type$1");var Ot=l6;function d3(r,e){var t=[];return r[e].forEach(function(i){var n=t.length;t.forEach(function(s,o){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(n=o)}),t[n]=i}),t}a(d3,"compileList");function f6(){var r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function i(n){n.multi?(r.multi[n.kind].push(n),r.multi.fallback.push(n)):r[n.kind][n.tag]=r.fallback[n.tag]=n}for(a(i,"collectType"),e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(i);return r}a(f6,"compileMap");function Rp(r){return this.extend(r)}a(Rp,"Schema$1");Rp.prototype.extend=a(function(e){var t=[],i=[];if(e instanceof Ot)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new Yt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(s){if(!(s instanceof Ot))throw new Yt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Yt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Yt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof Ot))throw new Yt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create(Rp.prototype);return n.implicit=(this.implicit||[]).concat(t),n.explicit=(this.explicit||[]).concat(i),n.compiledImplicit=d3(n,"implicit"),n.compiledExplicit=d3(n,"explicit"),n.compiledTypeMap=f6(n.compiledImplicit,n.compiledExplicit),n},"extend");var P3=Rp,D3=new Ot("tag:yaml.org,2002:str",{kind:"scalar",construct:a(function(r){return r!==null?r:""},"construct")}),R3=new Ot("tag:yaml.org,2002:seq",{kind:"sequence",construct:a(function(r){return r!==null?r:[]},"construct")}),I3=new Ot("tag:yaml.org,2002:map",{kind:"mapping",construct:a(function(r){return r!==null?r:{}},"construct")}),N3=new P3({explicit:[D3,R3,I3]});function h6(r){if(r===null)return!0;var e=r.length;return e===1&&r==="~"||e===4&&(r==="null"||r==="Null"||r==="NULL")}a(h6,"resolveYamlNull");function d6(){return null}a(d6,"constructYamlNull");function p6(r){return r===null}a(p6,"isNull");var k3=new Ot("tag:yaml.org,2002:null",{kind:"scalar",resolve:h6,construct:d6,predicate:p6,represent:{canonical:a(function(){return"~"},"canonical"),lowercase:a(function(){return"null"},"lowercase"),uppercase:a(function(){return"NULL"},"uppercase"),camelcase:a(function(){return"Null"},"camelcase"),empty:a(function(){return""},"empty")},defaultStyle:"lowercase"});function m6(r){if(r===null)return!1;var e=r.length;return e===4&&(r==="true"||r==="True"||r==="TRUE")||e===5&&(r==="false"||r==="False"||r==="FALSE")}a(m6,"resolveYamlBoolean");function g6(r){return r==="true"||r==="True"||r==="TRUE"}a(g6,"constructYamlBoolean");function y6(r){return Object.prototype.toString.call(r)==="[object Boolean]"}a(y6,"isBoolean");var j3=new Ot("tag:yaml.org,2002:bool",{kind:"scalar",resolve:m6,construct:g6,predicate:y6,represent:{lowercase:a(function(r){return r?"true":"false"},"lowercase"),uppercase:a(function(r){return r?"TRUE":"FALSE"},"uppercase"),camelcase:a(function(r){return r?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function _6(r){return 48<=r&&r<=57||65<=r&&r<=70||97<=r&&r<=102}a(_6,"isHexCode");function v6(r){return 48<=r&&r<=55}a(v6,"isOctCode");function b6(r){return 48<=r&&r<=57}a(b6,"isDecCode");function S6(r){if(r===null)return!1;var e=r.length,t=0,i=!1,n;if(!e)return!1;if(n=r[t],(n==="-"||n==="+")&&(n=r[++t]),n==="0"){if(t+1===e)return!0;if(n=r[++t],n==="b"){for(t++;t<e;t++)if(n=r[t],n!=="_"){if(n!=="0"&&n!=="1")return!1;i=!0}return i&&n!=="_"}if(n==="x"){for(t++;t<e;t++)if(n=r[t],n!=="_"){if(!_6(r.charCodeAt(t)))return!1;i=!0}return i&&n!=="_"}if(n==="o"){for(t++;t<e;t++)if(n=r[t],n!=="_"){if(!v6(r.charCodeAt(t)))return!1;i=!0}return i&&n!=="_"}}if(n==="_")return!1;for(;t<e;t++)if(n=r[t],n!=="_"){if(!b6(r.charCodeAt(t)))return!1;i=!0}return!(!i||n==="_")}a(S6,"resolveYamlInteger");function w6(r){var e=r,t=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(t=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}a(w6,"constructYamlInteger");function E6(r){return Object.prototype.toString.call(r)==="[object Number]"&&r%1===0&&!lt.isNegativeZero(r)}a(E6,"isInteger");var M3=new Ot("tag:yaml.org,2002:int",{kind:"scalar",resolve:S6,construct:w6,predicate:E6,represent:{binary:a(function(r){return r>=0?"0b"+r.toString(2):"-0b"+r.toString(2).slice(1)},"binary"),octal:a(function(r){return r>=0?"0o"+r.toString(8):"-0o"+r.toString(8).slice(1)},"octal"),decimal:a(function(r){return r.toString(10)},"decimal"),hexadecimal:a(function(r){return r>=0?"0x"+r.toString(16).toUpperCase():"-0x"+r.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),T6=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function A6(r){return!(r===null||!T6.test(r)||r[r.length-1]==="_")}a(A6,"resolveYamlFloat");function x6(r){var e,t;return e=r.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}a(x6,"constructYamlFloat");var C6=/^[-+]?[0-9]+e/;function O6(r,e){var t;if(isNaN(r))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===r)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===r)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(lt.isNegativeZero(r))return"-0.0";return t=r.toString(10),C6.test(t)?t.replace("e",".e"):t}a(O6,"representYamlFloat");function F6(r){return Object.prototype.toString.call(r)==="[object Number]"&&(r%1!==0||lt.isNegativeZero(r))}a(F6,"isFloat");var L3=new Ot("tag:yaml.org,2002:float",{kind:"scalar",resolve:A6,construct:x6,predicate:F6,represent:O6,defaultStyle:"lowercase"}),q3=N3.extend({implicit:[k3,j3,M3,L3]}),V3=q3,U3=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),B3=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function P6(r){return r===null?!1:U3.exec(r)!==null||B3.exec(r)!==null}a(P6,"resolveYamlTimestamp");function D6(r){var e,t,i,n,s,o,c,u=0,f=null,l,h,p;if(e=U3.exec(r),e===null&&(e=B3.exec(r)),e===null)throw new Error("Date resolve error");if(t=+e[1],i=+e[2]-1,n=+e[3],!e[4])return new Date(Date.UTC(t,i,n));if(s=+e[4],o=+e[5],c=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(l=+e[10],h=+(e[11]||0),f=(l*60+h)*6e4,e[9]==="-"&&(f=-f)),p=new Date(Date.UTC(t,i,n,s,o,c,u)),f&&p.setTime(p.getTime()-f),p}a(D6,"constructYamlTimestamp");function R6(r){return r.toISOString()}a(R6,"representYamlTimestamp");var $3=new Ot("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:P6,construct:D6,instanceOf:Date,represent:R6});function I6(r){return r==="<<"||r===null}a(I6,"resolveYamlMerge");var G3=new Ot("tag:yaml.org,2002:merge",{kind:"scalar",resolve:I6}),Mp=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function N6(r){if(r===null)return!1;var e,t,i=0,n=r.length,s=Mp;for(t=0;t<n;t++)if(e=s.indexOf(r.charAt(t)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}a(N6,"resolveYamlBinary");function k6(r){var e,t,i=r.replace(/[\r\n=]/g,""),n=i.length,s=Mp,o=0,c=[];for(e=0;e<n;e++)e%4===0&&e&&(c.push(o>>16&255),c.push(o>>8&255),c.push(o&255)),o=o<<6|s.indexOf(i.charAt(e));return t=n%4*6,t===0?(c.push(o>>16&255),c.push(o>>8&255),c.push(o&255)):t===18?(c.push(o>>10&255),c.push(o>>2&255)):t===12&&c.push(o>>4&255),new Uint8Array(c)}a(k6,"constructYamlBinary");function j6(r){var e="",t=0,i,n,s=r.length,o=Mp;for(i=0;i<s;i++)i%3===0&&i&&(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]),t=(t<<8)+r[i];return n=s%3,n===0?(e+=o[t>>18&63],e+=o[t>>12&63],e+=o[t>>6&63],e+=o[t&63]):n===2?(e+=o[t>>10&63],e+=o[t>>4&63],e+=o[t<<2&63],e+=o[64]):n===1&&(e+=o[t>>2&63],e+=o[t<<4&63],e+=o[64],e+=o[64]),e}a(j6,"representYamlBinary");function M6(r){return Object.prototype.toString.call(r)==="[object Uint8Array]"}a(M6,"isBinary");var W3=new Ot("tag:yaml.org,2002:binary",{kind:"scalar",resolve:N6,construct:k6,predicate:M6,represent:j6}),L6=Object.prototype.hasOwnProperty,q6=Object.prototype.toString;function V6(r){if(r===null)return!0;var e=[],t,i,n,s,o,c=r;for(t=0,i=c.length;t<i;t+=1){if(n=c[t],o=!1,q6.call(n)!=="[object Object]")return!1;for(s in n)if(L6.call(n,s))if(!o)o=!0;else return!1;if(!o)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}a(V6,"resolveYamlOmap");function U6(r){return r!==null?r:[]}a(U6,"constructYamlOmap");var H3=new Ot("tag:yaml.org,2002:omap",{kind:"sequence",resolve:V6,construct:U6}),B6=Object.prototype.toString;function $6(r){if(r===null)return!0;var e,t,i,n,s,o=r;for(s=new Array(o.length),e=0,t=o.length;e<t;e+=1){if(i=o[e],B6.call(i)!=="[object Object]"||(n=Object.keys(i),n.length!==1))return!1;s[e]=[n[0],i[n[0]]]}return!0}a($6,"resolveYamlPairs");function G6(r){if(r===null)return[];var e,t,i,n,s,o=r;for(s=new Array(o.length),e=0,t=o.length;e<t;e+=1)i=o[e],n=Object.keys(i),s[e]=[n[0],i[n[0]]];return s}a(G6,"constructYamlPairs");var z3=new Ot("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:$6,construct:G6}),W6=Object.prototype.hasOwnProperty;function H6(r){if(r===null)return!0;var e,t=r;for(e in t)if(W6.call(t,e)&&t[e]!==null)return!1;return!0}a(H6,"resolveYamlSet");function z6(r){return r!==null?r:{}}a(z6,"constructYamlSet");var K3=new Ot("tag:yaml.org,2002:set",{kind:"mapping",resolve:H6,construct:z6}),Lp=V3.extend({implicit:[$3,G3],explicit:[W3,H3,z3,K3]}),sn=Object.prototype.hasOwnProperty,Cu=1,Y3=2,Q3=3,Ou=4,Dp=1,K6=2,p3=3,Y6=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Q6=/[\x85\u2028\u2029]/,J6=/[,\[\]\{\}]/,J3=/^(?:!|!!|![a-z\-]+!)$/i,X3=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function m3(r){return Object.prototype.toString.call(r)}a(m3,"_class");function pi(r){return r===10||r===13}a(pi,"is_EOL");function Un(r){return r===9||r===32}a(Un,"is_WHITE_SPACE");function nr(r){return r===9||r===32||r===10||r===13}a(nr,"is_WS_OR_EOL");function Ds(r){return r===44||r===91||r===93||r===123||r===125}a(Ds,"is_FLOW_INDICATOR");function X6(r){var e;return 48<=r&&r<=57?r-48:(e=r|32,97<=e&&e<=102?e-97+10:-1)}a(X6,"fromHexCode");function Z6(r){return r===120?2:r===117?4:r===85?8:0}a(Z6,"escapedHexLen");function eC(r){return 48<=r&&r<=57?r-48:-1}a(eC,"fromDecimalCode");function g3(r){return r===48?"\0":r===97?"\x07":r===98?"\b":r===116||r===9?"	":r===110?`
`:r===118?"\v":r===102?"\f":r===114?"\r":r===101?"\x1B":r===32?" ":r===34?'"':r===47?"/":r===92?"\\":r===78?"\x85":r===95?"\xA0":r===76?"\u2028":r===80?"\u2029":""}a(g3,"simpleEscapeSequence");function tC(r){return r<=65535?String.fromCharCode(r):String.fromCharCode((r-65536>>10)+55296,(r-65536&1023)+56320)}a(tC,"charFromCodepoint");var Z3=new Array(256),e_=new Array(256);for(Vn=0;Vn<256;Vn++)Z3[Vn]=g3(Vn)?1:0,e_[Vn]=g3(Vn);var Vn;function rC(r,e){this.input=r,this.filename=e.filename||null,this.schema=e.schema||Lp,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=r.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}a(rC,"State$1");function t_(r,e){var t={name:r.filename,buffer:r.input.slice(0,-1),position:r.position,line:r.line,column:r.position-r.lineStart};return t.snippet=a6(t),new Yt(e,t)}a(t_,"generateError");function z(r,e){throw t_(r,e)}a(z,"throwError");function Fu(r,e){r.onWarning&&r.onWarning.call(null,t_(r,e))}a(Fu,"throwWarning");var y3={YAML:a(function(e,t,i){var n,s,o;e.version!==null&&z(e,"duplication of %YAML directive"),i.length!==1&&z(e,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),n===null&&z(e,"ill-formed argument of the YAML directive"),s=parseInt(n[1],10),o=parseInt(n[2],10),s!==1&&z(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=o<2,o!==1&&o!==2&&Fu(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:a(function(e,t,i){var n,s;i.length!==2&&z(e,"TAG directive accepts exactly two arguments"),n=i[0],s=i[1],J3.test(n)||z(e,"ill-formed tag handle (first argument) of the TAG directive"),sn.call(e.tagMap,n)&&z(e,'there is a previously declared suffix for "'+n+'" tag handle'),X3.test(s)||z(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{z(e,"tag prefix is malformed: "+s)}e.tagMap[n]=s},"handleTagDirective")};function nn(r,e,t,i){var n,s,o,c;if(e<t){if(c=r.input.slice(e,t),i)for(n=0,s=c.length;n<s;n+=1)o=c.charCodeAt(n),o===9||32<=o&&o<=1114111||z(r,"expected valid JSON character");else Y6.test(c)&&z(r,"the stream contains non-printable characters");r.result+=c}}a(nn,"captureSegment");function _3(r,e,t,i){var n,s,o,c;for(lt.isObject(t)||z(r,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(t),o=0,c=n.length;o<c;o+=1)s=n[o],sn.call(e,s)||(e[s]=t[s],i[s]=!0)}a(_3,"mergeMappings");function Rs(r,e,t,i,n,s,o,c,u){var f,l;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),f=0,l=n.length;f<l;f+=1)Array.isArray(n[f])&&z(r,"nested arrays are not supported inside keys"),typeof n=="object"&&m3(n[f])==="[object Object]"&&(n[f]="[object Object]");if(typeof n=="object"&&m3(n)==="[object Object]"&&(n="[object Object]"),n=String(n),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(f=0,l=s.length;f<l;f+=1)_3(r,e,s[f],t);else _3(r,e,s,t);else!r.json&&!sn.call(t,n)&&sn.call(e,n)&&(r.line=o||r.line,r.lineStart=c||r.lineStart,r.position=u||r.position,z(r,"duplicated mapping key")),n==="__proto__"?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[n]=s,delete t[n];return e}a(Rs,"storeMappingPair");function qp(r){var e;e=r.input.charCodeAt(r.position),e===10?r.position++:e===13?(r.position++,r.input.charCodeAt(r.position)===10&&r.position++):z(r,"a line break is expected"),r.line+=1,r.lineStart=r.position,r.firstTabInLine=-1}a(qp,"readLineBreak");function ut(r,e,t){for(var i=0,n=r.input.charCodeAt(r.position);n!==0;){for(;Un(n);)n===9&&r.firstTabInLine===-1&&(r.firstTabInLine=r.position),n=r.input.charCodeAt(++r.position);if(e&&n===35)do n=r.input.charCodeAt(++r.position);while(n!==10&&n!==13&&n!==0);if(pi(n))for(qp(r),n=r.input.charCodeAt(r.position),i++,r.lineIndent=0;n===32;)r.lineIndent++,n=r.input.charCodeAt(++r.position);else break}return t!==-1&&i!==0&&r.lineIndent<t&&Fu(r,"deficient indentation"),i}a(ut,"skipSeparationSpace");function Ru(r){var e=r.position,t;return t=r.input.charCodeAt(e),!!((t===45||t===46)&&t===r.input.charCodeAt(e+1)&&t===r.input.charCodeAt(e+2)&&(e+=3,t=r.input.charCodeAt(e),t===0||nr(t)))}a(Ru,"testDocumentSeparator");function Vp(r,e){e===1?r.result+=" ":e>1&&(r.result+=lt.repeat(`
`,e-1))}a(Vp,"writeFoldedLines");function iC(r,e,t){var i,n,s,o,c,u,f,l,h=r.kind,p=r.result,g;if(g=r.input.charCodeAt(r.position),nr(g)||Ds(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(n=r.input.charCodeAt(r.position+1),nr(n)||t&&Ds(n)))return!1;for(r.kind="scalar",r.result="",s=o=r.position,c=!1;g!==0;){if(g===58){if(n=r.input.charCodeAt(r.position+1),nr(n)||t&&Ds(n))break}else if(g===35){if(i=r.input.charCodeAt(r.position-1),nr(i))break}else{if(r.position===r.lineStart&&Ru(r)||t&&Ds(g))break;if(pi(g))if(u=r.line,f=r.lineStart,l=r.lineIndent,ut(r,!1,-1),r.lineIndent>=e){c=!0,g=r.input.charCodeAt(r.position);continue}else{r.position=o,r.line=u,r.lineStart=f,r.lineIndent=l;break}}c&&(nn(r,s,o,!1),Vp(r,r.line-u),s=o=r.position,c=!1),Un(g)||(o=r.position+1),g=r.input.charCodeAt(++r.position)}return nn(r,s,o,!1),r.result?!0:(r.kind=h,r.result=p,!1)}a(iC,"readPlainScalar");function nC(r,e){var t,i,n;if(t=r.input.charCodeAt(r.position),t!==39)return!1;for(r.kind="scalar",r.result="",r.position++,i=n=r.position;(t=r.input.charCodeAt(r.position))!==0;)if(t===39)if(nn(r,i,r.position,!0),t=r.input.charCodeAt(++r.position),t===39)i=r.position,r.position++,n=r.position;else return!0;else pi(t)?(nn(r,i,n,!0),Vp(r,ut(r,!1,e)),i=n=r.position):r.position===r.lineStart&&Ru(r)?z(r,"unexpected end of the document within a single quoted scalar"):(r.position++,n=r.position);z(r,"unexpected end of the stream within a single quoted scalar")}a(nC,"readSingleQuotedScalar");function sC(r,e){var t,i,n,s,o,c;if(c=r.input.charCodeAt(r.position),c!==34)return!1;for(r.kind="scalar",r.result="",r.position++,t=i=r.position;(c=r.input.charCodeAt(r.position))!==0;){if(c===34)return nn(r,t,r.position,!0),r.position++,!0;if(c===92){if(nn(r,t,r.position,!0),c=r.input.charCodeAt(++r.position),pi(c))ut(r,!1,e);else if(c<256&&Z3[c])r.result+=e_[c],r.position++;else if((o=Z6(c))>0){for(n=o,s=0;n>0;n--)c=r.input.charCodeAt(++r.position),(o=X6(c))>=0?s=(s<<4)+o:z(r,"expected hexadecimal character");r.result+=tC(s),r.position++}else z(r,"unknown escape sequence");t=i=r.position}else pi(c)?(nn(r,t,i,!0),Vp(r,ut(r,!1,e)),t=i=r.position):r.position===r.lineStart&&Ru(r)?z(r,"unexpected end of the document within a double quoted scalar"):(r.position++,i=r.position)}z(r,"unexpected end of the stream within a double quoted scalar")}a(sC,"readDoubleQuotedScalar");function aC(r,e){var t=!0,i,n,s,o=r.tag,c,u=r.anchor,f,l,h,p,g,v=Object.create(null),S,x,F,D;if(D=r.input.charCodeAt(r.position),D===91)l=93,g=!1,c=[];else if(D===123)l=125,g=!0,c={};else return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=c),D=r.input.charCodeAt(++r.position);D!==0;){if(ut(r,!0,e),D=r.input.charCodeAt(r.position),D===l)return r.position++,r.tag=o,r.anchor=u,r.kind=g?"mapping":"sequence",r.result=c,!0;t?D===44&&z(r,"expected the node content, but found ','"):z(r,"missed comma between flow collection entries"),x=S=F=null,h=p=!1,D===63&&(f=r.input.charCodeAt(r.position+1),nr(f)&&(h=p=!0,r.position++,ut(r,!0,e))),i=r.line,n=r.lineStart,s=r.position,Is(r,e,Cu,!1,!0),x=r.tag,S=r.result,ut(r,!0,e),D=r.input.charCodeAt(r.position),(p||r.line===i)&&D===58&&(h=!0,D=r.input.charCodeAt(++r.position),ut(r,!0,e),Is(r,e,Cu,!1,!0),F=r.result),g?Rs(r,c,v,x,S,F,i,n,s):h?c.push(Rs(r,null,v,x,S,F,i,n,s)):c.push(S),ut(r,!0,e),D=r.input.charCodeAt(r.position),D===44?(t=!0,D=r.input.charCodeAt(++r.position)):t=!1}z(r,"unexpected end of the stream within a flow collection")}a(aC,"readFlowCollection");function oC(r,e){var t,i,n=Dp,s=!1,o=!1,c=e,u=0,f=!1,l,h;if(h=r.input.charCodeAt(r.position),h===124)i=!1;else if(h===62)i=!0;else return!1;for(r.kind="scalar",r.result="";h!==0;)if(h=r.input.charCodeAt(++r.position),h===43||h===45)Dp===n?n=h===43?p3:K6:z(r,"repeat of a chomping mode identifier");else if((l=eC(h))>=0)l===0?z(r,"bad explicit indentation width of a block scalar; it cannot be less than one"):o?z(r,"repeat of an indentation width identifier"):(c=e+l-1,o=!0);else break;if(Un(h)){do h=r.input.charCodeAt(++r.position);while(Un(h));if(h===35)do h=r.input.charCodeAt(++r.position);while(!pi(h)&&h!==0)}for(;h!==0;){for(qp(r),r.lineIndent=0,h=r.input.charCodeAt(r.position);(!o||r.lineIndent<c)&&h===32;)r.lineIndent++,h=r.input.charCodeAt(++r.position);if(!o&&r.lineIndent>c&&(c=r.lineIndent),pi(h)){u++;continue}if(r.lineIndent<c){n===p3?r.result+=lt.repeat(`
`,s?1+u:u):n===Dp&&s&&(r.result+=`
`);break}for(i?Un(h)?(f=!0,r.result+=lt.repeat(`
`,s?1+u:u)):f?(f=!1,r.result+=lt.repeat(`
`,u+1)):u===0?s&&(r.result+=" "):r.result+=lt.repeat(`
`,u):r.result+=lt.repeat(`
`,s?1+u:u),s=!0,o=!0,u=0,t=r.position;!pi(h)&&h!==0;)h=r.input.charCodeAt(++r.position);nn(r,t,r.position,!1)}return!0}a(oC,"readBlockScalar");function v3(r,e){var t,i=r.tag,n=r.anchor,s=[],o,c=!1,u;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=s),u=r.input.charCodeAt(r.position);u!==0&&(r.firstTabInLine!==-1&&(r.position=r.firstTabInLine,z(r,"tab characters must not be used in indentation")),!(u!==45||(o=r.input.charCodeAt(r.position+1),!nr(o))));){if(c=!0,r.position++,ut(r,!0,-1)&&r.lineIndent<=e){s.push(null),u=r.input.charCodeAt(r.position);continue}if(t=r.line,Is(r,e,Q3,!1,!0),s.push(r.result),ut(r,!0,-1),u=r.input.charCodeAt(r.position),(r.line===t||r.lineIndent>e)&&u!==0)z(r,"bad indentation of a sequence entry");else if(r.lineIndent<e)break}return c?(r.tag=i,r.anchor=n,r.kind="sequence",r.result=s,!0):!1}a(v3,"readBlockSequence");function cC(r,e,t){var i,n,s,o,c,u,f=r.tag,l=r.anchor,h={},p=Object.create(null),g=null,v=null,S=null,x=!1,F=!1,D;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=h),D=r.input.charCodeAt(r.position);D!==0;){if(!x&&r.firstTabInLine!==-1&&(r.position=r.firstTabInLine,z(r,"tab characters must not be used in indentation")),i=r.input.charCodeAt(r.position+1),s=r.line,(D===63||D===58)&&nr(i))D===63?(x&&(Rs(r,h,p,g,v,null,o,c,u),g=v=S=null),F=!0,x=!0,n=!0):x?(x=!1,n=!0):z(r,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),r.position+=1,D=i;else{if(o=r.line,c=r.lineStart,u=r.position,!Is(r,t,Y3,!1,!0))break;if(r.line===s){for(D=r.input.charCodeAt(r.position);Un(D);)D=r.input.charCodeAt(++r.position);if(D===58)D=r.input.charCodeAt(++r.position),nr(D)||z(r,"a whitespace character is expected after the key-value separator within a block mapping"),x&&(Rs(r,h,p,g,v,null,o,c,u),g=v=S=null),F=!0,x=!1,n=!1,g=r.tag,v=r.result;else if(F)z(r,"can not read an implicit mapping pair; a colon is missed");else return r.tag=f,r.anchor=l,!0}else if(F)z(r,"can not read a block mapping entry; a multiline key may not be an implicit key");else return r.tag=f,r.anchor=l,!0}if((r.line===s||r.lineIndent>e)&&(x&&(o=r.line,c=r.lineStart,u=r.position),Is(r,e,Ou,!0,n)&&(x?v=r.result:S=r.result),x||(Rs(r,h,p,g,v,S,o,c,u),g=v=S=null),ut(r,!0,-1),D=r.input.charCodeAt(r.position)),(r.line===s||r.lineIndent>e)&&D!==0)z(r,"bad indentation of a mapping entry");else if(r.lineIndent<e)break}return x&&Rs(r,h,p,g,v,null,o,c,u),F&&(r.tag=f,r.anchor=l,r.kind="mapping",r.result=h),F}a(cC,"readBlockMapping");function uC(r){var e,t=!1,i=!1,n,s,o;if(o=r.input.charCodeAt(r.position),o!==33)return!1;if(r.tag!==null&&z(r,"duplication of a tag property"),o=r.input.charCodeAt(++r.position),o===60?(t=!0,o=r.input.charCodeAt(++r.position)):o===33?(i=!0,n="!!",o=r.input.charCodeAt(++r.position)):n="!",e=r.position,t){do o=r.input.charCodeAt(++r.position);while(o!==0&&o!==62);r.position<r.length?(s=r.input.slice(e,r.position),o=r.input.charCodeAt(++r.position)):z(r,"unexpected end of the stream within a verbatim tag")}else{for(;o!==0&&!nr(o);)o===33&&(i?z(r,"tag suffix cannot contain exclamation marks"):(n=r.input.slice(e-1,r.position+1),J3.test(n)||z(r,"named tag handle cannot contain such characters"),i=!0,e=r.position+1)),o=r.input.charCodeAt(++r.position);s=r.input.slice(e,r.position),J6.test(s)&&z(r,"tag suffix cannot contain flow indicator characters")}s&&!X3.test(s)&&z(r,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{z(r,"tag name is malformed: "+s)}return t?r.tag=s:sn.call(r.tagMap,n)?r.tag=r.tagMap[n]+s:n==="!"?r.tag="!"+s:n==="!!"?r.tag="tag:yaml.org,2002:"+s:z(r,'undeclared tag handle "'+n+'"'),!0}a(uC,"readTagProperty");function lC(r){var e,t;if(t=r.input.charCodeAt(r.position),t!==38)return!1;for(r.anchor!==null&&z(r,"duplication of an anchor property"),t=r.input.charCodeAt(++r.position),e=r.position;t!==0&&!nr(t)&&!Ds(t);)t=r.input.charCodeAt(++r.position);return r.position===e&&z(r,"name of an anchor node must contain at least one character"),r.anchor=r.input.slice(e,r.position),!0}a(lC,"readAnchorProperty");function fC(r){var e,t,i;if(i=r.input.charCodeAt(r.position),i!==42)return!1;for(i=r.input.charCodeAt(++r.position),e=r.position;i!==0&&!nr(i)&&!Ds(i);)i=r.input.charCodeAt(++r.position);return r.position===e&&z(r,"name of an alias node must contain at least one character"),t=r.input.slice(e,r.position),sn.call(r.anchorMap,t)||z(r,'unidentified alias "'+t+'"'),r.result=r.anchorMap[t],ut(r,!0,-1),!0}a(fC,"readAlias");function Is(r,e,t,i,n){var s,o,c,u=1,f=!1,l=!1,h,p,g,v,S,x;if(r.listener!==null&&r.listener("open",r),r.tag=null,r.anchor=null,r.kind=null,r.result=null,s=o=c=Ou===t||Q3===t,i&&ut(r,!0,-1)&&(f=!0,r.lineIndent>e?u=1:r.lineIndent===e?u=0:r.lineIndent<e&&(u=-1)),u===1)for(;uC(r)||lC(r);)ut(r,!0,-1)?(f=!0,c=s,r.lineIndent>e?u=1:r.lineIndent===e?u=0:r.lineIndent<e&&(u=-1)):c=!1;if(c&&(c=f||n),(u===1||Ou===t)&&(Cu===t||Y3===t?S=e:S=e+1,x=r.position-r.lineStart,u===1?c&&(v3(r,x)||cC(r,x,S))||aC(r,S)?l=!0:(o&&oC(r,S)||nC(r,S)||sC(r,S)?l=!0:fC(r)?(l=!0,(r.tag!==null||r.anchor!==null)&&z(r,"alias node should not have any properties")):iC(r,S,Cu===t)&&(l=!0,r.tag===null&&(r.tag="?")),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):u===0&&(l=c&&v3(r,x))),r.tag===null)r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);else if(r.tag==="?"){for(r.result!==null&&r.kind!=="scalar"&&z(r,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+r.kind+'"'),h=0,p=r.implicitTypes.length;h<p;h+=1)if(v=r.implicitTypes[h],v.resolve(r.result)){r.result=v.construct(r.result),r.tag=v.tag,r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);break}}else if(r.tag!=="!"){if(sn.call(r.typeMap[r.kind||"fallback"],r.tag))v=r.typeMap[r.kind||"fallback"][r.tag];else for(v=null,g=r.typeMap.multi[r.kind||"fallback"],h=0,p=g.length;h<p;h+=1)if(r.tag.slice(0,g[h].tag.length)===g[h].tag){v=g[h];break}v||z(r,"unknown tag !<"+r.tag+">"),r.result!==null&&v.kind!==r.kind&&z(r,"unacceptable node kind for !<"+r.tag+'> tag; it should be "'+v.kind+'", not "'+r.kind+'"'),v.resolve(r.result,r.tag)?(r.result=v.construct(r.result,r.tag),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):z(r,"cannot resolve a node with !<"+r.tag+"> explicit tag")}return r.listener!==null&&r.listener("close",r),r.tag!==null||r.anchor!==null||l}a(Is,"composeNode");function hC(r){var e=r.position,t,i,n,s=!1,o;for(r.version=null,r.checkLineBreaks=r.legacy,r.tagMap=Object.create(null),r.anchorMap=Object.create(null);(o=r.input.charCodeAt(r.position))!==0&&(ut(r,!0,-1),o=r.input.charCodeAt(r.position),!(r.lineIndent>0||o!==37));){for(s=!0,o=r.input.charCodeAt(++r.position),t=r.position;o!==0&&!nr(o);)o=r.input.charCodeAt(++r.position);for(i=r.input.slice(t,r.position),n=[],i.length<1&&z(r,"directive name must not be less than one character in length");o!==0;){for(;Un(o);)o=r.input.charCodeAt(++r.position);if(o===35){do o=r.input.charCodeAt(++r.position);while(o!==0&&!pi(o));break}if(pi(o))break;for(t=r.position;o!==0&&!nr(o);)o=r.input.charCodeAt(++r.position);n.push(r.input.slice(t,r.position))}o!==0&&qp(r),sn.call(y3,i)?y3[i](r,i,n):Fu(r,'unknown document directive "'+i+'"')}if(ut(r,!0,-1),r.lineIndent===0&&r.input.charCodeAt(r.position)===45&&r.input.charCodeAt(r.position+1)===45&&r.input.charCodeAt(r.position+2)===45?(r.position+=3,ut(r,!0,-1)):s&&z(r,"directives end mark is expected"),Is(r,r.lineIndent-1,Ou,!1,!0),ut(r,!0,-1),r.checkLineBreaks&&Q6.test(r.input.slice(e,r.position))&&Fu(r,"non-ASCII line breaks are interpreted as content"),r.documents.push(r.result),r.position===r.lineStart&&Ru(r)){r.input.charCodeAt(r.position)===46&&(r.position+=3,ut(r,!0,-1));return}if(r.position<r.length-1)z(r,"end of the stream or a document separator is expected");else return}a(hC,"readDocument");function r_(r,e){r=String(r),e=e||{},r.length!==0&&(r.charCodeAt(r.length-1)!==10&&r.charCodeAt(r.length-1)!==13&&(r+=`
`),r.charCodeAt(0)===65279&&(r=r.slice(1)));var t=new rC(r,e),i=r.indexOf("\0");for(i!==-1&&(t.position=i,z(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)hC(t);return t.documents}a(r_,"loadDocuments");function dC(r,e,t){e!==null&&typeof e=="object"&&typeof t>"u"&&(t=e,e=null);var i=r_(r,t);if(typeof e!="function")return i;for(var n=0,s=i.length;n<s;n+=1)e(i[n])}a(dC,"loadAll$1");function pC(r,e){var t=r_(r,e);if(t.length!==0){if(t.length===1)return t[0];throw new Yt("expected a single document in the stream, but found more")}}a(pC,"load$1");var mC=dC,gC=pC,i_={loadAll:mC,load:gC},n_=Object.prototype.toString,s_=Object.prototype.hasOwnProperty,Up=65279,yC=9,ka=10,_C=13,vC=32,bC=33,SC=34,Ip=35,wC=37,EC=38,TC=39,AC=42,a_=44,xC=45,Pu=58,CC=61,OC=62,FC=63,PC=64,o_=91,c_=93,DC=96,u_=123,RC=124,l_=125,Nt={};Nt[0]="\\0";Nt[7]="\\a";Nt[8]="\\b";Nt[9]="\\t";Nt[10]="\\n";Nt[11]="\\v";Nt[12]="\\f";Nt[13]="\\r";Nt[27]="\\e";Nt[34]='\\"';Nt[92]="\\\\";Nt[133]="\\N";Nt[160]="\\_";Nt[8232]="\\L";Nt[8233]="\\P";var IC=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],NC=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function kC(r,e){var t,i,n,s,o,c,u;if(e===null)return{};for(t={},i=Object.keys(e),n=0,s=i.length;n<s;n+=1)o=i[n],c=String(e[o]),o.slice(0,2)==="!!"&&(o="tag:yaml.org,2002:"+o.slice(2)),u=r.compiledTypeMap.fallback[o],u&&s_.call(u.styleAliases,c)&&(c=u.styleAliases[c]),t[o]=c;return t}a(kC,"compileStyleMap");function jC(r){var e,t,i;if(e=r.toString(16).toUpperCase(),r<=255)t="x",i=2;else if(r<=65535)t="u",i=4;else if(r<=4294967295)t="U",i=8;else throw new Yt("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+lt.repeat("0",i-e.length)+e}a(jC,"encodeHex");var MC=1,ja=2;function LC(r){this.schema=r.schema||Lp,this.indent=Math.max(1,r.indent||2),this.noArrayIndent=r.noArrayIndent||!1,this.skipInvalid=r.skipInvalid||!1,this.flowLevel=lt.isNothing(r.flowLevel)?-1:r.flowLevel,this.styleMap=kC(this.schema,r.styles||null),this.sortKeys=r.sortKeys||!1,this.lineWidth=r.lineWidth||80,this.noRefs=r.noRefs||!1,this.noCompatMode=r.noCompatMode||!1,this.condenseFlow=r.condenseFlow||!1,this.quotingType=r.quotingType==='"'?ja:MC,this.forceQuotes=r.forceQuotes||!1,this.replacer=typeof r.replacer=="function"?r.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}a(LC,"State");function b3(r,e){for(var t=lt.repeat(" ",e),i=0,n=-1,s="",o,c=r.length;i<c;)n=r.indexOf(`
`,i),n===-1?(o=r.slice(i),i=c):(o=r.slice(i,n+1),i=n+1),o.length&&o!==`
`&&(s+=t),s+=o;return s}a(b3,"indentString");function Np(r,e){return`
`+lt.repeat(" ",r.indent*e)}a(Np,"generateNextLine");function qC(r,e){var t,i,n;for(t=0,i=r.implicitTypes.length;t<i;t+=1)if(n=r.implicitTypes[t],n.resolve(e))return!0;return!1}a(qC,"testImplicitResolving");function Du(r){return r===vC||r===yC}a(Du,"isWhitespace");function Ma(r){return 32<=r&&r<=126||161<=r&&r<=55295&&r!==8232&&r!==8233||57344<=r&&r<=65533&&r!==Up||65536<=r&&r<=1114111}a(Ma,"isPrintable");function S3(r){return Ma(r)&&r!==Up&&r!==_C&&r!==ka}a(S3,"isNsCharOrWhitespace");function w3(r,e,t){var i=S3(r),n=i&&!Du(r);return(t?i:i&&r!==a_&&r!==o_&&r!==c_&&r!==u_&&r!==l_)&&r!==Ip&&!(e===Pu&&!n)||S3(e)&&!Du(e)&&r===Ip||e===Pu&&n}a(w3,"isPlainSafe");function VC(r){return Ma(r)&&r!==Up&&!Du(r)&&r!==xC&&r!==FC&&r!==Pu&&r!==a_&&r!==o_&&r!==c_&&r!==u_&&r!==l_&&r!==Ip&&r!==EC&&r!==AC&&r!==bC&&r!==RC&&r!==CC&&r!==OC&&r!==TC&&r!==SC&&r!==wC&&r!==PC&&r!==DC}a(VC,"isPlainSafeFirst");function UC(r){return!Du(r)&&r!==Pu}a(UC,"isPlainSafeLast");function Ia(r,e){var t=r.charCodeAt(e),i;return t>=55296&&t<=56319&&e+1<r.length&&(i=r.charCodeAt(e+1),i>=56320&&i<=57343)?(t-55296)*1024+i-56320+65536:t}a(Ia,"codePointAt");function f_(r){var e=/^\n* /;return e.test(r)}a(f_,"needIndentIndicator");var h_=1,kp=2,d_=3,p_=4,Ps=5;function BC(r,e,t,i,n,s,o,c){var u,f=0,l=null,h=!1,p=!1,g=i!==-1,v=-1,S=VC(Ia(r,0))&&UC(Ia(r,r.length-1));if(e||o)for(u=0;u<r.length;f>=65536?u+=2:u++){if(f=Ia(r,u),!Ma(f))return Ps;S=S&&w3(f,l,c),l=f}else{for(u=0;u<r.length;f>=65536?u+=2:u++){if(f=Ia(r,u),f===ka)h=!0,g&&(p=p||u-v-1>i&&r[v+1]!==" ",v=u);else if(!Ma(f))return Ps;S=S&&w3(f,l,c),l=f}p=p||g&&u-v-1>i&&r[v+1]!==" "}return!h&&!p?S&&!o&&!n(r)?h_:s===ja?Ps:kp:t>9&&f_(r)?Ps:o?s===ja?Ps:kp:p?p_:d_}a(BC,"chooseScalarStyle");function $C(r,e,t,i,n){r.dump=(function(){if(e.length===0)return r.quotingType===ja?'""':"''";if(!r.noCompatMode&&(IC.indexOf(e)!==-1||NC.test(e)))return r.quotingType===ja?'"'+e+'"':"'"+e+"'";var s=r.indent*Math.max(1,t),o=r.lineWidth===-1?-1:Math.max(Math.min(r.lineWidth,40),r.lineWidth-s),c=i||r.flowLevel>-1&&t>=r.flowLevel;function u(f){return qC(r,f)}switch(a(u,"testAmbiguity"),BC(e,c,r.indent,o,u,r.quotingType,r.forceQuotes&&!i,n)){case h_:return e;case kp:return"'"+e.replace(/'/g,"''")+"'";case d_:return"|"+E3(e,r.indent)+T3(b3(e,s));case p_:return">"+E3(e,r.indent)+T3(b3(GC(e,o),s));case Ps:return'"'+WC(e)+'"';default:throw new Yt("impossible error: invalid scalar style")}})()}a($C,"writeScalar");function E3(r,e){var t=f_(r)?String(e):"",i=r[r.length-1]===`
`,n=i&&(r[r.length-2]===`
`||r===`
`),s=n?"+":i?"":"-";return t+s+`
`}a(E3,"blockHeader");function T3(r){return r[r.length-1]===`
`?r.slice(0,-1):r}a(T3,"dropEndingNewline");function GC(r,e){for(var t=/(\n+)([^\n]*)/g,i=(function(){var f=r.indexOf(`
`);return f=f!==-1?f:r.length,t.lastIndex=f,A3(r.slice(0,f),e)})(),n=r[0]===`
`||r[0]===" ",s,o;o=t.exec(r);){var c=o[1],u=o[2];s=u[0]===" ",i+=c+(!n&&!s&&u!==""?`
`:"")+A3(u,e),n=s}return i}a(GC,"foldString");function A3(r,e){if(r===""||r[0]===" ")return r;for(var t=/ [^ ]/g,i,n=0,s,o=0,c=0,u="";i=t.exec(r);)c=i.index,c-n>e&&(s=o>n?o:c,u+=`
`+r.slice(n,s),n=s+1),o=c;return u+=`
`,r.length-n>e&&o>n?u+=r.slice(n,o)+`
`+r.slice(o+1):u+=r.slice(n),u.slice(1)}a(A3,"foldLine");function WC(r){for(var e="",t=0,i,n=0;n<r.length;t>=65536?n+=2:n++)t=Ia(r,n),i=Nt[t],!i&&Ma(t)?(e+=r[n],t>=65536&&(e+=r[n+1])):e+=i||jC(t);return e}a(WC,"escapeString");function HC(r,e,t){var i="",n=r.tag,s,o,c;for(s=0,o=t.length;s<o;s+=1)c=t[s],r.replacer&&(c=r.replacer.call(t,String(s),c)),(Li(r,e,c,!1,!1)||typeof c>"u"&&Li(r,e,null,!1,!1))&&(i!==""&&(i+=","+(r.condenseFlow?"":" ")),i+=r.dump);r.tag=n,r.dump="["+i+"]"}a(HC,"writeFlowSequence");function x3(r,e,t,i){var n="",s=r.tag,o,c,u;for(o=0,c=t.length;o<c;o+=1)u=t[o],r.replacer&&(u=r.replacer.call(t,String(o),u)),(Li(r,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&Li(r,e+1,null,!0,!0,!1,!0))&&((!i||n!=="")&&(n+=Np(r,e)),r.dump&&ka===r.dump.charCodeAt(0)?n+="-":n+="- ",n+=r.dump);r.tag=s,r.dump=n||"[]"}a(x3,"writeBlockSequence");function zC(r,e,t){var i="",n=r.tag,s=Object.keys(t),o,c,u,f,l;for(o=0,c=s.length;o<c;o+=1)l="",i!==""&&(l+=", "),r.condenseFlow&&(l+='"'),u=s[o],f=t[u],r.replacer&&(f=r.replacer.call(t,u,f)),Li(r,e,u,!1,!1)&&(r.dump.length>1024&&(l+="? "),l+=r.dump+(r.condenseFlow?'"':"")+":"+(r.condenseFlow?"":" "),Li(r,e,f,!1,!1)&&(l+=r.dump,i+=l));r.tag=n,r.dump="{"+i+"}"}a(zC,"writeFlowMapping");function KC(r,e,t,i){var n="",s=r.tag,o=Object.keys(t),c,u,f,l,h,p;if(r.sortKeys===!0)o.sort();else if(typeof r.sortKeys=="function")o.sort(r.sortKeys);else if(r.sortKeys)throw new Yt("sortKeys must be a boolean or a function");for(c=0,u=o.length;c<u;c+=1)p="",(!i||n!=="")&&(p+=Np(r,e)),f=o[c],l=t[f],r.replacer&&(l=r.replacer.call(t,f,l)),Li(r,e+1,f,!0,!0,!0)&&(h=r.tag!==null&&r.tag!=="?"||r.dump&&r.dump.length>1024,h&&(r.dump&&ka===r.dump.charCodeAt(0)?p+="?":p+="? "),p+=r.dump,h&&(p+=Np(r,e)),Li(r,e+1,l,!0,h)&&(r.dump&&ka===r.dump.charCodeAt(0)?p+=":":p+=": ",p+=r.dump,n+=p));r.tag=s,r.dump=n||"{}"}a(KC,"writeBlockMapping");function C3(r,e,t){var i,n,s,o,c,u;for(n=t?r.explicitTypes:r.implicitTypes,s=0,o=n.length;s<o;s+=1)if(c=n[s],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof e=="object"&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(t?c.multi&&c.representName?r.tag=c.representName(e):r.tag=c.tag:r.tag="?",c.represent){if(u=r.styleMap[c.tag]||c.defaultStyle,n_.call(c.represent)==="[object Function]")i=c.represent(e,u);else if(s_.call(c.represent,u))i=c.represent[u](e,u);else throw new Yt("!<"+c.tag+'> tag resolver accepts not "'+u+'" style');r.dump=i}return!0}return!1}a(C3,"detectType");function Li(r,e,t,i,n,s,o){r.tag=null,r.dump=t,C3(r,t,!1)||C3(r,t,!0);var c=n_.call(r.dump),u=i,f;i&&(i=r.flowLevel<0||r.flowLevel>e);var l=c==="[object Object]"||c==="[object Array]",h,p;if(l&&(h=r.duplicates.indexOf(t),p=h!==-1),(r.tag!==null&&r.tag!=="?"||p||r.indent!==2&&e>0)&&(n=!1),p&&r.usedDuplicates[h])r.dump="*ref_"+h;else{if(l&&p&&!r.usedDuplicates[h]&&(r.usedDuplicates[h]=!0),c==="[object Object]")i&&Object.keys(r.dump).length!==0?(KC(r,e,r.dump,n),p&&(r.dump="&ref_"+h+r.dump)):(zC(r,e,r.dump),p&&(r.dump="&ref_"+h+" "+r.dump));else if(c==="[object Array]")i&&r.dump.length!==0?(r.noArrayIndent&&!o&&e>0?x3(r,e-1,r.dump,n):x3(r,e,r.dump,n),p&&(r.dump="&ref_"+h+r.dump)):(HC(r,e,r.dump),p&&(r.dump="&ref_"+h+" "+r.dump));else if(c==="[object String]")r.tag!=="?"&&$C(r,r.dump,e,s,u);else{if(c==="[object Undefined]")return!1;if(r.skipInvalid)return!1;throw new Yt("unacceptable kind of an object to dump "+c)}r.tag!==null&&r.tag!=="?"&&(f=encodeURI(r.tag[0]==="!"?r.tag.slice(1):r.tag).replace(/!/g,"%21"),r.tag[0]==="!"?f="!"+f:f.slice(0,18)==="tag:yaml.org,2002:"?f="!!"+f.slice(18):f="!<"+f+">",r.dump=f+" "+r.dump)}return!0}a(Li,"writeNode");function YC(r,e){var t=[],i=[],n,s;for(jp(r,t,i),n=0,s=i.length;n<s;n+=1)e.duplicates.push(t[i[n]]);e.usedDuplicates=new Array(s)}a(YC,"getDuplicateReferences");function jp(r,e,t){var i,n,s;if(r!==null&&typeof r=="object")if(n=e.indexOf(r),n!==-1)t.indexOf(n)===-1&&t.push(n);else if(e.push(r),Array.isArray(r))for(n=0,s=r.length;n<s;n+=1)jp(r[n],e,t);else for(i=Object.keys(r),n=0,s=i.length;n<s;n+=1)jp(r[i[n]],e,t)}a(jp,"inspectNode");function QC(r,e){e=e||{};var t=new LC(e);t.noRefs||YC(r,t);var i=r;return t.replacer&&(i=t.replacer.call({"":i},"",i)),Li(t,0,i,!0,!0)?t.dump+`
`:""}a(QC,"dump$1");var JC=QC,XC={dump:JC};function Bp(r,e){return function(){throw new Error("Function yaml."+r+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}a(Bp,"renamed");var ZC=Ot,eO=P3,tO=N3,rO=q3,iO=V3,nO=Lp,sO=i_.load,aO=i_.loadAll,oO=XC.dump,cO=Yt,uO={binary:W3,float:L3,map:I3,null:k3,pairs:z3,set:K3,timestamp:$3,bool:j3,int:M3,merge:G3,omap:H3,seq:R3,str:D3},lO=Bp("safeLoad","load"),fO=Bp("safeLoadAll","loadAll"),hO=Bp("safeDump","dump"),dO={Type:ZC,Schema:eO,FAILSAFE_SCHEMA:tO,JSON_SCHEMA:rO,CORE_SCHEMA:iO,DEFAULT_SCHEMA:nO,load:sO,loadAll:aO,dump:oO,YAMLException:cO,types:uO,safeLoad:lO,safeLoadAll:fO,safeDump:hO},La=dO;var Iu=class{constructor(e){this.rootPath=e}static{a(this,"FileSystemVaultAdapter")}async read(e){let t=this.resolvePath(e.path);if(!await ft.default.pathExists(t))throw new Error(`File not found: ${e.path}`);return ft.default.readFile(t,"utf-8")}async create(e,t){let i=this.resolvePath(e);if(await ft.default.pathExists(i))throw new Error(`File already exists: ${e}`);return await ft.default.ensureDir(kt.default.dirname(i)),await ft.default.writeFile(i,t,"utf-8"),this.createFileObject(e)}async modify(e,t){let i=this.resolvePath(e.path);if(!await ft.default.pathExists(i))throw new Error(`File not found: ${e.path}`);await ft.default.writeFile(i,t,"utf-8")}async delete(e){let t=this.resolvePath(e.path);if(!await ft.default.pathExists(t))throw new Error(`File not found: ${e.path}`);await ft.default.remove(t)}async exists(e){let t=this.resolvePath(e);return ft.default.pathExists(t)}getAbstractFileByPath(e){let t=this.resolvePath(e);try{let i=ft.default.statSync(t);if(i.isFile())return this.createFileObject(e);if(i.isDirectory())return this.createFolderObject(e)}catch{return null}return null}getAllFiles(){let e=[];return this.walkDirectory(this.rootPath,t=>{if(t.endsWith(".md")){let i=kt.default.relative(this.rootPath,t);e.push(this.createFileObject(i))}}),e}getFrontmatter(e){try{let t=ft.default.readFileSync(this.resolvePath(e.path),"utf-8");return this.extractFrontmatter(t)}catch{return null}}async updateFrontmatter(e,t){let i=await this.read(e),n=this.extractFrontmatter(i)||{},s=t(n),o=this.replaceFrontmatter(i,s);await this.modify(e,o)}async rename(e,t){let i=this.resolvePath(e.path),n=this.resolvePath(t);if(!await ft.default.pathExists(i))throw new Error(`File not found: ${e.path}`);await ft.default.ensureDir(kt.default.dirname(n)),await ft.default.move(i,n)}async createFolder(e){let t=this.resolvePath(e);await ft.default.ensureDir(t)}getFirstLinkpathDest(e,t){let i=kt.default.dirname(this.resolvePath(t)),n;if(kt.default.isAbsolute(e)?n=this.resolvePath(e):n=kt.default.resolve(i,e),e.endsWith(".md")||(n+=".md"),ft.default.existsSync(n)){let s=kt.default.relative(this.rootPath,n);return this.createFileObject(s)}return null}async process(e,t){let i=await this.read(e),n=t(i);return await this.modify(e,n),n}getDefaultNewFileParent(){return{path:"",name:""}}async updateLinks(e,t,i){return Promise.resolve()}resolvePath(e){return kt.default.isAbsolute(e)?e:kt.default.join(this.rootPath,e)}createFileObject(e){let t=kt.default.basename(e),i=kt.default.basename(e,kt.default.extname(e)),n=kt.default.dirname(e);return{path:e,basename:t,name:i,parent:n!=="."?this.createFolderObject(n):null}}createFolderObject(e){return{path:e,name:kt.default.basename(e)}}extractFrontmatter(e){let t=/^---\n([\s\S]*?)\n---/,i=e.match(t);if(!i)return null;try{let n=La.load(i[1]);return typeof n=="object"&&n!==null?n:null}catch{return null}}replaceFrontmatter(e,t){let i=La.dump(t,{lineWidth:-1,noRefs:!0,quotingType:'"'}),n=/^---\n([\s\S]*?)\n---/;return e.match(n)?e.replace(n,`---
${i.trim()}
---`):`---
${i.trim()}
---
${e}`}walkDirectory(e,t){let i=ft.default.readdirSync(e,{withFileTypes:!0});for(let n of i){let s=kt.default.join(e,n.name);n.isDirectory()?this.walkDirectory(s,t):n.isFile()&&t(s)}}};var Nu=class{static{a(this,"TableFormatter")}format(e){if(e.length===0)return"No results";let t=this.getAllVariables(e),i=e.map(n=>this.solutionToRow(n,t));return this.renderTable(t,i)}getAllVariables(e){let t=new Set;for(let i of e)for(let n of i.variables())t.add(n);return Array.from(t).sort()}solutionToRow(e,t){return t.map(i=>{let n=e.get(i);return n?this.formatValue(n.toString()):""})}formatValue(e){return e.length>50?e.substring(0,47)+"...":e}renderTable(e,t){let i=e.map((s,o)=>{let c=s.length+1,u=Math.max(...t.map(f=>f[o]?.length||0));return Math.max(c,u,10)}),n=[];n.push(this.renderSeparator(i,"top")),n.push(this.renderRow(e.map(s=>`?${s}`),i)),n.push(this.renderSeparator(i,"mid"));for(let s of t)n.push(this.renderRow(s,i));return n.push(this.renderSeparator(i,"bottom")),n.join(`
`)}renderRow(e,t){return`\u2502 ${e.map((n,s)=>n.padEnd(t[s])).join(" \u2502 ")} \u2502`}renderSeparator(e,t){let i=t==="top"?"\u250C":t==="mid"?"\u251C":"\u2514",n=t==="top"?"\u2510":t==="mid"?"\u2524":"\u2518",o=t==="mid"?"\u2500\u253C\u2500":"\u2500"+(t==="mid"?"\u253C":"\u2500")+"\u2500",c=e.map(u=>"\u2500".repeat(u+2));return`${i}${c.join(o)}${n}`}};var ku=class{static{a(this,"JsonFormatter")}format(e){let t=e.map(i=>i.toJSON());return JSON.stringify(t,null,2)}};function m_(){return new ns("query").description("Execute SPARQL query against Obsidian vault").argument("<query>","SPARQL query string or path to .sparql file").option("--vault <path>","Path to Obsidian vault",process.cwd()).option("--format <type>","Output format: table|json|csv","table").option("--explain","Show optimized query plan").option("--stats","Show execution statistics").option("--no-optimize","Disable query optimization").action(async(r,e)=>{try{let t=Date.now(),i=pO(r),n=(0,$p.resolve)(e.vault);(0,qa.existsSync)(n)||(console.error(`\u274C Error: Vault not found: ${n}`),process.exit(1)),console.log(`\u{1F4E6} Loading vault: ${n}...`);let s=Date.now(),o=new Iu(n),u=await new sr.NoteToRDFConverter(o).convertVault(),f=new sr.InMemoryTripleStore;await f.addAll(u);let l=Date.now()-s;console.log(`\u2705 Loaded ${u.length} triples in ${l}ms
`),console.log("\u{1F50D} Parsing SPARQL query...");let p=new sr.SPARQLParser().parse(i);console.log("\u{1F504} Translating to algebra...");let v=new sr.AlgebraTranslator().translate(p);if(e.noOptimize?console.log(`\u26A0\uFE0F  Query optimization disabled
`):v=new sr.AlgebraOptimizer().optimize(v),e.explain){console.log("\u{1F4CA} Query Plan:");let G=new sr.AlgebraSerializer;console.log(G.toString(v)),console.log()}console.log("\u{1F3AF} Executing query...");let S=Date.now(),F=await new sr.QueryExecutor(f).executeAll(v),D=Date.now()-S,U=Date.now()-t;console.log(`\u2705 Found ${F.length} result(s) in ${D}ms
`),F.length>0?mO(F,e.format):console.log("No results found."),e.stats&&(console.log(`
\u{1F4CA} Execution Statistics:`),console.log(`  Vault loading: ${l}ms`),console.log(`  Query execution: ${D}ms`),console.log(`  Total time: ${U}ms`),console.log(`  Triples scanned: ${u.length}`),console.log(`  Results returned: ${F.length}`))}catch(t){t instanceof Error?(console.error(`\u274C Error: ${t.message}`),t.stack&&console.error(t.stack)):console.error("\u274C Unknown error:",t),process.exit(1)}})}a(m_,"sparqlQueryCommand");function pO(r){if(r.includes("SELECT")||r.includes("CONSTRUCT"))return r;let e=(0,$p.resolve)(r);return(0,qa.existsSync)(e)?(0,qa.readFileSync)(e,"utf-8"):r}a(pO,"loadQuery");function mO(r,e){switch(e){case"json":let t=new ku;console.log(t.format(r));break;case"table":default:let i=new Nu;console.log(i.format(r));break}}a(mO,"formatResults");var Sv=require("path");var ht=mt(xu()),ln=mt(require("path"));var j_=mt(O_(),1);var Ua=a(r=>{if(typeof r!="string")throw new TypeError("invalid pattern");if(r.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");var EO={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Ba=a(r=>r.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),TO=a(r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),F_=a(r=>r.join(""),"rangesToString"),P_=a((r,e)=>{let t=e;if(r.charAt(t)!=="[")throw new Error("not in a brace expression");let i=[],n=[],s=t+1,o=!1,c=!1,u=!1,f=!1,l=t,h="";e:for(;s<r.length;){let S=r.charAt(s);if((S==="!"||S==="^")&&s===t+1){f=!0,s++;continue}if(S==="]"&&o&&!u){l=s+1;break}if(o=!0,S==="\\"&&!u){u=!0,s++;continue}if(S==="["&&!u){for(let[x,[F,D,U]]of Object.entries(EO))if(r.startsWith(x,s)){if(h)return["$.",!1,r.length-t,!0];s+=x.length,U?n.push(F):i.push(F),c=c||D;continue e}}if(u=!1,h){S>h?i.push(Ba(h)+"-"+Ba(S)):S===h&&i.push(Ba(S)),h="",s++;continue}if(r.startsWith("-]",s+1)){i.push(Ba(S+"-")),s+=2;continue}if(r.startsWith("-",s+1)){h=S,s+=2;continue}i.push(Ba(S)),s++}if(l<s)return["",!1,0,!1];if(!i.length&&!n.length)return["$.",!1,r.length-t,!0];if(n.length===0&&i.length===1&&/^\\?.$/.test(i[0])&&!f){let S=i[0].length===2?i[0].slice(-1):i[0];return[TO(S),!1,l-t,!1]}let p="["+(f?"^":"")+F_(i)+"]",g="["+(f?"":"^")+F_(n)+"]";return[i.length&&n.length?"("+p+"|"+g+")":i.length?p:g,c,l-t,!0]},"parseClass");var Qr=a((r,{windowsPathsNoEscape:e=!1}={})=>e?r.replace(/\[([^\/\\])\]/g,"$1"):r.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var AO=new Set(["!","?","+","*","@"]),D_=a(r=>AO.has(r),"isExtglobType"),xO="(?!(?:^|/)\\.\\.?(?:$|/))",ju="(?!\\.)",CO=new Set(["[","."]),OO=new Set(["..","."]),FO=new Set("().*{}+?[]^$\\!"),PO=a(r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),Hp="[^/]",R_=Hp+"*?",I_=Hp+"+?",Ns=class r{static{a(this,"AST")}type;#e;#t;#s=!1;#i=[];#a;#b;#u;#f=!1;#o;#c;#n=!1;constructor(e,t,i={}){this.type=e,e&&(this.#t=!0),this.#a=t,this.#e=this.#a?this.#a.#e:this,this.#o=this.#e===this?i:this.#e.#o,this.#u=this.#e===this?[]:this.#e.#u,e==="!"&&!this.#e.#f&&this.#u.push(this),this.#b=this.#a?this.#a.#i.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#i)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#i.map(e=>String(e)).join("|")+")":this.#c=this.#i.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#f)return this;this.toString(),this.#f=!0;let e;for(;e=this.#u.pop();){if(e.type!=="!")continue;let t=e,i=t.#a;for(;i;){for(let n=t.#b+1;!i.type&&n<i.#i.length;n++)for(let s of e.#i){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(i.#i[n])}t=i,i=t.#a}}return this}push(...e){for(let t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof r&&t.#a===this))throw new Error("invalid part: "+t);this.#i.push(t)}}toJSON(){let e=this.type===null?this.#i.slice().map(t=>typeof t=="string"?t:t.toJSON()):[this.type,...this.#i.map(t=>t.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#f&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#b===0)return!0;let e=this.#a;for(let t=0;t<this.#b;t++){let i=e.#i[t];if(!(i instanceof r&&i.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#i.length:0;return this.#b===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let t=new r(this.type,e);for(let i of this.#i)t.copyIn(i);return t}static#y(e,t,i,n){let s=!1,o=!1,c=-1,u=!1;if(t.type===null){let g=i,v="";for(;g<e.length;){let S=e.charAt(g++);if(s||S==="\\"){s=!s,v+=S;continue}if(o){g===c+1?(S==="^"||S==="!")&&(u=!0):S==="]"&&!(g===c+2&&u)&&(o=!1),v+=S;continue}else if(S==="["){o=!0,c=g,u=!1,v+=S;continue}if(!n.noext&&D_(S)&&e.charAt(g)==="("){t.push(v),v="";let x=new r(S,t);g=r.#y(e,x,g,n),t.push(x);continue}v+=S}return t.push(v),g}let f=i+1,l=new r(null,t),h=[],p="";for(;f<e.length;){let g=e.charAt(f++);if(s||g==="\\"){s=!s,p+=g;continue}if(o){f===c+1?(g==="^"||g==="!")&&(u=!0):g==="]"&&!(f===c+2&&u)&&(o=!1),p+=g;continue}else if(g==="["){o=!0,c=f,u=!1,p+=g;continue}if(D_(g)&&e.charAt(f)==="("){l.push(p),p="";let v=new r(g,l);l.push(v),f=r.#y(e,v,f,n);continue}if(g==="|"){l.push(p),p="",h.push(l),l=new r(null,t);continue}if(g===")")return p===""&&t.#i.length===0&&(t.#n=!0),l.push(p),p="",t.push(...h,l),f;p+=g}return t.type=null,t.#t=void 0,t.#i=[e.substring(i-1)],f}static fromGlob(e,t={}){let i=new r(null,void 0,t);return r.#y(e,i,0,t),i}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[t,i,n,s]=this.toRegExpSource();if(!(n||this.#t||this.#o.nocase&&!this.#o.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return i;let c=(this.#o.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${t}$`,c),{_src:t,_glob:e})}get options(){return this.#o}toRegExpSource(e){let t=e??!!this.#o.dot;if(this.#e===this&&this.#g(),!this.type){let u=this.isStart()&&this.isEnd(),f=this.#i.map(g=>{let[v,S,x,F]=typeof g=="string"?r.#h(g,this.#t,u):g.toRegExpSource(e);return this.#t=this.#t||x,this.#s=this.#s||F,v}).join(""),l="";if(this.isStart()&&typeof this.#i[0]=="string"&&!(this.#i.length===1&&OO.has(this.#i[0]))){let v=CO,S=t&&v.has(f.charAt(0))||f.startsWith("\\.")&&v.has(f.charAt(2))||f.startsWith("\\.\\.")&&v.has(f.charAt(4)),x=!t&&!e&&v.has(f.charAt(0));l=S?xO:x?ju:""}let h="";return this.isEnd()&&this.#e.#f&&this.#a?.type==="!"&&(h="(?:$|\\/)"),[l+f+h,Qr(f),this.#t=!!this.#t,this.#s]}let i=this.type==="*"||this.type==="+",n=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#d(t);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let u=this.toString();return this.#i=[u],this.type=null,this.#t=void 0,[u,Qr(this.toString()),!1,!1]}let o=!i||e||t||!ju?"":this.#d(!0);o===s&&(o=""),o&&(s=`(?:${s})(?:${o})*?`);let c="";if(this.type==="!"&&this.#n)c=(this.isStart()&&!t?ju:"")+I_;else{let u=this.type==="!"?"))"+(this.isStart()&&!t&&!e?ju:"")+R_+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&o?")":this.type==="*"&&o?")?":`)${this.type}`;c=n+s+u}return[c,Qr(s),this.#t=!!this.#t,this.#s]}#d(e){return this.#i.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");let[i,n,s,o]=t.toRegExpSource(e);return this.#s=this.#s||o,i}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#h(e,t,i=!1){let n=!1,s="",o=!1;for(let c=0;c<e.length;c++){let u=e.charAt(c);if(n){n=!1,s+=(FO.has(u)?"\\":"")+u;continue}if(u==="\\"){c===e.length-1?s+="\\\\":n=!0;continue}if(u==="["){let[f,l,h,p]=P_(e,c);if(h){s+=f,o=o||l,c+=h-1,t=t||p;continue}}if(u==="*"){i&&e==="*"?s+=I_:s+=R_,t=!0;continue}if(u==="?"){s+=Hp,t=!0;continue}s+=PO(u)}return[s,Qr(e),!!t,o]}};var ks=a((r,{windowsPathsNoEscape:e=!1}={})=>e?r.replace(/[?*()[\]]/g,"[$&]"):r.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var Qt=a((r,e,t={})=>(Ua(e),!t.nocomment&&e.charAt(0)==="#"?!1:new pr(e,t).match(r)),"minimatch"),DO=/^\*+([^+@!?\*\[\(]*)$/,RO=a(r=>e=>!e.startsWith(".")&&e.endsWith(r),"starDotExtTest"),IO=a(r=>e=>e.endsWith(r),"starDotExtTestDot"),NO=a(r=>(r=r.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(r)),"starDotExtTestNocase"),kO=a(r=>(r=r.toLowerCase(),e=>e.toLowerCase().endsWith(r)),"starDotExtTestNocaseDot"),jO=/^\*+\.\*+$/,MO=a(r=>!r.startsWith(".")&&r.includes("."),"starDotStarTest"),LO=a(r=>r!=="."&&r!==".."&&r.includes("."),"starDotStarTestDot"),qO=/^\.\*+$/,VO=a(r=>r!=="."&&r!==".."&&r.startsWith("."),"dotStarTest"),UO=/^\*+$/,BO=a(r=>r.length!==0&&!r.startsWith("."),"starTest"),$O=a(r=>r.length!==0&&r!=="."&&r!=="..","starTestDot"),GO=/^\?+([^+@!?\*\[\(]*)?$/,WO=a(([r,e=""])=>{let t=M_([r]);return e?(e=e.toLowerCase(),i=>t(i)&&i.toLowerCase().endsWith(e)):t},"qmarksTestNocase"),HO=a(([r,e=""])=>{let t=L_([r]);return e?(e=e.toLowerCase(),i=>t(i)&&i.toLowerCase().endsWith(e)):t},"qmarksTestNocaseDot"),zO=a(([r,e=""])=>{let t=L_([r]);return e?i=>t(i)&&i.endsWith(e):t},"qmarksTestDot"),KO=a(([r,e=""])=>{let t=M_([r]);return e?i=>t(i)&&i.endsWith(e):t},"qmarksTest"),M_=a(([r])=>{let e=r.length;return t=>t.length===e&&!t.startsWith(".")},"qmarksTestNoExt"),L_=a(([r])=>{let e=r.length;return t=>t.length===e&&t!=="."&&t!==".."},"qmarksTestNoExtDot"),q_=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",N_={win32:{sep:"\\"},posix:{sep:"/"}},YO=q_==="win32"?N_.win32.sep:N_.posix.sep;Qt.sep=YO;var Ft=Symbol("globstar **");Qt.GLOBSTAR=Ft;var QO="[^/]",JO=QO+"*?",XO="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",ZO="(?:(?!(?:\\/|^)\\.).)*?",e8=a((r,e={})=>t=>Qt(t,r,e),"filter");Qt.filter=e8;var Er=a((r,e={})=>Object.assign({},r,e),"ext"),t8=a(r=>{if(!r||typeof r!="object"||!Object.keys(r).length)return Qt;let e=Qt;return Object.assign(a((i,n,s={})=>e(i,n,Er(r,s)),"m"),{Minimatch:class extends e.Minimatch{static{a(this,"Minimatch")}constructor(n,s={}){super(n,Er(r,s))}static defaults(n){return e.defaults(Er(r,n)).Minimatch}},AST:class extends e.AST{static{a(this,"AST")}constructor(n,s,o={}){super(n,s,Er(r,o))}static fromGlob(n,s={}){return e.AST.fromGlob(n,Er(r,s))}},unescape:a((i,n={})=>e.unescape(i,Er(r,n)),"unescape"),escape:a((i,n={})=>e.escape(i,Er(r,n)),"escape"),filter:a((i,n={})=>e.filter(i,Er(r,n)),"filter"),defaults:a(i=>e.defaults(Er(r,i)),"defaults"),makeRe:a((i,n={})=>e.makeRe(i,Er(r,n)),"makeRe"),braceExpand:a((i,n={})=>e.braceExpand(i,Er(r,n)),"braceExpand"),match:a((i,n,s={})=>e.match(i,n,Er(r,s)),"match"),sep:e.sep,GLOBSTAR:Ft})},"defaults");Qt.defaults=t8;var V_=a((r,e={})=>(Ua(r),e.nobrace||!/\{(?:(?!\{).)*\}/.test(r)?[r]:(0,j_.default)(r)),"braceExpand");Qt.braceExpand=V_;var r8=a((r,e={})=>new pr(r,e).makeRe(),"makeRe");Qt.makeRe=r8;var i8=a((r,e,t={})=>{let i=new pr(e,t);return r=r.filter(n=>i.match(n)),i.options.nonull&&!r.length&&r.push(e),r},"match");Qt.match=i8;var k_=/[?*]|[+@!]\(.*?\)|\[|\]/,n8=a(r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),pr=class{static{a(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){Ua(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||q_,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let i=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(i),this.debug(this.pattern,this.globParts);let n=this.globParts.map((s,o,c)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=s[0]===""&&s[1]===""&&(s[2]==="?"||!k_.test(s[2]))&&!k_.test(s[3]),f=/^[a-z]:/i.test(s[0]);if(u)return[...s.slice(0,4),...s.slice(4).map(l=>this.parse(l))];if(f)return[s[0],...s.slice(1).map(l=>this.parse(l))]}return s.map(u=>this.parse(u))});if(this.debug(this.pattern,n),this.set=n.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let o=this.set[s];o[0]===""&&o[1]===""&&this.globParts[s][2]==="?"&&typeof o[3]=="string"&&/^[a-z]:$/i.test(o[3])&&(o[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let i=0;i<e.length;i++)for(let n=0;n<e[i].length;n++)e[i][n]==="**"&&(e[i][n]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let i=-1;for(;(i=t.indexOf("**",i+1))!==-1;){let n=i;for(;t[n+1]==="**";)n++;n!==i&&t.splice(i,n-i)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((i,n)=>{let s=i[i.length-1];return n==="**"&&s==="**"?i:n===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(i.pop(),i):(i.push(n),i)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let n=1;n<e.length-1;n++){let s=e[n];n===1&&s===""&&e[0]===""||(s==="."||s==="")&&(t=!0,e.splice(n,1),n--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let i=0;for(;(i=e.indexOf("..",i+1))!==-1;){let n=e[i-1];n&&n!=="."&&n!==".."&&n!=="**"&&(t=!0,e.splice(i-1,2),i-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let i of e){let n=-1;for(;(n=i.indexOf("**",n+1))!==-1;){let o=n;for(;i[o+1]==="**";)o++;o>n&&i.splice(n+1,o-n);let c=i[n+1],u=i[n+2],f=i[n+3];if(c!==".."||!u||u==="."||u===".."||!f||f==="."||f==="..")continue;t=!0,i.splice(n,1);let l=i.slice(0);l[n]="**",e.push(l),n--}if(!this.preserveMultipleSlashes){for(let o=1;o<i.length-1;o++){let c=i[o];o===1&&c===""&&i[0]===""||(c==="."||c==="")&&(t=!0,i.splice(o,1),o--)}i[0]==="."&&i.length===2&&(i[1]==="."||i[1]==="")&&(t=!0,i.pop())}let s=0;for(;(s=i.indexOf("..",s+1))!==-1;){let o=i[s-1];if(o&&o!=="."&&o!==".."&&o!=="**"){t=!0;let u=s===1&&i[s+1]==="**"?["."]:[];i.splice(s-1,2,...u),i.length===0&&i.push(""),s-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let i=t+1;i<e.length;i++){let n=this.partsMatch(e[t],e[i],!this.preserveMultipleSlashes);if(n){e[t]=[],e[i]=n;break}}return e.filter(t=>t.length)}partsMatch(e,t,i=!1){let n=0,s=0,o=[],c="";for(;n<e.length&&s<t.length;)if(e[n]===t[s])o.push(c==="b"?t[s]:e[n]),n++,s++;else if(i&&e[n]==="**"&&t[s]===e[n+1])o.push(e[n]),n++;else if(i&&t[s]==="**"&&e[n]===t[s+1])o.push(t[s]),s++;else if(e[n]==="*"&&t[s]&&(this.options.dot||!t[s].startsWith("."))&&t[s]!=="**"){if(c==="b")return!1;c="a",o.push(e[n]),n++,s++}else if(t[s]==="*"&&e[n]&&(this.options.dot||!e[n].startsWith("."))&&e[n]!=="**"){if(c==="a")return!1;c="b",o.push(t[s]),n++,s++}else return!1;return e.length===t.length&&o}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,i=0;for(let n=0;n<e.length&&e.charAt(n)==="!";n++)t=!t,i++;i&&(this.pattern=e.slice(i)),this.negate=t}matchOne(e,t,i=!1){let n=this.options;if(this.isWindows){let S=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),x=!S&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),F=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),D=!F&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),U=x?3:S?0:void 0,G=D?3:F?0:void 0;if(typeof U=="number"&&typeof G=="number"){let[ee,Fe]=[e[U],t[G]];ee.toLowerCase()===Fe.toLowerCase()&&(t[G]=ee,G>U?t=t.slice(G):U>G&&(e=e.slice(U)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var o=0,c=0,u=e.length,f=t.length;o<u&&c<f;o++,c++){this.debug("matchOne loop");var l=t[c],h=e[o];if(this.debug(t,l,h),l===!1)return!1;if(l===Ft){this.debug("GLOBSTAR",[t,l,h]);var p=o,g=c+1;if(g===f){for(this.debug("** at the end");o<u;o++)if(e[o]==="."||e[o]===".."||!n.dot&&e[o].charAt(0)===".")return!1;return!0}for(;p<u;){var v=e[p];if(this.debug(`
globstar while`,e,p,t,g,v),this.matchOne(e.slice(p),t.slice(g),i))return this.debug("globstar found match!",p,u,v),!0;if(v==="."||v===".."||!n.dot&&v.charAt(0)==="."){this.debug("dot detected!",e,p,t,g);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(i&&(this.debug(`
>>> no match, partial?`,e,p,t,g),p===u))}let S;if(typeof l=="string"?(S=h===l,this.debug("string match",l,h,S)):(S=l.test(h),this.debug("pattern match",l,h,S)),!S)return!1}if(o===u&&c===f)return!0;if(o===u)return i;if(c===f)return o===u-1&&e[o]==="";throw new Error("wtf?")}braceExpand(){return V_(this.pattern,this.options)}parse(e){Ua(e);let t=this.options;if(e==="**")return Ft;if(e==="")return"";let i,n=null;(i=e.match(UO))?n=t.dot?$O:BO:(i=e.match(DO))?n=(t.nocase?t.dot?kO:NO:t.dot?IO:RO)(i[1]):(i=e.match(GO))?n=(t.nocase?t.dot?HO:WO:t.dot?zO:KO)(i):(i=e.match(jO))?n=t.dot?LO:MO:(i=e.match(qO))&&(n=VO);let s=Ns.fromGlob(e,this.options).toMMPattern();return n&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:n}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,i=t.noglobstar?JO:t.dot?XO:ZO,n=new Set(t.nocase?["i"]:[]),s=e.map(u=>{let f=u.map(l=>{if(l instanceof RegExp)for(let h of l.flags.split(""))n.add(h);return typeof l=="string"?n8(l):l===Ft?Ft:l._src});return f.forEach((l,h)=>{let p=f[h+1],g=f[h-1];l!==Ft||g===Ft||(g===void 0?p!==void 0&&p!==Ft?f[h+1]="(?:\\/|"+i+"\\/)?"+p:f[h]=i:p===void 0?f[h-1]=g+"(?:\\/|"+i+")?":p!==Ft&&(f[h-1]=g+"(?:\\/|\\/"+i+"\\/)"+p,f[h+1]=Ft))}),f.filter(l=>l!==Ft).join("/")}).join("|"),[o,c]=e.length>1?["(?:",")"]:["",""];s="^"+o+s+c+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...n].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let i=this.options;this.isWindows&&(e=e.split("\\").join("/"));let n=this.slashSplit(e);this.debug(this.pattern,"split",n);let s=this.set;this.debug(this.pattern,"set",s);let o=n[n.length-1];if(!o)for(let c=n.length-2;!o&&c>=0;c--)o=n[c];for(let c=0;c<s.length;c++){let u=s[c],f=n;if(i.matchBase&&u.length===1&&(f=[o]),this.matchOne(f,u,t))return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}static defaults(e){return Qt.defaults(e).Minimatch}};Qt.AST=Ns;Qt.Minimatch=pr;Qt.escape=ks;Qt.unescape=Qr;var lv=require("node:url");var js=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,B_=new Set,zp=typeof process=="object"&&process?process:{},$_=a((r,e,t,i)=>{typeof zp.emitWarning=="function"?zp.emitWarning(r,e,t,i):console.error(`[${t}] ${e}: ${r}`)},"emitWarning"),Mu=globalThis.AbortController,U_=globalThis.AbortSignal;if(typeof Mu>"u"){U_=class{static{a(this,"AbortSignal")}onabort;_onabort=[];reason;aborted=!1;addEventListener(i,n){this._onabort.push(n)}},Mu=class{static{a(this,"AbortController")}constructor(){e()}signal=new U_;abort(i){if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(let n of this.signal._onabort)n(i);this.signal.onabort?.(i)}}};let r=zp.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=a(()=>{r&&(r=!1,$_("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))},"warnACPolyfill")}var s8=a(r=>!B_.has(r),"shouldWarn"),yM=Symbol("type"),an=a(r=>r&&r===Math.floor(r)&&r>0&&isFinite(r),"isPosInt"),G_=a(r=>an(r)?r<=Math.pow(2,8)?Uint8Array:r<=Math.pow(2,16)?Uint16Array:r<=Math.pow(2,32)?Uint32Array:r<=Number.MAX_SAFE_INTEGER?Ms:null:null,"getUintArray"),Ms=class extends Array{static{a(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},Kp=class r{static{a(this,"Stack")}heap;length;static#e=!1;static create(e){let t=G_(e);if(!t)return[];r.#e=!0;let i=new r(e,t);return r.#e=!1,i}constructor(e,t){if(!r.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},$a=class r{static{a(this,"LRUCache")}#e;#t;#s;#i;#a;#b;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#u;#f;#o;#c;#n;#g;#y;#d;#h;#E;#m;#T;#A;#v;#S;#w;#p;static unsafeExposeInternals(e){return{starts:e.#A,ttls:e.#v,sizes:e.#T,keyMap:e.#o,keyList:e.#c,valList:e.#n,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#h},free:e.#E,isBackgroundFetch:a(t=>e.#l(t),"isBackgroundFetch"),backgroundFetch:a((t,i,n,s)=>e.#L(t,i,n,s),"backgroundFetch"),moveToTail:a(t=>e.#V(t),"moveToTail"),indexes:a(t=>e.#C(t),"indexes"),rindexes:a(t=>e.#O(t),"rindexes"),isStale:a(t=>e.#_(t),"isStale")}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#f}get size(){return this.#u}get fetchMethod(){return this.#a}get memoMethod(){return this.#b}get dispose(){return this.#s}get disposeAfter(){return this.#i}constructor(e){let{max:t=0,ttl:i,ttlResolution:n=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:c,allowStale:u,dispose:f,disposeAfter:l,noDisposeOnSet:h,noUpdateTTL:p,maxSize:g=0,maxEntrySize:v=0,sizeCalculation:S,fetchMethod:x,memoMethod:F,noDeleteOnFetchRejection:D,noDeleteOnStaleGet:U,allowStaleOnFetchRejection:G,allowStaleOnFetchAbort:ee,ignoreFetchAbort:Fe}=e;if(t!==0&&!an(t))throw new TypeError("max option must be a nonnegative integer");let it=t?G_(t):Array;if(!it)throw new Error("invalid max value: "+t);if(this.#e=t,this.#t=g,this.maxEntrySize=v||this.#t,this.sizeCalculation=S,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(F!==void 0&&typeof F!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#b=F,x!==void 0&&typeof x!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=x,this.#w=!!x,this.#o=new Map,this.#c=new Array(t).fill(void 0),this.#n=new Array(t).fill(void 0),this.#g=new it(t),this.#y=new it(t),this.#d=0,this.#h=0,this.#E=Kp.create(t),this.#u=0,this.#f=0,typeof f=="function"&&(this.#s=f),typeof l=="function"?(this.#i=l,this.#m=[]):(this.#i=void 0,this.#m=void 0),this.#S=!!this.#s,this.#p=!!this.#i,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!D,this.allowStaleOnFetchRejection=!!G,this.allowStaleOnFetchAbort=!!ee,this.ignoreFetchAbort=!!Fe,this.maxEntrySize!==0){if(this.#t!==0&&!an(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!an(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#P()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!U,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!c,this.ttlResolution=an(n)||n===0?n:1,this.ttlAutopurge=!!s,this.ttl=i||0,this.ttl){if(!an(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#F()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let dt="LRU_CACHE_UNBOUNDED";s8(dt)&&(B_.add(dt),$_("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",dt,r))}}getRemainingTTL(e){return this.#o.has(e)?1/0:0}#F(){let e=new Ms(this.#e),t=new Ms(this.#e);this.#v=e,this.#A=t,this.#R=(s,o,c=js.now())=>{if(t[s]=o!==0?c:0,e[s]=o,o!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#_(s)&&this.#D(this.#c[s],"expire")},o+1);u.unref&&u.unref()}},this.#x=s=>{t[s]=e[s]!==0?js.now():0},this.#r=(s,o)=>{if(e[o]){let c=e[o],u=t[o];if(!c||!u)return;s.ttl=c,s.start=u,s.now=i||n();let f=s.now-u;s.remainingTTL=c-f}};let i=0,n=a(()=>{let s=js.now();if(this.ttlResolution>0){i=s;let o=setTimeout(()=>i=0,this.ttlResolution);o.unref&&o.unref()}return s},"getNow");this.getRemainingTTL=s=>{let o=this.#o.get(s);if(o===void 0)return 0;let c=e[o],u=t[o];if(!c||!u)return 1/0;let f=(i||n())-u;return c-f},this.#_=s=>{let o=t[s],c=e[s];return!!c&&!!o&&(i||n())-o>c}}#x=a(()=>{},"#updateItemAge");#r=a(()=>{},"#statusTTL");#R=a(()=>{},"#setItemTTL");#_=a(()=>!1,"#isStale");#P(){let e=new Ms(this.#e);this.#f=0,this.#T=e,this.#I=t=>{this.#f-=e[t],e[t]=0},this.#k=(t,i,n,s)=>{if(this.#l(i))return 0;if(!an(n))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(n=s(i,t),!an(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return n},this.#N=(t,i,n)=>{if(e[t]=i,this.#t){let s=this.#t-e[t];for(;this.#f>s;)this.#M(!0)}this.#f+=e[t],n&&(n.entrySize=i,n.totalCalculatedSize=this.#f)}}#I=a(e=>{},"#removeItemSize");#N=a((e,t,i)=>{},"#addItemSize");#k=a((e,t,i,n)=>{if(i||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0},"#requireSize");*#C({allowStale:e=this.allowStale}={}){if(this.#u)for(let t=this.#h;!(!this.#j(t)||((e||!this.#_(t))&&(yield t),t===this.#d));)t=this.#y[t]}*#O({allowStale:e=this.allowStale}={}){if(this.#u)for(let t=this.#d;!(!this.#j(t)||((e||!this.#_(t))&&(yield t),t===this.#h));)t=this.#g[t]}#j(e){return e!==void 0&&this.#o.get(this.#c[e])===e}*entries(){for(let e of this.#C())this.#n[e]!==void 0&&this.#c[e]!==void 0&&!this.#l(this.#n[e])&&(yield[this.#c[e],this.#n[e]])}*rentries(){for(let e of this.#O())this.#n[e]!==void 0&&this.#c[e]!==void 0&&!this.#l(this.#n[e])&&(yield[this.#c[e],this.#n[e]])}*keys(){for(let e of this.#C()){let t=this.#c[e];t!==void 0&&!this.#l(this.#n[e])&&(yield t)}}*rkeys(){for(let e of this.#O()){let t=this.#c[e];t!==void 0&&!this.#l(this.#n[e])&&(yield t)}}*values(){for(let e of this.#C())this.#n[e]!==void 0&&!this.#l(this.#n[e])&&(yield this.#n[e])}*rvalues(){for(let e of this.#O())this.#n[e]!==void 0&&!this.#l(this.#n[e])&&(yield this.#n[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let i of this.#C()){let n=this.#n[i],s=this.#l(n)?n.__staleWhileFetching:n;if(s!==void 0&&e(s,this.#c[i],this))return this.get(this.#c[i],t)}}forEach(e,t=this){for(let i of this.#C()){let n=this.#n[i],s=this.#l(n)?n.__staleWhileFetching:n;s!==void 0&&e.call(t,s,this.#c[i],this)}}rforEach(e,t=this){for(let i of this.#O()){let n=this.#n[i],s=this.#l(n)?n.__staleWhileFetching:n;s!==void 0&&e.call(t,s,this.#c[i],this)}}purgeStale(){let e=!1;for(let t of this.#O({allowStale:!0}))this.#_(t)&&(this.#D(this.#c[t],"expire"),e=!0);return e}info(e){let t=this.#o.get(e);if(t===void 0)return;let i=this.#n[t],n=this.#l(i)?i.__staleWhileFetching:i;if(n===void 0)return;let s={value:n};if(this.#v&&this.#A){let o=this.#v[t],c=this.#A[t];if(o&&c){let u=o-(js.now()-c);s.ttl=u,s.start=Date.now()}}return this.#T&&(s.size=this.#T[t]),s}dump(){let e=[];for(let t of this.#C({allowStale:!0})){let i=this.#c[t],n=this.#n[t],s=this.#l(n)?n.__staleWhileFetching:n;if(s===void 0||i===void 0)continue;let o={value:s};if(this.#v&&this.#A){o.ttl=this.#v[t];let c=js.now()-this.#A[t];o.start=Math.floor(Date.now()-c)}this.#T&&(o.size=this.#T[t]),e.unshift([i,o])}return e}load(e){this.clear();for(let[t,i]of e){if(i.start){let n=Date.now()-i.start;i.start=js.now()-n}this.set(t,i.value,i)}}set(e,t,i={}){if(t===void 0)return this.delete(e),this;let{ttl:n=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:c=this.sizeCalculation,status:u}=i,{noUpdateTTL:f=this.noUpdateTTL}=i,l=this.#k(e,t,i.size||0,c);if(this.maxEntrySize&&l>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let h=this.#u===0?void 0:this.#o.get(e);if(h===void 0)h=this.#u===0?this.#h:this.#E.length!==0?this.#E.pop():this.#u===this.#e?this.#M(!1):this.#u,this.#c[h]=e,this.#n[h]=t,this.#o.set(e,h),this.#g[this.#h]=h,this.#y[h]=this.#h,this.#h=h,this.#u++,this.#N(h,l,u),u&&(u.set="add"),f=!1;else{this.#V(h);let p=this.#n[h];if(t!==p){if(this.#w&&this.#l(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:g}=p;g!==void 0&&!o&&(this.#S&&this.#s?.(g,e,"set"),this.#p&&this.#m?.push([g,e,"set"]))}else o||(this.#S&&this.#s?.(p,e,"set"),this.#p&&this.#m?.push([p,e,"set"]));if(this.#I(h),this.#N(h,l,u),this.#n[h]=t,u){u.set="replace";let g=p&&this.#l(p)?p.__staleWhileFetching:p;g!==void 0&&(u.oldValue=g)}}else u&&(u.set="update")}if(n!==0&&!this.#v&&this.#F(),this.#v&&(f||this.#R(h,n,s),u&&this.#r(u,h)),!o&&this.#p&&this.#m){let p=this.#m,g;for(;g=p?.shift();)this.#i?.(...g)}return this}pop(){try{for(;this.#u;){let e=this.#n[this.#d];if(this.#M(!0),this.#l(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#p&&this.#m){let e=this.#m,t;for(;t=e?.shift();)this.#i?.(...t)}}}#M(e){let t=this.#d,i=this.#c[t],n=this.#n[t];return this.#w&&this.#l(n)?n.__abortController.abort(new Error("evicted")):(this.#S||this.#p)&&(this.#S&&this.#s?.(n,i,"evict"),this.#p&&this.#m?.push([n,i,"evict"])),this.#I(t),e&&(this.#c[t]=void 0,this.#n[t]=void 0,this.#E.push(t)),this.#u===1?(this.#d=this.#h=0,this.#E.length=0):this.#d=this.#g[t],this.#o.delete(i),this.#u--,t}has(e,t={}){let{updateAgeOnHas:i=this.updateAgeOnHas,status:n}=t,s=this.#o.get(e);if(s!==void 0){let o=this.#n[s];if(this.#l(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#_(s))n&&(n.has="stale",this.#r(n,s));else return i&&this.#x(s),n&&(n.has="hit",this.#r(n,s)),!0}else n&&(n.has="miss");return!1}peek(e,t={}){let{allowStale:i=this.allowStale}=t,n=this.#o.get(e);if(n===void 0||!i&&this.#_(n))return;let s=this.#n[n];return this.#l(s)?s.__staleWhileFetching:s}#L(e,t,i,n){let s=t===void 0?void 0:this.#n[t];if(this.#l(s))return s;let o=new Mu,{signal:c}=i;c?.addEventListener("abort",()=>o.abort(c.reason),{signal:o.signal});let u={signal:o.signal,options:i,context:n},f=a((S,x=!1)=>{let{aborted:F}=o.signal,D=i.ignoreFetchAbort&&S!==void 0;if(i.status&&(F&&!x?(i.status.fetchAborted=!0,i.status.fetchError=o.signal.reason,D&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),F&&!D&&!x)return h(o.signal.reason);let U=g;return this.#n[t]===g&&(S===void 0?U.__staleWhileFetching?this.#n[t]=U.__staleWhileFetching:this.#D(e,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(e,S,u.options))),S},"cb"),l=a(S=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=S),h(S)),"eb"),h=a(S=>{let{aborted:x}=o.signal,F=x&&i.allowStaleOnFetchAbort,D=F||i.allowStaleOnFetchRejection,U=D||i.noDeleteOnFetchRejection,G=g;if(this.#n[t]===g&&(!U||G.__staleWhileFetching===void 0?this.#D(e,"fetch"):F||(this.#n[t]=G.__staleWhileFetching)),D)return i.status&&G.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),G.__staleWhileFetching;if(G.__returned===G)throw S},"fetchFail"),p=a((S,x)=>{let F=this.#a?.(e,s,u);F&&F instanceof Promise&&F.then(D=>S(D===void 0?void 0:D),x),o.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(S(void 0),i.allowStaleOnFetchAbort&&(S=a(D=>f(D,!0),"res")))})},"pcall");i.status&&(i.status.fetchDispatched=!0);let g=new Promise(p).then(f,l),v=Object.assign(g,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,v,{...u.options,status:void 0}),t=this.#o.get(e)):this.#n[t]=v,v}#l(e){if(!this.#w)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Mu}async fetch(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:c=this.noDisposeOnSet,size:u=0,sizeCalculation:f=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:g=this.ignoreFetchAbort,allowStaleOnFetchAbort:v=this.allowStaleOnFetchAbort,context:S,forceRefresh:x=!1,status:F,signal:D}=t;if(!this.#w)return F&&(F.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:s,status:F});let U={allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:c,size:u,sizeCalculation:f,noUpdateTTL:l,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:v,ignoreFetchAbort:g,status:F,signal:D},G=this.#o.get(e);if(G===void 0){F&&(F.fetch="miss");let ee=this.#L(e,G,U,S);return ee.__returned=ee}else{let ee=this.#n[G];if(this.#l(ee)){let oe=i&&ee.__staleWhileFetching!==void 0;return F&&(F.fetch="inflight",oe&&(F.returnedStale=!0)),oe?ee.__staleWhileFetching:ee.__returned=ee}let Fe=this.#_(G);if(!x&&!Fe)return F&&(F.fetch="hit"),this.#V(G),n&&this.#x(G),F&&this.#r(F,G),ee;let it=this.#L(e,G,U,S),V=it.__staleWhileFetching!==void 0&&i;return F&&(F.fetch=Fe?"stale":"refresh",V&&Fe&&(F.returnedStale=!0)),V?it.__staleWhileFetching:it.__returned=it}}async forceFetch(e,t={}){let i=await this.fetch(e,t);if(i===void 0)throw new Error("fetch() returned undefined");return i}memo(e,t={}){let i=this.#b;if(!i)throw new Error("no memoMethod provided to constructor");let{context:n,forceRefresh:s,...o}=t,c=this.get(e,o);if(!s&&c!==void 0)return c;let u=i(e,c,{options:o,context:n});return this.set(e,u,o),u}get(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=t,c=this.#o.get(e);if(c!==void 0){let u=this.#n[c],f=this.#l(u);return o&&this.#r(o,c),this.#_(c)?(o&&(o.get="stale"),f?(o&&i&&u.__staleWhileFetching!==void 0&&(o.returnedStale=!0),i?u.__staleWhileFetching:void 0):(s||this.#D(e,"expire"),o&&i&&(o.returnedStale=!0),i?u:void 0)):(o&&(o.get="hit"),f?u.__staleWhileFetching:(this.#V(c),n&&this.#x(c),u))}else o&&(o.get="miss")}#q(e,t){this.#y[t]=e,this.#g[e]=t}#V(e){e!==this.#h&&(e===this.#d?this.#d=this.#g[e]:this.#q(this.#y[e],this.#g[e]),this.#q(this.#h,e),this.#h=e)}delete(e){return this.#D(e,"delete")}#D(e,t){let i=!1;if(this.#u!==0){let n=this.#o.get(e);if(n!==void 0)if(i=!0,this.#u===1)this.#U(t);else{this.#I(n);let s=this.#n[n];if(this.#l(s)?s.__abortController.abort(new Error("deleted")):(this.#S||this.#p)&&(this.#S&&this.#s?.(s,e,t),this.#p&&this.#m?.push([s,e,t])),this.#o.delete(e),this.#c[n]=void 0,this.#n[n]=void 0,n===this.#h)this.#h=this.#y[n];else if(n===this.#d)this.#d=this.#g[n];else{let o=this.#y[n];this.#g[o]=this.#g[n];let c=this.#g[n];this.#y[c]=this.#y[n]}this.#u--,this.#E.push(n)}}if(this.#p&&this.#m?.length){let n=this.#m,s;for(;s=n?.shift();)this.#i?.(...s)}return i}clear(){return this.#U("delete")}#U(e){for(let t of this.#O({allowStale:!0})){let i=this.#n[t];if(this.#l(i))i.__abortController.abort(new Error("deleted"));else{let n=this.#c[t];this.#S&&this.#s?.(i,n,e),this.#p&&this.#m?.push([i,n,e])}}if(this.#o.clear(),this.#n.fill(void 0),this.#c.fill(void 0),this.#v&&this.#A&&(this.#v.fill(0),this.#A.fill(0)),this.#T&&this.#T.fill(0),this.#d=0,this.#h=0,this.#E.length=0,this.#f=0,this.#u=0,this.#p&&this.#m){let t=this.#m,i;for(;i=t?.shift();)this.#i?.(...i)}}};var Vs=require("node:path"),ev=require("node:url"),yi=require("fs"),m8=mt(require("node:fs"),1),un=require("node:fs/promises");var Gu=require("node:events"),tm=mt(require("node:stream"),1),Y_=require("node:string_decoder");var W_=typeof process=="object"&&process?process:{stdout:null,stderr:null},a8=a(r=>!!r&&typeof r=="object"&&(r instanceof cn||r instanceof tm.default||o8(r)||c8(r)),"isStream"),o8=a(r=>!!r&&typeof r=="object"&&r instanceof Gu.EventEmitter&&typeof r.pipe=="function"&&r.pipe!==tm.default.Writable.prototype.pipe,"isReadable"),c8=a(r=>!!r&&typeof r=="object"&&r instanceof Gu.EventEmitter&&typeof r.write=="function"&&typeof r.end=="function","isWritable"),qi=Symbol("EOF"),Vi=Symbol("maybeEmitEnd"),on=Symbol("emittedEnd"),Lu=Symbol("emittingEnd"),Ga=Symbol("emittedError"),qu=Symbol("closed"),H_=Symbol("read"),Vu=Symbol("flush"),z_=Symbol("flushChunk"),Jr=Symbol("encoding"),Ls=Symbol("decoder"),vt=Symbol("flowing"),Wa=Symbol("paused"),qs=Symbol("resume"),bt=Symbol("buffer"),Jt=Symbol("pipes"),St=Symbol("bufferLength"),Yp=Symbol("bufferPush"),Uu=Symbol("bufferShift"),jt=Symbol("objectMode"),st=Symbol("destroyed"),Qp=Symbol("error"),Jp=Symbol("emitData"),K_=Symbol("emitEnd"),Xp=Symbol("emitEnd2"),mi=Symbol("async"),Zp=Symbol("abort"),Bu=Symbol("aborted"),Ha=Symbol("signal"),Bn=Symbol("dataListeners"),mr=Symbol("discarded"),za=a(r=>Promise.resolve().then(r),"defer"),u8=a(r=>r(),"nodefer"),l8=a(r=>r==="end"||r==="finish"||r==="prefinish","isEndish"),f8=a(r=>r instanceof ArrayBuffer||!!r&&typeof r=="object"&&r.constructor&&r.constructor.name==="ArrayBuffer"&&r.byteLength>=0,"isArrayBufferLike"),h8=a(r=>!Buffer.isBuffer(r)&&ArrayBuffer.isView(r),"isArrayBufferView"),$u=class{static{a(this,"Pipe")}src;dest;opts;ondrain;constructor(e,t,i){this.src=e,this.dest=t,this.opts=i,this.ondrain=()=>e[qs](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},em=class extends $u{static{a(this,"PipeProxyErrors")}unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,i){super(e,t,i),this.proxyErrors=n=>t.emit("error",n),e.on("error",this.proxyErrors)}},d8=a(r=>!!r.objectMode,"isObjectModeOptions"),p8=a(r=>!r.objectMode&&!!r.encoding&&r.encoding!=="buffer","isEncodingOptions"),cn=class extends Gu.EventEmitter{static{a(this,"Minipass")}[vt]=!1;[Wa]=!1;[Jt]=[];[bt]=[];[jt];[Jr];[mi];[Ls];[qi]=!1;[on]=!1;[Lu]=!1;[qu]=!1;[Ga]=null;[St]=0;[st]=!1;[Ha];[Bu]=!1;[Bn]=0;[mr]=!1;writable=!0;readable=!0;constructor(...e){let t=e[0]||{};if(super(),t.objectMode&&typeof t.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");d8(t)?(this[jt]=!0,this[Jr]=null):p8(t)?(this[Jr]=t.encoding,this[jt]=!1):(this[jt]=!1,this[Jr]=null),this[mi]=!!t.async,this[Ls]=this[Jr]?new Y_.StringDecoder(this[Jr]):null,t&&t.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:a(()=>this[bt],"get")}),t&&t.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:a(()=>this[Jt],"get")});let{signal:i}=t;i&&(this[Ha]=i,i.aborted?this[Zp]():i.addEventListener("abort",()=>this[Zp]()))}get bufferLength(){return this[St]}get encoding(){return this[Jr]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[jt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[mi]}set async(e){this[mi]=this[mi]||!!e}[Zp](){this[Bu]=!0,this.emit("abort",this[Ha]?.reason),this.destroy(this[Ha]?.reason)}get aborted(){return this[Bu]}set aborted(e){}write(e,t,i){if(this[Bu])return!1;if(this[qi])throw new Error("write after end");if(this[st])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(i=t,t="utf8"),t||(t="utf8");let n=this[mi]?za:u8;if(!this[jt]&&!Buffer.isBuffer(e)){if(h8(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(f8(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[jt]?(this[vt]&&this[St]!==0&&this[Vu](!0),this[vt]?this.emit("data",e):this[Yp](e),this[St]!==0&&this.emit("readable"),i&&n(i),this[vt]):e.length?(typeof e=="string"&&!(t===this[Jr]&&!this[Ls]?.lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[Jr]&&(e=this[Ls].write(e)),this[vt]&&this[St]!==0&&this[Vu](!0),this[vt]?this.emit("data",e):this[Yp](e),this[St]!==0&&this.emit("readable"),i&&n(i),this[vt]):(this[St]!==0&&this.emit("readable"),i&&n(i),this[vt])}read(e){if(this[st])return null;if(this[mr]=!1,this[St]===0||e===0||e&&e>this[St])return this[Vi](),null;this[jt]&&(e=null),this[bt].length>1&&!this[jt]&&(this[bt]=[this[Jr]?this[bt].join(""):Buffer.concat(this[bt],this[St])]);let t=this[H_](e||null,this[bt][0]);return this[Vi](),t}[H_](e,t){if(this[jt])this[Uu]();else{let i=t;e===i.length||e===null?this[Uu]():typeof i=="string"?(this[bt][0]=i.slice(e),t=i.slice(0,e),this[St]-=e):(this[bt][0]=i.subarray(e),t=i.subarray(0,e),this[St]-=e)}return this.emit("data",t),!this[bt].length&&!this[qi]&&this.emit("drain"),t}end(e,t,i){return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t="utf8"),e!==void 0&&this.write(e,t),i&&this.once("end",i),this[qi]=!0,this.writable=!1,(this[vt]||!this[Wa])&&this[Vi](),this}[qs](){this[st]||(!this[Bn]&&!this[Jt].length&&(this[mr]=!0),this[Wa]=!1,this[vt]=!0,this.emit("resume"),this[bt].length?this[Vu]():this[qi]?this[Vi]():this.emit("drain"))}resume(){return this[qs]()}pause(){this[vt]=!1,this[Wa]=!0,this[mr]=!1}get destroyed(){return this[st]}get flowing(){return this[vt]}get paused(){return this[Wa]}[Yp](e){this[jt]?this[St]+=1:this[St]+=e.length,this[bt].push(e)}[Uu](){return this[jt]?this[St]-=1:this[St]-=this[bt][0].length,this[bt].shift()}[Vu](e=!1){do;while(this[z_](this[Uu]())&&this[bt].length);!e&&!this[bt].length&&!this[qi]&&this.emit("drain")}[z_](e){return this.emit("data",e),this[vt]}pipe(e,t){if(this[st])return e;this[mr]=!1;let i=this[on];return t=t||{},e===W_.stdout||e===W_.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,i?t.end&&e.end():(this[Jt].push(t.proxyErrors?new em(this,e,t):new $u(this,e,t)),this[mi]?za(()=>this[qs]()):this[qs]()),e}unpipe(e){let t=this[Jt].find(i=>i.dest===e);t&&(this[Jt].length===1?(this[vt]&&this[Bn]===0&&(this[vt]=!1),this[Jt]=[]):this[Jt].splice(this[Jt].indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let i=super.on(e,t);if(e==="data")this[mr]=!1,this[Bn]++,!this[Jt].length&&!this[vt]&&this[qs]();else if(e==="readable"&&this[St]!==0)super.emit("readable");else if(l8(e)&&this[on])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[Ga]){let n=t;this[mi]?za(()=>n.call(this,this[Ga])):n.call(this,this[Ga])}return i}removeListener(e,t){return this.off(e,t)}off(e,t){let i=super.off(e,t);return e==="data"&&(this[Bn]=this.listeners("data").length,this[Bn]===0&&!this[mr]&&!this[Jt].length&&(this[vt]=!1)),i}removeAllListeners(e){let t=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Bn]=0,!this[mr]&&!this[Jt].length&&(this[vt]=!1)),t}get emittedEnd(){return this[on]}[Vi](){!this[Lu]&&!this[on]&&!this[st]&&this[bt].length===0&&this[qi]&&(this[Lu]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[qu]&&this.emit("close"),this[Lu]=!1)}emit(e,...t){let i=t[0];if(e!=="error"&&e!=="close"&&e!==st&&this[st])return!1;if(e==="data")return!this[jt]&&!i?!1:this[mi]?(za(()=>this[Jp](i)),!0):this[Jp](i);if(e==="end")return this[K_]();if(e==="close"){if(this[qu]=!0,!this[on]&&!this[st])return!1;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Ga]=i,super.emit(Qp,i);let s=!this[Ha]||this.listeners("error").length?super.emit("error",i):!1;return this[Vi](),s}else if(e==="resume"){let s=super.emit("resume");return this[Vi](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let n=super.emit(e,...t);return this[Vi](),n}[Jp](e){for(let i of this[Jt])i.dest.write(e)===!1&&this.pause();let t=this[mr]?!1:super.emit("data",e);return this[Vi](),t}[K_](){return this[on]?!1:(this[on]=!0,this.readable=!1,this[mi]?(za(()=>this[Xp]()),!0):this[Xp]())}[Xp](){if(this[Ls]){let t=this[Ls].end();if(t){for(let i of this[Jt])i.dest.write(t);this[mr]||super.emit("data",t)}}for(let t of this[Jt])t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[jt]||(e.dataLength=0);let t=this.promise();return this.on("data",i=>{e.push(i),this[jt]||(e.dataLength+=i.length)}),await t,e}async concat(){if(this[jt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Jr]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,t)=>{this.on(st,()=>t(new Error("stream destroyed"))),this.on("error",i=>t(i)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[mr]=!1;let e=!1,t=a(async()=>(this.pause(),e=!0,{value:void 0,done:!0}),"stop");return{next:a(()=>{if(e)return t();let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[qi])return t();let s,o,c=a(h=>{this.off("data",u),this.off("end",f),this.off(st,l),t(),o(h)},"onerr"),u=a(h=>{this.off("error",c),this.off("end",f),this.off(st,l),this.pause(),s({value:h,done:!!this[qi]})},"ondata"),f=a(()=>{this.off("error",c),this.off("data",u),this.off(st,l),t(),s({done:!0,value:void 0})},"onend"),l=a(()=>c(new Error("stream destroyed")),"ondestroy");return new Promise((h,p)=>{o=p,s=h,this.once(st,l),this.once("error",c),this.once("end",f),this.once("data",u)})},"next"),throw:t,return:t,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[mr]=!1;let e=!1,t=a(()=>(this.pause(),this.off(Qp,t),this.off(st,t),this.off("end",t),e=!0,{done:!0,value:void 0}),"stop"),i=a(()=>{if(e)return t();let n=this.read();return n===null?t():{done:!1,value:n}},"next");return this.once("end",t),this.once(Qp,t),this.once(st,t),{next:i,throw:t,return:t,[Symbol.iterator](){return this}}}destroy(e){if(this[st])return e?this.emit("error",e):this.emit(st),this;this[st]=!0,this[mr]=!0,this[bt].length=0,this[St]=0;let t=this;return typeof t.close=="function"&&!this[qu]&&t.close(),e?this.emit("error",e):this.emit(st),this}static get isStream(){return a8}};var g8=yi.realpathSync.native,Ya={lstatSync:yi.lstatSync,readdir:yi.readdir,readdirSync:yi.readdirSync,readlinkSync:yi.readlinkSync,realpathSync:g8,promises:{lstat:un.lstat,readdir:un.readdir,readlink:un.readlink,realpath:un.realpath}},tv=a(r=>!r||r===Ya||r===m8?Ya:{...Ya,...r,promises:{...Ya.promises,...r.promises||{}}},"fsFromOption"),rv=/^\\\\\?\\([a-z]:)\\?$/i,y8=a(r=>r.replace(/\//g,"\\").replace(rv,"$1\\"),"uncToDrive"),_8=/[\\\/]/,Ar=0,iv=1,nv=2,gi=4,sv=6,av=8,$n=10,ov=12,Tr=15,Ka=~Tr,rm=16,Q_=32,Qa=64,Xr=128,Wu=256,zu=512,J_=Qa|Xr|zu,v8=1023,im=a(r=>r.isFile()?av:r.isDirectory()?gi:r.isSymbolicLink()?$n:r.isCharacterDevice()?nv:r.isBlockDevice()?sv:r.isSocket()?ov:r.isFIFO()?iv:Ar,"entToType"),X_=new Map,Ja=a(r=>{let e=X_.get(r);if(e)return e;let t=r.normalize("NFKD");return X_.set(r,t),t},"normalize"),Z_=new Map,Hu=a(r=>{let e=Z_.get(r);if(e)return e;let t=Ja(r.toLowerCase());return Z_.set(r,t),t},"normalizeNocase"),Ku=class extends $a{static{a(this,"ResolveCache")}constructor(){super({max:256})}},nm=class extends $a{static{a(this,"ChildrenCache")}constructor(e=16*1024){super({maxSize:e,sizeCalculation:a(t=>t.length+1,"sizeCalculation")})}},cv=Symbol("PathScurry setAsCwd"),Mt=class{static{a(this,"PathBase")}name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#s;get mode(){return this.#s}#i;get nlink(){return this.#i}#a;get uid(){return this.#a}#b;get gid(){return this.#b}#u;get rdev(){return this.#u}#f;get blksize(){return this.#f}#o;get ino(){return this.#o}#c;get size(){return this.#c}#n;get blocks(){return this.#n}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#h;get birthtimeMs(){return this.#h}#E;get atime(){return this.#E}#m;get mtime(){return this.#m}#T;get ctime(){return this.#T}#A;get birthtime(){return this.#A}#v;#S;#w;#p;#F;#x;#r;#R;#_;#P;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,t=Ar,i,n,s,o,c){this.name=e,this.#v=s?Hu(e):Ja(e),this.#r=t&v8,this.nocase=s,this.roots=n,this.root=i||this,this.#R=o,this.#w=c.fullpath,this.#F=c.relative,this.#x=c.relativePosix,this.parent=c.parent,this.parent?this.#e=this.parent.#e:this.#e=tv(c.fs)}depth(){return this.#S!==void 0?this.#S:this.parent?this.#S=this.parent.depth()+1:this.#S=0}childrenCache(){return this.#R}resolve(e){if(!e)return this;let t=this.getRootString(e),n=e.substring(t.length).split(this.splitSep);return t?this.getRoot(t).#I(n):this.#I(n)}#I(e){let t=this;for(let i of e)t=t.child(i);return t}children(){let e=this.#R.get(this);if(e)return e;let t=Object.assign([],{provisional:0});return this.#R.set(this,t),this.#r&=~rm,t}child(e,t){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let i=this.children(),n=this.nocase?Hu(e):Ja(e);for(let u of i)if(u.#v===n)return u;let s=this.parent?this.sep:"",o=this.#w?this.#w+s+e:void 0,c=this.newChild(e,Ar,{...t,parent:this,fullpath:o});return this.canReaddir()||(c.#r|=Xr),i.push(c),c}relative(){if(this.isCWD)return"";if(this.#F!==void 0)return this.#F;let e=this.name,t=this.parent;if(!t)return this.#F=this.name;let i=t.relative();return i+(!i||!t.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#x!==void 0)return this.#x;let e=this.name,t=this.parent;if(!t)return this.#x=this.fullpathPosix();let i=t.relativePosix();return i+(!i||!t.parent?"":"/")+e}fullpath(){if(this.#w!==void 0)return this.#w;let e=this.name,t=this.parent;if(!t)return this.#w=this.name;let n=t.fullpath()+(t.parent?this.sep:"")+e;return this.#w=n}fullpathPosix(){if(this.#p!==void 0)return this.#p;if(this.sep==="/")return this.#p=this.fullpath();if(!this.parent){let n=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(n)?this.#p=`//?/${n}`:this.#p=n}let e=this.parent,t=e.fullpathPosix(),i=t+(!t||!e.parent?"":"/")+this.name;return this.#p=i}isUnknown(){return(this.#r&Tr)===Ar}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&Tr)===av}isDirectory(){return(this.#r&Tr)===gi}isCharacterDevice(){return(this.#r&Tr)===nv}isBlockDevice(){return(this.#r&Tr)===sv}isFIFO(){return(this.#r&Tr)===iv}isSocket(){return(this.#r&Tr)===ov}isSymbolicLink(){return(this.#r&$n)===$n}lstatCached(){return this.#r&Q_?this:void 0}readlinkCached(){return this.#_}realpathCached(){return this.#P}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#_)return!0;if(!this.parent)return!1;let e=this.#r&Tr;return!(e!==Ar&&e!==$n||this.#r&Wu||this.#r&Xr)}calledReaddir(){return!!(this.#r&rm)}isENOENT(){return!!(this.#r&Xr)}isNamed(e){return this.nocase?this.#v===Hu(e):this.#v===Ja(e)}async readlink(){let e=this.#_;if(e)return e;if(this.canReadlink()&&this.parent)try{let t=await this.#e.promises.readlink(this.fullpath()),i=(await this.parent.realpath())?.resolve(t);if(i)return this.#_=i}catch(t){this.#l(t.code);return}}readlinkSync(){let e=this.#_;if(e)return e;if(this.canReadlink()&&this.parent)try{let t=this.#e.readlinkSync(this.fullpath()),i=this.parent.realpathSync()?.resolve(t);if(i)return this.#_=i}catch(t){this.#l(t.code);return}}#N(e){this.#r|=rm;for(let t=e.provisional;t<e.length;t++){let i=e[t];i&&i.#k()}}#k(){this.#r&Xr||(this.#r=(this.#r|Xr)&Ka,this.#C())}#C(){let e=this.children();e.provisional=0;for(let t of e)t.#k()}#O(){this.#r|=zu,this.#j()}#j(){if(this.#r&Qa)return;let e=this.#r;(e&Tr)===gi&&(e&=Ka),this.#r=e|Qa,this.#C()}#M(e=""){e==="ENOTDIR"||e==="EPERM"?this.#j():e==="ENOENT"?this.#k():this.children().provisional=0}#L(e=""){e==="ENOTDIR"?this.parent.#j():e==="ENOENT"&&this.#k()}#l(e=""){let t=this.#r;t|=Wu,e==="ENOENT"&&(t|=Xr),(e==="EINVAL"||e==="UNKNOWN")&&(t&=Ka),this.#r=t,e==="ENOTDIR"&&this.parent&&this.parent.#j()}#q(e,t){return this.#D(e,t)||this.#V(e,t)}#V(e,t){let i=im(e),n=this.newChild(e.name,i,{parent:this}),s=n.#r&Tr;return s!==gi&&s!==$n&&s!==Ar&&(n.#r|=Qa),t.unshift(n),t.provisional++,n}#D(e,t){for(let i=t.provisional;i<t.length;i++){let n=t[i];if((this.nocase?Hu(e.name):Ja(e.name))===n.#v)return this.#U(e,n,i,t)}}#U(e,t,i,n){let s=t.name;return t.#r=t.#r&Ka|im(e),s!==e.name&&(t.name=e.name),i!==n.provisional&&(i===n.length-1?n.pop():n.splice(i,1),n.unshift(t)),n.provisional++,t}async lstat(){if((this.#r&Xr)===0)try{return this.#W(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#L(e.code)}}lstatSync(){if((this.#r&Xr)===0)try{return this.#W(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#L(e.code)}}#W(e){let{atime:t,atimeMs:i,birthtime:n,birthtimeMs:s,blksize:o,blocks:c,ctime:u,ctimeMs:f,dev:l,gid:h,ino:p,mode:g,mtime:v,mtimeMs:S,nlink:x,rdev:F,size:D,uid:U}=e;this.#E=t,this.#g=i,this.#A=n,this.#h=s,this.#f=o,this.#n=c,this.#T=u,this.#d=f,this.#t=l,this.#b=h,this.#o=p,this.#s=g,this.#m=v,this.#y=S,this.#i=x,this.#u=F,this.#c=D,this.#a=U;let G=im(e);this.#r=this.#r&Ka|G|Q_,G!==Ar&&G!==gi&&G!==$n&&(this.#r|=Qa)}#$=[];#G=!1;#H(e){this.#G=!1;let t=this.#$.slice();this.#$.length=0,t.forEach(i=>i(null,e))}readdirCB(e,t=!1){if(!this.canReaddir()){t?e(null,[]):queueMicrotask(()=>e(null,[]));return}let i=this.children();if(this.calledReaddir()){let s=i.slice(0,i.provisional);t?e(null,s):queueMicrotask(()=>e(null,s));return}if(this.#$.push(e),this.#G)return;this.#G=!0;let n=this.fullpath();this.#e.readdir(n,{withFileTypes:!0},(s,o)=>{if(s)this.#M(s.code),i.provisional=0;else{for(let c of o)this.#q(c,i);this.#N(i)}this.#H(i.slice(0,i.provisional))})}#B;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let t=this.fullpath();if(this.#B)await this.#B;else{let i=a(()=>{},"resolve");this.#B=new Promise(n=>i=n);try{for(let n of await this.#e.promises.readdir(t,{withFileTypes:!0}))this.#q(n,e);this.#N(e)}catch(n){this.#M(n.code),e.provisional=0}this.#B=void 0,i()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let t=this.fullpath();try{for(let i of this.#e.readdirSync(t,{withFileTypes:!0}))this.#q(i,e);this.#N(e)}catch(i){this.#M(i.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&J_)return!1;let e=Tr&this.#r;return e===Ar||e===gi||e===$n}shouldWalk(e,t){return(this.#r&gi)===gi&&!(this.#r&J_)&&!e.has(this)&&(!t||t(this))}async realpath(){if(this.#P)return this.#P;if(!((zu|Wu|Xr)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#P=this.resolve(e)}catch{this.#O()}}realpathSync(){if(this.#P)return this.#P;if(!((zu|Wu|Xr)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#P=this.resolve(e)}catch{this.#O()}}[cv](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let t=new Set([]),i=[],n=this;for(;n&&n.parent;)t.add(n),n.#F=i.join(this.sep),n.#x=i.join("/"),n=n.parent,i.push("..");for(n=e;n&&n.parent&&!t.has(n);)n.#F=void 0,n.#x=void 0,n=n.parent}},Yu=class r extends Mt{static{a(this,"PathWin32")}sep="\\";splitSep=_8;constructor(e,t=Ar,i,n,s,o,c){super(e,t,i,n,s,o,c)}newChild(e,t=Ar,i={}){return new r(e,t,this.root,this.roots,this.nocase,this.childrenCache(),i)}getRootString(e){return Vs.win32.parse(e).root}getRoot(e){if(e=y8(e.toUpperCase()),e===this.root.name)return this.root;for(let[t,i]of Object.entries(this.roots))if(this.sameRoot(e,t))return this.roots[e]=i;return this.roots[e]=new Us(e,this).root}sameRoot(e,t=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(rv,"$1\\"),e===t}},Qu=class r extends Mt{static{a(this,"PathPosix")}splitSep="/";sep="/";constructor(e,t=Ar,i,n,s,o,c){super(e,t,i,n,s,o,c)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,t=Ar,i={}){return new r(e,t,this.root,this.roots,this.nocase,this.childrenCache(),i)}},Ju=class{static{a(this,"PathScurryBase")}root;rootPath;roots;cwd;#e;#t;#s;nocase;#i;constructor(e=process.cwd(),t,i,{nocase:n,childrenCacheSize:s=16*1024,fs:o=Ya}={}){this.#i=tv(o),(e instanceof URL||e.startsWith("file://"))&&(e=(0,ev.fileURLToPath)(e));let c=t.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(c),this.#e=new Ku,this.#t=new Ku,this.#s=new nm(s);let u=c.substring(this.rootPath.length).split(i);if(u.length===1&&!u[0]&&u.pop(),n===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=n,this.root=this.newRoot(this.#i),this.roots[this.rootPath]=this.root;let f=this.root,l=u.length-1,h=t.sep,p=this.rootPath,g=!1;for(let v of u){let S=l--;f=f.child(v,{relative:new Array(S).fill("..").join(h),relativePosix:new Array(S).fill("..").join("/"),fullpath:p+=(g?"":h)+v}),g=!0}this.cwd=f}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#s}resolve(...e){let t="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(t=t?`${o}/${t}`:o,this.isAbsolute(o)))break}let i=this.#e.get(t);if(i!==void 0)return i;let n=this.cwd.resolve(t).fullpath();return this.#e.set(t,n),n}resolvePosix(...e){let t="";for(let s=e.length-1;s>=0;s--){let o=e[s];if(!(!o||o===".")&&(t=t?`${o}/${t}`:o,this.isAbsolute(o)))break}let i=this.#t.get(t);if(i!==void 0)return i;let n=this.cwd.resolve(t).fullpathPosix();return this.#t.set(t,n),n}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,t={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Mt||(t=e,e=this.cwd);let{withFileTypes:i}=t;if(e.canReaddir()){let n=await e.readdir();return i?n:n.map(s=>s.name)}else return[]}readdirSync(e=this.cwd,t={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Mt||(t=e,e=this.cwd);let{withFileTypes:i=!0}=t;return e.canReaddir()?i?e.readdirSync():e.readdirSync().map(n=>n.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Mt||(t=e.withFileTypes,e=this.cwd);let i=await e.readlink();return t?i:i?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Mt||(t=e.withFileTypes,e=this.cwd);let i=e.readlinkSync();return t?i:i?.fullpath()}async realpath(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Mt||(t=e.withFileTypes,e=this.cwd);let i=await e.realpath();return t?i:i?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Mt||(t=e.withFileTypes,e=this.cwd);let i=e.realpathSync();return t?i:i?.fullpath()}async walk(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Mt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:o}=t,c=[];(!s||s(e))&&c.push(i?e:e.fullpath());let u=new Set,f=a((h,p)=>{u.add(h),h.readdirCB((g,v)=>{if(g)return p(g);let S=v.length;if(!S)return p();let x=a(()=>{--S===0&&p()},"next");for(let F of v)(!s||s(F))&&c.push(i?F:F.fullpath()),n&&F.isSymbolicLink()?F.realpath().then(D=>D?.isUnknown()?D.lstat():D).then(D=>D?.shouldWalk(u,o)?f(D,x):x()):F.shouldWalk(u,o)?f(F,x):x()},!0)},"walk"),l=e;return new Promise((h,p)=>{f(l,g=>{if(g)return p(g);h(c)})})}walkSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Mt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:o}=t,c=[];(!s||s(e))&&c.push(i?e:e.fullpath());let u=new Set([e]);for(let f of u){let l=f.readdirSync();for(let h of l){(!s||s(h))&&c.push(i?h:h.fullpath());let p=h;if(h.isSymbolicLink()){if(!(n&&(p=h.realpathSync())))continue;p.isUnknown()&&p.lstatSync()}p.shouldWalk(u,o)&&u.add(p)}}return c}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,t={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof Mt||(t=e,e=this.cwd),this.stream(e,t)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Mt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:o}=t;(!s||s(e))&&(yield i?e:e.fullpath());let c=new Set([e]);for(let u of c){let f=u.readdirSync();for(let l of f){(!s||s(l))&&(yield i?l:l.fullpath());let h=l;if(l.isSymbolicLink()){if(!(n&&(h=l.realpathSync())))continue;h.isUnknown()&&h.lstatSync()}h.shouldWalk(c,o)&&c.add(h)}}}stream(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Mt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:o}=t,c=new cn({objectMode:!0});(!s||s(e))&&c.write(i?e:e.fullpath());let u=new Set,f=[e],l=0,h=a(()=>{let p=!1;for(;!p;){let g=f.shift();if(!g){l===0&&c.end();return}l++,u.add(g);let v=a((x,F,D=!1)=>{if(x)return c.emit("error",x);if(n&&!D){let U=[];for(let G of F)G.isSymbolicLink()&&U.push(G.realpath().then(ee=>ee?.isUnknown()?ee.lstat():ee));if(U.length){Promise.all(U).then(()=>v(null,F,!0));return}}for(let U of F)U&&(!s||s(U))&&(c.write(i?U:U.fullpath())||(p=!0));l--;for(let U of F){let G=U.realpathCached()||U;G.shouldWalk(u,o)&&f.push(G)}p&&!c.flowing?c.once("drain",h):S||h()},"onReaddir"),S=!0;g.readdirCB(v,!0),S=!1}},"process");return h(),c}streamSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof Mt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:o}=t,c=new cn({objectMode:!0}),u=new Set;(!s||s(e))&&c.write(i?e:e.fullpath());let f=[e],l=0,h=a(()=>{let p=!1;for(;!p;){let g=f.shift();if(!g){l===0&&c.end();return}l++,u.add(g);let v=g.readdirSync();for(let S of v)(!s||s(S))&&(c.write(i?S:S.fullpath())||(p=!0));l--;for(let S of v){let x=S;if(S.isSymbolicLink()){if(!(n&&(x=S.realpathSync())))continue;x.isUnknown()&&x.lstatSync()}x.shouldWalk(u,o)&&f.push(x)}}p&&!c.flowing&&c.once("drain",h)},"process");return h(),c}chdir(e=this.cwd){let t=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[cv](t)}},Us=class extends Ju{static{a(this,"PathScurryWin32")}sep="\\";constructor(e=process.cwd(),t={}){let{nocase:i=!0}=t;super(e,Vs.win32,"\\",{...t,nocase:i}),this.nocase=i;for(let n=this.cwd;n;n=n.parent)n.nocase=this.nocase}parseRootPath(e){return Vs.win32.parse(e).root.toUpperCase()}newRoot(e){return new Yu(this.rootPath,gi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},Bs=class extends Ju{static{a(this,"PathScurryPosix")}sep="/";constructor(e=process.cwd(),t={}){let{nocase:i=!1}=t;super(e,Vs.posix,"/",{...t,nocase:i}),this.nocase=i}parseRootPath(e){return"/"}newRoot(e){return new Qu(this.rootPath,gi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},Xa=class extends Bs{static{a(this,"PathScurryDarwin")}constructor(e=process.cwd(),t={}){let{nocase:i=!0}=t;super(e,{...t,nocase:i})}},TM=process.platform==="win32"?Yu:Qu,uv=process.platform==="win32"?Us:process.platform==="darwin"?Xa:Bs;var b8=a(r=>r.length>=1,"isPatternList"),S8=a(r=>r.length>=1,"isGlobList"),$s=class r{static{a(this,"Pattern")}#e;#t;#s;length;#i;#a;#b;#u;#f;#o;#c=!0;constructor(e,t,i,n){if(!b8(e))throw new TypeError("empty pattern list");if(!S8(t))throw new TypeError("empty glob list");if(t.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,i<0||i>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=t,this.#s=i,this.#i=n,this.#s===0){if(this.isUNC()){let[s,o,c,u,...f]=this.#e,[l,h,p,g,...v]=this.#t;f[0]===""&&(f.shift(),v.shift());let S=[s,o,c,u,""].join("/"),x=[l,h,p,g,""].join("/");this.#e=[S,...f],this.#t=[x,...v],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[s,...o]=this.#e,[c,...u]=this.#t;o[0]===""&&(o.shift(),u.shift());let f=s+"/",l=c+"/";this.#e=[f,...o],this.#t=[l,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#s]}isString(){return typeof this.#e[this.#s]=="string"}isGlobstar(){return this.#e[this.#s]===Ft}isRegExp(){return this.#e[this.#s]instanceof RegExp}globString(){return this.#b=this.#b||(this.#s===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#s).join("/"))}hasMore(){return this.length>this.#s+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new r(this.#e,this.#t,this.#s+1,this.#i),this.#a.#o=this.#o,this.#a.#f=this.#f,this.#a.#u=this.#u,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#f!==void 0?this.#f:this.#f=this.#i==="win32"&&this.#s===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#i==="win32"&&this.#s===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#o!==void 0?this.#o:this.#o=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#s===0?e:""}checkFollowGlobstar(){return!(this.#s===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#s===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var w8=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Gs=class{static{a(this,"Ignore")}relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:t,nocase:i,noext:n,noglobstar:s,platform:o=w8}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=o,this.mmopts={dot:!0,nobrace:t,nocase:i,noext:n,noglobstar:s,optimizationLevel:2,platform:o,nocomment:!0,nonegate:!0};for(let c of e)this.add(c)}add(e){let t=new pr(e,this.mmopts);for(let i=0;i<t.set.length;i++){let n=t.set[i],s=t.globParts[i];if(!n||!s)throw new Error("invalid pattern object");for(;n[0]==="."&&s[0]===".";)n.shift(),s.shift();let o=new $s(n,s,0,this.platform),c=new pr(o.globString(),this.mmopts),u=s[s.length-1]==="**",f=o.isAbsolute();f?this.absolute.push(c):this.relative.push(c),u&&(f?this.absoluteChildren.push(c):this.relativeChildren.push(c))}}ignored(e){let t=e.fullpath(),i=`${t}/`,n=e.relative()||".",s=`${n}/`;for(let o of this.relative)if(o.match(n)||o.match(s))return!0;for(let o of this.absolute)if(o.match(t)||o.match(i))return!0;return!1}childrenIgnored(e){let t=e.fullpath()+"/",i=(e.relative()||".")+"/";for(let n of this.relativeChildren)if(n.match(i))return!0;for(let n of this.absoluteChildren)if(n.match(t))return!0;return!1}};var sm=class r{static{a(this,"HasWalkedCache")}store;constructor(e=new Map){this.store=e}copy(){return new r(new Map(this.store))}hasWalked(e,t){return this.store.get(e.fullpath())?.has(t.globString())}storeWalked(e,t){let i=e.fullpath(),n=this.store.get(i);n?n.add(t.globString()):this.store.set(i,new Set([t.globString()]))}},am=class{static{a(this,"MatchRecord")}store=new Map;add(e,t,i){let n=(t?2:0)|(i?1:0),s=this.store.get(e);this.store.set(e,s===void 0?n:n&s)}entries(){return[...this.store.entries()].map(([e,t])=>[e,!!(t&2),!!(t&1)])}},om=class{static{a(this,"SubWalks")}store=new Map;add(e,t){if(!e.canReaddir())return;let i=this.store.get(e);i?i.find(n=>n.globString()===t.globString())||i.push(t):this.store.set(e,[t])}get(e){let t=this.store.get(e);if(!t)throw new Error("attempting to walk unknown path");return t}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},Za=class r{static{a(this,"Processor")}hasWalkedCache;matches=new am;subwalks=new om;patterns;follow;dot;opts;constructor(e,t){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=t?t.copy():new sm}processPatterns(e,t){this.patterns=t;let i=t.map(n=>[e,n]);for(let[n,s]of i){this.hasWalkedCache.storeWalked(n,s);let o=s.root(),c=s.isAbsolute()&&this.opts.absolute!==!1;if(o){n=n.resolve(o==="/"&&this.opts.root!==void 0?this.opts.root:o);let h=s.rest();if(h)s=h;else{this.matches.add(n,!0,!1);continue}}if(n.isENOENT())continue;let u,f,l=!1;for(;typeof(u=s.pattern())=="string"&&(f=s.rest());)n=n.resolve(u),s=f,l=!0;if(u=s.pattern(),f=s.rest(),l){if(this.hasWalkedCache.hasWalked(n,s))continue;this.hasWalkedCache.storeWalked(n,s)}if(typeof u=="string"){let h=u===".."||u===""||u===".";this.matches.add(n.resolve(u),c,h);continue}else if(u===Ft){(!n.isSymbolicLink()||this.follow||s.checkFollowGlobstar())&&this.subwalks.add(n,s);let h=f?.pattern(),p=f?.rest();if(!f||(h===""||h===".")&&!p)this.matches.add(n,c,h===""||h===".");else if(h===".."){let g=n.parent||n;p?this.hasWalkedCache.hasWalked(g,p)||this.subwalks.add(g,p):this.matches.add(g,c,!0)}}else u instanceof RegExp&&this.subwalks.add(n,s)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new r(this.opts,this.hasWalkedCache)}filterEntries(e,t){let i=this.subwalks.get(e),n=this.child();for(let s of t)for(let o of i){let c=o.isAbsolute(),u=o.pattern(),f=o.rest();u===Ft?n.testGlobstar(s,o,f,c):u instanceof RegExp?n.testRegExp(s,u,f,c):n.testString(s,u,f,c)}return n}testGlobstar(e,t,i,n){if((this.dot||!e.name.startsWith("."))&&(t.hasMore()||this.matches.add(e,n,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,t):e.isSymbolicLink()&&(i&&t.checkFollowGlobstar()?this.subwalks.add(e,i):t.markFollowGlobstar()&&this.subwalks.add(e,t)))),i){let s=i.pattern();if(typeof s=="string"&&s!==".."&&s!==""&&s!==".")this.testString(e,s,i.rest(),n);else if(s===".."){let o=e.parent||e;this.subwalks.add(o,i)}else s instanceof RegExp&&this.testRegExp(e,s,i.rest(),n)}}testRegExp(e,t,i,n){t.test(e.name)&&(i?this.subwalks.add(e,i):this.matches.add(e,n,!1))}testString(e,t,i,n){e.isNamed(t)&&(i?this.subwalks.add(e,i):this.matches.add(e,n,!1))}};var E8=a((r,e)=>typeof r=="string"?new Gs([r],e):Array.isArray(r)?new Gs(r,e):r,"makeIgnore"),Xu=class{static{a(this,"GlobUtil")}path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#s;signal;maxDepth;includeChildMatches;constructor(e,t,i){if(this.patterns=e,this.path=t,this.opts=i,this.#s=!i.posix&&i.platform==="win32"?"\\":"/",this.includeChildMatches=i.includeChildMatches!==!1,(i.ignore||!this.includeChildMatches)&&(this.#t=E8(i.ignore??[],i),!this.includeChildMatches&&typeof this.#t.add!="function")){let n="cannot ignore child matches, ignore lacks add() method.";throw new Error(n)}this.maxDepth=i.maxDepth||1/0,i.signal&&(this.signal=i.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#i(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,t){if(t&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=e.realpathCached()||await e.realpath(),!i)return;e=i}let s=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=await s.realpath();o&&(o.isUnknown()||this.opts.stat)&&await o.lstat()}return this.matchCheckTest(s,t)}matchCheckTest(e,t){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!t||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#i(e)?e:void 0}matchCheckSync(e,t){if(t&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=e.realpathCached()||e.realpathSync(),!i)return;e=i}let s=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let o=s.realpathSync();o&&(o?.isUnknown()||this.opts.stat)&&o.lstatSync()}return this.matchCheckTest(s,t)}matchFinish(e,t){if(this.#i(e))return;if(!this.includeChildMatches&&this.#t?.add){let s=`${e.relativePosix()}/**`;this.#t.add(s)}let i=this.opts.absolute===void 0?t:this.opts.absolute;this.seen.add(e);let n=this.opts.mark&&e.isDirectory()?this.#s:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(i){let s=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(s+n)}else{let s=this.opts.posix?e.relativePosix():e.relative(),o=this.opts.dotRelative&&!s.startsWith(".."+this.#s)?"."+this.#s:"";this.matchEmit(s?o+s+n:"."+n)}}async match(e,t,i){let n=await this.matchCheck(e,i);n&&this.matchFinish(n,t)}matchSync(e,t,i){let n=this.matchCheckSync(e,i);n&&this.matchFinish(n,t)}walkCB(e,t,i){this.signal?.aborted&&i(),this.walkCB2(e,t,new Za(this.opts),i)}walkCB2(e,t,i,n){if(this.#a(e))return n();if(this.signal?.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2(e,t,i,n));return}i.processPatterns(e,t);let s=1,o=a(()=>{--s===0&&n()},"next");for(let[c,u,f]of i.matches.entries())this.#i(c)||(s++,this.match(c,u,f).then(()=>o()));for(let c of i.subwalkTargets()){if(this.maxDepth!==1/0&&c.depth()>=this.maxDepth)continue;s++;let u=c.readdirCached();c.calledReaddir()?this.walkCB3(c,u,i,o):c.readdirCB((f,l)=>this.walkCB3(c,l,i,o),!0)}o()}walkCB3(e,t,i,n){i=i.filterEntries(e,t);let s=1,o=a(()=>{--s===0&&n()},"next");for(let[c,u,f]of i.matches.entries())this.#i(c)||(s++,this.match(c,u,f).then(()=>o()));for(let[c,u]of i.subwalks.entries())s++,this.walkCB2(c,u,i.child(),o);o()}walkCBSync(e,t,i){this.signal?.aborted&&i(),this.walkCB2Sync(e,t,new Za(this.opts),i)}walkCB2Sync(e,t,i,n){if(this.#a(e))return n();if(this.signal?.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2Sync(e,t,i,n));return}i.processPatterns(e,t);let s=1,o=a(()=>{--s===0&&n()},"next");for(let[c,u,f]of i.matches.entries())this.#i(c)||this.matchSync(c,u,f);for(let c of i.subwalkTargets()){if(this.maxDepth!==1/0&&c.depth()>=this.maxDepth)continue;s++;let u=c.readdirSync();this.walkCB3Sync(c,u,i,o)}o()}walkCB3Sync(e,t,i,n){i=i.filterEntries(e,t);let s=1,o=a(()=>{--s===0&&n()},"next");for(let[c,u,f]of i.matches.entries())this.#i(c)||this.matchSync(c,u,f);for(let[c,u]of i.subwalks.entries())s++,this.walkCB2Sync(c,u,i.child(),o);o()}},eo=class extends Xu{static{a(this,"GlobWalker")}matches=new Set;constructor(e,t,i){super(e,t,i)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,t)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?t(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},to=class extends Xu{static{a(this,"GlobStream")}results;constructor(e,t,i){super(e,t,i),this.results=new cn({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var T8=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Zr=class{static{a(this,"Glob")}absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,t){if(!t)throw new TypeError("glob options required");if(this.withFileTypes=!!t.withFileTypes,this.signal=t.signal,this.follow=!!t.follow,this.dot=!!t.dot,this.dotRelative=!!t.dotRelative,this.nodir=!!t.nodir,this.mark=!!t.mark,t.cwd?(t.cwd instanceof URL||t.cwd.startsWith("file://"))&&(t.cwd=(0,lv.fileURLToPath)(t.cwd)):this.cwd="",this.cwd=t.cwd||"",this.root=t.root,this.magicalBraces=!!t.magicalBraces,this.nobrace=!!t.nobrace,this.noext=!!t.noext,this.realpath=!!t.realpath,this.absolute=t.absolute,this.includeChildMatches=t.includeChildMatches!==!1,this.noglobstar=!!t.noglobstar,this.matchBase=!!t.matchBase,this.maxDepth=typeof t.maxDepth=="number"?t.maxDepth:1/0,this.stat=!!t.stat,this.ignore=t.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(t.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=t.platform||T8,this.opts={...t,platform:this.platform},t.scurry){if(this.scurry=t.scurry,t.nocase!==void 0&&t.nocase!==t.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=t.platform==="win32"?Us:t.platform==="darwin"?Xa:t.platform?Bs:uv;this.scurry=new u(this.cwd,{nocase:t.nocase,fs:t.fs})}this.nocase=this.scurry.nocase;let i=this.platform==="darwin"||this.platform==="win32",n={...t,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:i,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},s=this.pattern.map(u=>new pr(u,n)),[o,c]=s.reduce((u,f)=>(u[0].push(...f.set),u[1].push(...f.globParts),u),[[],[]]);this.patterns=o.map((u,f)=>{let l=c[f];if(!l)throw new Error("invalid pattern object");return new $s(u,l,0,this.platform)})}async walk(){return[...await new eo(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new eo(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new to(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new to(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var cm=a((r,e={})=>{Array.isArray(r)||(r=[r]);for(let t of r)if(new pr(t,e).hasMagic())return!0;return!1},"hasMagic");function el(r,e={}){return new Zr(r,e).streamSync()}a(el,"globStreamSync");function hv(r,e={}){return new Zr(r,e).stream()}a(hv,"globStream");function dv(r,e={}){return new Zr(r,e).walkSync()}a(dv,"globSync");async function fv(r,e={}){return new Zr(r,e).walk()}a(fv,"glob_");function tl(r,e={}){return new Zr(r,e).iterateSync()}a(tl,"globIterateSync");function pv(r,e={}){return new Zr(r,e).iterate()}a(pv,"globIterate");var A8=el,x8=Object.assign(hv,{sync:el}),C8=tl,O8=Object.assign(pv,{sync:tl}),F8=Object.assign(dv,{stream:el,iterate:tl}),Zu=Object.assign(fv,{glob:fv,globSync:dv,sync:F8,globStream:hv,stream:x8,globStreamSync:el,streamSync:A8,globIterate:pv,iterate:O8,globIterateSync:tl,iterateSync:C8,Glob:Zr,hasMagic:cm,escape:ks,unescape:Qr});Zu.glob=Zu;var Gn=mt(Mn());var rl=class{constructor(e){this.rootPath=e}static{a(this,"NodeFsAdapter")}async readFile(e){let t=this.resolvePath(e);if(!await ht.default.pathExists(t))throw new Gn.FileNotFoundError(e);return ht.default.readFile(t,"utf-8")}async fileExists(e){let t=this.resolvePath(e);return ht.default.pathExists(t)}async getFileMetadata(e){let t=await this.readFile(e);return this.extractFrontmatter(t)}async createFile(e,t){let i=this.resolvePath(e);if(await ht.default.pathExists(i))throw new Gn.FileAlreadyExistsError(e);return await ht.default.ensureDir(ln.default.dirname(i)),await ht.default.writeFile(i,t,"utf-8"),e}async updateFile(e,t){let i=this.resolvePath(e);if(!await ht.default.pathExists(i))throw new Gn.FileNotFoundError(e);await ht.default.writeFile(i,t,"utf-8")}async writeFile(e,t){let i=this.resolvePath(e);await ht.default.ensureDir(ln.default.dirname(i)),await ht.default.writeFile(i,t,"utf-8")}async deleteFile(e){let t=this.resolvePath(e);if(!await ht.default.pathExists(t))throw new Gn.FileNotFoundError(e);await ht.default.remove(t)}async renameFile(e,t){let i=this.resolvePath(e),n=this.resolvePath(t);if(!await ht.default.pathExists(i))throw new Gn.FileNotFoundError(e);await ht.default.ensureDir(ln.default.dirname(n)),await ht.default.move(i,n)}async createDirectory(e){let t=this.resolvePath(e);await ht.default.ensureDir(t)}async directoryExists(e){let t=this.resolvePath(e);return await ht.default.pathExists(t)?(await ht.default.stat(t)).isDirectory():!1}async getMarkdownFiles(e){let t=e?this.resolvePath(e):this.rootPath,i=ln.default.join(t,"**/*.md");return(await Zu(i,{nodir:!0})).map(o=>ln.default.relative(this.rootPath,o))}async findFilesByMetadata(e){let t=await this.getMarkdownFiles(),i=[];for(let n of t)try{let s=await this.getFileMetadata(n);this.matchesQuery(s,e)&&i.push(n)}catch{continue}return i}async findFileByUID(e){let t=await this.findFilesByMetadata({exo__Asset_uid:e});return t.length>0?t[0]:null}resolvePath(e){return ln.default.isAbsolute(e)?e:ln.default.join(this.rootPath,e)}extractFrontmatter(e){let t=/^---\n([\s\S]*?)\n---/,i=e.match(t);if(!i)return{};try{let n=La.load(i[1]);return typeof n=="object"&&n!==null?n:{}}catch{return{}}}matchesQuery(e,t){for(let[i,n]of Object.entries(t)){let s=e[i];if(Array.isArray(s)){if(!s.some(o=>this.normalizeValue(o)===this.normalizeValue(n)))return!1}else if(this.normalizeValue(s)!==this.normalizeValue(n))return!1}return!0}normalizeValue(e){return e==null?"":String(e).replace(/["'[\]]/g,"").trim()}};var io=mt(require("path")),um=mt(xu());var _i=class extends Error{static{a(this,"CLIError")}constructor(e,t){super(e),this.name=this.constructor.name,this.context=t,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}format(){let e=`\u274C ${this.name}: ${this.message}`;if(this.guidance&&(e+=`

\u{1F4A1} ${this.guidance}`),this.context&&Object.keys(this.context).length>0){e+=`

\u{1F4CB} Context:`;for(let[t,i]of Object.entries(this.context))e+=`
  ${t}: ${JSON.stringify(i)}`}return e}};var ro=class extends _i{constructor(t,i){super(`File not found: ${t}`,{filepath:t,...i});this.exitCode=3;this.guidance=`Verify the file path is correct and the file exists.
Check:
  \u2022 File path spelling
  \u2022 File is in the vault directory
  \u2022 File has .md extension`}static{a(this,"FileNotFoundError")}};var Hn=class extends _i{constructor(t,i,n){super(t,n);this.exitCode=2;this.guidance=i||`Check command syntax and argument format.
Use: exocortex command --help for usage information.`}static{a(this,"InvalidArgumentsError")}};var il=class{constructor(e){this.vaultRoot=e}static{a(this,"PathResolver")}resolve(e){if(!io.default.isAbsolute(e))return io.default.resolve(this.vaultRoot,e);let t=io.default.resolve(e),i=io.default.resolve(this.vaultRoot);if(!t.startsWith(i))throw new Hn(`File path ${e} is outside vault root ${this.vaultRoot}`,"Provide a file path within the vault directory.",{filepath:e,vaultRoot:this.vaultRoot});return t}validate(e){if(!um.default.existsSync(e))throw new ro(e);if(!um.default.statSync(e).isFile())throw new Hn(`Not a file: ${e}`,"Provide a path to a file, not a directory.",{filepath:e});if(!e.endsWith(".md"))throw new Hn(`Not a Markdown file: ${e}`,"Provide a path to a .md file.",{filepath:e})}getVaultRoot(){return this.vaultRoot}};var rt=class{static{a(this,"ErrorHandler")}static handle(e){e instanceof _i&&(console.error(e.format()),process.env.DEBUG&&(console.error(`
\u{1F4CD} Stack trace:`),console.error(e.stack)),process.exit(e.exitCode)),e.message.toLowerCase().includes("transition")&&(console.error(`\u274C Error: ${e.message}`),process.exit(6)),e.message.toLowerCase().includes("transaction")&&(console.error(`\u274C Error: ${e.message}`),process.exit(7)),(e.message.includes("not found")||e.message.includes("ENOENT"))&&(console.error(`\u274C Error: ${e.message}`),process.exit(3)),(e.message.includes("EACCES")||e.message.includes("permission denied"))&&(console.error(`\u274C Error: ${e.message}`),process.exit(4)),(e.message.includes("Invalid")||e.message.includes("outside vault")||e.message.includes("Not a"))&&(console.error(`\u274C Error: ${e.message}`),process.exit(2)),console.error(`\u274C Error: ${e.message}`),process.env.DEBUG&&console.error(e.stack),process.exit(1)}static handleWithMessage(e,t=1){console.error(`\u274C Error: ${e}`),process.exit(t)}};var bv=mt(Mn());var mv=mt(Mn());var Ui=class{static{a(this,"BaseCommandExecutor")}constructor(e){this.pathResolver=e.pathResolver,this.fsAdapter=e.fsAdapter,this.frontmatterService=e.frontmatterService,this.dryRun=e.dryRun}resolveAndValidate(e){let t=this.pathResolver.resolve(e);this.pathResolver.validate(t);let i=t.replace(this.pathResolver.getVaultRoot()+"/","");return{resolvedPath:t,relativePath:i}}getCurrentTimestamp(){return mv.DateFormatter.toLocalTimestamp(new Date)}isAssetArchived(e){if(e?.exo__Asset_isArchived===!0)return!0;let t=e?.archived;if(t==null)return!1;if(typeof t=="boolean")return t;if(typeof t=="number")return t!==0;if(typeof t=="string"){let i=t.toLowerCase().trim();return i==="true"||i==="yes"||i==="1"}return!1}extractAliasesFromFrontmatter(e){let t=e.match(/aliases:\s*\n((?:  - .*\n?)*)/);return t?t[1].split(`
`).filter(n=>n.trim()).map(n=>n.replace(/^\s*-\s*/,"").trim()):[]}};var no=class extends Ui{static{a(this,"StatusCommandExecutor")}constructor(e){super(e)}async executeStart(e){try{let{relativePath:t}=this.resolveAndValidate(e),i=await this.fsAdapter.readFile(t),n=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(i,"ems__Effort_status",'"[[ems__EffortStatusDoing]]"');s=this.frontmatterService.updateProperty(s,"ems__Effort_startTimestamp",n),await this.fsAdapter.updateFile(t,s),console.log(`\u2705 Started: ${e}`),console.log("   Status: Doing"),console.log(`   Start time: ${n}`),process.exit(0)}catch(t){rt.handle(t)}}async executeComplete(e){try{let{relativePath:t}=this.resolveAndValidate(e),i=await this.fsAdapter.readFile(t),n=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(i,"ems__Effort_status",'"[[ems__EffortStatusDone]]"');s=this.frontmatterService.updateProperty(s,"ems__Effort_endTimestamp",n),s=this.frontmatterService.updateProperty(s,"ems__Effort_resolutionTimestamp",n),await this.fsAdapter.updateFile(t,s),console.log(`\u2705 Completed: ${e}`),console.log("   Status: Done"),console.log(`   Completion time: ${n}`),process.exit(0)}catch(t){rt.handle(t)}}async executeTrash(e){try{let{relativePath:t}=this.resolveAndValidate(e),i=await this.fsAdapter.readFile(t),n=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(i,"ems__Effort_status",'"[[ems__EffortStatusTrashed]]"');s=this.frontmatterService.updateProperty(s,"ems__Effort_resolutionTimestamp",n),await this.fsAdapter.updateFile(t,s),console.log(`\u2705 Trashed: ${e}`),console.log("   Status: Trashed"),console.log(`   Resolution time: ${n}`),process.exit(0)}catch(t){rt.handle(t)}}async executeArchive(e){try{let{relativePath:t}=this.resolveAndValidate(e),i=await this.fsAdapter.readFile(t),n=this.frontmatterService.updateProperty(i,"archived","true");n=this.frontmatterService.removeProperty(n,"aliases"),await this.fsAdapter.updateFile(t,n),console.log(`\u2705 Archived: ${e}`),console.log("   Archived: true"),console.log("   Aliases removed"),process.exit(0)}catch(t){rt.handle(t)}}async executeMoveToBacklog(e){try{await this.updateStatus(e,"ems__EffortStatusBacklog","Backlog"),process.exit(0)}catch(t){rt.handle(t)}}async executeMoveToAnalysis(e){try{await this.updateStatus(e,"ems__EffortStatusAnalysis","Analysis"),process.exit(0)}catch(t){rt.handle(t)}}async executeMoveToToDo(e){try{await this.updateStatus(e,"ems__EffortStatusToDo","ToDo"),process.exit(0)}catch(t){rt.handle(t)}}async updateStatus(e,t,i){let{relativePath:n}=this.resolveAndValidate(e),s=await this.fsAdapter.readFile(n),o=this.frontmatterService.updateProperty(s,"ems__Effort_status",`"[[${t}]]"`);await this.fsAdapter.updateFile(n,o),console.log(`\u2705 Moved to ${i}: ${e}`),console.log(`   Status: ${i}`)}};var Pt=[];for(let r=0;r<256;++r)Pt.push((r+256).toString(16).slice(1));function gv(r,e=0){return(Pt[r[e+0]]+Pt[r[e+1]]+Pt[r[e+2]]+Pt[r[e+3]]+"-"+Pt[r[e+4]]+Pt[r[e+5]]+"-"+Pt[r[e+6]]+Pt[r[e+7]]+"-"+Pt[r[e+8]]+Pt[r[e+9]]+"-"+Pt[r[e+10]]+Pt[r[e+11]]+Pt[r[e+12]]+Pt[r[e+13]]+Pt[r[e+14]]+Pt[r[e+15]]).toLowerCase()}a(gv,"unsafeStringify");var yv=require("node:crypto");var sl=new Uint8Array(256),nl=sl.length;function lm(){return nl>sl.length-16&&((0,yv.randomFillSync)(sl),nl=0),sl.slice(nl,nl+=16)}a(lm,"rng");var _v=require("node:crypto"),fm={randomUUID:_v.randomUUID};function D8(r,e,t){r=r||{};let i=r.random??r.rng?.()??lm();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let n=0;n<16;++n)e[t+n]=i[n];return e}return gv(i)}a(D8,"_v4");function R8(r,e,t){return fm.randomUUID&&!e&&!r?fm.randomUUID():D8(r,e,t)}a(R8,"v4");var hm=R8;var Ws=mt(Mn());var so=class extends Ui{static{a(this,"AssetCreationExecutor")}constructor(e){super(e)}async executeCreateTask(e,t,i={}){try{await this.createAsset(e,t,"ems__Task",i),process.exit(0)}catch(n){rt.handle(n)}}async executeCreateMeeting(e,t,i={}){try{await this.createAsset(e,t,"ems__Meeting",i),process.exit(0)}catch(n){rt.handle(n)}}async executeCreateProject(e,t,i={}){try{await this.createAsset(e,t,"ems__Project",i),process.exit(0)}catch(n){rt.handle(n)}}async executeCreateArea(e,t,i={}){try{await this.createAsset(e,t,"ems__Area",i),process.exit(0)}catch(n){rt.handle(n)}}async createAsset(e,t,i,n={}){if(!t||t.trim().length===0)throw new Error("Label cannot be empty");let s=t.trim(),{relativePath:o}=this.resolveAndValidate(e);if(await this.fsAdapter.fileExists(o))throw new Ws.FileAlreadyExistsError(e);let u=hm(),f=this.buildAssetFrontmatter(i,u,s,n),l=Ws.MetadataHelpers.buildFileContent(f);await this.fsAdapter.createFile(o,l),console.log(`\u2705 Created ${this.getAssetTypeName(i)}: ${e}`),console.log(`   UID: ${u}`),console.log(`   Label: ${s}`),console.log(`   Class: ${i}`)}buildAssetFrontmatter(e,t,i,n={}){let s=Ws.DateFormatter.toLocalTimestamp(new Date),o={exo__Asset_isDefinedBy:'"[[Ontology/EMS]]"',exo__Asset_uid:t,exo__Asset_label:i,exo__Asset_createdAt:s,exo__Instance_class:[`"[[${e}]]"`],aliases:[i]};return(e==="ems__Task"||e==="ems__Project"||e==="ems__Meeting")&&(o.ems__Effort_status='"[[ems__EffortStatusDraft]]"'),n.prototype&&(o.ems__Effort_prototype=`"[[${n.prototype}]]"`),n.area&&(o.ems__Effort_area=`"[[${n.area}]]"`),n.parent&&(o.ems__Effort_parent=`"[[${n.parent}]]"`),o}getAssetTypeName(e){return{ems__Task:"task",ems__Meeting:"meeting",ems__Project:"project",ems__Area:"area"}[e]||"asset"}};var dm=mt(require("path"));var vv=mt(Mn());var ao=class extends Ui{static{a(this,"PropertyCommandExecutor")}constructor(e){super(e)}async executeRenameToUid(e){try{let{relativePath:t}=this.resolveAndValidate(e),i=await this.fsAdapter.getFileMetadata(t);if(!i.exo__Asset_uid)throw new Error("Asset missing exo__Asset_uid property");let n=dm.default.basename(t,".md"),s=i.exo__Asset_uid;if(n===s&&(console.log(`\u2705 Already renamed: ${e}`),console.log(`   Current filename matches UID: ${s}.md`),process.exit(0)),!i.exo__Asset_label||i.exo__Asset_label.trim()===""){let u=await this.fsAdapter.readFile(t),f=this.frontmatterService.updateProperty(u,"exo__Asset_label",n),l=this.isAssetArchived(i),h=f;l||(h=this.frontmatterService.updateProperty(f,"aliases",`
  - ${n}`)),await this.fsAdapter.updateFile(t,h),console.log(`   Updated label: "${n}"`)}let o=dm.default.dirname(t),c=o!=="."?`${o}/${s}.md`:`${s}.md`;await this.fsAdapter.renameFile(t,c),console.log("\u2705 Renamed to UID format"),console.log(`   Old: ${t}`),console.log(`   New: ${c}`),process.exit(0)}catch(t){rt.handle(t)}}async executeUpdateLabel(e,t){try{if(!t||t.trim().length===0)throw new Error("Label cannot be empty");let i=t.trim(),{relativePath:n}=this.resolveAndValidate(e),s=await this.fsAdapter.readFile(n),o=this.frontmatterService.updateProperty(s,"exo__Asset_label",i),c=this.frontmatterService.parse(o),u=this.extractAliasesFromFrontmatter(c.content);if(u.includes(i)||(u.length===0?o=this.frontmatterService.updateProperty(o,"aliases",`
  - ${i}`):o=this.frontmatterService.updateProperty(o,"aliases",`${u.map(f=>`
  - ${f}`).join("")}
  - ${i}`)),this.dryRun){if(console.log("\u{1F50D} DRY RUN: Preview of changes (not applied)"),console.log(`   File: ${e}`),console.log("   Changes:"),console.log(`     \u2022 exo__Asset_label: "${i}"`),u.includes(i))console.log("     \u2022 aliases: unchanged (label already present)");else{let f=u.length===0?[i]:[...u,i];console.log(`     \u2022 aliases: [${f.map(l=>`"${l}"`).join(", ")}]`)}console.log(`
\u{1F4A1} Run without --dry-run to apply changes`),process.exit(0)}await this.fsAdapter.updateFile(n,o),console.log("\u2705 Updated label"),console.log(`   File: ${e}`),console.log(`   New label: "${i}"`),console.log("   Aliases synchronized"),process.exit(0)}catch(i){rt.handle(i)}}async executeSchedule(e,t){try{await this.updatePlannedTimestamp(e,t,"ems__Effort_plannedStartTimestamp"),process.exit(0)}catch(i){rt.handle(i)}}async executeSetDeadline(e,t){try{await this.updatePlannedTimestamp(e,t,"ems__Effort_plannedEndTimestamp"),process.exit(0)}catch(i){rt.handle(i)}}async updatePlannedTimestamp(e,t,i){let{relativePath:n}=this.resolveAndValidate(e);if(!await this.fsAdapter.fileExists(n))throw new Error(`File not found: ${e}`);if(!/^\d{4}-\d{2}-\d{2}$/.test(t))throw new Error(`Invalid date format: ${t}. Expected YYYY-MM-DD (e.g., 2025-11-25)`);let o=vv.DateFormatter.toTimestampAtStartOfDay(t),c=await this.fsAdapter.readFile(n),u=this.frontmatterService.updateProperty(c,i,o);await this.fsAdapter.writeFile(n,u),console.log(`\u2705 ${i==="ems__Effort_plannedStartTimestamp"?"Scheduled":"Set deadline for"}: ${e}`),console.log(`   Date: ${t}`),console.log(`   Timestamp: ${o}`)}};var al=class{static{a(this,"CommandExecutor")}constructor(e,t=!1){this.context={pathResolver:new il(e),fsAdapter:new rl(e),frontmatterService:new bv.FrontmatterService,dryRun:t},this.statusExecutor=new no(this.context),this.creationExecutor=new so(this.context),this.propertyExecutor=new ao(this.context)}async execute(e,t,i){try{let n=this.context.pathResolver.resolve(t);this.context.pathResolver.validate(n),await this.context.fsAdapter.readFile(n.replace(this.context.pathResolver.getVaultRoot()+"/","")),console.log("\u2705 Command infrastructure verified"),console.log(`   Command: ${e}`),console.log(`   File: ${n}`),console.log(`   Vault: ${this.context.pathResolver.getVaultRoot()}`),Object.keys(i).length>0&&console.log(`   Options: ${JSON.stringify(i,null,2)}`),console.log(`
\u{1F4DD} Note: Actual command execution will be implemented in follow-up issues.`),console.log("    This PR establishes the infrastructure foundation."),process.exit(0)}catch(n){rt.handle(n)}}getVaultRoot(){return this.context.pathResolver.getVaultRoot()}async executeStart(e){return this.statusExecutor.executeStart(e)}async executeComplete(e){return this.statusExecutor.executeComplete(e)}async executeTrash(e){return this.statusExecutor.executeTrash(e)}async executeArchive(e){return this.statusExecutor.executeArchive(e)}async executeMoveToBacklog(e){return this.statusExecutor.executeMoveToBacklog(e)}async executeMoveToAnalysis(e){return this.statusExecutor.executeMoveToAnalysis(e)}async executeMoveToToDo(e){return this.statusExecutor.executeMoveToToDo(e)}async executeCreateTask(e,t,i={}){return this.creationExecutor.executeCreateTask(e,t,i)}async executeCreateMeeting(e,t,i={}){return this.creationExecutor.executeCreateMeeting(e,t,i)}async executeCreateProject(e,t,i={}){return this.creationExecutor.executeCreateProject(e,t,i)}async executeCreateArea(e,t,i={}){return this.creationExecutor.executeCreateArea(e,t,i)}async executeRenameToUid(e){return this.propertyExecutor.executeRenameToUid(e)}async executeUpdateLabel(e,t){return this.propertyExecutor.executeUpdateLabel(e,t)}async executeSchedule(e,t){return this.propertyExecutor.executeSchedule(e,t)}async executeSetDeadline(e,t){return this.propertyExecutor.executeSetDeadline(e,t)}};function wv(){return new ns("command").description("Execute plugin command on single asset").argument("<command-name>","Command to execute (rename-to-uid, start, complete, schedule, set-deadline, etc.)").argument("<filepath>","Path to asset file (relative to vault root or absolute)").option("--vault <path>","Path to Obsidian vault",process.cwd()).option("--label <value>","Asset label (required for update-label and creation commands)").option("--prototype <uid>","Prototype UID for inheritance (creation commands)").option("--area <uid>","Area UID for effort linkage (creation commands)").option("--parent <uid>","Parent UID for effort linkage (creation commands)").option("--date <value>","Date in YYYY-MM-DD format (required for schedule and set-deadline commands)").option("--dry-run","Preview changes without modifying files").action(async(r,e,t)=>{let i=(0,Sv.resolve)(t.vault),n=new al(i,t.dryRun);switch(r){case"rename-to-uid":await n.executeRenameToUid(e);break;case"update-label":t.label||(console.error("Error: --label option is required for update-label command"),console.error('Usage: exocortex command update-label <filepath> --label "<value>"'),process.exit(2)),await n.executeUpdateLabel(e,t.label);break;case"start":await n.executeStart(e);break;case"complete":await n.executeComplete(e);break;case"trash":await n.executeTrash(e);break;case"archive":await n.executeArchive(e);break;case"move-to-backlog":await n.executeMoveToBacklog(e);break;case"move-to-analysis":await n.executeMoveToAnalysis(e);break;case"move-to-todo":await n.executeMoveToToDo(e);break;case"create-task":t.label||(console.error("Error: --label option is required for create-task command"),console.error('Usage: exocortex command create-task <filepath> --label "<value>"'),process.exit(2)),await n.executeCreateTask(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent});break;case"create-meeting":t.label||(console.error("Error: --label option is required for create-meeting command"),console.error('Usage: exocortex command create-meeting <filepath> --label "<value>"'),process.exit(2)),await n.executeCreateMeeting(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent});break;case"create-project":t.label||(console.error("Error: --label option is required for create-project command"),console.error('Usage: exocortex command create-project <filepath> --label "<value>"'),process.exit(2)),await n.executeCreateProject(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent});break;case"create-area":t.label||(console.error("Error: --label option is required for create-area command"),console.error('Usage: exocortex command create-area <filepath> --label "<value>"'),process.exit(2)),await n.executeCreateArea(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent});break;case"schedule":t.date||(console.error("Error: --date option is required for schedule command"),console.error('Usage: exocortex command schedule <filepath> --date "YYYY-MM-DD"'),process.exit(2)),await n.executeSchedule(e,t.date);break;case"set-deadline":t.date||(console.error("Error: --date option is required for set-deadline command"),console.error('Usage: exocortex command set-deadline <filepath> --date "YYYY-MM-DD"'),process.exit(2)),await n.executeSetDeadline(e,t.date);break;default:await n.execute(r,e,t);break}})}a(wv,"commandCommand");var ol=new ns;ol.name("exocortex").description("CLI tool for Exocortex knowledge management system").version("0.1.0");ol.command("sparql").description("SPARQL query execution").addCommand(m_());ol.addCommand(wv());ol.parse();
/*! Bundled license information:

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
