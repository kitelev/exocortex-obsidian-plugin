#!/usr/bin/env node
// exocortex-cli v0.1.0
// CLI tool for Exocortex knowledge management system - SPARQL queries, task management, and more
// License: MIT

"use strict";var rb=Object.create;var oa=Object.defineProperty;var ib=Object.getOwnPropertyDescriptor;var nb=Object.getOwnPropertyNames;var sb=Object.getPrototypeOf,ab=Object.prototype.hasOwnProperty;var o=(r,e)=>oa(r,"name",{value:e,configurable:!0});var ob=(r,e)=>()=>(r&&(e=r(r=0)),e);var y=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),cb=(r,e)=>{for(var t in e)oa(r,t,{get:e[t],enumerable:!0})},m1=(r,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of nb(e))!ab.call(r,n)&&n!==t&&oa(r,n,{get:()=>e[n],enumerable:!(i=ib(e,n))||i.enumerable});return r};var st=(r,e,t)=>(t=r!=null?rb(sb(r)):{},m1(e||!r||!r.__esModule?oa(t,"default",{value:r,enumerable:!0}):t,r)),Ll=r=>m1(oa({},"__esModule",{value:!0}),r);var ql=y(()=>{var g1;(function(r){(function(e){var t=typeof globalThis=="object"?globalThis:typeof global=="object"?global:typeof self=="object"?self:typeof this=="object"?this:c(),i=n(r);typeof t.Reflect<"u"&&(i=n(t.Reflect,i)),e(i,t),typeof t.Reflect>"u"&&(t.Reflect=r);function n(u,f){return function(l,h){Object.defineProperty(u,l,{configurable:!0,writable:!0,value:h}),f&&f(l,h)}}o(n,"makeExporter");function s(){try{return Function("return this;")()}catch{}}o(s,"functionThis");function a(){try{return(0,eval)("(function() { return this; })()")}catch{}}o(a,"indirectEvalThis");function c(){return s()||a()}o(c,"sloppyModeThis")})(function(e,t){var i=Object.prototype.hasOwnProperty,n=typeof Symbol=="function",s=n&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",a=n&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",c=typeof Object.create=="function",u={__proto__:[]}instanceof Array,f=!c&&!u,l={create:c?function(){return xe(Object.create(null))}:u?function(){return xe({__proto__:null})}:function(){return xe({})},has:f?function(_,b){return i.call(_,b)}:function(_,b){return b in _},get:f?function(_,b){return i.call(_,b)?_[b]:void 0}:function(_,b){return _[b]}},h=Object.getPrototypeOf(Function),p=typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:ae(),g=typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:De(),v=typeof WeakMap=="function"?WeakMap:Oe(),S=n?Symbol.for("@reflect-metadata:registry"):void 0,A=ie(),F=se(A);function D(_,b,w,C){if(j(w)){if(!ye(_))throw new TypeError;if(!_e(b))throw new TypeError;return Qe(_,b)}else{if(!ye(_))throw new TypeError;if(!B(b))throw new TypeError;if(!B(C)&&!j(C)&&!le(C))throw new TypeError;return le(C)&&(C=void 0),w=ue(w),Be(_,b,w,C)}}o(D,"decorate"),e("decorate",D);function U(_,b){function w(C,q){if(!B(C))throw new TypeError;if(!j(q)&&!Te(q))throw new TypeError;$(_,b,C,q)}return o(w,"decorator"),w}o(U,"metadata"),e("metadata",U);function H(_,b,w,C){if(!B(w))throw new TypeError;return j(C)||(C=ue(C)),$(_,b,w,C)}o(H,"defineMetadata"),e("defineMetadata",H);function ne(_,b,w){if(!B(b))throw new TypeError;return j(w)||(w=ue(w)),We(_,b,w)}o(ne,"hasMetadata"),e("hasMetadata",ne);function Fe(_,b,w){if(!B(b))throw new TypeError;return j(w)||(w=ue(w)),Pe(_,b,w)}o(Fe,"hasOwnMetadata"),e("hasOwnMetadata",Fe);function it(_,b,w){if(!B(b))throw new TypeError;return j(w)||(w=ue(w)),Ie(_,b,w)}o(it,"getMetadata"),e("getMetadata",it);function pt(_,b,w){if(!B(b))throw new TypeError;return j(w)||(w=ue(w)),Ce(_,b,w)}o(pt,"getOwnMetadata"),e("getOwnMetadata",pt);function V(_,b){if(!B(_))throw new TypeError;return j(b)||(b=ue(b)),I(_,b)}o(V,"getMetadataKeys"),e("getMetadataKeys",V);function ce(_,b){if(!B(_))throw new TypeError;return j(b)||(b=ue(b)),Ne(_,b)}o(ce,"getOwnMetadataKeys"),e("getOwnMetadataKeys",ce);function Ae(_,b,w){if(!B(b))throw new TypeError;if(j(w)||(w=ue(w)),!B(b))throw new TypeError;j(w)||(w=ue(w));var C=W(b,w,!1);return j(C)?!1:C.OrdinaryDeleteMetadata(_,b,w)}o(Ae,"deleteMetadata"),e("deleteMetadata",Ae);function Qe(_,b){for(var w=_.length-1;w>=0;--w){var C=_[w],q=C(b);if(!j(q)&&!le(q)){if(!_e(q))throw new TypeError;b=q}}return b}o(Qe,"DecorateConstructor");function Be(_,b,w,C){for(var q=_.length-1;q>=0;--q){var $e=_[q],ze=$e(b,w,C);if(!j(ze)&&!le(ze)){if(!B(ze))throw new TypeError;C=ze}}return C}o(Be,"DecorateProperty");function We(_,b,w){var C=Pe(_,b,w);if(C)return!0;var q=Y(b);return le(q)?!1:We(_,q,w)}o(We,"OrdinaryHasMetadata");function Pe(_,b,w){var C=W(b,w,!1);return j(C)?!1:ge(C.OrdinaryHasOwnMetadata(_,b,w))}o(Pe,"OrdinaryHasOwnMetadata");function Ie(_,b,w){var C=Pe(_,b,w);if(C)return Ce(_,b,w);var q=Y(b);if(!le(q))return Ie(_,q,w)}o(Ie,"OrdinaryGetMetadata");function Ce(_,b,w){var C=W(b,w,!1);if(!j(C))return C.OrdinaryGetOwnMetadata(_,b,w)}o(Ce,"OrdinaryGetOwnMetadata");function $(_,b,w,C){var q=W(w,C,!0);q.OrdinaryDefineOwnMetadata(_,b,w,C)}o($,"OrdinaryDefineOwnMetadata");function I(_,b){var w=Ne(_,b),C=Y(_);if(C===null)return w;var q=I(C,b);if(q.length<=0)return w;if(w.length<=0)return q;for(var $e=new g,ze=[],me=0,N=w;me<N.length;me++){var k=N[me],M=$e.has(k);M||($e.add(k),ze.push(k))}for(var L=0,de=q;L<de.length;L++){var k=de[L],M=$e.has(k);M||($e.add(k),ze.push(k))}return ze}o(I,"OrdinaryMetadataKeys");function Ne(_,b){var w=W(_,b,!1);return w?w.OrdinaryOwnMetadataKeys(_,b):[]}o(Ne,"OrdinaryOwnMetadataKeys");function qe(_){if(_===null)return 1;switch(typeof _){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return _===null?1:6;default:return 6}}o(qe,"Type");function j(_){return _===void 0}o(j,"IsUndefined");function le(_){return _===null}o(le,"IsNull");function be(_){return typeof _=="symbol"}o(be,"IsSymbol");function B(_){return typeof _=="object"?_!==null:typeof _=="function"}o(B,"IsObject");function Se(_,b){switch(qe(_)){case 0:return _;case 1:return _;case 2:return _;case 3:return _;case 4:return _;case 5:return _}var w=b===3?"string":b===5?"number":"default",C=ee(_,s);if(C!==void 0){var q=C.call(_,w);if(B(q))throw new TypeError;return q}return we(_,w==="default"?"number":w)}o(Se,"ToPrimitive");function we(_,b){if(b==="string"){var w=_.toString;if(fe(w)){var C=w.call(_);if(!B(C))return C}var q=_.valueOf;if(fe(q)){var C=q.call(_);if(!B(C))return C}}else{var q=_.valueOf;if(fe(q)){var C=q.call(_);if(!B(C))return C}var $e=_.toString;if(fe($e)){var C=$e.call(_);if(!B(C))return C}}throw new TypeError}o(we,"OrdinaryToPrimitive");function ge(_){return!!_}o(ge,"ToBoolean");function Ee(_){return""+_}o(Ee,"ToString");function ue(_){var b=Se(_,3);return be(b)?b:Ee(b)}o(ue,"ToPropertyKey");function ye(_){return Array.isArray?Array.isArray(_):_ instanceof Object?_ instanceof Array:Object.prototype.toString.call(_)==="[object Array]"}o(ye,"IsArray");function fe(_){return typeof _=="function"}o(fe,"IsCallable");function _e(_){return typeof _=="function"}o(_e,"IsConstructor");function Te(_){switch(qe(_)){case 3:return!0;case 4:return!0;default:return!1}}o(Te,"IsPropertyKey");function Q(_,b){return _===b||_!==_&&b!==b}o(Q,"SameValueZero");function ee(_,b){var w=_[b];if(w!=null){if(!fe(w))throw new TypeError;return w}}o(ee,"GetMethod");function te(_){var b=ee(_,a);if(!fe(b))throw new TypeError;var w=b.call(_);if(!B(w))throw new TypeError;return w}o(te,"GetIterator");function J(_){return _.value}o(J,"IteratorValue");function X(_){var b=_.next();return b.done?!1:b}o(X,"IteratorStep");function Z(_){var b=_.return;b&&b.call(_)}o(Z,"IteratorClose");function Y(_){var b=Object.getPrototypeOf(_);if(typeof _!="function"||_===h||b!==h)return b;var w=_.prototype,C=w&&Object.getPrototypeOf(w);if(C==null||C===Object.prototype)return b;var q=C.constructor;return typeof q!="function"||q===_?b:q}o(Y,"OrdinaryGetPrototypeOf");function re(){var _;!j(S)&&typeof t.Reflect<"u"&&!(S in t.Reflect)&&typeof t.Reflect.defineMetadata=="function"&&(_=G(t.Reflect));var b,w,C,q=new v,$e={registerProvider:ze,getProvider:N,setProvider:M};return $e;function ze(L){if(!Object.isExtensible($e))throw new Error("Cannot add provider to a frozen registry.");switch(!0){case _===L:break;case j(b):b=L;break;case b===L:break;case j(w):w=L;break;case w===L:break;default:C===void 0&&(C=new g),C.add(L);break}}function me(L,de){if(!j(b)){if(b.isProviderFor(L,de))return b;if(!j(w)){if(w.isProviderFor(L,de))return b;if(!j(C))for(var ke=te(C);;){var je=X(ke);if(!je)return;var wt=J(je);if(wt.isProviderFor(L,de))return Z(ke),wt}}}if(!j(_)&&_.isProviderFor(L,de))return _}function N(L,de){var ke=q.get(L),je;return j(ke)||(je=ke.get(de)),j(je)&&(je=me(L,de),j(je)||(j(ke)&&(ke=new p,q.set(L,ke)),ke.set(de,je))),je}function k(L){if(j(L))throw new TypeError;return b===L||w===L||!j(C)&&C.has(L)}function M(L,de,ke){if(!k(ke))throw new Error("Metadata provider not registered.");var je=N(L,de);if(je!==ke){if(!j(je))return!1;var wt=q.get(L);j(wt)&&(wt=new p,q.set(L,wt)),wt.set(de,ke)}return!0}}o(re,"CreateMetadataRegistry");function ie(){var _;return!j(S)&&B(t.Reflect)&&Object.isExtensible(t.Reflect)&&(_=t.Reflect[S]),j(_)&&(_=re()),!j(S)&&B(t.Reflect)&&Object.isExtensible(t.Reflect)&&Object.defineProperty(t.Reflect,S,{enumerable:!1,configurable:!1,writable:!1,value:_}),_}o(ie,"GetOrCreateMetadataRegistry");function se(_){var b=new v,w={isProviderFor:o(function(k,M){var L=b.get(k);return j(L)?!1:L.has(M)},"isProviderFor"),OrdinaryDefineOwnMetadata:ze,OrdinaryHasOwnMetadata:q,OrdinaryGetOwnMetadata:$e,OrdinaryOwnMetadataKeys:me,OrdinaryDeleteMetadata:N};return A.registerProvider(w),w;function C(k,M,L){var de=b.get(k),ke=!1;if(j(de)){if(!L)return;de=new p,b.set(k,de),ke=!0}var je=de.get(M);if(j(je)){if(!L)return;if(je=new p,de.set(M,je),!_.setProvider(k,M,w))throw de.delete(M),ke&&b.delete(k),new Error("Wrong provider for target.")}return je}o(C,"GetOrCreateMetadataMap");function q(k,M,L){var de=C(M,L,!1);return j(de)?!1:ge(de.has(k))}o(q,"OrdinaryHasOwnMetadata");function $e(k,M,L){var de=C(M,L,!1);if(!j(de))return de.get(k)}o($e,"OrdinaryGetOwnMetadata");function ze(k,M,L,de){var ke=C(L,de,!0);ke.set(k,M)}o(ze,"OrdinaryDefineOwnMetadata");function me(k,M){var L=[],de=C(k,M,!1);if(j(de))return L;for(var ke=de.keys(),je=te(ke),wt=0;;){var Zt=X(je);if(!Zt)return L.length=wt,L;var cr=J(Zt);try{L[wt]=cr}catch(Vt){try{Z(je)}finally{throw Vt}}wt++}}o(me,"OrdinaryOwnMetadataKeys");function N(k,M,L){var de=C(M,L,!1);if(j(de)||!de.delete(k))return!1;if(de.size===0){var ke=b.get(M);j(ke)||(ke.delete(L),ke.size===0&&b.delete(ke))}return!0}o(N,"OrdinaryDeleteMetadata")}o(se,"CreateMetadataProvider");function G(_){var b=_.defineMetadata,w=_.hasOwnMetadata,C=_.getOwnMetadata,q=_.getOwnMetadataKeys,$e=_.deleteMetadata,ze=new v,me={isProviderFor:o(function(N,k){var M=ze.get(N);return!j(M)&&M.has(k)?!0:q(N,k).length?(j(M)&&(M=new g,ze.set(N,M)),M.add(k),!0):!1},"isProviderFor"),OrdinaryDefineOwnMetadata:b,OrdinaryHasOwnMetadata:w,OrdinaryGetOwnMetadata:C,OrdinaryOwnMetadataKeys:q,OrdinaryDeleteMetadata:$e};return me}o(G,"CreateFallbackProvider");function W(_,b,w){var C=A.getProvider(_,b);if(!j(C))return C;if(w){if(A.setProvider(_,b,F))return F;throw new Error("Illegal state.")}}o(W,"GetMetadataProvider");function ae(){var _={},b=[],w=(function(){function me(N,k,M){this._index=0,this._keys=N,this._values=k,this._selector=M}return o(me,"MapIterator"),me.prototype["@@iterator"]=function(){return this},me.prototype[a]=function(){return this},me.prototype.next=function(){var N=this._index;if(N>=0&&N<this._keys.length){var k=this._selector(this._keys[N],this._values[N]);return N+1>=this._keys.length?(this._index=-1,this._keys=b,this._values=b):this._index++,{value:k,done:!1}}return{value:void 0,done:!0}},me.prototype.throw=function(N){throw this._index>=0&&(this._index=-1,this._keys=b,this._values=b),N},me.prototype.return=function(N){return this._index>=0&&(this._index=-1,this._keys=b,this._values=b),{value:N,done:!0}},me})(),C=(function(){function me(){this._keys=[],this._values=[],this._cacheKey=_,this._cacheIndex=-2}return o(me,"Map"),Object.defineProperty(me.prototype,"size",{get:o(function(){return this._keys.length},"get"),enumerable:!0,configurable:!0}),me.prototype.has=function(N){return this._find(N,!1)>=0},me.prototype.get=function(N){var k=this._find(N,!1);return k>=0?this._values[k]:void 0},me.prototype.set=function(N,k){var M=this._find(N,!0);return this._values[M]=k,this},me.prototype.delete=function(N){var k=this._find(N,!1);if(k>=0){for(var M=this._keys.length,L=k+1;L<M;L++)this._keys[L-1]=this._keys[L],this._values[L-1]=this._values[L];return this._keys.length--,this._values.length--,Q(N,this._cacheKey)&&(this._cacheKey=_,this._cacheIndex=-2),!0}return!1},me.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=_,this._cacheIndex=-2},me.prototype.keys=function(){return new w(this._keys,this._values,q)},me.prototype.values=function(){return new w(this._keys,this._values,$e)},me.prototype.entries=function(){return new w(this._keys,this._values,ze)},me.prototype["@@iterator"]=function(){return this.entries()},me.prototype[a]=function(){return this.entries()},me.prototype._find=function(N,k){if(!Q(this._cacheKey,N)){this._cacheIndex=-1;for(var M=0;M<this._keys.length;M++)if(Q(this._keys[M],N)){this._cacheIndex=M;break}}return this._cacheIndex<0&&k&&(this._cacheIndex=this._keys.length,this._keys.push(N),this._values.push(void 0)),this._cacheIndex},me})();return C;function q(me,N){return me}function $e(me,N){return N}function ze(me,N){return[me,N]}}o(ae,"CreateMapPolyfill");function De(){var _=(function(){function b(){this._map=new p}return o(b,"Set"),Object.defineProperty(b.prototype,"size",{get:o(function(){return this._map.size},"get"),enumerable:!0,configurable:!0}),b.prototype.has=function(w){return this._map.has(w)},b.prototype.add=function(w){return this._map.set(w,w),this},b.prototype.delete=function(w){return this._map.delete(w)},b.prototype.clear=function(){this._map.clear()},b.prototype.keys=function(){return this._map.keys()},b.prototype.values=function(){return this._map.keys()},b.prototype.entries=function(){return this._map.entries()},b.prototype["@@iterator"]=function(){return this.keys()},b.prototype[a]=function(){return this.keys()},b})();return _}o(De,"CreateSetPolyfill");function Oe(){var _=16,b=l.create(),w=C();return(function(){function N(){this._key=C()}return o(N,"WeakMap"),N.prototype.has=function(k){var M=q(k,!1);return M!==void 0?l.has(M,this._key):!1},N.prototype.get=function(k){var M=q(k,!1);return M!==void 0?l.get(M,this._key):void 0},N.prototype.set=function(k,M){var L=q(k,!0);return L[this._key]=M,this},N.prototype.delete=function(k){var M=q(k,!1);return M!==void 0?delete M[this._key]:!1},N.prototype.clear=function(){this._key=C()},N})();function C(){var N;do N="@@WeakMap@@"+me();while(l.has(b,N));return b[N]=!0,N}function q(N,k){if(!i.call(N,w)){if(!k)return;Object.defineProperty(N,w,{value:l.create()})}return N[w]}function $e(N,k){for(var M=0;M<k;++M)N[M]=Math.random()*255|0;return N}function ze(N){if(typeof Uint8Array=="function"){var k=new Uint8Array(N);return typeof crypto<"u"?crypto.getRandomValues(k):typeof msCrypto<"u"?msCrypto.getRandomValues(k):$e(k,N),k}return $e(new Array(N),N)}function me(){var N=ze(_);N[6]=N[6]&79|64,N[8]=N[8]&191|128;for(var k="",M=0;M<_;++M){var L=N[M];(M===4||M===6||M===8)&&(k+="-"),L<16&&(k+="0"),k+=L.toString(16).toLowerCase()}return k}}o(Oe,"CreateWeakMapPolyfill");function xe(_){return _.__=void 0,delete _.__,_}o(xe,"MakeDictionary")})})(g1||(g1={}))});var ca=y(Ul=>{var Mo=class extends Error{static{o(this,"CommanderError")}constructor(e,t,i){super(i),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.code=t,this.exitCode=e,this.nestedError=void 0}},Vl=class extends Mo{static{o(this,"InvalidArgumentError")}constructor(e){super(1,"commander.invalidArgument",e),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name}};Ul.CommanderError=Mo;Ul.InvalidArgumentError=Vl});var Lo=y($l=>{var{InvalidArgumentError:ub}=ca(),Bl=class{static{o(this,"Argument")}constructor(e,t){switch(this.description=t||"",this.variadic=!1,this.parseArg=void 0,this.defaultValue=void 0,this.defaultValueDescription=void 0,this.argChoices=void 0,e[0]){case"<":this.required=!0,this._name=e.slice(1,-1);break;case"[":this.required=!1,this._name=e.slice(1,-1);break;default:this.required=!0,this._name=e;break}this._name.endsWith("...")&&(this.variadic=!0,this._name=this._name.slice(0,-3))}name(){return this._name}_collectValue(e,t){return t===this.defaultValue||!Array.isArray(t)?[e]:(t.push(e),t)}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}argParser(e){return this.parseArg=e,this}choices(e){return this.argChoices=e.slice(),this.parseArg=(t,i)=>{if(!this.argChoices.includes(t))throw new ub(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._collectValue(t,i):t},this}argRequired(){return this.required=!0,this}argOptional(){return this.required=!1,this}};function lb(r){let e=r.name()+(r.variadic===!0?"...":"");return r.required?"<"+e+">":"["+e+"]"}o(lb,"humanReadableArgName");$l.Argument=Bl;$l.humanReadableArgName=lb});var Hl=y(Wl=>{var{humanReadableArgName:fb}=Lo(),Gl=class{static{o(this,"Help")}constructor(){this.helpWidth=void 0,this.minWidthToWrap=40,this.sortSubcommands=!1,this.sortOptions=!1,this.showGlobalOptions=!1}prepareContext(e){this.helpWidth=this.helpWidth??e.helpWidth??80}visibleCommands(e){let t=e.commands.filter(n=>!n._hidden),i=e._getHelpCommand();return i&&!i._hidden&&t.push(i),this.sortSubcommands&&t.sort((n,s)=>n.name().localeCompare(s.name())),t}compareOptions(e,t){let i=o(n=>n.short?n.short.replace(/^-/,""):n.long.replace(/^--/,""),"getSortKey");return i(e).localeCompare(i(t))}visibleOptions(e){let t=e.options.filter(n=>!n.hidden),i=e._getHelpOption();if(i&&!i.hidden){let n=i.short&&e._findOption(i.short),s=i.long&&e._findOption(i.long);!n&&!s?t.push(i):i.long&&!s?t.push(e.createOption(i.long,i.description)):i.short&&!n&&t.push(e.createOption(i.short,i.description))}return this.sortOptions&&t.sort(this.compareOptions),t}visibleGlobalOptions(e){if(!this.showGlobalOptions)return[];let t=[];for(let i=e.parent;i;i=i.parent){let n=i.options.filter(s=>!s.hidden);t.push(...n)}return this.sortOptions&&t.sort(this.compareOptions),t}visibleArguments(e){return e._argsDescription&&e.registeredArguments.forEach(t=>{t.description=t.description||e._argsDescription[t.name()]||""}),e.registeredArguments.find(t=>t.description)?e.registeredArguments:[]}subcommandTerm(e){let t=e.registeredArguments.map(i=>fb(i)).join(" ");return e._name+(e._aliases[0]?"|"+e._aliases[0]:"")+(e.options.length?" [options]":"")+(t?" "+t:"")}optionTerm(e){return e.flags}argumentTerm(e){return e.name()}longestSubcommandTermLength(e,t){return t.visibleCommands(e).reduce((i,n)=>Math.max(i,this.displayWidth(t.styleSubcommandTerm(t.subcommandTerm(n)))),0)}longestOptionTermLength(e,t){return t.visibleOptions(e).reduce((i,n)=>Math.max(i,this.displayWidth(t.styleOptionTerm(t.optionTerm(n)))),0)}longestGlobalOptionTermLength(e,t){return t.visibleGlobalOptions(e).reduce((i,n)=>Math.max(i,this.displayWidth(t.styleOptionTerm(t.optionTerm(n)))),0)}longestArgumentTermLength(e,t){return t.visibleArguments(e).reduce((i,n)=>Math.max(i,this.displayWidth(t.styleArgumentTerm(t.argumentTerm(n)))),0)}commandUsage(e){let t=e._name;e._aliases[0]&&(t=t+"|"+e._aliases[0]);let i="";for(let n=e.parent;n;n=n.parent)i=n.name()+" "+i;return i+t+" "+e.usage()}commandDescription(e){return e.description()}subcommandDescription(e){return e.summary()||e.description()}optionDescription(e){let t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map(i=>JSON.stringify(i)).join(", ")}`),e.defaultValue!==void 0&&(e.required||e.optional||e.isBoolean()&&typeof e.defaultValue=="boolean")&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),e.presetArg!==void 0&&e.optional&&t.push(`preset: ${JSON.stringify(e.presetArg)}`),e.envVar!==void 0&&t.push(`env: ${e.envVar}`),t.length>0){let i=`(${t.join(", ")})`;return e.description?`${e.description} ${i}`:i}return e.description}argumentDescription(e){let t=[];if(e.argChoices&&t.push(`choices: ${e.argChoices.map(i=>JSON.stringify(i)).join(", ")}`),e.defaultValue!==void 0&&t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`),t.length>0){let i=`(${t.join(", ")})`;return e.description?`${e.description} ${i}`:i}return e.description}formatItemList(e,t,i){return t.length===0?[]:[i.styleTitle(e),...t,""]}groupItems(e,t,i){let n=new Map;return e.forEach(s=>{let a=i(s);n.has(a)||n.set(a,[])}),t.forEach(s=>{let a=i(s);n.has(a)||n.set(a,[]),n.get(a).push(s)}),n}formatHelp(e,t){let i=t.padWidth(e,t),n=t.helpWidth??80;function s(h,p){return t.formatItem(h,i,p,t)}o(s,"callFormatItem");let a=[`${t.styleTitle("Usage:")} ${t.styleUsage(t.commandUsage(e))}`,""],c=t.commandDescription(e);c.length>0&&(a=a.concat([t.boxWrap(t.styleCommandDescription(c),n),""]));let u=t.visibleArguments(e).map(h=>s(t.styleArgumentTerm(t.argumentTerm(h)),t.styleArgumentDescription(t.argumentDescription(h))));if(a=a.concat(this.formatItemList("Arguments:",u,t)),this.groupItems(e.options,t.visibleOptions(e),h=>h.helpGroupHeading??"Options:").forEach((h,p)=>{let g=h.map(v=>s(t.styleOptionTerm(t.optionTerm(v)),t.styleOptionDescription(t.optionDescription(v))));a=a.concat(this.formatItemList(p,g,t))}),t.showGlobalOptions){let h=t.visibleGlobalOptions(e).map(p=>s(t.styleOptionTerm(t.optionTerm(p)),t.styleOptionDescription(t.optionDescription(p))));a=a.concat(this.formatItemList("Global Options:",h,t))}return this.groupItems(e.commands,t.visibleCommands(e),h=>h.helpGroup()||"Commands:").forEach((h,p)=>{let g=h.map(v=>s(t.styleSubcommandTerm(t.subcommandTerm(v)),t.styleSubcommandDescription(t.subcommandDescription(v))));a=a.concat(this.formatItemList(p,g,t))}),a.join(`
`)}displayWidth(e){return y1(e).length}styleTitle(e){return e}styleUsage(e){return e.split(" ").map(t=>t==="[options]"?this.styleOptionText(t):t==="[command]"?this.styleSubcommandText(t):t[0]==="["||t[0]==="<"?this.styleArgumentText(t):this.styleCommandText(t)).join(" ")}styleCommandDescription(e){return this.styleDescriptionText(e)}styleOptionDescription(e){return this.styleDescriptionText(e)}styleSubcommandDescription(e){return this.styleDescriptionText(e)}styleArgumentDescription(e){return this.styleDescriptionText(e)}styleDescriptionText(e){return e}styleOptionTerm(e){return this.styleOptionText(e)}styleSubcommandTerm(e){return e.split(" ").map(t=>t==="[options]"?this.styleOptionText(t):t[0]==="["||t[0]==="<"?this.styleArgumentText(t):this.styleSubcommandText(t)).join(" ")}styleArgumentTerm(e){return this.styleArgumentText(e)}styleOptionText(e){return e}styleArgumentText(e){return e}styleSubcommandText(e){return e}styleCommandText(e){return e}padWidth(e,t){return Math.max(t.longestOptionTermLength(e,t),t.longestGlobalOptionTermLength(e,t),t.longestSubcommandTermLength(e,t),t.longestArgumentTermLength(e,t))}preformatted(e){return/\n[^\S\r\n]/.test(e)}formatItem(e,t,i,n){let a=" ".repeat(2);if(!i)return a+e;let c=e.padEnd(t+e.length-n.displayWidth(e)),u=2,l=(this.helpWidth??80)-t-u-2,h;return l<this.minWidthToWrap||n.preformatted(i)?h=i:h=n.boxWrap(i,l).replace(/\n/g,`
`+" ".repeat(t+u)),a+c+" ".repeat(u)+h.replace(/\n/g,`
${a}`)}boxWrap(e,t){if(t<this.minWidthToWrap)return e;let i=e.split(/\r\n|\n/),n=/[\s]*[^\s]+/g,s=[];return i.forEach(a=>{let c=a.match(n);if(c===null){s.push("");return}let u=[c.shift()],f=this.displayWidth(u[0]);c.forEach(l=>{let h=this.displayWidth(l);if(f+h<=t){u.push(l),f+=h;return}s.push(u.join(""));let p=l.trimStart();u=[p],f=this.displayWidth(p)}),s.push(u.join(""))}),s.join(`
`)}};function y1(r){let e=/\x1b\[\d*(;\d*)*m/g;return r.replace(e,"")}o(y1,"stripColor");Wl.Help=Gl;Wl.stripColor=y1});var Ql=y(Yl=>{var{InvalidArgumentError:hb}=ca(),zl=class{static{o(this,"Option")}constructor(e,t){this.flags=e,this.description=t||"",this.required=e.includes("<"),this.optional=e.includes("["),this.variadic=/\w\.\.\.[>\]]$/.test(e),this.mandatory=!1;let i=db(e);this.short=i.shortFlag,this.long=i.longFlag,this.negate=!1,this.long&&(this.negate=this.long.startsWith("--no-")),this.defaultValue=void 0,this.defaultValueDescription=void 0,this.presetArg=void 0,this.envVar=void 0,this.parseArg=void 0,this.hidden=!1,this.argChoices=void 0,this.conflictsWith=[],this.implied=void 0,this.helpGroupHeading=void 0}default(e,t){return this.defaultValue=e,this.defaultValueDescription=t,this}preset(e){return this.presetArg=e,this}conflicts(e){return this.conflictsWith=this.conflictsWith.concat(e),this}implies(e){let t=e;return typeof e=="string"&&(t={[e]:!0}),this.implied=Object.assign(this.implied||{},t),this}env(e){return this.envVar=e,this}argParser(e){return this.parseArg=e,this}makeOptionMandatory(e=!0){return this.mandatory=!!e,this}hideHelp(e=!0){return this.hidden=!!e,this}_collectValue(e,t){return t===this.defaultValue||!Array.isArray(t)?[e]:(t.push(e),t)}choices(e){return this.argChoices=e.slice(),this.parseArg=(t,i)=>{if(!this.argChoices.includes(t))throw new hb(`Allowed choices are ${this.argChoices.join(", ")}.`);return this.variadic?this._collectValue(t,i):t},this}name(){return this.long?this.long.replace(/^--/,""):this.short.replace(/^-/,"")}attributeName(){return this.negate?_1(this.name().replace(/^no-/,"")):_1(this.name())}helpGroup(e){return this.helpGroupHeading=e,this}is(e){return this.short===e||this.long===e}isBoolean(){return!this.required&&!this.optional&&!this.negate}},Kl=class{static{o(this,"DualOptions")}constructor(e){this.positiveOptions=new Map,this.negativeOptions=new Map,this.dualOptions=new Set,e.forEach(t=>{t.negate?this.negativeOptions.set(t.attributeName(),t):this.positiveOptions.set(t.attributeName(),t)}),this.negativeOptions.forEach((t,i)=>{this.positiveOptions.has(i)&&this.dualOptions.add(i)})}valueFromOption(e,t){let i=t.attributeName();if(!this.dualOptions.has(i))return!0;let n=this.negativeOptions.get(i).presetArg,s=n!==void 0?n:!1;return t.negate===(s===e)}};function _1(r){return r.split("-").reduce((e,t)=>e+t[0].toUpperCase()+t.slice(1))}o(_1,"camelcase");function db(r){let e,t,i=/^-[^-]$/,n=/^--[^-]/,s=r.split(/[ |,]+/).concat("guard");if(i.test(s[0])&&(e=s.shift()),n.test(s[0])&&(t=s.shift()),!e&&i.test(s[0])&&(e=s.shift()),!e&&n.test(s[0])&&(e=t,t=s.shift()),s[0].startsWith("-")){let a=s[0],c=`option creation failed due to '${a}' in option flags '${r}'`;throw/^-[^-][^-]/.test(a)?new Error(`${c}
- a short flag is a single dash and a single character
  - either use a single dash and a single character (for a short flag)
  - or use a double dash for a long option (and can have two, like '--ws, --workspace')`):i.test(a)?new Error(`${c}
- too many short flags`):n.test(a)?new Error(`${c}
- too many long flags`):new Error(`${c}
- unrecognised flag format`)}if(e===void 0&&t===void 0)throw new Error(`option creation failed due to no flags found in '${r}'.`);return{shortFlag:e,longFlag:t}}o(db,"splitOptionFlags");Yl.Option=zl;Yl.DualOptions=Kl});var b1=y(v1=>{function pb(r,e){if(Math.abs(r.length-e.length)>3)return Math.max(r.length,e.length);let t=[];for(let i=0;i<=r.length;i++)t[i]=[i];for(let i=0;i<=e.length;i++)t[0][i]=i;for(let i=1;i<=e.length;i++)for(let n=1;n<=r.length;n++){let s=1;r[n-1]===e[i-1]?s=0:s=1,t[n][i]=Math.min(t[n-1][i]+1,t[n][i-1]+1,t[n-1][i-1]+s),n>1&&i>1&&r[n-1]===e[i-2]&&r[n-2]===e[i-1]&&(t[n][i]=Math.min(t[n][i],t[n-2][i-2]+1))}return t[r.length][e.length]}o(pb,"editDistance");function mb(r,e){if(!e||e.length===0)return"";e=Array.from(new Set(e));let t=r.startsWith("--");t&&(r=r.slice(2),e=e.map(a=>a.slice(2)));let i=[],n=3,s=.4;return e.forEach(a=>{if(a.length<=1)return;let c=pb(r,a),u=Math.max(r.length,a.length);(u-c)/u>s&&(c<n?(n=c,i=[a]):c===n&&i.push(a))}),i.sort((a,c)=>a.localeCompare(c)),t&&(i=i.map(a=>`--${a}`)),i.length>1?`
(Did you mean one of ${i.join(", ")}?)`:i.length===1?`
(Did you mean ${i[0]}?)`:""}o(mb,"suggestSimilar");v1.suggestSimilar=mb});var T1=y(tf=>{var gb=require("node:events").EventEmitter,Jl=require("node:child_process"),Ci=require("node:path"),qo=require("node:fs"),Le=require("node:process"),{Argument:yb,humanReadableArgName:_b}=Lo(),{CommanderError:Xl}=ca(),{Help:vb,stripColor:bb}=Hl(),{Option:S1,DualOptions:Sb}=Ql(),{suggestSimilar:w1}=b1(),Zl=class r extends gb{static{o(this,"Command")}constructor(e){super(),this.commands=[],this.options=[],this.parent=null,this._allowUnknownOption=!1,this._allowExcessArguments=!1,this.registeredArguments=[],this._args=this.registeredArguments,this.args=[],this.rawArgs=[],this.processedArgs=[],this._scriptPath=null,this._name=e||"",this._optionValues={},this._optionValueSources={},this._storeOptionsAsProperties=!1,this._actionHandler=null,this._executableHandler=!1,this._executableFile=null,this._executableDir=null,this._defaultCommandName=null,this._exitCallback=null,this._aliases=[],this._combineFlagAndOptionalValue=!0,this._description="",this._summary="",this._argsDescription=void 0,this._enablePositionalOptions=!1,this._passThroughOptions=!1,this._lifeCycleHooks={},this._showHelpAfterError=!1,this._showSuggestionAfterError=!0,this._savedState=null,this._outputConfiguration={writeOut:o(t=>Le.stdout.write(t),"writeOut"),writeErr:o(t=>Le.stderr.write(t),"writeErr"),outputError:o((t,i)=>i(t),"outputError"),getOutHelpWidth:o(()=>Le.stdout.isTTY?Le.stdout.columns:void 0,"getOutHelpWidth"),getErrHelpWidth:o(()=>Le.stderr.isTTY?Le.stderr.columns:void 0,"getErrHelpWidth"),getOutHasColors:o(()=>ef()??(Le.stdout.isTTY&&Le.stdout.hasColors?.()),"getOutHasColors"),getErrHasColors:o(()=>ef()??(Le.stderr.isTTY&&Le.stderr.hasColors?.()),"getErrHasColors"),stripColor:o(t=>bb(t),"stripColor")},this._hidden=!1,this._helpOption=void 0,this._addImplicitHelpCommand=void 0,this._helpCommand=void 0,this._helpConfiguration={},this._helpGroupHeading=void 0,this._defaultCommandGroup=void 0,this._defaultOptionGroup=void 0}copyInheritedSettings(e){return this._outputConfiguration=e._outputConfiguration,this._helpOption=e._helpOption,this._helpCommand=e._helpCommand,this._helpConfiguration=e._helpConfiguration,this._exitCallback=e._exitCallback,this._storeOptionsAsProperties=e._storeOptionsAsProperties,this._combineFlagAndOptionalValue=e._combineFlagAndOptionalValue,this._allowExcessArguments=e._allowExcessArguments,this._enablePositionalOptions=e._enablePositionalOptions,this._showHelpAfterError=e._showHelpAfterError,this._showSuggestionAfterError=e._showSuggestionAfterError,this}_getCommandAndAncestors(){let e=[];for(let t=this;t;t=t.parent)e.push(t);return e}command(e,t,i){let n=t,s=i;typeof n=="object"&&n!==null&&(s=n,n=null),s=s||{};let[,a,c]=e.match(/([^ ]+) *(.*)/),u=this.createCommand(a);return n&&(u.description(n),u._executableHandler=!0),s.isDefault&&(this._defaultCommandName=u._name),u._hidden=!!(s.noHelp||s.hidden),u._executableFile=s.executableFile||null,c&&u.arguments(c),this._registerCommand(u),u.parent=this,u.copyInheritedSettings(this),n?this:u}createCommand(e){return new r(e)}createHelp(){return Object.assign(new vb,this.configureHelp())}configureHelp(e){return e===void 0?this._helpConfiguration:(this._helpConfiguration=e,this)}configureOutput(e){return e===void 0?this._outputConfiguration:(this._outputConfiguration={...this._outputConfiguration,...e},this)}showHelpAfterError(e=!0){return typeof e!="string"&&(e=!!e),this._showHelpAfterError=e,this}showSuggestionAfterError(e=!0){return this._showSuggestionAfterError=!!e,this}addCommand(e,t){if(!e._name)throw new Error(`Command passed to .addCommand() must have a name
- specify the name in Command constructor or using .name()`);return t=t||{},t.isDefault&&(this._defaultCommandName=e._name),(t.noHelp||t.hidden)&&(e._hidden=!0),this._registerCommand(e),e.parent=this,e._checkForBrokenPassThrough(),this}createArgument(e,t){return new yb(e,t)}argument(e,t,i,n){let s=this.createArgument(e,t);return typeof i=="function"?s.default(n).argParser(i):s.default(i),this.addArgument(s),this}arguments(e){return e.trim().split(/ +/).forEach(t=>{this.argument(t)}),this}addArgument(e){let t=this.registeredArguments.slice(-1)[0];if(t?.variadic)throw new Error(`only the last argument can be variadic '${t.name()}'`);if(e.required&&e.defaultValue!==void 0&&e.parseArg===void 0)throw new Error(`a default value for a required argument is never used: '${e.name()}'`);return this.registeredArguments.push(e),this}helpCommand(e,t){if(typeof e=="boolean")return this._addImplicitHelpCommand=e,e&&this._defaultCommandGroup&&this._initCommandGroup(this._getHelpCommand()),this;let i=e??"help [command]",[,n,s]=i.match(/([^ ]+) *(.*)/),a=t??"display help for command",c=this.createCommand(n);return c.helpOption(!1),s&&c.arguments(s),a&&c.description(a),this._addImplicitHelpCommand=!0,this._helpCommand=c,(e||t)&&this._initCommandGroup(c),this}addHelpCommand(e,t){return typeof e!="object"?(this.helpCommand(e,t),this):(this._addImplicitHelpCommand=!0,this._helpCommand=e,this._initCommandGroup(e),this)}_getHelpCommand(){return this._addImplicitHelpCommand??(this.commands.length&&!this._actionHandler&&!this._findCommand("help"))?(this._helpCommand===void 0&&this.helpCommand(void 0,void 0),this._helpCommand):null}hook(e,t){let i=["preSubcommand","preAction","postAction"];if(!i.includes(e))throw new Error(`Unexpected value for event passed to hook : '${e}'.
Expecting one of '${i.join("', '")}'`);return this._lifeCycleHooks[e]?this._lifeCycleHooks[e].push(t):this._lifeCycleHooks[e]=[t],this}exitOverride(e){return e?this._exitCallback=e:this._exitCallback=t=>{if(t.code!=="commander.executeSubCommandAsync")throw t},this}_exit(e,t,i){this._exitCallback&&this._exitCallback(new Xl(e,t,i)),Le.exit(e)}action(e){let t=o(i=>{let n=this.registeredArguments.length,s=i.slice(0,n);return this._storeOptionsAsProperties?s[n]=this:s[n]=this.opts(),s.push(this),e.apply(this,s)},"listener");return this._actionHandler=t,this}createOption(e,t){return new S1(e,t)}_callParseArg(e,t,i,n){try{return e.parseArg(t,i)}catch(s){if(s.code==="commander.invalidArgument"){let a=`${n} ${s.message}`;this.error(a,{exitCode:s.exitCode,code:s.code})}throw s}}_registerOption(e){let t=e.short&&this._findOption(e.short)||e.long&&this._findOption(e.long);if(t){let i=e.long&&this._findOption(e.long)?e.long:e.short;throw new Error(`Cannot add option '${e.flags}'${this._name&&` to command '${this._name}'`} due to conflicting flag '${i}'
-  already used by option '${t.flags}'`)}this._initOptionGroup(e),this.options.push(e)}_registerCommand(e){let t=o(n=>[n.name()].concat(n.aliases()),"knownBy"),i=t(e).find(n=>this._findCommand(n));if(i){let n=t(this._findCommand(i)).join("|"),s=t(e).join("|");throw new Error(`cannot add command '${s}' as already have command '${n}'`)}this._initCommandGroup(e),this.commands.push(e)}addOption(e){this._registerOption(e);let t=e.name(),i=e.attributeName();if(e.negate){let s=e.long.replace(/^--no-/,"--");this._findOption(s)||this.setOptionValueWithSource(i,e.defaultValue===void 0?!0:e.defaultValue,"default")}else e.defaultValue!==void 0&&this.setOptionValueWithSource(i,e.defaultValue,"default");let n=o((s,a,c)=>{s==null&&e.presetArg!==void 0&&(s=e.presetArg);let u=this.getOptionValue(i);s!==null&&e.parseArg?s=this._callParseArg(e,s,u,a):s!==null&&e.variadic&&(s=e._collectValue(s,u)),s==null&&(e.negate?s=!1:e.isBoolean()||e.optional?s=!0:s=""),this.setOptionValueWithSource(i,s,c)},"handleOptionValue");return this.on("option:"+t,s=>{let a=`error: option '${e.flags}' argument '${s}' is invalid.`;n(s,a,"cli")}),e.envVar&&this.on("optionEnv:"+t,s=>{let a=`error: option '${e.flags}' value '${s}' from env '${e.envVar}' is invalid.`;n(s,a,"env")}),this}_optionEx(e,t,i,n,s){if(typeof t=="object"&&t instanceof S1)throw new Error("To add an Option object use addOption() instead of option() or requiredOption()");let a=this.createOption(t,i);if(a.makeOptionMandatory(!!e.mandatory),typeof n=="function")a.default(s).argParser(n);else if(n instanceof RegExp){let c=n;n=o((u,f)=>{let l=c.exec(u);return l?l[0]:f},"fn"),a.default(s).argParser(n)}else a.default(n);return this.addOption(a)}option(e,t,i,n){return this._optionEx({},e,t,i,n)}requiredOption(e,t,i,n){return this._optionEx({mandatory:!0},e,t,i,n)}combineFlagAndOptionalValue(e=!0){return this._combineFlagAndOptionalValue=!!e,this}allowUnknownOption(e=!0){return this._allowUnknownOption=!!e,this}allowExcessArguments(e=!0){return this._allowExcessArguments=!!e,this}enablePositionalOptions(e=!0){return this._enablePositionalOptions=!!e,this}passThroughOptions(e=!0){return this._passThroughOptions=!!e,this._checkForBrokenPassThrough(),this}_checkForBrokenPassThrough(){if(this.parent&&this._passThroughOptions&&!this.parent._enablePositionalOptions)throw new Error(`passThroughOptions cannot be used for '${this._name}' without turning on enablePositionalOptions for parent command(s)`)}storeOptionsAsProperties(e=!0){if(this.options.length)throw new Error("call .storeOptionsAsProperties() before adding options");if(Object.keys(this._optionValues).length)throw new Error("call .storeOptionsAsProperties() before setting option values");return this._storeOptionsAsProperties=!!e,this}getOptionValue(e){return this._storeOptionsAsProperties?this[e]:this._optionValues[e]}setOptionValue(e,t){return this.setOptionValueWithSource(e,t,void 0)}setOptionValueWithSource(e,t,i){return this._storeOptionsAsProperties?this[e]=t:this._optionValues[e]=t,this._optionValueSources[e]=i,this}getOptionValueSource(e){return this._optionValueSources[e]}getOptionValueSourceWithGlobals(e){let t;return this._getCommandAndAncestors().forEach(i=>{i.getOptionValueSource(e)!==void 0&&(t=i.getOptionValueSource(e))}),t}_prepareUserArgs(e,t){if(e!==void 0&&!Array.isArray(e))throw new Error("first parameter to parse must be array or undefined");if(t=t||{},e===void 0&&t.from===void 0){Le.versions?.electron&&(t.from="electron");let n=Le.execArgv??[];(n.includes("-e")||n.includes("--eval")||n.includes("-p")||n.includes("--print"))&&(t.from="eval")}e===void 0&&(e=Le.argv),this.rawArgs=e.slice();let i;switch(t.from){case void 0:case"node":this._scriptPath=e[1],i=e.slice(2);break;case"electron":Le.defaultApp?(this._scriptPath=e[1],i=e.slice(2)):i=e.slice(1);break;case"user":i=e.slice(0);break;case"eval":i=e.slice(1);break;default:throw new Error(`unexpected parse option { from: '${t.from}' }`)}return!this._name&&this._scriptPath&&this.nameFromFilename(this._scriptPath),this._name=this._name||"program",i}parse(e,t){this._prepareForParse();let i=this._prepareUserArgs(e,t);return this._parseCommand([],i),this}async parseAsync(e,t){this._prepareForParse();let i=this._prepareUserArgs(e,t);return await this._parseCommand([],i),this}_prepareForParse(){this._savedState===null?this.saveStateBeforeParse():this.restoreStateBeforeParse()}saveStateBeforeParse(){this._savedState={_name:this._name,_optionValues:{...this._optionValues},_optionValueSources:{...this._optionValueSources}}}restoreStateBeforeParse(){if(this._storeOptionsAsProperties)throw new Error(`Can not call parse again when storeOptionsAsProperties is true.
- either make a new Command for each call to parse, or stop storing options as properties`);this._name=this._savedState._name,this._scriptPath=null,this.rawArgs=[],this._optionValues={...this._savedState._optionValues},this._optionValueSources={...this._savedState._optionValueSources},this.args=[],this.processedArgs=[]}_checkForMissingExecutable(e,t,i){if(qo.existsSync(e))return;let n=t?`searched for local subcommand relative to directory '${t}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory",s=`'${e}' does not exist
 - if '${i}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead
 - if the default executable name is not suitable, use the executableFile option to supply a custom name or path
 - ${n}`;throw new Error(s)}_executeSubCommand(e,t){t=t.slice();let i=!1,n=[".js",".ts",".tsx",".mjs",".cjs"];function s(l,h){let p=Ci.resolve(l,h);if(qo.existsSync(p))return p;if(n.includes(Ci.extname(h)))return;let g=n.find(v=>qo.existsSync(`${p}${v}`));if(g)return`${p}${g}`}o(s,"findFile"),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let a=e._executableFile||`${this._name}-${e._name}`,c=this._executableDir||"";if(this._scriptPath){let l;try{l=qo.realpathSync(this._scriptPath)}catch{l=this._scriptPath}c=Ci.resolve(Ci.dirname(l),c)}if(c){let l=s(c,a);if(!l&&!e._executableFile&&this._scriptPath){let h=Ci.basename(this._scriptPath,Ci.extname(this._scriptPath));h!==this._name&&(l=s(c,`${h}-${e._name}`))}a=l||a}i=n.includes(Ci.extname(a));let u;Le.platform!=="win32"?i?(t.unshift(a),t=E1(Le.execArgv).concat(t),u=Jl.spawn(Le.argv[0],t,{stdio:"inherit"})):u=Jl.spawn(a,t,{stdio:"inherit"}):(this._checkForMissingExecutable(a,c,e._name),t.unshift(a),t=E1(Le.execArgv).concat(t),u=Jl.spawn(Le.execPath,t,{stdio:"inherit"})),u.killed||["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"].forEach(h=>{Le.on(h,()=>{u.killed===!1&&u.exitCode===null&&u.kill(h)})});let f=this._exitCallback;u.on("close",l=>{l=l??1,f?f(new Xl(l,"commander.executeSubCommandAsync","(close)")):Le.exit(l)}),u.on("error",l=>{if(l.code==="ENOENT")this._checkForMissingExecutable(a,c,e._name);else if(l.code==="EACCES")throw new Error(`'${a}' not executable`);if(!f)Le.exit(1);else{let h=new Xl(1,"commander.executeSubCommandAsync","(error)");h.nestedError=l,f(h)}}),this.runningCommand=u}_dispatchSubcommand(e,t,i){let n=this._findCommand(e);n||this.help({error:!0}),n._prepareForParse();let s;return s=this._chainOrCallSubCommandHook(s,n,"preSubcommand"),s=this._chainOrCall(s,()=>{if(n._executableHandler)this._executeSubCommand(n,t.concat(i));else return n._parseCommand(t,i)}),s}_dispatchHelpCommand(e){e||this.help();let t=this._findCommand(e);return t&&!t._executableHandler&&t.help(),this._dispatchSubcommand(e,[],[this._getHelpOption()?.long??this._getHelpOption()?.short??"--help"])}_checkNumberOfArguments(){this.registeredArguments.forEach((e,t)=>{e.required&&this.args[t]==null&&this.missingArgument(e.name())}),!(this.registeredArguments.length>0&&this.registeredArguments[this.registeredArguments.length-1].variadic)&&this.args.length>this.registeredArguments.length&&this._excessArguments(this.args)}_processArguments(){let e=o((i,n,s)=>{let a=n;if(n!==null&&i.parseArg){let c=`error: command-argument value '${n}' is invalid for argument '${i.name()}'.`;a=this._callParseArg(i,n,s,c)}return a},"myParseArg");this._checkNumberOfArguments();let t=[];this.registeredArguments.forEach((i,n)=>{let s=i.defaultValue;i.variadic?n<this.args.length?(s=this.args.slice(n),i.parseArg&&(s=s.reduce((a,c)=>e(i,c,a),i.defaultValue))):s===void 0&&(s=[]):n<this.args.length&&(s=this.args[n],i.parseArg&&(s=e(i,s,i.defaultValue))),t[n]=s}),this.processedArgs=t}_chainOrCall(e,t){return e?.then&&typeof e.then=="function"?e.then(()=>t()):t()}_chainOrCallHooks(e,t){let i=e,n=[];return this._getCommandAndAncestors().reverse().filter(s=>s._lifeCycleHooks[t]!==void 0).forEach(s=>{s._lifeCycleHooks[t].forEach(a=>{n.push({hookedCommand:s,callback:a})})}),t==="postAction"&&n.reverse(),n.forEach(s=>{i=this._chainOrCall(i,()=>s.callback(s.hookedCommand,this))}),i}_chainOrCallSubCommandHook(e,t,i){let n=e;return this._lifeCycleHooks[i]!==void 0&&this._lifeCycleHooks[i].forEach(s=>{n=this._chainOrCall(n,()=>s(this,t))}),n}_parseCommand(e,t){let i=this.parseOptions(t);if(this._parseOptionsEnv(),this._parseOptionsImplied(),e=e.concat(i.operands),t=i.unknown,this.args=e.concat(t),e&&this._findCommand(e[0]))return this._dispatchSubcommand(e[0],e.slice(1),t);if(this._getHelpCommand()&&e[0]===this._getHelpCommand().name())return this._dispatchHelpCommand(e[1]);if(this._defaultCommandName)return this._outputHelpIfRequested(t),this._dispatchSubcommand(this._defaultCommandName,e,t);this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName&&this.help({error:!0}),this._outputHelpIfRequested(i.unknown),this._checkForMissingMandatoryOptions(),this._checkForConflictingOptions();let n=o(()=>{i.unknown.length>0&&this.unknownOption(i.unknown[0])},"checkForUnknownOptions"),s=`command:${this.name()}`;if(this._actionHandler){n(),this._processArguments();let a;return a=this._chainOrCallHooks(a,"preAction"),a=this._chainOrCall(a,()=>this._actionHandler(this.processedArgs)),this.parent&&(a=this._chainOrCall(a,()=>{this.parent.emit(s,e,t)})),a=this._chainOrCallHooks(a,"postAction"),a}if(this.parent?.listenerCount(s))n(),this._processArguments(),this.parent.emit(s,e,t);else if(e.length){if(this._findCommand("*"))return this._dispatchSubcommand("*",e,t);this.listenerCount("command:*")?this.emit("command:*",e,t):this.commands.length?this.unknownCommand():(n(),this._processArguments())}else this.commands.length?(n(),this.help({error:!0})):(n(),this._processArguments())}_findCommand(e){if(e)return this.commands.find(t=>t._name===e||t._aliases.includes(e))}_findOption(e){return this.options.find(t=>t.is(e))}_checkForMissingMandatoryOptions(){this._getCommandAndAncestors().forEach(e=>{e.options.forEach(t=>{t.mandatory&&e.getOptionValue(t.attributeName())===void 0&&e.missingMandatoryOptionValue(t)})})}_checkForConflictingLocalOptions(){let e=this.options.filter(i=>{let n=i.attributeName();return this.getOptionValue(n)===void 0?!1:this.getOptionValueSource(n)!=="default"});e.filter(i=>i.conflictsWith.length>0).forEach(i=>{let n=e.find(s=>i.conflictsWith.includes(s.attributeName()));n&&this._conflictingOption(i,n)})}_checkForConflictingOptions(){this._getCommandAndAncestors().forEach(e=>{e._checkForConflictingLocalOptions()})}parseOptions(e){let t=[],i=[],n=t;function s(l){return l.length>1&&l[0]==="-"}o(s,"maybeOption");let a=o(l=>/^-(\d+|\d*\.\d+)(e[+-]?\d+)?$/.test(l)?!this._getCommandAndAncestors().some(h=>h.options.map(p=>p.short).some(p=>/^-\d$/.test(p))):!1,"negativeNumberArg"),c=null,u=null,f=0;for(;f<e.length||u;){let l=u??e[f++];if(u=null,l==="--"){n===i&&n.push(l),n.push(...e.slice(f));break}if(c&&(!s(l)||a(l))){this.emit(`option:${c.name()}`,l);continue}if(c=null,s(l)){let h=this._findOption(l);if(h){if(h.required){let p=e[f++];p===void 0&&this.optionMissingArgument(h),this.emit(`option:${h.name()}`,p)}else if(h.optional){let p=null;f<e.length&&(!s(e[f])||a(e[f]))&&(p=e[f++]),this.emit(`option:${h.name()}`,p)}else this.emit(`option:${h.name()}`);c=h.variadic?h:null;continue}}if(l.length>2&&l[0]==="-"&&l[1]!=="-"){let h=this._findOption(`-${l[1]}`);if(h){h.required||h.optional&&this._combineFlagAndOptionalValue?this.emit(`option:${h.name()}`,l.slice(2)):(this.emit(`option:${h.name()}`),u=`-${l.slice(2)}`);continue}}if(/^--[^=]+=/.test(l)){let h=l.indexOf("="),p=this._findOption(l.slice(0,h));if(p&&(p.required||p.optional)){this.emit(`option:${p.name()}`,l.slice(h+1));continue}}if(n===t&&s(l)&&!(this.commands.length===0&&a(l))&&(n=i),(this._enablePositionalOptions||this._passThroughOptions)&&t.length===0&&i.length===0){if(this._findCommand(l)){t.push(l),i.push(...e.slice(f));break}else if(this._getHelpCommand()&&l===this._getHelpCommand().name()){t.push(l,...e.slice(f));break}else if(this._defaultCommandName){i.push(l,...e.slice(f));break}}if(this._passThroughOptions){n.push(l,...e.slice(f));break}n.push(l)}return{operands:t,unknown:i}}opts(){if(this._storeOptionsAsProperties){let e={},t=this.options.length;for(let i=0;i<t;i++){let n=this.options[i].attributeName();e[n]=n===this._versionOptionName?this._version:this[n]}return e}return this._optionValues}optsWithGlobals(){return this._getCommandAndAncestors().reduce((e,t)=>Object.assign(e,t.opts()),{})}error(e,t){this._outputConfiguration.outputError(`${e}
`,this._outputConfiguration.writeErr),typeof this._showHelpAfterError=="string"?this._outputConfiguration.writeErr(`${this._showHelpAfterError}
`):this._showHelpAfterError&&(this._outputConfiguration.writeErr(`
`),this.outputHelp({error:!0}));let i=t||{},n=i.exitCode||1,s=i.code||"commander.error";this._exit(n,s,e)}_parseOptionsEnv(){this.options.forEach(e=>{if(e.envVar&&e.envVar in Le.env){let t=e.attributeName();(this.getOptionValue(t)===void 0||["default","config","env"].includes(this.getOptionValueSource(t)))&&(e.required||e.optional?this.emit(`optionEnv:${e.name()}`,Le.env[e.envVar]):this.emit(`optionEnv:${e.name()}`))}})}_parseOptionsImplied(){let e=new Sb(this.options),t=o(i=>this.getOptionValue(i)!==void 0&&!["default","implied"].includes(this.getOptionValueSource(i)),"hasCustomOptionValue");this.options.filter(i=>i.implied!==void 0&&t(i.attributeName())&&e.valueFromOption(this.getOptionValue(i.attributeName()),i)).forEach(i=>{Object.keys(i.implied).filter(n=>!t(n)).forEach(n=>{this.setOptionValueWithSource(n,i.implied[n],"implied")})})}missingArgument(e){let t=`error: missing required argument '${e}'`;this.error(t,{code:"commander.missingArgument"})}optionMissingArgument(e){let t=`error: option '${e.flags}' argument missing`;this.error(t,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(e){let t=`error: required option '${e.flags}' not specified`;this.error(t,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(e,t){let i=o(a=>{let c=a.attributeName(),u=this.getOptionValue(c),f=this.options.find(h=>h.negate&&c===h.attributeName()),l=this.options.find(h=>!h.negate&&c===h.attributeName());return f&&(f.presetArg===void 0&&u===!1||f.presetArg!==void 0&&u===f.presetArg)?f:l||a},"findBestOptionFromValue"),n=o(a=>{let c=i(a),u=c.attributeName();return this.getOptionValueSource(u)==="env"?`environment variable '${c.envVar}'`:`option '${c.flags}'`},"getErrorMessage"),s=`error: ${n(e)} cannot be used with ${n(t)}`;this.error(s,{code:"commander.conflictingOption"})}unknownOption(e){if(this._allowUnknownOption)return;let t="";if(e.startsWith("--")&&this._showSuggestionAfterError){let n=[],s=this;do{let a=s.createHelp().visibleOptions(s).filter(c=>c.long).map(c=>c.long);n=n.concat(a),s=s.parent}while(s&&!s._enablePositionalOptions);t=w1(e,n)}let i=`error: unknown option '${e}'${t}`;this.error(i,{code:"commander.unknownOption"})}_excessArguments(e){if(this._allowExcessArguments)return;let t=this.registeredArguments.length,i=t===1?"":"s",s=`error: too many arguments${this.parent?` for '${this.name()}'`:""}. Expected ${t} argument${i} but got ${e.length}.`;this.error(s,{code:"commander.excessArguments"})}unknownCommand(){let e=this.args[0],t="";if(this._showSuggestionAfterError){let n=[];this.createHelp().visibleCommands(this).forEach(s=>{n.push(s.name()),s.alias()&&n.push(s.alias())}),t=w1(e,n)}let i=`error: unknown command '${e}'${t}`;this.error(i,{code:"commander.unknownCommand"})}version(e,t,i){if(e===void 0)return this._version;this._version=e,t=t||"-V, --version",i=i||"output the version number";let n=this.createOption(t,i);return this._versionOptionName=n.attributeName(),this._registerOption(n),this.on("option:"+n.name(),()=>{this._outputConfiguration.writeOut(`${e}
`),this._exit(0,"commander.version",e)}),this}description(e,t){return e===void 0&&t===void 0?this._description:(this._description=e,t&&(this._argsDescription=t),this)}summary(e){return e===void 0?this._summary:(this._summary=e,this)}alias(e){if(e===void 0)return this._aliases[0];let t=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler&&(t=this.commands[this.commands.length-1]),e===t._name)throw new Error("Command alias can't be the same as its name");let i=this.parent?._findCommand(e);if(i){let n=[i.name()].concat(i.aliases()).join("|");throw new Error(`cannot add alias '${e}' to command '${this.name()}' as already have command '${n}'`)}return t._aliases.push(e),this}aliases(e){return e===void 0?this._aliases:(e.forEach(t=>this.alias(t)),this)}usage(e){if(e===void 0){if(this._usage)return this._usage;let t=this.registeredArguments.map(i=>_b(i));return[].concat(this.options.length||this._helpOption!==null?"[options]":[],this.commands.length?"[command]":[],this.registeredArguments.length?t:[]).join(" ")}return this._usage=e,this}name(e){return e===void 0?this._name:(this._name=e,this)}helpGroup(e){return e===void 0?this._helpGroupHeading??"":(this._helpGroupHeading=e,this)}commandsGroup(e){return e===void 0?this._defaultCommandGroup??"":(this._defaultCommandGroup=e,this)}optionsGroup(e){return e===void 0?this._defaultOptionGroup??"":(this._defaultOptionGroup=e,this)}_initOptionGroup(e){this._defaultOptionGroup&&!e.helpGroupHeading&&e.helpGroup(this._defaultOptionGroup)}_initCommandGroup(e){this._defaultCommandGroup&&!e.helpGroup()&&e.helpGroup(this._defaultCommandGroup)}nameFromFilename(e){return this._name=Ci.basename(e,Ci.extname(e)),this}executableDir(e){return e===void 0?this._executableDir:(this._executableDir=e,this)}helpInformation(e){let t=this.createHelp(),i=this._getOutputContext(e);t.prepareContext({error:i.error,helpWidth:i.helpWidth,outputHasColors:i.hasColors});let n=t.formatHelp(this,t);return i.hasColors?n:this._outputConfiguration.stripColor(n)}_getOutputContext(e){e=e||{};let t=!!e.error,i,n,s;return t?(i=o(c=>this._outputConfiguration.writeErr(c),"baseWrite"),n=this._outputConfiguration.getErrHasColors(),s=this._outputConfiguration.getErrHelpWidth()):(i=o(c=>this._outputConfiguration.writeOut(c),"baseWrite"),n=this._outputConfiguration.getOutHasColors(),s=this._outputConfiguration.getOutHelpWidth()),{error:t,write:o(c=>(n||(c=this._outputConfiguration.stripColor(c)),i(c)),"write"),hasColors:n,helpWidth:s}}outputHelp(e){let t;typeof e=="function"&&(t=e,e=void 0);let i=this._getOutputContext(e),n={error:i.error,write:i.write,command:this};this._getCommandAndAncestors().reverse().forEach(a=>a.emit("beforeAllHelp",n)),this.emit("beforeHelp",n);let s=this.helpInformation({error:i.error});if(t&&(s=t(s),typeof s!="string"&&!Buffer.isBuffer(s)))throw new Error("outputHelp callback must return a string or a Buffer");i.write(s),this._getHelpOption()?.long&&this.emit(this._getHelpOption().long),this.emit("afterHelp",n),this._getCommandAndAncestors().forEach(a=>a.emit("afterAllHelp",n))}helpOption(e,t){return typeof e=="boolean"?(e?(this._helpOption===null&&(this._helpOption=void 0),this._defaultOptionGroup&&this._initOptionGroup(this._getHelpOption())):this._helpOption=null,this):(this._helpOption=this.createOption(e??"-h, --help",t??"display help for command"),(e||t)&&this._initOptionGroup(this._helpOption),this)}_getHelpOption(){return this._helpOption===void 0&&this.helpOption(void 0,void 0),this._helpOption}addHelpOption(e){return this._helpOption=e,this._initOptionGroup(e),this}help(e){this.outputHelp(e);let t=Number(Le.exitCode??0);t===0&&e&&typeof e!="function"&&e.error&&(t=1),this._exit(t,"commander.help","(outputHelp)")}addHelpText(e,t){let i=["beforeAll","before","after","afterAll"];if(!i.includes(e))throw new Error(`Unexpected value for position to addHelpText.
Expecting one of '${i.join("', '")}'`);let n=`${e}Help`;return this.on(n,s=>{let a;typeof t=="function"?a=t({error:s.error,command:s.command}):a=t,a&&s.write(`${a}
`)}),this}_outputHelpIfRequested(e){let t=this._getHelpOption();t&&e.find(n=>t.is(n))&&(this.outputHelp(),this._exit(0,"commander.helpDisplayed","(outputHelp)"))}};function E1(r){return r.map(e=>{if(!e.startsWith("--inspect"))return e;let t,i="127.0.0.1",n="9229",s;return(s=e.match(/^(--inspect(-brk)?)$/))!==null?t=s[1]:(s=e.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null?(t=s[1],/^\d+$/.test(s[3])?n=s[3]:i=s[3]):(s=e.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null&&(t=s[1],i=s[3],n=s[4]),t&&n!=="0"?`${t}=${i}:${parseInt(n)+1}`:e})}o(E1,"incrementNodeInspectorPort");function ef(){if(Le.env.NO_COLOR||Le.env.FORCE_COLOR==="0"||Le.env.FORCE_COLOR==="false")return!1;if(Le.env.FORCE_COLOR||Le.env.CLICOLOR_FORCE!==void 0)return!0}o(ef,"useColor");tf.Command=Zl;tf.useColor=ef});var C1=y(_r=>{var{Argument:x1}=Lo(),{Command:rf}=T1(),{CommanderError:wb,InvalidArgumentError:A1}=ca(),{Help:Eb}=Hl(),{Option:O1}=Ql();_r.program=new rf;_r.createCommand=r=>new rf(r);_r.createOption=(r,e)=>new O1(r,e);_r.createArgument=(r,e)=>new x1(r,e);_r.Command=rf;_r.Option=O1;_r.Argument=x1;_r.Help=Eb;_r.CommanderError=wb;_r.InvalidArgumentError=A1;_r.InvalidOptionArgumentError=A1});var nf=y(Vo=>{"use strict";Object.defineProperty(Vo,"__esModule",{value:!0});Vo.AssetClass=void 0;var P1;(function(r){r.AREA="ems__Area",r.TASK="ems__Task",r.PROJECT="ems__Project",r.MEETING="ems__Meeting",r.INITIATIVE="ems__Initiative",r.TASK_PROTOTYPE="ems__TaskPrototype",r.MEETING_PROTOTYPE="ems__MeetingPrototype",r.EVENT_PROTOTYPE="exo__EventPrototype",r.EVENT="exo__Event",r.DAILY_NOTE="pn__DailyNote",r.CONCEPT="ims__Concept",r.SESSION_START_EVENT="ems__SessionStartEvent",r.SESSION_END_EVENT="ems__SessionEndEvent"})(P1||(Vo.AssetClass=P1={}))});var sf=y(Uo=>{"use strict";Object.defineProperty(Uo,"__esModule",{value:!0});Uo.EffortStatus=void 0;var D1;(function(r){r.DRAFT="ems__EffortStatusDraft",r.BACKLOG="ems__EffortStatusBacklog",r.ANALYSIS="ems__EffortStatusAnalysis",r.TODO="ems__EffortStatusToDo",r.DOING="ems__EffortStatusDoing",r.DONE="ems__EffortStatusDone",r.TRASHED="ems__EffortStatusTrashed"})(D1||(Uo.EffortStatus=D1={}))});var I1=y(R1=>{"use strict";Object.defineProperty(R1,"__esModule",{value:!0})});var k1=y(N1=>{"use strict";Object.defineProperty(N1,"__esModule",{value:!0})});var M1=y(j1=>{"use strict";Object.defineProperty(j1,"__esModule",{value:!0})});var q1=y(L1=>{"use strict";Object.defineProperty(L1,"__esModule",{value:!0})});var xt=y(Bo=>{"use strict";Object.defineProperty(Bo,"__esModule",{value:!0});Bo.IRI=void 0;var af=class r{static{o(this,"IRI")}constructor(e){let t=e.trim();if(t.length===0)throw new Error("IRI cannot be empty");if(!r.isValidIRI(t))throw new Error("Invalid IRI format");this._value=t}get value(){return this._value}equals(e){return this._value===e._value}toString(){return this._value}static isValidIRI(e){if(!e||e.trim().length===0||/\s/.test(e)||!/^[a-z][a-z0-9+.-]*:/i.test(e))return!1;let i=["http","https","ftp","ftps","file","mailto","tel","data","ws","wss","urn","obsidian"],n=e.match(/^([a-z][a-z0-9+.-]*?):/i);if(n){let s=n[1].toLowerCase();if(!i.includes(s))return!1}try{return new URL(e),!0}catch{return/^urn:[a-z0-9][a-z0-9-]{0,31}:[^\s]+$/i.test(e)}}};Bo.IRI=af});var Gt=y($o=>{"use strict";Object.defineProperty($o,"__esModule",{value:!0});$o.Literal=void 0;var of=class{static{o(this,"Literal")}constructor(e,t,i){if(e.length===0)throw new Error("Literal value cannot be empty");if(t&&i)throw new Error("Literal cannot have both datatype and language tag");this._value=e,this._datatype=t,this._language=i?i.toLowerCase():void 0}get value(){return this._value}get datatype(){return this._datatype}get language(){return this._language}equals(e){if(this._value!==e._value)return!1;if(this._datatype&&e._datatype){if(!this._datatype.equals(e._datatype))return!1}else if(this._datatype||e._datatype)return!1;return this._language===e._language}toString(){let e=`"${this._value}"`;return this._datatype?e+=`^^<${this._datatype.value}>`:this._language&&(e+=`@${this._language}`),e}};$o.Literal=of});var oi=y(Wo=>{"use strict";Object.defineProperty(Wo,"__esModule",{value:!0});Wo.BlankNode=void 0;var Go=class r{static{o(this,"BlankNode")}constructor(e){let t=e.trim();if(t.length===0)throw new Error("BlankNode id cannot be empty");this._id=t}get id(){return this._id}equals(e){return this._id===e._id}toString(){return`_:${this._id}`}static generateId(){return`b${++r.counter}`}static create(){return new r(r.generateId())}};Wo.BlankNode=Go;Go.counter=0});var Fi=y(Ho=>{"use strict";Object.defineProperty(Ho,"__esModule",{value:!0});Ho.Namespace=void 0;var V1=xt(),Wt=class{static{o(this,"Namespace")}constructor(e,t){if(e.trim().length===0)throw new Error("Namespace prefix cannot be empty");this._prefix=e,this._iri=new V1.IRI(t)}get prefix(){return this._prefix}get iri(){return this._iri}term(e){return new V1.IRI(`${this._iri.value}${e}`)}expand(e){let t=e.split(":");if(t.length!==2)return null;let[i,n]=t;return i!==this._prefix?null:this.term(n)}};Ho.Namespace=Wt;Wt.RDF=new Wt("rdf","http://www.w3.org/1999/02/22-rdf-syntax-ns#");Wt.RDFS=new Wt("rdfs","http://www.w3.org/2000/01/rdf-schema#");Wt.OWL=new Wt("owl","http://www.w3.org/2002/07/owl#");Wt.XSD=new Wt("xsd","http://www.w3.org/2001/XMLSchema#");Wt.EXO=new Wt("exo","https://exocortex.my/ontology/exo#");Wt.EMS=new Wt("ems","https://exocortex.my/ontology/ems#")});var An=y(zo=>{"use strict";Object.defineProperty(zo,"__esModule",{value:!0});zo.Triple=void 0;var cf=xt(),uf=Gt(),lf=oi(),ff=class{static{o(this,"Triple")}constructor(e,t,i){this._subject=e,this._predicate=t,this._object=i}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}equals(e){return!(!this.equalsNode(this._subject,e._subject)||!this._predicate.equals(e._predicate)||!this.equalsNode(this._object,e._object))}equalsNode(e,t){return e instanceof cf.IRI&&t instanceof cf.IRI||e instanceof lf.BlankNode&&t instanceof lf.BlankNode||e instanceof uf.Literal&&t instanceof uf.Literal?e.equals(t):!1}toString(){let e=this.nodeToString(this._subject),t=`<${this._predicate.value}>`,i=this.nodeToString(this._object);return`${e} ${t} ${i} .`}nodeToString(e){return e instanceof cf.IRI?`<${e.value}>`:e instanceof lf.BlankNode||e instanceof uf.Literal?e.toString():""}};zo.Triple=ff});var U1=y(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.Triple=vr.Namespace=vr.BlankNode=vr.Literal=vr.IRI=void 0;var Tb=xt();Object.defineProperty(vr,"IRI",{enumerable:!0,get:o(function(){return Tb.IRI},"get")});var xb=Gt();Object.defineProperty(vr,"Literal",{enumerable:!0,get:o(function(){return xb.Literal},"get")});var Ab=oi();Object.defineProperty(vr,"BlankNode",{enumerable:!0,get:o(function(){return Ab.BlankNode},"get")});var Ob=Fi();Object.defineProperty(vr,"Namespace",{enumerable:!0,get:o(function(){return Ob.Namespace},"get")});var Cb=An();Object.defineProperty(vr,"Triple",{enumerable:!0,get:o(function(){return Cb.Triple},"get")})});var On=y(Yo=>{"use strict";Object.defineProperty(Yo,"__esModule",{value:!0});Yo.WikiLinkHelpers=void 0;var Ko=class{static{o(this,"WikiLinkHelpers")}static normalize(e){return e?e.replace(this.WIKI_LINK_PATTERN,"").trim():""}static normalizeArray(e){return e?(Array.isArray(e)?e:[e]).map(i=>this.normalize(i)).filter(i=>i.length>0):[]}static equals(e,t){return this.normalize(e)===this.normalize(t)}static includes(e,t){let i=this.normalizeArray(e),n=this.normalize(t);return i.includes(n)}};Yo.WikiLinkHelpers=Ko;Ko.WIKI_LINK_PATTERN=/\[\[|\]\]/g});var Nt=y(ls=>{"use strict";Object.defineProperty(ls,"__esModule",{value:!0});ls.EffortStatus=ls.AssetClass=void 0;var Fb=nf();Object.defineProperty(ls,"AssetClass",{enumerable:!0,get:o(function(){return Fb.AssetClass},"get")});var Pb=sf();Object.defineProperty(ls,"EffortStatus",{enumerable:!0,get:o(function(){return Pb.EffortStatus},"get")})});var Cn=y(tr=>{"use strict";Object.defineProperty(tr,"__esModule",{value:!0});tr.hasClass=fs;tr.isAreaOrProject=Db;tr.isEffort=Rb;tr.hasStatus=Ib;tr.isAssetArchived=Nb;tr.hasEmptyProperties=kb;tr.needsFolderRepair=jb;tr.getTodayDateString=hf;tr.isPlannedForToday=Mb;tr.hasPlannedStartTimestamp=Lb;tr.extractDailyNoteDate=qb;tr.isCurrentDateGteDay=Vb;var B1=On(),ua=Nt();function fs(r,e){return r?(Array.isArray(r)?r:[r]).some(i=>B1.WikiLinkHelpers.normalize(i)===e):!1}o(fs,"hasClass");function Db(r){return fs(r,ua.AssetClass.AREA)||fs(r,ua.AssetClass.PROJECT)}o(Db,"isAreaOrProject");function Rb(r){return fs(r,ua.AssetClass.TASK)||fs(r,ua.AssetClass.PROJECT)||fs(r,ua.AssetClass.MEETING)}o(Rb,"isEffort");function Ib(r,e){if(!r)return!1;let t=Array.isArray(r)?r[0]:r;return t?B1.WikiLinkHelpers.normalize(t)===e:!1}o(Ib,"hasStatus");function Nb(r){if(r===!0||r===1)return!0;if(typeof r=="string"){let e=r.toLowerCase();return e==="true"||e==="yes"}return!1}o(Nb,"isAssetArchived");function kb(r){return!r||Object.keys(r).length===0?!1:Object.values(r).some(e=>!!(e==null||typeof e=="string"&&e.trim()===""||Array.isArray(e)&&e.length===0||typeof e=="object"&&!Array.isArray(e)&&Object.keys(e).length===0))}o(kb,"hasEmptyProperties");function jb(r,e){if(!e)return!1;let t=r.replace(/\/$/,""),i=e.replace(/\/$/,"");return t!==i}o(jb,"needsFolderRepair");function hf(){let r=new Date,e=r.getFullYear(),t=String(r.getMonth()+1).padStart(2,"0"),i=String(r.getDate()).padStart(2,"0");return`${e}-${t}-${i}`}o(hf,"getTodayDateString");function Mb(r){let e=r.ems__Effort_plannedStartTimestamp;if(!e)return!1;let t=hf();return typeof e=="string"?e.split("T")[0]===t:Array.isArray(e)&&e.length>0?String(e[0]).split("T")[0]===t:!1}o(Mb,"isPlannedForToday");function Lb(r){let e=r.ems__Effort_plannedStartTimestamp;return e?typeof e=="string"?e.trim().length>0:Array.isArray(e)&&e.length>0?String(e[0]).trim().length>0:!1:!1}o(Lb,"hasPlannedStartTimestamp");function qb(r){let e=r.pn__DailyNote_day;if(!e)return null;if(typeof e=="string"){let t=e.match(/\[\[(.+?)\]\]/);return t?t[1]:e}if(Array.isArray(e)&&e.length>0){let t=String(e[0]),i=t.match(/\[\[(.+?)\]\]/);return i?i[1]:t}return null}o(qb,"extractDailyNoteDate");function Vb(r){return hf()>=r}o(Vb,"isCurrentDateGteDay")});var G1=y(la=>{"use strict";Object.defineProperty(la,"__esModule",{value:!0});la.canCreateTask=Ub;la.canCreateRelatedTask=Bb;la.canConvertTaskToProject=$b;var Qo=Cn(),$1=Nt();function Ub(r){return(0,Qo.isAreaOrProject)(r.instanceClass)}o(Ub,"canCreateTask");function Bb(r){return!(!(0,Qo.hasClass)(r.instanceClass,$1.AssetClass.TASK)||(0,Qo.isAssetArchived)(r.isArchived))}o(Bb,"canCreateRelatedTask");function $b(r){return(0,Qo.hasClass)(r.instanceClass,$1.AssetClass.TASK)}o($b,"canConvertTaskToProject")});var W1=y(hs=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.canCreateProject=Gb;hs.canMoveToAnalysis=Wb;hs.canMoveToToDo=Hb;hs.canConvertProjectToTask=zb;var Ki=Cn(),Yi=Nt();function Gb(r){return(0,Ki.hasClass)(r.instanceClass,Yi.AssetClass.AREA)||(0,Ki.hasClass)(r.instanceClass,Yi.AssetClass.INITIATIVE)||(0,Ki.hasClass)(r.instanceClass,Yi.AssetClass.PROJECT)}o(Gb,"canCreateProject");function Wb(r){return(0,Ki.hasClass)(r.instanceClass,Yi.AssetClass.PROJECT)?(0,Ki.hasStatus)(r.currentStatus,Yi.EffortStatus.BACKLOG):!1}o(Wb,"canMoveToAnalysis");function Hb(r){return(0,Ki.hasClass)(r.instanceClass,Yi.AssetClass.PROJECT)?(0,Ki.hasStatus)(r.currentStatus,Yi.EffortStatus.ANALYSIS):!1}o(Hb,"canMoveToToDo");function zb(r){return(0,Ki.hasClass)(r.instanceClass,Yi.AssetClass.PROJECT)}o(zb,"canConvertProjectToTask")});var K1=y(Jo=>{"use strict";Object.defineProperty(Jo,"__esModule",{value:!0});Jo.canCreateChildArea=Kb;Jo.canSetActiveFocus=Yb;var H1=Cn(),z1=Nt();function Kb(r){return(0,H1.hasClass)(r.instanceClass,z1.AssetClass.AREA)}o(Kb,"canCreateChildArea");function Yb(r){return(0,H1.hasClass)(r.instanceClass,z1.AssetClass.AREA)}o(Yb,"canSetActiveFocus")});var Q1=y(rr=>{"use strict";Object.defineProperty(rr,"__esModule",{value:!0});rr.canPlanOnToday=Qb;rr.canPlanForEvening=Jb;rr.canShiftDayBackward=Xb;rr.canShiftDayForward=Zb;rr.canSetDraftStatus=eS;rr.canMoveToBacklog=tS;rr.canStartEffort=rS;rr.canMarkDone=iS;rr.canTrashEffort=nS;rr.canVoteOnEffort=sS;rr.canRollbackStatus=aS;rr.canArchiveTask=oS;var Y1=On(),He=Cn(),ur=Nt();function Qb(r){return!(!(0,He.isEffort)(r.instanceClass)||(0,He.isPlannedForToday)(r.metadata))}o(Qb,"canPlanOnToday");function Jb(r){return!(0,He.hasClass)(r.instanceClass,ur.AssetClass.TASK)&&!(0,He.hasClass)(r.instanceClass,ur.AssetClass.MEETING)?!1:(0,He.hasStatus)(r.currentStatus,ur.EffortStatus.BACKLOG)}o(Jb,"canPlanForEvening");function Xb(r){return(0,He.isEffort)(r.instanceClass)?(0,He.hasPlannedStartTimestamp)(r.metadata):!1}o(Xb,"canShiftDayBackward");function Zb(r){return(0,He.isEffort)(r.instanceClass)?(0,He.hasPlannedStartTimestamp)(r.metadata):!1}o(Zb,"canShiftDayForward");function eS(r){return(0,He.isEffort)(r.instanceClass)?!r.currentStatus:!1}o(eS,"canSetDraftStatus");function tS(r){return(0,He.isEffort)(r.instanceClass)?(0,He.hasStatus)(r.currentStatus,ur.EffortStatus.DRAFT):!1}o(tS,"canMoveToBacklog");function rS(r){return(0,He.isEffort)(r.instanceClass)?(0,He.hasClass)(r.instanceClass,ur.AssetClass.TASK)||(0,He.hasClass)(r.instanceClass,ur.AssetClass.MEETING)?(0,He.hasStatus)(r.currentStatus,ur.EffortStatus.BACKLOG):(0,He.hasClass)(r.instanceClass,ur.AssetClass.PROJECT)?(0,He.hasStatus)(r.currentStatus,ur.EffortStatus.TODO):!1:!1}o(rS,"canStartEffort");function iS(r){return(0,He.isEffort)(r.instanceClass)?(0,He.hasStatus)(r.currentStatus,ur.EffortStatus.DOING):!1}o(iS,"canMarkDone");function nS(r){return(0,He.isEffort)(r.instanceClass)?r.currentStatus?!(Array.isArray(r.currentStatus)?r.currentStatus:[r.currentStatus]).some(i=>{let n=Y1.WikiLinkHelpers.normalize(i);return n===ur.EffortStatus.TRASHED||n===ur.EffortStatus.DONE}):!0:!1}o(nS,"canTrashEffort");function sS(r){return!(!(0,He.isEffort)(r.instanceClass)||(0,He.isAssetArchived)(r.isArchived))}o(sS,"canVoteOnEffort");function aS(r){if(!(0,He.isEffort)(r.instanceClass)||(0,He.isAssetArchived)(r.isArchived)||!r.currentStatus)return!1;let e=Array.isArray(r.currentStatus)?r.currentStatus[0]:r.currentStatus;return!(!e||Y1.WikiLinkHelpers.normalize(e)===ur.EffortStatus.TRASHED)}o(aS,"canRollbackStatus");function oS(r){return!(0,He.isAssetArchived)(r.isArchived)}o(oS,"canArchiveTask")});var J1=y(Or=>{"use strict";Object.defineProperty(Or,"__esModule",{value:!0});Or.canCreateEvent=cS;Or.canCreateInstance=uS;Or.canCleanProperties=lS;Or.canRepairFolder=fS;Or.canRenameToUid=hS;Or.canCopyLabelToAliases=dS;Or.canCreateNarrowerConcept=pS;Or.canCreateSubclass=mS;Or.canCreateTaskForDailyNote=gS;var br=Cn(),ds=Nt();function cS(r){return(0,br.isAreaOrProject)(r.instanceClass)}o(cS,"canCreateEvent");function uS(r){return(0,br.hasClass)(r.instanceClass,ds.AssetClass.TASK_PROTOTYPE)||(0,br.hasClass)(r.instanceClass,ds.AssetClass.MEETING_PROTOTYPE)||(0,br.hasClass)(r.instanceClass,ds.AssetClass.EVENT_PROTOTYPE)}o(uS,"canCreateInstance");function lS(r){return(0,br.hasEmptyProperties)(r.metadata)}o(lS,"canCleanProperties");function fS(r){return(0,br.needsFolderRepair)(r.currentFolder,r.expectedFolder)}o(fS,"canRepairFolder");function hS(r,e){let t=r.metadata.exo__Asset_uid;return!t||(0,br.hasClass)(r.instanceClass,ds.AssetClass.CONCEPT)?!1:e!==t}o(hS,"canRenameToUid");function dS(r){let e=r.metadata.exo__Asset_label;if(!e||typeof e!="string"||e.trim()==="")return!1;let t=e.trim(),i=r.metadata.aliases;return!i||!Array.isArray(i)||i.length===0?!0:!i.some(n=>typeof n!="string"?!1:n.trim()===t)}o(dS,"canCopyLabelToAliases");function pS(r){return(0,br.hasClass)(r.instanceClass,ds.AssetClass.CONCEPT)}o(pS,"canCreateNarrowerConcept");function mS(r){return(0,br.hasClass)(r.instanceClass,"exo__Class")}o(mS,"canCreateSubclass");function gS(r){if(!(0,br.hasClass)(r.instanceClass,ds.AssetClass.DAILY_NOTE)||r.isArchived)return!1;let e=(0,br.extractDailyNoteDate)(r.metadata);return e?(0,br.isCurrentDateGteDay)(e):!1}o(gS,"canCreateTaskForDailyNote")});var Z1=y(R=>{"use strict";Object.defineProperty(R,"__esModule",{value:!0});R.canCreateTaskForDailyNote=R.canCreateSubclass=R.canCreateNarrowerConcept=R.canCopyLabelToAliases=R.canRenameToUid=R.canRepairFolder=R.canCleanProperties=R.canCreateInstance=R.canCreateEvent=R.canArchiveTask=R.canRollbackStatus=R.canVoteOnEffort=R.canTrashEffort=R.canMarkDone=R.canStartEffort=R.canMoveToBacklog=R.canSetDraftStatus=R.canShiftDayForward=R.canShiftDayBackward=R.canPlanForEvening=R.canPlanOnToday=R.canSetActiveFocus=R.canCreateChildArea=R.canConvertProjectToTask=R.canMoveToToDo=R.canMoveToAnalysis=R.canCreateProject=R.canConvertTaskToProject=R.canCreateRelatedTask=R.canCreateTask=R.isCurrentDateGteDay=R.extractDailyNoteDate=R.hasPlannedStartTimestamp=R.isPlannedForToday=R.getTodayDateString=R.needsFolderRepair=R.hasEmptyProperties=R.isAssetArchived=R.hasStatus=R.isEffort=R.isAreaOrProject=R.hasClass=void 0;var Sr=Cn();Object.defineProperty(R,"hasClass",{enumerable:!0,get:o(function(){return Sr.hasClass},"get")});Object.defineProperty(R,"isAreaOrProject",{enumerable:!0,get:o(function(){return Sr.isAreaOrProject},"get")});Object.defineProperty(R,"isEffort",{enumerable:!0,get:o(function(){return Sr.isEffort},"get")});Object.defineProperty(R,"hasStatus",{enumerable:!0,get:o(function(){return Sr.hasStatus},"get")});Object.defineProperty(R,"isAssetArchived",{enumerable:!0,get:o(function(){return Sr.isAssetArchived},"get")});Object.defineProperty(R,"hasEmptyProperties",{enumerable:!0,get:o(function(){return Sr.hasEmptyProperties},"get")});Object.defineProperty(R,"needsFolderRepair",{enumerable:!0,get:o(function(){return Sr.needsFolderRepair},"get")});Object.defineProperty(R,"getTodayDateString",{enumerable:!0,get:o(function(){return Sr.getTodayDateString},"get")});Object.defineProperty(R,"isPlannedForToday",{enumerable:!0,get:o(function(){return Sr.isPlannedForToday},"get")});Object.defineProperty(R,"hasPlannedStartTimestamp",{enumerable:!0,get:o(function(){return Sr.hasPlannedStartTimestamp},"get")});Object.defineProperty(R,"extractDailyNoteDate",{enumerable:!0,get:o(function(){return Sr.extractDailyNoteDate},"get")});Object.defineProperty(R,"isCurrentDateGteDay",{enumerable:!0,get:o(function(){return Sr.isCurrentDateGteDay},"get")});var df=G1();Object.defineProperty(R,"canCreateTask",{enumerable:!0,get:o(function(){return df.canCreateTask},"get")});Object.defineProperty(R,"canCreateRelatedTask",{enumerable:!0,get:o(function(){return df.canCreateRelatedTask},"get")});Object.defineProperty(R,"canConvertTaskToProject",{enumerable:!0,get:o(function(){return df.canConvertTaskToProject},"get")});var Xo=W1();Object.defineProperty(R,"canCreateProject",{enumerable:!0,get:o(function(){return Xo.canCreateProject},"get")});Object.defineProperty(R,"canMoveToAnalysis",{enumerable:!0,get:o(function(){return Xo.canMoveToAnalysis},"get")});Object.defineProperty(R,"canMoveToToDo",{enumerable:!0,get:o(function(){return Xo.canMoveToToDo},"get")});Object.defineProperty(R,"canConvertProjectToTask",{enumerable:!0,get:o(function(){return Xo.canConvertProjectToTask},"get")});var X1=K1();Object.defineProperty(R,"canCreateChildArea",{enumerable:!0,get:o(function(){return X1.canCreateChildArea},"get")});Object.defineProperty(R,"canSetActiveFocus",{enumerable:!0,get:o(function(){return X1.canSetActiveFocus},"get")});var wr=Q1();Object.defineProperty(R,"canPlanOnToday",{enumerable:!0,get:o(function(){return wr.canPlanOnToday},"get")});Object.defineProperty(R,"canPlanForEvening",{enumerable:!0,get:o(function(){return wr.canPlanForEvening},"get")});Object.defineProperty(R,"canShiftDayBackward",{enumerable:!0,get:o(function(){return wr.canShiftDayBackward},"get")});Object.defineProperty(R,"canShiftDayForward",{enumerable:!0,get:o(function(){return wr.canShiftDayForward},"get")});Object.defineProperty(R,"canSetDraftStatus",{enumerable:!0,get:o(function(){return wr.canSetDraftStatus},"get")});Object.defineProperty(R,"canMoveToBacklog",{enumerable:!0,get:o(function(){return wr.canMoveToBacklog},"get")});Object.defineProperty(R,"canStartEffort",{enumerable:!0,get:o(function(){return wr.canStartEffort},"get")});Object.defineProperty(R,"canMarkDone",{enumerable:!0,get:o(function(){return wr.canMarkDone},"get")});Object.defineProperty(R,"canTrashEffort",{enumerable:!0,get:o(function(){return wr.canTrashEffort},"get")});Object.defineProperty(R,"canVoteOnEffort",{enumerable:!0,get:o(function(){return wr.canVoteOnEffort},"get")});Object.defineProperty(R,"canRollbackStatus",{enumerable:!0,get:o(function(){return wr.canRollbackStatus},"get")});Object.defineProperty(R,"canArchiveTask",{enumerable:!0,get:o(function(){return wr.canArchiveTask},"get")});var Pi=J1();Object.defineProperty(R,"canCreateEvent",{enumerable:!0,get:o(function(){return Pi.canCreateEvent},"get")});Object.defineProperty(R,"canCreateInstance",{enumerable:!0,get:o(function(){return Pi.canCreateInstance},"get")});Object.defineProperty(R,"canCleanProperties",{enumerable:!0,get:o(function(){return Pi.canCleanProperties},"get")});Object.defineProperty(R,"canRepairFolder",{enumerable:!0,get:o(function(){return Pi.canRepairFolder},"get")});Object.defineProperty(R,"canRenameToUid",{enumerable:!0,get:o(function(){return Pi.canRenameToUid},"get")});Object.defineProperty(R,"canCopyLabelToAliases",{enumerable:!0,get:o(function(){return Pi.canCopyLabelToAliases},"get")});Object.defineProperty(R,"canCreateNarrowerConcept",{enumerable:!0,get:o(function(){return Pi.canCreateNarrowerConcept},"get")});Object.defineProperty(R,"canCreateSubclass",{enumerable:!0,get:o(function(){return Pi.canCreateSubclass},"get")});Object.defineProperty(R,"canCreateTaskForDailyNote",{enumerable:!0,get:o(function(){return Pi.canCreateTaskForDailyNote},"get")})});var e2=y(Fn=>{"use strict";var yS=Fn&&Fn.__createBinding||(Object.create?(function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,i,n)}):(function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]})),_S=Fn&&Fn.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&yS(e,r,t)};Object.defineProperty(Fn,"__esModule",{value:!0});_S(Z1(),Fn)});var Zo={};cb(Zo,{__assign:()=>mf,__asyncDelegator:()=>DS,__asyncGenerator:()=>PS,__asyncValues:()=>RS,__await:()=>fa,__awaiter:()=>TS,__classPrivateFieldGet:()=>jS,__classPrivateFieldSet:()=>MS,__createBinding:()=>AS,__decorate:()=>SS,__exportStar:()=>OS,__extends:()=>vS,__generator:()=>xS,__importDefault:()=>kS,__importStar:()=>NS,__makeTemplateObject:()=>IS,__metadata:()=>ES,__param:()=>wS,__read:()=>t2,__rest:()=>bS,__spread:()=>CS,__spreadArrays:()=>FS,__values:()=>gf});function vS(r,e){pf(r,e);function t(){this.constructor=r}o(t,"__"),r.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}function bS(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]]);return t}function SS(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}function wS(r,e){return function(t,i){e(t,i,r)}}function ES(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)}function TS(r,e,t,i){function n(s){return s instanceof t?s:new t(function(a){a(s)})}return o(n,"adopt"),new(t||(t=Promise))(function(s,a){function c(l){try{f(i.next(l))}catch(h){a(h)}}o(c,"fulfilled");function u(l){try{f(i.throw(l))}catch(h){a(h)}}o(u,"rejected");function f(l){l.done?s(l.value):n(l.value).then(c,u)}o(f,"step"),f((i=i.apply(r,e||[])).next())})}function xS(r,e){var t={label:0,sent:o(function(){if(s[0]&1)throw s[1];return s[1]},"sent"),trys:[],ops:[]},i,n,s,a;return a={next:c(0),throw:c(1),return:c(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function c(f){return function(l){return u([f,l])}}function u(f){if(i)throw new TypeError("Generator is already executing.");for(;t;)try{if(i=1,n&&(s=f[0]&2?n.return:f[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,f[1])).done)return s;switch(n=0,s&&(f=[f[0]&2,s.value]),f[0]){case 0:case 1:s=f;break;case 4:return t.label++,{value:f[1],done:!1};case 5:t.label++,n=f[1],f=[0];continue;case 7:f=t.ops.pop(),t.trys.pop();continue;default:if(s=t.trys,!(s=s.length>0&&s[s.length-1])&&(f[0]===6||f[0]===2)){t=0;continue}if(f[0]===3&&(!s||f[1]>s[0]&&f[1]<s[3])){t.label=f[1];break}if(f[0]===6&&t.label<s[1]){t.label=s[1],s=f;break}if(s&&t.label<s[2]){t.label=s[2],t.ops.push(f);break}s[2]&&t.ops.pop(),t.trys.pop();continue}f=e.call(r,t)}catch(l){f=[6,l],n=0}finally{i=s=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}function AS(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]}function OS(r,e){for(var t in r)t!=="default"&&!e.hasOwnProperty(t)&&(e[t]=r[t])}function gf(r){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&r[e],i=0;if(t)return t.call(r);if(r&&typeof r.length=="number")return{next:o(function(){return r&&i>=r.length&&(r=void 0),{value:r&&r[i++],done:!r}},"next")};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function t2(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var i=t.call(r),n,s=[],a;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)s.push(n.value)}catch(c){a={error:c}}finally{try{n&&!n.done&&(t=i.return)&&t.call(i)}finally{if(a)throw a.error}}return s}function CS(){for(var r=[],e=0;e<arguments.length;e++)r=r.concat(t2(arguments[e]));return r}function FS(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var i=Array(r),n=0,e=0;e<t;e++)for(var s=arguments[e],a=0,c=s.length;a<c;a++,n++)i[n]=s[a];return i}function fa(r){return this instanceof fa?(this.v=r,this):new fa(r)}function PS(r,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(r,e||[]),n,s=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(p){i[p]&&(n[p]=function(g){return new Promise(function(v,S){s.push([p,g,v,S])>1||c(p,g)})})}function c(p,g){try{u(i[p](g))}catch(v){h(s[0][3],v)}}function u(p){p.value instanceof fa?Promise.resolve(p.value.v).then(f,l):h(s[0][2],p)}function f(p){c("next",p)}function l(p){c("throw",p)}function h(p,g){p(g),s.shift(),s.length&&c(s[0][0],s[0][1])}}function DS(r){var e,t;return e={},i("next"),i("throw",function(n){throw n}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(n,s){e[n]=r[n]?function(a){return(t=!t)?{value:fa(r[n](a)),done:n==="return"}:s?s(a):a}:s}}function RS(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=r[Symbol.asyncIterator],t;return e?e.call(r):(r=typeof gf=="function"?gf(r):r[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(s){t[s]=r[s]&&function(a){return new Promise(function(c,u){a=r[s](a),n(c,u,a.done,a.value)})}}function n(s,a,c,u){Promise.resolve(u).then(function(f){s({value:f,done:c})},a)}}function IS(r,e){return Object.defineProperty?Object.defineProperty(r,"raw",{value:e}):r.raw=e,r}function NS(r){if(r&&r.__esModule)return r;var e={};if(r!=null)for(var t in r)Object.hasOwnProperty.call(r,t)&&(e[t]=r[t]);return e.default=r,e}function kS(r){return r&&r.__esModule?r:{default:r}}function jS(r,e){if(!e.has(r))throw new TypeError("attempted to get private field on non-instance");return e.get(r)}function MS(r,e,t){if(!e.has(r))throw new TypeError("attempted to set private field on non-instance");return e.set(r,t),t}var pf,mf,ec=ob(()=>{pf=o(function(r,e){return pf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},pf(r,e)},"extendStatics");o(vS,"__extends");mf=o(function(){return mf=Object.assign||o(function(e){for(var t,i=1,n=arguments.length;i<n;i++){t=arguments[i];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},"__assign"),mf.apply(this,arguments)},"__assign");o(bS,"__rest");o(SS,"__decorate");o(wS,"__param");o(ES,"__metadata");o(TS,"__awaiter");o(xS,"__generator");o(AS,"__createBinding");o(OS,"__exportStar");o(gf,"__values");o(t2,"__read");o(CS,"__spread");o(FS,"__spreadArrays");o(fa,"__await");o(PS,"__asyncGenerator");o(DS,"__asyncDelegator");o(RS,"__asyncValues");o(IS,"__makeTemplateObject");o(NS,"__importStar");o(kS,"__importDefault");o(jS,"__classPrivateFieldGet");o(MS,"__classPrivateFieldSet")});var vf=y(_f=>{"use strict";Object.defineProperty(_f,"__esModule",{value:!0});var yf;(function(r){r[r.Transient=0]="Transient",r[r.Singleton=1]="Singleton",r[r.ResolutionScoped=2]="ResolutionScoped",r[r.ContainerScoped=3]="ContainerScoped"})(yf||(yf={}));_f.default=yf});var r2=y(bf=>{"use strict";Object.defineProperty(bf,"__esModule",{value:!0});var LS=vf();Object.defineProperty(bf,"Lifecycle",{enumerable:!0,get:o(function(){return LS.default},"get")})});var Pn=y(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.defineInjectionTokenMetadata=Cr.getParamInfo=Cr.INJECTION_TOKEN_METADATA_KEY=void 0;Cr.INJECTION_TOKEN_METADATA_KEY="injectionTokens";function qS(r){let e=Reflect.getMetadata("design:paramtypes",r)||[],t=Reflect.getOwnMetadata(Cr.INJECTION_TOKEN_METADATA_KEY,r)||{};return Object.keys(t).forEach(i=>{e[+i]=t[i]}),e}o(qS,"getParamInfo");Cr.getParamInfo=qS;function VS(r,e){return function(t,i,n){let s=Reflect.getOwnMetadata(Cr.INJECTION_TOKEN_METADATA_KEY,t)||{};s[n]=e?{token:r,transform:e.transformToken,transformArgs:e.args||[]}:r,Reflect.defineMetadata(Cr.INJECTION_TOKEN_METADATA_KEY,s,t)}}o(VS,"defineInjectionTokenMetadata");Cr.defineInjectionTokenMetadata=VS});var Sf=y(tc=>{"use strict";Object.defineProperty(tc,"__esModule",{value:!0});tc.isClassProvider=void 0;function US(r){return!!r.useClass}o(US,"isClassProvider");tc.isClassProvider=US});var wf=y(rc=>{"use strict";Object.defineProperty(rc,"__esModule",{value:!0});rc.isFactoryProvider=void 0;function BS(r){return!!r.useFactory}o(BS,"isFactoryProvider");rc.isFactoryProvider=BS});var nc=y(ps=>{"use strict";Object.defineProperty(ps,"__esModule",{value:!0});ps.delay=ps.DelayedConstructor=void 0;var ic=class{static{o(this,"DelayedConstructor")}constructor(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}createProxy(e){let t={},i=!1,n,s=o(()=>(i||(n=e(this.wrap()),i=!0),n),"delayedObject");return new Proxy(t,this.createHandler(s))}createHandler(e){let t={},i=o(n=>{t[n]=(...s)=>{s[0]=e();let a=Reflect[n];return a(...s)}},"install");return this.reflectMethods.forEach(i),t}};ps.DelayedConstructor=ic;function $S(r){if(typeof r>"u")throw new Error("Attempt to `delay` undefined. Constructor must be wrapped in a callback");return new ic(r)}o($S,"delay");ps.delay=$S});var sc=y(ci=>{"use strict";Object.defineProperty(ci,"__esModule",{value:!0});ci.isConstructorToken=ci.isTransformDescriptor=ci.isTokenDescriptor=ci.isNormalToken=void 0;var GS=nc();function WS(r){return typeof r=="string"||typeof r=="symbol"}o(WS,"isNormalToken");ci.isNormalToken=WS;function HS(r){return typeof r=="object"&&"token"in r&&"multiple"in r}o(HS,"isTokenDescriptor");ci.isTokenDescriptor=HS;function zS(r){return typeof r=="object"&&"token"in r&&"transform"in r}o(zS,"isTransformDescriptor");ci.isTransformDescriptor=zS;function KS(r){return typeof r=="function"||r instanceof GS.DelayedConstructor}o(KS,"isConstructorToken");ci.isConstructorToken=KS});var Ef=y(ac=>{"use strict";Object.defineProperty(ac,"__esModule",{value:!0});ac.isTokenProvider=void 0;function YS(r){return!!r.useToken}o(YS,"isTokenProvider");ac.isTokenProvider=YS});var Tf=y(oc=>{"use strict";Object.defineProperty(oc,"__esModule",{value:!0});oc.isValueProvider=void 0;function QS(r){return r.useValue!=null}o(QS,"isValueProvider");oc.isValueProvider=QS});var xf=y(Dn=>{"use strict";Object.defineProperty(Dn,"__esModule",{value:!0});var JS=Sf();Object.defineProperty(Dn,"isClassProvider",{enumerable:!0,get:o(function(){return JS.isClassProvider},"get")});var XS=wf();Object.defineProperty(Dn,"isFactoryProvider",{enumerable:!0,get:o(function(){return XS.isFactoryProvider},"get")});var ZS=sc();Object.defineProperty(Dn,"isNormalToken",{enumerable:!0,get:o(function(){return ZS.isNormalToken},"get")});var ew=Ef();Object.defineProperty(Dn,"isTokenProvider",{enumerable:!0,get:o(function(){return ew.isTokenProvider},"get")});var tw=Tf();Object.defineProperty(Dn,"isValueProvider",{enumerable:!0,get:o(function(){return tw.isValueProvider},"get")})});var i2=y(cc=>{"use strict";Object.defineProperty(cc,"__esModule",{value:!0});cc.isProvider=void 0;var rw=Sf(),iw=Tf(),nw=Ef(),sw=wf();function aw(r){return rw.isClassProvider(r)||iw.isValueProvider(r)||nw.isTokenProvider(r)||sw.isFactoryProvider(r)}o(aw,"isProvider");cc.isProvider=aw});var Cf=y(Of=>{"use strict";Object.defineProperty(Of,"__esModule",{value:!0});var Af=class{static{o(this,"RegistryBase")}constructor(){this._registryMap=new Map}entries(){return this._registryMap.entries()}getAll(e){return this.ensure(e),this._registryMap.get(e)}get(e){this.ensure(e);let t=this._registryMap.get(e);return t[t.length-1]||null}set(e,t){this.ensure(e),this._registryMap.get(e).push(t)}setAll(e,t){this._registryMap.set(e,t)}has(e){return this.ensure(e),this._registryMap.get(e).length>0}clear(){this._registryMap.clear()}ensure(e){this._registryMap.has(e)||this._registryMap.set(e,[])}};Of.default=Af});var n2=y(Pf=>{"use strict";Object.defineProperty(Pf,"__esModule",{value:!0});var ow=Cf(),Ff=class extends ow.default{static{o(this,"Registry")}};Pf.default=Ff});var s2=y(Rf=>{"use strict";Object.defineProperty(Rf,"__esModule",{value:!0});var Df=class{static{o(this,"ResolutionContext")}constructor(){this.scopedResolutions=new Map}};Rf.default=Df});var If=y(uc=>{"use strict";Object.defineProperty(uc,"__esModule",{value:!0});uc.formatErrorCtor=void 0;function cw(r,e){return r===null?`at position #${e}`:`"${r.split(",")[e].trim()}" at position #${e}`}o(cw,"formatDependency");function uw(r,e,t="    "){return[r,...e.message.split(`
`).map(i=>t+i)].join(`
`)}o(uw,"composeErrorMessage");function lw(r,e,t){let[,i=null]=r.toString().match(/constructor\(([\w, ]+)\)/)||[],n=cw(i,e);return uw(`Cannot inject the dependency ${n} of "${r.name}" constructor. Reason:`,t)}o(lw,"formatErrorCtor");uc.formatErrorCtor=lw});var a2=y(lc=>{"use strict";Object.defineProperty(lc,"__esModule",{value:!0});lc.isDisposable=void 0;function fw(r){return!(typeof r.dispose!="function"||r.dispose.length>0)}o(fw,"isDisposable");lc.isDisposable=fw});var c2=y(Rn=>{"use strict";Object.defineProperty(Rn,"__esModule",{value:!0});Rn.PostResolutionInterceptors=Rn.PreResolutionInterceptors=void 0;var o2=Cf(),fc=class extends o2.default{static{o(this,"PreResolutionInterceptors")}};Rn.PreResolutionInterceptors=fc;var hc=class extends o2.default{static{o(this,"PostResolutionInterceptors")}};Rn.PostResolutionInterceptors=hc;var Nf=class{static{o(this,"Interceptors")}constructor(){this.preResolution=new fc,this.postResolution=new hc}};Rn.default=Nf});var Qi=y(Di=>{"use strict";Object.defineProperty(Di,"__esModule",{value:!0});Di.instance=Di.typeInfo=void 0;var hw=(ec(),Ll(Zo)),Ht=xf(),dw=i2(),dc=sc(),pw=n2(),ir=vf(),pc=s2(),mw=If(),gw=nc(),yw=a2(),_w=c2();Di.typeInfo=new Map;var kf=class r{static{o(this,"InternalDependencyContainer")}constructor(e){this.parent=e,this._registry=new pw.default,this.interceptors=new _w.default,this.disposed=!1,this.disposables=new Set}register(e,t,i={lifecycle:ir.default.Transient}){this.ensureNotDisposed();let n;if(dw.isProvider(t)?n=t:n={useClass:t},Ht.isTokenProvider(n)){let s=[e],a=n;for(;a!=null;){let c=a.useToken;if(s.includes(c))throw new Error(`Token registration cycle detected! ${[...s,c].join(" -> ")}`);s.push(c);let u=this._registry.get(c);u&&Ht.isTokenProvider(u.provider)?a=u.provider:a=null}}if((i.lifecycle===ir.default.Singleton||i.lifecycle==ir.default.ContainerScoped||i.lifecycle==ir.default.ResolutionScoped)&&(Ht.isValueProvider(n)||Ht.isFactoryProvider(n)))throw new Error(`Cannot use lifecycle "${ir.default[i.lifecycle]}" with ValueProviders or FactoryProviders`);return this._registry.set(e,{provider:n,options:i}),this}registerType(e,t){return this.ensureNotDisposed(),Ht.isNormalToken(t)?this.register(e,{useToken:t}):this.register(e,{useClass:t})}registerInstance(e,t){return this.ensureNotDisposed(),this.register(e,{useValue:t})}registerSingleton(e,t){if(this.ensureNotDisposed(),Ht.isNormalToken(e)){if(Ht.isNormalToken(t))return this.register(e,{useToken:t},{lifecycle:ir.default.Singleton});if(t)return this.register(e,{useClass:t},{lifecycle:ir.default.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}let i=e;return t&&!Ht.isNormalToken(t)&&(i=t),this.register(e,{useClass:i},{lifecycle:ir.default.Singleton})}resolve(e,t=new pc.default,i=!1){this.ensureNotDisposed();let n=this.getRegistration(e);if(!n&&Ht.isNormalToken(e)){if(i)return;throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}if(this.executePreResolutionInterceptor(e,"Single"),n){let s=this.resolveRegistration(n,t);return this.executePostResolutionInterceptor(e,s,"Single"),s}if(dc.isConstructorToken(e)){let s=this.construct(e,t);return this.executePostResolutionInterceptor(e,s,"Single"),s}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")}executePreResolutionInterceptor(e,t){if(this.interceptors.preResolution.has(e)){let i=[];for(let n of this.interceptors.preResolution.getAll(e))n.options.frequency!="Once"&&i.push(n),n.callback(e,t);this.interceptors.preResolution.setAll(e,i)}}executePostResolutionInterceptor(e,t,i){if(this.interceptors.postResolution.has(e)){let n=[];for(let s of this.interceptors.postResolution.getAll(e))s.options.frequency!="Once"&&n.push(s),s.callback(e,t,i);this.interceptors.postResolution.setAll(e,n)}}resolveRegistration(e,t){if(this.ensureNotDisposed(),e.options.lifecycle===ir.default.ResolutionScoped&&t.scopedResolutions.has(e))return t.scopedResolutions.get(e);let i=e.options.lifecycle===ir.default.Singleton,n=e.options.lifecycle===ir.default.ContainerScoped,s=i||n,a;return Ht.isValueProvider(e.provider)?a=e.provider.useValue:Ht.isTokenProvider(e.provider)?a=s?e.instance||(e.instance=this.resolve(e.provider.useToken,t)):this.resolve(e.provider.useToken,t):Ht.isClassProvider(e.provider)?a=s?e.instance||(e.instance=this.construct(e.provider.useClass,t)):this.construct(e.provider.useClass,t):Ht.isFactoryProvider(e.provider)?a=e.provider.useFactory(this):a=this.construct(e.provider,t),e.options.lifecycle===ir.default.ResolutionScoped&&t.scopedResolutions.set(e,a),a}resolveAll(e,t=new pc.default,i=!1){this.ensureNotDisposed();let n=this.getAllRegistrations(e);if(!n&&Ht.isNormalToken(e)){if(i)return[];throw new Error(`Attempted to resolve unregistered dependency token: "${e.toString()}"`)}if(this.executePreResolutionInterceptor(e,"All"),n){let a=n.map(c=>this.resolveRegistration(c,t));return this.executePostResolutionInterceptor(e,a,"All"),a}let s=[this.construct(e,t)];return this.executePostResolutionInterceptor(e,s,"All"),s}isRegistered(e,t=!1){return this.ensureNotDisposed(),this._registry.has(e)||t&&(this.parent||!1)&&this.parent.isRegistered(e,!0)}reset(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()}clearInstances(){this.ensureNotDisposed();for(let[e,t]of this._registry.entries())this._registry.setAll(e,t.filter(i=>!Ht.isValueProvider(i.provider)).map(i=>(i.instance=void 0,i)))}createChildContainer(){this.ensureNotDisposed();let e=new r(this);for(let[t,i]of this._registry.entries())i.some(({options:n})=>n.lifecycle===ir.default.ContainerScoped)&&e._registry.setAll(t,i.map(n=>n.options.lifecycle===ir.default.ContainerScoped?{provider:n.provider,options:n.options}:n));return e}beforeResolution(e,t,i={frequency:"Always"}){this.interceptors.preResolution.set(e,{callback:t,options:i})}afterResolution(e,t,i={frequency:"Always"}){this.interceptors.postResolution.set(e,{callback:t,options:i})}dispose(){return hw.__awaiter(this,void 0,void 0,function*(){this.disposed=!0;let e=[];this.disposables.forEach(t=>{let i=t.dispose();i&&e.push(i)}),yield Promise.all(e)})}getRegistration(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null}getAllRegistrations(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null}construct(e,t){if(e instanceof gw.DelayedConstructor)return e.createProxy(n=>this.resolve(n,t));let i=(()=>{let n=Di.typeInfo.get(e);if(!n||n.length===0){if(e.length===0)return new e;throw new Error(`TypeInfo not known for "${e.name}"`)}let s=n.map(this.resolveParams(t,e));return new e(...s)})();return yw.isDisposable(i)&&this.disposables.add(i),i}resolveParams(e,t){return(i,n)=>{try{return dc.isTokenDescriptor(i)?dc.isTransformDescriptor(i)?i.multiple?this.resolve(i.transform).transform(this.resolveAll(i.token,new pc.default,i.isOptional),...i.transformArgs):this.resolve(i.transform).transform(this.resolve(i.token,e,i.isOptional),...i.transformArgs):i.multiple?this.resolveAll(i.token,new pc.default,i.isOptional):this.resolve(i.token,e,i.isOptional):dc.isTransformDescriptor(i)?this.resolve(i.transform,e).transform(this.resolve(i.token,e),...i.transformArgs):this.resolve(i,e)}catch(s){throw new Error(mw.formatErrorCtor(t,n,s))}}}ensureNotDisposed(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")}};Di.instance=new kf;Di.default=Di.instance});var u2=y(Mf=>{"use strict";Object.defineProperty(Mf,"__esModule",{value:!0});var vw=Pn(),Ri=Qi(),jf=sc(),bw=If();function Sw(){return function(r){let e=vw.getParamInfo(r);return class extends r{constructor(...t){super(...t.concat(e.slice(t.length).map((i,n)=>{try{return jf.isTokenDescriptor(i)?jf.isTransformDescriptor(i)?i.multiple?Ri.instance.resolve(i.transform).transform(Ri.instance.resolveAll(i.token),...i.transformArgs):Ri.instance.resolve(i.transform).transform(Ri.instance.resolve(i.token),...i.transformArgs):i.multiple?Ri.instance.resolveAll(i.token):Ri.instance.resolve(i.token):jf.isTransformDescriptor(i)?Ri.instance.resolve(i.transform).transform(Ri.instance.resolve(i.token),...i.transformArgs):Ri.instance.resolve(i)}catch(s){let a=n+t.length;throw new Error(bw.formatErrorCtor(r,a,s))}})))}}}}o(Sw,"autoInjectable");Mf.default=Sw});var l2=y(Lf=>{"use strict";Object.defineProperty(Lf,"__esModule",{value:!0});var ww=Pn();function Ew(r,e){let t={token:r,multiple:!1,isOptional:e&&e.isOptional};return ww.defineInjectionTokenMetadata(t)}o(Ew,"inject");Lf.default=Ew});var mc=y(qf=>{"use strict";Object.defineProperty(qf,"__esModule",{value:!0});var Tw=Pn(),xw=Qi(),f2=Qi();function Aw(r){return function(e){xw.typeInfo.set(e,Tw.getParamInfo(e)),r&&r.token&&(Array.isArray(r.token)?r.token.forEach(t=>{f2.instance.register(t,e)}):f2.instance.register(r.token,e))}}o(Aw,"injectable");qf.default=Aw});var h2=y(Vf=>{"use strict";Object.defineProperty(Vf,"__esModule",{value:!0});var Ow=(ec(),Ll(Zo)),Cw=Qi();function Fw(r=[]){return function(e){return r.forEach(t=>{var{token:i,options:n}=t,s=Ow.__rest(t,["token","options"]);return Cw.instance.register(i,s,n)}),e}}o(Fw,"registry");Vf.default=Fw});var d2=y(Uf=>{"use strict";Object.defineProperty(Uf,"__esModule",{value:!0});var Pw=mc(),Dw=Qi();function Rw(){return function(r){Pw.default()(r),Dw.instance.registerSingleton(r)}}o(Rw,"singleton");Uf.default=Rw});var p2=y(Bf=>{"use strict";Object.defineProperty(Bf,"__esModule",{value:!0});var Iw=Pn();function Nw(r,e){let t={token:r,multiple:!0,isOptional:e&&e.isOptional};return Iw.defineInjectionTokenMetadata(t)}o(Nw,"injectAll");Bf.default=Nw});var m2=y($f=>{"use strict";Object.defineProperty($f,"__esModule",{value:!0});var kw=Pn();function jw(r,e,...t){let i={token:r,multiple:!0,transform:e,transformArgs:t};return kw.defineInjectionTokenMetadata(i)}o(jw,"injectAllWithTransform");$f.default=jw});var g2=y(Gf=>{"use strict";Object.defineProperty(Gf,"__esModule",{value:!0});var Mw=Pn();function Lw(r,e,...t){return Mw.defineInjectionTokenMetadata(r,{transformToken:e,args:t})}o(Lw,"injectWithTransform");Gf.default=Lw});var y2=y(Wf=>{"use strict";Object.defineProperty(Wf,"__esModule",{value:!0});var qw=mc(),Vw=Qi();function Uw(r,e){return function(t){qw.default()(t),Vw.instance.register(e||t,t,{lifecycle:r})}}o(Uw,"scoped");Wf.default=Uw});var _2=y(Fr=>{"use strict";Object.defineProperty(Fr,"__esModule",{value:!0});var Bw=u2();Object.defineProperty(Fr,"autoInjectable",{enumerable:!0,get:o(function(){return Bw.default},"get")});var $w=l2();Object.defineProperty(Fr,"inject",{enumerable:!0,get:o(function(){return $w.default},"get")});var Gw=mc();Object.defineProperty(Fr,"injectable",{enumerable:!0,get:o(function(){return Gw.default},"get")});var Ww=h2();Object.defineProperty(Fr,"registry",{enumerable:!0,get:o(function(){return Ww.default},"get")});var Hw=d2();Object.defineProperty(Fr,"singleton",{enumerable:!0,get:o(function(){return Hw.default},"get")});var zw=p2();Object.defineProperty(Fr,"injectAll",{enumerable:!0,get:o(function(){return zw.default},"get")});var Kw=m2();Object.defineProperty(Fr,"injectAllWithTransform",{enumerable:!0,get:o(function(){return Kw.default},"get")});var Yw=g2();Object.defineProperty(Fr,"injectWithTransform",{enumerable:!0,get:o(function(){return Yw.default},"get")});var Qw=y2();Object.defineProperty(Fr,"scoped",{enumerable:!0,get:o(function(){return Qw.default},"get")})});var v2=y(Hf=>{"use strict";Object.defineProperty(Hf,"__esModule",{value:!0});function Jw(r){let e;return t=>(e==null&&(e=r(t)),e)}o(Jw,"instanceCachingFactory");Hf.default=Jw});var b2=y(zf=>{"use strict";Object.defineProperty(zf,"__esModule",{value:!0});function Xw(r){let e=new WeakMap;return t=>{let i=e.get(t);return i==null&&(i=r(t),e.set(t,i)),i}}o(Xw,"instancePerContainerCachingFactory");zf.default=Xw});var S2=y(Kf=>{"use strict";Object.defineProperty(Kf,"__esModule",{value:!0});function Zw(r,e,t,i=!0){let n,s;return a=>{let c=r(a);return(!i||s!==c)&&((s=c)?n=a.resolve(e):n=a.resolve(t)),n}}o(Zw,"predicateAwareClassFactory");Kf.default=Zw});var w2=y(ha=>{"use strict";Object.defineProperty(ha,"__esModule",{value:!0});var eE=v2();Object.defineProperty(ha,"instanceCachingFactory",{enumerable:!0,get:o(function(){return eE.default},"get")});var tE=b2();Object.defineProperty(ha,"instancePerContainerCachingFactory",{enumerable:!0,get:o(function(){return tE.default},"get")});var rE=S2();Object.defineProperty(ha,"predicateAwareClassFactory",{enumerable:!0,get:o(function(){return rE.default},"get")})});var Ke=y(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});var Yf=(ec(),Ll(Zo));if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var iE=r2();Object.defineProperty(Ji,"Lifecycle",{enumerable:!0,get:o(function(){return iE.Lifecycle},"get")});Yf.__exportStar(_2(),Ji);Yf.__exportStar(w2(),Ji);Yf.__exportStar(xf(),Ji);var nE=nc();Object.defineProperty(Ji,"delay",{enumerable:!0,get:o(function(){return nE.delay},"get")});var sE=Qi();Object.defineProperty(Ji,"container",{enumerable:!0,get:o(function(){return sE.instance},"get")})});var E2=y(Qf=>{"use strict";Object.defineProperty(Qf,"__esModule",{value:!0});Qf.default="ffffffff-ffff-ffff-ffff-ffffffffffff"});var T2=y(Jf=>{"use strict";Object.defineProperty(Jf,"__esModule",{value:!0});Jf.default="00000000-0000-0000-0000-000000000000"});var x2=y(Xf=>{"use strict";Object.defineProperty(Xf,"__esModule",{value:!0});Xf.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i});var da=y(Zf=>{"use strict";Object.defineProperty(Zf,"__esModule",{value:!0});var aE=x2();function oE(r){return typeof r=="string"&&aE.default.test(r)}o(oE,"validate");Zf.default=oE});var pa=y(eh=>{"use strict";Object.defineProperty(eh,"__esModule",{value:!0});var cE=da();function uE(r){if(!(0,cE.default)(r))throw TypeError("Invalid UUID");let e;return Uint8Array.of((e=parseInt(r.slice(0,8),16))>>>24,e>>>16&255,e>>>8&255,e&255,(e=parseInt(r.slice(9,13),16))>>>8,e&255,(e=parseInt(r.slice(14,18),16))>>>8,e&255,(e=parseInt(r.slice(19,23),16))>>>8,e&255,(e=parseInt(r.slice(24,36),16))/1099511627776&255,e/4294967296&255,e>>>24&255,e>>>16&255,e>>>8&255,e&255)}o(uE,"parse");eh.default=uE});var Ii=y(ma=>{"use strict";Object.defineProperty(ma,"__esModule",{value:!0});ma.unsafeStringify=void 0;var lE=da(),At=[];for(let r=0;r<256;++r)At.push((r+256).toString(16).slice(1));function A2(r,e=0){return(At[r[e+0]]+At[r[e+1]]+At[r[e+2]]+At[r[e+3]]+"-"+At[r[e+4]]+At[r[e+5]]+"-"+At[r[e+6]]+At[r[e+7]]+"-"+At[r[e+8]]+At[r[e+9]]+"-"+At[r[e+10]]+At[r[e+11]]+At[r[e+12]]+At[r[e+13]]+At[r[e+14]]+At[r[e+15]]).toLowerCase()}o(A2,"unsafeStringify");ma.unsafeStringify=A2;function fE(r,e=0){let t=A2(r,e);if(!(0,lE.default)(t))throw TypeError("Stringified UUID is invalid");return t}o(fE,"stringify");ma.default=fE});var _c=y(th=>{"use strict";Object.defineProperty(th,"__esModule",{value:!0});var hE=require("crypto"),yc=new Uint8Array(256),gc=yc.length;function dE(){return gc>yc.length-16&&((0,hE.randomFillSync)(yc),gc=0),yc.slice(gc,gc+=16)}o(dE,"rng");th.default=dE});var rh=y(ya=>{"use strict";Object.defineProperty(ya,"__esModule",{value:!0});ya.updateV1State=void 0;var O2=_c(),pE=Ii(),ga={};function mE(r,e,t){let i,n=r?._v6??!1;if(r){let s=Object.keys(r);s.length===1&&s[0]==="_v6"&&(r=void 0)}if(r)i=C2(r.random??r.rng?.()??(0,O2.default)(),r.msecs,r.nsecs,r.clockseq,r.node,e,t);else{let s=Date.now(),a=(0,O2.default)();F2(ga,s,a),i=C2(a,ga.msecs,ga.nsecs,n?void 0:ga.clockseq,n?void 0:ga.node,e,t)}return e??(0,pE.unsafeStringify)(i)}o(mE,"v1");function F2(r,e,t){return r.msecs??=-1/0,r.nsecs??=0,e===r.msecs?(r.nsecs++,r.nsecs>=1e4&&(r.node=void 0,r.nsecs=0)):e>r.msecs?r.nsecs=0:e<r.msecs&&(r.node=void 0),r.node||(r.node=t.slice(10,16),r.node[0]|=1,r.clockseq=(t[8]<<8|t[9])&16383),r.msecs=e,r}o(F2,"updateV1State");ya.updateV1State=F2;function C2(r,e,t,i,n,s,a=0){if(r.length<16)throw new Error("Random bytes length must be >= 16");if(!s)s=new Uint8Array(16),a=0;else if(a<0||a+16>s.length)throw new RangeError(`UUID byte range ${a}:${a+15} is out of buffer bounds`);e??=Date.now(),t??=0,i??=(r[8]<<8|r[9])&16383,n??=r.slice(10,16),e+=122192928e5;let c=((e&268435455)*1e4+t)%4294967296;s[a++]=c>>>24&255,s[a++]=c>>>16&255,s[a++]=c>>>8&255,s[a++]=c&255;let u=e/4294967296*1e4&268435455;s[a++]=u>>>8&255,s[a++]=u&255,s[a++]=u>>>24&15|16,s[a++]=u>>>16&255,s[a++]=i>>>8|128,s[a++]=i&255;for(let f=0;f<6;++f)s[a++]=n[f];return s}o(C2,"v1Bytes");ya.default=mE});var nh=y(ih=>{"use strict";Object.defineProperty(ih,"__esModule",{value:!0});var gE=pa(),yE=Ii();function _E(r){let e=typeof r=="string"?(0,gE.default)(r):r,t=vE(e);return typeof r=="string"?(0,yE.unsafeStringify)(t):t}o(_E,"v1ToV6");ih.default=_E;function vE(r){return Uint8Array.of((r[6]&15)<<4|r[7]>>4&15,(r[7]&15)<<4|(r[4]&240)>>4,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,(r[1]&15)<<4|(r[2]&240)>>4,96|r[2]&15,r[3],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}o(vE,"_v1ToV6")});var P2=y(sh=>{"use strict";Object.defineProperty(sh,"__esModule",{value:!0});var bE=require("crypto");function SE(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),(0,bE.createHash)("md5").update(r).digest()}o(SE,"md5");sh.default=SE});var _a=y(Ni=>{"use strict";Object.defineProperty(Ni,"__esModule",{value:!0});Ni.URL=Ni.DNS=Ni.stringToBytes=void 0;var D2=pa(),wE=Ii();function R2(r){r=unescape(encodeURIComponent(r));let e=new Uint8Array(r.length);for(let t=0;t<r.length;++t)e[t]=r.charCodeAt(t);return e}o(R2,"stringToBytes");Ni.stringToBytes=R2;Ni.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8";Ni.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function EE(r,e,t,i,n,s){let a=typeof t=="string"?R2(t):t,c=typeof i=="string"?(0,D2.default)(i):i;if(typeof i=="string"&&(i=(0,D2.default)(i)),i?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let u=new Uint8Array(16+a.length);if(u.set(c),u.set(a,c.length),u=e(u),u[6]=u[6]&15|r,u[8]=u[8]&63|128,n){s=s||0;for(let f=0;f<16;++f)n[s+f]=u[f];return n}return(0,wE.unsafeStringify)(u)}o(EE,"v35");Ni.default=EE});var N2=y(In=>{"use strict";Object.defineProperty(In,"__esModule",{value:!0});In.URL=In.DNS=void 0;var TE=P2(),ah=_a(),I2=_a();Object.defineProperty(In,"DNS",{enumerable:!0,get:o(function(){return I2.DNS},"get")});Object.defineProperty(In,"URL",{enumerable:!0,get:o(function(){return I2.URL},"get")});function oh(r,e,t,i){return(0,ah.default)(48,TE.default,r,e,t,i)}o(oh,"v3");oh.DNS=ah.DNS;oh.URL=ah.URL;In.default=oh});var k2=y(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});var xE=require("crypto");ch.default={randomUUID:xE.randomUUID}});var M2=y(uh=>{"use strict";Object.defineProperty(uh,"__esModule",{value:!0});var j2=k2(),AE=_c(),OE=Ii();function CE(r,e,t){if(j2.default.randomUUID&&!e&&!r)return j2.default.randomUUID();r=r||{};let i=r.random??r.rng?.()??(0,AE.default)();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let n=0;n<16;++n)e[t+n]=i[n];return e}return(0,OE.unsafeStringify)(i)}o(CE,"v4");uh.default=CE});var L2=y(lh=>{"use strict";Object.defineProperty(lh,"__esModule",{value:!0});var FE=require("crypto");function PE(r){return Array.isArray(r)?r=Buffer.from(r):typeof r=="string"&&(r=Buffer.from(r,"utf8")),(0,FE.createHash)("sha1").update(r).digest()}o(PE,"sha1");lh.default=PE});var V2=y(Nn=>{"use strict";Object.defineProperty(Nn,"__esModule",{value:!0});Nn.URL=Nn.DNS=void 0;var DE=L2(),fh=_a(),q2=_a();Object.defineProperty(Nn,"DNS",{enumerable:!0,get:o(function(){return q2.DNS},"get")});Object.defineProperty(Nn,"URL",{enumerable:!0,get:o(function(){return q2.URL},"get")});function hh(r,e,t,i){return(0,fh.default)(80,DE.default,r,e,t,i)}o(hh,"v5");hh.DNS=fh.DNS;hh.URL=fh.URL;Nn.default=hh});var U2=y(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});var RE=Ii(),IE=rh(),NE=nh();function kE(r,e,t){r??={},t??=0;let i=(0,IE.default)({...r,_v6:!0},new Uint8Array(16));if(i=(0,NE.default)(i),e){for(let n=0;n<16;n++)e[t+n]=i[n];return e}return(0,RE.unsafeStringify)(i)}o(kE,"v6");dh.default=kE});var B2=y(ph=>{"use strict";Object.defineProperty(ph,"__esModule",{value:!0});var jE=pa(),ME=Ii();function LE(r){let e=typeof r=="string"?(0,jE.default)(r):r,t=qE(e);return typeof r=="string"?(0,ME.unsafeStringify)(t):t}o(LE,"v6ToV1");ph.default=LE;function qE(r){return Uint8Array.of((r[3]&15)<<4|r[4]>>4&15,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|r[6]&15,r[7],(r[1]&15)<<4|(r[2]&240)>>4,(r[2]&15)<<4|(r[3]&240)>>4,16|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}o(qE,"_v6ToV1")});var H2=y(va=>{"use strict";Object.defineProperty(va,"__esModule",{value:!0});va.updateV7State=void 0;var $2=_c(),VE=Ii(),mh={};function UE(r,e,t){let i;if(r)i=G2(r.random??r.rng?.()??(0,$2.default)(),r.msecs,r.seq,e,t);else{let n=Date.now(),s=(0,$2.default)();W2(mh,n,s),i=G2(s,mh.msecs,mh.seq,e,t)}return e??(0,VE.unsafeStringify)(i)}o(UE,"v7");function W2(r,e,t){return r.msecs??=-1/0,r.seq??=0,e>r.msecs?(r.seq=t[6]<<23|t[7]<<16|t[8]<<8|t[9],r.msecs=e):(r.seq=r.seq+1|0,r.seq===0&&r.msecs++),r}o(W2,"updateV7State");va.updateV7State=W2;function G2(r,e,t,i,n=0){if(r.length<16)throw new Error("Random bytes length must be >= 16");if(!i)i=new Uint8Array(16),n=0;else if(n<0||n+16>i.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);return e??=Date.now(),t??=r[6]*127<<24|r[7]<<16|r[8]<<8|r[9],i[n++]=e/1099511627776&255,i[n++]=e/4294967296&255,i[n++]=e/16777216&255,i[n++]=e/65536&255,i[n++]=e/256&255,i[n++]=e&255,i[n++]=112|t>>>28&15,i[n++]=t>>>20&255,i[n++]=128|t>>>14&63,i[n++]=t>>>6&255,i[n++]=t<<2&255|r[10]&3,i[n++]=r[11],i[n++]=r[12],i[n++]=r[13],i[n++]=r[14],i[n++]=r[15],i}o(G2,"v7Bytes");va.default=UE});var z2=y(gh=>{"use strict";Object.defineProperty(gh,"__esModule",{value:!0});var BE=da();function $E(r){if(!(0,BE.default)(r))throw TypeError("Invalid UUID");return parseInt(r.slice(14,15),16)}o($E,"version");gh.default=$E});var ui=y(Ve=>{"use strict";Object.defineProperty(Ve,"__esModule",{value:!0});Ve.version=Ve.validate=Ve.v7=Ve.v6ToV1=Ve.v6=Ve.v5=Ve.v4=Ve.v3=Ve.v1ToV6=Ve.v1=Ve.stringify=Ve.parse=Ve.NIL=Ve.MAX=void 0;var GE=E2();Object.defineProperty(Ve,"MAX",{enumerable:!0,get:o(function(){return GE.default},"get")});var WE=T2();Object.defineProperty(Ve,"NIL",{enumerable:!0,get:o(function(){return WE.default},"get")});var HE=pa();Object.defineProperty(Ve,"parse",{enumerable:!0,get:o(function(){return HE.default},"get")});var zE=Ii();Object.defineProperty(Ve,"stringify",{enumerable:!0,get:o(function(){return zE.default},"get")});var KE=rh();Object.defineProperty(Ve,"v1",{enumerable:!0,get:o(function(){return KE.default},"get")});var YE=nh();Object.defineProperty(Ve,"v1ToV6",{enumerable:!0,get:o(function(){return YE.default},"get")});var QE=N2();Object.defineProperty(Ve,"v3",{enumerable:!0,get:o(function(){return QE.default},"get")});var JE=M2();Object.defineProperty(Ve,"v4",{enumerable:!0,get:o(function(){return JE.default},"get")});var XE=V2();Object.defineProperty(Ve,"v5",{enumerable:!0,get:o(function(){return XE.default},"get")});var ZE=U2();Object.defineProperty(Ve,"v6",{enumerable:!0,get:o(function(){return ZE.default},"get")});var e4=B2();Object.defineProperty(Ve,"v6ToV1",{enumerable:!0,get:o(function(){return e4.default},"get")});var t4=H2();Object.defineProperty(Ve,"v7",{enumerable:!0,get:o(function(){return t4.default},"get")});var r4=da();Object.defineProperty(Ve,"validate",{enumerable:!0,get:o(function(){return r4.default},"get")});var i4=z2();Object.defineProperty(Ve,"version",{enumerable:!0,get:o(function(){return i4.default},"get")})});var Pr=y(vc=>{"use strict";Object.defineProperty(vc,"__esModule",{value:!0});vc.MetadataHelpers=void 0;var yh=class{static{o(this,"MetadataHelpers")}static findAllReferencingProperties(e,t){let i=[];for(let[n,s]of Object.entries(e))this.containsReference(s,t)&&i.push(n);return i}static findReferencingProperty(e,t){for(let[i,n]of Object.entries(e))if(this.containsReference(n,t))return i}static containsReference(e,t){if(!e)return!1;let i=t.replace(/\.md$/,"");if(typeof e=="string"){let n=/\[\[([^\]]+)\]\]/g,s;for(;(s=n.exec(e))!==null;){let c=s[1].split("|")[0].trim();if(c===i||c.endsWith(`/${i}`))return!0}return!1}return Array.isArray(e)?e.some(n=>this.containsReference(n,t)):!1}static isAssetArchived(e){let t=e?.exo__Asset_isArchived;if(t!=null){if(t===!0||t===1)return!0;if(typeof t=="string"){let n=t.toLowerCase().trim();if(n==="true"||n==="yes"||n==="1")return!0}if(typeof t=="boolean")return t}let i=e?.archived;if(i==null)return!1;if(typeof i=="boolean")return i;if(typeof i=="number")return i!==0;if(typeof i=="string"){let n=i.toLowerCase().trim();return n==="true"||n==="yes"||n==="1"}return!1}static getPropertyValue(e,t){return t==="Name"||t==="title"?e.title:t==="created"?e.created:t==="modified"?e.modified:t==="path"?e.path:e.metadata?.[t]}static ensureQuoted(e){return!e||e==='""'?'""':e.startsWith('"')&&e.endsWith('"')?e:`"${e}"`}static buildFileContent(e,t){let i=Object.entries(e).map(([s,a])=>{if(Array.isArray(a)){let c=a.map(u=>`  - ${u}`).join(`
`);return`${s}:
${c}`}return`${s}: ${a}`}).join(`
`),n=t?`
${t}
`:`
`;return`---
${i}
---
${n}`}};vc.MetadataHelpers=yh});var lr=y(bc=>{"use strict";Object.defineProperty(bc,"__esModule",{value:!0});bc.DateFormatter=void 0;var _h=class r{static{o(this,"DateFormatter")}static toISOTimestamp(e){return e.toISOString().replace(/\.\d{3}Z$/,"Z")}static toLocalTimestamp(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0"),s=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0"),c=String(e.getSeconds()).padStart(2,"0");return`${t}-${i}-${n}T${s}:${a}:${c}`}static toDateWikilink(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`"[[${t}-${i}-${n}]]"`}static getTodayWikilink(){return r.toDateWikilink(new Date)}static toDateString(e){let t=e.getFullYear(),i=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0");return`${t}-${i}-${n}`}static parseWikilink(e){let i=e.replace(/^["']|["']$/g,"").match(/\[\[(\d{4}-\d{2}-\d{2})\]\]/);return i?i[1]:null}static addDays(e,t){let i=new Date(e);return i.setDate(i.getDate()+t),i}static isSameDay(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()}static getTodayStartTimestamp(){let e=new Date;return e.setHours(0,0,0,0),r.toLocalTimestamp(e)}static toTimestampAtStartOfDay(e){let t=e.split("-").map(Number);if(t.length!==3||t.some(isNaN))throw new Error(`Invalid date format: ${e}. Expected YYYY-MM-DD`);let[i,n,s]=t,a=new Date(i,n-1,s,0,0,0,0);if(isNaN(a.getTime()))throw new Error(`Invalid date values: ${e}`);return r.toLocalTimestamp(a)}static normalizeTimestamp(e){if(/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(e))return e;let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`Invalid timestamp format: ${e}`);return r.toISOTimestamp(t)}static isISOTimestamp(e){return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}Z$/.test(e)}};bc.DateFormatter=_h});var ba=y(Sc=>{"use strict";Object.defineProperty(Sc,"__esModule",{value:!0});Sc.MetadataExtractor=void 0;var n4=Pr(),vh=class{static{o(this,"MetadataExtractor")}constructor(e){this.vault=e}extractMetadata(e){return e?this.vault.getFrontmatter(e)||{}:{}}extractInstanceClass(e){return e.exo__Instance_class||null}extractStatus(e){return e.ems__Effort_status||null}extractIsArchived(e){return n4.MetadataHelpers.isAssetArchived(e)}static extractIsDefinedBy(e){let t=e.exo__Asset_isDefinedBy||'""';return Array.isArray(t)&&(t=t[0]||'""'),t}extractExpectedFolder(e){let t=e.exo__Asset_isDefinedBy;if(!t)return null;let i=Array.isArray(t)?t[0]:t;if(!i||typeof i!="string")return null;let n=i.replace(/["'[\]]/g,"").trim();if(!n)return null;let s=n.split("/");return s.pop(),s.join("/")}extractCommandVisibilityContext(e){let t=this.extractMetadata(e),i=this.extractInstanceClass(t),n=this.extractStatus(t),s=this.extractIsArchived(t),a=e.parent?.path||"",c=this.extractExpectedFolder(t);return{instanceClass:i,currentStatus:n,metadata:t,isArchived:s,currentFolder:a,expectedFolder:c}}extractCache(e){return e?this.vault.getFrontmatter(e):null}};Sc.MetadataExtractor=vh});var wc=y(kn=>{"use strict";var s4=kn&&kn.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(kn,"__esModule",{value:!0});kn.TaskFrontmatterGenerator=void 0;var a4=Ke(),K2=ui(),bh=lr(),o4=On(),Y2=ba(),Q2=Pr(),gt=Nt(),c4={[gt.AssetClass.AREA]:"ems__Effort_area",[gt.AssetClass.PROJECT]:"ems__Effort_parent",[gt.AssetClass.TASK_PROTOTYPE]:"exo__Asset_prototype",[gt.AssetClass.MEETING_PROTOTYPE]:"exo__Asset_prototype",[gt.AssetClass.EVENT_PROTOTYPE]:"exo__Asset_prototype"},u4={[gt.AssetClass.AREA]:gt.AssetClass.TASK,[gt.AssetClass.PROJECT]:gt.AssetClass.TASK,[gt.AssetClass.TASK_PROTOTYPE]:gt.AssetClass.TASK,[gt.AssetClass.MEETING_PROTOTYPE]:gt.AssetClass.MEETING,[gt.AssetClass.EVENT_PROTOTYPE]:gt.AssetClass.EVENT},Sh=class{static{o(this,"TaskFrontmatterGenerator")}generateTaskFrontmatter(e,t,i,n,s,a,c){let u=new Date,f=bh.DateFormatter.toLocalTimestamp(u),l=Y2.MetadataExtractor.extractIsDefinedBy(e),h=o4.WikiLinkHelpers.normalize(i),p=c4[h],g=u4[h]||gt.AssetClass.TASK,v={};v.exo__Asset_isDefinedBy=Q2.MetadataHelpers.ensureQuoted(l),v.exo__Asset_uid=s||(0,K2.v4)(),v.exo__Asset_createdAt=f,v.exo__Instance_class=[`"[[${g}]]"`],v.ems__Effort_status='"[[ems__EffortStatusDraft]]"',p&&(v[p]=`"[[${t}]]"`);let S=n;if(g===gt.AssetClass.MEETING&&(!n||n.trim()==="")){let A=e.exo__Asset_label||t,F=bh.DateFormatter.toDateString(u);S=`${A} ${F}`}if(S&&S.trim()!==""){let A=S.trim();v.exo__Asset_label=A,v.aliases=[A]}return a&&(v.ems__Task_size=a),c&&(v.ems__Effort_plannedStartTimestamp=c),v}generateRelatedTaskFrontmatter(e,t,i,n,s){let a=new Date,c=bh.DateFormatter.toLocalTimestamp(a),u=Y2.MetadataExtractor.extractIsDefinedBy(e),f={};if(f.exo__Asset_isDefinedBy=Q2.MetadataHelpers.ensureQuoted(u),f.exo__Asset_uid=n||(0,K2.v4)(),f.exo__Asset_createdAt=c,f.exo__Instance_class=[`"[[${gt.AssetClass.TASK}]]"`],f.ems__Effort_status='"[[ems__EffortStatusDraft]]"',f.exo__Asset_relates=[`"[[${t}]]"`],i&&i.trim()!==""){let l=i.trim();f.exo__Asset_label=l,f.aliases=[l]}return s&&(f.ems__Task_size=s),f}};kn.TaskFrontmatterGenerator=Sh;kn.TaskFrontmatterGenerator=Sh=s4([(0,a4.injectable)()],Sh)});var Ec=y(jn=>{"use strict";var l4=jn&&jn.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(jn,"__esModule",{value:!0});jn.AlgorithmExtractor=void 0;var f4=Ke(),wh=class{static{o(this,"AlgorithmExtractor")}extractH2Section(e,t){let i=e.split(`
`),n=`## ${t}`,s=!1,a=[];for(let u of i){if(u.trim()===n){s=!0;continue}if(s){if(u.startsWith("## ")||u.startsWith("# "))break;a.push(u)}}return a.length===0?null:a.join(`
`).trim()||null}};jn.AlgorithmExtractor=wh;jn.AlgorithmExtractor=wh=l4([(0,f4.injectable)()],wh)});var X2=y(J2=>{"use strict";Object.defineProperty(J2,"__esModule",{value:!0})});var Xe=y(Tc=>{"use strict";Object.defineProperty(Tc,"__esModule",{value:!0});Tc.DI_TOKENS=void 0;Tc.DI_TOKENS={IFileSystemAdapter:Symbol.for("IFileSystemAdapter"),IVaultAdapter:Symbol.for("IVaultAdapter"),IVaultContext:Symbol.for("IVaultContext"),IMultiVaultManager:Symbol.for("IMultiVaultManager"),ILogger:Symbol.for("ILogger"),IEventBus:Symbol.for("IEventBus"),IConfiguration:Symbol.for("IConfiguration"),INotificationService:Symbol.for("INotificationService"),TaskCreationService:Symbol.for("TaskCreationService"),ProjectCreationService:Symbol.for("ProjectCreationService"),AreaCreationService:Symbol.for("AreaCreationService"),ClassCreationService:Symbol.for("ClassCreationService"),ConceptCreationService:Symbol.for("ConceptCreationService"),FleetingNoteCreationService:Symbol.for("FleetingNoteCreationService"),SupervisionCreationService:Symbol.for("SupervisionCreationService"),TaskFrontmatterGenerator:Symbol.for("TaskFrontmatterGenerator"),AlgorithmExtractor:Symbol.for("AlgorithmExtractor"),TaskStatusService:Symbol.for("TaskStatusService"),EffortStatusWorkflow:Symbol.for("EffortStatusWorkflow"),StatusTimestampService:Symbol.for("StatusTimestampService"),PropertyCleanupService:Symbol.for("PropertyCleanupService"),FolderRepairService:Symbol.for("FolderRepairService"),LabelToAliasService:Symbol.for("LabelToAliasService"),RenameToUidService:Symbol.for("RenameToUidService"),PlanningService:Symbol.for("PlanningService"),EffortVotingService:Symbol.for("EffortVotingService"),SessionEventService:Symbol.for("SessionEventService"),AssetConversionService:Symbol.for("AssetConversionService"),NoteToRDFConverter:Symbol.for("NoteToRDFConverter"),AreaHierarchyBuilder:Symbol.for("AreaHierarchyBuilder"),URIConstructionService:Symbol.for("URIConstructionService")}});var Th=y(Ot=>{"use strict";var h4=Ot&&Ot.__createBinding||(Object.create?(function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,i,n)}):(function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]})),d4=Ot&&Ot.__setModuleDefault||(Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e}),p4=Ot&&Ot.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},m4=Ot&&Ot.__importStar||(function(){var r=o(function(e){return r=Object.getOwnPropertyNames||function(t){var i=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[i.length]=n);return i},r(e)},"ownKeys");return function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i=r(e),n=0;n<i.length;n++)i[n]!=="default"&&h4(t,e,i[n]);return d4(t,e),t}})(),g4=Ot&&Ot.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},y4=Ot&&Ot.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.TaskCreationService=void 0;var Z2=Ke(),e0=ui(),_4=On(),t0=Pr(),v4=Nt(),b4=wc(),S4=Ec(),PR=m4(X2()),w4=Xe(),Eh=class{static{o(this,"TaskCreationService")}constructor(e,t,i){this.vault=e,this.frontmatterGenerator=t,this.algorithmExtractor=i}async createTask(e,t,i,n,s,a){let c=(0,e0.v4)(),u=`${c}.md`,f=this.frontmatterGenerator.generateTaskFrontmatter(t,e.basename,i,n,c,s,a),l="";if(_4.WikiLinkHelpers.normalize(i)===v4.AssetClass.TASK_PROTOTYPE){let A=await this.vault.read(e),F=this.algorithmExtractor.extractH2Section(A,"Algorithm");F&&(l=`## Algorithm

${F}`)}let p=t0.MetadataHelpers.buildFileContent(f,l),g=e.parent?.path||"",v=g?`${g}/${u}`:u;return await this.vault.create(v,p)}async createRelatedTask(e,t,i,n){let s=(0,e0.v4)(),a=`${s}.md`,c=this.frontmatterGenerator.generateRelatedTaskFrontmatter(t,e.basename,i,s,n),u=t0.MetadataHelpers.buildFileContent(c),f=e.parent?.path||"",l=f?`${f}/${a}`:a,h=await this.vault.create(l,u);return await this.addRelationToSourceFile(e,s),h}generateTaskFrontmatter(e,t,i,n,s,a,c){return this.frontmatterGenerator.generateTaskFrontmatter(e,t,i,n,s,a,c)}generateRelatedTaskFrontmatter(e,t,i,n,s){return this.frontmatterGenerator.generateRelatedTaskFrontmatter(e,t,i,n,s)}extractH2Section(e,t){return this.algorithmExtractor.extractH2Section(e,t)}async addRelationToSourceFile(e,t){let i=await this.vault.read(e),n=this.addRelationToFrontmatter(i,t);await this.vault.modify(e,n)}addRelationToFrontmatter(e,t){let i=/^---\r?\n([\s\S]*?)\r?\n---/,n=e.match(i),s=e.includes(`\r
`)?`\r
`:`
`;if(!n)return`---${s}exo__Asset_relates:${s}  - "[[${t}]]"${s}---${s}${e}`;let c=n[1];if(c.includes("exo__Asset_relates:")){let u=c.match(/exo__Asset_relates:\r?\n((?: {2}- .*\r?\n)*)/);if(u){let f=u[1],l=`  - "[[${t}]]"${s}`;c=c.replace(/exo__Asset_relates:\r?\n((?: {2}- .*\r?\n)*)/,`exo__Asset_relates:${s}${f}${l}`)}}else c+=`${s}exo__Asset_relates:${s}  - "[[${t}]]"`;return e.replace(i,`---${s}${c}${s}---`)}};Ot.TaskCreationService=Eh;Ot.TaskCreationService=Eh=p4([(0,Z2.injectable)(),y4(0,(0,Z2.inject)(w4.DI_TOKENS.IVaultAdapter)),g4("design:paramtypes",[Object,b4.TaskFrontmatterGenerator,S4.AlgorithmExtractor])],Eh)});var Ah=y(Dr=>{"use strict";var E4=Dr&&Dr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},T4=Dr&&Dr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},x4=Dr&&Dr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Dr,"__esModule",{value:!0});Dr.ProjectCreationService=void 0;var r0=Ke(),i0=ui(),A4=On(),xc=Nt(),O4=lr(),C4=ba(),n0=Pr(),F4=Xe(),P4={[xc.AssetClass.AREA]:"ems__Effort_area",[xc.AssetClass.INITIATIVE]:"ems__Effort_parent",[xc.AssetClass.PROJECT]:"ems__Effort_parent"},xh=class{static{o(this,"ProjectCreationService")}constructor(e){this.vault=e}async createProject(e,t,i,n){let s=(0,i0.v4)(),a=`${s}.md`,c=this.generateProjectFrontmatter(t,e.basename,i,n,s),u=n0.MetadataHelpers.buildFileContent(c),f=e.parent?.path||"",l=f?`${f}/${a}`:a;return await this.vault.create(l,u)}generateProjectFrontmatter(e,t,i,n,s){let a=new Date,c=O4.DateFormatter.toLocalTimestamp(a),u=C4.MetadataExtractor.extractIsDefinedBy(e),f=A4.WikiLinkHelpers.normalize(i),l=P4[f]||"ems__Effort_area",h={};if(h.exo__Asset_isDefinedBy=n0.MetadataHelpers.ensureQuoted(u),h.exo__Asset_uid=s||(0,i0.v4)(),h.exo__Asset_createdAt=c,h.exo__Instance_class=[`"[[${xc.AssetClass.PROJECT}]]"`],h.ems__Effort_status='"[[ems__EffortStatusDraft]]"',h[l]=`"[[${t}]]"`,n&&n.trim()!==""){let p=n.trim();h.exo__Asset_label=p,h.aliases=[p]}return h}};Dr.ProjectCreationService=xh;Dr.ProjectCreationService=xh=E4([(0,r0.injectable)(),x4(0,(0,r0.inject)(F4.DI_TOKENS.IVaultAdapter)),T4("design:paramtypes",[Object])],xh)});var ms=y(Oc=>{"use strict";Object.defineProperty(Oc,"__esModule",{value:!0});Oc.FrontmatterService=void 0;var Ac=class r{static{o(this,"FrontmatterService")}parse(e){let t=e.match(r.FRONTMATTER_REGEX);return t?{exists:!0,content:t[1],originalContent:e}:{exists:!1,content:"",originalContent:e}}updateProperty(e,t,i){let n=this.parse(e);if(!n.exists)return this.createFrontmatter(e,{[t]:i});let s=n.content;if(this.hasProperty(s,t)){let a=new RegExp(`${this.escapeRegex(t)}:.*$`,"m");s=s.replace(a,`${t}: ${i}`)}else{let a=s.length>0?`
`:"";s+=`${a}${t}: ${i}`}return e.replace(r.FRONTMATTER_REGEX,`---
${s}
---`)}addProperty(e,t,i){return this.updateProperty(e,t,i)}removeProperty(e,t){let i=this.parse(e);if(!i.exists||!this.hasProperty(i.content,t))return e;let n=new RegExp(`
?${this.escapeRegex(t)}:.*(?:
 {2}- .*)*`,"gm"),s=i.content.replace(n,"");return e.replace(r.FRONTMATTER_REGEX,`---
${s}
---`)}hasProperty(e,t){return e.includes(`${t}:`)}createFrontmatter(e,t){let n=`---
${Object.entries(t).map(([a,c])=>`${a}: ${c}`).join(`
`)}
---`,s=e.startsWith(`
`)?"":`
`;return`${n}${s}${e}`}getPropertyValue(e,t){let i=new RegExp(`${this.escapeRegex(t)}:\\s*(.*)$`,"m"),n=e.match(i);return n?n[1].trim():null}escapeRegex(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}};Oc.FrontmatterService=Ac;Ac.FRONTMATTER_REGEX=/^---\n([\s\S]*?)\n---/});var Cc=y(Mn=>{"use strict";var D4=Mn&&Mn.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};Object.defineProperty(Mn,"__esModule",{value:!0});Mn.EffortStatusWorkflow=void 0;var R4=Ke(),fr=Nt(),Oh=class{static{o(this,"EffortStatusWorkflow")}getPreviousStatus(e,t){let i=this.normalizeStatus(e);if(i===fr.EffortStatus.DRAFT)return null;if(i===fr.EffortStatus.BACKLOG)return this.wrapStatus(fr.EffortStatus.DRAFT);if(i===fr.EffortStatus.ANALYSIS)return this.wrapStatus(fr.EffortStatus.BACKLOG);if(i===fr.EffortStatus.TODO)return this.wrapStatus(fr.EffortStatus.ANALYSIS);if(i===fr.EffortStatus.DOING)return this.hasInstanceClass(t,fr.AssetClass.PROJECT)?this.wrapStatus(fr.EffortStatus.TODO):this.wrapStatus(fr.EffortStatus.BACKLOG);if(i===fr.EffortStatus.DONE)return this.wrapStatus(fr.EffortStatus.DOING)}normalizeStatus(e){return e.replace(/["'[\]]/g,"").trim()}wrapStatus(e){return`"[[${e}]]"`}hasInstanceClass(e,t){return e?(Array.isArray(e)?e:[e]).some(n=>n.replace(/["'[\]]/g,"").trim()===t):!1}};Mn.EffortStatusWorkflow=Oh;Mn.EffortStatusWorkflow=Oh=D4([(0,R4.injectable)()],Oh)});var Fc=y(Rr=>{"use strict";var I4=Rr&&Rr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},N4=Rr&&Rr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},k4=Rr&&Rr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Rr,"__esModule",{value:!0});Rr.StatusTimestampService=void 0;var s0=Ke(),j4=ms(),Sa=lr(),M4=Xe(),Ch=class{static{o(this,"StatusTimestampService")}constructor(e){this.vault=e,this.frontmatterService=new j4.FrontmatterService}async addStartTimestamp(e){let t=await this.vault.read(e),i=Sa.DateFormatter.toLocalTimestamp(new Date),n=this.frontmatterService.updateProperty(t,"ems__Effort_startTimestamp",i);await this.vault.modify(e,n)}async addEndTimestamp(e,t){let i=await this.vault.read(e),n=t||new Date,s=Sa.DateFormatter.toLocalTimestamp(n),a=this.frontmatterService.updateProperty(i,"ems__Effort_endTimestamp",s);await this.vault.modify(e,a)}async addResolutionTimestamp(e){let t=await this.vault.read(e),i=Sa.DateFormatter.toLocalTimestamp(new Date),n=this.frontmatterService.updateProperty(t,"ems__Effort_resolutionTimestamp",i);await this.vault.modify(e,n)}async addEndAndResolutionTimestamps(e,t){let i=await this.vault.read(e),n=t||new Date,s=Sa.DateFormatter.toLocalTimestamp(n),a=this.frontmatterService.updateProperty(i,"ems__Effort_endTimestamp",s);a=this.frontmatterService.updateProperty(a,"ems__Effort_resolutionTimestamp",s),await this.vault.modify(e,a)}async removeStartTimestamp(e){let t=await this.vault.read(e),i=this.frontmatterService.removeProperty(t,"ems__Effort_startTimestamp");await this.vault.modify(e,i)}async removeEndTimestamp(e){let t=await this.vault.read(e),i=this.frontmatterService.removeProperty(t,"ems__Effort_endTimestamp");await this.vault.modify(e,i)}async removeResolutionTimestamp(e){let t=await this.vault.read(e),i=this.frontmatterService.removeProperty(t,"ems__Effort_resolutionTimestamp");await this.vault.modify(e,i)}async removeEndAndResolutionTimestamps(e){let t=await this.vault.read(e),i=this.frontmatterService.removeProperty(t,"ems__Effort_endTimestamp");i=this.frontmatterService.removeProperty(i,"ems__Effort_resolutionTimestamp"),await this.vault.modify(e,i)}async shiftPlannedEndTimestamp(e,t){let i=await this.vault.read(e),n=this.frontmatterService.parse(i);if(!n.exists)return;let s=this.frontmatterService.getPropertyValue(n.content,"ems__Effort_plannedEndTimestamp");if(!s)return;let a=new Date(s.replace(/["']/g,""));if(isNaN(a.getTime()))return;let c=new Date(a.getTime()+t),u=Sa.DateFormatter.toLocalTimestamp(c),f=this.frontmatterService.updateProperty(i,"ems__Effort_plannedEndTimestamp",u);await this.vault.modify(e,f)}};Rr.StatusTimestampService=Ch;Rr.StatusTimestampService=Ch=I4([(0,s0.injectable)(),k4(0,(0,s0.inject)(M4.DI_TOKENS.IVaultAdapter)),N4("design:paramtypes",[Object])],Ch)});var Ph=y(Ir=>{"use strict";var L4=Ir&&Ir.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},q4=Ir&&Ir.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},V4=Ir&&Ir.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Ir,"__esModule",{value:!0});Ir.TaskStatusService=void 0;var a0=Ke(),U4=ms(),Ln=lr(),B4=Cc(),$4=Fc(),G4=Xe(),Fh=class{static{o(this,"TaskStatusService")}constructor(e,t,i){this.vault=e,this.workflow=t,this.timestampService=i,this.frontmatterService=new U4.FrontmatterService}async setDraftStatus(e){await this.updateStatus(e,"ems__EffortStatusDraft")}async moveToBacklog(e){await this.updateStatus(e,"ems__EffortStatusBacklog")}async moveToAnalysis(e){await this.updateStatus(e,"ems__EffortStatusAnalysis")}async moveToToDo(e){await this.updateStatus(e,"ems__EffortStatusToDo")}async startEffort(e){let t=await this.vault.read(e),i=Ln.DateFormatter.toLocalTimestamp(new Date),n=this.frontmatterService.updateProperty(t,"ems__Effort_status",'"[[ems__EffortStatusDoing]]"');n=this.frontmatterService.updateProperty(n,"ems__Effort_startTimestamp",i),await this.vault.modify(e,n)}async markTaskAsDone(e){let t=await this.vault.read(e),i=Ln.DateFormatter.toLocalTimestamp(new Date),n=this.frontmatterService.updateProperty(t,"ems__Effort_status",'"[[ems__EffortStatusDone]]"');n=this.frontmatterService.updateProperty(n,"ems__Effort_endTimestamp",i),n=this.frontmatterService.updateProperty(n,"ems__Effort_resolutionTimestamp",i),await this.vault.modify(e,n)}async syncEffortEndTimestamp(e,t){await this.timestampService.addEndAndResolutionTimestamps(e,t)}async shiftPlannedEndTimestamp(e,t){await this.timestampService.shiftPlannedEndTimestamp(e,t)}async trashEffort(e){let t=await this.vault.read(e),i=Ln.DateFormatter.toLocalTimestamp(new Date),n=this.frontmatterService.updateProperty(t,"ems__Effort_status",'"[[ems__EffortStatusTrashed]]"');n=this.frontmatterService.updateProperty(n,"ems__Effort_resolutionTimestamp",i),await this.vault.modify(e,n)}async archiveTask(e){let t=await this.vault.read(e),i=this.frontmatterService.updateProperty(t,"archived","true");i=this.frontmatterService.removeProperty(i,"aliases"),await this.vault.modify(e,i)}async planOnToday(e){let t=await this.vault.read(e),i=Ln.DateFormatter.getTodayStartTimestamp(),n=this.frontmatterService.updateProperty(t,"ems__Effort_plannedStartTimestamp",i);await this.vault.modify(e,n)}async planForEvening(e){let t=await this.vault.read(e),i=new Date;i.setHours(19,0,0,0);let n=Ln.DateFormatter.toLocalTimestamp(i),s=this.frontmatterService.updateProperty(t,"ems__Effort_plannedStartTimestamp",n);await this.vault.modify(e,s)}async shiftDayBackward(e){await this.shiftDay(e,-1)}async shiftDayForward(e){await this.shiftDay(e,1)}async rollbackStatus(e){let t=await this.vault.read(e),i=this.extractCurrentStatus(t),n=this.extractInstanceClass(t);if(!i)throw new Error("No current status to rollback from");let s=this.workflow.getPreviousStatus(i,n);if(s===void 0)throw new Error("Cannot rollback from current status");let a=t;s===null?a=this.frontmatterService.removeProperty(a,"ems__Effort_status"):a=this.frontmatterService.updateProperty(a,"ems__Effort_status",s);let c=this.workflow.normalizeStatus(i);c==="ems__EffortStatusDone"?(a=this.frontmatterService.removeProperty(a,"ems__Effort_endTimestamp"),a=this.frontmatterService.removeProperty(a,"ems__Effort_resolutionTimestamp")):c==="ems__EffortStatusDoing"&&(a=this.frontmatterService.removeProperty(a,"ems__Effort_startTimestamp")),await this.vault.modify(e,a)}async updateStatus(e,t){let i=await this.vault.read(e),n=this.frontmatterService.updateProperty(i,"ems__Effort_status",`"[[${t}]]"`);await this.vault.modify(e,n)}async shiftDay(e,t){let i=await this.vault.read(e),n=this.extractPlannedStartTimestamp(i);if(!n)throw new Error("ems__Effort_plannedStartTimestamp property not found");let s=this.parseDateFromTimestamp(n);if(!s)throw new Error("Invalid date format in ems__Effort_plannedStartTimestamp");let a=Ln.DateFormatter.addDays(s,t);a.setHours(0,0,0,0);let c=Ln.DateFormatter.toLocalTimestamp(a),u=this.frontmatterService.updateProperty(i,"ems__Effort_plannedStartTimestamp",c);await this.vault.modify(e,u)}parseDateFromTimestamp(e){let t=new Date(e);return isNaN(t.getTime())?null:t}extractPlannedStartTimestamp(e){let t=this.frontmatterService.parse(e);return t.exists?this.frontmatterService.getPropertyValue(t.content,"ems__Effort_plannedStartTimestamp"):null}extractCurrentStatus(e){let t=this.frontmatterService.parse(e);return t.exists?this.frontmatterService.getPropertyValue(t.content,"ems__Effort_status"):null}extractInstanceClass(e){let t=this.frontmatterService.parse(e);if(!t.exists)return null;let i=t.content.match(/exo__Instance_class:\s*\n((?:\s*-\s*.*\n?)+)/);return i?i[1].split(`
`).filter(s=>s.trim()).map(s=>s.replace(/^\s*-\s*/,"").trim()):this.frontmatterService.getPropertyValue(t.content,"exo__Instance_class")}};Ir.TaskStatusService=Fh;Ir.TaskStatusService=Fh=L4([(0,a0.injectable)(),V4(0,(0,a0.inject)(G4.DI_TOKENS.IVaultAdapter)),q4("design:paramtypes",[Object,B4.EffortStatusWorkflow,$4.StatusTimestampService])],Fh)});var Rh=y(Nr=>{"use strict";var W4=Nr&&Nr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},H4=Nr&&Nr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},z4=Nr&&Nr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Nr,"__esModule",{value:!0});Nr.AreaCreationService=void 0;var o0=Ke(),c0=ui(),K4=Nt(),Y4=lr(),Q4=ba(),u0=Pr(),J4=Xe(),Dh=class{static{o(this,"AreaCreationService")}constructor(e){this.vault=e}async createChildArea(e,t,i){let n=(0,c0.v4)(),s=`${n}.md`,a=this.generateChildAreaFrontmatter(t,e.basename,i,n),c=u0.MetadataHelpers.buildFileContent(a),u=e.parent?.path||"",f=u?`${u}/${s}`:s;return await this.vault.create(f,c)}generateChildAreaFrontmatter(e,t,i,n){let s=new Date,a=Y4.DateFormatter.toLocalTimestamp(s),c=Q4.MetadataExtractor.extractIsDefinedBy(e),u={};if(u.exo__Asset_isDefinedBy=u0.MetadataHelpers.ensureQuoted(c),u.exo__Asset_uid=n||(0,c0.v4)(),u.exo__Asset_createdAt=a,u.exo__Instance_class=[`"[[${K4.AssetClass.AREA}]]"`],u.ems__Area_parent=`"[[${t}]]"`,i&&i.trim()!==""){let f=i.trim();u.exo__Asset_label=f,u.aliases=[f]}return u}};Nr.AreaCreationService=Dh;Nr.AreaCreationService=Dh=W4([(0,o0.injectable)(),z4(0,(0,o0.inject)(J4.DI_TOKENS.IVaultAdapter)),H4("design:paramtypes",[Object])],Dh)});var Nh=y(kr=>{"use strict";var X4=kr&&kr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Z4=kr&&kr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},e5=kr&&kr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(kr,"__esModule",{value:!0});kr.AreaHierarchyBuilder=void 0;var l0=Ke(),f0=Nt(),t5=Xe(),Ih=class{static{o(this,"AreaHierarchyBuilder")}constructor(e){this.vault=e}buildHierarchy(e,t){let i=this.vault.getAbstractFileByPath(e);if(!this.isFile(i))return null;let n=this.vault.getFrontmatter(i)||{};if(this.extractInstanceClass(n)!==f0.AssetClass.AREA)return null;let a=this.collectAllAreasFromVault(),c=new Set;return this.buildTree(e,a,c,0)}isFile(e){return e&&typeof e=="object"&&"basename"in e&&"path"in e}extractInstanceClass(e){let t=e.exo__Instance_class||"";return Array.isArray(t)?this.cleanWikiLink(t[0]||""):this.cleanWikiLink(t)}cleanWikiLink(e){return typeof e!="string"?"":e.replace(/^\[\[|\]\]$/g,"").trim()}collectAllAreasFromVault(){let e=new Map,t=new Map,i=this.vault.getAllFiles();for(let n of i){let s=this.vault.getFrontmatter(n)||{};if(this.extractInstanceClass(s)===f0.AssetClass.AREA){let c=this.extractParentPath(s);e.set(n.path,{path:n.path,title:n.basename,label:s.exo__Asset_label||void 0,isArchived:this.isArchived(s),depth:0,parentPath:c||void 0}),t.set(n.basename,n.path)}}for(let[,n]of e.entries())n.parentPath&&t.has(n.parentPath)&&(n.parentPath=t.get(n.parentPath));return e}extractParentPath(e){let t=e.ems__Area_parent;if(!t)return null;if(Array.isArray(t)){let i=t[0]||"";return this.cleanWikiLink(i)}return this.cleanWikiLink(t)}isArchived(e){let t=e.exo__Asset_archived;if(t===!0||t==="true")return!0;if(Array.isArray(t)&&t.length>0){let i=t[0];return i===!0||i==="true"}return!1}buildTree(e,t,i,n){if(i.has(e))return null;i.add(e);let s=t.get(e);if(!s)return null;let a=[];for(let[c,u]of t.entries())if(u.parentPath===e){let f=this.buildTree(c,t,i,n+1);f&&a.push(f)}return a.sort((c,u)=>{let f=c.label||c.title,l=u.label||u.title;return f.localeCompare(l)}),{path:s.path,title:s.title,label:s.label,isArchived:s.isArchived,depth:n,parentPath:s.parentPath,children:a}}};kr.AreaHierarchyBuilder=Ih;kr.AreaHierarchyBuilder=Ih=X4([(0,l0.injectable)(),e5(0,(0,l0.inject)(t5.DI_TOKENS.IVaultAdapter)),Z4("design:paramtypes",[Object])],Ih)});var jh=y(jr=>{"use strict";var r5=jr&&jr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},i5=jr&&jr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},n5=jr&&jr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(jr,"__esModule",{value:!0});jr.ClassCreationService=void 0;var h0=Ke(),s5=ui(),a5=lr(),o5=Pr(),c5=Xe(),kh=class{static{o(this,"ClassCreationService")}constructor(e){this.vault=e}async createSubclass(e,t,i){let n=(0,s5.v4)(),s=this.generateFileName(t),a=s.endsWith(".md")?s:`${s}.md`,c=this.generateClassFrontmatter(e.basename,t,n,i),u=o5.MetadataHelpers.buildFileContent(c),f="classes",l=`${f}/${a}`;return this.vault.getAbstractFileByPath(f)||await this.vault.createFolder(f),await this.vault.create(l,u)}generateFileName(e){return e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}generateClassFrontmatter(e,t,i,n){let s=new Date,a=a5.DateFormatter.toLocalTimestamp(s),c={};c.exo__Asset_uid=i,c.exo__Asset_label=t,c.exo__Asset_createdAt=a,c.exo__Instance_class=['"[[exo__Class]]"'],c.exo__Class_superClass=`"[[${e}]]"`;let u=n.exo__Asset_isDefinedBy||'"[[Ontology/EXO]]"';return c.exo__Asset_isDefinedBy=u,c.aliases=[t],c}};jr.ClassCreationService=kh;jr.ClassCreationService=kh=r5([(0,h0.injectable)(),n5(0,(0,h0.inject)(c5.DI_TOKENS.IVaultAdapter)),i5("design:paramtypes",[Object])],kh)});var Lh=y(Mr=>{"use strict";var u5=Mr&&Mr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},l5=Mr&&Mr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},f5=Mr&&Mr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Mr,"__esModule",{value:!0});Mr.ConceptCreationService=void 0;var d0=Ke(),h5=ui(),d5=lr(),p5=Pr(),m5=Nt(),g5=Xe(),Mh=class{static{o(this,"ConceptCreationService")}constructor(e){this.vault=e}async createNarrowerConcept(e,t,i,n){let s=(0,h5.v4)(),a=t.endsWith(".md")?t:`${t}.md`,c=this.generateConceptFrontmatter(e.basename,i,n,s),u=p5.MetadataHelpers.buildFileContent(c),f="concepts",l=`${f}/${a}`;return this.vault.getAbstractFileByPath(f)||await this.vault.createFolder(f),await this.vault.create(l,u)}generateConceptFrontmatter(e,t,i,n){let s=new Date,a=d5.DateFormatter.toLocalTimestamp(s),c={};return c.exo__Asset_isDefinedBy='"[[!concepts]]"',c.exo__Asset_uid=n,c.exo__Asset_createdAt=a,c.exo__Instance_class=[`"[[${m5.AssetClass.CONCEPT}]]"`],c.ims__Concept_broader=`"[[${e}]]"`,c.ims__Concept_definition=t,i.length>0&&(c.aliases=i),c}};Mr.ConceptCreationService=Mh;Mr.ConceptCreationService=Mh=u5([(0,d0.injectable)(),f5(0,(0,d0.inject)(g5.DI_TOKENS.IVaultAdapter)),l5("design:paramtypes",[Object])],Mh)});var Vh=y(Lr=>{"use strict";var y5=Lr&&Lr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},_5=Lr&&Lr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},v5=Lr&&Lr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.EffortVotingService=void 0;var p0=Ke(),b5=Xe(),qh=class{static{o(this,"EffortVotingService")}constructor(e){this.vault=e}async incrementEffortVotes(e){let t=await this.vault.read(e),n=this.extractVoteCount(t)+1,s=this.updateFrontmatterWithVotes(t,n);return await this.vault.modify(e,s),n}extractVoteCount(e){let t=/^---\r?\n([\s\S]*?)\r?\n---/,i=e.match(t);if(!i)return 0;let s=i[1].match(/ems__Effort_votes:\s*(\d+)/);return s&&s[1]?parseInt(s[1],10):0}updateFrontmatterWithVotes(e,t){let i=/^---\r?\n([\s\S]*?)\r?\n---/,n=e.match(i),s=e.includes(`\r
`)?`\r
`:`
`;if(!n)return`---${s}ems__Effort_votes: ${t}${s}---${s}${e}`;let c=n[1];return c.includes("ems__Effort_votes:")?c=c.replace(/ems__Effort_votes:.*$/m,`ems__Effort_votes: ${t}`):c+=`${s}ems__Effort_votes: ${t}`,e.replace(i,`---${s}${c}${s}---`)}};Lr.EffortVotingService=qh;Lr.EffortVotingService=qh=y5([(0,p0.injectable)(),v5(0,(0,p0.inject)(b5.DI_TOKENS.IVaultAdapter)),_5("design:paramtypes",[Object])],qh)});var Bh=y(qr=>{"use strict";var S5=qr&&qr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},w5=qr&&qr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},E5=qr&&qr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(qr,"__esModule",{value:!0});qr.FolderRepairService=void 0;var m0=Ke(),T5=Xe(),Uh=class{static{o(this,"FolderRepairService")}constructor(e){this.vault=e}async getExpectedFolder(e,t){let i=t?.exo__Asset_isDefinedBy;if(!i)return null;let n=this.extractReference(i);if(!n)return null;let s=this.vault.getFirstLinkpathDest(n,e.path);return s?this.getFileFolder(s):null}async repairFolder(e,t){let i=`${t}/${e.name}`;if(this.vault.getAbstractFileByPath(i))throw new Error(`Cannot move file: ${i} already exists`);await this.ensureFolderExists(t),await this.vault.rename(e,i)}getFileFolder(e){return e.parent?.path||""}extractReference(e){if(typeof e!="string")return null;let t=e.trim().replace(/^["']|["']$/g,"");return t=t.replace(/^\[\[|\]\]$/g,""),t||null}async ensureFolderExists(e){if(!e)return;let t=this.vault.getAbstractFileByPath(e);if(!(t&&"children"in t))try{await this.vault.createFolder(e)}catch(i){if(i instanceof Error&&i.message.includes("Folder already exists"))return;throw i}}};qr.FolderRepairService=Uh;qr.FolderRepairService=Uh=S5([(0,m0.injectable)(),E5(0,(0,m0.inject)(T5.DI_TOKENS.IVaultAdapter)),w5("design:paramtypes",[Object])],Uh)});var Gh=y(Vr=>{"use strict";var x5=Vr&&Vr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},A5=Vr&&Vr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},O5=Vr&&Vr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Vr,"__esModule",{value:!0});Vr.LabelToAliasService=void 0;var g0=Ke(),C5=Xe(),$h=class{static{o(this,"LabelToAliasService")}constructor(e){this.vault=e}async copyLabelToAliases(e){let t=await this.vault.read(e),i=this.extractLabel(t);if(!i)throw new Error("No exo__Asset_label found in file");let n=this.addLabelToAliases(t,i);await this.vault.modify(e,n)}extractLabel(e){let t=/^---\r?\n([\s\S]*?)\r?\n---/,i=e.match(t);if(!i)return null;let s=i[1].match(/exo__Asset_label:\s*["']?([^"'\r\n]+)["']?/);return s&&s[1]?s[1].trim():null}addLabelToAliases(e,t){let i=/^---\r?\n([\s\S]*?)\r?\n---/,n=e.match(i),s=e.includes(`\r
`)?`\r
`:`
`;if(!n)return`---${s}aliases:${s}  - "${t}"${s}---${s}${e}`;let c=n[1];return c.includes("aliases:")?c.match(/(aliases:\r?\n(?: {2}- .*\r?\n)*)/)&&(c=c.replace(/(aliases:\r?\n(?: {2}- .*\r?\n)*)/,`$1  - "${t}"${s}`)):c+=`${s}aliases:${s}  - "${t}"`,e.replace(i,`---${s}${c}${s}---`)}};Vr.LabelToAliasService=$h;Vr.LabelToAliasService=$h=x5([(0,g0.injectable)(),O5(0,(0,g0.inject)(C5.DI_TOKENS.IVaultAdapter)),A5("design:paramtypes",[Object])],$h)});var Wh=y(Dc=>{"use strict";Object.defineProperty(Dc,"__esModule",{value:!0});Dc.LoggingService=void 0;var Pc=class{static{o(this,"LoggingService")}static setVerbose(e){this.isVerbose=e}static debug(e,t){this.isVerbose&&console.debug(`[Exocortex] ${e}`,t??"")}static info(e,t){console.log(`[Exocortex] ${e}`,t??"")}static warn(e,t){console.warn(`[Exocortex] ${e}`,t??"")}static error(e,t){console.error(`[Exocortex ERROR] ${e}`,t??""),t?.stack&&console.error(t.stack)}};Dc.LoggingService=Pc;Pc.isVerbose=!1});var Kh=y(Ur=>{"use strict";var F5=Ur&&Ur.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},P5=Ur&&Ur.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},y0=Ur&&Ur.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Ur,"__esModule",{value:!0});Ur.PropertyCleanupService=void 0;var Hh=Ke(),_0=Xe(),zh=class{static{o(this,"PropertyCleanupService")}constructor(e,t){this.vault=e,this.logger=t,this.logger.debug("PropertyCleanupService initialized")}async cleanEmptyProperties(e){this.logger.debug("Cleaning empty properties",{path:e.path});let t=await this.vault.read(e),i=this.removeEmptyPropertiesFromContent(t);await this.vault.modify(e,i),this.logger.info("Empty properties cleaned",{path:e.path})}removeEmptyPropertiesFromContent(e){let t=/^---\n([\s\S]*?)\n---/,i=e.match(t);if(!i)return e;let s=i[1].split(`
`),a=[],c=0;for(;c<s.length;){let f=s[c],l=f.trim();if(l===""){a.push(f),c++;continue}let h=l.match(/^([^:]+):\s*(.*)$/);if(h){let p=h[2];if(p===""&&c+1<s.length&&s[c+1].match(/^\s+- /)){let v=[],S=c+1;for(;S<s.length&&s[S].match(/^\s+- /);)v.push(s[S]),S++;if(v.every(F=>{let D=F.replace(/^\s+- /,"").trim();return this.isEmptyValue(D)})){c=S;continue}else{a.push(f);for(let F=c+1;F<S;F++)a.push(s[F]);c=S;continue}}if(this.isEmptyValue(p)){c++;continue}a.push(f),c++}else l.match(/^\s*- /)||a.push(f),c++}let u=a.join(`
`);return e.replace(t,`---
${u}
---`)}isEmptyValue(e){let t=e.trim();return t===""||t==="null"||t==="undefined"||t==="[]"||t==="{}"||t==='""'||t==="''"}};Ur.PropertyCleanupService=zh;Ur.PropertyCleanupService=zh=F5([(0,Hh.injectable)(),y0(0,(0,Hh.inject)(_0.DI_TOKENS.IVaultAdapter)),y0(1,(0,Hh.inject)(_0.DI_TOKENS.ILogger)),P5("design:paramtypes",[Object,Object])],zh)});var Qh=y(Br=>{"use strict";var D5=Br&&Br.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},R5=Br&&Br.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},I5=Br&&Br.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Br,"__esModule",{value:!0});Br.RenameToUidService=void 0;var v0=Ke(),N5=Xe(),Yh=class{static{o(this,"RenameToUidService")}constructor(e){this.vault=e}async renameToUid(e,t){let i=t.exo__Asset_uid;if(!i)throw new Error("Asset has no exo__Asset_uid property");let n=e.basename,s=i;if(n===s)throw new Error("File is already named according to UID");let a=t.exo__Asset_label;if(!a||a.trim()===""){let l=this.isAssetArchived(t);await this.updateLabel(e,n,l)}let u=e.parent?.path||"",f=u?`${u}/${s}.md`:`${s}.md`;await this.vault.updateLinks(e.path,f,n),await this.vault.rename(e,f)}async updateLabel(e,t,i){await this.vault.process(e,n=>{let s=/^---\n([\s\S]*?)\n---/,a=n.match(s);if(!a)return n;let c=a[1],u=i?`${c}
exo__Asset_label: ${t}`:`${c}
exo__Asset_label: ${t}
aliases:
  - ${t}`;return n.replace(s,`---
${u}
---`)})}isAssetArchived(e){if(e?.exo__Asset_isArchived===!0)return!0;let t=e?.archived;if(t==null)return!1;if(typeof t=="boolean")return t;if(typeof t=="number")return t!==0;if(typeof t=="string"){let i=t.toLowerCase().trim();return i==="true"||i==="yes"||i==="1"}return!1}};Br.RenameToUidService=Yh;Br.RenameToUidService=Yh=D5([(0,v0.injectable)(),I5(0,(0,v0.inject)(N5.DI_TOKENS.IVaultAdapter)),R5("design:paramtypes",[Object])],Yh)});var Xh=y($r=>{"use strict";var k5=$r&&$r.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},j5=$r&&$r.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},M5=$r&&$r.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty($r,"__esModule",{value:!0});$r.SupervisionCreationService=void 0;var b0=Ke(),L5=ui(),q5=lr(),V5=Xe(),Jh=class{static{o(this,"SupervisionCreationService")}constructor(e){this.vault=e}async createSupervision(e){let t=(0,L5.v4)(),i=`${t}.md`,n=this.generateFrontmatter(t),s=this.generateBody(e),a=this.buildFileContent(n,s),c=`01 Inbox/${i}`;return await this.vault.create(c,a)}generateFrontmatter(e){let t=new Date,i=q5.DateFormatter.toLocalTimestamp(t);return{exo__Asset_isDefinedBy:'"[[!kitelev]]"',exo__Asset_uid:e,exo__Asset_createdAt:i,exo__Instance_class:['"[[ztlk__FleetingNote]]"'],ztlk__FleetingNote_type:'"[[CBT-Diary Record]]"'}}generateBody(e){return[{label:"\u0421\u0438\u0442\u0443\u0430\u0446\u0438\u044F/\u0442\u0440\u0438\u0433\u0433\u0435\u0440",value:e.situation},{label:"\u042D\u043C\u043E\u0446\u0438\u0438",value:e.emotions},{label:"\u041C\u044B\u0441\u043B\u0438",value:e.thoughts},{label:"\u041F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u0435",value:e.behavior},{label:"\u041A\u0440\u0430\u0442\u043A\u043E\u0441\u0440\u043E\u0447\u043D\u044B\u0435 \u043F\u043E\u0441\u043B\u0435\u0434\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F",value:e.shortTermConsequences},{label:"\u0414\u043E\u043B\u0433\u043E\u0441\u0440\u043E\u0447\u043D\u044B\u0435 \u043F\u043E\u0441\u043B\u0435\u0434\u0441\u0442\u0432\u0438\u044F \u043F\u043E\u0432\u0435\u0434\u0435\u043D\u0438\u044F",value:e.longTermConsequences}].map(i=>`- ${i.label}: ${i.value}`).join(`
`)}buildFileContent(e,t){return`---
${Object.entries(e).map(([n,s])=>{if(Array.isArray(s)){let a=s.map(c=>`  - ${c}`).join(`
`);return`${n}:
${a}`}return`${n}: ${s}`}).join(`
`)}
---

${t}
`}};$r.SupervisionCreationService=Jh;$r.SupervisionCreationService=Jh=k5([(0,b0.injectable)(),M5(0,(0,b0.inject)(V5.DI_TOKENS.IVaultAdapter)),j5("design:paramtypes",[Object])],Jh)});var ed=y(Gr=>{"use strict";var U5=Gr&&Gr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},B5=Gr&&Gr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},$5=Gr&&Gr.__param||function(r,e){return function(t,i){e(t,i,r)}},Zh;Object.defineProperty(Gr,"__esModule",{value:!0});Gr.FleetingNoteCreationService=void 0;var S0=Ke(),G5=ui(),W5=lr(),H5=Pr(),z5=Xe(),Rc=Zh=class{static{o(this,"FleetingNoteCreationService")}constructor(e){this.vault=e}async createFleetingNote(e){let t=(0,G5.v4)(),i=`${t}.md`,n=this.generateFrontmatter(t,e),s=H5.MetadataHelpers.buildFileContent(n),a=`${Zh.INBOX_FOLDER}/${i}`;return await this.vault.create(a,s)}generateFrontmatter(e,t){let i=new Date,n=W5.DateFormatter.toLocalTimestamp(i),s=t.trim();return{exo__Asset_isDefinedBy:'"[[!kitelev]]"',exo__Asset_uid:e,exo__Asset_createdAt:n,exo__Instance_class:['"[[ztlk__FleetingNote]]"'],exo__Asset_label:s,aliases:[s]}}};Gr.FleetingNoteCreationService=Rc;Rc.INBOX_FOLDER="01 Inbox";Gr.FleetingNoteCreationService=Rc=Zh=U5([(0,S0.injectable)(),$5(0,(0,S0.inject)(z5.DI_TOKENS.IVaultAdapter)),B5("design:paramtypes",[Object])],Rc)});var rd=y(Wr=>{"use strict";var K5=Wr&&Wr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Y5=Wr&&Wr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},Q5=Wr&&Wr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.PlanningService=void 0;var w0=Ke(),J5=ms(),X5=lr(),Z5=Xe(),td=class{static{o(this,"PlanningService")}constructor(e){this.vault=e,this.frontmatterService=new J5.FrontmatterService}async planOnToday(e){let t=this.vault.getAbstractFileByPath(e);if(!t||!this.isFile(t))throw new Error(`File not found: ${e}`);let i=await this.vault.read(t),n=X5.DateFormatter.getTodayStartTimestamp(),s=this.frontmatterService.updateProperty(i,"ems__Effort_plannedStartTimestamp",n);await this.vault.modify(t,s)}isFile(e){return"basename"in e}};Wr.PlanningService=td;Wr.PlanningService=td=K5([(0,w0.injectable)(),Q5(0,(0,w0.inject)(Z5.DI_TOKENS.IVaultAdapter)),Y5("design:paramtypes",[Object])],td)});var nd=y(Hr=>{"use strict";var eT=Hr&&Hr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},tT=Hr&&Hr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},rT=Hr&&Hr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Hr,"__esModule",{value:!0});Hr.AssetConversionService=void 0;var E0=Ke(),T0=Nt(),iT=ms(),Ic=Wh(),nT=Xe(),id=class{static{o(this,"AssetConversionService")}constructor(e){this.vault=e,this.frontmatterService=new iT.FrontmatterService}async convertTaskToProject(e){try{let t=await this.vault.read(e),i=this.removeInstanceClassProperty(t);return i=this.frontmatterService.updateProperty(i,"exo__Instance_class",`["[[${T0.AssetClass.PROJECT}]]"]`),await this.vault.modify(e,i),Ic.LoggingService.info(`Converted Task to Project: ${e.basename} (${e.path})`),e}catch(t){let i=`Failed to convert Task to Project: ${e.path}`;throw Ic.LoggingService.error(i,t instanceof Error?t:void 0),new Error(i)}}async convertProjectToTask(e){try{let t=await this.vault.read(e),i=this.removeInstanceClassProperty(t);return i=this.frontmatterService.updateProperty(i,"exo__Instance_class",`["[[${T0.AssetClass.TASK}]]"]`),await this.vault.modify(e,i),Ic.LoggingService.info(`Converted Project to Task: ${e.basename} (${e.path})`),e}catch(t){let i=`Failed to convert Project to Task: ${e.path}`;throw Ic.LoggingService.error(i,t instanceof Error?t:void 0),new Error(i)}}removeInstanceClassProperty(e){let t=this.frontmatterService.parse(e);if(!t.exists)return e;let i=/^exo__Instance_class:.*$(\n  -.*$)*/gm,n=t.content.replace(i,"").replace(/\n\n+/g,`
`).trim();return e.replace(/^---\n[\s\S]*?\n---/,`---
${n}
---`)}};Hr.AssetConversionService=id;Hr.AssetConversionService=id=eT([(0,E0.injectable)(),rT(0,(0,E0.inject)(nT.DI_TOKENS.IVaultAdapter)),tT("design:paramtypes",[Object])],id)});var ad=y(zr=>{"use strict";var sT=zr&&zr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},aT=zr&&zr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},oT=zr&&zr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(zr,"__esModule",{value:!0});zr.SessionEventService=void 0;var x0=Ke(),cT=ui(),A0=Nt(),uT=lr(),lT=Pr(),fT=Xe(),sd=class{static{o(this,"SessionEventService")}constructor(e){this.vault=e,this.folderPathCache=null,this.defaultOntologyAsset=null}setDefaultOntologyAsset(e){this.defaultOntologyAsset=e,this.folderPathCache=null}async createSessionStartEvent(e){return this.createSessionEvent(e,A0.AssetClass.SESSION_START_EVENT)}async createSessionEndEvent(e){return this.createSessionEvent(e,A0.AssetClass.SESSION_END_EVENT)}async getOntologyAssetFolder(){if(this.folderPathCache!==null)return this.folderPathCache;if(!this.defaultOntologyAsset){let i=this.vault.getDefaultNewFileParent();return this.folderPathCache=i?.path||"",this.folderPathCache}let e=this.vault.getAllFiles();for(let i of e)if(i.basename===this.defaultOntologyAsset){let n=i.parent?.path||"";return this.folderPathCache=n,this.folderPathCache}let t=this.vault.getDefaultNewFileParent();return this.folderPathCache=t?.path||"",this.folderPathCache}async createSessionEvent(e,t){let i=(0,cT.v4)(),n=uT.DateFormatter.toLocalTimestamp(new Date),s=this.defaultOntologyAsset?`"[[${this.defaultOntologyAsset}]]"`:'"[[!kitelev]]"',a={exo__Asset_uid:i,exo__Asset_createdAt:n,exo__Asset_isDefinedBy:s,exo__Instance_class:[`"[[${t}]]"`],ems__SessionEvent_timestamp:n,ems__Session_area:`"[[${e}]]"`},c=lT.MetadataHelpers.buildFileContent(a),u=await this.getOntologyAssetFolder();u&&!await this.vault.exists(u)&&await this.vault.createFolder(u);let f=u?`${u}/${i}.md`:`${i}.md`;return await this.vault.create(f,c)}};zr.SessionEventService=sd;zr.SessionEventService=sd=sT([(0,x0.injectable)(),oT(0,(0,x0.inject)(fT.DI_TOKENS.IVaultAdapter)),aT("design:paramtypes",[Object])],sd)});var cd=y(Kr=>{"use strict";var hT=Kr&&Kr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},dT=Kr&&Kr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},pT=Kr&&Kr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Kr,"__esModule",{value:!0});Kr.URIConstructionService=void 0;var O0=Ke(),mT=Xe(),od=class{static{o(this,"URIConstructionService")}constructor(e){this.fileSystem=e,this.defaultOntologyURL="https://exocortex.my/default/",this.strictValidation=!0}configure(e){e?.defaultOntologyURL&&(this.defaultOntologyURL=e.defaultOntologyURL),e?.strictValidation!==void 0&&(this.strictValidation=e.strictValidation)}async constructAssetURI(e){let t=this.extractUID(e);if(!t){if(this.strictValidation)throw new Error(`Asset missing exo__Asset_uid: ${e.path}`);return console.warn(`Asset ${e.path} missing UID, using filename fallback`),this.constructFallbackURI(e)}let i=await this.resolveOntologyURL(e);if(!this.validateOntologyURL(i))throw new Error(`Invalid ontology URL: ${i}`);return`${i.endsWith("/")?i:`${i}/`}${t}`}validateOntologyURL(e){if(!e)return!1;try{let t=new URL(e);return t.protocol==="http:"||t.protocol==="https:"}catch{return!1}}async resolveOntologyURL(e){let t=e.frontmatter?.exo__Asset_isDefinedBy;if(!t)return this.defaultOntologyURL;let i=this.extractWikiLink(t),n=i,s=await this.fileSystem.fileExists(i);return!s&&!i.endsWith(".md")&&(n=`${i}.md`,s=await this.fileSystem.fileExists(n)),s?(await this.fileSystem.getFileMetadata(n))?.exo__Ontology_url||this.defaultOntologyURL:(console.warn(`Ontology file not found: ${i}, using default`),this.defaultOntologyURL)}extractUID(e){return e.frontmatter?.exo__Asset_uid||null}extractWikiLink(e){return e.replace(/^\[\[|\]\]$/g,"")}constructFallbackURI(e){let t=e.path.split("/").pop()?.replace(".md","")||"unknown";return`${this.defaultOntologyURL}${t}`}};Kr.URIConstructionService=od;Kr.URIConstructionService=od=hT([(0,O0.injectable)(),pT(0,(0,O0.inject)(mT.DI_TOKENS.IFileSystemAdapter)),dT("design:paramtypes",[Object])],od)});var C0=y(Nc=>{"use strict";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.EffortSortingHelpers=void 0;var ud=class r{static{o(this,"EffortSortingHelpers")}static getTimeFromTimestamp(e){if(!e)return"00:00:00";let t=new Date(e);if(isNaN(t.getTime()))return"00:00:00";let i=String(t.getHours()).padStart(2,"0"),n=String(t.getMinutes()).padStart(2,"0"),s=String(t.getSeconds()).padStart(2,"0");return`${i}:${n}:${s}`}static sortByStartTime(e,t){let i=r.getTimeFromTimestamp(e.startTimestamp),n=r.getTimeFromTimestamp(t.startTimestamp),s=i==="00:00:00",a=n==="00:00:00";return s&&!a?1:!s&&a?-1:i.localeCompare(n)}static sortByPriority(e,t){if(e.isTrashed!==t.isTrashed)return e.isTrashed?1:-1;if(e.isDone!==t.isDone)return e.isDone?1:-1;let i=typeof e.metadata.ems__Effort_votes=="number"?e.metadata.ems__Effort_votes:0,n=typeof t.metadata.ems__Effort_votes=="number"?t.metadata.ems__Effort_votes:0;return i!==n?n-i:e.startTime&&t.startTime?e.startTime.localeCompare(t.startTime):e.startTime?-1:t.startTime?1:0}};Nc.EffortSortingHelpers=ud});var fd=y(kc=>{"use strict";Object.defineProperty(kc,"__esModule",{value:!0});kc.NTriplesSerializer=void 0;var ld=class{static{o(this,"NTriplesSerializer")}serialize(e,t={}){let i=t.newline??`
`;return e.length===0?"":e.map(n=>n.toString()).join(i)+i}serializeChunk(e,t){return e.length===0?"":e.map(i=>i.toString()).join(t)+t}};kc.NTriplesSerializer=ld});var F0=y(jc=>{"use strict";Object.defineProperty(jc,"__esModule",{value:!0});jc.TurtleSerializer=void 0;var gs=Fi(),gT=fd(),yT={rdf:gs.Namespace.RDF.iri.value,rdfs:gs.Namespace.RDFS.iri.value,owl:gs.Namespace.OWL.iri.value,xsd:gs.Namespace.XSD.iri.value,exo:gs.Namespace.EXO.iri.value,ems:gs.Namespace.EMS.iri.value},hd=class{static{o(this,"TurtleSerializer")}constructor(){this.nTriplesSerializer=new gT.NTriplesSerializer}serialize(e,t={}){let i=t.newline??`
`,n=this.composePrefixes(t),s=this.serializePrefixes(n,i),a=this.nTriplesSerializer.serialize(e,{newline:i}).trimEnd();return s?a?`${s}${i}${i}${a}${i}`:`${s}${i}`:a?`${a}${i}`:""}serializePrefixes(e,t){let i=Object.entries(e);return i.length===0?"":i.map(([n,s])=>`@prefix ${n}: <${s}> .`).join(t)}composePrefixes(e){return e.includeDefaultPrefixes??!0?{...yT,...e.prefixes??{}}:{...e.prefixes??{}}}serializeTriplesOnly(e,t){return this.nTriplesSerializer.serializeChunk(e,t).trimEnd()}};jc.TurtleSerializer=hd});var R0=y(Mc=>{"use strict";Object.defineProperty(Mc,"__esModule",{value:!0});Mc.JSONLDSerializer=void 0;var P0=xt(),D0=oi(),_T=Gt(),ys=Fi(),vT={rdf:ys.Namespace.RDF.iri.value,rdfs:ys.Namespace.RDFS.iri.value,owl:ys.Namespace.OWL.iri.value,xsd:ys.Namespace.XSD.iri.value,exo:ys.Namespace.EXO.iri.value,ems:ys.Namespace.EMS.iri.value},dd=class{static{o(this,"JSONLDSerializer")}toDocument(e,t={}){let i={...vT,...t.context??{}},n=new Map;for(let s of e){let a=this.subjectToId(s.subject),c=this.compactIri(s.predicate.value,i),u=this.objectToJSONLD(s.object,i),f=n.get(a)??{"@id":a},l=f[c];l===void 0?f[c]=u:Array.isArray(l)?l.push(u):f[c]=[l,u],n.set(a,f)}return{"@context":i,"@graph":Array.from(n.values())}}serialize(e,t={}){let i=this.toDocument(e,t),n=t.pretty?t.indent??2:void 0;return JSON.stringify(i,null,n)}subjectToId(e){return e instanceof P0.IRI?e.value:e instanceof D0.BlankNode?`_:${e.id}`:String(e)}compactIri(e,t){for(let[i,n]of Object.entries(t))if(e.startsWith(n)){let s=e.slice(n.length);if(s.length>0)return`${i}:${s}`}return e}objectToJSONLD(e,t){if(e instanceof P0.IRI)return{"@id":e.value};if(e instanceof D0.BlankNode)return{"@id":`_:${e.id}`};if(e instanceof _T.Literal){let i={"@value":e.value};return e.datatype?i["@type"]=this.compactIri(e.datatype.value,t):e.language&&(i["@language"]=e.language),i}return e}};Mc.JSONLDSerializer=dd});var gd=y(Lc=>{"use strict";Object.defineProperty(Lc,"__esModule",{value:!0});Lc.NTriplesParser=void 0;var bT=An(),I0=xt(),pd=Gt(),ST=oi(),_s=Fi(),wT={rdf:_s.Namespace.RDF.iri.value,rdfs:_s.Namespace.RDFS.iri.value,owl:_s.Namespace.OWL.iri.value,xsd:_s.Namespace.XSD.iri.value,exo:_s.Namespace.EXO.iri.value,ems:_s.Namespace.EMS.iri.value},md=class{static{o(this,"NTriplesParser")}parse(e,t={}){let i={prefixes:{...wT,...t.prefixes??{}},strict:t.strict??!1},n=[];return e.split(/\r?\n/).forEach((a,c)=>{let u=a.trim();!u||u.startsWith("#")||n.push(this.parseLine(u,c+1,i))}),n}parseLine(e,t,i){if(!e.endsWith("."))throw new Error(`Invalid RDF statement at line ${t}: missing '.' terminator`);let s=e.slice(0,-1).trim(),a=this.parseSubject(s,t,i);s=a.rest.trim();let c=this.parsePredicate(s,t,i);s=c.rest.trim();let u=this.parseObject(s,t,i);if(s=u.rest.trim(),s.length>0)throw new Error(`Unexpected tokens after object at line ${t}`);return new bT.Triple(a.node,c.node,u.node)}parseSubject(e,t,i){return e.startsWith("<")?this.consumeIRI(e,t,i):e.startsWith("_:")?this.consumeBlankNode(e,t):this.consumePrefixedName(e,t,i)}parsePredicate(e,t,i){return e.startsWith("<")?this.consumeIRI(e,t,i):this.consumePrefixedName(e,t,i)}parseObject(e,t,i){return e.startsWith("<")?this.consumeIRI(e,t,i):e.startsWith("_:")?this.consumeBlankNode(e,t):e.startsWith('"')?this.consumeLiteral(e,t,i):this.consumePrefixedName(e,t,i)}consumePrefixedName(e,t,i){let n=e.match(/^([a-zA-Z_][\w-]*):([^\s]+)(?:\s+(.*))?$/);if(!n)throw new Error(`Invalid token at line ${t}: ${e}`);let[,s,a,c]=n,u=i.prefixes[s];if(!u)throw new Error(`Unknown prefix "${s}" at line ${t}`);return{node:new I0.IRI(`${u}${a}`),rest:(c??"").trimStart()}}consumeIRI(e,t,i){let n=this.findClosingBracket(e,"<",">");if(n===-1)throw new Error(`Invalid IRI at line ${t}`);let s=e.slice(1,n),a=new I0.IRI(s),c=e.slice(n+1).trimStart();return{node:a,rest:c}}consumeBlankNode(e,t){let i=e.match(/^_:(\w+)(?:\s+(.*))?$/);if(!i)throw new Error(`Invalid blank node identifier at line ${t}`);let[,n,s]=i;return{node:new ST.BlankNode(n),rest:(s??"").trimStart()}}consumeLiteral(e,t,i){let{value:n,rest:s}=this.consumeQuotedString(e,t),a=s.trimStart();if(a.startsWith("^^")){a=a.slice(2).trimStart();let c=a.startsWith("<")?this.consumeIRI(a,t,i):this.consumePrefixedName(a,t,i);return{node:new pd.Literal(n,c.node),rest:c.rest}}if(a.startsWith("@")){let c=a.match(/^@([a-zA-Z-]+)(?:\s+(.*))?$/);if(!c)throw new Error(`Invalid language tag at line ${t}`);let[,u,f]=c;return{node:new pd.Literal(n,void 0,u),rest:(f??"").trimStart()}}return{node:new pd.Literal(n),rest:a}}consumeQuotedString(e,t){if(!e.startsWith('"'))throw new Error(`Expected quoted string at line ${t}`);let i="";for(let n=1;n<e.length;n++){let s=e[n];if(s==="\\"){if(n+1>=e.length)throw new Error(`Invalid escape sequence at line ${t}`);let a=e[n+1];switch(a){case"t":i+="	",n+=1;break;case"b":i+="\b",n+=1;break;case"n":i+=`
`,n+=1;break;case"r":i+="\r",n+=1;break;case"f":i+="\f",n+=1;break;case'"':i+='"',n+=1;break;case"\\":i+="\\",n+=1;break;case"u":{let c=e.slice(n+2,n+6);if(c.length!==4||!/^[0-9a-fA-F]{4}$/.test(c))throw new Error(`Invalid \\u escape at line ${t}`);i+=String.fromCharCode(parseInt(c,16)),n+=5;break}case"U":{let c=e.slice(n+2,n+10);if(c.length!==8||!/^[0-9a-fA-F]{8}$/.test(c))throw new Error(`Invalid \\U escape at line ${t}`);i+=String.fromCodePoint(parseInt(c,16)),n+=9;break}default:throw new Error(`Unknown escape sequence \\${a} at line ${t}`)}continue}if(s==='"'){let a=e.slice(n+1);return{value:i,rest:a}}i+=s}throw new Error(`Unterminated string literal at line ${t}`)}findClosingBracket(e,t,i){let n=0;for(let s=0;s<e.length;s++){let a=e[s];if(a===t){n++;continue}if(a===i&&(n--,n===0))return s}return-1}};Lc.NTriplesParser=md});var N0=y(qc=>{"use strict";Object.defineProperty(qc,"__esModule",{value:!0});qc.TurtleParser=void 0;var vs=Fi(),ET=gd(),TT={rdf:vs.Namespace.RDF.iri.value,rdfs:vs.Namespace.RDFS.iri.value,owl:vs.Namespace.OWL.iri.value,xsd:vs.Namespace.XSD.iri.value,exo:vs.Namespace.EXO.iri.value,ems:vs.Namespace.EMS.iri.value},xT=/^@prefix\s+([a-zA-Z_][\w-]*):\s*<([^>]+)>\s*\.$/,yd=class{static{o(this,"TurtleParser")}constructor(){this.nTriplesParser=new ET.NTriplesParser}parse(e,t={}){let i={...TT,...t.prefixes??{}},n=this.collectStatements(e),s=[];return n.forEach(({statement:a,lineNumber:c})=>{if(this.isPrefixStatement(a)){let f=a.match(xT);if(!f)throw new Error(`Invalid prefix declaration at line ${c}`);let[,l,h]=f;i[l]=h;return}if(a.includes(";")||a.includes(","))throw new Error(`Complex Turtle statements with ';' or ',' are not supported (line ${c})`);let u=this.normalizeShortcuts(a);s.push(this.nTriplesParser.parseLine(u,c,{prefixes:i,strict:!1}))}),s}collectStatements(e){let t=e.split(/\r?\n/),i=[],n="",s=0;if(t.forEach((a,c)=>{let u=a.trim();!u||u.startsWith("#")||(n||(s=c+1),n=n?`${n} ${u}`:u,u.endsWith(".")&&(i.push({statement:n,lineNumber:s}),n=""))}),n)throw new Error(`Unterminated Turtle statement near line ${s}`);return i}isPrefixStatement(e){return e.startsWith("@prefix")}normalizeShortcuts(e){return e.includes(" a ")?e.replace(/\sa\s/g," rdf:type "):e}};qc.TurtleParser=yd});var k0=y(Vc=>{"use strict";Object.defineProperty(Vc,"__esModule",{value:!0});Vc.RDFSerializer=void 0;var bs=An(),qn=xt(),Ss=Gt(),_d=oi(),li=Fi(),AT=F0(),OT=fd(),CT=R0(),FT=N0(),PT=gd(),DT=1024,RT=`
`,IT={rdf:li.Namespace.RDF.iri.value,rdfs:li.Namespace.RDFS.iri.value,owl:li.Namespace.OWL.iri.value,xsd:li.Namespace.XSD.iri.value,exo:li.Namespace.EXO.iri.value,ems:li.Namespace.EMS.iri.value},vd=class{static{o(this,"RDFSerializer")}constructor(e){this.store=e,this.turtleSerializer=new AT.TurtleSerializer,this.nTriplesSerializer=new OT.NTriplesSerializer,this.jsonldSerializer=new CT.JSONLDSerializer,this.turtleParser=new FT.TurtleParser,this.nTriplesParser=new PT.NTriplesParser}async serialize(e,t={}){let i=await this.store.match();return this.serializeTriples(i,e,t)}serializeTriples(e,t,i={}){switch(t){case"turtle":return this.turtleSerializer.serialize(e,{prefixes:i.prefixes,includeDefaultPrefixes:i.includeDefaultPrefixes,newline:i.newline});case"n-triples":return this.nTriplesSerializer.serialize(e,{newline:i.newline});case"json-ld":return this.jsonldSerializer.serialize(e,{context:i.prefixes,pretty:i.pretty,indent:i.indent});default:throw new Error(`Unsupported serialization format: ${t}`)}}stream(e,t={}){let i=t.newline??RT,n=t.batchSize??DT,s=t.includeDefaultPrefixes,a=t.prefixes,c=this,u=!1,f=[],l=[],h=0,p=o(async()=>{if(!u){if(l=await c.store.match(),e==="json-ld"){let v=c.jsonldSerializer.toDocument(l,{context:a,pretty:!1});f.push(...c.buildJsonLdChunks(v))}else if(e==="turtle"){let v=c.turtleSerializer.serializePrefixes(c.composePrefixes(a,s),i);v&&f.push(`${v}${i}${i}`)}u=!0}},"ensureInitialized");return{async next(){if(await p(),f.length>0)return{value:f.shift(),done:!1};if(e==="json-ld")return{value:void 0,done:!0};if(h>=l.length)return{value:void 0,done:!0};let v=l.slice(h,h+n);h+=v.length;let S="";if(e==="turtle"){let A=c.turtleSerializer.serializeTriplesOnly(v,i);A&&(S=`${A}${i}`)}else e==="n-triples"&&(S=c.nTriplesSerializer.serializeChunk(v,i));return S?{value:S,done:!1}:this.next()},async return(){return f=[],l=[],h=0,{value:void 0,done:!0}},[Symbol.asyncIterator](){return this}}}async load(e,t,i={}){let n=this.parse(e,t,i);return i.mode!=="append"&&await this.store.clear(),await this.store.addAll(n),n.length}parse(e,t,i={}){switch(t){case"turtle":return this.turtleParser.parse(e,this.buildTurtleParseOptions(i));case"n-triples":return this.nTriplesParser.parse(e,this.buildNTriplesParseOptions(i));case"json-ld":return this.parseJsonLd(e,i);default:throw new Error(`Unsupported serialization format: ${t}`)}}buildTurtleParseOptions(e){return{prefixes:this.composePrefixes(e.prefixes,!0),strict:e.strict}}buildNTriplesParseOptions(e){return{prefixes:this.composePrefixes(e.prefixes,!0),strict:e.strict}}composePrefixes(e,t){return t??!0?{...IT,...e??{}}:{...e??{}}}parseJsonLd(e,t){let i;try{i=JSON.parse(e)}catch(f){throw new Error(`Invalid JSON-LD document: ${f.message}`)}let n=this.composePrefixes(t.prefixes,!0),s=this.extractContext(i),a={...n,...s},c=this.extractGraph(i),u=[];return c.forEach((f,l)=>{if(!f||typeof f!="object"||Array.isArray(f))throw new Error(`Invalid JSON-LD node at index ${l}`);let h=this.parseSubjectFromNode(f,a,l),p=Object.entries(f);for(let[g,v]of p){if(g==="@id"||g==="@context")continue;if(g==="@type"){this.collectTypeTriples(h,v,u,a);continue}let S=this.expandTerm(g,a),A=new qn.IRI(S);this.collectTriplesForValue(h,A,v,u,a)}}),u}extractContext(e){if(!e||typeof e!="object"||Array.isArray(e))return{};let t=e["@context"];if(!t||typeof t!="object"||Array.isArray(t))return{};let i={};return Object.entries(t).forEach(([n,s])=>{typeof s=="string"&&(i[n]=s)}),i}extractGraph(e){if(Array.isArray(e))return e;if(!e||typeof e!="object")return[];let t=e["@graph"];return Array.isArray(t)?t:[e]}parseSubjectFromNode(e,t,i){let n=e["@id"];if(typeof n=="string"){if(n.startsWith("_:"))return new _d.BlankNode(n.slice(2));if(this.isAbsoluteIri(n))return new qn.IRI(n);let s=this.expandTerm(n,t);return new qn.IRI(s)}return new _d.BlankNode(`jsonld_${i}`)}collectTypeTriples(e,t,i,n){let s=li.Namespace.RDF.term("type");(Array.isArray(t)?t:[t]).forEach(c=>{if(typeof c!="string")throw new Error("Invalid @type value in JSON-LD node");let u=this.expandTerm(c,n);i.push(new bs.Triple(e,s,new qn.IRI(u)))})}collectTriplesForValue(e,t,i,n,s){if(i!=null){if(Array.isArray(i)){i.forEach(a=>this.collectTriplesForValue(e,t,a,n,s));return}if(typeof i=="object"){let a=i;if(typeof a["@id"]=="string"){let c=this.parseIdNode(a["@id"],s);n.push(new bs.Triple(e,t,c));return}if(a["@value"]!==void 0){let c=this.parseLiteralObject(a,s);n.push(new bs.Triple(e,t,c));return}}if(typeof i=="string"){n.push(new bs.Triple(e,t,new Ss.Literal(i)));return}if(typeof i=="number"){let a=Number.isInteger(i)?li.Namespace.XSD.term("integer"):li.Namespace.XSD.term("decimal");n.push(new bs.Triple(e,t,new Ss.Literal(i.toString(),a)));return}if(typeof i=="boolean"){let a=li.Namespace.XSD.term("boolean");n.push(new bs.Triple(e,t,new Ss.Literal(i.toString(),a)));return}throw new Error("Unsupported JSON-LD value encountered")}}parseIdNode(e,t){if(e.startsWith("_:"))return new _d.BlankNode(e.slice(2));if(this.isAbsoluteIri(e))return new qn.IRI(e);let i=this.expandTerm(e,t);return new qn.IRI(i)}parseLiteralObject(e,t){let i=e["@value"];if(typeof i!="string")throw new Error("JSON-LD literal values must be strings");if(typeof e["@language"]=="string")return new Ss.Literal(i,void 0,e["@language"]);if(typeof e["@type"]=="string"){let n=this.expandTerm(e["@type"],t);return new Ss.Literal(i,new qn.IRI(n))}return new Ss.Literal(i)}expandTerm(e,t){if(this.isAbsoluteIri(e))return e;let i=e.indexOf(":");if(i>0){let s=e.slice(0,i),a=e.slice(i+1),c=t[s];if(!c)throw new Error(`Unknown prefix "${s}" in JSON-LD document`);return`${c}${a}`}let n=t["@vocab"];if(n)return`${n}${e}`;throw new Error(`Unable to expand JSON-LD term "${e}"`)}isAbsoluteIri(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)}buildJsonLdChunks(e){let t=[],i=JSON.stringify(e["@context"]);return t.push(`{"@context":${i},"@graph":[`),e["@graph"].forEach((n,s)=>{let a=JSON.stringify(n);s>0?t.push(`,${a}`):t.push(a)}),t.push(`]}
`),t}};Vc.RDFSerializer=vd});var j0=y(Xi=>{"use strict";Object.defineProperty(Xi,"__esModule",{value:!0});Xi.TransactionError=Xi.TripleNotFoundError=Xi.TripleAlreadyExistsError=void 0;var bd=class extends Error{static{o(this,"TripleAlreadyExistsError")}constructor(e){super(`Triple already exists: ${e.toString()}`),this.name="TripleAlreadyExistsError"}};Xi.TripleAlreadyExistsError=bd;var Sd=class extends Error{static{o(this,"TripleNotFoundError")}constructor(e){super(`Triple not found: ${e.toString()}`),this.name="TripleNotFoundError"}};Xi.TripleNotFoundError=Sd;var wd=class extends Error{static{o(this,"TransactionError")}constructor(e){super(e),this.name="TransactionError"}};Xi.TransactionError=wd});var Td=y(Uc=>{"use strict";Object.defineProperty(Uc,"__esModule",{value:!0});Uc.LRUCache=void 0;var Ed=class{static{o(this,"LRUCache")}constructor(e){this.maxSize=e,this.cache=new Map}get(e){let t=this.cache.get(e);return t!==void 0&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){let i=this.cache.keys().next().value;i!==void 0&&this.cache.delete(i)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}};Uc.LRUCache=Ed});var M0=y(Bc=>{"use strict";Object.defineProperty(Bc,"__esModule",{value:!0});Bc.InMemoryTripleStore=void 0;var Zi=j0(),NT=xt(),kT=oi(),jT=Gt(),MT=Td(),xd=class{static{o(this,"InMemoryTripleStore")}constructor(){this.triples=new Map,this.spo=new Map,this.sop=new Map,this.pso=new Map,this.pos=new Map,this.osp=new Map,this.ops=new Map,this.queryCache=new MT.LRUCache(1e3)}async add(e){let t=this.getTripleKey(e);if(this.triples.has(t))return;this.triples.set(t,e);let i=this.getNodeKey(e.subject),n=this.getNodeKey(e.predicate),s=this.getNodeKey(e.object);this.addToIndex(this.spo,i,n,s),this.addToIndex(this.sop,i,s,n),this.addToIndex(this.pso,n,i,s),this.addToIndex(this.pos,n,s,i),this.addToIndex(this.osp,s,i,n),this.addToIndex(this.ops,s,n,i),this.queryCache.clear()}async remove(e){let t=this.getTripleKey(e);if(!this.triples.has(t))return!1;this.triples.delete(t);let i=this.getNodeKey(e.subject),n=this.getNodeKey(e.predicate),s=this.getNodeKey(e.object);return this.removeFromIndex(this.spo,i,n,s),this.removeFromIndex(this.sop,i,s,n),this.removeFromIndex(this.pso,n,i,s),this.removeFromIndex(this.pos,n,s,i),this.removeFromIndex(this.osp,s,i,n),this.removeFromIndex(this.ops,s,n,i),this.queryCache.clear(),!0}async has(e){let t=this.getTripleKey(e);return this.triples.has(t)}async match(e,t,i){let n=this.getMatchCacheKey(e,t,i),s=this.queryCache.get(n);if(s!==void 0)return s;let a;return!e&&!t&&!i?a=Array.from(this.triples.values()):e&&t&&i?a=this.matchSPO(e,t,i):e&&t?a=this.matchSP(e,t):e&&i?a=this.matchSO(e,i):t&&i?a=this.matchPO(t,i):e?a=this.matchS(e):t?a=this.matchP(t):i?a=this.matchO(i):a=[],this.queryCache.set(n,a),a}async addAll(e){for(let t of e)await this.add(t)}async removeAll(e){let t=0;for(let i of e)await this.remove(i)&&t++;return t}async clear(){this.triples.clear(),this.spo.clear(),this.sop.clear(),this.pso.clear(),this.pos.clear(),this.osp.clear(),this.ops.clear(),this.queryCache.clear()}async count(){return this.triples.size}async subjects(){let e=new Set;for(let t of this.triples.values())e.add(t.subject);return Array.from(e)}async predicates(){let e=new Set;for(let t of this.triples.values())e.add(t.predicate);return Array.from(e)}async objects(){let e=new Set;for(let t of this.triples.values())e.add(t.object);return Array.from(e)}async beginTransaction(){return new Ad(this)}matchSPO(e,t,i){let n=this.getNodeKey(e),s=this.getNodeKey(t),a=this.getNodeKey(i),c=this.spo.get(n);if(!c)return[];let u=c.get(s);if(!u)return[];if(u.has(a)){let f=this.buildTripleKey(n,s,a),l=this.triples.get(f);return l?[l]:[]}return[]}matchSP(e,t){let i=this.getNodeKey(e),n=this.getNodeKey(t),s=this.spo.get(i);if(!s)return[];let a=s.get(n);return a?this.getTriplesByKeys(Array.from(a).map(c=>this.buildTripleKey(i,n,c))):[]}matchSO(e,t){let i=this.getNodeKey(e),n=this.getNodeKey(t),s=this.sop.get(i);if(!s)return[];let a=s.get(n);return a?this.getTriplesByKeys(Array.from(a).map(c=>this.buildTripleKey(i,c,n))):[]}matchPO(e,t){let i=this.getNodeKey(e),n=this.getNodeKey(t),s=this.pos.get(i);if(!s)return[];let a=s.get(n);return a?this.getTriplesByKeys(Array.from(a).map(c=>this.buildTripleKey(c,i,n))):[]}matchS(e){let t=this.getNodeKey(e),i=this.spo.get(t);if(!i)return[];let n=[];for(let[s,a]of i.entries())for(let c of a)n.push(this.buildTripleKey(t,s,c));return this.getTriplesByKeys(n)}matchP(e){let t=this.getNodeKey(e),i=this.pso.get(t);if(!i)return[];let n=[];for(let[s,a]of i.entries())for(let c of a)n.push(this.buildTripleKey(s,t,c));return this.getTriplesByKeys(n)}matchO(e){let t=this.getNodeKey(e),i=this.osp.get(t);if(!i)return[];let n=[];for(let[s,a]of i.entries())for(let c of a)n.push(this.buildTripleKey(s,c,t));return this.getTriplesByKeys(n)}getTriplesByKeys(e){let t=[];for(let i of e){let n=this.triples.get(i);n&&t.push(n)}return t}addToIndex(e,t,i,n){e.has(t)||e.set(t,new Map);let s=e.get(t);s.has(i)||s.set(i,new Set),s.get(i).add(n)}removeFromIndex(e,t,i,n){let s=e.get(t);if(!s)return;let a=s.get(i);a&&(a.delete(n),a.size===0&&s.delete(i),s.size===0&&e.delete(t))}getTripleKey(e){let t=this.getNodeKey(e.subject),i=this.getNodeKey(e.predicate),n=this.getNodeKey(e.object);return this.buildTripleKey(t,i,n)}buildTripleKey(e,t,i){return`${e}|${t}|${i}`}getNodeKey(e){if(e instanceof NT.IRI)return`i:${e.value}`;if(e instanceof kT.BlankNode)return`b:${e.id}`;if(e instanceof jT.Literal){let t=`l:${e.value}`;return e.datatype?t+=`^^${e.datatype.value}`:e.language&&(t+=`@${e.language}`),t}return""}getMatchCacheKey(e,t,i){let n=e?this.getNodeKey(e):"?",s=t?this.getNodeKey(t):"?",a=i?this.getNodeKey(i):"?";return`${n}|${s}|${a}`}};Bc.InMemoryTripleStore=xd;var Ad=class{static{o(this,"InMemoryTransaction")}constructor(e){this.store=e,this.operations=[],this.committed=!1,this.rolledBack=!1}async add(e){if(this.committed)throw new Zi.TransactionError("Transaction already committed");if(this.rolledBack)throw new Zi.TransactionError("Transaction already rolled back");this.operations.push({type:"add",triple:e})}async remove(e){if(this.committed)throw new Zi.TransactionError("Transaction already committed");if(this.rolledBack)throw new Zi.TransactionError("Transaction already rolled back");return this.operations.push({type:"remove",triple:e}),!0}async commit(){if(this.committed)throw new Zi.TransactionError("Transaction already committed");if(this.rolledBack)throw new Zi.TransactionError("Transaction already rolled back");for(let e of this.operations)e.type==="add"?await this.store.add(e.triple):await this.store.remove(e.triple);this.committed=!0,this.operations=[]}async rollback(){if(this.committed)throw new Zi.TransactionError("Transaction already committed");if(this.rolledBack)throw new Zi.TransactionError("Transaction already rolled back");this.operations=[],this.rolledBack=!0}}});var q0=y($c=>{"use strict";Object.defineProperty($c,"__esModule",{value:!0});$c.RDFVocabularyMapper=void 0;var hr=An(),L0=xt(),he=Fi(),Od=class{static{o(this,"RDFVocabularyMapper")}constructor(){this.propertyMappings=new Map([["exo__Instance_class",he.Namespace.RDF.term("type")],["exo__Asset_isDefinedBy",he.Namespace.RDFS.term("isDefinedBy")],["exo__Class_superClass",he.Namespace.RDFS.term("subClassOf")],["exo__Property_range",he.Namespace.RDFS.term("range")],["exo__Property_domain",he.Namespace.RDFS.term("domain")],["exo__Property_superProperty",he.Namespace.RDFS.term("subPropertyOf")]])}generateClassHierarchyTriples(){let e=[];return e.push(new hr.Triple(he.Namespace.EXO.term("Asset"),he.Namespace.RDFS.term("subClassOf"),he.Namespace.RDFS.term("Resource"))),e.push(new hr.Triple(he.Namespace.EXO.term("Class"),he.Namespace.RDFS.term("subClassOf"),he.Namespace.RDFS.term("Class"))),e.push(new hr.Triple(he.Namespace.EXO.term("Property"),he.Namespace.RDFS.term("subClassOf"),he.Namespace.RDF.term("Property"))),e.push(new hr.Triple(he.Namespace.EMS.term("Task"),he.Namespace.RDFS.term("subClassOf"),he.Namespace.EXO.term("Asset"))),e.push(new hr.Triple(he.Namespace.EMS.term("Project"),he.Namespace.RDFS.term("subClassOf"),he.Namespace.EXO.term("Asset"))),e.push(new hr.Triple(he.Namespace.EMS.term("Area"),he.Namespace.RDFS.term("subClassOf"),he.Namespace.EXO.term("Asset"))),e}generatePropertyHierarchyTriples(){let e=[];return e.push(new hr.Triple(he.Namespace.EXO.term("Instance_class"),he.Namespace.RDFS.term("subPropertyOf"),he.Namespace.RDF.term("type"))),e.push(new hr.Triple(he.Namespace.EXO.term("Asset_isDefinedBy"),he.Namespace.RDFS.term("subPropertyOf"),he.Namespace.RDFS.term("isDefinedBy"))),e.push(new hr.Triple(he.Namespace.EXO.term("Class_superClass"),he.Namespace.RDFS.term("subPropertyOf"),he.Namespace.RDFS.term("subClassOf"))),e.push(new hr.Triple(he.Namespace.EXO.term("Property_range"),he.Namespace.RDFS.term("subPropertyOf"),he.Namespace.RDFS.term("range"))),e.push(new hr.Triple(he.Namespace.EXO.term("Property_domain"),he.Namespace.RDFS.term("subPropertyOf"),he.Namespace.RDFS.term("domain"))),e.push(new hr.Triple(he.Namespace.EXO.term("Property_superProperty"),he.Namespace.RDFS.term("subPropertyOf"),he.Namespace.RDFS.term("subPropertyOf"))),e}generateMappedTriple(e,t,i){let n=this.propertyMappings.get(t);if(!n)return null;let s;if(i instanceof L0.IRI)s=i;else{let a=i.match(/^(ems|exo)__(.+)$/);if(a){let[,c,u]=a;s=(c==="ems"?he.Namespace.EMS:he.Namespace.EXO).term(u)}else s=new L0.IRI(i)}return new hr.Triple(e,n,s)}hasMappingFor(e){return this.propertyMappings.has(e)}};$c.RDFVocabularyMapper=Od});var Fd=y(Yr=>{"use strict";var LT=Yr&&Yr.__decorate||function(r,e,t,i){var n=arguments.length,s=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(r,e,t,i);else for(var c=r.length-1;c>=0;c--)(a=r[c])&&(s=(n<3?a(s):n>3?a(e,t,s):a(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},qT=Yr&&Yr.__metadata||function(r,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(r,e)},VT=Yr&&Yr.__param||function(r,e){return function(t,i){e(t,i,r)}};Object.defineProperty(Yr,"__esModule",{value:!0});Yr.NoteToRDFConverter=void 0;var V0=Ke(),U0=An(),UT=xt(),Vn=Gt(),en=Fi(),BT=Xe(),Cd=class{static{o(this,"NoteToRDFConverter")}constructor(e){this.vault=e,this.OBSIDIAN_VAULT_SCHEME="obsidian://vault/"}async convertNote(e){let t=this.vault.getFrontmatter(e);if(!t)return[];let i=[],n=this.notePathToIRI(e.path);for(let[s,a]of Object.entries(t)){if(!this.isExocortexProperty(s))continue;let c=this.propertyKeyToIRI(s),u=Array.isArray(a)?a:[a];for(let f of u){let l=await this.valueToRDFObject(f,e);i.push(new U0.Triple(n,c,l))}if(s==="exo__Instance_class")for(let f of u){let l=this.expandClassValue(f);if(l){let h=en.Namespace.RDF.term("type");i.push(new U0.Triple(n,h,l))}}}return i}async convertVault(){let e=this.vault.getAllFiles(),t=[];for(let i of e)try{let n=await this.convertNote(i);t.push(...n)}catch(n){throw console.error(`\u274C Error converting note: ${i.path}`),console.error(`   Error: ${n instanceof Error?n.message:String(n)}`),n}return t}notePathToIRI(e){let t=encodeURIComponent(e);return new UT.IRI(`${this.OBSIDIAN_VAULT_SCHEME}${t}`)}isExocortexProperty(e){return e.startsWith("exo__")||e.startsWith("ems__")}propertyKeyToIRI(e){if(e.startsWith("exo__")){let t=e.substring(5);return en.Namespace.EXO.term(t)}if(e.startsWith("ems__")){let t=e.substring(5);return en.Namespace.EMS.term(t)}throw new Error(`Invalid property key: ${e}`)}async valueToRDFObject(e,t){if(typeof e=="string"){let i=this.removeQuotes(e),n=this.extractWikilink(i);if(n){let s=this.vault.getFirstLinkpathDest(n,t.path);return s?this.notePathToIRI(s.path):new Vn.Literal(i)}if(this.isClassReference(i)){let s=this.expandClassValue(i);if(s)return s}return this.isISO8601DateTime(i)?new Vn.Literal(i,en.Namespace.XSD.term("dateTime")):new Vn.Literal(i)}return typeof e=="boolean"?new Vn.Literal(e.toString()):typeof e=="number"?new Vn.Literal(e.toString(),en.Namespace.XSD.term("decimal")):e instanceof Date?new Vn.Literal(e.toISOString(),en.Namespace.XSD.term("dateTime")):new Vn.Literal(String(e))}isISO8601DateTime(e){return/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(\.\d{1,3})?(Z|[+-]\d{2}:\d{2})?$/.test(e)}removeQuotes(e){let t=e.trim();return t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'")?t.substring(1,t.length-1):e}extractWikilink(e){let t=e.match(/^\[\[([^\]]+)\]\]$/);return t?t[1]:null}isClassReference(e){return(e.startsWith("ems__")||e.startsWith("exo__"))&&!/\s/.test(e)}expandClassValue(e){let t=this.removeQuotes(e);if(t.startsWith("ems__")){let i=t.substring(5);return en.Namespace.EMS.term(i)}if(t.startsWith("exo__")){let i=t.substring(5);return en.Namespace.EXO.term(i)}return null}};Yr.NoteToRDFConverter=Cd;Yr.NoteToRDFConverter=Cd=LT([(0,V0.injectable)(),VT(0,(0,V0.inject)(BT.DI_TOKENS.IVaultAdapter)),qT("design:paramtypes",[Object])],Cd)});var Pd=y((hN,B0)=>{var ws=class{static{o(this,"Wildcard")}constructor(){return $T||this}equals(e){return e&&this.termType===e.termType}};Object.defineProperty(ws.prototype,"value",{enumerable:!0,value:"*"});Object.defineProperty(ws.prototype,"termType",{enumerable:!0,value:"Wildcard"});var $T=new ws;B0.exports.Wildcard=ws});var G0=y((pN,$0)=>{var GT=(function(){var r=o(function(T,E,O,P){for(O=O||{},P=T.length;P--;O[T[P]]=E);return O},"o"),e=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],t=[2,247],i=[100,110,113,115,116,123,126,131,329,330,331,332,333],n=[2,409],s=[1,18],a=[1,27],c=[13,16,45,197,224,229,308],u=[28,29,53],f=[28,53],l=[1,42],h=[1,45],p=[1,41],g=[1,44],v=[123,126],S=[1,67],A=[39,45,87],F=[13,16,45,197,224,308],D=[1,87],U=[2,281],H=[1,86],ne=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Fe=[6,28,29,53,63,70,73,81,83,85],it=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],pt=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],V=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],ce=[13,16,308],Ae=[112,132,327,334],Qe=[13,16,112,132,308],Be=[1,111],We=[1,117],Pe=[112,132,327,328,334],Ie=[13,16,112,132,308,328],Ce=[28,29,45,53,87],$=[1,138],I=[1,151],Ne=[1,128],qe=[1,127],j=[1,129],le=[1,140],be=[1,141],B=[1,142],Se=[1,143],we=[1,144],ge=[1,145],Ee=[1,147],ue=[1,148],ye=[2,457],fe=[1,158],_e=[1,159],Te=[1,160],Q=[1,152],ee=[1,153],te=[1,156],J=[1,171],X=[1,172],Z=[1,173],Y=[1,174],re=[1,175],ie=[1,176],se=[1,167],G=[1,168],W=[1,169],ae=[1,170],De=[1,157],Oe=[1,166],xe=[1,161],_=[1,162],b=[1,163],w=[1,164],C=[1,165],q=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],$e=[1,195],ze=[6,31,73,81,83,85],me=[2,285],N=[1,199],k=[1,201],M=[6,31,70,73,81,83,85],L=[2,283],de=[1,207],ke=[1,218],je=[1,223],wt=[1,219],Zt=[1,225],cr=[1,226],Vt=[1,224],Om=[6,63,70,73,81,83,85],Cm=[1,236],Fm=[2,334],Pm=[1,243],Dm=[1,241],Et=[6,193],mo=[2,349],Rm=[2,339],Gi=[28,128],Im=[47,48,193,272],go=[47,48,193,242,272],Zn=[47,48,193,242,246,272],es=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],mt=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],Nm=[1,271],km=[1,270],ot=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],jm=[1,281],Mm=[1,280],Ut=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Js=[45,89],yo=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],_o=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],vo=[31,89],bo=[48,87],gn=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],ti=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],Lm=[1,313],ts=[6,85],yl=[6,31,81,83,85],qm=[2,361],bi=[2,353],yn=[1,343],Xs=[31,112,335],Si=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],_l=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],Vm=[6,109,193],_n=[31,112],ct=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],vl=[1,390],bl=[1,391],Wi=[13,16,87,197,308,314],Um=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],So=[1,417],wo=[1,418],Bm=[13,16,48,197,229,308],Hi=[6,31,85],$m=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],Sl=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],vn=[29,31,85,112,159,160,161,163,164],Eo=[1,443],To=[1,444],Gm=[1,449],bn=[31,112,193,232,318,335],xo=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Wm=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],wl=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Zs=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],ea=[31,45],Hm=[1,507],zm=[1,508],Km=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],Ao=[29,31,85,112,159,160,161,163,164,335],Sn=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],Ym=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Qm=[2,352],El=[13,16,197,308,314],Jm=[1,565],rs=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],Xm=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],wi=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Zm=[13,16,87,308],Ei=[2,364],is=[29,31,85,112,159,160,161,163,164,193,232,318,335],Oo=[31,112,193,232,272,318,335],Ti=[2,359],e1=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Co=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],t1=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],r1=[2,347],Tl={trace:o(function(){},"trace"),yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:o(function(E,O,P,z,pe,d,$t){var m=d.length-1;switch(pe){case 1:if(d[m-1]=d[m-1]||{},ve.base&&(d[m-1].base=ve.base),ve.base="",d[m-1].prefixes=ve.prefixes,ve.prefixes=null,ve.pathOnly){if(d[m-1].type==="path"||"termType"in d[m-1])return d[m-1];throw new Error("Received full SPARQL query in path only mode")}else if(d[m-1].type==="path"||"termType"in d[m-1])throw new Error("Received only path in full SPARQL mode");if(d[m-1].type==="update"){let Ge={};for(let Je of d[m-1].updates)if(Je.updateType==="insert"){let Me={};for(let Ue of Je.insert)if(Ue.type==="bgp"||Ue.type==="graph")for(let er of Ue.triples)er.subject.termType==="BlankNode"&&(Me[er.subject.value]=!0),er.predicate.termType==="BlankNode"&&(Me[er.predicate.value]=!0),er.object.termType==="BlankNode"&&(Me[er.object.value]=!0);for(let Ue of Object.keys(Me)){if(Ge[Ue])throw new Error("Detected reuse blank node across different INSERT DATA clauses");Ge[Ue]=!0}}}return d[m-1];case 2:this.$={...d[m-1],...d[m],type:"query"};break;case 4:ve.base=ta(d[m]);break;case 5:ve.prefixes||(ve.prefixes={}),d[m-1]=d[m-1].substr(0,d[m-1].length-1),d[m]=ta(d[m]),ve.prefixes[d[m-1]]=d[m];break;case 6:this.$={...d[m-3],...Tn(d[m-2]),...d[m-1],...d[m]};break;case 7:if(!ve.skipValidation&&(Rl(d[m-3].variables.map(Je=>Dl(Je.expression))).some(Je=>Je.aggregation==="count"&&!(Je.expression instanceof Fo))||d[m].group)){for(let Je of d[m-3].variables)if(Je.termType==="Variable"){if(!d[m].group||!d[m].group.map(Me=>os(Me)).includes(os(Je)))throw Error("Projection of ungrouped variable (?"+os(Je)+")")}else if(Dl(Je.expression).length===0){let Me=Zv(Je.expression);for(let Ue of Me)if(!d[m].group||!d[m].group.map||!d[m].group.map(er=>os(er)).includes(os(Ue)))throw Error("Use of ungrouped variable in projection of operation (?"+os(Ue)+")")}}let si=d[m-1].where.filter(Ge=>Ge.type==="query");if(si.length>0){let Ge=d[m-3].variables.filter(Me=>Me.variable&&Me.variable.value).map(Me=>Me.variable.value),Je=Rl(si.map(Me=>Me.variables)).map(Me=>Me.value||Me.variable.value);for(let Me of Ge)if(Je.indexOf(Me)>=0)throw Error("Target id of 'AS' (?"+Me+") already used in subquery")}this.$=nt(d[m-3],Tn(d[m-2]),d[m-1],d[m]);break;case 8:this.$=nt({queryType:"CONSTRUCT",template:d[m-3]},Tn(d[m-2]),d[m-1],d[m]);break;case 9:this.$=nt({queryType:"CONSTRUCT",template:d[m-2]=d[m-2]?d[m-2].triples:[]},Tn(d[m-5]),{where:[{type:"bgp",triples:En([],d[m-2])}]},d[m]);break;case 10:this.$=nt({queryType:"DESCRIBE",variables:d[m-3]==="*"?[new Fo]:d[m-3]},Tn(d[m-2]),d[m-1],d[m]);break;case 11:this.$=nt({queryType:"ASK"},Tn(d[m-2]),d[m-1],d[m]);break;case 12:this.$=nt(d[m-1],{variables:[new Fo]});break;case 13:let aa=d[m].map(Ge=>Ge.value||Ge.variable.value),cs=eb(aa);if(cs.length>0)throw Error("Two or more of the resulting columns have the same name (?"+cs[0]+")");this.$=nt(d[m-1],{variables:d[m]});break;case 14:this.$=nt({queryType:"SELECT"},d[m]&&(d[m-1]=Bt(d[m]),d[m]={},d[m][d[m-1]]=!0,d[m]));break;case 16:case 27:this.$=ns(d[m-3],{variable:d[m-1]});break;case 17:case 18:this.$=nt(d[m-3],d[m-2],d[m-1],d[m],{type:"query"});break;case 19:case 58:this.$={iri:d[m],named:!!d[m-1]};break;case 20:this.$={where:d[m].patterns};break;case 21:this.$=nt(d[m-1],d[m]);break;case 22:this.$=nt(d[m-2],d[m-1],d[m]);break;case 23:this.$={group:d[m]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=ns(d[m]);break;case 26:this.$=ns(d[m-1]);break;case 29:this.$={having:d[m]};break;case 30:this.$={order:d[m]};break;case 32:this.$=ns(d[m],{descending:!0});break;case 35:this.$={limit:as(d[m])};break;case 36:this.$={offset:as(d[m])};break;case 37:this.$={limit:as(d[m-2]),offset:as(d[m])};break;case 38:this.$={limit:as(d[m]),offset:as(d[m-2])};break;case 39:case 43:this.$={type:"values",values:d[m]};break;case 40:case 84:this.$=d[m-1].map(Ge=>({[d[m-3]]:Ge}));break;case 41:case 85:this.$=d[m-1].map(()=>({}));break;case 42:case 86:var ni=d[m-4].length;d[m-4]=d[m-4].map(xl),this.$=d[m-1].map(function(Ge){if(Ge.length!==ni)throw Error("Inconsistent VALUES length");for(var Je={},Me=0;Me<ni;Me++)Je["?"+d[m-4][Me].value]=Ge[Me];return Je});break;case 44:case 65:case 100:case 126:case 175:this.$=d[m-1];break;case 45:this.$={type:"update",updates:xi(d[m-2],d[m-1])};break;case 46:this.$=nt({type:"load",silent:!!d[m-2],source:d[m-1]},d[m]&&{destination:d[m]});break;case 47:this.$={type:Bt(d[m-2]),silent:!!d[m-1],graph:d[m]};break;case 48:this.$={type:Bt(d[m-4]),silent:!!d[m-3],source:d[m-2],destination:d[m]};break;case 49:this.$={type:"create",silent:!!d[m-2],graph:{type:"graph",name:d[m]}};break;case 50:this.$={updateType:"insert",insert:d1(d[m])};break;case 51:this.$={updateType:"delete",delete:kl(d1(d[m]))};break;case 52:this.$={updateType:"deletewhere",delete:kl(d[m])};break;case 53:this.$={updateType:"insertdelete",...d[m-4],...d[m-3],...Tn(d[m-2],"using"),where:d[m].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=d[m];break;case 55:this.$={delete:kl(d[m-1]),insert:d[m]||[]};break;case 56:this.$={delete:[],insert:d[m]};break;case 59:this.$={graph:d[m]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:d[m]};break;case 64:this.$={[Bt(d[m])]:!0};break;case 66:this.$=d[m-1]?ri(d[m],[d[m-1]]):ri(d[m]);break;case 67:var na=nt(d[m-3]||{triples:[]},{type:"graph",name:d[m-5]});this.$=d[m]?[na,d[m]]:[na];break;case 68:case 73:this.$={type:"bgp",triples:ri(d[m-2],[d[m-1]])};break;case 69:this.$={type:"group",patterns:[d[m-1]]};break;case 70:for(let Ge of d[m-1].filter(Je=>Je.type==="bind")){let Je=d[m-1].indexOf(Ge),Me=new Set;for(let Ue of d[m-1].slice(0,Je))(Ue.type==="group"||Ue.type==="bgp")&&f1(Ue).forEach(er=>Me.add(er));if(Me.has(Ge.variable.value))throw Error("Variable used to bind is already bound (?"+Ge.variable.value+")")}this.$={type:"group",patterns:d[m-1]};break;case 71:this.$=d[m-1]?ri([d[m-1]],d[m]):ri(d[m]);break;case 72:this.$=d[m]?[d[m-2],d[m]]:d[m-2];break;case 75:this.$=nt(d[m],{type:"optional"});break;case 76:this.$=nt(d[m],{type:"minus"});break;case 77:this.$=nt(d[m],{type:"graph",name:d[m-1]});break;case 78:this.$=nt(d[m],{type:"service",name:d[m-1],silent:!!d[m-2]});break;case 79:this.$={type:"filter",expression:d[m]};break;case 80:this.$={type:"bind",variable:d[m-1],expression:d[m-3]};break;case 89:this.$=ia(d[m]);break;case 90:this.$=void 0;break;case 91:this.$=d[m-1].length?{type:"union",patterns:ri(d[m-1].map(Ol),[Ol(d[m])])}:d[m];break;case 95:this.$={...d[m],function:d[m-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:xi(d[m-2],d[m-1]),distinct:!!d[m-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=xi(d[m-2],d[m-1]);break;case 101:this.$=ri(d[m-2],[d[m-1]]);break;case 102:case 112:this.$=Nl(d[m].map(Ge=>nt(Ai(d[m-1]),Ge)));break;case 103:this.$=Nl(En(d[m].map(Ge=>nt(Ai(d[m-1].entity),Ge)),d[m-1].triples));break;case 105:this.$=ri([d[m-1]],d[m]);break;case 106:this.$=ri(d[m]);break;case 107:this.$=Pl(d[m-1],d[m]);break;case 109:case 237:this.$=ve.factory.namedNode($v);break;case 110:case 118:this.$=xi(d[m-1],d[m]);break;case 111:this.$=d[m]?{annotation:d[m],object:d[m-1]}:d[m-1];break;case 113:this.$=d[m]?Nl(En(d[m].map(Ge=>nt(Ai(d[m-1].entity),Ge)),d[m-1].triples)):d[m-1].triples;break;case 114:this.$=Pl(...d[m-1],d[m]);break;case 116:this.$=Pl(...d[m]);break;case 117:case 159:case 163:this.$=[d[m-1],d[m]];break;case 119:this.$=d[m]?{object:d[m-1],annotation:d[m]}:d[m-1];break;case 120:this.$=d[m-1].length?ss("|",xi(d[m-1],d[m])):d[m];break;case 121:this.$=d[m-1].length?ss("/",xi(d[m-1],d[m])):d[m];break;case 122:this.$=d[m]?ss(d[m],[d[m-1]]):d[m-1];break;case 123:this.$=d[m-1]?ss(d[m-1],[d[m]]):d[m];break;case 125:case 131:this.$=ss(d[m-1],[d[m]]);break;case 129:this.$=ss("|",xi(d[m-2],d[m-1]));break;case 132:case 134:this.$=Jv(d[m-1]);break;case 133:case 135:this.$=Xv(d[m-1]);break;case 140:this.$={entity:d[m],triples:[]};break;case 145:this.$=xl(d[m]);break;case 149:this.$=ve.factory.namedNode(i1);break;case 151:case 153:case 158:case 162:this.$=Al(d[m-1],d[m]);break;case 152:this.$=["||",d[m]];break;case 154:this.$=["&&",d[m]];break;case 156:this.$=Tt(d[m-1],[d[m-2],d[m]]);break;case 157:this.$=Tt(d[m-2]?"notin":"in",[d[m-3],d[m]]);break;case 160:this.$=["+",Al(d[m-1],d[m])];break;case 161:var Ro=ii(d[m-1].value.replace("-",""),d[m-1].datatype);this.$=["-",Al(Ro,d[m])];break;case 164:this.$=Tt("UPLUS",[d[m]]);break;case 165:this.$=Tt(d[m-1],[d[m]]);break;case 166:this.$=Tt("UMINUS",[d[m]]);break;case 177:this.$=Tt(Bt(d[m-1]));break;case 178:this.$=Tt(Bt(d[m-3]),[d[m-1]]);break;case 179:this.$=ia(Tt(Bt(d[m-3]),[d[m-1]]));break;case 180:this.$=Tt(Bt(d[m-5]),[d[m-3],d[m-1]]);break;case 181:this.$=Tt(Bt(d[m-7]),[d[m-5],d[m-3],d[m-1]]);break;case 182:this.$=ia(Tt(Bt(d[m-7]),[d[m-5],d[m-3],d[m-1]]));break;case 183:this.$=Tt(Bt(d[m-1]),d[m]);break;case 184:this.$=Tt("bound",[xl(d[m-1])]);break;case 185:this.$=Tt(d[m-1],[]);break;case 186:this.$=Tt(d[m-3],[d[m-1]]);break;case 187:this.$=Tt(d[m-2]?"notexists":"exists",[Ol(d[m])]);break;case 188:case 189:this.$=ns(d[m-1],{type:"aggregate",aggregation:Bt(d[m-4]),distinct:!!d[m-2]});break;case 190:this.$=ns(d[m-2],{type:"aggregate",aggregation:Bt(d[m-5]),distinct:!!d[m-3],separator:typeof d[m-1]=="string"?d[m-1]:" "});break;case 192:this.$=ii(d[m]);break;case 193:this.$=zv(d[m-1],Bt(d[m].substr(1)));break;case 194:this.$=ii(d[m-2],d[m]);break;case 195:case 204:this.$=ii(d[m],n1);break;case 196:case 205:this.$=ii(d[m],s1);break;case 197:case 206:this.$=ii(Bt(d[m]),a1);break;case 200:this.$=ii(d[m].toLowerCase(),Hv);break;case 201:this.$=ii(d[m].substr(1),n1);break;case 202:this.$=ii(d[m].substr(1),s1);break;case 203:this.$=ii(d[m].substr(1).toLowerCase(),a1);break;case 207:case 208:this.$=l1(d[m],1);break;case 209:case 210:this.$=l1(d[m],3);break;case 211:this.$=ve.factory.namedNode(ta(d[m]));break;case 213:var Io=d[m].indexOf(":"),sa=d[m].substr(0,Io),No=ve.prefixes[sa];if(!No)throw new Error("Unknown prefix: "+sa);var tt=ta(No+d[m].substr(Io+1));this.$=ve.factory.namedNode(tt);break;case 214:if(d[m]=d[m].substr(0,d[m].length-1),!(d[m]in ve.prefixes))throw new Error("Unknown prefix: "+d[m]);var tt=ta(ve.prefixes[d[m]]);this.$=ve.factory.namedNode(tt);break;case 215:this.$=ra(d[m].replace(/^(_:)/,""));break;case 216:this.$=ra();break;case 217:case 218:case 232:this.$=ia(Cl(d[m-3],d[m-2],d[m-1]));break;case 230:case 231:this.$=ia(d[m-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:d[m-1].push(d[m]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[d[m]];break;case 308:d[m-3].push(d[m-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:d[m-2].push(d[m-1]);break}},"anonymous"),table:[r(e,t,{3:1,4:2,10:3}),{1:[3]},r(i,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:n,16:n,45:n,197:n,224:n,229:n,308:n,24:[1,13],32:[1,14],36:[1,15],41:s}),r([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:a},{6:[2,239]},r(c,[2,411],{216:28,217:29}),r(u,[2,249],{18:30}),r(u,[2,251],{22:31}),r(f,[2,255],{25:32,27:33,29:[1,34]}),{13:l,16:h,33:35,39:[1,37],44:39,55:40,87:p,139:38,307:43,308:g,323:36},r(u,[2,267],{37:46}),r(v,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:S,87:p},r(A,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),r(e,[2,248]),r(e,[2,245]),r(e,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},r([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),r(F,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:D,29:U,52:84,53:H,56:85},{19:88,28:D,29:U,52:89,53:H,56:85},r(u,[2,253],{26:90}),{28:[1,91],52:92,53:H},r(ne,[2,385],{181:93,182:94,183:95,31:[2,383]}),r(Fe,[2,263],{34:96}),r(Fe,[2,261],{44:39,55:40,307:43,139:97,13:l,16:h,87:p,308:g}),r(Fe,[2,262]),r(it,[2,259]),r(pt,[2,143]),r(pt,[2,144]),r([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),r(V,[2,211]),r(V,[2,212]),r(V,[2,213]),r(V,[2,214]),{19:98,28:D,29:U,52:99,53:H,56:85},{6:[2,309],99:100,193:[1,101]},r(ce,[2,311],{101:102,328:[1,103]}),r(Ae,[2,317],{104:104,328:[1,105]}),r(Qe,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:Be,114:110},{29:Be,114:112},{29:Be,114:113},{118:114,123:[1,115],125:116,126:We},r(Pe,[2,315]),r(Pe,[2,316]),r(Ie,[2,319]),r(Ie,[2,320]),r(Ie,[2,321]),r(v,[2,327]),{13:l,16:h,55:118,307:43,308:g},r(u,[2,12]),r(u,[2,13],{44:66,43:119,45:S,87:p}),r(Ce,[2,269]),r(Ce,[2,15]),{13:l,16:h,44:136,45:$,46:120,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(A,[2,14]),r(A,[2,274]),r(A,[2,271]),r(A,[2,272]),r(e,[2,4]),{13:[1,177]},r(q,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},r(c,[2,410]),r([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:l,16:h,45:[1,193],55:194,197:$e,219:189,220:190,223:191,224:[1,192],307:43,308:g},r(F,[2,419]),r(ze,me,{20:196,59:197,69:198,70:N}),r(u,[2,250]),{29:k,57:200},r(ce,[2,279],{54:202,327:[1,203]}),{29:[2,282]},r(M,L,{23:204,58:205,62:206,63:de}),r(u,[2,252]),{19:208,28:D,29:U,52:209,53:H,56:85},{29:[1,210]},r(f,[2,256]),{31:[1,211]},{31:[2,384]},{13:l,16:h,44:215,45:ke,55:220,82:I,87:p,89:je,145:212,172:221,185:213,187:214,231:wt,236:216,237:222,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,309:Zt,310:cr,311:217,312:Vt},r(Om,[2,265],{56:85,35:227,52:228,19:229,28:D,29:U,53:H}),r(it,[2,260]),r(M,L,{58:205,62:206,23:230,63:de}),r(u,[2,268]),{6:[2,45]},r(e,t,{10:3,4:231}),{13:l,16:h,55:232,307:43,308:g},r(ce,[2,312]),{105:233,112:Cm,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},r(Ae,[2,318]),r(ce,Fm,{108:240,133:242,112:Pm,132:Dm}),r(Qe,[2,323]),{112:[1,244]},{112:[2,325]},r(Et,[2,50]),r(ne,mo,{135:245,136:246,143:247,144:248,31:Rm,112:Rm}),r(Et,[2,51]),r(Et,[2,52]),r(Gi,[2,328],{119:249}),{29:Be,114:250},r(Gi,[2,56]),{29:Be,114:251},r(v,[2,59]),r(Ce,[2,270]),{47:[1,252]},r(Im,[2,150]),r(go,[2,428],{240:253}),r(Zn,[2,430],{244:254}),r(Zn,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),r(es,[2,440],{252:264}),r(mt,[2,448],{260:265}),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,255:154,257:155,264:266,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,255:154,257:155,264:267,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,255:154,257:155,264:268,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(mt,[2,167]),r(mt,[2,168]),r(mt,[2,169]),r(mt,[2,170],{176:269,45:Nm,89:km}),r(mt,[2,171]),r(mt,[2,172]),r(mt,[2,173]),r(mt,[2,174]),{13:l,16:h,44:136,45:$,46:272,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(ot,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:jm,89:Mm,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},r(Ut,[2,192],{292:[1,286],293:[1,287]}),r(Ut,[2,195]),r(Ut,[2,196]),r(Ut,[2,197]),r(Ut,[2,198]),r(Ut,[2,199]),r(Ut,[2,200]),{13:l,16:h,44:39,55:40,82:I,87:p,139:289,172:291,255:154,257:155,266:290,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},r(Js,[2,452]),r(Js,[2,453]),r(Js,[2,454]),r(Js,[2,455]),r(Js,[2,456]),{279:[2,458]},r(yo,[2,207]),r(yo,[2,208]),r(yo,[2,209]),r(yo,[2,210]),r(Ut,[2,201]),r(Ut,[2,202]),r(Ut,[2,203]),r(Ut,[2,204]),r(Ut,[2,205]),r(Ut,[2,206]),r(e,[2,5]),r(_o,[2,297],{88:295}),r(vo,[2,299],{90:296}),{48:[1,297],87:[1,298]},r(bo,[2,301]),r(q,[2,43]),r(q,[2,82]),r(q,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},r(c,[2,412]),r(gn,[2,123]),r(gn,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),r(ti,[2,124]),{13:l,16:h,45:[1,311],55:194,89:[1,310],197:$e,223:312,225:308,226:309,229:Lm,307:43,308:g},r(c,n,{215:10,214:314}),r(ti,[2,236]),r(ti,[2,237]),r(ts,[2,6]),r(yl,[2,287],{60:315,72:316,73:[1,317]}),r(ze,[2,286]),{13:l,16:h,45:$,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,307:43,308:g,346:Oe,347:xe,348:_,349:b,350:w,351:C},r([6,31,63,70,73,81,83,85],[2,20]),r(ne,qm,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:bi,31:bi,85:bi,112:bi,159:bi,160:bi,161:bi,163:bi,164:bi,41:s}),{13:l,16:h,55:331,307:43,308:g},r(ce,[2,280]),r(ts,[2,7]),r(ze,me,{59:197,69:198,20:332,70:N}),r(M,[2,284]),{64:[1,333]},r(M,L,{58:205,62:206,23:334,63:de}),r(u,[2,254]),r(ne,mo,{144:248,30:335,143:336,31:[2,257]}),r(u,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:l,16:h,44:39,55:40,87:p,139:342,186:339,190:340,195:341,197:yn,307:43,308:g},r(Xs,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:l,16:h,87:p,197:yn,308:g}),r(Si,[2,227]),r(Si,[2,228]),r(Si,[2,229]),{13:l,16:h,44:215,45:ke,55:220,82:I,87:p,89:je,172:221,185:351,187:350,200:348,230:347,231:wt,234:349,236:216,237:222,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,309:Zt,310:cr,311:217,312:Vt},{13:l,16:h,44:39,55:40,87:p,139:342,186:352,190:340,195:341,197:yn,307:43,308:g},r(Si,[2,146]),r(Si,[2,147]),r(Si,[2,148]),r(Si,[2,149]),{13:l,16:h,44:354,55:355,82:I,87:p,172:357,237:356,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,309:Zt,310:cr,311:358,312:Vt,313:353},r(_l,[2,215]),r(_l,[2,216]),r(M,L,{58:205,62:206,23:359,63:de}),r(Fe,[2,264]),r(Om,[2,266]),r(ts,[2,11]),r(i,[2,308],{6:[2,310]}),r(Et,[2,313],{102:360,120:361,121:[1,362]}),r(Et,[2,47]),r(Et,[2,63]),r(Et,[2,64]),{13:l,16:h,55:363,307:43,308:g},r(Et,[2,336]),r(Et,[2,337]),r(Et,[2,338]),{109:[1,364]},r(Vm,[2,60]),{13:l,16:h,55:365,307:43,308:g},r(ce,[2,335]),{13:l,16:h,55:366,307:43,308:g},{31:[1,367]},r(_n,[2,341],{137:368}),r(_n,[2,340]),{13:l,16:h,44:215,45:ke,55:220,82:I,87:p,89:je,145:369,172:221,185:213,187:214,231:wt,236:216,237:222,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,309:Zt,310:cr,311:217,312:Vt},{28:[1,370],127:371,128:[1,372]},r(Gi,[2,330],{124:373,125:374,126:We}),r(Gi,[2,57]),{44:375,87:p},r(Im,[2,151],{241:376,242:[1,377]}),r(go,[2,153],{245:378,246:[1,379]}),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,247:380,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},{250:[1,381]},r(ct,[2,432]),r(ct,[2,433]),r(ct,[2,434]),r(ct,[2,435]),r(ct,[2,436]),r(ct,[2,437]),{250:[2,439]},r([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:J,298:X,299:Z,300:Y,301:re,302:ie}),r(es,[2,162],{261:388,262:389,39:vl,338:bl}),r(mt,[2,164]),r(mt,[2,165]),r(mt,[2,166]),r(ot,[2,95]),r(ot,[2,96]),r(ct,[2,377],{177:392,325:[1,393]}),{48:[1,394]},r(ot,[2,177]),{13:l,16:h,44:136,45:$,46:395,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},{13:l,16:h,44:136,45:$,46:396,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},{13:l,16:h,44:136,45:$,46:397,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},{13:l,16:h,44:136,45:$,46:398,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},{13:l,16:h,44:136,45:$,46:399,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(ot,[2,183]),r(ot,[2,98]),r(ct,[2,381],{180:400}),{87:[1,401]},r(ot,[2,185]),{13:l,16:h,44:136,45:$,46:402,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},{29:k,57:403},r(Ut,[2,193]),{13:l,16:h,55:404,307:43,308:g},{13:l,16:h,44:39,55:40,87:p,139:342,195:405,197:yn,307:43,308:g},r(Wi,[2,233]),r(Wi,[2,234]),r(Wi,[2,235]),r(Um,[2,459],{281:406,325:[1,407]}),r(ct,[2,463],{284:408,325:[1,409]}),r(ct,[2,465],{286:410,325:[1,411]}),{13:l,16:h,31:[1,412],55:414,82:I,171:413,172:415,173:416,174:So,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:wo},{31:[1,419],89:[1,420]},{29:[1,421]},r(bo,[2,302]),r(_o,[2,367],{167:422}),r(vo,[2,369],{168:423}),{48:[1,424],87:[1,425]},r(bo,[2,371]),r(gn,[2,122]),r(gn,[2,417]),r(gn,[2,413]),r(gn,[2,414]),r(gn,[2,415]),r(ti,[2,125]),r(ti,[2,127]),r(ti,[2,128]),r(Bm,[2,420],{227:426}),r(ti,[2,130]),{13:l,16:h,55:194,197:$e,223:427,307:43,308:g},{48:[1,428]},r(Hi,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),r(yl,[2,288]),{64:[1,433]},r(ze,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:l,16:h,45:$,268:le,269:be,270:B,271:Se,273:we,274:ge,276:Ee,277:ue,279:ye,280:fe,283:_e,285:Te,308:g,346:Oe,347:xe,348:_,349:b,350:w,351:C}),r($m,[2,293]),r(Sl,[2,92]),r(Sl,[2,93]),r(Sl,[2,94]),{45:Nm,89:km,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:D,29:U,56:85},{19:438,28:D,29:U,56:85},r(vn,[2,355],{149:439}),r(vn,[2,354]),{13:l,16:h,44:215,45:Eo,55:220,82:I,87:p,89:je,156:440,172:221,185:441,203:442,231:To,236:216,237:222,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,309:Zt,310:cr,311:217,312:Vt},r(Fe,[2,19]),r(Hi,[2,21]),{13:l,16:h,44:450,45:Gm,55:323,65:445,66:446,67:447,68:448,87:p,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,307:43,308:g,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(ts,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},r(ne,[2,386],{31:[2,388]}),r(Xs,[2,102]),r(bn,[2,391],{191:452}),r(ne,[2,395],{196:453,198:454}),r(ne,[2,108]),r(ne,[2,109]),r(Xs,[2,103]),r(Xs,[2,104]),r(Xs,[2,390]),{13:l,16:h,44:215,45:ke,48:[1,455],55:220,82:I,87:p,89:je,172:221,185:351,187:350,200:456,231:wt,234:349,236:216,237:222,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,309:Zt,310:cr,311:217,312:Vt},r(xo,[2,424]),r(Wm,[2,136]),r(Wm,[2,137]),r(wl,[2,140]),{232:[1,457]},{13:l,16:h,44:39,55:40,87:p,139:342,195:458,197:yn,307:43,308:g},r(Wi,[2,219]),r(Wi,[2,220]),r(Wi,[2,221]),r(Wi,[2,222]),r(Wi,[2,223]),r(ts,[2,10]),r(Et,[2,46]),r(Et,[2,314]),{112:Cm,122:459},r(Et,[2,62]),r(ce,Fm,{133:242,108:460,112:Pm,132:Dm}),r(Vm,[2,61]),r(Et,[2,49]),r([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},r(_n,[2,351],{146:463,335:[1,464]}),{29:k,57:465},r(Gi,[2,329]),r(ce,[2,332],{129:466,327:[1,467]}),r(Gi,[2,55]),r(Gi,[2,331]),{48:[1,468]},r(go,[2,429]),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(Zn,[2,431]),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,243:470,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(Zn,[2,156]),{45:jm,89:Mm,179:471},r(es,[2,441]),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,251:472,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(mt,[2,444],{256:473}),r(mt,[2,446],{258:474}),r(ct,[2,442]),r(ct,[2,443]),r(mt,[2,449]),{13:l,16:h,44:136,45:$,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,255:154,257:155,259:475,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(ct,[2,450]),r(ct,[2,451]),r(ct,[2,379],{178:476}),r(ct,[2,378]),r([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:l,16:h,44:136,45:$,46:482,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},{48:[1,483]},{48:[1,484]},r(ot,[2,187]),r(Ut,[2,194]),{13:l,16:h,44:39,55:40,82:I,87:p,139:289,172:291,255:154,257:155,266:290,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,320:485},{13:l,16:h,39:[1,487],44:136,45:$,46:488,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,282:486,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(Um,[2,460]),{13:l,16:h,44:136,45:$,46:489,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(ct,[2,464]),{13:l,16:h,44:136,45:$,46:490,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(ct,[2,466]),r(q,[2,40]),r(_o,[2,298]),r(Zs,[2,87]),r(Zs,[2,88]),r(Zs,[2,89]),r(Zs,[2,90]),{13:l,16:h,55:492,82:I,172:493,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,311:494,312:Vt,315:491},r(q,[2,41]),r(vo,[2,300]),r(ea,[2,303],{92:495}),{13:l,16:h,31:[1,496],55:414,82:I,171:497,172:415,173:416,174:So,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:wo},{31:[1,498],89:[1,499]},{29:[1,500]},r(bo,[2,372]),{13:l,16:h,48:[2,422],55:194,197:$e,223:312,226:502,228:501,229:Lm,307:43,308:g},r(ti,[2,131]),r(ti,[2,126]),r(Hi,[2,22]),r(Hi,[2,290]),{82:[1,503]},{82:[1,504]},{13:l,16:h,44:510,45:$,55:323,67:321,68:322,74:505,75:506,76:Hm,77:320,78:zm,79:509,87:p,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,307:43,308:g,346:Oe,347:xe,348:_,349:b,350:w,351:C},r($m,[2,294]),r(Km,[2,69]),r(Km,[2,70]),r(ze,me,{59:197,69:198,20:511,70:N}),r(M,L,{58:205,62:206,23:512,63:de}),{29:[2,375],31:[2,71],84:522,85:a,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},r(vn,[2,363],{157:524,335:[1,525]}),r(c,n,{215:10,202:526,205:527,208:528,214:529,44:530,87:p}),r(Ao,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:n,16:n,45:n,197:n,224:n,229:n,308:n,87:p}),{13:l,16:h,44:215,45:Eo,55:220,82:I,87:p,89:je,172:221,185:351,203:536,212:534,231:To,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,309:Zt,310:cr,311:217,312:Vt},r(c,n,{215:10,205:527,208:528,214:529,44:530,202:537,87:p}),r(M,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:l,16:h,45:Gm,87:p,268:le,269:be,270:B,271:Se,273:we,274:ge,276:Ee,277:ue,279:ye,280:fe,283:_e,285:Te,308:g,346:Oe,347:xe,348:_,349:b,350:w,351:C}),r(Sn,[2,291]),r(Sn,[2,24]),r(Sn,[2,25]),{13:l,16:h,44:136,45:$,46:539,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(Sn,[2,28]),r(M,L,{58:205,62:206,23:540,63:de}),r([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),r(bn,[2,107]),{13:l,16:h,44:215,45:ke,55:220,82:I,87:p,89:je,172:221,185:351,187:350,199:543,200:544,231:wt,234:349,236:216,237:222,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,309:Zt,310:cr,311:217,312:Vt},r(Ym,[2,132]),r(xo,[2,425]),r(Ym,[2,133]),{13:l,16:h,44:354,55:355,82:I,87:p,172:357,237:356,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,309:Zt,310:cr,311:358,312:Vt,313:545},r(Et,[2,54]),r(Et,[2,48]),r(_n,[2,342]),{13:l,16:h,44:39,55:40,87:p,139:546,307:43,308:g},r(_n,[2,68]),r(ne,[2,350],{31:Qm,112:Qm}),r(Et,[2,53]),{13:l,16:h,55:547,307:43,308:g},r(ce,[2,333]),r(Ce,[2,16]),r(go,[2,152]),r(Zn,[2,154]),r(Zn,[2,157]),r(es,[2,159]),r(es,[2,160],{262:389,261:548,39:vl,338:bl}),r(es,[2,161],{262:389,261:549,39:vl,338:bl}),r(mt,[2,163]),{13:l,16:h,44:136,45:$,46:550,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(ot,[2,178]),r(ot,[2,179]),{13:l,16:h,44:136,45:$,46:551,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},{13:l,16:h,44:136,45:$,46:552,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},{13:l,16:h,44:136,45:$,46:553,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},{48:[1,554],272:[1,555]},r(ot,[2,184]),r(ot,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:l,16:h,55:194,197:$e,223:562,307:43,308:g},r(El,[2,224]),r(El,[2,225]),r(El,[2,226]),{31:[1,563],45:Jm,94:564},r(q,[2,84]),r(_o,[2,368]),r(q,[2,85]),r(vo,[2,370]),r(ea,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},r(Hi,[2,35],{83:[1,569]}),r(Hi,[2,36],{81:[1,570]}),r(yl,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:l,16:h,45:$,76:Hm,78:zm,87:p,268:le,269:be,270:B,271:Se,273:we,274:ge,276:Ee,277:ue,279:ye,280:fe,283:_e,285:Te,308:g,346:Oe,347:xe,348:_,349:b,350:w,351:C}),r(rs,[2,295]),{45:$,77:572},{45:$,77:573},r(rs,[2,33]),r(rs,[2,34]),{31:[2,275],50:574,84:575,85:a},{31:[2,277],51:576,84:577,85:a},r(vn,[2,356]),r(Xm,[2,357],{152:578,335:[1,579]}),r(wi,[2,74]),{29:k,57:580},{29:k,57:581},{13:l,16:h,44:39,55:40,87:p,139:582,307:43,308:g},r(Zm,[2,365],{162:583,328:[1,584]}),{13:l,16:h,45:$,55:323,67:321,68:322,77:320,79:585,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,307:43,308:g,346:Oe,347:xe,348:_,349:b,350:w,351:C},{45:[1,586]},r(wi,[2,81]),{29:k,57:587},r(vn,[2,73]),r(ne,[2,362],{29:Ei,31:Ei,85:Ei,112:Ei,159:Ei,160:Ei,161:Ei,163:Ei,164:Ei}),r(Ao,[2,112]),r(is,[2,401],{206:588}),r(ne,[2,405],{209:589,210:590}),r(ne,[2,403]),r(ne,[2,404]),r(Ao,[2,113]),r(Ao,[2,400]),{13:l,16:h,44:215,45:Eo,48:[1,591],55:220,82:I,87:p,89:je,172:221,185:351,203:536,212:592,231:To,234:535,236:216,237:222,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,309:Zt,310:cr,311:217,312:Vt},r(xo,[2,426]),r(wl,[2,138]),r(wl,[2,139]),{232:[1,593]},r(Sn,[2,292]),{47:[1,595],48:[1,594]},r(ts,[2,9]),r(bn,[2,392]),r(bn,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:l,16:h,87:p,197:yn,308:g}),r(bn,[2,110],{272:[1,598]}),r(Oo,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},r(Gi,[2,58]),r(mt,[2,445]),r(mt,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},r(ot,[2,99]),r(ct,[2,382]),r([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),r(ot,[2,188]),r(ot,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:l,16:h,55:492,82:I,172:493,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,311:494,312:Vt,315:611},r(q,[2,42]),r(ea,[2,304]),{13:l,16:h,55:414,82:I,95:612,171:613,172:415,173:416,174:So,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:wo},{31:[1,614],45:Jm,94:615},r(ti,[2,129]),r(Bm,[2,421]),{82:[1,616]},{82:[1,617]},r(rs,[2,296]),r(rs,[2,31]),r(rs,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},r(ne,qm,{155:330,153:618,154:619,29:Ti,31:Ti,85:Ti,112:Ti,159:Ti,160:Ti,161:Ti,163:Ti,164:Ti}),r(Xm,[2,358]),r(wi,[2,75]),r(wi,[2,76]),{29:k,57:620},{13:l,16:h,44:39,55:40,87:p,139:621,307:43,308:g},r(Zm,[2,366]),r(wi,[2,79]),{13:l,16:h,44:136,45:$,46:622,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(wi,[2,91],{336:[1,623]}),r([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),r(is,[2,117]),{13:l,16:h,44:215,45:Eo,55:220,82:I,87:p,89:je,172:221,185:351,203:536,211:626,212:627,231:To,234:535,236:216,237:222,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,309:Zt,310:cr,311:217,312:Vt},r(Si,[2,134]),r(xo,[2,427]),r(Si,[2,135]),r(Sn,[2,26]),{44:628,87:p},r(bn,[2,106]),r(bn,[2,394]),r(ne,[2,396]),r(Oo,[2,111]),r(Oo,[2,398]),{13:l,16:h,44:39,55:40,87:p,139:342,186:629,190:340,195:341,197:yn,307:43,308:g},r(_l,[2,217]),r(ne,mo,{144:248,140:630,143:631,31:[2,343]}),r(ot,[2,97]),r(ct,[2,380]),r(ot,[2,180]),{13:l,16:h,44:136,45:$,46:632,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},{13:l,16:h,44:136,45:$,46:633,55:133,67:132,68:134,77:131,82:I,87:p,172:135,224:Ne,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:qe,264:130,265:j,266:137,267:139,268:le,269:be,270:B,271:Se,273:we,274:ge,275:146,276:Ee,277:ue,278:149,279:ye,280:fe,283:_e,285:Te,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:De,346:Oe,347:xe,348:_,349:b,350:w,351:C},r(ot,[2,190]),{290:[1,634]},{314:[1,635]},{13:l,16:h,48:[1,636],55:414,82:I,171:637,172:415,173:416,174:So,255:154,257:155,291:150,294:Q,295:ee,296:te,297:J,298:X,299:Z,300:Y,301:re,302:ie,303:se,304:G,305:W,306:ae,307:43,308:g,312:wo},r(e1,[2,305]),r(q,[2,86]),r(ea,[2,374]),r(Hi,[2,37]),r(Hi,[2,38]),r(vn,[2,72]),r(vn,[2,360]),r(wi,[2,77]),{29:k,57:638},{47:[1,639]},{29:[2,376]},r(is,[2,402]),r(is,[2,115],{215:10,208:528,214:529,44:530,205:640,13:n,16:n,45:n,197:n,224:n,229:n,308:n,87:p}),r(is,[2,118],{272:[1,641]}),r(Co,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:se,304:G,305:W,306:ae},r(Zs,[2,218]),r(ea,[2,44]),r(e1,[2,306]),r(wi,[2,78]),{44:651,87:p},r(is,[2,116]),r(ne,[2,406]),r(Co,[2,119]),r(Co,[2,408]),r(c,n,{215:10,205:527,208:528,214:529,44:530,202:652,87:p}),r(Sn,[2,27]),r(Oo,[2,230]),r(t1,[2,345],{141:653,335:[1,654]}),r(ot,[2,181]),r(ot,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},r(ne,mo,{144:248,142:657,143:658,31:r1,112:r1}),r(t1,[2,346]),r(wi,[2,80]),r(Co,[2,231]),r(_n,[2,67]),r(_n,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:o(function(E,O){if(O.recoverable)this.trace(E);else{var P=new Error(E);throw P.hash=O,P}},"parseError"),parse:o(function(E){var O=this,P=[0],z=[],pe=[null],d=[],$t=this.table,m="",ni=0,na=0,Ro=0,Io=2,sa=1,No=d.slice.call(arguments,1),tt=Object.create(this.lexer),si={yy:{}};for(var aa in this.yy)Object.prototype.hasOwnProperty.call(this.yy,aa)&&(si.yy[aa]=this.yy[aa]);tt.setInput(E,si.yy),si.yy.lexer=tt,si.yy.parser=this,typeof tt.yylloc>"u"&&(tt.yylloc={});var cs=tt.yylloc;d.push(cs);var Ge=tt.options&&tt.options.ranges;typeof si.yy.parseError=="function"?this.parseError=si.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;function Je(ai){P.length=P.length-2*ai,pe.length=pe.length-ai,d.length=d.length-ai}o(Je,"popStack");for(var Me=o(function(){var ai;return ai=tt.lex()||sa,typeof ai!="number"&&(ai=O.symbols_[ai]||ai),ai},"lex"),Ue,er,xn,yr,aF,jl,us={},ko,Oi,p1,jo;;){if(xn=P[P.length-1],this.defaultActions[xn]?yr=this.defaultActions[xn]:((Ue===null||typeof Ue>"u")&&(Ue=Me()),yr=$t[xn]&&$t[xn][Ue]),typeof yr>"u"||!yr.length||!yr[0]){var Ml="";jo=[];for(ko in $t[xn])this.terminals_[ko]&&ko>Io&&jo.push("'"+this.terminals_[ko]+"'");tt.showPosition?Ml="Parse error on line "+(ni+1)+`:
`+tt.showPosition()+`
Expecting `+jo.join(", ")+", got '"+(this.terminals_[Ue]||Ue)+"'":Ml="Parse error on line "+(ni+1)+": Unexpected "+(Ue==sa?"end of input":"'"+(this.terminals_[Ue]||Ue)+"'"),this.parseError(Ml,{text:tt.match,token:this.terminals_[Ue]||Ue,line:tt.yylineno,loc:cs,expected:jo})}if(yr[0]instanceof Array&&yr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+xn+", token: "+Ue);switch(yr[0]){case 1:P.push(Ue),pe.push(tt.yytext),d.push(tt.yylloc),P.push(yr[1]),Ue=null,er?(Ue=er,er=null):(na=tt.yyleng,m=tt.yytext,ni=tt.yylineno,cs=tt.yylloc,Ro>0&&Ro--);break;case 2:if(Oi=this.productions_[yr[1]][1],us.$=pe[pe.length-Oi],us._$={first_line:d[d.length-(Oi||1)].first_line,last_line:d[d.length-1].last_line,first_column:d[d.length-(Oi||1)].first_column,last_column:d[d.length-1].last_column},Ge&&(us._$.range=[d[d.length-(Oi||1)].range[0],d[d.length-1].range[1]]),jl=this.performAction.apply(us,[m,na,ni,si.yy,yr[1],pe,d].concat(No)),typeof jl<"u")return jl;Oi&&(P=P.slice(0,-1*Oi*2),pe=pe.slice(0,-1*Oi),d=d.slice(0,-1*Oi)),P.push(this.productions_[yr[1]][0]),pe.push(us.$),d.push(us._$),p1=$t[P[P.length-2]][P[P.length-1]],P.push(p1);break;case 3:return!0}}return!0},"parse")},Fo=Pd().Wildcard,Po="http://www.w3.org/1999/02/22-rdf-syntax-ns#",$v=Po+"type",Gv=Po+"first",Wv=Po+"rest",i1=Po+"nil",Do="http://www.w3.org/2001/XMLSchema#",n1=Do+"integer",s1=Do+"decimal",a1=Do+"double",Hv=Do+"boolean",wn="",o1="",c1="";function Bt(T){return T.toLowerCase()}o(Bt,"lowercase");function xi(T,E){return T.push(E),T}o(xi,"appendTo");function En(T,E){return T.push.apply(T,E),T}o(En,"appendAllTo");function nt(T){T||(T={});for(var E=1,O=arguments.length,P;E<O&&(P=arguments[E]||{});E++)for(var z in P)T[z]=P[z];return T}o(nt,"extend");function ri(){for(var T=[],E=0,O=arguments.length;E<O;E++)T=T.concat.apply(T,arguments[E]);return T}o(ri,"unionAll");function ta(T){if(T[0]==="<"&&(T=T.substring(1,T.length-1)),/^[a-z][a-z0-9.+-]*:/i.test(T))return T;if(!ve.base)throw new Error("Cannot resolve relative IRI "+T+" because no base IRI was set.");switch(wn!==ve.base&&(wn=ve.base,o1=wn.replace(/[^\/:]*$/,""),c1=wn.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),T[0]){case void 0:return wn;case"#":return wn+T;case"?":return wn.replace(/(?:\?.*)?$/,T);case"/":return c1+T;default:return o1+T}}o(ta,"resolveIRI");function xl(T){if(T){var E=T[0];if(E==="?"||E==="$")return ve.factory.variable(T.substr(1))}return T}o(xl,"toVar");function Tt(T,E){return{type:"operation",operator:T,args:E||[]}}o(Tt,"operation");function ns(T,E){var O={expression:T==="*"?new Fo:T};if(E)for(var P in E)O[P]=E[P];return O}o(ns,"expression");function ss(T,E){return{type:"path",pathType:T,items:E}}o(ss,"path");function Al(T,E){for(var O=0,P=E.length,z;O<P&&(z=E[O]);O++)T=Tt(z[0],[T,z[1]]);return T}o(Al,"createOperationTree");function Tn(T,E){var O=[],P=[],z=T.length,pe,d={};if(!z)return null;for(var $t=0;$t<z&&(pe=T[$t]);$t++)(pe.named?P:O).push(pe.iri);return d[E||"from"]={default:O,named:P},d}o(Tn,"groupDatasets");function as(T){return parseInt(T,10)}o(as,"toInt");function Ol(T){return T.type==="group"&&T.patterns.length===1?T.patterns[0]:T}o(Ol,"degroupSingle");function ii(T,E){return E&&E.termType!=="NamedNode"&&(E=ve.factory.namedNode(E)),ve.factory.literal(T,E)}o(ii,"createTypedLiteral");function zv(T,E){return ve.factory.literal(T,E)}o(zv,"createLangLiteral");function Cl(T,E,O){if(!("termType"in E))throw new Error("Nested triples cannot contain paths");return ve.factory.quad(T,E,O)}o(Cl,"nestedTriple");function Ai(T,E,O,P){var z={};return T!=null&&(z.subject=T),E!=null&&(z.predicate=E),O!=null&&(z.object=O),P!=null&&(z.annotations=P),z}o(Ai,"triple");function ra(T){return typeof T=="string"?T.startsWith("e_")?ve.factory.blankNode(T):ve.factory.blankNode("e_"+T):ve.factory.blankNode("g_"+u1++)}o(ra,"blank");var u1=0;ve._resetBlanks=function(){u1=0};var Kv=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,Yv={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},Qv=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,Fl=String.fromCharCode;function l1(T,E){T=T.substring(E,T.length-E);try{T=T.replace(Kv,function(O,P,z,pe){var d;if(P){if(d=parseInt(P,16),isNaN(d))throw new Error;return Fl(d)}else if(z){if(d=parseInt(z,16),isNaN(d))throw new Error;return d<65535?Fl(d):Fl(55296+((d-=65536)>>10),56320+(d&1023))}else{var $t=Yv[pe];if(!$t)throw new Error;return $t}})}catch{return""}if(Qv.exec(T))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+T);return T}o(l1,"unescapeString");function Jv(T){var E=ra(),O=E,P=[],z,pe=[];T.forEach(function(ni){P.push(ni.entity),En(pe,ni.triples)});for(var d=0,$t=0,m=P.length,z=Array(m*2);d<m;)z[$t++]=Ai(O,ve.factory.namedNode(Gv),P[d]),z[$t++]=Ai(O,ve.factory.namedNode(Wv),O=++d<m?ra():ve.factory.namedNode(i1));return{entity:E,triples:En(z,pe)}}o(Jv,"createList");function Xv(T){var E=ra();return{entity:E,triples:T.map(function(O){return nt(Ai(E),O)})}}o(Xv,"createAnonymousObject");function Pl(T,E,O){var P=[],z=[];return E.forEach(function(pe){let d=null;pe.annotation&&(d=pe.annotation,pe=pe.object),P.push(Ai(null,T,pe.entity,d)),En(z,pe.triples)}),ri(P,O||[],z)}o(Pl,"objectListToTriples");function nF(T){for(var E=[],O,P=0,z;z=T[P];P++)switch(z.type){case"bgp":z.triples.length&&(O?En(O.triples,z.triples):xi(E,O=z));break;default:(!z.patterns||z.patterns.length>0)&&(xi(E,z),O=null)}return E}o(nF,"mergeAdjacentBGPs");function os(T){return T.variable?T.variable.value:T.value||T.expression.value}o(os,"getExpressionId");function Dl(T){if(!T)return[];if(T.type==="aggregate")return[T];if(T.type==="operation"){let E=[];for(let O of T.args)E.push(...Dl(O));return E}return[]}o(Dl,"getAggregatesOfExpression");function Zv(T){let E=new Set,O=o(function(P){P&&(P.termType==="Variable"?E.add(P):P.type==="operation"&&P.args.forEach(O))},"visitExpression");return O(T),E}o(Zv,"getVariablesFromExpression");function Rl(T,E=1,O=[]){for(let P of T)E>0&&P instanceof Array?Rl(P,E-1,O):O.push(P);return O}o(Rl,"flatten");function Il(T){return T.termType==="Variable"}o(Il,"isVariable");function f1(T){if(T.triples){let E=[];for(let O of T.triples)Il(O.subject)&&E.push(O.subject.value),Il(O.predicate)&&E.push(O.predicate.value),Il(O.object)&&E.push(O.object.value);return E}else if(T.patterns){let E=[];for(let O of T.patterns)E.push(...f1(O));return E}return[]}o(f1,"getBoundVarsFromGroupGraphPattern");function eb(T){let E=T.slice().sort(),O=[];for(let P=0;P<E.length-1;P++)E[P+1]==E[P]&&O.push(E[P]);return O}o(eb,"getDuplicatesInArray");function ia(T){if(!ve.sparqlStar)throw new Error("SPARQL-star support is not enabled");return T}o(ia,"ensureSparqlStar");function h1(T,E,O){for(let P of E){let z=Ai("subject"in P?P.subject:T,P.predicate,P.object);O.push(z),P.annotations&&h1(Cl(T,P.predicate,P.object),P.annotations,O)}}o(h1,"_applyAnnotations");function Nl(T){if(ve.sparqlStar){let E=[];return T.forEach(O=>{let P=Ai(O.subject,O.predicate,O.object);E.push(P),O.annotations&&h1(Cl(O.subject,O.predicate,O.object),O.annotations,E)}),E}return T}o(Nl,"applyAnnotations");function sF(T){if(!ve.sparqlStarNestedQuads)throw new Error("Lenient SPARQL-star support with nested quads is not enabled");return T}o(sF,"ensureSparqlStarNestedQuads");function d1(T){for(let E of T){if(E.type==="graph"&&E.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(E.type==="bgp"||E.type==="graph"){for(let O of E.triples)if(O.subject.termType==="Variable"||O.predicate.termType==="Variable"||O.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return T}o(d1,"ensureNoVariables");function kl(T){for(let E of T)if(E.type==="bgp"){for(let O of E.triples)if(O.subject.termType==="BlankNode"||O.predicate.termType==="BlankNode"||O.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return T}o(kl,"ensureNoBnodes");var tb=(function(){var T={EOF:1,parseError:o(function(O,P){if(this.yy.parser)this.yy.parser.parseError(O,P);else throw new Error(O)},"parseError"),setInput:o(function(E,O){return this.yy=O||this.yy||{},this._input=E,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},"setInput"),input:o(function(){var E=this._input[0];this.yytext+=E,this.yyleng++,this.offset++,this.match+=E,this.matched+=E;var O=E.match(/(?:\r\n?|\n).*/g);return O?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),E},"input"),unput:o(function(E){var O=E.length,P=E.split(/(?:\r\n?|\n)/g);this._input=E+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-O),this.offset-=O;var z=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),P.length-1&&(this.yylineno-=P.length-1);var pe=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:P?(P.length===z.length?this.yylloc.first_column:0)+z[z.length-P.length].length-P[0].length:this.yylloc.first_column-O},this.options.ranges&&(this.yylloc.range=[pe[0],pe[0]+this.yyleng-O]),this.yyleng=this.yytext.length,this},"unput"),more:o(function(){return this._more=!0,this},"more"),reject:o(function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},"reject"),less:o(function(E){this.unput(this.match.slice(E))},"less"),pastInput:o(function(){var E=this.matched.substr(0,this.matched.length-this.match.length);return(E.length>20?"...":"")+E.substr(-20).replace(/\n/g,"")},"pastInput"),upcomingInput:o(function(){var E=this.match;return E.length<20&&(E+=this._input.substr(0,20-E.length)),(E.substr(0,20)+(E.length>20?"...":"")).replace(/\n/g,"")},"upcomingInput"),showPosition:o(function(){var E=this.pastInput(),O=new Array(E.length+1).join("-");return E+this.upcomingInput()+`
`+O+"^"},"showPosition"),test_match:o(function(E,O){var P,z,pe;if(this.options.backtrack_lexer&&(pe={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(pe.yylloc.range=this.yylloc.range.slice(0))),z=E[0].match(/(?:\r\n?|\n).*/g),z&&(this.yylineno+=z.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:z?z[z.length-1].length-z[z.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+E[0].length},this.yytext+=E[0],this.match+=E[0],this.matches=E,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(E[0].length),this.matched+=E[0],P=this.performAction.call(this,this.yy,this,O,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),P)return P;if(this._backtrack){for(var d in pe)this[d]=pe[d];return!1}return!1},"test_match"),next:o(function(){if(this.done)return this.EOF;this._input||(this.done=!0);var E,O,P,z;this._more||(this.yytext="",this.match="");for(var pe=this._currentRules(),d=0;d<pe.length;d++)if(P=this._input.match(this.rules[pe[d]]),P&&(!O||P[0].length>O[0].length)){if(O=P,z=d,this.options.backtrack_lexer){if(E=this.test_match(P,pe[d]),E!==!1)return E;if(this._backtrack){O=!1;continue}else return!1}else if(!this.options.flex)break}return O?(E=this.test_match(O,pe[z]),E!==!1?E:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},"next"),lex:o(function(){var O=this.next();return O||this.lex()},"lex"),begin:o(function(O){this.conditionStack.push(O)},"begin"),popState:o(function(){var O=this.conditionStack.length-1;return O>0?this.conditionStack.pop():this.conditionStack[0]},"popState"),_currentRules:o(function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},"_currentRules"),topState:o(function(O){return O=this.conditionStack.length-1-Math.abs(O||0),O>=0?this.conditionStack[O]:"INITIAL"},"topState"),pushState:o(function(O){this.begin(O)},"pushState"),stateStackSize:o(function(){return this.conditionStack.length},"stateStackSize"),options:{flex:!0,"case-insensitive":!0},performAction:o(function(O,P,z,pe){var d=pe;switch(z){case 0:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID";case 125:console.log(P.yytext);break}},"anonymous"),rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return T})();Tl.lexer=tb;function ve(){this.yy={}}return o(ve,"Parser"),ve.prototype=Tl,Tl.Parser=ve,new ve})();$0.exports=GT});var K0=y((gN,z0)=>{var WT="http://www.w3.org/2001/XMLSchema#integer",HT="http://www.w3.org/2001/XMLSchema#string";function Ye(r){this._options=r=r||{};var e=r.prefixes||{};this._prefixByIri={};var t=[];for(var i in e){var n=e[i];wa(n)&&(this._prefixByIri[n]=i,t.push(n))}var s=t.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+s+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=r.sparqlStar,this._indent=wa(r.indent)?r.indent:"  ",this._newline=wa(r.newline)?r.newline:`
`,this._explicitDatatype=!!r.explicitDatatype}o(Ye,"Generator");Ye.prototype.toQuery=function(r){var e="";return r.queryType&&(e+=r.queryType.toUpperCase()+" "),r.reduced&&(e+="REDUCED "),r.distinct&&(e+="DISTINCT "),r.variables?e+=dr(r.variables,void 0,function(t){return/^[?$]/.test(t)?t:tn(t)?this.toEntity(t):"("+this.toExpression(t.expression)+" AS "+Gc(t.variable)+")"},this)+" ":r.template&&(e+=this.group(r.template,!0)+this._newline),r.from&&(e+=this.graphs("FROM ",r.from.default)+this.graphs("FROM NAMED ",r.from.named)),r.where&&(e+="WHERE "+this.group(r.where,!0)+this._newline),r.updates&&(e+=dr(r.updates,";"+this._newline,this.toUpdate,this)),r.group&&(e+="GROUP BY "+dr(r.group,void 0,function(t){var i=tn(t.expression)?this.toEntity(t.expression):"("+this.toExpression(t.expression)+")";return t.variable?"("+i+" AS "+Gc(t.variable)+")":i},this)+this._newline),r.having&&(e+="HAVING ("+dr(r.having,void 0,this.toExpression,this)+")"+this._newline),r.order&&(e+="ORDER BY "+dr(r.order,void 0,function(t){var i="("+this.toExpression(t.expression)+")";return t.descending?"DESC "+i:i},this)+this._newline),r.offset&&(e+="OFFSET "+r.offset+this._newline),r.limit&&(e+="LIMIT "+r.limit+this._newline),r.values&&(e+=this.values(r)),e=this.baseAndPrefixes(r)+e,e.trim()};Ye.prototype.baseAndPrefixes=function(r){var e=r.base?"BASE <"+r.base+">"+this._newline:"",t="";for(var i in r.prefixes)(this._options.allPrefixes||this._usedPrefixes[i])&&(t+="PREFIX "+i+": <"+r.prefixes[i]+">"+this._newline);return e+t};Ye.prototype.toPattern=function(r){var e=r.type||r instanceof Array&&"array"||(r.subject&&r.predicate&&r.object?"triple":"");if(!(e in this))throw new Error("Unknown entry type: "+e);return this[e](r)};Ye.prototype.triple=function(r){return this.toEntity(r.subject)+" "+this.toEntity(r.predicate)+" "+this.toEntity(r.object)+"."};Ye.prototype.array=function(r){return dr(r,this._newline,this.toPattern,this)};Ye.prototype.bgp=function(r){return this.encodeTriples(r.triples)};Ye.prototype.encodeTriples=function(r){if(!r.length)return"";for(var e=[],t=void 0,i=void 0,n=0;n<r.length;n++){var s=r[n];Un(s.subject,t)?Un(s.predicate,i)?e.push(","):(i=s.predicate,e.push(";"+this._newline,this._indent,this.toEntity(i))):(t&&e.push("."+this._newline),t=s.subject,i=s.predicate,e.push(this.toEntity(t)," ",this.toEntity(i))),e.push(" ",this.toEntity(s.object))}return e.push("."),e.join("")};Ye.prototype.graph=function(r){return"GRAPH "+this.toEntity(r.name)+" "+this.group(r)};Ye.prototype.graphs=function(r,e){return!e||e.length===0?"":dr(e,"",function(t){return r+this.toEntity(t)+this._newline},this)};Ye.prototype.group=function(r,e){return r=e!==!0?this.array(r.patterns||r.triples):this.toPattern(r.type!=="group"?r:r.patterns),r.indexOf(this._newline)===-1?"{ "+r+" }":"{"+this._newline+this.indent(r)+this._newline+"}"};Ye.prototype.query=function(r){return this.toQuery(r)};Ye.prototype.filter=function(r){return"FILTER("+this.toExpression(r.expression)+")"};Ye.prototype.bind=function(r){return"BIND("+this.toExpression(r.expression)+" AS "+Gc(r.variable)+")"};Ye.prototype.optional=function(r){return"OPTIONAL "+this.group(r)};Ye.prototype.union=function(r){return dr(r.patterns,this._newline+"UNION"+this._newline,function(e){return this.group(e,!0)},this)};Ye.prototype.minus=function(r){return"MINUS "+this.group(r)};Ye.prototype.values=function(r){var e=Object.keys(r.values.reduce(function(n,s){for(var a in s)n[a]=!0;return n},{})),t,i;return e.length===1?t=i="":(t="(",i=")"),"VALUES "+t+e.join(" ")+i+" {"+this._newline+dr(r.values,this._newline,function(n){return"  "+t+dr(e,void 0,function(s){return n[s]?this.toEntity(n[s]):"UNDEF"},this)+i},this)+this._newline+"}"};Ye.prototype.service=function(r){return"SERVICE "+(r.silent?"SILENT ":"")+this.toEntity(r.name)+" "+this.group(r)};Ye.prototype.toExpression=function(r){if(tn(r))return this.toEntity(r);switch(r.type.toLowerCase()){case"aggregate":return r.aggregation.toUpperCase()+"("+(r.distinct?"DISTINCT ":"")+this.toExpression(r.expression)+(typeof r.separator=="string"?'; SEPARATOR = "'+r.separator.replace(W0,H0)+'"':"")+")";case"functioncall":return this.toEntity(r.function)+"("+dr(r.args,", ",this.toExpression,this)+")";case"operation":var e=r.operator.toUpperCase(),t=r.args||[];switch(r.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(tn(t[0])?this.toEntity(t[0]):"("+this.toExpression(t[0])+")")+" "+e+" "+(tn(t[1])?this.toEntity(t[1]):"("+this.toExpression(t[1])+")");case"!":return"!("+this.toExpression(t[0])+")";case"uplus":return"+("+this.toExpression(t[0])+")";case"uminus":return"-("+this.toExpression(t[0])+")";case"notin":e="NOT IN";case"in":return this.toExpression(t[0])+" "+e+"("+(wa(t[1])?t[1]:dr(t[1],", ",this.toExpression,this))+")";case"notexists":e="NOT EXISTS";case"exists":return e+" "+this.group(t[0],!0);default:return e+"("+dr(t,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+r.type)}};Ye.prototype.toEntity=function(r){if(tn(r))switch(r.termType){case"Wildcard":return"*";case"Variable":return Gc(r);case"BlankNode":return"_:"+r.value;case"Literal":var e=r.value||"",t=r.language||"",i=r.datatype;if(r='"'+e.replace(W0,H0)+'"',t)r+="@"+t;else if(i){if(!this._explicitDatatype)switch(i.value){case HT:return r;case WT:if(/^\d+$/.test(e))return e+" "}r+="^^"+this.encodeIRI(i.value)}return r;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return r.graph&&r.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(r.graph)+" { "+this.toEntity(r.subject)+" "+this.toEntity(r.predicate)+" "+this.toEntity(r.object)+" }  >>":"<< "+this.toEntity(r.subject)+" "+this.toEntity(r.predicate)+" "+this.toEntity(r.object)+" >>";default:return this.encodeIRI(r.value)}else{var n=r.items.map(this.toEntity,this),s=r.pathType;switch(s){case"^":case"!":return s+n[0];case"*":case"+":case"?":return"("+n[0]+s+")";default:return"("+n.join(s)+")"}}};var W0=/["\\\t\n\r\b\f]/g,H0=o(function(r){return zT[r]},"escapeReplacer"),zT={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};Ye.prototype.encodeIRI=function(r){var e=this._prefixRegex.exec(r);if(e){var t=this._prefixByIri[e[1]];return this._usedPrefixes[t]=!0,t+":"+e[2]}return"<"+r+">"};Ye.prototype.toUpdate=function(r){switch(r.type||r.updateType){case"load":return"LOAD"+(r.source?" "+this.toEntity(r.source):"")+(r.destination?" INTO GRAPH "+this.toEntity(r.destination):"");case"insert":return"INSERT DATA "+this.group(r.insert,!0);case"delete":return"DELETE DATA "+this.group(r.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(r.delete,!0);case"insertdelete":return(r.graph?"WITH "+this.toEntity(r.graph)+this._newline:"")+(r.delete.length?"DELETE "+this.group(r.delete,!0)+this._newline:"")+(r.insert.length?"INSERT "+this.group(r.insert,!0)+this._newline:"")+(r.using?this.graphs("USING ",r.using.default):"")+(r.using?this.graphs("USING NAMED ",r.using.named):"")+"WHERE "+this.group(r.where,!0);case"add":case"copy":case"move":return r.type.toUpperCase()+" "+(r.silent?"SILENT ":"")+(r.source.default?"DEFAULT":this.toEntity(r.source.name))+" TO "+this.toEntity(r.destination.name);case"create":case"clear":case"drop":return r.type.toUpperCase()+(r.silent?" SILENT ":" ")+(r.graph.default?"DEFAULT":r.graph.named?"NAMED":r.graph.all?"ALL":"GRAPH "+this.toEntity(r.graph.name));default:throw new Error("Unknown update query type: "+r.type)}};Ye.prototype.indent=function(r){return r.replace(/^/gm,this._indent)};function Gc(r){return"?"+r.value}o(Gc,"variableToString");function wa(r){return typeof r=="string"}o(wa,"isString");function tn(r){return typeof r.termType=="string"}o(tn,"isTerm");function Un(r,e){if(!r||!tn(r)||!e||!tn(e)||r.termType!==e.termType)return!1;switch(r.termType){case"Literal":return r.value===e.value&&r.language===e.language&&Un(r.datatype,e.datatype);case"Quad":return Un(r.subject,e.subject)&&Un(r.predicate,e.predicate)&&Un(r.object,e.object)&&Un(r.graph,e.graph);default:return r.value===e.value}}o(Un,"equalTerms");function dr(r,e,t,i){return r.map(t,i).join(wa(e)?e:" ")}o(dr,"mapJoin");function KT(r={}){return{stringify:o(function(e){var t=Object.create(r);return t.prefixes=e.prefixes,new Ye(t).toQuery(e)},"stringify"),createGenerator:o(function(){return new Ye(r)},"createGenerator")}}o(KT,"_Generator");z0.exports={Generator:KT}});var Rd=y(Wc=>{"use strict";Object.defineProperty(Wc,"__esModule",{value:!0});Wc.BlankNode=void 0;var Dd=class{static{o(this,"BlankNode")}constructor(e){this.termType="BlankNode",this.value=e}equals(e){return!!e&&e.termType==="BlankNode"&&e.value===this.value}};Wc.BlankNode=Dd});var Id=y(Hc=>{"use strict";Object.defineProperty(Hc,"__esModule",{value:!0});Hc.DefaultGraph=void 0;var Ea=class{static{o(this,"DefaultGraph")}constructor(){this.termType="DefaultGraph",this.value=""}equals(e){return!!e&&e.termType==="DefaultGraph"}};Hc.DefaultGraph=Ea;Ea.INSTANCE=new Ea});var Kc=y(zc=>{"use strict";Object.defineProperty(zc,"__esModule",{value:!0});zc.NamedNode=void 0;var Nd=class{static{o(this,"NamedNode")}constructor(e){this.termType="NamedNode",this.value=e}equals(e){return!!e&&e.termType==="NamedNode"&&e.value===this.value}};zc.NamedNode=Nd});var kd=y(Yc=>{"use strict";Object.defineProperty(Yc,"__esModule",{value:!0});Yc.Literal=void 0;var Y0=Kc(),Ta=class r{static{o(this,"Literal")}constructor(e,t){this.termType="Literal",this.value=e,typeof t=="string"?(this.language=t,this.datatype=r.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=r.XSD_STRING)}equals(e){return!!e&&e.termType==="Literal"&&e.value===this.value&&e.language===this.language&&this.datatype.equals(e.datatype)}};Yc.Literal=Ta;Ta.RDF_LANGUAGE_STRING=new Y0.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString");Ta.XSD_STRING=new Y0.NamedNode("http://www.w3.org/2001/XMLSchema#string")});var Md=y(Qc=>{"use strict";Object.defineProperty(Qc,"__esModule",{value:!0});Qc.Quad=void 0;var jd=class{static{o(this,"Quad")}constructor(e,t,i,n){this.termType="Quad",this.value="",this.subject=e,this.predicate=t,this.object=i,this.graph=n}equals(e){return!!e&&(e.termType==="Quad"||!e.termType)&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}};Qc.Quad=jd});var qd=y(Jc=>{"use strict";Object.defineProperty(Jc,"__esModule",{value:!0});Jc.Variable=void 0;var Ld=class{static{o(this,"Variable")}constructor(e){this.termType="Variable",this.value=e}equals(e){return!!e&&e.termType==="Variable"&&e.value===this.value}};Jc.Variable=Ld});var J0=y(Xc=>{"use strict";Object.defineProperty(Xc,"__esModule",{value:!0});Xc.DataFactory=void 0;var YT=Rd(),QT=Id(),Q0=kd(),JT=Kc(),XT=Md(),ZT=qd(),ex=0,Vd=class{static{o(this,"DataFactory")}constructor(e){this.blankNodeCounter=0,e=e||{},this.blankNodePrefix=e.blankNodePrefix||`df_${ex++}_`}namedNode(e){return new JT.NamedNode(e)}blankNode(e){return new YT.BlankNode(e||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(e,t){return new Q0.Literal(e,t)}variable(e){return new ZT.Variable(e)}defaultGraph(){return QT.DefaultGraph.INSTANCE}quad(e,t,i,n){return new XT.Quad(e,t,i,n||this.defaultGraph())}fromTerm(e){switch(e.termType){case"NamedNode":return this.namedNode(e.value);case"BlankNode":return this.blankNode(e.value);case"Literal":return e.language?this.literal(e.value,e.language):e.datatype.equals(Q0.Literal.XSD_STRING)?this.literal(e.value):this.literal(e.value,this.fromTerm(e.datatype));case"Variable":return this.variable(e.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(e.subject),this.fromTerm(e.predicate),this.fromTerm(e.object),this.fromTerm(e.graph))}}fromQuad(e){return this.fromTerm(e)}resetBlankNodeCounter(){this.blankNodeCounter=0}};Xc.DataFactory=Vd});var X0=y(pr=>{"use strict";var tx=pr&&pr.__createBinding||(Object.create?(function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,i,n)}):(function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]})),Bn=pr&&pr.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&tx(e,r,t)};Object.defineProperty(pr,"__esModule",{value:!0});Bn(Rd(),pr);Bn(J0(),pr);Bn(Id(),pr);Bn(kd(),pr);Bn(Kc(),pr);Bn(Md(),pr);Bn(qd(),pr)});var eg=y((NN,Z0)=>{var{Parser:ki}=G0(),{Generator:rx}=K0(),{Wildcard:ix}=Pd(),{DataFactory:nx}=X0();function sx({prefixes:r,baseIRI:e,factory:t,pathOnly:i,sparqlStar:n,skipValidation:s,skipUngroupedVariableCheck:a}={}){let c={};for(let f in r??{})c[f]=r[f];let u=new ki;return u.parse=function(){return ki.base=e||"",ki.prefixes=Object.create(c),ki.factory=t||new nx,ki.sparqlStar=!!n,ki.pathOnly=!!i,ki.skipValidation=!!s||!!a,ki.prototype.parse.apply(u,arguments)},u._resetBlanks=ki._resetBlanks,u}o(sx,"_Parser");Z0.exports={Parser:sx,Generator:rx,Wildcard:ix}});var rg=y(Er=>{"use strict";var ax=Er&&Er.__createBinding||(Object.create?(function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,i,n)}):(function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]})),ox=Er&&Er.__setModuleDefault||(Object.create?(function(r,e){Object.defineProperty(r,"default",{enumerable:!0,value:e})}):function(r,e){r.default=e}),cx=Er&&Er.__importStar||(function(){var r=o(function(e){return r=Object.getOwnPropertyNames||function(t){var i=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[i.length]=n);return i},r(e)},"ownKeys");return function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i=r(e),n=0;n<i.length;n++)i[n]!=="default"&&ax(t,e,i[n]);return ox(t,e),t}})();Object.defineProperty(Er,"__esModule",{value:!0});Er.SPARQLParser=Er.SPARQLParseError=void 0;var tg=cx(eg()),ji=class extends Error{static{o(this,"SPARQLParseError")}constructor(e,t,i,n){super(e,n?{cause:n}:void 0),this.name="SPARQLParseError",this.line=t,this.column=i}};Er.SPARQLParseError=ji;var Ud=class{static{o(this,"SPARQLParser")}constructor(){this.parser=new tg.Parser,this.generator=new tg.Generator}parse(e){try{let t=this.parser.parse(e);return this.validateQuery(t),t}catch(t){if(t instanceof Error){let i=t.message.match(/line (\d+), column (\d+)/),n=i?parseInt(i[1],10):void 0,s=i?parseInt(i[2],10):void 0;throw new ji(`SPARQL syntax error: ${t.message}`,n,s,t)}throw t}}toString(e){try{return this.generator.stringify(e)}catch(t){throw t instanceof Error?new ji(`Failed to serialize SPARQL query: ${t.message}`,void 0,void 0,t):t}}getQueryType(e){if("queryType"in e&&e.type==="query")return e.queryType;throw new ji("Query does not have a valid queryType property")}isSelectQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="SELECT"}isConstructQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="CONSTRUCT"}isAskQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="ASK"}isDescribeQuery(e){return"queryType"in e&&e.type==="query"&&e.queryType==="DESCRIBE"}validateQuery(e){if(!e||typeof e!="object")throw new ji("Invalid query: not an object");if(e.type!=="query"&&e.type!=="update")throw new ji(`Invalid type: expected "query" or "update", got "${e.type}"`);if(e.type==="query"){let t=["SELECT","CONSTRUCT","ASK","DESCRIBE"];if(!t.includes(e.queryType))throw new ji(`Invalid query type: expected one of ${t.join(", ")}, got "${e.queryType}"`)}}};Er.SPARQLParser=Ud});var ig=y(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.AlgebraTranslator=Es.AlgebraTranslatorError=void 0;var Re=class extends Error{static{o(this,"AlgebraTranslatorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="AlgebraTranslatorError"}};Es.AlgebraTranslatorError=Re;var Bd=class{static{o(this,"AlgebraTranslator")}translate(e){if(e.type!=="query")throw new Re("Only SELECT queries are currently supported");if(e.queryType!=="SELECT")throw new Re(`Query type ${e.queryType} not yet supported`);return this.translateSelect(e)}translateSelect(e){let t;if(!e.where||e.where.length===0)throw new Re("SELECT query must have WHERE clause");t=this.translateWhere(e.where);let i=this.extractAggregates(e.variables),n=this.extractGroupVariables(e.group);if((i.length>0||n.length>0)&&(t={type:"group",variables:n,aggregates:i,input:t}),e.variables&&e.variables.length>0){for(let a of e.variables){let c=a;c.expression&&c.variable&&(t={type:"extend",variable:c.variable.value,expression:c.expression,input:t})}let s=e.variables.filter(a=>a.termType==="Variable"||a.variable).map(a=>a.termType==="Variable"?a.value:a.variable.value);s.length>0&&(t={type:"project",variables:s,input:t})}return e.distinct&&(t={type:"distinct",input:t}),e.order&&e.order.length>0&&(t={type:"orderby",comparators:e.order.map(s=>this.translateOrderComparator(s)),input:t}),(e.limit!==void 0||e.offset!==void 0)&&(t={type:"slice",limit:e.limit,offset:e.offset,input:t}),t}extractAggregates(e){return e?e.filter(t=>t.expression&&t.expression.type==="aggregate").map(t=>({variable:t.variable.value,expression:this.translateAggregateExpression(t.expression)})):[]}extractGroupVariables(e){return e?e.filter(t=>t.expression&&t.expression.termType==="Variable").map(t=>t.expression.value):[]}translateAggregateExpression(e){return{type:"aggregate",aggregation:e.aggregation.toLowerCase(),expression:e.expression?this.translateExpression(e.expression):void 0,distinct:e.distinct||!1,separator:e.separator}}translateWhere(e){if(e.length===0)throw new Re("Empty WHERE clause");let t=e.filter(a=>a.type==="filter"),i=e.filter(a=>a.type==="bind"),n=e.filter(a=>a.type!=="filter"&&a.type!=="bind"),s;n.length===0?s={type:"bgp",triples:[]}:n.length===1?s=this.translatePattern(n[0]):s=n.map(c=>this.translatePattern(c)).reduce((c,u)=>({type:"join",left:c,right:u}));for(let a of i)s=this.translateBind(a,s);for(let a of t)s={type:"filter",expression:this.translateExpression(a.expression),input:s};return s}translatePattern(e){if(!e||!e.type)throw new Re("Invalid pattern: missing type");switch(e.type){case"bgp":return this.translateBGP(e);case"filter":return this.translateFilter(e);case"optional":return this.translateOptional(e);case"union":return this.translateUnion(e);case"minus":return this.translateMinus(e);case"values":return this.translateValues(e);case"group":return this.translateWhere(e.patterns);case"query":return this.translateSubquery(e);default:throw new Re(`Unsupported pattern type: ${e.type}`)}}translateBGP(e){if(!e.triples||!Array.isArray(e.triples))throw new Re("BGP pattern must have triples array");return{type:"bgp",triples:e.triples.map(t=>this.translateTriple(t))}}translateTriple(e){if(!e.subject||!e.predicate||!e.object)throw new Re("Triple must have subject, predicate, and object");return{subject:this.translateTripleElement(e.subject),predicate:this.translatePredicate(e.predicate),object:this.translateTripleElement(e.object)}}translatePredicate(e){return e.type==="path"?this.translatePropertyPath(e):this.translateTripleElement(e)}translatePropertyPath(e){if(!e.pathType)throw new Re("Property path must have pathType");if(!e.items||!Array.isArray(e.items))throw new Re("Property path must have items array");let t=e.items.map(i=>this.translatePathItem(i));switch(e.pathType){case"/":return{type:"path",pathType:"/",items:t};case"|":return{type:"path",pathType:"|",items:t};case"^":if(t.length!==1)throw new Re("Inverse path must have exactly one item");return{type:"path",pathType:"^",items:[t[0]]};case"+":if(t.length!==1)throw new Re("OneOrMore path must have exactly one item");return{type:"path",pathType:"+",items:[t[0]]};case"*":if(t.length!==1)throw new Re("ZeroOrMore path must have exactly one item");return{type:"path",pathType:"*",items:[t[0]]};case"?":if(t.length!==1)throw new Re("ZeroOrOne path must have exactly one item");return{type:"path",pathType:"?",items:[t[0]]};default:throw new Re(`Unsupported property path type: ${e.pathType}`)}}translatePathItem(e){if(e.type==="path")return this.translatePropertyPath(e);if(e.termType==="NamedNode")return{type:"iri",value:e.value};throw new Re(`Unsupported path item type: ${e.type||e.termType}`)}translateTripleElement(e){if(!e||!e.termType)throw new Re("Triple element must have termType");switch(e.termType){case"Variable":return{type:"variable",value:e.value};case"NamedNode":return{type:"iri",value:e.value};case"Literal":return{type:"literal",value:e.value,datatype:e.datatype?.value,language:e.language};case"BlankNode":return{type:"blank",value:e.value};default:throw new Re(`Unsupported term type: ${e.termType}`)}}translateFilter(e){if(!e.expression)throw new Re("Filter pattern must have expression");let t=e.patterns?this.translateWhere(e.patterns):{type:"bgp",triples:[]};return{type:"filter",expression:this.translateExpression(e.expression),input:t}}translateExpression(e){if(!e)throw new Re("Expression cannot be null or undefined");if(e.type==="operation")return this.translateOperationExpression(e);if(e.type==="functioncall"||e.type==="functionCall")return{type:"functionCall",function:e.function,args:e.args.map(t=>this.translateExpression(t))};if(e.termType)return this.translateTermExpression(e);throw new Re(`Unsupported expression structure: ${JSON.stringify(e)}`)}translateOperationExpression(e){let t=["=","!=","<",">","<=",">="],i=["&&","||","!"],n=["+","-","*","/"];return t.includes(e.operator)?{type:"comparison",operator:e.operator,left:this.translateExpression(e.args[0]),right:this.translateExpression(e.args[1])}:i.includes(e.operator)?{type:"logical",operator:e.operator,operands:e.args.map(s=>this.translateExpression(s))}:n.includes(e.operator)?{type:"arithmetic",operator:e.operator,left:this.translateExpression(e.args[0]),right:this.translateExpression(e.args[1])}:e.operator==="exists"||e.operator==="notexists"?this.translateExistsExpression(e):{type:"function",function:e.operator,args:e.args.map(s=>this.translateExpression(s))}}translateExistsExpression(e){if(!e.args||e.args.length!==1)throw new Re("EXISTS/NOT EXISTS must have exactly one pattern argument");let t=e.args[0],i;return t.type==="group"&&t.patterns?i=this.translateWhere(t.patterns):t.type==="bgp"?i=this.translateBGP(t):i=this.translatePattern(t),{type:"exists",negated:e.operator==="notexists",pattern:i}}translateTermExpression(e){if(e.termType==="Variable")return{type:"variable",name:e.value};if(e.termType==="Literal"){let t=e.value;return e.datatype&&(e.datatype.value.includes("#integer")||e.datatype.value.includes("#decimal")?t=parseFloat(e.value):e.datatype.value.includes("#boolean")&&(t=e.value==="true")),{type:"literal",value:t,datatype:e.datatype?.value}}return{type:"literal",value:String(e.value||e)}}translateOptional(e){if(!e.patterns||e.patterns.length===0)throw new Re("OPTIONAL pattern must have patterns");return{type:"leftjoin",left:{type:"bgp",triples:[]},right:this.translateWhere(e.patterns),expression:e.expression?this.translateExpression(e.expression):void 0}}translateUnion(e){if(!e.patterns||e.patterns.length!==2)throw new Re("UNION pattern must have exactly 2 patterns");return{type:"union",left:this.translateWhere(e.patterns[0].patterns||[e.patterns[0]]),right:this.translateWhere(e.patterns[1].patterns||[e.patterns[1]])}}translateMinus(e){if(!e.patterns||e.patterns.length===0)throw new Re("MINUS pattern must have patterns");return{type:"minus",left:{type:"bgp",triples:[]},right:this.translateWhere(e.patterns)}}translateValues(e){if(!e.values||!Array.isArray(e.values))throw new Re("VALUES pattern must have values array");let t=new Set;for(let n of e.values)for(let s of Object.keys(n)){let a=s.startsWith("?")?s.slice(1):s;t.add(a)}let i=e.values.map(n=>this.translateValuesBinding(n));return{type:"values",variables:Array.from(t),bindings:i}}translateValuesBinding(e){let t={};for(let[i,n]of Object.entries(e)){let s=i.startsWith("?")?i.slice(1):i,a=n;if(a.termType==="NamedNode")t[s]={type:"iri",value:a.value};else if(a.termType==="Literal")t[s]={type:"literal",value:a.value,datatype:a.datatype?.value,language:a.language||void 0};else throw new Re(`Unsupported VALUES term type: ${a.termType}`)}return t}translateBind(e,t){if(!e.variable||!e.expression)throw new Re("BIND pattern must have variable and expression");return{type:"extend",variable:e.variable.value,expression:this.translateExpression(e.expression),input:t}}translateOrderComparator(e){return{expression:this.translateExpression(e.expression),descending:e.descending||!1}}translateSubquery(e){if(e.queryType!=="SELECT")throw new Re(`Only SELECT subqueries are supported, got: ${e.queryType}`);return{type:"subquery",query:this.translateSelect(e)}}};Es.AlgebraTranslator=Bd});var ng=y(Zc=>{"use strict";Object.defineProperty(Zc,"__esModule",{value:!0});Zc.AlgebraOptimizer=void 0;var $d=class{static{o(this,"AlgebraOptimizer")}constructor(){this.stats=new Map}optimize(e){let t=e;return t=this.eliminateEmptyBGPInFilterJoin(t),t=this.filterPushDown(t),t=this.joinReordering(t),t}eliminateEmptyBGPInFilterJoin(e){if(e.type==="join"){if(e.left.type==="filter"){let t=e.left;if(t.input.type==="bgp"&&t.input.triples.length===0)return{type:"filter",expression:t.expression,input:this.eliminateEmptyBGPInFilterJoin(e.right)}}if(e.right.type==="filter"){let t=e.right;if(t.input.type==="bgp"&&t.input.triples.length===0)return{type:"filter",expression:t.expression,input:this.eliminateEmptyBGPInFilterJoin(e.left)}}return{type:"join",left:this.eliminateEmptyBGPInFilterJoin(e.left),right:this.eliminateEmptyBGPInFilterJoin(e.right)}}return e.type==="filter"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="leftjoin"?{...e,left:this.eliminateEmptyBGPInFilterJoin(e.left),right:this.eliminateEmptyBGPInFilterJoin(e.right)}:e.type==="union"?{...e,left:this.eliminateEmptyBGPInFilterJoin(e.left),right:this.eliminateEmptyBGPInFilterJoin(e.right)}:e.type==="minus"?{...e,left:this.eliminateEmptyBGPInFilterJoin(e.left),right:this.eliminateEmptyBGPInFilterJoin(e.right)}:e.type==="project"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="orderby"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="slice"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e.type==="distinct"?{...e,input:this.eliminateEmptyBGPInFilterJoin(e.input)}:e}filterPushDown(e){return e.type==="filter"?this.pushDownFilter(e):e.type==="join"?{type:"join",left:this.filterPushDown(e.left),right:this.filterPushDown(e.right)}:e.type==="leftjoin"?{...e,left:this.filterPushDown(e.left),right:this.filterPushDown(e.right)}:e.type==="union"?{type:"union",left:this.filterPushDown(e.left),right:this.filterPushDown(e.right)}:e.type==="minus"?{...e,left:this.filterPushDown(e.left),right:this.filterPushDown(e.right)}:e.type==="project"?{...e,input:this.filterPushDown(e.input)}:e.type==="orderby"?{...e,input:this.filterPushDown(e.input)}:e.type==="slice"?{...e,input:this.filterPushDown(e.input)}:e.type==="distinct"?{...e,input:this.filterPushDown(e.input)}:e}pushDownFilter(e){let t=e.input;if(t.type==="join"){let i=this.getFilterVariables(e.expression),n=this.getOperationVariables(t.left),s=this.getOperationVariables(t.right),a=i.every(u=>n.has(u)),c=i.every(u=>s.has(u));return a&&!c?{type:"join",left:{type:"filter",expression:e.expression,input:this.filterPushDown(t.left)},right:this.filterPushDown(t.right)}:c&&!a?{type:"join",left:this.filterPushDown(t.left),right:{type:"filter",expression:e.expression,input:this.filterPushDown(t.right)}}:{type:"filter",expression:e.expression,input:{type:"join",left:this.filterPushDown(t.left),right:this.filterPushDown(t.right)}}}return t.type==="union"?{type:"union",left:{type:"filter",expression:e.expression,input:this.filterPushDown(t.left)},right:{type:"filter",expression:e.expression,input:this.filterPushDown(t.right)}}:{type:"filter",expression:e.expression,input:this.filterPushDown(t)}}getFilterVariables(e){let t=[];if(e.type==="variable")t.push(e.name);else if(e.type==="comparison")t.push(...this.getFilterVariables(e.left)),t.push(...this.getFilterVariables(e.right));else if(e.type==="logical")for(let i of e.operands)t.push(...this.getFilterVariables(i));else if(e.type==="function")for(let i of e.args)t.push(...this.getFilterVariables(i));return Array.from(new Set(t))}getOperationVariables(e){let t=new Set;if(e.type==="bgp")for(let i of e.triples)i.subject.type==="variable"&&t.add(i.subject.value),i.predicate.type==="variable"&&t.add(i.predicate.value),i.object.type==="variable"&&t.add(i.object.value);else if(e.type==="join"){let i=this.getOperationVariables(e.left),n=this.getOperationVariables(e.right);return new Set([...i,...n])}else{if(e.type==="filter")return this.getOperationVariables(e.input);if(e.type==="leftjoin"){let i=this.getOperationVariables(e.left),n=this.getOperationVariables(e.right);return new Set([...i,...n])}else if(e.type==="union"){let i=this.getOperationVariables(e.left),n=this.getOperationVariables(e.right);return new Set([...i,...n])}else{if(e.type==="minus")return this.getOperationVariables(e.left);if(e.type==="project")return new Set(e.variables)}}return t}joinReordering(e){return e.type==="join"?this.reorderJoin(e):e.type==="filter"?{...e,input:this.joinReordering(e.input)}:e.type==="leftjoin"?{...e,left:this.joinReordering(e.left),right:this.joinReordering(e.right)}:e.type==="union"?{...e,left:this.joinReordering(e.left),right:this.joinReordering(e.right)}:e.type==="minus"?{...e,left:this.joinReordering(e.left),right:this.joinReordering(e.right)}:e.type==="project"?{...e,input:this.joinReordering(e.input)}:e.type==="orderby"?{...e,input:this.joinReordering(e.input)}:e.type==="slice"?{...e,input:this.joinReordering(e.input)}:e.type==="distinct"?{...e,input:this.joinReordering(e.input)}:e}reorderJoin(e){let t=this.estimateCost(e.left);return this.estimateCost(e.right)<t?{type:"join",left:this.joinReordering(e.right),right:this.joinReordering(e.left)}:{type:"join",left:this.joinReordering(e.left),right:this.joinReordering(e.right)}}estimateCost(e){if(e.type==="bgp"){let t=e.triples.length*100;for(let i of e.triples)i.subject.type==="variable"&&(t+=10),i.predicate.type==="variable"&&(t+=20),i.object.type==="variable"&&(t+=10);return t}return e.type==="filter"?this.estimateCost(e.input)*.3:e.type==="join"?this.estimateCost(e.left)*this.estimateCost(e.right):e.type==="leftjoin"?this.estimateCost(e.left)+this.estimateCost(e.right)*.5:e.type==="union"?this.estimateCost(e.left)+this.estimateCost(e.right):e.type==="minus"?this.estimateCost(e.left)+this.estimateCost(e.right)*.3:100}setStatistics(e,t){this.stats.set(e,t)}getStatistics(e){return this.stats.get(e)}};Zc.AlgebraOptimizer=$d});var sg=y(eu=>{"use strict";Object.defineProperty(eu,"__esModule",{value:!0});eu.AlgebraSerializer=void 0;var Gd=class{static{o(this,"AlgebraSerializer")}toString(e,t=0){let i="  ".repeat(t);switch(e.type){case"bgp":return`${i}BGP [
${e.triples.map(f=>`${i}  ${this.tripleToString(f)}`).join(`
`)}
${i}]`;case"filter":return`${i}Filter(
${i}  ${this.expressionToString(e.expression)}
${this.toString(e.input,t+1)}
${i})`;case"join":return`${i}Join(
${this.toString(e.left,t+1)}
${this.toString(e.right,t+1)}
${i})`;case"leftjoin":let n=e.expression?` ${this.expressionToString(e.expression)}`:"";return`${i}LeftJoin(${n}
${this.toString(e.left,t+1)}
${this.toString(e.right,t+1)}
${i})`;case"union":return`${i}Union(
${this.toString(e.left,t+1)}
${this.toString(e.right,t+1)}
${i})`;case"minus":return`${i}Minus(
${this.toString(e.left,t+1)}
${this.toString(e.right,t+1)}
${i})`;case"project":return`${i}Project [${e.variables.map(f=>`?${f}`).join(", ")}](
${this.toString(e.input,t+1)}
${i})`;case"orderby":let s=e.comparators.map(f=>`${this.expressionToString(f.expression)} ${f.descending?"DESC":"ASC"}`).join(", ");return`${i}OrderBy [${s}](
${this.toString(e.input,t+1)}
${i})`;case"slice":let a=[];return e.offset!==void 0&&a.push(`OFFSET ${e.offset}`),e.limit!==void 0&&a.push(`LIMIT ${e.limit}`),`${i}Slice [${a.join(", ")}](
${this.toString(e.input,t+1)}
${i})`;case"distinct":return`${i}Distinct(
${this.toString(e.input,t+1)}
${i})`;case"group":let c=e.variables.length>0?`[${e.variables.map(f=>`?${f}`).join(", ")}]`:"[]",u=e.aggregates.length>0?e.aggregates.map(f=>`?${f.variable} = ${f.expression.aggregation}(${f.expression.distinct?"DISTINCT ":""}${f.expression.expression?this.expressionToString(f.expression.expression):"*"})`).join(", "):"";return`${i}Group ${c}${u?` [${u}]`:""}(
${this.toString(e.input,t+1)}
${i})`;case"extend":return`${i}Extend (?${e.variable} = ${this.expressionToString(e.expression)})(
${this.toString(e.input,t+1)}
${i})`;case"subquery":return`${i}Subquery(
${this.toString(e.query,t+1)}
${i})`;default:return`${i}Unknown(${e.type})`}}tripleToString(e){return`${this.elementToString(e.subject)} ${this.predicateToString(e.predicate)} ${this.elementToString(e.object)}`}predicateToString(e){return this.isPropertyPath(e)?this.propertyPathToString(e):this.elementToString(e)}isPropertyPath(e){return e.type==="path"}propertyPathToString(e){let t=e.items.map(i=>i.type==="path"?`(${this.propertyPathToString(i)})`:`<${i.value}>`);switch(e.pathType){case"/":return t.join("/");case"|":return t.join("|");case"^":return`^${t[0]}`;case"+":return`${t[0]}+`;case"*":return`${t[0]}*`;case"?":return`${t[0]}?`}}elementToString(e){switch(e.type){case"variable":return`?${e.value}`;case"iri":return`<${e.value}>`;case"literal":let t=`"${e.value}"`;return e.language&&(t+=`@${e.language}`),e.datatype&&(t+=`^^<${e.datatype}>`),t;case"blank":return`_:${e.value}`;default:return String(e)}}expressionToString(e){switch(e.type){case"variable":return`?${e.name}`;case"literal":return typeof e.value=="string"?`"${e.value}"`:String(e.value);case"comparison":return`(${this.expressionToString(e.left)} ${e.operator} ${this.expressionToString(e.right)})`;case"logical":return e.operator==="!"?`!(${this.expressionToString(e.operands[0])})`:`(${e.operands.map(t=>this.expressionToString(t)).join(` ${e.operator} `)})`;case"arithmetic":return`(${this.expressionToString(e.left)} ${e.operator} ${this.expressionToString(e.right)})`;case"function":return`${e.function}(${e.args.map(t=>this.expressionToString(t)).join(", ")})`;case"exists":return`${e.negated?"NOT EXISTS":"EXISTS"} { ${this.toString(e.pattern,0)} }`;default:return"unknown"}}toJSON(e){return JSON.stringify(e,null,2)}};eu.AlgebraSerializer=Gd});var xa=y(tu=>{"use strict";Object.defineProperty(tu,"__esModule",{value:!0});tu.SolutionMapping=void 0;var Wd=class r{static{o(this,"SolutionMapping")}constructor(e){this.bindings=e?new Map(e):new Map}get(e){return this.bindings.get(e)}set(e,t){this.bindings.set(e,t)}has(e){return this.bindings.has(e)}variables(){return Array.from(this.bindings.keys())}getBindings(){return new Map(this.bindings)}isCompatibleWith(e){for(let[t,i]of this.bindings.entries()){let n=e.get(t);if(n!==void 0&&!this.areEqual(i,n))return!1}return!0}merge(e){if(!this.isCompatibleWith(e))return null;let t=new r(this.bindings);for(let[i,n]of e.getBindings().entries())t.set(i,n);return t}clone(){return new r(this.bindings)}areEqual(e,t){return e.toString()===t.toString()}toJSON(){let e={};for(let[t,i]of this.bindings.entries())e[t]=i.toString();return e}size(){return this.bindings.size}};tu.SolutionMapping=Wd});var Kd=y(Ts=>{"use strict";Object.defineProperty(Ts,"__esModule",{value:!0});Ts.BGPExecutor=Ts.BGPExecutorError=void 0;var ag=xa(),Aa=xt(),og=Gt(),Hd=oi(),nr=class extends Error{static{o(this,"BGPExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="BGPExecutorError"}};Ts.BGPExecutorError=nr;var zd=class{static{o(this,"BGPExecutor")}constructor(e){this.tripleStore=e}async*execute(e){if(e.triples.length===0){yield new ag.SolutionMapping;return}let t=this.matchTriplePattern(e.triples[0]);for(let i=1;i<e.triples.length;i++)t=this.joinWithPattern(t,e.triples[i]);for await(let i of t)yield i}async executeAll(e){let t=[];for await(let i of this.execute(e))t.push(i);return t}async*matchTriplePattern(e){if(this.isPropertyPath(e.predicate))throw new nr("Property paths are not supported in BGPExecutor. Use PropertyPathExecutor for path expressions.");let t=e.predicate,i=this.isVariable(e.subject)?void 0:this.toRDFTermAsSubject(e.subject),n=this.isVariable(t)?void 0:this.toRDFTermAsPredicate(t),s=this.isVariable(e.object)?void 0:this.toRDFTerm(e.object),a=await this.tripleStore.match(i,n,s);for(let c of a){let u=new ag.SolutionMapping;this.isVariable(e.subject)&&u.set(e.subject.value,c.subject),this.isVariable(t)&&u.set(t.value,c.predicate),this.isVariable(e.object)&&u.set(e.object.value,c.object),yield u}}isPropertyPath(e){return e.type==="path"}async*joinWithPattern(e,t){let i=[];for await(let n of e)i.push(n);for(let n of i){let s=this.instantiatePattern(t,n);for await(let a of this.matchTriplePattern(s)){let c=n.merge(a);c!==null&&(yield c)}}}instantiatePattern(e,t){let i=this.isPropertyPath(e.predicate)?e.predicate:this.instantiateElement(e.predicate,t);return{subject:this.instantiateElement(e.subject,t),predicate:i,object:this.instantiateElement(e.object,t)}}instantiateElement(e,t){if(this.isVariable(e)){let i=t.get(e.value);if(i)return this.toAlgebraElement(i)}return e}isVariable(e){return e.type==="variable"}toRDFTermAsSubject(e){switch(e.type){case"iri":return new Aa.IRI(e.value);case"blank":return new Hd.BlankNode(e.value);case"literal":throw new nr("Literals cannot appear in subject position");case"variable":throw new nr(`Cannot convert variable to RDF term: ${e.value}`);default:throw new nr(`Unknown element type: ${e.type}`)}}toRDFTermAsPredicate(e){switch(e.type){case"iri":return new Aa.IRI(e.value);case"literal":throw new nr("Literals cannot appear in predicate position");case"blank":throw new nr("Blank nodes cannot appear in predicate position");case"variable":throw new nr(`Cannot convert variable to RDF term: ${e.value}`);default:throw new nr(`Unknown element type: ${e.type}`)}}toRDFTerm(e){switch(e.type){case"iri":return new Aa.IRI(e.value);case"literal":return new og.Literal(e.value,e.datatype?new Aa.IRI(e.datatype):void 0,e.language);case"blank":return new Hd.BlankNode(e.value);case"variable":throw new nr(`Cannot convert variable to RDF term: ${e.value}`);default:throw new nr(`Unknown element type: ${e.type}`)}}toAlgebraElement(e){if(e instanceof Aa.IRI)return{type:"iri",value:e.value};if(e instanceof og.Literal)return{type:"literal",value:e.value,datatype:e.datatype?.value,language:e.language};if(e instanceof Hd.BlankNode)return{type:"blank",value:e.id};throw new nr(`Unknown RDF term type: ${e.constructor?.name||"unknown"}`)}};Ts.BGPExecutor=zd});var Jd=y(ru=>{"use strict";Object.defineProperty(ru,"__esModule",{value:!0});ru.BuiltInFunctions=void 0;var Oa=xt(),Ca=Gt(),Yd=oi(),Qd=class{static{o(this,"BuiltInFunctions")}static str(e){if(e===void 0)throw new Error("STR: argument is undefined");return e instanceof Oa.IRI||e instanceof Ca.Literal?e.value:e instanceof Yd.BlankNode?e.id:String(e)}static lang(e){if(e===void 0)throw new Error("LANG: argument is undefined");return e instanceof Ca.Literal&&e.language?e.language:""}static datatype(e){if(e===void 0)throw new Error("DATATYPE: argument is undefined");if(e instanceof Ca.Literal)return e.datatype?e.datatype:e.language?new Oa.IRI("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"):new Oa.IRI("http://www.w3.org/2001/XMLSchema#string");throw new Error("DATATYPE: argument must be a literal")}static bound(e){return e!==void 0}static isIRI(e){return e===void 0?!1:e instanceof Oa.IRI}static isBlank(e){return e===void 0?!1:e instanceof Yd.BlankNode}static isLiteral(e){return e===void 0?!1:e instanceof Ca.Literal}static regex(e,t,i){try{return new RegExp(t,i).test(e)}catch(n){throw new Error(`REGEX: invalid pattern '${t}': ${n.message}`)}}static compare(e,t,i){let n=this.toComparableValue(e),s=this.toComparableValue(t);switch(i){case"=":return n===s;case"!=":return n!==s;case"<":return n<s;case">":return n>s;case"<=":return n<=s;case">=":return n>=s;default:throw new Error(`Unknown comparison operator: ${i}`)}}static toComparableValue(e){if(typeof e=="string"||typeof e=="number")return e;if(e instanceof Ca.Literal){let t=e.datatype?.value;if(t?.includes("#integer")||t?.includes("#decimal")||t?.includes("#double")){let i=parseFloat(e.value);if(!isNaN(i))return i}return e.value}return e instanceof Oa.IRI?e.value:e instanceof Yd.BlankNode?e.id:String(e)}static contains(e,t){return e.includes(t)}static strStarts(e,t){return e.startsWith(t)}static strEnds(e,t){return e.endsWith(t)}static strlen(e){return e.length}static ucase(e){return e.toUpperCase()}static lcase(e){return e.toLowerCase()}static substr(e,t,i){let n=t-1;if(n<0){if(i!==void 0){let s=i+n;return s<=0?"":e.substring(0,s)}return e}return i!==void 0?e.substring(n,n+i):e.substring(n)}static strBefore(e,t){if(t==="")return"";let i=e.indexOf(t);return i===-1?"":e.substring(0,i)}static strAfter(e,t){if(t==="")return e;let i=e.indexOf(t);return i===-1?"":e.substring(i+t.length)}static concat(...e){return e.join("")}static replace(e,t,i,n){try{let s=new RegExp(t,n||"g");return e.replace(s,i)}catch(s){throw new Error(`REPLACE: invalid pattern '${t}': ${s.message}`)}}static parseDate(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`PARSEDATE: invalid date string '${e}'`);return t.getTime()}static dateBefore(e,t){let i=this.parseDate(e),n=this.parseDate(t);return i<n}static dateAfter(e,t){let i=this.parseDate(e),n=this.parseDate(t);return i>n}static dateInRange(e,t,i){let n=this.parseDate(e),s=this.parseDate(t),a=this.parseDate(i);return n>=s&&n<=a}static dateDiffMinutes(e,t){let i=this.parseDate(e),n=this.parseDate(t),s=Math.abs(n-i);return Math.round(s/(1e3*60))}static dateDiffHours(e,t){let i=this.parseDate(e),n=this.parseDate(t),s=Math.abs(n-i);return Math.round(s/(1e3*60*60)*100)/100}static logicalAnd(e){return e.every(t=>t===!0)}static logicalOr(e){return e.some(t=>t===!0)}static logicalNot(e){return!e}static year(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`YEAR: invalid date string '${e}'`);return t.getFullYear()}static month(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`MONTH: invalid date string '${e}'`);return t.getMonth()+1}static day(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`DAY: invalid date string '${e}'`);return t.getDate()}static hours(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`HOURS: invalid date string '${e}'`);return t.getHours()}static minutes(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`MINUTES: invalid date string '${e}'`);return t.getMinutes()}static seconds(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`SECONDS: invalid date string '${e}'`);return t.getSeconds()+t.getMilliseconds()/1e3}static timezone(e){let t=new Date(e);if(isNaN(t.getTime()))throw new Error(`TIMEZONE: invalid date string '${e}'`);if(e.endsWith("Z"))return"PT0S";let i=e.match(/([+-]\d{2}):?(\d{2})$/);if(i){let u=parseInt(i[1],10),f=parseInt(i[2],10),l=u>=0?"":"-",h=Math.abs(u);return f===0?`${l}PT${h}H`:`${l}PT${h}H${f}M`}let n=-t.getTimezoneOffset(),s=Math.floor(Math.abs(n)/60),a=Math.abs(n)%60,c=n>=0?"":"-";return a===0?`${c}PT${s}H`:`${c}PT${s}H${a}M`}static now(){return new Date().toISOString()}static msToMinutes(e){return Math.round(e/(1e3*60))}static msToHours(e){return Math.round(e/(1e3*60*60)*100)/100}static msToSeconds(e){return Math.round(e/1e3)}static abs(e){return Math.abs(e)}static round(e){return Math.round(e)}static ceil(e){return Math.ceil(e)}static floor(e){return Math.floor(e)}static rand(){return Math.random()}static coalesce(e){for(let t of e)if(t!=null)return t}static if(e,t,i){return e?t:i}};ru.BuiltInFunctions=Qd});var Zd=y(xs=>{"use strict";Object.defineProperty(xs,"__esModule",{value:!0});xs.FilterExecutor=xs.FilterExecutorError=void 0;var oe=Jd(),iu=Gt(),Ct=class extends Error{static{o(this,"FilterExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="FilterExecutorError"}};xs.FilterExecutorError=Ct;var Xd=class{static{o(this,"FilterExecutor")}constructor(){this.existsEvaluator=null}setExistsEvaluator(e){this.existsEvaluator=e}async*execute(e,t){let i=this.expressionContainsExists(e.expression);for await(let n of t)try{let s;i?s=await this.evaluateExpressionAsync(e.expression,n):s=this.evaluateExpression(e.expression,n),s===!0&&(yield n)}catch{continue}}expressionContainsExists(e){return e.type==="exists"?!0:e.type==="logical"?e.operands.some(t=>this.expressionContainsExists(t)):e.type==="comparison"?this.expressionContainsExists(e.left)||this.expressionContainsExists(e.right):!1}async executeAll(e,t){let i=[];async function*n(){for(let s of t)yield s}o(n,"generator");for await(let s of this.execute(e,n()))i.push(s);return i}evaluateExpression(e,t){let i=e;if(i.termType)switch(i.termType){case"Variable":return t.get(i.value);case"Literal":return i.value;case"NamedNode":return i.value;default:throw new Ct(`Unsupported termType: ${i.termType}`)}switch(e.type){case"comparison":return this.evaluateComparison(e,t);case"logical":return this.evaluateLogical(e,t);case"arithmetic":return this.evaluateArithmetic(e,t);case"function":case"functionCall":return this.evaluateFunction(e,t);case"variable":return t.get(e.name);case"literal":return e.value;case"exists":throw new Ct("EXISTS expressions require async evaluation. Use evaluateExpressionAsync instead.");default:throw new Ct(`Unsupported expression type: ${e.type}, expr.termType=${i.termType}`)}}async evaluateExpressionAsync(e,t){return e.type==="exists"?this.evaluateExists(e,t):e.type==="logical"?this.evaluateLogicalAsync(e,t):this.evaluateExpression(e,t)}async evaluateExists(e,t){if(!this.existsEvaluator)throw new Ct("EXISTS evaluator not set. Call setExistsEvaluator before evaluating EXISTS expressions.");let i=await this.existsEvaluator(e.pattern,t);return e.negated?!i:i}async evaluateLogicalAsync(e,t){if(e.operator==="!"){let n=await this.evaluateExpressionAsync(e.operands[0],t);return oe.BuiltInFunctions.logicalNot(n)}let i=[];for(let n of e.operands){let s=await this.evaluateExpressionAsync(n,t);i.push(s)}if(e.operator==="&&")return oe.BuiltInFunctions.logicalAnd(i);if(e.operator==="||")return oe.BuiltInFunctions.logicalOr(i);throw new Ct(`Unknown logical operator: ${e.operator}`)}evaluateComparison(e,t){let i=this.evaluateExpression(e.left,t),n=this.evaluateExpression(e.right,t);return oe.BuiltInFunctions.compare(i,n,e.operator)}evaluateLogical(e,t){if(e.operator==="!"){let n=this.evaluateExpression(e.operands[0],t);return oe.BuiltInFunctions.logicalNot(n)}let i=e.operands.map(n=>this.evaluateExpression(n,t));if(e.operator==="&&")return oe.BuiltInFunctions.logicalAnd(i);if(e.operator==="||")return oe.BuiltInFunctions.logicalOr(i);throw new Ct(`Unknown logical operator: ${e.operator}`)}evaluateArithmetic(e,t){let i=this.evaluateExpression(e.left,t),n=this.evaluateExpression(e.right,t),s=this.toNumericValue(i),a=this.toNumericValue(n);if(e.operator==="-"&&this.isDateTimeValue(i)&&this.isDateTimeValue(n)){let c=this.parseDateTimeToMs(i),u=this.parseDateTimeToMs(n);return c-u}switch(e.operator){case"+":return s+a;case"-":return s-a;case"*":return s*a;case"/":if(a===0)throw new Ct("Division by zero");return s/a;default:throw new Ct(`Unknown arithmetic operator: ${e.operator}`)}}toNumericValue(e){if(typeof e=="number")return e;if(e instanceof iu.Literal){let t=e.datatype?.value||"";if(t.includes("#integer")||t.includes("#decimal")||t.includes("#double")||t.includes("#float")){let n=parseFloat(e.value);if(!isNaN(n))return n}let i=parseFloat(e.value);if(!isNaN(i))return i}if(typeof e=="string"){let t=parseFloat(e);if(!isNaN(t))return t}if(e&&typeof e=="object"&&"value"in e){let t=parseFloat(String(e.value));if(!isNaN(t))return t}throw new Ct(`Cannot convert to number: ${e}`)}isDateTimeValue(e){if(e instanceof iu.Literal){let t=e.datatype?.value||"";return t.includes("#dateTime")||t.includes("#date")?!0:/^\d{4}-\d{2}-\d{2}(T|\s)/.test(e.value)}return typeof e=="string"?/^\d{4}-\d{2}-\d{2}(T|\s)/.test(e):!1}parseDateTimeToMs(e){let t;if(e instanceof iu.Literal)t=e.value;else if(typeof e=="string")t=e;else if(e&&typeof e=="object"&&"value"in e)t=String(e.value);else throw new Ct(`Cannot parse dateTime: ${e}`);let i=new Date(t);if(isNaN(i.getTime()))throw new Ct(`Invalid dateTime format: ${t}`);return i.getTime()}evaluateFunction(e,t){let i;if(typeof e.function=="string")i=e.function.toLowerCase();else if(e.function&&typeof e.function=="object"&&"value"in e.function){let n=e.function.value;i=((n.includes("#")?n.split("#").pop():n.split("/").pop())||n).toLowerCase()}else throw new Ct(`Unknown function format: ${e.function}`);switch(i){case"str":let n=this.getTermFromExpression(e.args[0],t);return oe.BuiltInFunctions.str(n);case"lang":let s=this.getTermFromExpression(e.args[0],t);return oe.BuiltInFunctions.lang(s);case"datatype":let a=this.getTermFromExpression(e.args[0],t);return oe.BuiltInFunctions.datatype(a).value;case"bound":if(e.args[0].type==="variable"){let G=t.get(e.args[0].name);return oe.BuiltInFunctions.bound(G)}return!0;case"isiri":case"isuri":let c=this.getTermFromExpression(e.args[0],t);return oe.BuiltInFunctions.isIRI(c);case"isblank":let u=this.getTermFromExpression(e.args[0],t);return oe.BuiltInFunctions.isBlank(u);case"isliteral":let f=this.getTermFromExpression(e.args[0],t);return oe.BuiltInFunctions.isLiteral(f);case"regex":let l=this.getStringValue(this.evaluateExpression(e.args[0],t)),h=this.getStringValue(this.evaluateExpression(e.args[1],t)),p=e.args[2]?this.getStringValue(this.evaluateExpression(e.args[2],t)):void 0;return oe.BuiltInFunctions.regex(l,h,p);case"contains":let g=this.getStringValue(this.evaluateExpression(e.args[0],t)),v=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.contains(g,v);case"strstarts":let S=this.getStringValue(this.evaluateExpression(e.args[0],t)),A=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.strStarts(S,A);case"strends":let F=this.getStringValue(this.evaluateExpression(e.args[0],t)),D=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.strEnds(F,D);case"strlen":let U=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.strlen(U);case"ucase":let H=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.ucase(H);case"lcase":let ne=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.lcase(ne);case"substr":let Fe=this.getStringValue(this.evaluateExpression(e.args[0],t)),it=Number(this.evaluateExpression(e.args[1],t));if(e.args[2]){let G=Number(this.evaluateExpression(e.args[2],t));return oe.BuiltInFunctions.substr(Fe,it,G)}return oe.BuiltInFunctions.substr(Fe,it);case"strbefore":let pt=this.getStringValue(this.evaluateExpression(e.args[0],t)),V=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.strBefore(pt,V);case"strafter":let ce=this.getStringValue(this.evaluateExpression(e.args[0],t)),Ae=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.strAfter(ce,Ae);case"concat":let Qe=e.args.map(G=>this.getStringValue(this.evaluateExpression(G,t)));return oe.BuiltInFunctions.concat(...Qe);case"replace":let Be=this.getStringValue(this.evaluateExpression(e.args[0],t)),We=this.getStringValue(this.evaluateExpression(e.args[1],t)),Pe=this.getStringValue(this.evaluateExpression(e.args[2],t)),Ie=e.args[3]?this.getStringValue(this.evaluateExpression(e.args[3],t)):void 0;return oe.BuiltInFunctions.replace(Be,We,Pe,Ie);case"parsedate":let Ce=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.parseDate(Ce);case"datebefore":let $=this.getStringValue(this.evaluateExpression(e.args[0],t)),I=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.dateBefore($,I);case"dateafter":let Ne=this.getStringValue(this.evaluateExpression(e.args[0],t)),qe=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.dateAfter(Ne,qe);case"dateinrange":let j=this.getStringValue(this.evaluateExpression(e.args[0],t)),le=this.getStringValue(this.evaluateExpression(e.args[1],t)),be=this.getStringValue(this.evaluateExpression(e.args[2],t));return oe.BuiltInFunctions.dateInRange(j,le,be);case"datediffminutes":let B=this.getStringValue(this.evaluateExpression(e.args[0],t)),Se=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.dateDiffMinutes(B,Se);case"datediffhours":let we=this.getStringValue(this.evaluateExpression(e.args[0],t)),ge=this.getStringValue(this.evaluateExpression(e.args[1],t));return oe.BuiltInFunctions.dateDiffHours(we,ge);case"year":let Ee=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.year(Ee);case"month":let ue=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.month(ue);case"day":let ye=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.day(ye);case"hours":let fe=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.hours(fe);case"minutes":let _e=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.minutes(_e);case"seconds":let Te=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.seconds(Te);case"timezone":case"tz":let Q=this.getStringValue(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.timezone(Q);case"now":return oe.BuiltInFunctions.now();case"mstominutes":let ee=Number(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.msToMinutes(ee);case"mstohours":let te=Number(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.msToHours(te);case"mstoseconds":let J=Number(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.msToSeconds(J);case"abs":let X=Number(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.abs(X);case"round":let Z=Number(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.round(Z);case"ceil":let Y=Number(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.ceil(Y);case"floor":let re=Number(this.evaluateExpression(e.args[0],t));return oe.BuiltInFunctions.floor(re);case"rand":return oe.BuiltInFunctions.rand();case"coalesce":for(let G of e.args)try{let W=this.evaluateExpression(G,t);if(W!=null)return W}catch{continue}return;case"if":if(!e.args||e.args.length!==3)throw new Ct("IF requires exactly 3 arguments");let ie=this.evaluateExpression(e.args[0],t);return this.toBoolean(ie)?this.evaluateExpression(e.args[1],t):this.evaluateExpression(e.args[2],t);default:throw new Ct(`Unknown function: ${i}`)}}getTermFromExpression(e,t){if(e.type==="variable")return t.get(e.name)}getStringValue(e){return e==null?"":typeof e=="object"&&"value"in e?String(e.value):String(e)}toBoolean(e){if(typeof e=="boolean")return e;if(typeof e=="number")return!isNaN(e)&&e!==0;if(typeof e=="string")return e.length>0;if(e instanceof iu.Literal){let t=e.datatype?.value||"";if(t.includes("#boolean"))return e.value==="true"||e.value==="1";if(t.includes("#integer")||t.includes("#decimal")||t.includes("#double")||t.includes("#float")){let i=parseFloat(e.value);return!isNaN(i)&&i!==0}return e.value.length>0}return!!e}};xs.FilterExecutor=Xd});var tp=y(nu=>{"use strict";Object.defineProperty(nu,"__esModule",{value:!0});nu.OptionalExecutor=void 0;var ep=class{static{o(this,"OptionalExecutor")}async*execute(e,t){let i=[];for await(let s of e)i.push(s);let n=[];for await(let s of t)n.push(s);for(let s of i){let a=!1;for(let c of n){let u=s.merge(c);u!==null&&(yield u,a=!0)}a||(yield s)}}async executeAll(e,t){let i=[];async function*n(){for(let a of e)yield a}o(n,"generateLeft");async function*s(){for(let a of t)yield a}o(s,"generateRight");for await(let a of this.execute(n(),s()))i.push(a);return i}};nu.OptionalExecutor=ep});var ip=y(su=>{"use strict";Object.defineProperty(su,"__esModule",{value:!0});su.UnionExecutor=void 0;var rp=class{static{o(this,"UnionExecutor")}async*execute(e,t){let i=new Set;for await(let n of e){let s=this.getSolutionKey(n);i.has(s)||(i.add(s),yield n)}for await(let n of t){let s=this.getSolutionKey(n);i.has(s)||(i.add(s),yield n)}}async executeAll(e,t){let i=[];async function*n(){for(let a of e)yield a}o(n,"generateLeft");async function*s(){for(let a of t)yield a}o(s,"generateRight");for await(let a of this.execute(n(),s()))i.push(a);return i}getSolutionKey(e){let t=e.toJSON();return Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("|")}};su.UnionExecutor=rp});var ug=y(au=>{"use strict";Object.defineProperty(au,"__esModule",{value:!0});au.ConstructExecutor=void 0;var ux=An(),cg=xt(),lx=Gt(),fx=oi(),np=class{static{o(this,"ConstructExecutor")}async execute(e,t){let i=[],n=new Set;for(let s of t)for(let a of e)try{let c=this.instantiateTriple(a,s),u=`${c.subject.toString()}|${c.predicate.toString()}|${c.object.toString()}`;n.has(u)||(n.add(u),i.push(c))}catch{continue}return i}instantiateTriple(e,t){if(this.isPropertyPath(e.predicate))throw new Error("Property paths are not supported in CONSTRUCT templates");let i=this.instantiateElement(e.subject,t),n=this.instantiateElement(e.predicate,t),s=this.instantiateElement(e.object,t);return new ux.Triple(i,n,s)}isPropertyPath(e){return e.type==="path"}instantiateElement(e,t){if(e.type==="variable"){let i=t.get(e.value);if(!i)throw new Error(`Unbound variable: ${e.value}`);return i}if(e.type==="iri")return new cg.IRI(e.value);if(e.type==="literal")return new lx.Literal(e.value,e.datatype?new cg.IRI(e.datatype):void 0,e.language);if(e.type==="blank")return new fx.BlankNode(e.value);throw new Error(`Unknown element type: ${e.type}`)}};au.ConstructExecutor=np});var lg=y(ou=>{"use strict";Object.defineProperty(ou,"__esModule",{value:!0});ou.DescribeExecutor=void 0;var hx=xt(),sp=class{static{o(this,"DescribeExecutor")}constructor(e){this.tripleStore=e}async execute(e){let t=[],i=new Set;for(let n of e){let s=await this.describeResource(n);for(let a of s){let c=`${a.subject.toString()}|${a.predicate.toString()}|${a.object.toString()}`;i.has(c)||(i.add(c),t.push(a))}}return t}async describeResource(e){let t=[],i=await this.tripleStore.match(e,void 0,void 0);t.push(...i);let n=await this.tripleStore.match(void 0,void 0,e);return t.push(...n),t}async describeByIRI(e){let t=new hx.IRI(e);return this.execute([t])}};ou.DescribeExecutor=sp});var fg=y(cu=>{"use strict";Object.defineProperty(cu,"__esModule",{value:!0});cu.MinusExecutor=void 0;var ap=class{static{o(this,"MinusExecutor")}async*execute(e,t){let i=[];for await(let s of e)i.push(s);let n=[];for await(let s of t)n.push(s);for(let s of i){let a=!1;for(let c of n)if(this.areCompatible(s,c)){a=!0;break}a||(yield s)}}async executeAll(e,t){let i=[];async function*n(){for(let a of e)yield a}o(n,"generateLeft");async function*s(){for(let a of t)yield a}o(s,"generateRight");for await(let a of this.execute(n(),s()))i.push(a);return i}areCompatible(e,t){let i=e.variables(),n=new Set(t.variables()),s=i.filter(a=>n.has(a));if(s.length===0)return!1;for(let a of s){let c=e.get(a),u=t.get(a);if(c===void 0||u===void 0||c.toString()!==u.toString())return!1}return!0}};cu.MinusExecutor=ap});var dg=y(As=>{"use strict";Object.defineProperty(As,"__esModule",{value:!0});As.ValuesExecutor=As.ValuesExecutorError=void 0;var dx=xa(),hg=xt(),px=Gt(),uu=class extends Error{static{o(this,"ValuesExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="ValuesExecutorError"}};As.ValuesExecutorError=uu;var op=class{static{o(this,"ValuesExecutor")}async*execute(e){if(e.bindings.length!==0)for(let t of e.bindings)yield this.createSolutionMapping(t)}async executeAll(e){let t=[];for await(let i of this.execute(e))t.push(i);return t}createSolutionMapping(e){let t=new dx.SolutionMapping;for(let[i,n]of Object.entries(e)){let s=this.toRDFTerm(n);t.set(i,s)}return t}toRDFTerm(e){if(e.type==="iri")return new hg.IRI(e.value);if(e.type==="literal")return new px.Literal(e.value,e.datatype?new hg.IRI(e.datatype):void 0,e.language);throw new uu(`Unknown term type: ${e.type}`)}};As.ValuesExecutor=op});var mg=y(Os=>{"use strict";Object.defineProperty(Os,"__esModule",{value:!0});Os.AggregateExecutor=Os.AggregateExecutorError=void 0;var sr=Gt(),up=xt(),pg=new up.IRI("http://www.w3.org/2001/XMLSchema#integer"),Fa=new up.IRI("http://www.w3.org/2001/XMLSchema#decimal"),$n=new up.IRI("http://www.w3.org/2001/XMLSchema#string"),lu=class extends Error{static{o(this,"AggregateExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="AggregateExecutorError"}};Os.AggregateExecutorError=lu;var cp=class{static{o(this,"AggregateExecutor")}execute(e,t){let i=this.groupSolutions(t,e.variables),n=[];for(let[s,a]of i.entries()){let c=new Map;for(let u of e.variables)if(a.length>0){let f=a[0].get(u);f&&c.set(u,f)}for(let u of e.aggregates){let f=this.computeAggregate(u.expression,a);c.set(u.variable,f)}if(a.length>0){let u=a[0].clone();for(let[f,l]of c.entries())u.set(f,l);n.push(u)}else{let u=new(a[0]?.constructor||Map);for(let[f,l]of c.entries())u.set(f,l);n.push(u)}}if(n.length===0&&e.aggregates.length>0){let s=this.createEmptyAggregateResult(e);s&&n.push(s)}return n}groupSolutions(e,t){let i=new Map;if(t.length===0)return i.set("",e),i;for(let n of e){let s=this.computeGroupKey(n,t),a=i.get(s);a?a.push(n):i.set(s,[n])}return i}computeGroupKey(e,t){return t.map(i=>{let n=e.get(i);return n?this.termToString(n):""}).join("|")}termToString(e){if(e&&typeof e=="object"){if("value"in e)return String(e.value);if("id"in e)return String(e.id)}return String(e)}computeAggregate(e,t){let i=this.extractValues(e,t);switch(e.aggregation){case"count":{let n=this.computeCount(i,e.distinct);return new sr.Literal(String(n),pg)}case"sum":{let n=this.computeSum(i);return new sr.Literal(String(n),Fa)}case"avg":{let n=this.computeAvg(i);return new sr.Literal(String(n),Fa)}case"min":{let n=this.computeMin(i);return n===void 0?new sr.Literal("",$n):typeof n=="number"?new sr.Literal(String(n),Fa):new sr.Literal(String(n),$n)}case"max":{let n=this.computeMax(i);return n===void 0?new sr.Literal("",$n):typeof n=="number"?new sr.Literal(String(n),Fa):new sr.Literal(String(n),$n)}case"group_concat":{let n=this.computeGroupConcat(i,e.separator||" ",e.distinct);return new sr.Literal(n||" ",$n)}default:throw new lu(`Unknown aggregation function: ${e.aggregation}`)}}extractValues(e,t){if(!e.expression)return t.map(()=>1);let i=[];for(let n of t){let s=this.evaluateExpression(e.expression,n);s!=null&&i.push(s)}return i}evaluateExpression(e,t){if(e.type==="variable"){let i=t.get(e.name);return i?typeof i=="object"&&"value"in i?i.value:i:void 0}if(e.type==="literal")return e.value}computeCount(e,t){return t?new Set(e.map(i=>String(i))).size:e.length}computeSum(e){return e.map(i=>parseFloat(String(i))).filter(i=>!isNaN(i)).reduce((i,n)=>i+n,0)}computeAvg(e){let t=e.map(i=>parseFloat(String(i))).filter(i=>!isNaN(i));return t.length===0?0:t.reduce((i,n)=>i+n,0)/t.length}computeMin(e){if(e.length===0)return;let t=e.map(n=>parseFloat(String(n))).filter(n=>!isNaN(n));if(t.length>0)return Math.min(...t);let i=e.map(n=>String(n));return i.reduce((n,s)=>s<n?s:n,i[0])}computeMax(e){if(e.length===0)return;let t=e.map(n=>parseFloat(String(n))).filter(n=>!isNaN(n));if(t.length>0)return Math.max(...t);let i=e.map(n=>String(n));return i.reduce((n,s)=>s>n?s:n,i[0])}computeGroupConcat(e,t,i){let n=e.map(s=>String(s));return i&&(n=[...new Set(n)]),n.join(t)}createEmptyAggregateResult(e){let{SolutionMapping:t}=xa(),i=new t;for(let n of e.aggregates)switch(n.expression.aggregation){case"count":i.set(n.variable,new sr.Literal("0",pg));break;case"sum":case"avg":i.set(n.variable,new sr.Literal("0",Fa));break;case"group_concat":i.set(n.variable,new sr.Literal(" ",$n));break;default:i.set(n.variable,new sr.Literal("",$n))}return i}};Os.AggregateExecutor=cp});var gg=y(Cs=>{"use strict";Object.defineProperty(Cs,"__esModule",{value:!0});Cs.QueryExecutor=Cs.QueryExecutorError=void 0;var mx=Kd(),gx=Zd(),yx=tp(),_x=ip(),vx=fg(),bx=dg(),Sx=mg(),fu=class extends Error{static{o(this,"QueryExecutorError")}constructor(e,t){super(e,t?{cause:t}:void 0),this.name="QueryExecutorError"}};Cs.QueryExecutorError=fu;var lp=class{static{o(this,"QueryExecutor")}constructor(e){this.bgpExecutor=new mx.BGPExecutor(e),this.filterExecutor=new gx.FilterExecutor,this.optionalExecutor=new yx.OptionalExecutor,this.unionExecutor=new _x.UnionExecutor,this.minusExecutor=new vx.MinusExecutor,this.valuesExecutor=new bx.ValuesExecutor,this.aggregateExecutor=new Sx.AggregateExecutor,this.filterExecutor.setExistsEvaluator(async(t,i)=>this.evaluateExistsPattern(t,i))}async evaluateExistsPattern(e,t){for await(let i of this.execute(e))if(t.merge(i)!==null)return!0;return!1}async executeAll(e){let t=[];for await(let i of this.execute(e))t.push(i);return t}async*execute(e){switch(e.type){case"bgp":yield*this.executeBGP(e);break;case"filter":yield*this.executeFilter(e);break;case"join":yield*this.executeJoin(e);break;case"leftjoin":yield*this.executeLeftJoin(e);break;case"union":yield*this.executeUnion(e);break;case"minus":yield*this.executeMinus(e);break;case"values":yield*this.executeValues(e);break;case"project":yield*this.executeProject(e);break;case"orderby":yield*this.executeOrderBy(e);break;case"slice":yield*this.executeSlice(e);break;case"distinct":yield*this.executeDistinct(e);break;case"group":yield*this.executeGroup(e);break;case"extend":yield*this.executeExtend(e);break;case"subquery":yield*this.executeSubquery(e);break;default:throw new fu(`Unknown operation type: ${e.type}`)}}async*executeBGP(e){yield*this.bgpExecutor.execute(e)}async*executeFilter(e){let t=this.execute(e.input);yield*this.filterExecutor.execute(e,t)}async*executeJoin(e){let t=[];for await(let i of this.execute(e.left))t.push(i);for(let i of t)for await(let n of this.execute(e.right)){let s=i.merge(n);s!==null&&(yield s)}}async*executeLeftJoin(e){let t=[];for await(let a of this.execute(e.left))t.push(a);let i=[];for await(let a of this.execute(e.right))i.push(a);async function*n(){for(let a of t)yield a}o(n,"leftGen");async function*s(){for(let a of i)yield a}o(s,"rightGen"),yield*this.optionalExecutor.execute(n(),s())}async*executeUnion(e){let t=[];for await(let a of this.execute(e.left))t.push(a);let i=[];for await(let a of this.execute(e.right))i.push(a);async function*n(){for(let a of t)yield a}o(n,"leftGen");async function*s(){for(let a of i)yield a}o(s,"rightGen"),yield*this.unionExecutor.execute(n(),s())}async*executeMinus(e){let t=[];for await(let a of this.execute(e.left))t.push(a);let i=[];for await(let a of this.execute(e.right))i.push(a);async function*n(){for(let a of t)yield a}o(n,"leftGen");async function*s(){for(let a of i)yield a}o(s,"rightGen"),yield*this.minusExecutor.execute(n(),s())}async*executeValues(e){yield*this.valuesExecutor.execute(e)}async*executeProject(e){for await(let t of this.execute(e.input))yield t}async*executeOrderBy(e){let t=[];for await(let i of this.execute(e.input))t.push(i);t.sort((i,n)=>{for(let s of e.comparators){let a=this.getExpressionValue(s.expression,i),c=this.getExpressionValue(s.expression,n),u=0;if(a===void 0&&c===void 0?u=0:a===void 0?u=1:c===void 0?u=-1:typeof a=="number"&&typeof c=="number"?u=a-c:u=String(a).localeCompare(String(c)),s.descending&&(u=-u),u!==0)return u}return 0});for(let i of t)yield i}async*executeSlice(e){let t=0,i=e.offset??0,n=e.limit;for await(let s of this.execute(e.input)){if(t>=i){if(n!==void 0&&t-i>=n)break;yield s}t++}}async*executeDistinct(e){let t=new Set;for await(let i of this.execute(e.input)){let n=this.getSolutionKey(i);t.has(n)||(t.add(n),yield i)}}async*executeGroup(e){let t=[];for await(let n of this.execute(e.input))t.push(n);let i=this.aggregateExecutor.execute(e,t);for(let n of i)yield n}async*executeExtend(e){for await(let t of this.execute(e.input)){let i=t.clone(),n=this.evaluateExtendExpression(e.expression,t);n!==void 0&&i.set(e.variable,n),yield i}}async*executeSubquery(e){yield*this.execute(e.query)}evaluateExtendExpression(e,t){if(e.type!=="aggregate")try{return this.filterExecutor.evaluateExpression(e,t)}catch{return}}getExpressionValue(e,t){if(e.type==="variable"){let i=t.get(e.name);return i?i.value??i.id??String(i):void 0}return e.value}getSolutionKey(e){let t=e.toJSON();return Object.keys(t).sort().map(n=>`${n}=${t[n]}`).join("|")}};Cs.QueryExecutor=lp});var _g=y(hu=>{"use strict";Object.defineProperty(hu,"__esModule",{value:!0});hu.AggregateFunctions=void 0;var fp=Gt(),yg=xt(),hp=class{static{o(this,"AggregateFunctions")}static count(e,t){if(!t)return e.length;let i=0;for(let n of e)n.has(t)&&i++;return i}static countDistinct(e,t){let i=new Set;for(let n of e){let s=n.get(t);s&&i.add(s.toString())}return i.size}static sum(e,t){let i=0;for(let n of e){let s=n.get(t);if(s instanceof fp.Literal){let a=this.toNumber(s);isNaN(a)||(i+=a)}}return i}static avg(e,t){let i=this.sum(e,t),n=this.count(e,t);return n>0?i/n:0}static min(e,t){let i=null;for(let n of e){let s=n.get(t);if(!s)continue;let a=this.toComparable(s);(i===null||a<i)&&(i=a)}return i}static max(e,t){let i=null;for(let n of e){let s=n.get(t);if(!s)continue;let a=this.toComparable(s);(i===null||a>i)&&(i=a)}return i}static groupConcat(e,t,i=" "){let n=[];for(let s of e){let a=s.get(t);a&&(a instanceof fp.Literal||a instanceof yg.IRI?n.push(a.value):n.push(a.toString()))}return n.join(i)}static toNumber(e){let t=e.datatype?.value;return t?.includes("#integer")||t?.includes("#decimal")||t?.includes("#double"),parseFloat(e.value)}static toComparable(e){if(e instanceof fp.Literal){let t=this.toNumber(e);return isNaN(t)?e.value:t}return e instanceof yg.IRI?e.value:String(e)}};hu.AggregateFunctions=hp});var vg=y(du=>{"use strict";Object.defineProperty(du,"__esModule",{value:!0});du.QueryPlanCache=void 0;var wx=Td(),dp=class{static{o(this,"QueryPlanCache")}constructor(e=100){this.hits=0,this.misses=0,this.cache=new wx.LRUCache(e)}get(e){let t=this.normalizeQuery(e),i=this.cache.get(t);return i!==void 0?this.hits++:this.misses++,i}set(e,t){let i=this.normalizeQuery(e);this.cache.set(i,t)}has(e){let t=this.normalizeQuery(e);return this.cache.get(t)!==void 0}clear(){this.cache.clear()}getStats(){let e=this.hits+this.misses;return{hits:this.hits,misses:this.misses,hitRate:e>0?this.hits/e:0,size:this.cache.size()}}resetStats(){this.hits=0,this.misses=0}normalizeQuery(e){return e.replace(/\s+/g," ").trim()}};du.QueryPlanCache=dp});var bg=y(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.FileAlreadyExistsError=Fs.FileNotFoundError=void 0;var pp=class extends Error{static{o(this,"FileNotFoundError")}constructor(e){super(`File not found: ${e}`),this.name="FileNotFoundError"}};Fs.FileNotFoundError=pp;var mp=class extends Error{static{o(this,"FileAlreadyExistsError")}constructor(e){super(`File already exists: ${e}`),this.name="FileAlreadyExistsError"}};Fs.FileAlreadyExistsError=mp});var Sg=y(rn=>{"use strict";Object.defineProperty(rn,"__esModule",{value:!0});rn.container=void 0;rn.registerCoreServices=Hx;rn.createChildContainer=zx;rn.getContainer=Kx;rn.resetContainer=Yx;ql();var Pa=Ke();Object.defineProperty(rn,"container",{enumerable:!0,get:o(function(){return Pa.container},"get")});var Ze=Xe(),Ex=Th(),Tx=wc(),xx=Ec(),Ax=Kh(),Ox=Ah(),Cx=Rh(),Fx=Ph(),Px=Cc(),Dx=Fc(),Rx=Bh(),Ix=Gh(),Nx=Qh(),kx=Vh(),jx=rd(),Mx=ad(),Lx=nd(),qx=jh(),Vx=Lh(),Ux=ed(),Bx=Xh(),$x=Fd(),Gx=Nh(),Wx=cd();function Hx(r){let e=r||Pa.container;e.registerSingleton(Ze.DI_TOKENS.TaskFrontmatterGenerator,Tx.TaskFrontmatterGenerator),e.registerSingleton(Ze.DI_TOKENS.AlgorithmExtractor,xx.AlgorithmExtractor),e.registerSingleton(Ze.DI_TOKENS.EffortStatusWorkflow,Px.EffortStatusWorkflow),e.registerSingleton(Ze.DI_TOKENS.StatusTimestampService,Dx.StatusTimestampService),e.registerSingleton(Ze.DI_TOKENS.TaskStatusService,Fx.TaskStatusService),e.registerSingleton(Ze.DI_TOKENS.TaskCreationService,Ex.TaskCreationService),e.registerSingleton(Ze.DI_TOKENS.ProjectCreationService,Ox.ProjectCreationService),e.registerSingleton(Ze.DI_TOKENS.AreaCreationService,Cx.AreaCreationService),e.registerSingleton(Ze.DI_TOKENS.ClassCreationService,qx.ClassCreationService),e.registerSingleton(Ze.DI_TOKENS.ConceptCreationService,Vx.ConceptCreationService),e.registerSingleton(Ze.DI_TOKENS.FleetingNoteCreationService,Ux.FleetingNoteCreationService),e.registerSingleton(Ze.DI_TOKENS.SupervisionCreationService,Bx.SupervisionCreationService),e.registerSingleton(Ze.DI_TOKENS.PropertyCleanupService,Ax.PropertyCleanupService),e.registerSingleton(Ze.DI_TOKENS.FolderRepairService,Rx.FolderRepairService),e.registerSingleton(Ze.DI_TOKENS.LabelToAliasService,Ix.LabelToAliasService),e.registerSingleton(Ze.DI_TOKENS.RenameToUidService,Nx.RenameToUidService),e.registerSingleton(Ze.DI_TOKENS.PlanningService,jx.PlanningService),e.registerSingleton(Ze.DI_TOKENS.EffortVotingService,kx.EffortVotingService),e.registerSingleton(Ze.DI_TOKENS.SessionEventService,Mx.SessionEventService),e.registerSingleton(Ze.DI_TOKENS.AssetConversionService,Lx.AssetConversionService),e.registerSingleton(Ze.DI_TOKENS.NoteToRDFConverter,$x.NoteToRDFConverter),e.registerSingleton(Ze.DI_TOKENS.AreaHierarchyBuilder,Gx.AreaHierarchyBuilder),e.registerSingleton(Ze.DI_TOKENS.URIConstructionService,Wx.URIConstructionService)}o(Hx,"registerCoreServices");function zx(){return Pa.container.createChildContainer()}o(zx,"createChildContainer");function Kx(){return Pa.container}o(Kx,"getContainer");function Yx(){Pa.container.reset()}o(Yx,"resetContainer")});var fi=y(pu=>{"use strict";Object.defineProperty(pu,"__esModule",{value:!0});pu.ErrorCode=void 0;var wg;(function(r){r[r.INVALID_INPUT=1e3]="INVALID_INPUT",r[r.INVALID_FORMAT=1001]="INVALID_FORMAT",r[r.MISSING_REQUIRED_FIELD=1002]="MISSING_REQUIRED_FIELD",r[r.INVALID_SCHEMA=1003]="INVALID_SCHEMA",r[r.NETWORK_ERROR=2e3]="NETWORK_ERROR",r[r.REQUEST_TIMEOUT=2001]="REQUEST_TIMEOUT",r[r.CONNECTION_FAILED=2002]="CONNECTION_FAILED",r[r.FILE_READ_ERROR=2003]="FILE_READ_ERROR",r[r.FILE_WRITE_ERROR=2004]="FILE_WRITE_ERROR",r[r.INVALID_STATE=3e3]="INVALID_STATE",r[r.INVALID_TRANSITION=3001]="INVALID_TRANSITION",r[r.OPERATION_FAILED=3002]="OPERATION_FAILED",r[r.CONCURRENT_MODIFICATION=3003]="CONCURRENT_MODIFICATION",r[r.PERMISSION_DENIED=4e3]="PERMISSION_DENIED",r[r.UNAUTHORIZED=4001]="UNAUTHORIZED",r[r.FORBIDDEN=4003]="FORBIDDEN",r[r.NOT_FOUND=5e3]="NOT_FOUND",r[r.RESOURCE_EXHAUSTED=5001]="RESOURCE_EXHAUSTED",r[r.ALREADY_EXISTS=5002]="ALREADY_EXISTS",r[r.UNKNOWN_ERROR=9e3]="UNKNOWN_ERROR",r[r.INTERNAL_ERROR=9001]="INTERNAL_ERROR"})(wg||(pu.ErrorCode=wg={}))});var hi=y(mu=>{"use strict";Object.defineProperty(mu,"__esModule",{value:!0});mu.ApplicationError=void 0;var gp=class extends Error{static{o(this,"ApplicationError")}constructor(e,t){super(e),this.name=this.constructor.name,this.context=t,this.timestamp=new Date,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}format(){let e=`\u274C ${this.name}: ${this.message}`;if(this.guidance&&(e+=`

\u{1F4A1} ${this.guidance}`),this.context&&Object.keys(this.context).length>0){e+=`

\u{1F4CB} Context:`;for(let[t,i]of Object.entries(this.context))e+=`
  ${t}: ${JSON.stringify(i)}`}return e}toJSON(){return{name:this.name,message:this.message,code:this.code,retriable:this.retriable,timestamp:this.timestamp.toISOString(),context:this.context,stack:this.stack}}};mu.ApplicationError=gp});var Eg=y(gu=>{"use strict";Object.defineProperty(gu,"__esModule",{value:!0});gu.ValidationError=void 0;var Qx=hi(),Jx=fi(),yp=class extends Qx.ApplicationError{static{o(this,"ValidationError")}constructor(e,t){super(e,t),this.code=Jx.ErrorCode.INVALID_INPUT,this.retriable=!1,this.guidance=`Check the input data for correctness.
Common issues:
  \u2022 Missing required fields
  \u2022 Invalid data format or type
  \u2022 Values outside allowed range
  \u2022 Schema validation failed`}};gu.ValidationError=yp});var Tg=y(yu=>{"use strict";Object.defineProperty(yu,"__esModule",{value:!0});yu.NetworkError=void 0;var Xx=hi(),Zx=fi(),_p=class extends Xx.ApplicationError{static{o(this,"NetworkError")}constructor(e,t){super(e,t),this.code=Zx.ErrorCode.NETWORK_ERROR,this.retriable=!0,this.guidance=`This is typically a transient network issue.
To resolve:
  \u2022 Check your internet connection
  \u2022 Retry the operation
  \u2022 Verify external services are available
  \u2022 Check firewall/proxy settings`}};yu.NetworkError=_p});var xg=y(_u=>{"use strict";Object.defineProperty(_u,"__esModule",{value:!0});_u.StateTransitionError=void 0;var eA=hi(),tA=fi(),vp=class extends eA.ApplicationError{static{o(this,"StateTransitionError")}constructor(e,t){super(e,t),this.code=tA.ErrorCode.INVALID_TRANSITION,this.retriable=!1,this.guidance=`The requested state transition is not allowed.
To fix:
  \u2022 Check the current state of the resource
  \u2022 Verify the transition is valid for this workflow
  \u2022 Review state machine documentation
  \u2022 Ensure no concurrent modifications occurred`}};_u.StateTransitionError=vp});var Ag=y(vu=>{"use strict";Object.defineProperty(vu,"__esModule",{value:!0});vu.PermissionError=void 0;var rA=hi(),iA=fi(),bp=class extends rA.ApplicationError{static{o(this,"PermissionError")}constructor(e,t){super(e,t),this.code=iA.ErrorCode.PERMISSION_DENIED,this.retriable=!1,this.guidance=`You don't have permission to perform this operation.
To resolve:
  \u2022 Check file/directory permissions
  \u2022 Verify you're authenticated
  \u2022 Ensure you have sufficient privileges
  \u2022 Contact administrator if access is needed`}};vu.PermissionError=bp});var Og=y(bu=>{"use strict";Object.defineProperty(bu,"__esModule",{value:!0});bu.NotFoundError=void 0;var nA=hi(),sA=fi(),Sp=class extends nA.ApplicationError{static{o(this,"NotFoundError")}constructor(e,t){super(e,t),this.code=sA.ErrorCode.NOT_FOUND,this.retriable=!1,this.guidance=`The requested resource could not be found.
To resolve:
  \u2022 Verify the resource path/ID is correct
  \u2022 Check the resource exists
  \u2022 Ensure proper file extension (.md for notes)
  \u2022 Verify resource hasn't been deleted`}};bu.NotFoundError=Sp});var Cg=y(Su=>{"use strict";Object.defineProperty(Su,"__esModule",{value:!0});Su.ResourceExhaustedError=void 0;var aA=hi(),oA=fi(),wp=class extends aA.ApplicationError{static{o(this,"ResourceExhaustedError")}constructor(e,t){super(e,t),this.code=oA.ErrorCode.RESOURCE_EXHAUSTED,this.retriable=!0,this.guidance=`A resource limit has been exceeded.
To resolve:
  \u2022 Free up system resources (memory, disk space)
  \u2022 Reduce the size of your request
  \u2022 Wait and retry (for rate limits)
  \u2022 Close unused files/connections
  \u2022 Paginate large queries`}};Su.ResourceExhaustedError=wp});var Fg=y(wu=>{"use strict";Object.defineProperty(wu,"__esModule",{value:!0});wu.ServiceError=void 0;var cA=hi(),uA=fi(),Ep=class extends cA.ApplicationError{static{o(this,"ServiceError")}constructor(e,t){super(e,t),this.code=uA.ErrorCode.INTERNAL_ERROR,this.retriable=!1,this.guidance=`This is an internal service error.
To resolve:
  \u2022 Check service initialization parameters
  \u2022 Verify all required dependencies are available
  \u2022 Review service logs for detailed error information
  \u2022 Contact support if the issue persists`}};wu.ServiceError=Ep});var Pg=y(ut=>{"use strict";Object.defineProperty(ut,"__esModule",{value:!0});ut.ServiceError=ut.ResourceExhaustedError=ut.NotFoundError=ut.PermissionError=ut.StateTransitionError=ut.NetworkError=ut.ValidationError=ut.ApplicationError=ut.ErrorCode=void 0;var lA=fi();Object.defineProperty(ut,"ErrorCode",{enumerable:!0,get:o(function(){return lA.ErrorCode},"get")});var fA=hi();Object.defineProperty(ut,"ApplicationError",{enumerable:!0,get:o(function(){return fA.ApplicationError},"get")});var hA=Eg();Object.defineProperty(ut,"ValidationError",{enumerable:!0,get:o(function(){return hA.ValidationError},"get")});var dA=Tg();Object.defineProperty(ut,"NetworkError",{enumerable:!0,get:o(function(){return dA.NetworkError},"get")});var pA=xg();Object.defineProperty(ut,"StateTransitionError",{enumerable:!0,get:o(function(){return pA.StateTransitionError},"get")});var mA=Ag();Object.defineProperty(ut,"PermissionError",{enumerable:!0,get:o(function(){return mA.PermissionError},"get")});var gA=Og();Object.defineProperty(ut,"NotFoundError",{enumerable:!0,get:o(function(){return gA.NotFoundError},"get")});var yA=Cg();Object.defineProperty(ut,"ResourceExhaustedError",{enumerable:!0,get:o(function(){return yA.ResourceExhaustedError},"get")});var _A=Fg();Object.defineProperty(ut,"ServiceError",{enumerable:!0,get:o(function(){return _A.ServiceError},"get")})});var Dg=y(Eu=>{"use strict";Object.defineProperty(Eu,"__esModule",{value:!0});Eu.ApplicationErrorHandler=void 0;var Tp=hi(),vA=fi(),xp=class{static{o(this,"ApplicationErrorHandler")}constructor(e={},t,i){this.logger=t,this.notifier=i,this.telemetryHooks=new Set,this.retryConfig={maxRetries:e.maxRetries??3,initialDelayMs:e.initialDelayMs??1e3,backoffMultiplier:e.backoffMultiplier??2,maxDelayMs:e.maxDelayMs??1e4}}handle(e,t){let i=this.ensureApplicationError(e,t);return this.notifier&&this.notifier.error(i.message),this.callTelemetryHooks("onError",i,t),this.formatError(i)}async executeWithRetry(e,t){let i,n=0;for(;n<=this.retryConfig.maxRetries;)try{return await e()}catch(s){if(i=this.ensureApplicationError(s,t),!i.retriable||n>=this.retryConfig.maxRetries)throw this.callTelemetryHooks("onError",i,t),n>=this.retryConfig.maxRetries&&i.retriable&&this.callTelemetryHooks("onRetryExhausted",i,n+1),i;let a=this.calculateDelay(n);this.callTelemetryHooks("onRetry",i,n+1,a),this.logger?.debug(`Retrying after ${a}ms (attempt ${n+1}/${this.retryConfig.maxRetries})`),await this.sleep(a),n++}throw i}registerTelemetryHook(e){this.telemetryHooks.add(e)}unregisterTelemetryHook(e){this.telemetryHooks.delete(e)}ensureApplicationError(e,t){if(e instanceof Tp.ApplicationError){if(t){let n=e,s={...e.context,...t};return new class extends Tp.ApplicationError{constructor(){super(...arguments),this.code=n.code,this.retriable=n.retriable,this.guidance=n.guidance}}(e.message,s)}return e}return new class extends Tp.ApplicationError{static{o(this,"UnknownError")}constructor(s,a){super(s,{originalError:a.name,...t}),this.code=vA.ErrorCode.UNKNOWN_ERROR,this.retriable=!1,this.guidance="An unexpected error occurred"}}(e.message,e)}formatError(e){let t=[];return t.push(`\u274C ${e.name}: ${e.message}`),e.guidance&&t.push(`\u{1F4A1} ${e.guidance}`),e.context&&Object.keys(e.context).length>0&&t.push(`Context: ${JSON.stringify(e.context,null,2)}`),t.join(`
`)}calculateDelay(e){let t=this.retryConfig.initialDelayMs*Math.pow(this.retryConfig.backoffMultiplier,e);return Math.min(t,this.retryConfig.maxDelayMs)}sleep(e){return new Promise(t=>setTimeout(t,e))}callTelemetryHooks(e,...t){for(let i of this.telemetryHooks)try{let n=i[e];n&&n.apply(i,t)}catch(n){console.error("Error in telemetry hook:",n)}}};Eu.ApplicationErrorHandler=xp});var Rg=y(Tu=>{"use strict";Object.defineProperty(Tu,"__esModule",{value:!0});Tu.ApplicationErrorHandler=void 0;var bA=Dg();Object.defineProperty(Tu,"ApplicationErrorHandler",{enumerable:!0,get:o(function(){return bA.ApplicationErrorHandler},"get")})});var Gn=y(x=>{"use strict";var SA=x&&x.__createBinding||(Object.create?(function(r,e,t,i){i===void 0&&(i=t);var n=Object.getOwnPropertyDescriptor(e,t);(!n||("get"in n?!e.__esModule:n.writable||n.configurable))&&(n={enumerable:!0,get:o(function(){return e[t]},"get")}),Object.defineProperty(r,i,n)}):(function(r,e,t,i){i===void 0&&(i=t),r[i]=e[t]})),di=x&&x.__exportStar||function(r,e){for(var t in r)t!=="default"&&!Object.prototype.hasOwnProperty.call(e,t)&&SA(e,r,t)};Object.defineProperty(x,"__esModule",{value:!0});x.FileNotFoundError=x.QueryPlanCache=x.AggregateFunctions=x.BuiltInFunctions=x.SolutionMapping=x.QueryExecutor=x.DescribeExecutor=x.ConstructExecutor=x.UnionExecutor=x.OptionalExecutor=x.FilterExecutor=x.BGPExecutor=x.AlgebraSerializer=x.AlgebraOptimizer=x.AlgebraTranslator=x.SPARQLParseError=x.SPARQLParser=x.NoteToRDFConverter=x.RDFVocabularyMapper=x.InMemoryTripleStore=x.RDFSerializer=x.EffortSortingHelpers=x.MetadataExtractor=x.MetadataHelpers=x.WikiLinkHelpers=x.DateFormatter=x.FrontmatterService=x.URIConstructionService=x.SessionEventService=x.AssetConversionService=x.PlanningService=x.AlgorithmExtractor=x.TaskFrontmatterGenerator=x.FleetingNoteCreationService=x.SupervisionCreationService=x.StatusTimestampService=x.RenameToUidService=x.PropertyCleanupService=x.LoggingService=x.LabelToAliasService=x.FolderRepairService=x.EffortVotingService=x.EffortStatusWorkflow=x.ConceptCreationService=x.ClassCreationService=x.AreaHierarchyBuilder=x.AreaCreationService=x.TaskStatusService=x.ProjectCreationService=x.TaskCreationService=void 0;x.container=x.resetContainer=x.getContainer=x.createChildContainer=x.registerCoreServices=x.DI_TOKENS=x.FileAlreadyExistsError=void 0;di(nf(),x);di(sf(),x);di(I1(),x);di(k1(),x);di(M1(),x);di(q1(),x);di(U1(),x);di(e2(),x);var wA=Th();Object.defineProperty(x,"TaskCreationService",{enumerable:!0,get:o(function(){return wA.TaskCreationService},"get")});var EA=Ah();Object.defineProperty(x,"ProjectCreationService",{enumerable:!0,get:o(function(){return EA.ProjectCreationService},"get")});var TA=Ph();Object.defineProperty(x,"TaskStatusService",{enumerable:!0,get:o(function(){return TA.TaskStatusService},"get")});var xA=Rh();Object.defineProperty(x,"AreaCreationService",{enumerable:!0,get:o(function(){return xA.AreaCreationService},"get")});var AA=Nh();Object.defineProperty(x,"AreaHierarchyBuilder",{enumerable:!0,get:o(function(){return AA.AreaHierarchyBuilder},"get")});var OA=jh();Object.defineProperty(x,"ClassCreationService",{enumerable:!0,get:o(function(){return OA.ClassCreationService},"get")});var CA=Lh();Object.defineProperty(x,"ConceptCreationService",{enumerable:!0,get:o(function(){return CA.ConceptCreationService},"get")});var FA=Cc();Object.defineProperty(x,"EffortStatusWorkflow",{enumerable:!0,get:o(function(){return FA.EffortStatusWorkflow},"get")});var PA=Vh();Object.defineProperty(x,"EffortVotingService",{enumerable:!0,get:o(function(){return PA.EffortVotingService},"get")});var DA=Bh();Object.defineProperty(x,"FolderRepairService",{enumerable:!0,get:o(function(){return DA.FolderRepairService},"get")});var RA=Gh();Object.defineProperty(x,"LabelToAliasService",{enumerable:!0,get:o(function(){return RA.LabelToAliasService},"get")});var IA=Wh();Object.defineProperty(x,"LoggingService",{enumerable:!0,get:o(function(){return IA.LoggingService},"get")});var NA=Kh();Object.defineProperty(x,"PropertyCleanupService",{enumerable:!0,get:o(function(){return NA.PropertyCleanupService},"get")});var kA=Qh();Object.defineProperty(x,"RenameToUidService",{enumerable:!0,get:o(function(){return kA.RenameToUidService},"get")});var jA=Fc();Object.defineProperty(x,"StatusTimestampService",{enumerable:!0,get:o(function(){return jA.StatusTimestampService},"get")});var MA=Xh();Object.defineProperty(x,"SupervisionCreationService",{enumerable:!0,get:o(function(){return MA.SupervisionCreationService},"get")});var LA=ed();Object.defineProperty(x,"FleetingNoteCreationService",{enumerable:!0,get:o(function(){return LA.FleetingNoteCreationService},"get")});var qA=wc();Object.defineProperty(x,"TaskFrontmatterGenerator",{enumerable:!0,get:o(function(){return qA.TaskFrontmatterGenerator},"get")});var VA=Ec();Object.defineProperty(x,"AlgorithmExtractor",{enumerable:!0,get:o(function(){return VA.AlgorithmExtractor},"get")});var UA=rd();Object.defineProperty(x,"PlanningService",{enumerable:!0,get:o(function(){return UA.PlanningService},"get")});var BA=nd();Object.defineProperty(x,"AssetConversionService",{enumerable:!0,get:o(function(){return BA.AssetConversionService},"get")});var $A=ad();Object.defineProperty(x,"SessionEventService",{enumerable:!0,get:o(function(){return $A.SessionEventService},"get")});var GA=cd();Object.defineProperty(x,"URIConstructionService",{enumerable:!0,get:o(function(){return GA.URIConstructionService},"get")});var WA=ms();Object.defineProperty(x,"FrontmatterService",{enumerable:!0,get:o(function(){return WA.FrontmatterService},"get")});var HA=lr();Object.defineProperty(x,"DateFormatter",{enumerable:!0,get:o(function(){return HA.DateFormatter},"get")});var zA=On();Object.defineProperty(x,"WikiLinkHelpers",{enumerable:!0,get:o(function(){return zA.WikiLinkHelpers},"get")});var KA=Pr();Object.defineProperty(x,"MetadataHelpers",{enumerable:!0,get:o(function(){return KA.MetadataHelpers},"get")});var YA=ba();Object.defineProperty(x,"MetadataExtractor",{enumerable:!0,get:o(function(){return YA.MetadataExtractor},"get")});var QA=C0();Object.defineProperty(x,"EffortSortingHelpers",{enumerable:!0,get:o(function(){return QA.EffortSortingHelpers},"get")});var JA=k0();Object.defineProperty(x,"RDFSerializer",{enumerable:!0,get:o(function(){return JA.RDFSerializer},"get")});var XA=M0();Object.defineProperty(x,"InMemoryTripleStore",{enumerable:!0,get:o(function(){return XA.InMemoryTripleStore},"get")});var ZA=q0();Object.defineProperty(x,"RDFVocabularyMapper",{enumerable:!0,get:o(function(){return ZA.RDFVocabularyMapper},"get")});var e9=Fd();Object.defineProperty(x,"NoteToRDFConverter",{enumerable:!0,get:o(function(){return e9.NoteToRDFConverter},"get")});var Ig=rg();Object.defineProperty(x,"SPARQLParser",{enumerable:!0,get:o(function(){return Ig.SPARQLParser},"get")});Object.defineProperty(x,"SPARQLParseError",{enumerable:!0,get:o(function(){return Ig.SPARQLParseError},"get")});var t9=ig();Object.defineProperty(x,"AlgebraTranslator",{enumerable:!0,get:o(function(){return t9.AlgebraTranslator},"get")});var r9=ng();Object.defineProperty(x,"AlgebraOptimizer",{enumerable:!0,get:o(function(){return r9.AlgebraOptimizer},"get")});var i9=sg();Object.defineProperty(x,"AlgebraSerializer",{enumerable:!0,get:o(function(){return i9.AlgebraSerializer},"get")});var n9=Kd();Object.defineProperty(x,"BGPExecutor",{enumerable:!0,get:o(function(){return n9.BGPExecutor},"get")});var s9=Zd();Object.defineProperty(x,"FilterExecutor",{enumerable:!0,get:o(function(){return s9.FilterExecutor},"get")});var a9=tp();Object.defineProperty(x,"OptionalExecutor",{enumerable:!0,get:o(function(){return a9.OptionalExecutor},"get")});var o9=ip();Object.defineProperty(x,"UnionExecutor",{enumerable:!0,get:o(function(){return o9.UnionExecutor},"get")});var c9=ug();Object.defineProperty(x,"ConstructExecutor",{enumerable:!0,get:o(function(){return c9.ConstructExecutor},"get")});var u9=lg();Object.defineProperty(x,"DescribeExecutor",{enumerable:!0,get:o(function(){return u9.DescribeExecutor},"get")});var l9=gg();Object.defineProperty(x,"QueryExecutor",{enumerable:!0,get:o(function(){return l9.QueryExecutor},"get")});var f9=xa();Object.defineProperty(x,"SolutionMapping",{enumerable:!0,get:o(function(){return f9.SolutionMapping},"get")});var h9=Jd();Object.defineProperty(x,"BuiltInFunctions",{enumerable:!0,get:o(function(){return h9.BuiltInFunctions},"get")});var d9=_g();Object.defineProperty(x,"AggregateFunctions",{enumerable:!0,get:o(function(){return d9.AggregateFunctions},"get")});var p9=vg();Object.defineProperty(x,"QueryPlanCache",{enumerable:!0,get:o(function(){return p9.QueryPlanCache},"get")});var Ng=bg();Object.defineProperty(x,"FileNotFoundError",{enumerable:!0,get:o(function(){return Ng.FileNotFoundError},"get")});Object.defineProperty(x,"FileAlreadyExistsError",{enumerable:!0,get:o(function(){return Ng.FileAlreadyExistsError},"get")});var m9=Xe();Object.defineProperty(x,"DI_TOKENS",{enumerable:!0,get:o(function(){return m9.DI_TOKENS},"get")});var Da=Sg();Object.defineProperty(x,"registerCoreServices",{enumerable:!0,get:o(function(){return Da.registerCoreServices},"get")});Object.defineProperty(x,"createChildContainer",{enumerable:!0,get:o(function(){return Da.createChildContainer},"get")});Object.defineProperty(x,"getContainer",{enumerable:!0,get:o(function(){return Da.getContainer},"get")});Object.defineProperty(x,"resetContainer",{enumerable:!0,get:o(function(){return Da.resetContainer},"get")});Object.defineProperty(x,"container",{enumerable:!0,get:o(function(){return Da.container},"get")});di(Pg(),x);di(Rg(),x)});var yt=y(Ap=>{"use strict";Ap.fromCallback=function(r){return Object.defineProperty(function(...e){if(typeof e[e.length-1]=="function")r.apply(this,e);else return new Promise((t,i)=>{e.push((n,s)=>n!=null?i(n):t(s)),r.apply(this,e)})},"name",{value:r.name})};Ap.fromPromise=function(r){return Object.defineProperty(function(...e){let t=e[e.length-1];if(typeof t!="function")return r.apply(this,e);e.pop(),r.apply(this,e).then(i=>t(null,i),t)},"name",{value:r.name})}});var jg=y((Qk,kg)=>{var nn=require("constants"),g9=process.cwd,xu=null,y9=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return xu||(xu=g9.call(process)),xu};try{process.cwd()}catch{}typeof process.chdir=="function"&&(Op=process.chdir,process.chdir=function(r){xu=null,Op.call(process,r)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,Op));var Op;kg.exports=_9;function _9(r){nn.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&e(r),r.lutimes||t(r),r.chown=s(r.chown),r.fchown=s(r.fchown),r.lchown=s(r.lchown),r.chmod=i(r.chmod),r.fchmod=i(r.fchmod),r.lchmod=i(r.lchmod),r.chownSync=a(r.chownSync),r.fchownSync=a(r.fchownSync),r.lchownSync=a(r.lchownSync),r.chmodSync=n(r.chmodSync),r.fchmodSync=n(r.fchmodSync),r.lchmodSync=n(r.lchmodSync),r.stat=c(r.stat),r.fstat=c(r.fstat),r.lstat=c(r.lstat),r.statSync=u(r.statSync),r.fstatSync=u(r.fstatSync),r.lstatSync=u(r.lstatSync),r.chmod&&!r.lchmod&&(r.lchmod=function(l,h,p){p&&process.nextTick(p)},r.lchmodSync=function(){}),r.chown&&!r.lchown&&(r.lchown=function(l,h,p,g){g&&process.nextTick(g)},r.lchownSync=function(){}),y9==="win32"&&(r.rename=typeof r.rename!="function"?r.rename:(function(l){function h(p,g,v){var S=Date.now(),A=0;l(p,g,o(function F(D){if(D&&(D.code==="EACCES"||D.code==="EPERM"||D.code==="EBUSY")&&Date.now()-S<6e4){setTimeout(function(){r.stat(g,function(U,H){U&&U.code==="ENOENT"?l(p,g,F):v(D)})},A),A<100&&(A+=10);return}v&&v(D)},"CB"))}return o(h,"rename"),Object.setPrototypeOf&&Object.setPrototypeOf(h,l),h})(r.rename)),r.read=typeof r.read!="function"?r.read:(function(l){function h(p,g,v,S,A,F){var D;if(F&&typeof F=="function"){var U=0;D=o(function(H,ne,Fe){if(H&&H.code==="EAGAIN"&&U<10)return U++,l.call(r,p,g,v,S,A,D);F.apply(this,arguments)},"callback")}return l.call(r,p,g,v,S,A,D)}return o(h,"read"),Object.setPrototypeOf&&Object.setPrototypeOf(h,l),h})(r.read),r.readSync=typeof r.readSync!="function"?r.readSync:(function(l){return function(h,p,g,v,S){for(var A=0;;)try{return l.call(r,h,p,g,v,S)}catch(F){if(F.code==="EAGAIN"&&A<10){A++;continue}throw F}}})(r.readSync);function e(l){l.lchmod=function(h,p,g){l.open(h,nn.O_WRONLY|nn.O_SYMLINK,p,function(v,S){if(v){g&&g(v);return}l.fchmod(S,p,function(A){l.close(S,function(F){g&&g(A||F)})})})},l.lchmodSync=function(h,p){var g=l.openSync(h,nn.O_WRONLY|nn.O_SYMLINK,p),v=!0,S;try{S=l.fchmodSync(g,p),v=!1}finally{if(v)try{l.closeSync(g)}catch{}else l.closeSync(g)}return S}}o(e,"patchLchmod");function t(l){nn.hasOwnProperty("O_SYMLINK")&&l.futimes?(l.lutimes=function(h,p,g,v){l.open(h,nn.O_SYMLINK,function(S,A){if(S){v&&v(S);return}l.futimes(A,p,g,function(F){l.close(A,function(D){v&&v(F||D)})})})},l.lutimesSync=function(h,p,g){var v=l.openSync(h,nn.O_SYMLINK),S,A=!0;try{S=l.futimesSync(v,p,g),A=!1}finally{if(A)try{l.closeSync(v)}catch{}else l.closeSync(v)}return S}):l.futimes&&(l.lutimes=function(h,p,g,v){v&&process.nextTick(v)},l.lutimesSync=function(){})}o(t,"patchLutimes");function i(l){return l&&function(h,p,g){return l.call(r,h,p,function(v){f(v)&&(v=null),g&&g.apply(this,arguments)})}}o(i,"chmodFix");function n(l){return l&&function(h,p){try{return l.call(r,h,p)}catch(g){if(!f(g))throw g}}}o(n,"chmodFixSync");function s(l){return l&&function(h,p,g,v){return l.call(r,h,p,g,function(S){f(S)&&(S=null),v&&v.apply(this,arguments)})}}o(s,"chownFix");function a(l){return l&&function(h,p,g){try{return l.call(r,h,p,g)}catch(v){if(!f(v))throw v}}}o(a,"chownFixSync");function c(l){return l&&function(h,p,g){typeof p=="function"&&(g=p,p=null);function v(S,A){A&&(A.uid<0&&(A.uid+=4294967296),A.gid<0&&(A.gid+=4294967296)),g&&g.apply(this,arguments)}return o(v,"callback"),p?l.call(r,h,p,v):l.call(r,h,v)}}o(c,"statFix");function u(l){return l&&function(h,p){var g=p?l.call(r,h,p):l.call(r,h);return g&&(g.uid<0&&(g.uid+=4294967296),g.gid<0&&(g.gid+=4294967296)),g}}o(u,"statFixSync");function f(l){if(!l||l.code==="ENOSYS")return!0;var h=!process.getuid||process.getuid()!==0;return!!(h&&(l.code==="EINVAL"||l.code==="EPERM"))}o(f,"chownErOk")}o(_9,"patch")});var qg=y((Xk,Lg)=>{var Mg=require("stream").Stream;Lg.exports=v9;function v9(r){return{ReadStream:e,WriteStream:t};function e(i,n){if(!(this instanceof e))return new e(i,n);Mg.call(this);var s=this;this.path=i,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,n=n||{};for(var a=Object.keys(n),c=0,u=a.length;c<u;c++){var f=a[c];this[f]=n[f]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){s._read()});return}r.open(this.path,this.flags,this.mode,function(l,h){if(l){s.emit("error",l),s.readable=!1;return}s.fd=h,s.emit("open",h),s._read()})}function t(i,n){if(!(this instanceof t))return new t(i,n);Mg.call(this),this.path=i,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,n=n||{};for(var s=Object.keys(n),a=0,c=s.length;a<c;a++){var u=s[a];this[u]=n[u]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=r.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}o(v9,"legacy")});var Ug=y((ej,Vg)=>{"use strict";Vg.exports=S9;var b9=Object.getPrototypeOf||function(r){return r.__proto__};function S9(r){if(r===null||typeof r!="object")return r;if(r instanceof Object)var e={__proto__:b9(r)};else var e=Object.create(null);return Object.getOwnPropertyNames(r).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}o(S9,"clone")});var Ds=y((rj,Pp)=>{var et=require("fs"),w9=jg(),E9=qg(),T9=Ug(),Au=require("util"),Ft,Cu;typeof Symbol=="function"&&typeof Symbol.for=="function"?(Ft=Symbol.for("graceful-fs.queue"),Cu=Symbol.for("graceful-fs.previous")):(Ft="___graceful-fs.queue",Cu="___graceful-fs.previous");function x9(){}o(x9,"noop");function Gg(r,e){Object.defineProperty(r,Ft,{get:o(function(){return e},"get")})}o(Gg,"publishQueue");var Wn=x9;Au.debuglog?Wn=Au.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(Wn=o(function(){var r=Au.format.apply(Au,arguments);r="GFS4: "+r.split(/\n/).join(`
GFS4: `),console.error(r)},"debug"));et[Ft]||(Bg=global[Ft]||[],Gg(et,Bg),et.close=(function(r){function e(t,i){return r.call(et,t,function(n){n||$g(),typeof i=="function"&&i.apply(this,arguments)})}return o(e,"close"),Object.defineProperty(e,Cu,{value:r}),e})(et.close),et.closeSync=(function(r){function e(t){r.apply(et,arguments),$g()}return o(e,"closeSync"),Object.defineProperty(e,Cu,{value:r}),e})(et.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){Wn(et[Ft]),require("assert").equal(et[Ft].length,0)}));var Bg;global[Ft]||Gg(global,et[Ft]);Pp.exports=Cp(T9(et));process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!et.__patched&&(Pp.exports=Cp(et),et.__patched=!0);function Cp(r){w9(r),r.gracefulify=Cp,r.createReadStream=ne,r.createWriteStream=Fe;var e=r.readFile;r.readFile=t;function t(V,ce,Ae){return typeof ce=="function"&&(Ae=ce,ce=null),Qe(V,ce,Ae);function Qe(Be,We,Pe,Ie){return e(Be,We,function(Ce){Ce&&(Ce.code==="EMFILE"||Ce.code==="ENFILE")?Ps([Qe,[Be,We,Pe],Ce,Ie||Date.now(),Date.now()]):typeof Pe=="function"&&Pe.apply(this,arguments)})}o(Qe,"go$readFile")}o(t,"readFile");var i=r.writeFile;r.writeFile=n;function n(V,ce,Ae,Qe){return typeof Ae=="function"&&(Qe=Ae,Ae=null),Be(V,ce,Ae,Qe);function Be(We,Pe,Ie,Ce,$){return i(We,Pe,Ie,function(I){I&&(I.code==="EMFILE"||I.code==="ENFILE")?Ps([Be,[We,Pe,Ie,Ce],I,$||Date.now(),Date.now()]):typeof Ce=="function"&&Ce.apply(this,arguments)})}o(Be,"go$writeFile")}o(n,"writeFile");var s=r.appendFile;s&&(r.appendFile=a);function a(V,ce,Ae,Qe){return typeof Ae=="function"&&(Qe=Ae,Ae=null),Be(V,ce,Ae,Qe);function Be(We,Pe,Ie,Ce,$){return s(We,Pe,Ie,function(I){I&&(I.code==="EMFILE"||I.code==="ENFILE")?Ps([Be,[We,Pe,Ie,Ce],I,$||Date.now(),Date.now()]):typeof Ce=="function"&&Ce.apply(this,arguments)})}o(Be,"go$appendFile")}o(a,"appendFile");var c=r.copyFile;c&&(r.copyFile=u);function u(V,ce,Ae,Qe){return typeof Ae=="function"&&(Qe=Ae,Ae=0),Be(V,ce,Ae,Qe);function Be(We,Pe,Ie,Ce,$){return c(We,Pe,Ie,function(I){I&&(I.code==="EMFILE"||I.code==="ENFILE")?Ps([Be,[We,Pe,Ie,Ce],I,$||Date.now(),Date.now()]):typeof Ce=="function"&&Ce.apply(this,arguments)})}o(Be,"go$copyFile")}o(u,"copyFile");var f=r.readdir;r.readdir=h;var l=/^v[0-5]\./;function h(V,ce,Ae){typeof ce=="function"&&(Ae=ce,ce=null);var Qe=l.test(process.version)?o(function(Pe,Ie,Ce,$){return f(Pe,Be(Pe,Ie,Ce,$))},"go$readdir"):o(function(Pe,Ie,Ce,$){return f(Pe,Ie,Be(Pe,Ie,Ce,$))},"go$readdir");return Qe(V,ce,Ae);function Be(We,Pe,Ie,Ce){return function($,I){$&&($.code==="EMFILE"||$.code==="ENFILE")?Ps([Qe,[We,Pe,Ie],$,Ce||Date.now(),Date.now()]):(I&&I.sort&&I.sort(),typeof Ie=="function"&&Ie.call(this,$,I))}}}if(o(h,"readdir"),process.version.substr(0,4)==="v0.8"){var p=E9(r);F=p.ReadStream,U=p.WriteStream}var g=r.ReadStream;g&&(F.prototype=Object.create(g.prototype),F.prototype.open=D);var v=r.WriteStream;v&&(U.prototype=Object.create(v.prototype),U.prototype.open=H),Object.defineProperty(r,"ReadStream",{get:o(function(){return F},"get"),set:o(function(V){F=V},"set"),enumerable:!0,configurable:!0}),Object.defineProperty(r,"WriteStream",{get:o(function(){return U},"get"),set:o(function(V){U=V},"set"),enumerable:!0,configurable:!0});var S=F;Object.defineProperty(r,"FileReadStream",{get:o(function(){return S},"get"),set:o(function(V){S=V},"set"),enumerable:!0,configurable:!0});var A=U;Object.defineProperty(r,"FileWriteStream",{get:o(function(){return A},"get"),set:o(function(V){A=V},"set"),enumerable:!0,configurable:!0});function F(V,ce){return this instanceof F?(g.apply(this,arguments),this):F.apply(Object.create(F.prototype),arguments)}o(F,"ReadStream");function D(){var V=this;pt(V.path,V.flags,V.mode,function(ce,Ae){ce?(V.autoClose&&V.destroy(),V.emit("error",ce)):(V.fd=Ae,V.emit("open",Ae),V.read())})}o(D,"ReadStream$open");function U(V,ce){return this instanceof U?(v.apply(this,arguments),this):U.apply(Object.create(U.prototype),arguments)}o(U,"WriteStream");function H(){var V=this;pt(V.path,V.flags,V.mode,function(ce,Ae){ce?(V.destroy(),V.emit("error",ce)):(V.fd=Ae,V.emit("open",Ae))})}o(H,"WriteStream$open");function ne(V,ce){return new r.ReadStream(V,ce)}o(ne,"createReadStream");function Fe(V,ce){return new r.WriteStream(V,ce)}o(Fe,"createWriteStream");var it=r.open;r.open=pt;function pt(V,ce,Ae,Qe){return typeof Ae=="function"&&(Qe=Ae,Ae=null),Be(V,ce,Ae,Qe);function Be(We,Pe,Ie,Ce,$){return it(We,Pe,Ie,function(I,Ne){I&&(I.code==="EMFILE"||I.code==="ENFILE")?Ps([Be,[We,Pe,Ie,Ce],I,$||Date.now(),Date.now()]):typeof Ce=="function"&&Ce.apply(this,arguments)})}o(Be,"go$open")}return o(pt,"open"),r}o(Cp,"patch");function Ps(r){Wn("ENQUEUE",r[0].name,r[1]),et[Ft].push(r),Fp()}o(Ps,"enqueue");var Ou;function $g(){for(var r=Date.now(),e=0;e<et[Ft].length;++e)et[Ft][e].length>2&&(et[Ft][e][3]=r,et[Ft][e][4]=r);Fp()}o($g,"resetQueue");function Fp(){if(clearTimeout(Ou),Ou=void 0,et[Ft].length!==0){var r=et[Ft].shift(),e=r[0],t=r[1],i=r[2],n=r[3],s=r[4];if(n===void 0)Wn("RETRY",e.name,t),e.apply(null,t);else if(Date.now()-n>=6e4){Wn("TIMEOUT",e.name,t);var a=t.pop();typeof a=="function"&&a.call(null,i)}else{var c=Date.now()-s,u=Math.max(s-n,1),f=Math.min(u*1.2,100);c>=f?(Wn("RETRY",e.name,t),e.apply(null,t.concat([n]))):et[Ft].push(r)}Ou===void 0&&(Ou=setTimeout(Fp,0))}}o(Fp,"retry")});var Kt=y(Mi=>{"use strict";var Wg=yt().fromCallback,zt=Ds(),A9=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(r=>typeof zt[r]=="function");Object.assign(Mi,zt);A9.forEach(r=>{Mi[r]=Wg(zt[r])});Mi.exists=function(r,e){return typeof e=="function"?zt.exists(r,e):new Promise(t=>zt.exists(r,t))};Mi.read=function(r,e,t,i,n,s){return typeof s=="function"?zt.read(r,e,t,i,n,s):new Promise((a,c)=>{zt.read(r,e,t,i,n,(u,f,l)=>{if(u)return c(u);a({bytesRead:f,buffer:l})})})};Mi.write=function(r,e,...t){return typeof t[t.length-1]=="function"?zt.write(r,e,...t):new Promise((i,n)=>{zt.write(r,e,...t,(s,a,c)=>{if(s)return n(s);i({bytesWritten:a,buffer:c})})})};Mi.readv=function(r,e,...t){return typeof t[t.length-1]=="function"?zt.readv(r,e,...t):new Promise((i,n)=>{zt.readv(r,e,...t,(s,a,c)=>{if(s)return n(s);i({bytesRead:a,buffers:c})})})};Mi.writev=function(r,e,...t){return typeof t[t.length-1]=="function"?zt.writev(r,e,...t):new Promise((i,n)=>{zt.writev(r,e,...t,(s,a,c)=>{if(s)return n(s);i({bytesWritten:a,buffers:c})})})};typeof zt.realpath.native=="function"?Mi.realpath.native=Wg(zt.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")});var zg=y((sj,Hg)=>{"use strict";var O9=require("path");Hg.exports.checkPath=o(function(e){if(process.platform==="win32"&&/[<>:"|?*]/.test(e.replace(O9.parse(e).root,""))){let i=new Error(`Path contains invalid characters: ${e}`);throw i.code="EINVAL",i}},"checkPath")});var Jg=y((oj,Dp)=>{"use strict";var Kg=Kt(),{checkPath:Yg}=zg(),Qg=o(r=>{let e={mode:511};return typeof r=="number"?r:{...e,...r}.mode},"getMode");Dp.exports.makeDir=async(r,e)=>(Yg(r),Kg.mkdir(r,{mode:Qg(e),recursive:!0}));Dp.exports.makeDirSync=(r,e)=>(Yg(r),Kg.mkdirSync(r,{mode:Qg(e),recursive:!0}))});var Qr=y((uj,Xg)=>{"use strict";var C9=yt().fromPromise,{makeDir:F9,makeDirSync:Rp}=Jg(),Ip=C9(F9);Xg.exports={mkdirs:Ip,mkdirsSync:Rp,mkdirp:Ip,mkdirpSync:Rp,ensureDir:Ip,ensureDirSync:Rp}});var sn=y((lj,ey)=>{"use strict";var P9=yt().fromPromise,Zg=Kt();function D9(r){return Zg.access(r).then(()=>!0).catch(()=>!1)}o(D9,"pathExists");ey.exports={pathExists:P9(D9),pathExistsSync:Zg.existsSync}});var Np=y((hj,ty)=>{"use strict";var Rs=Kt(),R9=yt().fromPromise;async function I9(r,e,t){let i=await Rs.open(r,"r+"),n=null;try{await Rs.futimes(i,e,t)}finally{try{await Rs.close(i)}catch(s){n=s}}if(n)throw n}o(I9,"utimesMillis");function N9(r,e,t){let i=Rs.openSync(r,"r+");return Rs.futimesSync(i,e,t),Rs.closeSync(i)}o(N9,"utimesMillisSync");ty.exports={utimesMillis:R9(I9),utimesMillisSync:N9}});var Hn=y((pj,sy)=>{"use strict";var Is=Kt(),_t=require("path"),ry=yt().fromPromise;function k9(r,e,t){let i=t.dereference?n=>Is.stat(n,{bigint:!0}):n=>Is.lstat(n,{bigint:!0});return Promise.all([i(r),i(e).catch(n=>{if(n.code==="ENOENT")return null;throw n})]).then(([n,s])=>({srcStat:n,destStat:s}))}o(k9,"getStats");function j9(r,e,t){let i,n=t.dereference?a=>Is.statSync(a,{bigint:!0}):a=>Is.lstatSync(a,{bigint:!0}),s=n(r);try{i=n(e)}catch(a){if(a.code==="ENOENT")return{srcStat:s,destStat:null};throw a}return{srcStat:s,destStat:i}}o(j9,"getStatsSync");async function M9(r,e,t,i){let{srcStat:n,destStat:s}=await k9(r,e,i);if(s){if(Ra(n,s)){let a=_t.basename(r),c=_t.basename(e);if(t==="move"&&a!==c&&a.toLowerCase()===c.toLowerCase())return{srcStat:n,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${r}'.`);if(!n.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${r}'.`)}if(n.isDirectory()&&kp(r,e))throw new Error(Fu(r,e,t));return{srcStat:n,destStat:s}}o(M9,"checkPaths");function L9(r,e,t,i){let{srcStat:n,destStat:s}=j9(r,e,i);if(s){if(Ra(n,s)){let a=_t.basename(r),c=_t.basename(e);if(t==="move"&&a!==c&&a.toLowerCase()===c.toLowerCase())return{srcStat:n,destStat:s,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(n.isDirectory()&&!s.isDirectory())throw new Error(`Cannot overwrite non-directory '${e}' with directory '${r}'.`);if(!n.isDirectory()&&s.isDirectory())throw new Error(`Cannot overwrite directory '${e}' with non-directory '${r}'.`)}if(n.isDirectory()&&kp(r,e))throw new Error(Fu(r,e,t));return{srcStat:n,destStat:s}}o(L9,"checkPathsSync");async function iy(r,e,t,i){let n=_t.resolve(_t.dirname(r)),s=_t.resolve(_t.dirname(t));if(s===n||s===_t.parse(s).root)return;let a;try{a=await Is.stat(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(Ra(e,a))throw new Error(Fu(r,t,i));return iy(r,e,s,i)}o(iy,"checkParentPaths");function ny(r,e,t,i){let n=_t.resolve(_t.dirname(r)),s=_t.resolve(_t.dirname(t));if(s===n||s===_t.parse(s).root)return;let a;try{a=Is.statSync(s,{bigint:!0})}catch(c){if(c.code==="ENOENT")return;throw c}if(Ra(e,a))throw new Error(Fu(r,t,i));return ny(r,e,s,i)}o(ny,"checkParentPathsSync");function Ra(r,e){return e.ino!==void 0&&e.dev!==void 0&&e.ino===r.ino&&e.dev===r.dev}o(Ra,"areIdentical");function kp(r,e){let t=_t.resolve(r).split(_t.sep).filter(n=>n),i=_t.resolve(e).split(_t.sep).filter(n=>n);return t.every((n,s)=>i[s]===n)}o(kp,"isSrcSubdir");function Fu(r,e,t){return`Cannot ${t} '${r}' to a subdirectory of itself, '${e}'.`}o(Fu,"errMsg");sy.exports={checkPaths:ry(M9),checkPathsSync:L9,checkParentPaths:ry(iy),checkParentPathsSync:ny,isSrcSubdir:kp,areIdentical:Ra}});var oy=y((gj,ay)=>{"use strict";async function q9(r,e){let t=[];for await(let i of r)t.push(e(i).then(()=>null,n=>n??new Error("unknown error")));await Promise.all(t.map(i=>i.then(n=>{if(n!==null)throw n})))}o(q9,"asyncIteratorConcurrentProcess");ay.exports={asyncIteratorConcurrentProcess:q9}});var hy=y((_j,fy)=>{"use strict";var kt=Kt(),Ia=require("path"),{mkdirs:V9}=Qr(),{pathExists:U9}=sn(),{utimesMillis:B9}=Np(),Na=Hn(),{asyncIteratorConcurrentProcess:$9}=oy();async function G9(r,e,t={}){typeof t=="function"&&(t={filter:t}),t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");let{srcStat:i,destStat:n}=await Na.checkPaths(r,e,"copy",t);if(await Na.checkParentPaths(r,i,e,"copy"),!await uy(r,e,t))return;let a=Ia.dirname(e);await U9(a)||await V9(a),await ly(n,r,e,t)}o(G9,"copy");async function uy(r,e,t){return t.filter?t.filter(r,e):!0}o(uy,"runFilter");async function ly(r,e,t,i){let s=await(i.dereference?kt.stat:kt.lstat)(e);if(s.isDirectory())return K9(s,r,e,t,i);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return W9(s,r,e,t,i);if(s.isSymbolicLink())return Y9(r,e,t,i);throw s.isSocket()?new Error(`Cannot copy a socket file: ${e}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}o(ly,"getStatsAndPerformCopy");async function W9(r,e,t,i,n){if(!e)return cy(r,t,i,n);if(n.overwrite)return await kt.unlink(i),cy(r,t,i,n);if(n.errorOnExist)throw new Error(`'${i}' already exists`)}o(W9,"onFile");async function cy(r,e,t,i){if(await kt.copyFile(e,t),i.preserveTimestamps){H9(r.mode)&&await z9(t,r.mode);let n=await kt.stat(e);await B9(t,n.atime,n.mtime)}return kt.chmod(t,r.mode)}o(cy,"copyFile");function H9(r){return(r&128)===0}o(H9,"fileIsNotWritable");function z9(r,e){return kt.chmod(r,e|128)}o(z9,"makeFileWritable");async function K9(r,e,t,i,n){e||await kt.mkdir(i),await $9(await kt.opendir(t),async s=>{let a=Ia.join(t,s.name),c=Ia.join(i,s.name);if(await uy(a,c,n)){let{destStat:f}=await Na.checkPaths(a,c,"copy",n);await ly(f,a,c,n)}}),e||await kt.chmod(i,r.mode)}o(K9,"onDir");async function Y9(r,e,t,i){let n=await kt.readlink(e);if(i.dereference&&(n=Ia.resolve(process.cwd(),n)),!r)return kt.symlink(n,t);let s=null;try{s=await kt.readlink(t)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return kt.symlink(n,t);throw a}if(i.dereference&&(s=Ia.resolve(process.cwd(),s)),Na.isSrcSubdir(n,s))throw new Error(`Cannot copy '${n}' to a subdirectory of itself, '${s}'.`);if(Na.isSrcSubdir(s,n))throw new Error(`Cannot overwrite '${s}' with '${n}'.`);return await kt.unlink(t),kt.symlink(n,t)}o(Y9,"onLink");fy.exports=G9});var yy=y((bj,gy)=>{"use strict";var Yt=Ds(),ka=require("path"),Q9=Qr().mkdirsSync,J9=Np().utimesMillisSync,ja=Hn();function X9(r,e,t){typeof t=="function"&&(t={filter:t}),t=t||{},t.clobber="clobber"in t?!!t.clobber:!0,t.overwrite="overwrite"in t?!!t.overwrite:t.clobber,t.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");let{srcStat:i,destStat:n}=ja.checkPathsSync(r,e,"copy",t);if(ja.checkParentPathsSync(r,i,e,"copy"),t.filter&&!t.filter(r,e))return;let s=ka.dirname(e);return Yt.existsSync(s)||Q9(s),dy(n,r,e,t)}o(X9,"copySync");function dy(r,e,t,i){let s=(i.dereference?Yt.statSync:Yt.lstatSync)(e);if(s.isDirectory())return s7(s,r,e,t,i);if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return Z9(s,r,e,t,i);if(s.isSymbolicLink())return c7(r,e,t,i);throw s.isSocket()?new Error(`Cannot copy a socket file: ${e}`):s.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${e}`):new Error(`Unknown file: ${e}`)}o(dy,"getStats");function Z9(r,e,t,i,n){return e?e7(r,t,i,n):py(r,t,i,n)}o(Z9,"onFile");function e7(r,e,t,i){if(i.overwrite)return Yt.unlinkSync(t),py(r,e,t,i);if(i.errorOnExist)throw new Error(`'${t}' already exists`)}o(e7,"mayCopyFile");function py(r,e,t,i){return Yt.copyFileSync(e,t),i.preserveTimestamps&&t7(r.mode,e,t),jp(t,r.mode)}o(py,"copyFile");function t7(r,e,t){return r7(r)&&i7(t,r),n7(e,t)}o(t7,"handleTimestamps");function r7(r){return(r&128)===0}o(r7,"fileIsNotWritable");function i7(r,e){return jp(r,e|128)}o(i7,"makeFileWritable");function jp(r,e){return Yt.chmodSync(r,e)}o(jp,"setDestMode");function n7(r,e){let t=Yt.statSync(r);return J9(e,t.atime,t.mtime)}o(n7,"setDestTimestamps");function s7(r,e,t,i,n){return e?my(t,i,n):a7(r.mode,t,i,n)}o(s7,"onDir");function a7(r,e,t,i){return Yt.mkdirSync(t),my(e,t,i),jp(t,r)}o(a7,"mkDirAndCopy");function my(r,e,t){let i=Yt.opendirSync(r);try{let n;for(;(n=i.readSync())!==null;)o7(n.name,r,e,t)}finally{i.closeSync()}}o(my,"copyDir");function o7(r,e,t,i){let n=ka.join(e,r),s=ka.join(t,r);if(i.filter&&!i.filter(n,s))return;let{destStat:a}=ja.checkPathsSync(n,s,"copy",i);return dy(a,n,s,i)}o(o7,"copyDirItem");function c7(r,e,t,i){let n=Yt.readlinkSync(e);if(i.dereference&&(n=ka.resolve(process.cwd(),n)),r){let s;try{s=Yt.readlinkSync(t)}catch(a){if(a.code==="EINVAL"||a.code==="UNKNOWN")return Yt.symlinkSync(n,t);throw a}if(i.dereference&&(s=ka.resolve(process.cwd(),s)),ja.isSrcSubdir(n,s))throw new Error(`Cannot copy '${n}' to a subdirectory of itself, '${s}'.`);if(ja.isSrcSubdir(s,n))throw new Error(`Cannot overwrite '${s}' with '${n}'.`);return u7(n,t)}else return Yt.symlinkSync(n,t)}o(c7,"onLink");function u7(r,e){return Yt.unlinkSync(e),Yt.symlinkSync(r,e)}o(u7,"copyLink");gy.exports=X9});var Pu=y((wj,_y)=>{"use strict";var l7=yt().fromPromise;_y.exports={copy:l7(hy()),copySync:yy()}});var Ma=y((Ej,by)=>{"use strict";var vy=Ds(),f7=yt().fromCallback;function h7(r,e){vy.rm(r,{recursive:!0,force:!0},e)}o(h7,"remove");function d7(r){vy.rmSync(r,{recursive:!0,force:!0})}o(d7,"removeSync");by.exports={remove:f7(h7),removeSync:d7}});var Cy=y((xj,Oy)=>{"use strict";var p7=yt().fromPromise,Ey=Kt(),Ty=require("path"),xy=Qr(),Ay=Ma(),Sy=p7(o(async function(e){let t;try{t=await Ey.readdir(e)}catch{return xy.mkdirs(e)}return Promise.all(t.map(i=>Ay.remove(Ty.join(e,i))))},"emptyDir"));function wy(r){let e;try{e=Ey.readdirSync(r)}catch{return xy.mkdirsSync(r)}e.forEach(t=>{t=Ty.join(r,t),Ay.removeSync(t)})}o(wy,"emptyDirSync");Oy.exports={emptyDirSync:wy,emptydirSync:wy,emptyDir:Sy,emptydir:Sy}});var Ry=y((Oj,Dy)=>{"use strict";var m7=yt().fromPromise,Fy=require("path"),Li=Kt(),Py=Qr();async function g7(r){let e;try{e=await Li.stat(r)}catch{}if(e&&e.isFile())return;let t=Fy.dirname(r),i=null;try{i=await Li.stat(t)}catch(n){if(n.code==="ENOENT"){await Py.mkdirs(t),await Li.writeFile(r,"");return}else throw n}i.isDirectory()?await Li.writeFile(r,""):await Li.readdir(t)}o(g7,"createFile");function y7(r){let e;try{e=Li.statSync(r)}catch{}if(e&&e.isFile())return;let t=Fy.dirname(r);try{Li.statSync(t).isDirectory()||Li.readdirSync(t)}catch(i){if(i&&i.code==="ENOENT")Py.mkdirsSync(t);else throw i}Li.writeFileSync(r,"")}o(y7,"createFileSync");Dy.exports={createFile:m7(g7),createFileSync:y7}});var My=y((Fj,jy)=>{"use strict";var _7=yt().fromPromise,Iy=require("path"),an=Kt(),Ny=Qr(),{pathExists:v7}=sn(),{areIdentical:ky}=Hn();async function b7(r,e){let t;try{t=await an.lstat(e)}catch{}let i;try{i=await an.lstat(r)}catch(a){throw a.message=a.message.replace("lstat","ensureLink"),a}if(t&&ky(i,t))return;let n=Iy.dirname(e);await v7(n)||await Ny.mkdirs(n),await an.link(r,e)}o(b7,"createLink");function S7(r,e){let t;try{t=an.lstatSync(e)}catch{}try{let s=an.lstatSync(r);if(t&&ky(s,t))return}catch(s){throw s.message=s.message.replace("lstat","ensureLink"),s}let i=Iy.dirname(e);return an.existsSync(i)||Ny.mkdirsSync(i),an.linkSync(r,e)}o(S7,"createLinkSync");jy.exports={createLink:_7(b7),createLinkSync:S7}});var qy=y((Dj,Ly)=>{"use strict";var on=require("path"),La=Kt(),{pathExists:w7}=sn(),E7=yt().fromPromise;async function T7(r,e){if(on.isAbsolute(r)){try{await La.lstat(r)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:r,toDst:r}}let t=on.dirname(e),i=on.join(t,r);if(await w7(i))return{toCwd:i,toDst:r};try{await La.lstat(r)}catch(s){throw s.message=s.message.replace("lstat","ensureSymlink"),s}return{toCwd:r,toDst:on.relative(t,r)}}o(T7,"symlinkPaths");function x7(r,e){if(on.isAbsolute(r)){if(!La.existsSync(r))throw new Error("absolute srcpath does not exist");return{toCwd:r,toDst:r}}let t=on.dirname(e),i=on.join(t,r);if(La.existsSync(i))return{toCwd:i,toDst:r};if(!La.existsSync(r))throw new Error("relative srcpath does not exist");return{toCwd:r,toDst:on.relative(t,r)}}o(x7,"symlinkPathsSync");Ly.exports={symlinkPaths:E7(T7),symlinkPathsSync:x7}});var By=y((Ij,Uy)=>{"use strict";var Vy=Kt(),A7=yt().fromPromise;async function O7(r,e){if(e)return e;let t;try{t=await Vy.lstat(r)}catch{return"file"}return t&&t.isDirectory()?"dir":"file"}o(O7,"symlinkType");function C7(r,e){if(e)return e;let t;try{t=Vy.lstatSync(r)}catch{return"file"}return t&&t.isDirectory()?"dir":"file"}o(C7,"symlinkTypeSync");Uy.exports={symlinkType:A7(O7),symlinkTypeSync:C7}});var Hy=y((kj,Wy)=>{"use strict";var F7=yt().fromPromise,$y=require("path"),pi=Kt(),{mkdirs:P7,mkdirsSync:D7}=Qr(),{symlinkPaths:R7,symlinkPathsSync:I7}=qy(),{symlinkType:N7,symlinkTypeSync:k7}=By(),{pathExists:j7}=sn(),{areIdentical:Gy}=Hn();async function M7(r,e,t){let i;try{i=await pi.lstat(e)}catch{}if(i&&i.isSymbolicLink()){let[c,u]=await Promise.all([pi.stat(r),pi.stat(e)]);if(Gy(c,u))return}let n=await R7(r,e);r=n.toDst;let s=await N7(n.toCwd,t),a=$y.dirname(e);return await j7(a)||await P7(a),pi.symlink(r,e,s)}o(M7,"createSymlink");function L7(r,e,t){let i;try{i=pi.lstatSync(e)}catch{}if(i&&i.isSymbolicLink()){let c=pi.statSync(r),u=pi.statSync(e);if(Gy(c,u))return}let n=I7(r,e);r=n.toDst,t=k7(n.toCwd,t);let s=$y.dirname(e);return pi.existsSync(s)||D7(s),pi.symlinkSync(r,e,t)}o(L7,"createSymlinkSync");Wy.exports={createSymlink:F7(M7),createSymlinkSync:L7}});var e3=y((Mj,Zy)=>{"use strict";var{createFile:zy,createFileSync:Ky}=Ry(),{createLink:Yy,createLinkSync:Qy}=My(),{createSymlink:Jy,createSymlinkSync:Xy}=Hy();Zy.exports={createFile:zy,createFileSync:Ky,ensureFile:zy,ensureFileSync:Ky,createLink:Yy,createLinkSync:Qy,ensureLink:Yy,ensureLinkSync:Qy,createSymlink:Jy,createSymlinkSync:Xy,ensureSymlink:Jy,ensureSymlinkSync:Xy}});var Du=y((Lj,t3)=>{function q7(r,{EOL:e=`
`,finalEOL:t=!0,replacer:i=null,spaces:n}={}){let s=t?e:"";return JSON.stringify(r,i,n).replace(/\n/g,e)+s}o(q7,"stringify");function V7(r){return Buffer.isBuffer(r)&&(r=r.toString("utf8")),r.replace(/^\uFEFF/,"")}o(V7,"stripBom");t3.exports={stringify:q7,stripBom:V7}});var s3=y((Vj,n3)=>{var Ns;try{Ns=Ds()}catch{Ns=require("fs")}var Ru=yt(),{stringify:r3,stripBom:i3}=Du();async function U7(r,e={}){typeof e=="string"&&(e={encoding:e});let t=e.fs||Ns,i="throws"in e?e.throws:!0,n=await Ru.fromCallback(t.readFile)(r,e);n=i3(n);let s;try{s=JSON.parse(n,e?e.reviver:null)}catch(a){if(i)throw a.message=`${r}: ${a.message}`,a;return null}return s}o(U7,"_readFile");var B7=Ru.fromPromise(U7);function $7(r,e={}){typeof e=="string"&&(e={encoding:e});let t=e.fs||Ns,i="throws"in e?e.throws:!0;try{let n=t.readFileSync(r,e);return n=i3(n),JSON.parse(n,e.reviver)}catch(n){if(i)throw n.message=`${r}: ${n.message}`,n;return null}}o($7,"readFileSync");async function G7(r,e,t={}){let i=t.fs||Ns,n=r3(e,t);await Ru.fromCallback(i.writeFile)(r,n,t)}o(G7,"_writeFile");var W7=Ru.fromPromise(G7);function H7(r,e,t={}){let i=t.fs||Ns,n=r3(e,t);return i.writeFileSync(r,n,t)}o(H7,"writeFileSync");n3.exports={readFile:B7,readFileSync:$7,writeFile:W7,writeFileSync:H7}});var o3=y((Bj,a3)=>{"use strict";var Iu=s3();a3.exports={readJson:Iu.readFile,readJsonSync:Iu.readFileSync,writeJson:Iu.writeFile,writeJsonSync:Iu.writeFileSync}});var Nu=y(($j,l3)=>{"use strict";var z7=yt().fromPromise,Mp=Kt(),c3=require("path"),u3=Qr(),K7=sn().pathExists;async function Y7(r,e,t="utf-8"){let i=c3.dirname(r);return await K7(i)||await u3.mkdirs(i),Mp.writeFile(r,e,t)}o(Y7,"outputFile");function Q7(r,...e){let t=c3.dirname(r);Mp.existsSync(t)||u3.mkdirsSync(t),Mp.writeFileSync(r,...e)}o(Q7,"outputFileSync");l3.exports={outputFile:z7(Y7),outputFileSync:Q7}});var h3=y((Wj,f3)=>{"use strict";var{stringify:J7}=Du(),{outputFile:X7}=Nu();async function Z7(r,e,t={}){let i=J7(e,t);await X7(r,i,t)}o(Z7,"outputJson");f3.exports=Z7});var p3=y((zj,d3)=>{"use strict";var{stringify:e6}=Du(),{outputFileSync:t6}=Nu();function r6(r,e,t){let i=e6(e,t);t6(r,i,t)}o(r6,"outputJsonSync");d3.exports=r6});var g3=y((Yj,m3)=>{"use strict";var i6=yt().fromPromise,Qt=o3();Qt.outputJson=i6(h3());Qt.outputJsonSync=p3();Qt.outputJSON=Qt.outputJson;Qt.outputJSONSync=Qt.outputJsonSync;Qt.writeJSON=Qt.writeJson;Qt.writeJSONSync=Qt.writeJsonSync;Qt.readJSON=Qt.readJson;Qt.readJSONSync=Qt.readJsonSync;m3.exports=Qt});var S3=y((Qj,b3)=>{"use strict";var n6=Kt(),y3=require("path"),{copy:s6}=Pu(),{remove:v3}=Ma(),{mkdirp:a6}=Qr(),{pathExists:o6}=sn(),_3=Hn();async function c6(r,e,t={}){let i=t.overwrite||t.clobber||!1,{srcStat:n,isChangingCase:s=!1}=await _3.checkPaths(r,e,"move",t);await _3.checkParentPaths(r,n,e,"move");let a=y3.dirname(e);return y3.parse(a).root!==a&&await a6(a),u6(r,e,i,s)}o(c6,"move");async function u6(r,e,t,i){if(!i){if(t)await v3(e);else if(await o6(e))throw new Error("dest already exists.")}try{await n6.rename(r,e)}catch(n){if(n.code!=="EXDEV")throw n;await l6(r,e,t)}}o(u6,"doRename");async function l6(r,e,t){return await s6(r,e,{overwrite:t,errorOnExist:!0,preserveTimestamps:!0}),v3(r)}o(l6,"moveAcrossDevice");b3.exports=c6});var A3=y((Xj,x3)=>{"use strict";var E3=Ds(),qp=require("path"),f6=Pu().copySync,T3=Ma().removeSync,h6=Qr().mkdirpSync,w3=Hn();function d6(r,e,t){t=t||{};let i=t.overwrite||t.clobber||!1,{srcStat:n,isChangingCase:s=!1}=w3.checkPathsSync(r,e,"move",t);return w3.checkParentPathsSync(r,n,e,"move"),p6(e)||h6(qp.dirname(e)),m6(r,e,i,s)}o(d6,"moveSync");function p6(r){let e=qp.dirname(r);return qp.parse(e).root===e}o(p6,"isParentRoot");function m6(r,e,t,i){if(i)return Lp(r,e,t);if(t)return T3(e),Lp(r,e,t);if(E3.existsSync(e))throw new Error("dest already exists.");return Lp(r,e,t)}o(m6,"doRename");function Lp(r,e,t){try{E3.renameSync(r,e)}catch(i){if(i.code!=="EXDEV")throw i;return g6(r,e,t)}}o(Lp,"rename");function g6(r,e,t){return f6(r,e,{overwrite:t,errorOnExist:!0,preserveTimestamps:!0}),T3(r)}o(g6,"moveAcrossDevice");x3.exports=d6});var C3=y((eM,O3)=>{"use strict";var y6=yt().fromPromise;O3.exports={move:y6(S3()),moveSync:A3()}});var ku=y((tM,F3)=>{"use strict";F3.exports={...Kt(),...Pu(),...Cy(),...e3(),...g3(),...Qr(),...C3(),...Nu(),...sn(),...Ma()}});var M_=y((yM,j_)=>{"use strict";j_.exports=N_;function N_(r,e,t){r instanceof RegExp&&(r=I_(r,t)),e instanceof RegExp&&(e=I_(e,t));var i=k_(r,e,t);return i&&{start:i[0],end:i[1],pre:t.slice(0,i[0]),body:t.slice(i[0]+r.length,i[1]),post:t.slice(i[1]+e.length)}}o(N_,"balanced");function I_(r,e){var t=e.match(r);return t?t[0]:null}o(I_,"maybeMatch");N_.range=k_;function k_(r,e,t){var i,n,s,a,c,u=t.indexOf(r),f=t.indexOf(e,u+1),l=u;if(u>=0&&f>0){if(r===e)return[u,f];for(i=[],s=t.length;l>=0&&!c;)l==u?(i.push(l),u=t.indexOf(r,l+1)):i.length==1?c=[i.pop(),f]:(n=i.pop(),n<s&&(s=n,a=f),f=t.indexOf(e,l+1)),l=u<f&&u>=0?u:f;i.length&&(c=[s,a])}return c}o(k_,"range")});var W_=y((vM,G_)=>{var L_=M_();G_.exports=BC;var q_="\0SLASH"+Math.random()+"\0",V_="\0OPEN"+Math.random()+"\0",rm="\0CLOSE"+Math.random()+"\0",U_="\0COMMA"+Math.random()+"\0",B_="\0PERIOD"+Math.random()+"\0";function tm(r){return parseInt(r,10)==r?parseInt(r,10):r.charCodeAt(0)}o(tm,"numeric");function VC(r){return r.split("\\\\").join(q_).split("\\{").join(V_).split("\\}").join(rm).split("\\,").join(U_).split("\\.").join(B_)}o(VC,"escapeBraces");function UC(r){return r.split(q_).join("\\").split(V_).join("{").split(rm).join("}").split(U_).join(",").split(B_).join(".")}o(UC,"unescapeBraces");function $_(r){if(!r)return[""];var e=[],t=L_("{","}",r);if(!t)return r.split(",");var i=t.pre,n=t.body,s=t.post,a=i.split(",");a[a.length-1]+="{"+n+"}";var c=$_(s);return s.length&&(a[a.length-1]+=c.shift(),a.push.apply(a,c)),e.push.apply(e,a),e}o($_,"parseCommaParts");function BC(r){return r?(r.substr(0,2)==="{}"&&(r="\\{\\}"+r.substr(2)),Ha(VC(r),!0).map(UC)):[]}o(BC,"expandTop");function $C(r){return"{"+r+"}"}o($C,"embrace");function GC(r){return/^-?0\d/.test(r)}o(GC,"isPadded");function WC(r,e){return r<=e}o(WC,"lte");function HC(r,e){return r>=e}o(HC,"gte");function Ha(r,e){var t=[],i=L_("{","}",r);if(!i)return[r];var n=i.pre,s=i.post.length?Ha(i.post,!1):[""];if(/\$$/.test(i.pre))for(var a=0;a<s.length;a++){var c=n+"{"+i.body+"}"+s[a];t.push(c)}else{var u=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(i.body),f=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(i.body),l=u||f,h=i.body.indexOf(",")>=0;if(!l&&!h)return i.post.match(/,(?!,).*\}/)?(r=i.pre+"{"+i.body+rm+i.post,Ha(r)):[r];var p;if(l)p=i.body.split(/\.\./);else if(p=$_(i.body),p.length===1&&(p=Ha(p[0],!1).map($C),p.length===1))return s.map(function(ce){return i.pre+p[0]+ce});var g;if(l){var v=tm(p[0]),S=tm(p[1]),A=Math.max(p[0].length,p[1].length),F=p.length==3?Math.abs(tm(p[2])):1,D=WC,U=S<v;U&&(F*=-1,D=HC);var H=p.some(GC);g=[];for(var ne=v;D(ne,S);ne+=F){var Fe;if(f)Fe=String.fromCharCode(ne),Fe==="\\"&&(Fe="");else if(Fe=String(ne),H){var it=A-Fe.length;if(it>0){var pt=new Array(it+1).join("0");ne<0?Fe="-"+pt+Fe.slice(1):Fe=pt+Fe}}g.push(Fe)}}else{g=[];for(var V=0;V<p.length;V++)g.push.apply(g,Ha(p[V],!1))}for(var V=0;V<g.length;V++)for(var a=0;a<s.length;a++){var c=n+g[V]+s[a];(!e||l||c)&&t.push(c)}}return t}o(Ha,"expand")});var yV=st(ql());var F1=st(C1(),1),{program:TF,createCommand:xF,createArgument:AF,createOption:OF,CommanderError:CF,InvalidArgumentError:FF,InvalidOptionArgumentError:PF,Command:zi,Argument:DF,Option:RF,Help:IF}=F1.default;var Wa=require("fs"),em=require("path"),or=st(Gn());var ht=st(ku()),Mt=st(require("path"));function W3(r){return typeof r>"u"||r===null}o(W3,"isNothing");function _6(r){return typeof r=="object"&&r!==null}o(_6,"isObject");function v6(r){return Array.isArray(r)?r:W3(r)?[]:[r]}o(v6,"toArray");function b6(r,e){var t,i,n,s;if(e)for(s=Object.keys(e),t=0,i=s.length;t<i;t+=1)n=s[t],r[n]=e[n];return r}o(b6,"extend");function S6(r,e){var t="",i;for(i=0;i<e;i+=1)t+=r;return t}o(S6,"repeat");function w6(r){return r===0&&Number.NEGATIVE_INFINITY===1/r}o(w6,"isNegativeZero");var E6=W3,T6=_6,x6=v6,A6=S6,O6=w6,C6=b6,ft={isNothing:E6,isObject:T6,toArray:x6,repeat:A6,isNegativeZero:O6,extend:C6};function H3(r,e){var t="",i=r.reason||"(unknown reason)";return r.mark?(r.mark.name&&(t+='in "'+r.mark.name+'" '),t+="("+(r.mark.line+1)+":"+(r.mark.column+1)+")",!e&&r.mark.snippet&&(t+=`

`+r.mark.snippet),i+" "+t):i}o(H3,"formatError");function Va(r,e){Error.call(this),this.name="YAMLException",this.reason=r,this.mark=e,this.message=H3(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}o(Va,"YAMLException$1");Va.prototype=Object.create(Error.prototype);Va.prototype.constructor=Va;Va.prototype.toString=o(function(e){return this.name+": "+H3(this,e)},"toString");var Jt=Va;function Vp(r,e,t,i,n){var s="",a="",c=Math.floor(n/2)-1;return i-e>c&&(s=" ... ",e=i-c+s.length),t-i>c&&(a=" ...",t=i+c-a.length),{str:s+r.slice(e,t).replace(/\t/g,"\u2192")+a,pos:i-e+s.length}}o(Vp,"getLine");function Up(r,e){return ft.repeat(" ",e-r.length)+r}o(Up,"padStart");function F6(r,e){if(e=Object.create(e||null),!r.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var t=/\r?\n|\r|\0/g,i=[0],n=[],s,a=-1;s=t.exec(r.buffer);)n.push(s.index),i.push(s.index+s[0].length),r.position<=s.index&&a<0&&(a=i.length-2);a<0&&(a=i.length-1);var c="",u,f,l=Math.min(r.line+e.linesAfter,n.length).toString().length,h=e.maxLength-(e.indent+l+3);for(u=1;u<=e.linesBefore&&!(a-u<0);u++)f=Vp(r.buffer,i[a-u],n[a-u],r.position-(i[a]-i[a-u]),h),c=ft.repeat(" ",e.indent)+Up((r.line-u+1).toString(),l)+" | "+f.str+`
`+c;for(f=Vp(r.buffer,i[a],n[a],r.position,h),c+=ft.repeat(" ",e.indent)+Up((r.line+1).toString(),l)+" | "+f.str+`
`,c+=ft.repeat("-",e.indent+l+3+f.pos)+`^
`,u=1;u<=e.linesAfter&&!(a+u>=n.length);u++)f=Vp(r.buffer,i[a+u],n[a+u],r.position-(i[a]-i[a+u]),h),c+=ft.repeat(" ",e.indent)+Up((r.line+u+1).toString(),l)+" | "+f.str+`
`;return c.replace(/\n$/,"")}o(F6,"makeSnippet");var P6=F6,D6=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],R6=["scalar","sequence","mapping"];function I6(r){var e={};return r!==null&&Object.keys(r).forEach(function(t){r[t].forEach(function(i){e[String(i)]=t})}),e}o(I6,"compileStyleAliases");function N6(r,e){if(e=e||{},Object.keys(e).forEach(function(t){if(D6.indexOf(t)===-1)throw new Jt('Unknown option "'+t+'" is met in definition of "'+r+'" YAML type.')}),this.options=e,this.tag=r,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=I6(e.styleAliases||null),R6.indexOf(this.kind)===-1)throw new Jt('Unknown kind "'+this.kind+'" is specified for "'+r+'" YAML type.')}o(N6,"Type$1");var Pt=N6;function P3(r,e){var t=[];return r[e].forEach(function(i){var n=t.length;t.forEach(function(s,a){s.tag===i.tag&&s.kind===i.kind&&s.multi===i.multi&&(n=a)}),t[n]=i}),t}o(P3,"compileList");function k6(){var r={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,t;function i(n){n.multi?(r.multi[n.kind].push(n),r.multi.fallback.push(n)):r[n.kind][n.tag]=r.fallback[n.tag]=n}for(o(i,"collectType"),e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(i);return r}o(k6,"compileMap");function $p(r){return this.extend(r)}o($p,"Schema$1");$p.prototype.extend=o(function(e){var t=[],i=[];if(e instanceof Pt)i.push(e);else if(Array.isArray(e))i=i.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(t=t.concat(e.implicit)),e.explicit&&(i=i.concat(e.explicit));else throw new Jt("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.forEach(function(s){if(!(s instanceof Pt))throw new Jt("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Jt("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Jt("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),i.forEach(function(s){if(!(s instanceof Pt))throw new Jt("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var n=Object.create($p.prototype);return n.implicit=(this.implicit||[]).concat(t),n.explicit=(this.explicit||[]).concat(i),n.compiledImplicit=P3(n,"implicit"),n.compiledExplicit=P3(n,"explicit"),n.compiledTypeMap=k6(n.compiledImplicit,n.compiledExplicit),n},"extend");var z3=$p,K3=new Pt("tag:yaml.org,2002:str",{kind:"scalar",construct:o(function(r){return r!==null?r:""},"construct")}),Y3=new Pt("tag:yaml.org,2002:seq",{kind:"sequence",construct:o(function(r){return r!==null?r:[]},"construct")}),Q3=new Pt("tag:yaml.org,2002:map",{kind:"mapping",construct:o(function(r){return r!==null?r:{}},"construct")}),J3=new z3({explicit:[K3,Y3,Q3]});function j6(r){if(r===null)return!0;var e=r.length;return e===1&&r==="~"||e===4&&(r==="null"||r==="Null"||r==="NULL")}o(j6,"resolveYamlNull");function M6(){return null}o(M6,"constructYamlNull");function L6(r){return r===null}o(L6,"isNull");var X3=new Pt("tag:yaml.org,2002:null",{kind:"scalar",resolve:j6,construct:M6,predicate:L6,represent:{canonical:o(function(){return"~"},"canonical"),lowercase:o(function(){return"null"},"lowercase"),uppercase:o(function(){return"NULL"},"uppercase"),camelcase:o(function(){return"Null"},"camelcase"),empty:o(function(){return""},"empty")},defaultStyle:"lowercase"});function q6(r){if(r===null)return!1;var e=r.length;return e===4&&(r==="true"||r==="True"||r==="TRUE")||e===5&&(r==="false"||r==="False"||r==="FALSE")}o(q6,"resolveYamlBoolean");function V6(r){return r==="true"||r==="True"||r==="TRUE"}o(V6,"constructYamlBoolean");function U6(r){return Object.prototype.toString.call(r)==="[object Boolean]"}o(U6,"isBoolean");var Z3=new Pt("tag:yaml.org,2002:bool",{kind:"scalar",resolve:q6,construct:V6,predicate:U6,represent:{lowercase:o(function(r){return r?"true":"false"},"lowercase"),uppercase:o(function(r){return r?"TRUE":"FALSE"},"uppercase"),camelcase:o(function(r){return r?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function B6(r){return 48<=r&&r<=57||65<=r&&r<=70||97<=r&&r<=102}o(B6,"isHexCode");function $6(r){return 48<=r&&r<=55}o($6,"isOctCode");function G6(r){return 48<=r&&r<=57}o(G6,"isDecCode");function W6(r){if(r===null)return!1;var e=r.length,t=0,i=!1,n;if(!e)return!1;if(n=r[t],(n==="-"||n==="+")&&(n=r[++t]),n==="0"){if(t+1===e)return!0;if(n=r[++t],n==="b"){for(t++;t<e;t++)if(n=r[t],n!=="_"){if(n!=="0"&&n!=="1")return!1;i=!0}return i&&n!=="_"}if(n==="x"){for(t++;t<e;t++)if(n=r[t],n!=="_"){if(!B6(r.charCodeAt(t)))return!1;i=!0}return i&&n!=="_"}if(n==="o"){for(t++;t<e;t++)if(n=r[t],n!=="_"){if(!$6(r.charCodeAt(t)))return!1;i=!0}return i&&n!=="_"}}if(n==="_")return!1;for(;t<e;t++)if(n=r[t],n!=="_"){if(!G6(r.charCodeAt(t)))return!1;i=!0}return!(!i||n==="_")}o(W6,"resolveYamlInteger");function H6(r){var e=r,t=1,i;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),i=e[0],(i==="-"||i==="+")&&(i==="-"&&(t=-1),e=e.slice(1),i=e[0]),e==="0")return 0;if(i==="0"){if(e[1]==="b")return t*parseInt(e.slice(2),2);if(e[1]==="x")return t*parseInt(e.slice(2),16);if(e[1]==="o")return t*parseInt(e.slice(2),8)}return t*parseInt(e,10)}o(H6,"constructYamlInteger");function z6(r){return Object.prototype.toString.call(r)==="[object Number]"&&r%1===0&&!ft.isNegativeZero(r)}o(z6,"isInteger");var e_=new Pt("tag:yaml.org,2002:int",{kind:"scalar",resolve:W6,construct:H6,predicate:z6,represent:{binary:o(function(r){return r>=0?"0b"+r.toString(2):"-0b"+r.toString(2).slice(1)},"binary"),octal:o(function(r){return r>=0?"0o"+r.toString(8):"-0o"+r.toString(8).slice(1)},"octal"),decimal:o(function(r){return r.toString(10)},"decimal"),hexadecimal:o(function(r){return r>=0?"0x"+r.toString(16).toUpperCase():"-0x"+r.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),K6=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function Y6(r){return!(r===null||!K6.test(r)||r[r.length-1]==="_")}o(Y6,"resolveYamlFloat");function Q6(r){var e,t;return e=r.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:t*parseFloat(e,10)}o(Q6,"constructYamlFloat");var J6=/^[-+]?[0-9]+e/;function X6(r,e){var t;if(isNaN(r))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===r)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===r)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(ft.isNegativeZero(r))return"-0.0";return t=r.toString(10),J6.test(t)?t.replace("e",".e"):t}o(X6,"representYamlFloat");function Z6(r){return Object.prototype.toString.call(r)==="[object Number]"&&(r%1!==0||ft.isNegativeZero(r))}o(Z6,"isFloat");var t_=new Pt("tag:yaml.org,2002:float",{kind:"scalar",resolve:Y6,construct:Q6,predicate:Z6,represent:X6,defaultStyle:"lowercase"}),r_=J3.extend({implicit:[X3,Z3,e_,t_]}),i_=r_,n_=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),s_=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function eO(r){return r===null?!1:n_.exec(r)!==null||s_.exec(r)!==null}o(eO,"resolveYamlTimestamp");function tO(r){var e,t,i,n,s,a,c,u=0,f=null,l,h,p;if(e=n_.exec(r),e===null&&(e=s_.exec(r)),e===null)throw new Error("Date resolve error");if(t=+e[1],i=+e[2]-1,n=+e[3],!e[4])return new Date(Date.UTC(t,i,n));if(s=+e[4],a=+e[5],c=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(l=+e[10],h=+(e[11]||0),f=(l*60+h)*6e4,e[9]==="-"&&(f=-f)),p=new Date(Date.UTC(t,i,n,s,a,c,u)),f&&p.setTime(p.getTime()-f),p}o(tO,"constructYamlTimestamp");function rO(r){return r.toISOString()}o(rO,"representYamlTimestamp");var a_=new Pt("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:eO,construct:tO,instanceOf:Date,represent:rO});function iO(r){return r==="<<"||r===null}o(iO,"resolveYamlMerge");var o_=new Pt("tag:yaml.org,2002:merge",{kind:"scalar",resolve:iO}),Kp=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function nO(r){if(r===null)return!1;var e,t,i=0,n=r.length,s=Kp;for(t=0;t<n;t++)if(e=s.indexOf(r.charAt(t)),!(e>64)){if(e<0)return!1;i+=6}return i%8===0}o(nO,"resolveYamlBinary");function sO(r){var e,t,i=r.replace(/[\r\n=]/g,""),n=i.length,s=Kp,a=0,c=[];for(e=0;e<n;e++)e%4===0&&e&&(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)),a=a<<6|s.indexOf(i.charAt(e));return t=n%4*6,t===0?(c.push(a>>16&255),c.push(a>>8&255),c.push(a&255)):t===18?(c.push(a>>10&255),c.push(a>>2&255)):t===12&&c.push(a>>4&255),new Uint8Array(c)}o(sO,"constructYamlBinary");function aO(r){var e="",t=0,i,n,s=r.length,a=Kp;for(i=0;i<s;i++)i%3===0&&i&&(e+=a[t>>18&63],e+=a[t>>12&63],e+=a[t>>6&63],e+=a[t&63]),t=(t<<8)+r[i];return n=s%3,n===0?(e+=a[t>>18&63],e+=a[t>>12&63],e+=a[t>>6&63],e+=a[t&63]):n===2?(e+=a[t>>10&63],e+=a[t>>4&63],e+=a[t<<2&63],e+=a[64]):n===1&&(e+=a[t>>2&63],e+=a[t<<4&63],e+=a[64],e+=a[64]),e}o(aO,"representYamlBinary");function oO(r){return Object.prototype.toString.call(r)==="[object Uint8Array]"}o(oO,"isBinary");var c_=new Pt("tag:yaml.org,2002:binary",{kind:"scalar",resolve:nO,construct:sO,predicate:oO,represent:aO}),cO=Object.prototype.hasOwnProperty,uO=Object.prototype.toString;function lO(r){if(r===null)return!0;var e=[],t,i,n,s,a,c=r;for(t=0,i=c.length;t<i;t+=1){if(n=c[t],a=!1,uO.call(n)!=="[object Object]")return!1;for(s in n)if(cO.call(n,s))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(s)===-1)e.push(s);else return!1}return!0}o(lO,"resolveYamlOmap");function fO(r){return r!==null?r:[]}o(fO,"constructYamlOmap");var u_=new Pt("tag:yaml.org,2002:omap",{kind:"sequence",resolve:lO,construct:fO}),hO=Object.prototype.toString;function dO(r){if(r===null)return!0;var e,t,i,n,s,a=r;for(s=new Array(a.length),e=0,t=a.length;e<t;e+=1){if(i=a[e],hO.call(i)!=="[object Object]"||(n=Object.keys(i),n.length!==1))return!1;s[e]=[n[0],i[n[0]]]}return!0}o(dO,"resolveYamlPairs");function pO(r){if(r===null)return[];var e,t,i,n,s,a=r;for(s=new Array(a.length),e=0,t=a.length;e<t;e+=1)i=a[e],n=Object.keys(i),s[e]=[n[0],i[n[0]]];return s}o(pO,"constructYamlPairs");var l_=new Pt("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:dO,construct:pO}),mO=Object.prototype.hasOwnProperty;function gO(r){if(r===null)return!0;var e,t=r;for(e in t)if(mO.call(t,e)&&t[e]!==null)return!1;return!0}o(gO,"resolveYamlSet");function yO(r){return r!==null?r:{}}o(yO,"constructYamlSet");var f_=new Pt("tag:yaml.org,2002:set",{kind:"mapping",resolve:gO,construct:yO}),Yp=i_.extend({implicit:[a_,o_],explicit:[c_,u_,l_,f_]}),un=Object.prototype.hasOwnProperty,ju=1,h_=2,d_=3,Mu=4,Bp=1,_O=2,D3=3,vO=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,bO=/[\x85\u2028\u2029]/,SO=/[,\[\]\{\}]/,p_=/^(?:!|!!|![a-z\-]+!)$/i,m_=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function R3(r){return Object.prototype.toString.call(r)}o(R3,"_class");function mi(r){return r===10||r===13}o(mi,"is_EOL");function Kn(r){return r===9||r===32}o(Kn,"is_WHITE_SPACE");function ar(r){return r===9||r===32||r===10||r===13}o(ar,"is_WS_OR_EOL");function js(r){return r===44||r===91||r===93||r===123||r===125}o(js,"is_FLOW_INDICATOR");function wO(r){var e;return 48<=r&&r<=57?r-48:(e=r|32,97<=e&&e<=102?e-97+10:-1)}o(wO,"fromHexCode");function EO(r){return r===120?2:r===117?4:r===85?8:0}o(EO,"escapedHexLen");function TO(r){return 48<=r&&r<=57?r-48:-1}o(TO,"fromDecimalCode");function I3(r){return r===48?"\0":r===97?"\x07":r===98?"\b":r===116||r===9?"	":r===110?`
`:r===118?"\v":r===102?"\f":r===114?"\r":r===101?"\x1B":r===32?" ":r===34?'"':r===47?"/":r===92?"\\":r===78?"\x85":r===95?"\xA0":r===76?"\u2028":r===80?"\u2029":""}o(I3,"simpleEscapeSequence");function xO(r){return r<=65535?String.fromCharCode(r):String.fromCharCode((r-65536>>10)+55296,(r-65536&1023)+56320)}o(xO,"charFromCodepoint");var g_=new Array(256),y_=new Array(256);for(zn=0;zn<256;zn++)g_[zn]=I3(zn)?1:0,y_[zn]=I3(zn);var zn;function AO(r,e){this.input=r,this.filename=e.filename||null,this.schema=e.schema||Yp,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=r.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}o(AO,"State$1");function __(r,e){var t={name:r.filename,buffer:r.input.slice(0,-1),position:r.position,line:r.line,column:r.position-r.lineStart};return t.snippet=P6(t),new Jt(e,t)}o(__,"generateError");function K(r,e){throw __(r,e)}o(K,"throwError");function Lu(r,e){r.onWarning&&r.onWarning.call(null,__(r,e))}o(Lu,"throwWarning");var N3={YAML:o(function(e,t,i){var n,s,a;e.version!==null&&K(e,"duplication of %YAML directive"),i.length!==1&&K(e,"YAML directive accepts exactly one argument"),n=/^([0-9]+)\.([0-9]+)$/.exec(i[0]),n===null&&K(e,"ill-formed argument of the YAML directive"),s=parseInt(n[1],10),a=parseInt(n[2],10),s!==1&&K(e,"unacceptable YAML version of the document"),e.version=i[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&Lu(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:o(function(e,t,i){var n,s;i.length!==2&&K(e,"TAG directive accepts exactly two arguments"),n=i[0],s=i[1],p_.test(n)||K(e,"ill-formed tag handle (first argument) of the TAG directive"),un.call(e.tagMap,n)&&K(e,'there is a previously declared suffix for "'+n+'" tag handle'),m_.test(s)||K(e,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{K(e,"tag prefix is malformed: "+s)}e.tagMap[n]=s},"handleTagDirective")};function cn(r,e,t,i){var n,s,a,c;if(e<t){if(c=r.input.slice(e,t),i)for(n=0,s=c.length;n<s;n+=1)a=c.charCodeAt(n),a===9||32<=a&&a<=1114111||K(r,"expected valid JSON character");else vO.test(c)&&K(r,"the stream contains non-printable characters");r.result+=c}}o(cn,"captureSegment");function k3(r,e,t,i){var n,s,a,c;for(ft.isObject(t)||K(r,"cannot merge mappings; the provided source object is unacceptable"),n=Object.keys(t),a=0,c=n.length;a<c;a+=1)s=n[a],un.call(e,s)||(e[s]=t[s],i[s]=!0)}o(k3,"mergeMappings");function Ms(r,e,t,i,n,s,a,c,u){var f,l;if(Array.isArray(n))for(n=Array.prototype.slice.call(n),f=0,l=n.length;f<l;f+=1)Array.isArray(n[f])&&K(r,"nested arrays are not supported inside keys"),typeof n=="object"&&R3(n[f])==="[object Object]"&&(n[f]="[object Object]");if(typeof n=="object"&&R3(n)==="[object Object]"&&(n="[object Object]"),n=String(n),e===null&&(e={}),i==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(f=0,l=s.length;f<l;f+=1)k3(r,e,s[f],t);else k3(r,e,s,t);else!r.json&&!un.call(t,n)&&un.call(e,n)&&(r.line=a||r.line,r.lineStart=c||r.lineStart,r.position=u||r.position,K(r,"duplicated mapping key")),n==="__proto__"?Object.defineProperty(e,n,{configurable:!0,enumerable:!0,writable:!0,value:s}):e[n]=s,delete t[n];return e}o(Ms,"storeMappingPair");function Qp(r){var e;e=r.input.charCodeAt(r.position),e===10?r.position++:e===13?(r.position++,r.input.charCodeAt(r.position)===10&&r.position++):K(r,"a line break is expected"),r.line+=1,r.lineStart=r.position,r.firstTabInLine=-1}o(Qp,"readLineBreak");function lt(r,e,t){for(var i=0,n=r.input.charCodeAt(r.position);n!==0;){for(;Kn(n);)n===9&&r.firstTabInLine===-1&&(r.firstTabInLine=r.position),n=r.input.charCodeAt(++r.position);if(e&&n===35)do n=r.input.charCodeAt(++r.position);while(n!==10&&n!==13&&n!==0);if(mi(n))for(Qp(r),n=r.input.charCodeAt(r.position),i++,r.lineIndent=0;n===32;)r.lineIndent++,n=r.input.charCodeAt(++r.position);else break}return t!==-1&&i!==0&&r.lineIndent<t&&Lu(r,"deficient indentation"),i}o(lt,"skipSeparationSpace");function Uu(r){var e=r.position,t;return t=r.input.charCodeAt(e),!!((t===45||t===46)&&t===r.input.charCodeAt(e+1)&&t===r.input.charCodeAt(e+2)&&(e+=3,t=r.input.charCodeAt(e),t===0||ar(t)))}o(Uu,"testDocumentSeparator");function Jp(r,e){e===1?r.result+=" ":e>1&&(r.result+=ft.repeat(`
`,e-1))}o(Jp,"writeFoldedLines");function OO(r,e,t){var i,n,s,a,c,u,f,l,h=r.kind,p=r.result,g;if(g=r.input.charCodeAt(r.position),ar(g)||js(g)||g===35||g===38||g===42||g===33||g===124||g===62||g===39||g===34||g===37||g===64||g===96||(g===63||g===45)&&(n=r.input.charCodeAt(r.position+1),ar(n)||t&&js(n)))return!1;for(r.kind="scalar",r.result="",s=a=r.position,c=!1;g!==0;){if(g===58){if(n=r.input.charCodeAt(r.position+1),ar(n)||t&&js(n))break}else if(g===35){if(i=r.input.charCodeAt(r.position-1),ar(i))break}else{if(r.position===r.lineStart&&Uu(r)||t&&js(g))break;if(mi(g))if(u=r.line,f=r.lineStart,l=r.lineIndent,lt(r,!1,-1),r.lineIndent>=e){c=!0,g=r.input.charCodeAt(r.position);continue}else{r.position=a,r.line=u,r.lineStart=f,r.lineIndent=l;break}}c&&(cn(r,s,a,!1),Jp(r,r.line-u),s=a=r.position,c=!1),Kn(g)||(a=r.position+1),g=r.input.charCodeAt(++r.position)}return cn(r,s,a,!1),r.result?!0:(r.kind=h,r.result=p,!1)}o(OO,"readPlainScalar");function CO(r,e){var t,i,n;if(t=r.input.charCodeAt(r.position),t!==39)return!1;for(r.kind="scalar",r.result="",r.position++,i=n=r.position;(t=r.input.charCodeAt(r.position))!==0;)if(t===39)if(cn(r,i,r.position,!0),t=r.input.charCodeAt(++r.position),t===39)i=r.position,r.position++,n=r.position;else return!0;else mi(t)?(cn(r,i,n,!0),Jp(r,lt(r,!1,e)),i=n=r.position):r.position===r.lineStart&&Uu(r)?K(r,"unexpected end of the document within a single quoted scalar"):(r.position++,n=r.position);K(r,"unexpected end of the stream within a single quoted scalar")}o(CO,"readSingleQuotedScalar");function FO(r,e){var t,i,n,s,a,c;if(c=r.input.charCodeAt(r.position),c!==34)return!1;for(r.kind="scalar",r.result="",r.position++,t=i=r.position;(c=r.input.charCodeAt(r.position))!==0;){if(c===34)return cn(r,t,r.position,!0),r.position++,!0;if(c===92){if(cn(r,t,r.position,!0),c=r.input.charCodeAt(++r.position),mi(c))lt(r,!1,e);else if(c<256&&g_[c])r.result+=y_[c],r.position++;else if((a=EO(c))>0){for(n=a,s=0;n>0;n--)c=r.input.charCodeAt(++r.position),(a=wO(c))>=0?s=(s<<4)+a:K(r,"expected hexadecimal character");r.result+=xO(s),r.position++}else K(r,"unknown escape sequence");t=i=r.position}else mi(c)?(cn(r,t,i,!0),Jp(r,lt(r,!1,e)),t=i=r.position):r.position===r.lineStart&&Uu(r)?K(r,"unexpected end of the document within a double quoted scalar"):(r.position++,i=r.position)}K(r,"unexpected end of the stream within a double quoted scalar")}o(FO,"readDoubleQuotedScalar");function PO(r,e){var t=!0,i,n,s,a=r.tag,c,u=r.anchor,f,l,h,p,g,v=Object.create(null),S,A,F,D;if(D=r.input.charCodeAt(r.position),D===91)l=93,g=!1,c=[];else if(D===123)l=125,g=!0,c={};else return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=c),D=r.input.charCodeAt(++r.position);D!==0;){if(lt(r,!0,e),D=r.input.charCodeAt(r.position),D===l)return r.position++,r.tag=a,r.anchor=u,r.kind=g?"mapping":"sequence",r.result=c,!0;t?D===44&&K(r,"expected the node content, but found ','"):K(r,"missed comma between flow collection entries"),A=S=F=null,h=p=!1,D===63&&(f=r.input.charCodeAt(r.position+1),ar(f)&&(h=p=!0,r.position++,lt(r,!0,e))),i=r.line,n=r.lineStart,s=r.position,Ls(r,e,ju,!1,!0),A=r.tag,S=r.result,lt(r,!0,e),D=r.input.charCodeAt(r.position),(p||r.line===i)&&D===58&&(h=!0,D=r.input.charCodeAt(++r.position),lt(r,!0,e),Ls(r,e,ju,!1,!0),F=r.result),g?Ms(r,c,v,A,S,F,i,n,s):h?c.push(Ms(r,null,v,A,S,F,i,n,s)):c.push(S),lt(r,!0,e),D=r.input.charCodeAt(r.position),D===44?(t=!0,D=r.input.charCodeAt(++r.position)):t=!1}K(r,"unexpected end of the stream within a flow collection")}o(PO,"readFlowCollection");function DO(r,e){var t,i,n=Bp,s=!1,a=!1,c=e,u=0,f=!1,l,h;if(h=r.input.charCodeAt(r.position),h===124)i=!1;else if(h===62)i=!0;else return!1;for(r.kind="scalar",r.result="";h!==0;)if(h=r.input.charCodeAt(++r.position),h===43||h===45)Bp===n?n=h===43?D3:_O:K(r,"repeat of a chomping mode identifier");else if((l=TO(h))>=0)l===0?K(r,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?K(r,"repeat of an indentation width identifier"):(c=e+l-1,a=!0);else break;if(Kn(h)){do h=r.input.charCodeAt(++r.position);while(Kn(h));if(h===35)do h=r.input.charCodeAt(++r.position);while(!mi(h)&&h!==0)}for(;h!==0;){for(Qp(r),r.lineIndent=0,h=r.input.charCodeAt(r.position);(!a||r.lineIndent<c)&&h===32;)r.lineIndent++,h=r.input.charCodeAt(++r.position);if(!a&&r.lineIndent>c&&(c=r.lineIndent),mi(h)){u++;continue}if(r.lineIndent<c){n===D3?r.result+=ft.repeat(`
`,s?1+u:u):n===Bp&&s&&(r.result+=`
`);break}for(i?Kn(h)?(f=!0,r.result+=ft.repeat(`
`,s?1+u:u)):f?(f=!1,r.result+=ft.repeat(`
`,u+1)):u===0?s&&(r.result+=" "):r.result+=ft.repeat(`
`,u):r.result+=ft.repeat(`
`,s?1+u:u),s=!0,a=!0,u=0,t=r.position;!mi(h)&&h!==0;)h=r.input.charCodeAt(++r.position);cn(r,t,r.position,!1)}return!0}o(DO,"readBlockScalar");function j3(r,e){var t,i=r.tag,n=r.anchor,s=[],a,c=!1,u;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=s),u=r.input.charCodeAt(r.position);u!==0&&(r.firstTabInLine!==-1&&(r.position=r.firstTabInLine,K(r,"tab characters must not be used in indentation")),!(u!==45||(a=r.input.charCodeAt(r.position+1),!ar(a))));){if(c=!0,r.position++,lt(r,!0,-1)&&r.lineIndent<=e){s.push(null),u=r.input.charCodeAt(r.position);continue}if(t=r.line,Ls(r,e,d_,!1,!0),s.push(r.result),lt(r,!0,-1),u=r.input.charCodeAt(r.position),(r.line===t||r.lineIndent>e)&&u!==0)K(r,"bad indentation of a sequence entry");else if(r.lineIndent<e)break}return c?(r.tag=i,r.anchor=n,r.kind="sequence",r.result=s,!0):!1}o(j3,"readBlockSequence");function RO(r,e,t){var i,n,s,a,c,u,f=r.tag,l=r.anchor,h={},p=Object.create(null),g=null,v=null,S=null,A=!1,F=!1,D;if(r.firstTabInLine!==-1)return!1;for(r.anchor!==null&&(r.anchorMap[r.anchor]=h),D=r.input.charCodeAt(r.position);D!==0;){if(!A&&r.firstTabInLine!==-1&&(r.position=r.firstTabInLine,K(r,"tab characters must not be used in indentation")),i=r.input.charCodeAt(r.position+1),s=r.line,(D===63||D===58)&&ar(i))D===63?(A&&(Ms(r,h,p,g,v,null,a,c,u),g=v=S=null),F=!0,A=!0,n=!0):A?(A=!1,n=!0):K(r,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),r.position+=1,D=i;else{if(a=r.line,c=r.lineStart,u=r.position,!Ls(r,t,h_,!1,!0))break;if(r.line===s){for(D=r.input.charCodeAt(r.position);Kn(D);)D=r.input.charCodeAt(++r.position);if(D===58)D=r.input.charCodeAt(++r.position),ar(D)||K(r,"a whitespace character is expected after the key-value separator within a block mapping"),A&&(Ms(r,h,p,g,v,null,a,c,u),g=v=S=null),F=!0,A=!1,n=!1,g=r.tag,v=r.result;else if(F)K(r,"can not read an implicit mapping pair; a colon is missed");else return r.tag=f,r.anchor=l,!0}else if(F)K(r,"can not read a block mapping entry; a multiline key may not be an implicit key");else return r.tag=f,r.anchor=l,!0}if((r.line===s||r.lineIndent>e)&&(A&&(a=r.line,c=r.lineStart,u=r.position),Ls(r,e,Mu,!0,n)&&(A?v=r.result:S=r.result),A||(Ms(r,h,p,g,v,S,a,c,u),g=v=S=null),lt(r,!0,-1),D=r.input.charCodeAt(r.position)),(r.line===s||r.lineIndent>e)&&D!==0)K(r,"bad indentation of a mapping entry");else if(r.lineIndent<e)break}return A&&Ms(r,h,p,g,v,null,a,c,u),F&&(r.tag=f,r.anchor=l,r.kind="mapping",r.result=h),F}o(RO,"readBlockMapping");function IO(r){var e,t=!1,i=!1,n,s,a;if(a=r.input.charCodeAt(r.position),a!==33)return!1;if(r.tag!==null&&K(r,"duplication of a tag property"),a=r.input.charCodeAt(++r.position),a===60?(t=!0,a=r.input.charCodeAt(++r.position)):a===33?(i=!0,n="!!",a=r.input.charCodeAt(++r.position)):n="!",e=r.position,t){do a=r.input.charCodeAt(++r.position);while(a!==0&&a!==62);r.position<r.length?(s=r.input.slice(e,r.position),a=r.input.charCodeAt(++r.position)):K(r,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!ar(a);)a===33&&(i?K(r,"tag suffix cannot contain exclamation marks"):(n=r.input.slice(e-1,r.position+1),p_.test(n)||K(r,"named tag handle cannot contain such characters"),i=!0,e=r.position+1)),a=r.input.charCodeAt(++r.position);s=r.input.slice(e,r.position),SO.test(s)&&K(r,"tag suffix cannot contain flow indicator characters")}s&&!m_.test(s)&&K(r,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{K(r,"tag name is malformed: "+s)}return t?r.tag=s:un.call(r.tagMap,n)?r.tag=r.tagMap[n]+s:n==="!"?r.tag="!"+s:n==="!!"?r.tag="tag:yaml.org,2002:"+s:K(r,'undeclared tag handle "'+n+'"'),!0}o(IO,"readTagProperty");function NO(r){var e,t;if(t=r.input.charCodeAt(r.position),t!==38)return!1;for(r.anchor!==null&&K(r,"duplication of an anchor property"),t=r.input.charCodeAt(++r.position),e=r.position;t!==0&&!ar(t)&&!js(t);)t=r.input.charCodeAt(++r.position);return r.position===e&&K(r,"name of an anchor node must contain at least one character"),r.anchor=r.input.slice(e,r.position),!0}o(NO,"readAnchorProperty");function kO(r){var e,t,i;if(i=r.input.charCodeAt(r.position),i!==42)return!1;for(i=r.input.charCodeAt(++r.position),e=r.position;i!==0&&!ar(i)&&!js(i);)i=r.input.charCodeAt(++r.position);return r.position===e&&K(r,"name of an alias node must contain at least one character"),t=r.input.slice(e,r.position),un.call(r.anchorMap,t)||K(r,'unidentified alias "'+t+'"'),r.result=r.anchorMap[t],lt(r,!0,-1),!0}o(kO,"readAlias");function Ls(r,e,t,i,n){var s,a,c,u=1,f=!1,l=!1,h,p,g,v,S,A;if(r.listener!==null&&r.listener("open",r),r.tag=null,r.anchor=null,r.kind=null,r.result=null,s=a=c=Mu===t||d_===t,i&&lt(r,!0,-1)&&(f=!0,r.lineIndent>e?u=1:r.lineIndent===e?u=0:r.lineIndent<e&&(u=-1)),u===1)for(;IO(r)||NO(r);)lt(r,!0,-1)?(f=!0,c=s,r.lineIndent>e?u=1:r.lineIndent===e?u=0:r.lineIndent<e&&(u=-1)):c=!1;if(c&&(c=f||n),(u===1||Mu===t)&&(ju===t||h_===t?S=e:S=e+1,A=r.position-r.lineStart,u===1?c&&(j3(r,A)||RO(r,A,S))||PO(r,S)?l=!0:(a&&DO(r,S)||CO(r,S)||FO(r,S)?l=!0:kO(r)?(l=!0,(r.tag!==null||r.anchor!==null)&&K(r,"alias node should not have any properties")):OO(r,S,ju===t)&&(l=!0,r.tag===null&&(r.tag="?")),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):u===0&&(l=c&&j3(r,A))),r.tag===null)r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);else if(r.tag==="?"){for(r.result!==null&&r.kind!=="scalar"&&K(r,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+r.kind+'"'),h=0,p=r.implicitTypes.length;h<p;h+=1)if(v=r.implicitTypes[h],v.resolve(r.result)){r.result=v.construct(r.result),r.tag=v.tag,r.anchor!==null&&(r.anchorMap[r.anchor]=r.result);break}}else if(r.tag!=="!"){if(un.call(r.typeMap[r.kind||"fallback"],r.tag))v=r.typeMap[r.kind||"fallback"][r.tag];else for(v=null,g=r.typeMap.multi[r.kind||"fallback"],h=0,p=g.length;h<p;h+=1)if(r.tag.slice(0,g[h].tag.length)===g[h].tag){v=g[h];break}v||K(r,"unknown tag !<"+r.tag+">"),r.result!==null&&v.kind!==r.kind&&K(r,"unacceptable node kind for !<"+r.tag+'> tag; it should be "'+v.kind+'", not "'+r.kind+'"'),v.resolve(r.result,r.tag)?(r.result=v.construct(r.result,r.tag),r.anchor!==null&&(r.anchorMap[r.anchor]=r.result)):K(r,"cannot resolve a node with !<"+r.tag+"> explicit tag")}return r.listener!==null&&r.listener("close",r),r.tag!==null||r.anchor!==null||l}o(Ls,"composeNode");function jO(r){var e=r.position,t,i,n,s=!1,a;for(r.version=null,r.checkLineBreaks=r.legacy,r.tagMap=Object.create(null),r.anchorMap=Object.create(null);(a=r.input.charCodeAt(r.position))!==0&&(lt(r,!0,-1),a=r.input.charCodeAt(r.position),!(r.lineIndent>0||a!==37));){for(s=!0,a=r.input.charCodeAt(++r.position),t=r.position;a!==0&&!ar(a);)a=r.input.charCodeAt(++r.position);for(i=r.input.slice(t,r.position),n=[],i.length<1&&K(r,"directive name must not be less than one character in length");a!==0;){for(;Kn(a);)a=r.input.charCodeAt(++r.position);if(a===35){do a=r.input.charCodeAt(++r.position);while(a!==0&&!mi(a));break}if(mi(a))break;for(t=r.position;a!==0&&!ar(a);)a=r.input.charCodeAt(++r.position);n.push(r.input.slice(t,r.position))}a!==0&&Qp(r),un.call(N3,i)?N3[i](r,i,n):Lu(r,'unknown document directive "'+i+'"')}if(lt(r,!0,-1),r.lineIndent===0&&r.input.charCodeAt(r.position)===45&&r.input.charCodeAt(r.position+1)===45&&r.input.charCodeAt(r.position+2)===45?(r.position+=3,lt(r,!0,-1)):s&&K(r,"directives end mark is expected"),Ls(r,r.lineIndent-1,Mu,!1,!0),lt(r,!0,-1),r.checkLineBreaks&&bO.test(r.input.slice(e,r.position))&&Lu(r,"non-ASCII line breaks are interpreted as content"),r.documents.push(r.result),r.position===r.lineStart&&Uu(r)){r.input.charCodeAt(r.position)===46&&(r.position+=3,lt(r,!0,-1));return}if(r.position<r.length-1)K(r,"end of the stream or a document separator is expected");else return}o(jO,"readDocument");function v_(r,e){r=String(r),e=e||{},r.length!==0&&(r.charCodeAt(r.length-1)!==10&&r.charCodeAt(r.length-1)!==13&&(r+=`
`),r.charCodeAt(0)===65279&&(r=r.slice(1)));var t=new AO(r,e),i=r.indexOf("\0");for(i!==-1&&(t.position=i,K(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)jO(t);return t.documents}o(v_,"loadDocuments");function MO(r,e,t){e!==null&&typeof e=="object"&&typeof t>"u"&&(t=e,e=null);var i=v_(r,t);if(typeof e!="function")return i;for(var n=0,s=i.length;n<s;n+=1)e(i[n])}o(MO,"loadAll$1");function LO(r,e){var t=v_(r,e);if(t.length!==0){if(t.length===1)return t[0];throw new Jt("expected a single document in the stream, but found more")}}o(LO,"load$1");var qO=MO,VO=LO,b_={loadAll:qO,load:VO},S_=Object.prototype.toString,w_=Object.prototype.hasOwnProperty,Xp=65279,UO=9,Ua=10,BO=13,$O=32,GO=33,WO=34,Gp=35,HO=37,zO=38,KO=39,YO=42,E_=44,QO=45,qu=58,JO=61,XO=62,ZO=63,eC=64,T_=91,x_=93,tC=96,A_=123,rC=124,O_=125,jt={};jt[0]="\\0";jt[7]="\\a";jt[8]="\\b";jt[9]="\\t";jt[10]="\\n";jt[11]="\\v";jt[12]="\\f";jt[13]="\\r";jt[27]="\\e";jt[34]='\\"';jt[92]="\\\\";jt[133]="\\N";jt[160]="\\_";jt[8232]="\\L";jt[8233]="\\P";var iC=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],nC=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function sC(r,e){var t,i,n,s,a,c,u;if(e===null)return{};for(t={},i=Object.keys(e),n=0,s=i.length;n<s;n+=1)a=i[n],c=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),u=r.compiledTypeMap.fallback[a],u&&w_.call(u.styleAliases,c)&&(c=u.styleAliases[c]),t[a]=c;return t}o(sC,"compileStyleMap");function aC(r){var e,t,i;if(e=r.toString(16).toUpperCase(),r<=255)t="x",i=2;else if(r<=65535)t="u",i=4;else if(r<=4294967295)t="U",i=8;else throw new Jt("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+ft.repeat("0",i-e.length)+e}o(aC,"encodeHex");var oC=1,Ba=2;function cC(r){this.schema=r.schema||Yp,this.indent=Math.max(1,r.indent||2),this.noArrayIndent=r.noArrayIndent||!1,this.skipInvalid=r.skipInvalid||!1,this.flowLevel=ft.isNothing(r.flowLevel)?-1:r.flowLevel,this.styleMap=sC(this.schema,r.styles||null),this.sortKeys=r.sortKeys||!1,this.lineWidth=r.lineWidth||80,this.noRefs=r.noRefs||!1,this.noCompatMode=r.noCompatMode||!1,this.condenseFlow=r.condenseFlow||!1,this.quotingType=r.quotingType==='"'?Ba:oC,this.forceQuotes=r.forceQuotes||!1,this.replacer=typeof r.replacer=="function"?r.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}o(cC,"State");function M3(r,e){for(var t=ft.repeat(" ",e),i=0,n=-1,s="",a,c=r.length;i<c;)n=r.indexOf(`
`,i),n===-1?(a=r.slice(i),i=c):(a=r.slice(i,n+1),i=n+1),a.length&&a!==`
`&&(s+=t),s+=a;return s}o(M3,"indentString");function Wp(r,e){return`
`+ft.repeat(" ",r.indent*e)}o(Wp,"generateNextLine");function uC(r,e){var t,i,n;for(t=0,i=r.implicitTypes.length;t<i;t+=1)if(n=r.implicitTypes[t],n.resolve(e))return!0;return!1}o(uC,"testImplicitResolving");function Vu(r){return r===$O||r===UO}o(Vu,"isWhitespace");function $a(r){return 32<=r&&r<=126||161<=r&&r<=55295&&r!==8232&&r!==8233||57344<=r&&r<=65533&&r!==Xp||65536<=r&&r<=1114111}o($a,"isPrintable");function L3(r){return $a(r)&&r!==Xp&&r!==BO&&r!==Ua}o(L3,"isNsCharOrWhitespace");function q3(r,e,t){var i=L3(r),n=i&&!Vu(r);return(t?i:i&&r!==E_&&r!==T_&&r!==x_&&r!==A_&&r!==O_)&&r!==Gp&&!(e===qu&&!n)||L3(e)&&!Vu(e)&&r===Gp||e===qu&&n}o(q3,"isPlainSafe");function lC(r){return $a(r)&&r!==Xp&&!Vu(r)&&r!==QO&&r!==ZO&&r!==qu&&r!==E_&&r!==T_&&r!==x_&&r!==A_&&r!==O_&&r!==Gp&&r!==zO&&r!==YO&&r!==GO&&r!==rC&&r!==JO&&r!==XO&&r!==KO&&r!==WO&&r!==HO&&r!==eC&&r!==tC}o(lC,"isPlainSafeFirst");function fC(r){return!Vu(r)&&r!==qu}o(fC,"isPlainSafeLast");function qa(r,e){var t=r.charCodeAt(e),i;return t>=55296&&t<=56319&&e+1<r.length&&(i=r.charCodeAt(e+1),i>=56320&&i<=57343)?(t-55296)*1024+i-56320+65536:t}o(qa,"codePointAt");function C_(r){var e=/^\n* /;return e.test(r)}o(C_,"needIndentIndicator");var F_=1,Hp=2,P_=3,D_=4,ks=5;function hC(r,e,t,i,n,s,a,c){var u,f=0,l=null,h=!1,p=!1,g=i!==-1,v=-1,S=lC(qa(r,0))&&fC(qa(r,r.length-1));if(e||a)for(u=0;u<r.length;f>=65536?u+=2:u++){if(f=qa(r,u),!$a(f))return ks;S=S&&q3(f,l,c),l=f}else{for(u=0;u<r.length;f>=65536?u+=2:u++){if(f=qa(r,u),f===Ua)h=!0,g&&(p=p||u-v-1>i&&r[v+1]!==" ",v=u);else if(!$a(f))return ks;S=S&&q3(f,l,c),l=f}p=p||g&&u-v-1>i&&r[v+1]!==" "}return!h&&!p?S&&!a&&!n(r)?F_:s===Ba?ks:Hp:t>9&&C_(r)?ks:a?s===Ba?ks:Hp:p?D_:P_}o(hC,"chooseScalarStyle");function dC(r,e,t,i,n){r.dump=(function(){if(e.length===0)return r.quotingType===Ba?'""':"''";if(!r.noCompatMode&&(iC.indexOf(e)!==-1||nC.test(e)))return r.quotingType===Ba?'"'+e+'"':"'"+e+"'";var s=r.indent*Math.max(1,t),a=r.lineWidth===-1?-1:Math.max(Math.min(r.lineWidth,40),r.lineWidth-s),c=i||r.flowLevel>-1&&t>=r.flowLevel;function u(f){return uC(r,f)}switch(o(u,"testAmbiguity"),hC(e,c,r.indent,a,u,r.quotingType,r.forceQuotes&&!i,n)){case F_:return e;case Hp:return"'"+e.replace(/'/g,"''")+"'";case P_:return"|"+V3(e,r.indent)+U3(M3(e,s));case D_:return">"+V3(e,r.indent)+U3(M3(pC(e,a),s));case ks:return'"'+mC(e)+'"';default:throw new Jt("impossible error: invalid scalar style")}})()}o(dC,"writeScalar");function V3(r,e){var t=C_(r)?String(e):"",i=r[r.length-1]===`
`,n=i&&(r[r.length-2]===`
`||r===`
`),s=n?"+":i?"":"-";return t+s+`
`}o(V3,"blockHeader");function U3(r){return r[r.length-1]===`
`?r.slice(0,-1):r}o(U3,"dropEndingNewline");function pC(r,e){for(var t=/(\n+)([^\n]*)/g,i=(function(){var f=r.indexOf(`
`);return f=f!==-1?f:r.length,t.lastIndex=f,B3(r.slice(0,f),e)})(),n=r[0]===`
`||r[0]===" ",s,a;a=t.exec(r);){var c=a[1],u=a[2];s=u[0]===" ",i+=c+(!n&&!s&&u!==""?`
`:"")+B3(u,e),n=s}return i}o(pC,"foldString");function B3(r,e){if(r===""||r[0]===" ")return r;for(var t=/ [^ ]/g,i,n=0,s,a=0,c=0,u="";i=t.exec(r);)c=i.index,c-n>e&&(s=a>n?a:c,u+=`
`+r.slice(n,s),n=s+1),a=c;return u+=`
`,r.length-n>e&&a>n?u+=r.slice(n,a)+`
`+r.slice(a+1):u+=r.slice(n),u.slice(1)}o(B3,"foldLine");function mC(r){for(var e="",t=0,i,n=0;n<r.length;t>=65536?n+=2:n++)t=qa(r,n),i=jt[t],!i&&$a(t)?(e+=r[n],t>=65536&&(e+=r[n+1])):e+=i||aC(t);return e}o(mC,"escapeString");function gC(r,e,t){var i="",n=r.tag,s,a,c;for(s=0,a=t.length;s<a;s+=1)c=t[s],r.replacer&&(c=r.replacer.call(t,String(s),c)),(qi(r,e,c,!1,!1)||typeof c>"u"&&qi(r,e,null,!1,!1))&&(i!==""&&(i+=","+(r.condenseFlow?"":" ")),i+=r.dump);r.tag=n,r.dump="["+i+"]"}o(gC,"writeFlowSequence");function $3(r,e,t,i){var n="",s=r.tag,a,c,u;for(a=0,c=t.length;a<c;a+=1)u=t[a],r.replacer&&(u=r.replacer.call(t,String(a),u)),(qi(r,e+1,u,!0,!0,!1,!0)||typeof u>"u"&&qi(r,e+1,null,!0,!0,!1,!0))&&((!i||n!=="")&&(n+=Wp(r,e)),r.dump&&Ua===r.dump.charCodeAt(0)?n+="-":n+="- ",n+=r.dump);r.tag=s,r.dump=n||"[]"}o($3,"writeBlockSequence");function yC(r,e,t){var i="",n=r.tag,s=Object.keys(t),a,c,u,f,l;for(a=0,c=s.length;a<c;a+=1)l="",i!==""&&(l+=", "),r.condenseFlow&&(l+='"'),u=s[a],f=t[u],r.replacer&&(f=r.replacer.call(t,u,f)),qi(r,e,u,!1,!1)&&(r.dump.length>1024&&(l+="? "),l+=r.dump+(r.condenseFlow?'"':"")+":"+(r.condenseFlow?"":" "),qi(r,e,f,!1,!1)&&(l+=r.dump,i+=l));r.tag=n,r.dump="{"+i+"}"}o(yC,"writeFlowMapping");function _C(r,e,t,i){var n="",s=r.tag,a=Object.keys(t),c,u,f,l,h,p;if(r.sortKeys===!0)a.sort();else if(typeof r.sortKeys=="function")a.sort(r.sortKeys);else if(r.sortKeys)throw new Jt("sortKeys must be a boolean or a function");for(c=0,u=a.length;c<u;c+=1)p="",(!i||n!=="")&&(p+=Wp(r,e)),f=a[c],l=t[f],r.replacer&&(l=r.replacer.call(t,f,l)),qi(r,e+1,f,!0,!0,!0)&&(h=r.tag!==null&&r.tag!=="?"||r.dump&&r.dump.length>1024,h&&(r.dump&&Ua===r.dump.charCodeAt(0)?p+="?":p+="? "),p+=r.dump,h&&(p+=Wp(r,e)),qi(r,e+1,l,!0,h)&&(r.dump&&Ua===r.dump.charCodeAt(0)?p+=":":p+=": ",p+=r.dump,n+=p));r.tag=s,r.dump=n||"{}"}o(_C,"writeBlockMapping");function G3(r,e,t){var i,n,s,a,c,u;for(n=t?r.explicitTypes:r.implicitTypes,s=0,a=n.length;s<a;s+=1)if(c=n[s],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof e=="object"&&e instanceof c.instanceOf)&&(!c.predicate||c.predicate(e))){if(t?c.multi&&c.representName?r.tag=c.representName(e):r.tag=c.tag:r.tag="?",c.represent){if(u=r.styleMap[c.tag]||c.defaultStyle,S_.call(c.represent)==="[object Function]")i=c.represent(e,u);else if(w_.call(c.represent,u))i=c.represent[u](e,u);else throw new Jt("!<"+c.tag+'> tag resolver accepts not "'+u+'" style');r.dump=i}return!0}return!1}o(G3,"detectType");function qi(r,e,t,i,n,s,a){r.tag=null,r.dump=t,G3(r,t,!1)||G3(r,t,!0);var c=S_.call(r.dump),u=i,f;i&&(i=r.flowLevel<0||r.flowLevel>e);var l=c==="[object Object]"||c==="[object Array]",h,p;if(l&&(h=r.duplicates.indexOf(t),p=h!==-1),(r.tag!==null&&r.tag!=="?"||p||r.indent!==2&&e>0)&&(n=!1),p&&r.usedDuplicates[h])r.dump="*ref_"+h;else{if(l&&p&&!r.usedDuplicates[h]&&(r.usedDuplicates[h]=!0),c==="[object Object]")i&&Object.keys(r.dump).length!==0?(_C(r,e,r.dump,n),p&&(r.dump="&ref_"+h+r.dump)):(yC(r,e,r.dump),p&&(r.dump="&ref_"+h+" "+r.dump));else if(c==="[object Array]")i&&r.dump.length!==0?(r.noArrayIndent&&!a&&e>0?$3(r,e-1,r.dump,n):$3(r,e,r.dump,n),p&&(r.dump="&ref_"+h+r.dump)):(gC(r,e,r.dump),p&&(r.dump="&ref_"+h+" "+r.dump));else if(c==="[object String]")r.tag!=="?"&&dC(r,r.dump,e,s,u);else{if(c==="[object Undefined]")return!1;if(r.skipInvalid)return!1;throw new Jt("unacceptable kind of an object to dump "+c)}r.tag!==null&&r.tag!=="?"&&(f=encodeURI(r.tag[0]==="!"?r.tag.slice(1):r.tag).replace(/!/g,"%21"),r.tag[0]==="!"?f="!"+f:f.slice(0,18)==="tag:yaml.org,2002:"?f="!!"+f.slice(18):f="!<"+f+">",r.dump=f+" "+r.dump)}return!0}o(qi,"writeNode");function vC(r,e){var t=[],i=[],n,s;for(zp(r,t,i),n=0,s=i.length;n<s;n+=1)e.duplicates.push(t[i[n]]);e.usedDuplicates=new Array(s)}o(vC,"getDuplicateReferences");function zp(r,e,t){var i,n,s;if(r!==null&&typeof r=="object")if(n=e.indexOf(r),n!==-1)t.indexOf(n)===-1&&t.push(n);else if(e.push(r),Array.isArray(r))for(n=0,s=r.length;n<s;n+=1)zp(r[n],e,t);else for(i=Object.keys(r),n=0,s=i.length;n<s;n+=1)zp(r[i[n]],e,t)}o(zp,"inspectNode");function bC(r,e){e=e||{};var t=new cC(e);t.noRefs||vC(r,t);var i=r;return t.replacer&&(i=t.replacer.call({"":i},"",i)),qi(t,0,i,!0,!0)?t.dump+`
`:""}o(bC,"dump$1");var SC=bC,wC={dump:SC};function Zp(r,e){return function(){throw new Error("Function yaml."+r+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}o(Zp,"renamed");var EC=Pt,TC=z3,xC=J3,AC=r_,OC=i_,CC=Yp,FC=b_.load,PC=b_.loadAll,DC=wC.dump,RC=Jt,IC={binary:c_,float:t_,map:Q3,null:X3,pairs:l_,set:f_,timestamp:a_,bool:Z3,int:e_,merge:o_,omap:u_,seq:Y3,str:K3},NC=Zp("safeLoad","load"),kC=Zp("safeLoadAll","loadAll"),jC=Zp("safeDump","dump"),MC={Type:EC,Schema:TC,FAILSAFE_SCHEMA:xC,JSON_SCHEMA:AC,CORE_SCHEMA:OC,DEFAULT_SCHEMA:CC,load:FC,loadAll:PC,dump:DC,YAMLException:RC,types:IC,safeLoad:NC,safeLoadAll:kC,safeDump:jC},Ga=MC;var Bu=class{constructor(e){this.rootPath=e}static{o(this,"FileSystemVaultAdapter")}async read(e){let t=this.resolvePath(e.path);if(!await ht.default.pathExists(t))throw new Error(`File not found: ${e.path}`);return ht.default.readFile(t,"utf-8")}async create(e,t){let i=this.resolvePath(e);if(await ht.default.pathExists(i))throw new Error(`File already exists: ${e}`);return await ht.default.ensureDir(Mt.default.dirname(i)),await ht.default.writeFile(i,t,"utf-8"),this.createFileObject(e)}async modify(e,t){let i=this.resolvePath(e.path);if(!await ht.default.pathExists(i))throw new Error(`File not found: ${e.path}`);await ht.default.writeFile(i,t,"utf-8")}async delete(e){let t=this.resolvePath(e.path);if(!await ht.default.pathExists(t))throw new Error(`File not found: ${e.path}`);await ht.default.remove(t)}async exists(e){let t=this.resolvePath(e);return ht.default.pathExists(t)}getAbstractFileByPath(e){let t=this.resolvePath(e);try{let i=ht.default.statSync(t);if(i.isFile())return this.createFileObject(e);if(i.isDirectory())return this.createFolderObject(e)}catch{return null}return null}getAllFiles(){let e=[];return this.walkDirectory(this.rootPath,t=>{if(t.endsWith(".md")){let i=Mt.default.relative(this.rootPath,t);e.push(this.createFileObject(i))}}),e}getFrontmatter(e){try{let t=ht.default.readFileSync(this.resolvePath(e.path),"utf-8");return this.extractFrontmatter(t)}catch{return null}}async updateFrontmatter(e,t){let i=await this.read(e),n=this.extractFrontmatter(i)||{},s=t(n),a=this.replaceFrontmatter(i,s);await this.modify(e,a)}async rename(e,t){let i=this.resolvePath(e.path),n=this.resolvePath(t);if(!await ht.default.pathExists(i))throw new Error(`File not found: ${e.path}`);await ht.default.ensureDir(Mt.default.dirname(n)),await ht.default.move(i,n)}async createFolder(e){let t=this.resolvePath(e);await ht.default.ensureDir(t)}getFirstLinkpathDest(e,t){let i=Mt.default.dirname(this.resolvePath(t)),n;if(Mt.default.isAbsolute(e)?n=this.resolvePath(e):n=Mt.default.resolve(i,e),e.endsWith(".md")||(n+=".md"),ht.default.existsSync(n)){let s=Mt.default.relative(this.rootPath,n);return this.createFileObject(s)}return null}async process(e,t){let i=await this.read(e),n=t(i);return await this.modify(e,n),n}getDefaultNewFileParent(){return{path:"",name:""}}async updateLinks(e,t,i){return Promise.resolve()}resolvePath(e){return Mt.default.isAbsolute(e)?e:Mt.default.join(this.rootPath,e)}createFileObject(e){let t=Mt.default.basename(e),i=Mt.default.basename(e,Mt.default.extname(e)),n=Mt.default.dirname(e);return{path:e,basename:t,name:i,parent:n!=="."?this.createFolderObject(n):null}}createFolderObject(e){return{path:e,name:Mt.default.basename(e)}}extractFrontmatter(e){let t=/^---\n([\s\S]*?)\n---/,i=e.match(t);if(!i)return null;try{let n=Ga.load(i[1]);return typeof n=="object"&&n!==null?n:null}catch{return null}}replaceFrontmatter(e,t){let i=Ga.dump(t,{lineWidth:-1,noRefs:!0,quotingType:'"'}),n=/^---\n([\s\S]*?)\n---/;return e.match(n)?e.replace(n,`---
${i.trim()}
---`):`---
${i.trim()}
---
${e}`}walkDirectory(e,t){let i=ht.default.readdirSync(e,{withFileTypes:!0});for(let n of i){let s=Mt.default.join(e,n.name);n.isDirectory()?this.walkDirectory(s,t):n.isFile()&&t(s)}}};var $u=class{static{o(this,"TableFormatter")}format(e){if(e.length===0)return"No results";let t=this.getAllVariables(e),i=e.map(n=>this.solutionToRow(n,t));return this.renderTable(t,i)}getAllVariables(e){let t=new Set;for(let i of e)for(let n of i.variables())t.add(n);return Array.from(t).sort()}solutionToRow(e,t){return t.map(i=>{let n=e.get(i);return n?this.formatValue(n.toString()):""})}formatValue(e){return e.length>50?e.substring(0,47)+"...":e}renderTable(e,t){let i=e.map((s,a)=>{let c=s.length+1,u=Math.max(...t.map(f=>f[a]?.length||0));return Math.max(c,u,10)}),n=[];n.push(this.renderSeparator(i,"top")),n.push(this.renderRow(e.map(s=>`?${s}`),i)),n.push(this.renderSeparator(i,"mid"));for(let s of t)n.push(this.renderRow(s,i));return n.push(this.renderSeparator(i,"bottom")),n.join(`
`)}renderRow(e,t){return`\u2502 ${e.map((n,s)=>n.padEnd(t[s])).join(" \u2502 ")} \u2502`}renderSeparator(e,t){let i=t==="top"?"\u250C":t==="mid"?"\u251C":"\u2514",n=t==="top"?"\u2510":t==="mid"?"\u2524":"\u2518",a=t==="mid"?"\u2500\u253C\u2500":"\u2500"+(t==="mid"?"\u253C":"\u2500")+"\u2500",c=e.map(u=>"\u2500".repeat(u+2));return`${i}${c.join(a)}${n}`}};var Gu=class{static{o(this,"JsonFormatter")}format(e){let t=e.map(i=>i.toJSON());return JSON.stringify(t,null,2)}};function R_(){return new zi("query").description("Execute SPARQL query against Obsidian vault").argument("<query>","SPARQL query string or path to .sparql file").option("--vault <path>","Path to Obsidian vault",process.cwd()).option("--format <type>","Output format: table|json|csv","table").option("--explain","Show optimized query plan").option("--stats","Show execution statistics").option("--no-optimize","Disable query optimization").action(async(r,e)=>{try{let t=Date.now(),i=LC(r),n=(0,em.resolve)(e.vault);(0,Wa.existsSync)(n)||(console.error(`\u274C Error: Vault not found: ${n}`),process.exit(1)),console.log(`\u{1F4E6} Loading vault: ${n}...`);let s=Date.now(),a=new Bu(n),u=await new or.NoteToRDFConverter(a).convertVault(),f=new or.InMemoryTripleStore;await f.addAll(u);let l=Date.now()-s;console.log(`\u2705 Loaded ${u.length} triples in ${l}ms
`),console.log("\u{1F50D} Parsing SPARQL query...");let p=new or.SPARQLParser().parse(i);console.log("\u{1F504} Translating to algebra...");let v=new or.AlgebraTranslator().translate(p);if(e.noOptimize?console.log(`\u26A0\uFE0F  Query optimization disabled
`):v=new or.AlgebraOptimizer().optimize(v),e.explain){console.log("\u{1F4CA} Query Plan:");let H=new or.AlgebraSerializer;console.log(H.toString(v)),console.log()}console.log("\u{1F3AF} Executing query...");let S=Date.now(),F=await new or.QueryExecutor(f).executeAll(v),D=Date.now()-S,U=Date.now()-t;console.log(`\u2705 Found ${F.length} result(s) in ${D}ms
`),F.length>0?qC(F,e.format):console.log("No results found."),e.stats&&(console.log(`
\u{1F4CA} Execution Statistics:`),console.log(`  Vault loading: ${l}ms`),console.log(`  Query execution: ${D}ms`),console.log(`  Total time: ${U}ms`),console.log(`  Triples scanned: ${u.length}`),console.log(`  Results returned: ${F.length}`))}catch(t){t instanceof Error?(console.error(`\u274C Error: ${t.message}`),t.stack&&console.error(t.stack)):console.error("\u274C Unknown error:",t),process.exit(1)}})}o(R_,"sparqlQueryCommand");function LC(r){if(r.includes("SELECT")||r.includes("CONSTRUCT"))return r;let e=(0,em.resolve)(r);return(0,Wa.existsSync)(e)?(0,Wa.readFileSync)(e,"utf-8"):r}o(LC,"loadQuery");function qC(r,e){switch(e){case"json":let t=new Gu;console.log(t.format(r));break;case"table":default:let i=new $u;console.log(i.format(r));break}}o(qC,"formatResults");var Lv=require("path");var dt=st(ku()),pn=st(require("path"));var Z_=st(W_(),1);var za=o(r=>{if(typeof r!="string")throw new TypeError("invalid pattern");if(r.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");var zC={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Ka=o(r=>r.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),KC=o(r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),H_=o(r=>r.join(""),"rangesToString"),z_=o((r,e)=>{let t=e;if(r.charAt(t)!=="[")throw new Error("not in a brace expression");let i=[],n=[],s=t+1,a=!1,c=!1,u=!1,f=!1,l=t,h="";e:for(;s<r.length;){let S=r.charAt(s);if((S==="!"||S==="^")&&s===t+1){f=!0,s++;continue}if(S==="]"&&a&&!u){l=s+1;break}if(a=!0,S==="\\"&&!u){u=!0,s++;continue}if(S==="["&&!u){for(let[A,[F,D,U]]of Object.entries(zC))if(r.startsWith(A,s)){if(h)return["$.",!1,r.length-t,!0];s+=A.length,U?n.push(F):i.push(F),c=c||D;continue e}}if(u=!1,h){S>h?i.push(Ka(h)+"-"+Ka(S)):S===h&&i.push(Ka(S)),h="",s++;continue}if(r.startsWith("-]",s+1)){i.push(Ka(S+"-")),s+=2;continue}if(r.startsWith("-",s+1)){h=S,s+=2;continue}i.push(Ka(S)),s++}if(l<s)return["",!1,0,!1];if(!i.length&&!n.length)return["$.",!1,r.length-t,!0];if(n.length===0&&i.length===1&&/^\\?.$/.test(i[0])&&!f){let S=i[0].length===2?i[0].slice(-1):i[0];return[KC(S),!1,l-t,!1]}let p="["+(f?"^":"")+H_(i)+"]",g="["+(f?"":"^")+H_(n)+"]";return[i.length&&n.length?"("+p+"|"+g+")":i.length?p:g,c,l-t,!0]},"parseClass");var Jr=o((r,{windowsPathsNoEscape:e=!1}={})=>e?r.replace(/\[([^\/\\])\]/g,"$1"):r.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var YC=new Set(["!","?","+","*","@"]),K_=o(r=>YC.has(r),"isExtglobType"),QC="(?!(?:^|/)\\.\\.?(?:$|/))",Wu="(?!\\.)",JC=new Set(["[","."]),XC=new Set(["..","."]),ZC=new Set("().*{}+?[]^$\\!"),e8=o(r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),im="[^/]",Y_=im+"*?",Q_=im+"+?",qs=class r{static{o(this,"AST")}type;#e;#t;#s=!1;#i=[];#a;#b;#u;#f=!1;#o;#c;#n=!1;constructor(e,t,i={}){this.type=e,e&&(this.#t=!0),this.#a=t,this.#e=this.#a?this.#a.#e:this,this.#o=this.#e===this?i:this.#e.#o,this.#u=this.#e===this?[]:this.#e.#u,e==="!"&&!this.#e.#f&&this.#u.push(this),this.#b=this.#a?this.#a.#i.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#i)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#i.map(e=>String(e)).join("|")+")":this.#c=this.#i.map(e=>String(e)).join("")}#g(){if(this!==this.#e)throw new Error("should only call on root");if(this.#f)return this;this.toString(),this.#f=!0;let e;for(;e=this.#u.pop();){if(e.type!=="!")continue;let t=e,i=t.#a;for(;i;){for(let n=t.#b+1;!i.type&&n<i.#i.length;n++)for(let s of e.#i){if(typeof s=="string")throw new Error("string part in extglob AST??");s.copyIn(i.#i[n])}t=i,i=t.#a}}return this}push(...e){for(let t of e)if(t!==""){if(typeof t!="string"&&!(t instanceof r&&t.#a===this))throw new Error("invalid part: "+t);this.#i.push(t)}}toJSON(){let e=this.type===null?this.#i.slice().map(t=>typeof t=="string"?t:t.toJSON()):[this.type,...this.#i.map(t=>t.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#f&&this.#a?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#a?.isStart())return!1;if(this.#b===0)return!0;let e=this.#a;for(let t=0;t<this.#b;t++){let i=e.#i[t];if(!(i instanceof r&&i.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#a?.type==="!")return!0;if(!this.#a?.isEnd())return!1;if(!this.type)return this.#a?.isEnd();let e=this.#a?this.#a.#i.length:0;return this.#b===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let t=new r(this.type,e);for(let i of this.#i)t.copyIn(i);return t}static#y(e,t,i,n){let s=!1,a=!1,c=-1,u=!1;if(t.type===null){let g=i,v="";for(;g<e.length;){let S=e.charAt(g++);if(s||S==="\\"){s=!s,v+=S;continue}if(a){g===c+1?(S==="^"||S==="!")&&(u=!0):S==="]"&&!(g===c+2&&u)&&(a=!1),v+=S;continue}else if(S==="["){a=!0,c=g,u=!1,v+=S;continue}if(!n.noext&&K_(S)&&e.charAt(g)==="("){t.push(v),v="";let A=new r(S,t);g=r.#y(e,A,g,n),t.push(A);continue}v+=S}return t.push(v),g}let f=i+1,l=new r(null,t),h=[],p="";for(;f<e.length;){let g=e.charAt(f++);if(s||g==="\\"){s=!s,p+=g;continue}if(a){f===c+1?(g==="^"||g==="!")&&(u=!0):g==="]"&&!(f===c+2&&u)&&(a=!1),p+=g;continue}else if(g==="["){a=!0,c=f,u=!1,p+=g;continue}if(K_(g)&&e.charAt(f)==="("){l.push(p),p="";let v=new r(g,l);l.push(v),f=r.#y(e,v,f,n);continue}if(g==="|"){l.push(p),p="",h.push(l),l=new r(null,t);continue}if(g===")")return p===""&&t.#i.length===0&&(t.#n=!0),l.push(p),p="",t.push(...h,l),f;p+=g}return t.type=null,t.#t=void 0,t.#i=[e.substring(i-1)],f}static fromGlob(e,t={}){let i=new r(null,void 0,t);return r.#y(e,i,0,t),i}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[t,i,n,s]=this.toRegExpSource();if(!(n||this.#t||this.#o.nocase&&!this.#o.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return i;let c=(this.#o.nocase?"i":"")+(s?"u":"");return Object.assign(new RegExp(`^${t}$`,c),{_src:t,_glob:e})}get options(){return this.#o}toRegExpSource(e){let t=e??!!this.#o.dot;if(this.#e===this&&this.#g(),!this.type){let u=this.isStart()&&this.isEnd(),f=this.#i.map(g=>{let[v,S,A,F]=typeof g=="string"?r.#h(g,this.#t,u):g.toRegExpSource(e);return this.#t=this.#t||A,this.#s=this.#s||F,v}).join(""),l="";if(this.isStart()&&typeof this.#i[0]=="string"&&!(this.#i.length===1&&XC.has(this.#i[0]))){let v=JC,S=t&&v.has(f.charAt(0))||f.startsWith("\\.")&&v.has(f.charAt(2))||f.startsWith("\\.\\.")&&v.has(f.charAt(4)),A=!t&&!e&&v.has(f.charAt(0));l=S?QC:A?Wu:""}let h="";return this.isEnd()&&this.#e.#f&&this.#a?.type==="!"&&(h="(?:$|\\/)"),[l+f+h,Jr(f),this.#t=!!this.#t,this.#s]}let i=this.type==="*"||this.type==="+",n=this.type==="!"?"(?:(?!(?:":"(?:",s=this.#d(t);if(this.isStart()&&this.isEnd()&&!s&&this.type!=="!"){let u=this.toString();return this.#i=[u],this.type=null,this.#t=void 0,[u,Jr(this.toString()),!1,!1]}let a=!i||e||t||!Wu?"":this.#d(!0);a===s&&(a=""),a&&(s=`(?:${s})(?:${a})*?`);let c="";if(this.type==="!"&&this.#n)c=(this.isStart()&&!t?Wu:"")+Q_;else{let u=this.type==="!"?"))"+(this.isStart()&&!t&&!e?Wu:"")+Y_+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;c=n+s+u}return[c,Jr(s),this.#t=!!this.#t,this.#s]}#d(e){return this.#i.map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");let[i,n,s,a]=t.toRegExpSource(e);return this.#s=this.#s||a,i}).filter(t=>!(this.isStart()&&this.isEnd())||!!t).join("|")}static#h(e,t,i=!1){let n=!1,s="",a=!1;for(let c=0;c<e.length;c++){let u=e.charAt(c);if(n){n=!1,s+=(ZC.has(u)?"\\":"")+u;continue}if(u==="\\"){c===e.length-1?s+="\\\\":n=!0;continue}if(u==="["){let[f,l,h,p]=z_(e,c);if(h){s+=f,a=a||l,c+=h-1,t=t||p;continue}}if(u==="*"){i&&e==="*"?s+=Q_:s+=Y_,t=!0;continue}if(u==="?"){s+=im,t=!0;continue}s+=e8(u)}return[s,Jr(e),!!t,a]}};var Vs=o((r,{windowsPathsNoEscape:e=!1}={})=>e?r.replace(/[?*()[\]]/g,"[$&]"):r.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var Rt=o((r,e,t={})=>(za(e),!t.nocomment&&e.charAt(0)==="#"?!1:new mr(e,t).match(r)),"minimatch"),t8=/^\*+([^+@!?\*\[\(]*)$/,r8=o(r=>e=>!e.startsWith(".")&&e.endsWith(r),"starDotExtTest"),i8=o(r=>e=>e.endsWith(r),"starDotExtTestDot"),n8=o(r=>(r=r.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(r)),"starDotExtTestNocase"),s8=o(r=>(r=r.toLowerCase(),e=>e.toLowerCase().endsWith(r)),"starDotExtTestNocaseDot"),a8=/^\*+\.\*+$/,o8=o(r=>!r.startsWith(".")&&r.includes("."),"starDotStarTest"),c8=o(r=>r!=="."&&r!==".."&&r.includes("."),"starDotStarTestDot"),u8=/^\.\*+$/,l8=o(r=>r!=="."&&r!==".."&&r.startsWith("."),"dotStarTest"),f8=/^\*+$/,h8=o(r=>r.length!==0&&!r.startsWith("."),"starTest"),d8=o(r=>r.length!==0&&r!=="."&&r!=="..","starTestDot"),p8=/^\?+([^+@!?\*\[\(]*)?$/,m8=o(([r,e=""])=>{let t=ev([r]);return e?(e=e.toLowerCase(),i=>t(i)&&i.toLowerCase().endsWith(e)):t},"qmarksTestNocase"),g8=o(([r,e=""])=>{let t=tv([r]);return e?(e=e.toLowerCase(),i=>t(i)&&i.toLowerCase().endsWith(e)):t},"qmarksTestNocaseDot"),y8=o(([r,e=""])=>{let t=tv([r]);return e?i=>t(i)&&i.endsWith(e):t},"qmarksTestDot"),_8=o(([r,e=""])=>{let t=ev([r]);return e?i=>t(i)&&i.endsWith(e):t},"qmarksTest"),ev=o(([r])=>{let e=r.length;return t=>t.length===e&&!t.startsWith(".")},"qmarksTestNoExt"),tv=o(([r])=>{let e=r.length;return t=>t.length===e&&t!=="."&&t!==".."},"qmarksTestNoExtDot"),rv=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",J_={win32:{sep:"\\"},posix:{sep:"/"}},v8=rv==="win32"?J_.win32.sep:J_.posix.sep;Rt.sep=v8;var Dt=Symbol("globstar **");Rt.GLOBSTAR=Dt;var b8="[^/]",S8=b8+"*?",w8="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",E8="(?:(?!(?:\\/|^)\\.).)*?",T8=o((r,e={})=>t=>Rt(t,r,e),"filter");Rt.filter=T8;var Tr=o((r,e={})=>Object.assign({},r,e),"ext"),x8=o(r=>{if(!r||typeof r!="object"||!Object.keys(r).length)return Rt;let e=Rt;return Object.assign(o((i,n,s={})=>e(i,n,Tr(r,s)),"m"),{Minimatch:class extends e.Minimatch{static{o(this,"Minimatch")}constructor(n,s={}){super(n,Tr(r,s))}static defaults(n){return e.defaults(Tr(r,n)).Minimatch}},AST:class extends e.AST{static{o(this,"AST")}constructor(n,s,a={}){super(n,s,Tr(r,a))}static fromGlob(n,s={}){return e.AST.fromGlob(n,Tr(r,s))}},unescape:o((i,n={})=>e.unescape(i,Tr(r,n)),"unescape"),escape:o((i,n={})=>e.escape(i,Tr(r,n)),"escape"),filter:o((i,n={})=>e.filter(i,Tr(r,n)),"filter"),defaults:o(i=>e.defaults(Tr(r,i)),"defaults"),makeRe:o((i,n={})=>e.makeRe(i,Tr(r,n)),"makeRe"),braceExpand:o((i,n={})=>e.braceExpand(i,Tr(r,n)),"braceExpand"),match:o((i,n,s={})=>e.match(i,n,Tr(r,s)),"match"),sep:e.sep,GLOBSTAR:Dt})},"defaults");Rt.defaults=x8;var iv=o((r,e={})=>(za(r),e.nobrace||!/\{(?:(?!\{).)*\}/.test(r)?[r]:(0,Z_.default)(r)),"braceExpand");Rt.braceExpand=iv;var A8=o((r,e={})=>new mr(r,e).makeRe(),"makeRe");Rt.makeRe=A8;var O8=o((r,e,t={})=>{let i=new mr(e,t);return r=r.filter(n=>i.match(n)),i.options.nonull&&!r.length&&r.push(e),r},"match");Rt.match=O8;var X_=/[?*]|[+@!]\(.*?\)|\[|\]/,C8=o(r=>r.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),mr=class{static{o(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){za(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||rv,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...s)=>console.error(...s)),this.debug(this.pattern,this.globSet);let i=this.globSet.map(s=>this.slashSplit(s));this.globParts=this.preprocess(i),this.debug(this.pattern,this.globParts);let n=this.globParts.map((s,a,c)=>{if(this.isWindows&&this.windowsNoMagicRoot){let u=s[0]===""&&s[1]===""&&(s[2]==="?"||!X_.test(s[2]))&&!X_.test(s[3]),f=/^[a-z]:/i.test(s[0]);if(u)return[...s.slice(0,4),...s.slice(4).map(l=>this.parse(l))];if(f)return[s[0],...s.slice(1).map(l=>this.parse(l))]}return s.map(u=>this.parse(u))});if(this.debug(this.pattern,n),this.set=n.filter(s=>s.indexOf(!1)===-1),this.isWindows)for(let s=0;s<this.set.length;s++){let a=this.set[s];a[0]===""&&a[1]===""&&this.globParts[s][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let i=0;i<e.length;i++)for(let n=0;n<e[i].length;n++)e[i][n]==="**"&&(e[i][n]="*");let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):t>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let i=-1;for(;(i=t.indexOf("**",i+1))!==-1;){let n=i;for(;t[n+1]==="**";)n++;n!==i&&t.splice(i,n-i)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((i,n)=>{let s=i[i.length-1];return n==="**"&&s==="**"?i:n===".."&&s&&s!==".."&&s!=="."&&s!=="**"?(i.pop(),i):(i.push(n),i)},[]),t.length===0?[""]:t))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let n=1;n<e.length-1;n++){let s=e[n];n===1&&s===""&&e[0]===""||(s==="."||s==="")&&(t=!0,e.splice(n,1),n--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(t=!0,e.pop())}let i=0;for(;(i=e.indexOf("..",i+1))!==-1;){let n=e[i-1];n&&n!=="."&&n!==".."&&n!=="**"&&(t=!0,e.splice(i-1,2),i-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let i of e){let n=-1;for(;(n=i.indexOf("**",n+1))!==-1;){let a=n;for(;i[a+1]==="**";)a++;a>n&&i.splice(n+1,a-n);let c=i[n+1],u=i[n+2],f=i[n+3];if(c!==".."||!u||u==="."||u===".."||!f||f==="."||f==="..")continue;t=!0,i.splice(n,1);let l=i.slice(0);l[n]="**",e.push(l),n--}if(!this.preserveMultipleSlashes){for(let a=1;a<i.length-1;a++){let c=i[a];a===1&&c===""&&i[0]===""||(c==="."||c==="")&&(t=!0,i.splice(a,1),a--)}i[0]==="."&&i.length===2&&(i[1]==="."||i[1]==="")&&(t=!0,i.pop())}let s=0;for(;(s=i.indexOf("..",s+1))!==-1;){let a=i[s-1];if(a&&a!=="."&&a!==".."&&a!=="**"){t=!0;let u=s===1&&i[s+1]==="**"?["."]:[];i.splice(s-1,2,...u),i.length===0&&i.push(""),s-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let i=t+1;i<e.length;i++){let n=this.partsMatch(e[t],e[i],!this.preserveMultipleSlashes);if(n){e[t]=[],e[i]=n;break}}return e.filter(t=>t.length)}partsMatch(e,t,i=!1){let n=0,s=0,a=[],c="";for(;n<e.length&&s<t.length;)if(e[n]===t[s])a.push(c==="b"?t[s]:e[n]),n++,s++;else if(i&&e[n]==="**"&&t[s]===e[n+1])a.push(e[n]),n++;else if(i&&t[s]==="**"&&e[n]===t[s+1])a.push(t[s]),s++;else if(e[n]==="*"&&t[s]&&(this.options.dot||!t[s].startsWith("."))&&t[s]!=="**"){if(c==="b")return!1;c="a",a.push(e[n]),n++,s++}else if(t[s]==="*"&&e[n]&&(this.options.dot||!e[n].startsWith("."))&&e[n]!=="**"){if(c==="a")return!1;c="b",a.push(t[s]),n++,s++}else return!1;return e.length===t.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,i=0;for(let n=0;n<e.length&&e.charAt(n)==="!";n++)t=!t,i++;i&&(this.pattern=e.slice(i)),this.negate=t}matchOne(e,t,i=!1){let n=this.options;if(this.isWindows){let S=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),A=!S&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),F=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),D=!F&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3]),U=A?3:S?0:void 0,H=D?3:F?0:void 0;if(typeof U=="number"&&typeof H=="number"){let[ne,Fe]=[e[U],t[H]];ne.toLowerCase()===Fe.toLowerCase()&&(t[H]=ne,H>U?t=t.slice(H):U>H&&(e=e.slice(U)))}}let{optimizationLevel:s=1}=this.options;s>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var a=0,c=0,u=e.length,f=t.length;a<u&&c<f;a++,c++){this.debug("matchOne loop");var l=t[c],h=e[a];if(this.debug(t,l,h),l===!1)return!1;if(l===Dt){this.debug("GLOBSTAR",[t,l,h]);var p=a,g=c+1;if(g===f){for(this.debug("** at the end");a<u;a++)if(e[a]==="."||e[a]===".."||!n.dot&&e[a].charAt(0)===".")return!1;return!0}for(;p<u;){var v=e[p];if(this.debug(`
globstar while`,e,p,t,g,v),this.matchOne(e.slice(p),t.slice(g),i))return this.debug("globstar found match!",p,u,v),!0;if(v==="."||v===".."||!n.dot&&v.charAt(0)==="."){this.debug("dot detected!",e,p,t,g);break}this.debug("globstar swallow a segment, and continue"),p++}return!!(i&&(this.debug(`
>>> no match, partial?`,e,p,t,g),p===u))}let S;if(typeof l=="string"?(S=h===l,this.debug("string match",l,h,S)):(S=l.test(h),this.debug("pattern match",l,h,S)),!S)return!1}if(a===u&&c===f)return!0;if(a===u)return i;if(c===f)return a===u-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return iv(this.pattern,this.options)}parse(e){za(e);let t=this.options;if(e==="**")return Dt;if(e==="")return"";let i,n=null;(i=e.match(f8))?n=t.dot?d8:h8:(i=e.match(t8))?n=(t.nocase?t.dot?s8:n8:t.dot?i8:r8)(i[1]):(i=e.match(p8))?n=(t.nocase?t.dot?g8:m8:t.dot?y8:_8)(i):(i=e.match(a8))?n=t.dot?c8:o8:(i=e.match(u8))&&(n=l8);let s=qs.fromGlob(e,this.options).toMMPattern();return n&&typeof s=="object"&&Reflect.defineProperty(s,"test",{value:n}),s}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,i=t.noglobstar?S8:t.dot?w8:E8,n=new Set(t.nocase?["i"]:[]),s=e.map(u=>{let f=u.map(l=>{if(l instanceof RegExp)for(let h of l.flags.split(""))n.add(h);return typeof l=="string"?C8(l):l===Dt?Dt:l._src});return f.forEach((l,h)=>{let p=f[h+1],g=f[h-1];l!==Dt||g===Dt||(g===void 0?p!==void 0&&p!==Dt?f[h+1]="(?:\\/|"+i+"\\/)?"+p:f[h]=i:p===void 0?f[h-1]=g+"(?:\\/|"+i+")?":p!==Dt&&(f[h-1]=g+"(?:\\/|\\/"+i+"\\/)"+p,f[h+1]=Dt))}),f.filter(l=>l!==Dt).join("/")}).join("|"),[a,c]=e.length>1?["(?:",")"]:["",""];s="^"+a+s+c+"$",this.negate&&(s="^(?!"+s+").+$");try{this.regexp=new RegExp(s,[...n].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;let i=this.options;this.isWindows&&(e=e.split("\\").join("/"));let n=this.slashSplit(e);this.debug(this.pattern,"split",n);let s=this.set;this.debug(this.pattern,"set",s);let a=n[n.length-1];if(!a)for(let c=n.length-2;!a&&c>=0;c--)a=n[c];for(let c=0;c<s.length;c++){let u=s[c],f=n;if(i.matchBase&&u.length===1&&(f=[a]),this.matchOne(f,u,t))return i.flipNegate?!0:!this.negate}return i.flipNegate?!1:this.negate}static defaults(e){return Rt.defaults(e).Minimatch}};Rt.AST=qs;Rt.Minimatch=mr;Rt.escape=Vs;Rt.unescape=Jr;var Ov=require("node:url");var Us=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,sv=new Set,nm=typeof process=="object"&&process?process:{},av=o((r,e,t,i)=>{typeof nm.emitWarning=="function"?nm.emitWarning(r,e,t,i):console.error(`[${t}] ${e}: ${r}`)},"emitWarning"),Hu=globalThis.AbortController,nv=globalThis.AbortSignal;if(typeof Hu>"u"){nv=class{static{o(this,"AbortSignal")}onabort;_onabort=[];reason;aborted=!1;addEventListener(i,n){this._onabort.push(n)}},Hu=class{static{o(this,"AbortController")}constructor(){e()}signal=new nv;abort(i){if(!this.signal.aborted){this.signal.reason=i,this.signal.aborted=!0;for(let n of this.signal._onabort)n(i);this.signal.onabort?.(i)}}};let r=nm.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",e=o(()=>{r&&(r=!1,av("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))},"warnACPolyfill")}var F8=o(r=>!sv.has(r),"shouldWarn"),HM=Symbol("type"),ln=o(r=>r&&r===Math.floor(r)&&r>0&&isFinite(r),"isPosInt"),ov=o(r=>ln(r)?r<=Math.pow(2,8)?Uint8Array:r<=Math.pow(2,16)?Uint16Array:r<=Math.pow(2,32)?Uint32Array:r<=Number.MAX_SAFE_INTEGER?Bs:null:null,"getUintArray"),Bs=class extends Array{static{o(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},sm=class r{static{o(this,"Stack")}heap;length;static#e=!1;static create(e){let t=ov(e);if(!t)return[];r.#e=!0;let i=new r(e,t);return r.#e=!1,i}constructor(e,t){if(!r.#e)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new t(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},Ya=class r{static{o(this,"LRUCache")}#e;#t;#s;#i;#a;#b;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#u;#f;#o;#c;#n;#g;#y;#d;#h;#E;#m;#T;#x;#v;#S;#w;#p;static unsafeExposeInternals(e){return{starts:e.#x,ttls:e.#v,sizes:e.#T,keyMap:e.#o,keyList:e.#c,valList:e.#n,next:e.#g,prev:e.#y,get head(){return e.#d},get tail(){return e.#h},free:e.#E,isBackgroundFetch:o(t=>e.#l(t),"isBackgroundFetch"),backgroundFetch:o((t,i,n,s)=>e.#L(t,i,n,s),"backgroundFetch"),moveToTail:o(t=>e.#V(t),"moveToTail"),indexes:o(t=>e.#O(t),"indexes"),rindexes:o(t=>e.#C(t),"rindexes"),isStale:o(t=>e.#_(t),"isStale")}}get max(){return this.#e}get maxSize(){return this.#t}get calculatedSize(){return this.#f}get size(){return this.#u}get fetchMethod(){return this.#a}get memoMethod(){return this.#b}get dispose(){return this.#s}get disposeAfter(){return this.#i}constructor(e){let{max:t=0,ttl:i,ttlResolution:n=1,ttlAutopurge:s,updateAgeOnGet:a,updateAgeOnHas:c,allowStale:u,dispose:f,disposeAfter:l,noDisposeOnSet:h,noUpdateTTL:p,maxSize:g=0,maxEntrySize:v=0,sizeCalculation:S,fetchMethod:A,memoMethod:F,noDeleteOnFetchRejection:D,noDeleteOnStaleGet:U,allowStaleOnFetchRejection:H,allowStaleOnFetchAbort:ne,ignoreFetchAbort:Fe}=e;if(t!==0&&!ln(t))throw new TypeError("max option must be a nonnegative integer");let it=t?ov(t):Array;if(!it)throw new Error("invalid max value: "+t);if(this.#e=t,this.#t=g,this.maxEntrySize=v||this.#t,this.sizeCalculation=S,this.sizeCalculation){if(!this.#t&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(F!==void 0&&typeof F!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#b=F,A!==void 0&&typeof A!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#a=A,this.#w=!!A,this.#o=new Map,this.#c=new Array(t).fill(void 0),this.#n=new Array(t).fill(void 0),this.#g=new it(t),this.#y=new it(t),this.#d=0,this.#h=0,this.#E=sm.create(t),this.#u=0,this.#f=0,typeof f=="function"&&(this.#s=f),typeof l=="function"?(this.#i=l,this.#m=[]):(this.#i=void 0,this.#m=void 0),this.#S=!!this.#s,this.#p=!!this.#i,this.noDisposeOnSet=!!h,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!D,this.allowStaleOnFetchRejection=!!H,this.allowStaleOnFetchAbort=!!ne,this.ignoreFetchAbort=!!Fe,this.maxEntrySize!==0){if(this.#t!==0&&!ln(this.#t))throw new TypeError("maxSize must be a positive integer if specified");if(!ln(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#P()}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!U,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!c,this.ttlResolution=ln(n)||n===0?n:1,this.ttlAutopurge=!!s,this.ttl=i||0,this.ttl){if(!ln(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#F()}if(this.#e===0&&this.ttl===0&&this.#t===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#e&&!this.#t){let pt="LRU_CACHE_UNBOUNDED";F8(pt)&&(sv.add(pt),av("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",pt,r))}}getRemainingTTL(e){return this.#o.has(e)?1/0:0}#F(){let e=new Bs(this.#e),t=new Bs(this.#e);this.#v=e,this.#x=t,this.#R=(s,a,c=Us.now())=>{if(t[s]=a!==0?c:0,e[s]=a,a!==0&&this.ttlAutopurge){let u=setTimeout(()=>{this.#_(s)&&this.#D(this.#c[s],"expire")},a+1);u.unref&&u.unref()}},this.#A=s=>{t[s]=e[s]!==0?Us.now():0},this.#r=(s,a)=>{if(e[a]){let c=e[a],u=t[a];if(!c||!u)return;s.ttl=c,s.start=u,s.now=i||n();let f=s.now-u;s.remainingTTL=c-f}};let i=0,n=o(()=>{let s=Us.now();if(this.ttlResolution>0){i=s;let a=setTimeout(()=>i=0,this.ttlResolution);a.unref&&a.unref()}return s},"getNow");this.getRemainingTTL=s=>{let a=this.#o.get(s);if(a===void 0)return 0;let c=e[a],u=t[a];if(!c||!u)return 1/0;let f=(i||n())-u;return c-f},this.#_=s=>{let a=t[s],c=e[s];return!!c&&!!a&&(i||n())-a>c}}#A=o(()=>{},"#updateItemAge");#r=o(()=>{},"#statusTTL");#R=o(()=>{},"#setItemTTL");#_=o(()=>!1,"#isStale");#P(){let e=new Bs(this.#e);this.#f=0,this.#T=e,this.#I=t=>{this.#f-=e[t],e[t]=0},this.#k=(t,i,n,s)=>{if(this.#l(i))return 0;if(!ln(n))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(n=s(i,t),!ln(n))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return n},this.#N=(t,i,n)=>{if(e[t]=i,this.#t){let s=this.#t-e[t];for(;this.#f>s;)this.#M(!0)}this.#f+=e[t],n&&(n.entrySize=i,n.totalCalculatedSize=this.#f)}}#I=o(e=>{},"#removeItemSize");#N=o((e,t,i)=>{},"#addItemSize");#k=o((e,t,i,n)=>{if(i||n)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0},"#requireSize");*#O({allowStale:e=this.allowStale}={}){if(this.#u)for(let t=this.#h;!(!this.#j(t)||((e||!this.#_(t))&&(yield t),t===this.#d));)t=this.#y[t]}*#C({allowStale:e=this.allowStale}={}){if(this.#u)for(let t=this.#d;!(!this.#j(t)||((e||!this.#_(t))&&(yield t),t===this.#h));)t=this.#g[t]}#j(e){return e!==void 0&&this.#o.get(this.#c[e])===e}*entries(){for(let e of this.#O())this.#n[e]!==void 0&&this.#c[e]!==void 0&&!this.#l(this.#n[e])&&(yield[this.#c[e],this.#n[e]])}*rentries(){for(let e of this.#C())this.#n[e]!==void 0&&this.#c[e]!==void 0&&!this.#l(this.#n[e])&&(yield[this.#c[e],this.#n[e]])}*keys(){for(let e of this.#O()){let t=this.#c[e];t!==void 0&&!this.#l(this.#n[e])&&(yield t)}}*rkeys(){for(let e of this.#C()){let t=this.#c[e];t!==void 0&&!this.#l(this.#n[e])&&(yield t)}}*values(){for(let e of this.#O())this.#n[e]!==void 0&&!this.#l(this.#n[e])&&(yield this.#n[e])}*rvalues(){for(let e of this.#C())this.#n[e]!==void 0&&!this.#l(this.#n[e])&&(yield this.#n[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,t={}){for(let i of this.#O()){let n=this.#n[i],s=this.#l(n)?n.__staleWhileFetching:n;if(s!==void 0&&e(s,this.#c[i],this))return this.get(this.#c[i],t)}}forEach(e,t=this){for(let i of this.#O()){let n=this.#n[i],s=this.#l(n)?n.__staleWhileFetching:n;s!==void 0&&e.call(t,s,this.#c[i],this)}}rforEach(e,t=this){for(let i of this.#C()){let n=this.#n[i],s=this.#l(n)?n.__staleWhileFetching:n;s!==void 0&&e.call(t,s,this.#c[i],this)}}purgeStale(){let e=!1;for(let t of this.#C({allowStale:!0}))this.#_(t)&&(this.#D(this.#c[t],"expire"),e=!0);return e}info(e){let t=this.#o.get(e);if(t===void 0)return;let i=this.#n[t],n=this.#l(i)?i.__staleWhileFetching:i;if(n===void 0)return;let s={value:n};if(this.#v&&this.#x){let a=this.#v[t],c=this.#x[t];if(a&&c){let u=a-(Us.now()-c);s.ttl=u,s.start=Date.now()}}return this.#T&&(s.size=this.#T[t]),s}dump(){let e=[];for(let t of this.#O({allowStale:!0})){let i=this.#c[t],n=this.#n[t],s=this.#l(n)?n.__staleWhileFetching:n;if(s===void 0||i===void 0)continue;let a={value:s};if(this.#v&&this.#x){a.ttl=this.#v[t];let c=Us.now()-this.#x[t];a.start=Math.floor(Date.now()-c)}this.#T&&(a.size=this.#T[t]),e.unshift([i,a])}return e}load(e){this.clear();for(let[t,i]of e){if(i.start){let n=Date.now()-i.start;i.start=Us.now()-n}this.set(t,i.value,i)}}set(e,t,i={}){if(t===void 0)return this.delete(e),this;let{ttl:n=this.ttl,start:s,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:c=this.sizeCalculation,status:u}=i,{noUpdateTTL:f=this.noUpdateTTL}=i,l=this.#k(e,t,i.size||0,c);if(this.maxEntrySize&&l>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.#D(e,"set"),this;let h=this.#u===0?void 0:this.#o.get(e);if(h===void 0)h=this.#u===0?this.#h:this.#E.length!==0?this.#E.pop():this.#u===this.#e?this.#M(!1):this.#u,this.#c[h]=e,this.#n[h]=t,this.#o.set(e,h),this.#g[this.#h]=h,this.#y[h]=this.#h,this.#h=h,this.#u++,this.#N(h,l,u),u&&(u.set="add"),f=!1;else{this.#V(h);let p=this.#n[h];if(t!==p){if(this.#w&&this.#l(p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:g}=p;g!==void 0&&!a&&(this.#S&&this.#s?.(g,e,"set"),this.#p&&this.#m?.push([g,e,"set"]))}else a||(this.#S&&this.#s?.(p,e,"set"),this.#p&&this.#m?.push([p,e,"set"]));if(this.#I(h),this.#N(h,l,u),this.#n[h]=t,u){u.set="replace";let g=p&&this.#l(p)?p.__staleWhileFetching:p;g!==void 0&&(u.oldValue=g)}}else u&&(u.set="update")}if(n!==0&&!this.#v&&this.#F(),this.#v&&(f||this.#R(h,n,s),u&&this.#r(u,h)),!a&&this.#p&&this.#m){let p=this.#m,g;for(;g=p?.shift();)this.#i?.(...g)}return this}pop(){try{for(;this.#u;){let e=this.#n[this.#d];if(this.#M(!0),this.#l(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#p&&this.#m){let e=this.#m,t;for(;t=e?.shift();)this.#i?.(...t)}}}#M(e){let t=this.#d,i=this.#c[t],n=this.#n[t];return this.#w&&this.#l(n)?n.__abortController.abort(new Error("evicted")):(this.#S||this.#p)&&(this.#S&&this.#s?.(n,i,"evict"),this.#p&&this.#m?.push([n,i,"evict"])),this.#I(t),e&&(this.#c[t]=void 0,this.#n[t]=void 0,this.#E.push(t)),this.#u===1?(this.#d=this.#h=0,this.#E.length=0):this.#d=this.#g[t],this.#o.delete(i),this.#u--,t}has(e,t={}){let{updateAgeOnHas:i=this.updateAgeOnHas,status:n}=t,s=this.#o.get(e);if(s!==void 0){let a=this.#n[s];if(this.#l(a)&&a.__staleWhileFetching===void 0)return!1;if(this.#_(s))n&&(n.has="stale",this.#r(n,s));else return i&&this.#A(s),n&&(n.has="hit",this.#r(n,s)),!0}else n&&(n.has="miss");return!1}peek(e,t={}){let{allowStale:i=this.allowStale}=t,n=this.#o.get(e);if(n===void 0||!i&&this.#_(n))return;let s=this.#n[n];return this.#l(s)?s.__staleWhileFetching:s}#L(e,t,i,n){let s=t===void 0?void 0:this.#n[t];if(this.#l(s))return s;let a=new Hu,{signal:c}=i;c?.addEventListener("abort",()=>a.abort(c.reason),{signal:a.signal});let u={signal:a.signal,options:i,context:n},f=o((S,A=!1)=>{let{aborted:F}=a.signal,D=i.ignoreFetchAbort&&S!==void 0;if(i.status&&(F&&!A?(i.status.fetchAborted=!0,i.status.fetchError=a.signal.reason,D&&(i.status.fetchAbortIgnored=!0)):i.status.fetchResolved=!0),F&&!D&&!A)return h(a.signal.reason);let U=g;return this.#n[t]===g&&(S===void 0?U.__staleWhileFetching?this.#n[t]=U.__staleWhileFetching:this.#D(e,"fetch"):(i.status&&(i.status.fetchUpdated=!0),this.set(e,S,u.options))),S},"cb"),l=o(S=>(i.status&&(i.status.fetchRejected=!0,i.status.fetchError=S),h(S)),"eb"),h=o(S=>{let{aborted:A}=a.signal,F=A&&i.allowStaleOnFetchAbort,D=F||i.allowStaleOnFetchRejection,U=D||i.noDeleteOnFetchRejection,H=g;if(this.#n[t]===g&&(!U||H.__staleWhileFetching===void 0?this.#D(e,"fetch"):F||(this.#n[t]=H.__staleWhileFetching)),D)return i.status&&H.__staleWhileFetching!==void 0&&(i.status.returnedStale=!0),H.__staleWhileFetching;if(H.__returned===H)throw S},"fetchFail"),p=o((S,A)=>{let F=this.#a?.(e,s,u);F&&F instanceof Promise&&F.then(D=>S(D===void 0?void 0:D),A),a.signal.addEventListener("abort",()=>{(!i.ignoreFetchAbort||i.allowStaleOnFetchAbort)&&(S(void 0),i.allowStaleOnFetchAbort&&(S=o(D=>f(D,!0),"res")))})},"pcall");i.status&&(i.status.fetchDispatched=!0);let g=new Promise(p).then(f,l),v=Object.assign(g,{__abortController:a,__staleWhileFetching:s,__returned:void 0});return t===void 0?(this.set(e,v,{...u.options,status:void 0}),t=this.#o.get(e)):this.#n[t]=v,v}#l(e){if(!this.#w)return!1;let t=e;return!!t&&t instanceof Promise&&t.hasOwnProperty("__staleWhileFetching")&&t.__abortController instanceof Hu}async fetch(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:c=this.noDisposeOnSet,size:u=0,sizeCalculation:f=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:h=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:p=this.allowStaleOnFetchRejection,ignoreFetchAbort:g=this.ignoreFetchAbort,allowStaleOnFetchAbort:v=this.allowStaleOnFetchAbort,context:S,forceRefresh:A=!1,status:F,signal:D}=t;if(!this.#w)return F&&(F.fetch="get"),this.get(e,{allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:s,status:F});let U={allowStale:i,updateAgeOnGet:n,noDeleteOnStaleGet:s,ttl:a,noDisposeOnSet:c,size:u,sizeCalculation:f,noUpdateTTL:l,noDeleteOnFetchRejection:h,allowStaleOnFetchRejection:p,allowStaleOnFetchAbort:v,ignoreFetchAbort:g,status:F,signal:D},H=this.#o.get(e);if(H===void 0){F&&(F.fetch="miss");let ne=this.#L(e,H,U,S);return ne.__returned=ne}else{let ne=this.#n[H];if(this.#l(ne)){let ce=i&&ne.__staleWhileFetching!==void 0;return F&&(F.fetch="inflight",ce&&(F.returnedStale=!0)),ce?ne.__staleWhileFetching:ne.__returned=ne}let Fe=this.#_(H);if(!A&&!Fe)return F&&(F.fetch="hit"),this.#V(H),n&&this.#A(H),F&&this.#r(F,H),ne;let it=this.#L(e,H,U,S),V=it.__staleWhileFetching!==void 0&&i;return F&&(F.fetch=Fe?"stale":"refresh",V&&Fe&&(F.returnedStale=!0)),V?it.__staleWhileFetching:it.__returned=it}}async forceFetch(e,t={}){let i=await this.fetch(e,t);if(i===void 0)throw new Error("fetch() returned undefined");return i}memo(e,t={}){let i=this.#b;if(!i)throw new Error("no memoMethod provided to constructor");let{context:n,forceRefresh:s,...a}=t,c=this.get(e,a);if(!s&&c!==void 0)return c;let u=i(e,c,{options:a,context:n});return this.set(e,u,a),u}get(e,t={}){let{allowStale:i=this.allowStale,updateAgeOnGet:n=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:a}=t,c=this.#o.get(e);if(c!==void 0){let u=this.#n[c],f=this.#l(u);return a&&this.#r(a,c),this.#_(c)?(a&&(a.get="stale"),f?(a&&i&&u.__staleWhileFetching!==void 0&&(a.returnedStale=!0),i?u.__staleWhileFetching:void 0):(s||this.#D(e,"expire"),a&&i&&(a.returnedStale=!0),i?u:void 0)):(a&&(a.get="hit"),f?u.__staleWhileFetching:(this.#V(c),n&&this.#A(c),u))}else a&&(a.get="miss")}#q(e,t){this.#y[t]=e,this.#g[e]=t}#V(e){e!==this.#h&&(e===this.#d?this.#d=this.#g[e]:this.#q(this.#y[e],this.#g[e]),this.#q(this.#h,e),this.#h=e)}delete(e){return this.#D(e,"delete")}#D(e,t){let i=!1;if(this.#u!==0){let n=this.#o.get(e);if(n!==void 0)if(i=!0,this.#u===1)this.#U(t);else{this.#I(n);let s=this.#n[n];if(this.#l(s)?s.__abortController.abort(new Error("deleted")):(this.#S||this.#p)&&(this.#S&&this.#s?.(s,e,t),this.#p&&this.#m?.push([s,e,t])),this.#o.delete(e),this.#c[n]=void 0,this.#n[n]=void 0,n===this.#h)this.#h=this.#y[n];else if(n===this.#d)this.#d=this.#g[n];else{let a=this.#y[n];this.#g[a]=this.#g[n];let c=this.#g[n];this.#y[c]=this.#y[n]}this.#u--,this.#E.push(n)}}if(this.#p&&this.#m?.length){let n=this.#m,s;for(;s=n?.shift();)this.#i?.(...s)}return i}clear(){return this.#U("delete")}#U(e){for(let t of this.#C({allowStale:!0})){let i=this.#n[t];if(this.#l(i))i.__abortController.abort(new Error("deleted"));else{let n=this.#c[t];this.#S&&this.#s?.(i,n,e),this.#p&&this.#m?.push([i,n,e])}}if(this.#o.clear(),this.#n.fill(void 0),this.#c.fill(void 0),this.#v&&this.#x&&(this.#v.fill(0),this.#x.fill(0)),this.#T&&this.#T.fill(0),this.#d=0,this.#h=0,this.#E.length=0,this.#f=0,this.#u=0,this.#p&&this.#m){let t=this.#m,i;for(;i=t?.shift();)this.#i?.(...i)}}};var Ws=require("node:path"),yv=require("node:url"),_i=require("fs"),q8=st(require("node:fs"),1),dn=require("node:fs/promises");var Zu=require("node:events"),hm=st(require("node:stream"),1),hv=require("node:string_decoder");var cv=typeof process=="object"&&process?process:{stdout:null,stderr:null},P8=o(r=>!!r&&typeof r=="object"&&(r instanceof hn||r instanceof hm.default||D8(r)||R8(r)),"isStream"),D8=o(r=>!!r&&typeof r=="object"&&r instanceof Zu.EventEmitter&&typeof r.pipe=="function"&&r.pipe!==hm.default.Writable.prototype.pipe,"isReadable"),R8=o(r=>!!r&&typeof r=="object"&&r instanceof Zu.EventEmitter&&typeof r.write=="function"&&typeof r.end=="function","isWritable"),Vi=Symbol("EOF"),Ui=Symbol("maybeEmitEnd"),fn=Symbol("emittedEnd"),zu=Symbol("emittingEnd"),Qa=Symbol("emittedError"),Ku=Symbol("closed"),uv=Symbol("read"),Yu=Symbol("flush"),lv=Symbol("flushChunk"),Xr=Symbol("encoding"),$s=Symbol("decoder"),vt=Symbol("flowing"),Ja=Symbol("paused"),Gs=Symbol("resume"),bt=Symbol("buffer"),Xt=Symbol("pipes"),St=Symbol("bufferLength"),am=Symbol("bufferPush"),Qu=Symbol("bufferShift"),Lt=Symbol("objectMode"),at=Symbol("destroyed"),om=Symbol("error"),cm=Symbol("emitData"),fv=Symbol("emitEnd"),um=Symbol("emitEnd2"),gi=Symbol("async"),lm=Symbol("abort"),Ju=Symbol("aborted"),Xa=Symbol("signal"),Yn=Symbol("dataListeners"),gr=Symbol("discarded"),Za=o(r=>Promise.resolve().then(r),"defer"),I8=o(r=>r(),"nodefer"),N8=o(r=>r==="end"||r==="finish"||r==="prefinish","isEndish"),k8=o(r=>r instanceof ArrayBuffer||!!r&&typeof r=="object"&&r.constructor&&r.constructor.name==="ArrayBuffer"&&r.byteLength>=0,"isArrayBufferLike"),j8=o(r=>!Buffer.isBuffer(r)&&ArrayBuffer.isView(r),"isArrayBufferView"),Xu=class{static{o(this,"Pipe")}src;dest;opts;ondrain;constructor(e,t,i){this.src=e,this.dest=t,this.opts=i,this.ondrain=()=>e[Gs](),this.dest.on("drain",this.ondrain)}unpipe(){this.dest.removeListener("drain",this.ondrain)}proxyErrors(e){}end(){this.unpipe(),this.opts.end&&this.dest.end()}},fm=class extends Xu{static{o(this,"PipeProxyErrors")}unpipe(){this.src.removeListener("error",this.proxyErrors),super.unpipe()}constructor(e,t,i){super(e,t,i),this.proxyErrors=n=>t.emit("error",n),e.on("error",this.proxyErrors)}},M8=o(r=>!!r.objectMode,"isObjectModeOptions"),L8=o(r=>!r.objectMode&&!!r.encoding&&r.encoding!=="buffer","isEncodingOptions"),hn=class extends Zu.EventEmitter{static{o(this,"Minipass")}[vt]=!1;[Ja]=!1;[Xt]=[];[bt]=[];[Lt];[Xr];[gi];[$s];[Vi]=!1;[fn]=!1;[zu]=!1;[Ku]=!1;[Qa]=null;[St]=0;[at]=!1;[Xa];[Ju]=!1;[Yn]=0;[gr]=!1;writable=!0;readable=!0;constructor(...e){let t=e[0]||{};if(super(),t.objectMode&&typeof t.encoding=="string")throw new TypeError("Encoding and objectMode may not be used together");M8(t)?(this[Lt]=!0,this[Xr]=null):L8(t)?(this[Xr]=t.encoding,this[Lt]=!1):(this[Lt]=!1,this[Xr]=null),this[gi]=!!t.async,this[$s]=this[Xr]?new hv.StringDecoder(this[Xr]):null,t&&t.debugExposeBuffer===!0&&Object.defineProperty(this,"buffer",{get:o(()=>this[bt],"get")}),t&&t.debugExposePipes===!0&&Object.defineProperty(this,"pipes",{get:o(()=>this[Xt],"get")});let{signal:i}=t;i&&(this[Xa]=i,i.aborted?this[lm]():i.addEventListener("abort",()=>this[lm]()))}get bufferLength(){return this[St]}get encoding(){return this[Xr]}set encoding(e){throw new Error("Encoding must be set at instantiation time")}setEncoding(e){throw new Error("Encoding must be set at instantiation time")}get objectMode(){return this[Lt]}set objectMode(e){throw new Error("objectMode must be set at instantiation time")}get async(){return this[gi]}set async(e){this[gi]=this[gi]||!!e}[lm](){this[Ju]=!0,this.emit("abort",this[Xa]?.reason),this.destroy(this[Xa]?.reason)}get aborted(){return this[Ju]}set aborted(e){}write(e,t,i){if(this[Ju])return!1;if(this[Vi])throw new Error("write after end");if(this[at])return this.emit("error",Object.assign(new Error("Cannot call write after a stream was destroyed"),{code:"ERR_STREAM_DESTROYED"})),!0;typeof t=="function"&&(i=t,t="utf8"),t||(t="utf8");let n=this[gi]?Za:I8;if(!this[Lt]&&!Buffer.isBuffer(e)){if(j8(e))e=Buffer.from(e.buffer,e.byteOffset,e.byteLength);else if(k8(e))e=Buffer.from(e);else if(typeof e!="string")throw new Error("Non-contiguous data written to non-objectMode stream")}return this[Lt]?(this[vt]&&this[St]!==0&&this[Yu](!0),this[vt]?this.emit("data",e):this[am](e),this[St]!==0&&this.emit("readable"),i&&n(i),this[vt]):e.length?(typeof e=="string"&&!(t===this[Xr]&&!this[$s]?.lastNeed)&&(e=Buffer.from(e,t)),Buffer.isBuffer(e)&&this[Xr]&&(e=this[$s].write(e)),this[vt]&&this[St]!==0&&this[Yu](!0),this[vt]?this.emit("data",e):this[am](e),this[St]!==0&&this.emit("readable"),i&&n(i),this[vt]):(this[St]!==0&&this.emit("readable"),i&&n(i),this[vt])}read(e){if(this[at])return null;if(this[gr]=!1,this[St]===0||e===0||e&&e>this[St])return this[Ui](),null;this[Lt]&&(e=null),this[bt].length>1&&!this[Lt]&&(this[bt]=[this[Xr]?this[bt].join(""):Buffer.concat(this[bt],this[St])]);let t=this[uv](e||null,this[bt][0]);return this[Ui](),t}[uv](e,t){if(this[Lt])this[Qu]();else{let i=t;e===i.length||e===null?this[Qu]():typeof i=="string"?(this[bt][0]=i.slice(e),t=i.slice(0,e),this[St]-=e):(this[bt][0]=i.subarray(e),t=i.subarray(0,e),this[St]-=e)}return this.emit("data",t),!this[bt].length&&!this[Vi]&&this.emit("drain"),t}end(e,t,i){return typeof e=="function"&&(i=e,e=void 0),typeof t=="function"&&(i=t,t="utf8"),e!==void 0&&this.write(e,t),i&&this.once("end",i),this[Vi]=!0,this.writable=!1,(this[vt]||!this[Ja])&&this[Ui](),this}[Gs](){this[at]||(!this[Yn]&&!this[Xt].length&&(this[gr]=!0),this[Ja]=!1,this[vt]=!0,this.emit("resume"),this[bt].length?this[Yu]():this[Vi]?this[Ui]():this.emit("drain"))}resume(){return this[Gs]()}pause(){this[vt]=!1,this[Ja]=!0,this[gr]=!1}get destroyed(){return this[at]}get flowing(){return this[vt]}get paused(){return this[Ja]}[am](e){this[Lt]?this[St]+=1:this[St]+=e.length,this[bt].push(e)}[Qu](){return this[Lt]?this[St]-=1:this[St]-=this[bt][0].length,this[bt].shift()}[Yu](e=!1){do;while(this[lv](this[Qu]())&&this[bt].length);!e&&!this[bt].length&&!this[Vi]&&this.emit("drain")}[lv](e){return this.emit("data",e),this[vt]}pipe(e,t){if(this[at])return e;this[gr]=!1;let i=this[fn];return t=t||{},e===cv.stdout||e===cv.stderr?t.end=!1:t.end=t.end!==!1,t.proxyErrors=!!t.proxyErrors,i?t.end&&e.end():(this[Xt].push(t.proxyErrors?new fm(this,e,t):new Xu(this,e,t)),this[gi]?Za(()=>this[Gs]()):this[Gs]()),e}unpipe(e){let t=this[Xt].find(i=>i.dest===e);t&&(this[Xt].length===1?(this[vt]&&this[Yn]===0&&(this[vt]=!1),this[Xt]=[]):this[Xt].splice(this[Xt].indexOf(t),1),t.unpipe())}addListener(e,t){return this.on(e,t)}on(e,t){let i=super.on(e,t);if(e==="data")this[gr]=!1,this[Yn]++,!this[Xt].length&&!this[vt]&&this[Gs]();else if(e==="readable"&&this[St]!==0)super.emit("readable");else if(N8(e)&&this[fn])super.emit(e),this.removeAllListeners(e);else if(e==="error"&&this[Qa]){let n=t;this[gi]?Za(()=>n.call(this,this[Qa])):n.call(this,this[Qa])}return i}removeListener(e,t){return this.off(e,t)}off(e,t){let i=super.off(e,t);return e==="data"&&(this[Yn]=this.listeners("data").length,this[Yn]===0&&!this[gr]&&!this[Xt].length&&(this[vt]=!1)),i}removeAllListeners(e){let t=super.removeAllListeners(e);return(e==="data"||e===void 0)&&(this[Yn]=0,!this[gr]&&!this[Xt].length&&(this[vt]=!1)),t}get emittedEnd(){return this[fn]}[Ui](){!this[zu]&&!this[fn]&&!this[at]&&this[bt].length===0&&this[Vi]&&(this[zu]=!0,this.emit("end"),this.emit("prefinish"),this.emit("finish"),this[Ku]&&this.emit("close"),this[zu]=!1)}emit(e,...t){let i=t[0];if(e!=="error"&&e!=="close"&&e!==at&&this[at])return!1;if(e==="data")return!this[Lt]&&!i?!1:this[gi]?(Za(()=>this[cm](i)),!0):this[cm](i);if(e==="end")return this[fv]();if(e==="close"){if(this[Ku]=!0,!this[fn]&&!this[at])return!1;let s=super.emit("close");return this.removeAllListeners("close"),s}else if(e==="error"){this[Qa]=i,super.emit(om,i);let s=!this[Xa]||this.listeners("error").length?super.emit("error",i):!1;return this[Ui](),s}else if(e==="resume"){let s=super.emit("resume");return this[Ui](),s}else if(e==="finish"||e==="prefinish"){let s=super.emit(e);return this.removeAllListeners(e),s}let n=super.emit(e,...t);return this[Ui](),n}[cm](e){for(let i of this[Xt])i.dest.write(e)===!1&&this.pause();let t=this[gr]?!1:super.emit("data",e);return this[Ui](),t}[fv](){return this[fn]?!1:(this[fn]=!0,this.readable=!1,this[gi]?(Za(()=>this[um]()),!0):this[um]())}[um](){if(this[$s]){let t=this[$s].end();if(t){for(let i of this[Xt])i.dest.write(t);this[gr]||super.emit("data",t)}}for(let t of this[Xt])t.end();let e=super.emit("end");return this.removeAllListeners("end"),e}async collect(){let e=Object.assign([],{dataLength:0});this[Lt]||(e.dataLength=0);let t=this.promise();return this.on("data",i=>{e.push(i),this[Lt]||(e.dataLength+=i.length)}),await t,e}async concat(){if(this[Lt])throw new Error("cannot concat in objectMode");let e=await this.collect();return this[Xr]?e.join(""):Buffer.concat(e,e.dataLength)}async promise(){return new Promise((e,t)=>{this.on(at,()=>t(new Error("stream destroyed"))),this.on("error",i=>t(i)),this.on("end",()=>e())})}[Symbol.asyncIterator](){this[gr]=!1;let e=!1,t=o(async()=>(this.pause(),e=!0,{value:void 0,done:!0}),"stop");return{next:o(()=>{if(e)return t();let n=this.read();if(n!==null)return Promise.resolve({done:!1,value:n});if(this[Vi])return t();let s,a,c=o(h=>{this.off("data",u),this.off("end",f),this.off(at,l),t(),a(h)},"onerr"),u=o(h=>{this.off("error",c),this.off("end",f),this.off(at,l),this.pause(),s({value:h,done:!!this[Vi]})},"ondata"),f=o(()=>{this.off("error",c),this.off("data",u),this.off(at,l),t(),s({done:!0,value:void 0})},"onend"),l=o(()=>c(new Error("stream destroyed")),"ondestroy");return new Promise((h,p)=>{a=p,s=h,this.once(at,l),this.once("error",c),this.once("end",f),this.once("data",u)})},"next"),throw:t,return:t,[Symbol.asyncIterator](){return this}}}[Symbol.iterator](){this[gr]=!1;let e=!1,t=o(()=>(this.pause(),this.off(om,t),this.off(at,t),this.off("end",t),e=!0,{done:!0,value:void 0}),"stop"),i=o(()=>{if(e)return t();let n=this.read();return n===null?t():{done:!1,value:n}},"next");return this.once("end",t),this.once(om,t),this.once(at,t),{next:i,throw:t,return:t,[Symbol.iterator](){return this}}}destroy(e){if(this[at])return e?this.emit("error",e):this.emit(at),this;this[at]=!0,this[gr]=!0,this[bt].length=0,this[St]=0;let t=this;return typeof t.close=="function"&&!this[Ku]&&t.close(),e?this.emit("error",e):this.emit(at),this}static get isStream(){return P8}};var V8=_i.realpathSync.native,to={lstatSync:_i.lstatSync,readdir:_i.readdir,readdirSync:_i.readdirSync,readlinkSync:_i.readlinkSync,realpathSync:V8,promises:{lstat:dn.lstat,readdir:dn.readdir,readlink:dn.readlink,realpath:dn.realpath}},_v=o(r=>!r||r===to||r===q8?to:{...to,...r,promises:{...to.promises,...r.promises||{}}},"fsFromOption"),vv=/^\\\\\?\\([a-z]:)\\?$/i,U8=o(r=>r.replace(/\//g,"\\").replace(vv,"$1\\"),"uncToDrive"),B8=/[\\\/]/,Ar=0,bv=1,Sv=2,yi=4,wv=6,Ev=8,Qn=10,Tv=12,xr=15,eo=~xr,dm=16,dv=32,ro=64,Zr=128,el=256,rl=512,pv=ro|Zr|rl,$8=1023,pm=o(r=>r.isFile()?Ev:r.isDirectory()?yi:r.isSymbolicLink()?Qn:r.isCharacterDevice()?Sv:r.isBlockDevice()?wv:r.isSocket()?Tv:r.isFIFO()?bv:Ar,"entToType"),mv=new Map,io=o(r=>{let e=mv.get(r);if(e)return e;let t=r.normalize("NFKD");return mv.set(r,t),t},"normalize"),gv=new Map,tl=o(r=>{let e=gv.get(r);if(e)return e;let t=io(r.toLowerCase());return gv.set(r,t),t},"normalizeNocase"),il=class extends Ya{static{o(this,"ResolveCache")}constructor(){super({max:256})}},mm=class extends Ya{static{o(this,"ChildrenCache")}constructor(e=16*1024){super({maxSize:e,sizeCalculation:o(t=>t.length+1,"sizeCalculation")})}},xv=Symbol("PathScurry setAsCwd"),qt=class{static{o(this,"PathBase")}name;root;roots;parent;nocase;isCWD=!1;#e;#t;get dev(){return this.#t}#s;get mode(){return this.#s}#i;get nlink(){return this.#i}#a;get uid(){return this.#a}#b;get gid(){return this.#b}#u;get rdev(){return this.#u}#f;get blksize(){return this.#f}#o;get ino(){return this.#o}#c;get size(){return this.#c}#n;get blocks(){return this.#n}#g;get atimeMs(){return this.#g}#y;get mtimeMs(){return this.#y}#d;get ctimeMs(){return this.#d}#h;get birthtimeMs(){return this.#h}#E;get atime(){return this.#E}#m;get mtime(){return this.#m}#T;get ctime(){return this.#T}#x;get birthtime(){return this.#x}#v;#S;#w;#p;#F;#A;#r;#R;#_;#P;get parentPath(){return(this.parent||this).fullpath()}get path(){return this.parentPath}constructor(e,t=Ar,i,n,s,a,c){this.name=e,this.#v=s?tl(e):io(e),this.#r=t&$8,this.nocase=s,this.roots=n,this.root=i||this,this.#R=a,this.#w=c.fullpath,this.#F=c.relative,this.#A=c.relativePosix,this.parent=c.parent,this.parent?this.#e=this.parent.#e:this.#e=_v(c.fs)}depth(){return this.#S!==void 0?this.#S:this.parent?this.#S=this.parent.depth()+1:this.#S=0}childrenCache(){return this.#R}resolve(e){if(!e)return this;let t=this.getRootString(e),n=e.substring(t.length).split(this.splitSep);return t?this.getRoot(t).#I(n):this.#I(n)}#I(e){let t=this;for(let i of e)t=t.child(i);return t}children(){let e=this.#R.get(this);if(e)return e;let t=Object.assign([],{provisional:0});return this.#R.set(this,t),this.#r&=~dm,t}child(e,t){if(e===""||e===".")return this;if(e==="..")return this.parent||this;let i=this.children(),n=this.nocase?tl(e):io(e);for(let u of i)if(u.#v===n)return u;let s=this.parent?this.sep:"",a=this.#w?this.#w+s+e:void 0,c=this.newChild(e,Ar,{...t,parent:this,fullpath:a});return this.canReaddir()||(c.#r|=Zr),i.push(c),c}relative(){if(this.isCWD)return"";if(this.#F!==void 0)return this.#F;let e=this.name,t=this.parent;if(!t)return this.#F=this.name;let i=t.relative();return i+(!i||!t.parent?"":this.sep)+e}relativePosix(){if(this.sep==="/")return this.relative();if(this.isCWD)return"";if(this.#A!==void 0)return this.#A;let e=this.name,t=this.parent;if(!t)return this.#A=this.fullpathPosix();let i=t.relativePosix();return i+(!i||!t.parent?"":"/")+e}fullpath(){if(this.#w!==void 0)return this.#w;let e=this.name,t=this.parent;if(!t)return this.#w=this.name;let n=t.fullpath()+(t.parent?this.sep:"")+e;return this.#w=n}fullpathPosix(){if(this.#p!==void 0)return this.#p;if(this.sep==="/")return this.#p=this.fullpath();if(!this.parent){let n=this.fullpath().replace(/\\/g,"/");return/^[a-z]:\//i.test(n)?this.#p=`//?/${n}`:this.#p=n}let e=this.parent,t=e.fullpathPosix(),i=t+(!t||!e.parent?"":"/")+this.name;return this.#p=i}isUnknown(){return(this.#r&xr)===Ar}isType(e){return this[`is${e}`]()}getType(){return this.isUnknown()?"Unknown":this.isDirectory()?"Directory":this.isFile()?"File":this.isSymbolicLink()?"SymbolicLink":this.isFIFO()?"FIFO":this.isCharacterDevice()?"CharacterDevice":this.isBlockDevice()?"BlockDevice":this.isSocket()?"Socket":"Unknown"}isFile(){return(this.#r&xr)===Ev}isDirectory(){return(this.#r&xr)===yi}isCharacterDevice(){return(this.#r&xr)===Sv}isBlockDevice(){return(this.#r&xr)===wv}isFIFO(){return(this.#r&xr)===bv}isSocket(){return(this.#r&xr)===Tv}isSymbolicLink(){return(this.#r&Qn)===Qn}lstatCached(){return this.#r&dv?this:void 0}readlinkCached(){return this.#_}realpathCached(){return this.#P}readdirCached(){let e=this.children();return e.slice(0,e.provisional)}canReadlink(){if(this.#_)return!0;if(!this.parent)return!1;let e=this.#r&xr;return!(e!==Ar&&e!==Qn||this.#r&el||this.#r&Zr)}calledReaddir(){return!!(this.#r&dm)}isENOENT(){return!!(this.#r&Zr)}isNamed(e){return this.nocase?this.#v===tl(e):this.#v===io(e)}async readlink(){let e=this.#_;if(e)return e;if(this.canReadlink()&&this.parent)try{let t=await this.#e.promises.readlink(this.fullpath()),i=(await this.parent.realpath())?.resolve(t);if(i)return this.#_=i}catch(t){this.#l(t.code);return}}readlinkSync(){let e=this.#_;if(e)return e;if(this.canReadlink()&&this.parent)try{let t=this.#e.readlinkSync(this.fullpath()),i=this.parent.realpathSync()?.resolve(t);if(i)return this.#_=i}catch(t){this.#l(t.code);return}}#N(e){this.#r|=dm;for(let t=e.provisional;t<e.length;t++){let i=e[t];i&&i.#k()}}#k(){this.#r&Zr||(this.#r=(this.#r|Zr)&eo,this.#O())}#O(){let e=this.children();e.provisional=0;for(let t of e)t.#k()}#C(){this.#r|=rl,this.#j()}#j(){if(this.#r&ro)return;let e=this.#r;(e&xr)===yi&&(e&=eo),this.#r=e|ro,this.#O()}#M(e=""){e==="ENOTDIR"||e==="EPERM"?this.#j():e==="ENOENT"?this.#k():this.children().provisional=0}#L(e=""){e==="ENOTDIR"?this.parent.#j():e==="ENOENT"&&this.#k()}#l(e=""){let t=this.#r;t|=el,e==="ENOENT"&&(t|=Zr),(e==="EINVAL"||e==="UNKNOWN")&&(t&=eo),this.#r=t,e==="ENOTDIR"&&this.parent&&this.parent.#j()}#q(e,t){return this.#D(e,t)||this.#V(e,t)}#V(e,t){let i=pm(e),n=this.newChild(e.name,i,{parent:this}),s=n.#r&xr;return s!==yi&&s!==Qn&&s!==Ar&&(n.#r|=ro),t.unshift(n),t.provisional++,n}#D(e,t){for(let i=t.provisional;i<t.length;i++){let n=t[i];if((this.nocase?tl(e.name):io(e.name))===n.#v)return this.#U(e,n,i,t)}}#U(e,t,i,n){let s=t.name;return t.#r=t.#r&eo|pm(e),s!==e.name&&(t.name=e.name),i!==n.provisional&&(i===n.length-1?n.pop():n.splice(i,1),n.unshift(t)),n.provisional++,t}async lstat(){if((this.#r&Zr)===0)try{return this.#W(await this.#e.promises.lstat(this.fullpath())),this}catch(e){this.#L(e.code)}}lstatSync(){if((this.#r&Zr)===0)try{return this.#W(this.#e.lstatSync(this.fullpath())),this}catch(e){this.#L(e.code)}}#W(e){let{atime:t,atimeMs:i,birthtime:n,birthtimeMs:s,blksize:a,blocks:c,ctime:u,ctimeMs:f,dev:l,gid:h,ino:p,mode:g,mtime:v,mtimeMs:S,nlink:A,rdev:F,size:D,uid:U}=e;this.#E=t,this.#g=i,this.#x=n,this.#h=s,this.#f=a,this.#n=c,this.#T=u,this.#d=f,this.#t=l,this.#b=h,this.#o=p,this.#s=g,this.#m=v,this.#y=S,this.#i=A,this.#u=F,this.#c=D,this.#a=U;let H=pm(e);this.#r=this.#r&eo|H|dv,H!==Ar&&H!==yi&&H!==Qn&&(this.#r|=ro)}#$=[];#G=!1;#H(e){this.#G=!1;let t=this.#$.slice();this.#$.length=0,t.forEach(i=>i(null,e))}readdirCB(e,t=!1){if(!this.canReaddir()){t?e(null,[]):queueMicrotask(()=>e(null,[]));return}let i=this.children();if(this.calledReaddir()){let s=i.slice(0,i.provisional);t?e(null,s):queueMicrotask(()=>e(null,s));return}if(this.#$.push(e),this.#G)return;this.#G=!0;let n=this.fullpath();this.#e.readdir(n,{withFileTypes:!0},(s,a)=>{if(s)this.#M(s.code),i.provisional=0;else{for(let c of a)this.#q(c,i);this.#N(i)}this.#H(i.slice(0,i.provisional))})}#B;async readdir(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let t=this.fullpath();if(this.#B)await this.#B;else{let i=o(()=>{},"resolve");this.#B=new Promise(n=>i=n);try{for(let n of await this.#e.promises.readdir(t,{withFileTypes:!0}))this.#q(n,e);this.#N(e)}catch(n){this.#M(n.code),e.provisional=0}this.#B=void 0,i()}return e.slice(0,e.provisional)}readdirSync(){if(!this.canReaddir())return[];let e=this.children();if(this.calledReaddir())return e.slice(0,e.provisional);let t=this.fullpath();try{for(let i of this.#e.readdirSync(t,{withFileTypes:!0}))this.#q(i,e);this.#N(e)}catch(i){this.#M(i.code),e.provisional=0}return e.slice(0,e.provisional)}canReaddir(){if(this.#r&pv)return!1;let e=xr&this.#r;return e===Ar||e===yi||e===Qn}shouldWalk(e,t){return(this.#r&yi)===yi&&!(this.#r&pv)&&!e.has(this)&&(!t||t(this))}async realpath(){if(this.#P)return this.#P;if(!((rl|el|Zr)&this.#r))try{let e=await this.#e.promises.realpath(this.fullpath());return this.#P=this.resolve(e)}catch{this.#C()}}realpathSync(){if(this.#P)return this.#P;if(!((rl|el|Zr)&this.#r))try{let e=this.#e.realpathSync(this.fullpath());return this.#P=this.resolve(e)}catch{this.#C()}}[xv](e){if(e===this)return;e.isCWD=!1,this.isCWD=!0;let t=new Set([]),i=[],n=this;for(;n&&n.parent;)t.add(n),n.#F=i.join(this.sep),n.#A=i.join("/"),n=n.parent,i.push("..");for(n=e;n&&n.parent&&!t.has(n);)n.#F=void 0,n.#A=void 0,n=n.parent}},nl=class r extends qt{static{o(this,"PathWin32")}sep="\\";splitSep=B8;constructor(e,t=Ar,i,n,s,a,c){super(e,t,i,n,s,a,c)}newChild(e,t=Ar,i={}){return new r(e,t,this.root,this.roots,this.nocase,this.childrenCache(),i)}getRootString(e){return Ws.win32.parse(e).root}getRoot(e){if(e=U8(e.toUpperCase()),e===this.root.name)return this.root;for(let[t,i]of Object.entries(this.roots))if(this.sameRoot(e,t))return this.roots[e]=i;return this.roots[e]=new Hs(e,this).root}sameRoot(e,t=this.root.name){return e=e.toUpperCase().replace(/\//g,"\\").replace(vv,"$1\\"),e===t}},sl=class r extends qt{static{o(this,"PathPosix")}splitSep="/";sep="/";constructor(e,t=Ar,i,n,s,a,c){super(e,t,i,n,s,a,c)}getRootString(e){return e.startsWith("/")?"/":""}getRoot(e){return this.root}newChild(e,t=Ar,i={}){return new r(e,t,this.root,this.roots,this.nocase,this.childrenCache(),i)}},al=class{static{o(this,"PathScurryBase")}root;rootPath;roots;cwd;#e;#t;#s;nocase;#i;constructor(e=process.cwd(),t,i,{nocase:n,childrenCacheSize:s=16*1024,fs:a=to}={}){this.#i=_v(a),(e instanceof URL||e.startsWith("file://"))&&(e=(0,yv.fileURLToPath)(e));let c=t.resolve(e);this.roots=Object.create(null),this.rootPath=this.parseRootPath(c),this.#e=new il,this.#t=new il,this.#s=new mm(s);let u=c.substring(this.rootPath.length).split(i);if(u.length===1&&!u[0]&&u.pop(),n===void 0)throw new TypeError("must provide nocase setting to PathScurryBase ctor");this.nocase=n,this.root=this.newRoot(this.#i),this.roots[this.rootPath]=this.root;let f=this.root,l=u.length-1,h=t.sep,p=this.rootPath,g=!1;for(let v of u){let S=l--;f=f.child(v,{relative:new Array(S).fill("..").join(h),relativePosix:new Array(S).fill("..").join("/"),fullpath:p+=(g?"":h)+v}),g=!0}this.cwd=f}depth(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.depth()}childrenCache(){return this.#s}resolve(...e){let t="";for(let s=e.length-1;s>=0;s--){let a=e[s];if(!(!a||a===".")&&(t=t?`${a}/${t}`:a,this.isAbsolute(a)))break}let i=this.#e.get(t);if(i!==void 0)return i;let n=this.cwd.resolve(t).fullpath();return this.#e.set(t,n),n}resolvePosix(...e){let t="";for(let s=e.length-1;s>=0;s--){let a=e[s];if(!(!a||a===".")&&(t=t?`${a}/${t}`:a,this.isAbsolute(a)))break}let i=this.#t.get(t);if(i!==void 0)return i;let n=this.cwd.resolve(t).fullpathPosix();return this.#t.set(t,n),n}relative(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relative()}relativePosix(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.relativePosix()}basename(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.name}dirname(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),(e.parent||e).fullpath()}async readdir(e=this.cwd,t={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd);let{withFileTypes:i}=t;if(e.canReaddir()){let n=await e.readdir();return i?n:n.map(s=>s.name)}else return[]}readdirSync(e=this.cwd,t={withFileTypes:!0}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd);let{withFileTypes:i=!0}=t;return e.canReaddir()?i?e.readdirSync():e.readdirSync().map(n=>n.name):[]}async lstat(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstat()}lstatSync(e=this.cwd){return typeof e=="string"&&(e=this.cwd.resolve(e)),e.lstatSync()}async readlink(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e.withFileTypes,e=this.cwd);let i=await e.readlink();return t?i:i?.fullpath()}readlinkSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e.withFileTypes,e=this.cwd);let i=e.readlinkSync();return t?i:i?.fullpath()}async realpath(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e.withFileTypes,e=this.cwd);let i=await e.realpath();return t?i:i?.fullpath()}realpathSync(e=this.cwd,{withFileTypes:t}={withFileTypes:!1}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e.withFileTypes,e=this.cwd);let i=e.realpathSync();return t?i:i?.fullpath()}async walk(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:a}=t,c=[];(!s||s(e))&&c.push(i?e:e.fullpath());let u=new Set,f=o((h,p)=>{u.add(h),h.readdirCB((g,v)=>{if(g)return p(g);let S=v.length;if(!S)return p();let A=o(()=>{--S===0&&p()},"next");for(let F of v)(!s||s(F))&&c.push(i?F:F.fullpath()),n&&F.isSymbolicLink()?F.realpath().then(D=>D?.isUnknown()?D.lstat():D).then(D=>D?.shouldWalk(u,a)?f(D,A):A()):F.shouldWalk(u,a)?f(F,A):A()},!0)},"walk"),l=e;return new Promise((h,p)=>{f(l,g=>{if(g)return p(g);h(c)})})}walkSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:a}=t,c=[];(!s||s(e))&&c.push(i?e:e.fullpath());let u=new Set([e]);for(let f of u){let l=f.readdirSync();for(let h of l){(!s||s(h))&&c.push(i?h:h.fullpath());let p=h;if(h.isSymbolicLink()){if(!(n&&(p=h.realpathSync())))continue;p.isUnknown()&&p.lstatSync()}p.shouldWalk(u,a)&&u.add(p)}}return c}[Symbol.asyncIterator](){return this.iterate()}iterate(e=this.cwd,t={}){return typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd),this.stream(e,t)[Symbol.asyncIterator]()}[Symbol.iterator](){return this.iterateSync()}*iterateSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:a}=t;(!s||s(e))&&(yield i?e:e.fullpath());let c=new Set([e]);for(let u of c){let f=u.readdirSync();for(let l of f){(!s||s(l))&&(yield i?l:l.fullpath());let h=l;if(l.isSymbolicLink()){if(!(n&&(h=l.realpathSync())))continue;h.isUnknown()&&h.lstatSync()}h.shouldWalk(c,a)&&c.add(h)}}}stream(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:a}=t,c=new hn({objectMode:!0});(!s||s(e))&&c.write(i?e:e.fullpath());let u=new Set,f=[e],l=0,h=o(()=>{let p=!1;for(;!p;){let g=f.shift();if(!g){l===0&&c.end();return}l++,u.add(g);let v=o((A,F,D=!1)=>{if(A)return c.emit("error",A);if(n&&!D){let U=[];for(let H of F)H.isSymbolicLink()&&U.push(H.realpath().then(ne=>ne?.isUnknown()?ne.lstat():ne));if(U.length){Promise.all(U).then(()=>v(null,F,!0));return}}for(let U of F)U&&(!s||s(U))&&(c.write(i?U:U.fullpath())||(p=!0));l--;for(let U of F){let H=U.realpathCached()||U;H.shouldWalk(u,a)&&f.push(H)}p&&!c.flowing?c.once("drain",h):S||h()},"onReaddir"),S=!0;g.readdirCB(v,!0),S=!1}},"process");return h(),c}streamSync(e=this.cwd,t={}){typeof e=="string"?e=this.cwd.resolve(e):e instanceof qt||(t=e,e=this.cwd);let{withFileTypes:i=!0,follow:n=!1,filter:s,walkFilter:a}=t,c=new hn({objectMode:!0}),u=new Set;(!s||s(e))&&c.write(i?e:e.fullpath());let f=[e],l=0,h=o(()=>{let p=!1;for(;!p;){let g=f.shift();if(!g){l===0&&c.end();return}l++,u.add(g);let v=g.readdirSync();for(let S of v)(!s||s(S))&&(c.write(i?S:S.fullpath())||(p=!0));l--;for(let S of v){let A=S;if(S.isSymbolicLink()){if(!(n&&(A=S.realpathSync())))continue;A.isUnknown()&&A.lstatSync()}A.shouldWalk(u,a)&&f.push(A)}}p&&!c.flowing&&c.once("drain",h)},"process");return h(),c}chdir(e=this.cwd){let t=this.cwd;this.cwd=typeof e=="string"?this.cwd.resolve(e):e,this.cwd[xv](t)}},Hs=class extends al{static{o(this,"PathScurryWin32")}sep="\\";constructor(e=process.cwd(),t={}){let{nocase:i=!0}=t;super(e,Ws.win32,"\\",{...t,nocase:i}),this.nocase=i;for(let n=this.cwd;n;n=n.parent)n.nocase=this.nocase}parseRootPath(e){return Ws.win32.parse(e).root.toUpperCase()}newRoot(e){return new nl(this.rootPath,yi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")||e.startsWith("\\")||/^[a-z]:(\/|\\)/i.test(e)}},zs=class extends al{static{o(this,"PathScurryPosix")}sep="/";constructor(e=process.cwd(),t={}){let{nocase:i=!1}=t;super(e,Ws.posix,"/",{...t,nocase:i}),this.nocase=i}parseRootPath(e){return"/"}newRoot(e){return new sl(this.rootPath,yi,void 0,this.roots,this.nocase,this.childrenCache(),{fs:e})}isAbsolute(e){return e.startsWith("/")}},no=class extends zs{static{o(this,"PathScurryDarwin")}constructor(e=process.cwd(),t={}){let{nocase:i=!0}=t;super(e,{...t,nocase:i})}},ZM=process.platform==="win32"?nl:sl,Av=process.platform==="win32"?Hs:process.platform==="darwin"?no:zs;var G8=o(r=>r.length>=1,"isPatternList"),W8=o(r=>r.length>=1,"isGlobList"),Ks=class r{static{o(this,"Pattern")}#e;#t;#s;length;#i;#a;#b;#u;#f;#o;#c=!0;constructor(e,t,i,n){if(!G8(e))throw new TypeError("empty pattern list");if(!W8(t))throw new TypeError("empty glob list");if(t.length!==e.length)throw new TypeError("mismatched pattern list and glob list lengths");if(this.length=e.length,i<0||i>=this.length)throw new TypeError("index out of range");if(this.#e=e,this.#t=t,this.#s=i,this.#i=n,this.#s===0){if(this.isUNC()){let[s,a,c,u,...f]=this.#e,[l,h,p,g,...v]=this.#t;f[0]===""&&(f.shift(),v.shift());let S=[s,a,c,u,""].join("/"),A=[l,h,p,g,""].join("/");this.#e=[S,...f],this.#t=[A,...v],this.length=this.#e.length}else if(this.isDrive()||this.isAbsolute()){let[s,...a]=this.#e,[c,...u]=this.#t;a[0]===""&&(a.shift(),u.shift());let f=s+"/",l=c+"/";this.#e=[f,...a],this.#t=[l,...u],this.length=this.#e.length}}}pattern(){return this.#e[this.#s]}isString(){return typeof this.#e[this.#s]=="string"}isGlobstar(){return this.#e[this.#s]===Dt}isRegExp(){return this.#e[this.#s]instanceof RegExp}globString(){return this.#b=this.#b||(this.#s===0?this.isAbsolute()?this.#t[0]+this.#t.slice(1).join("/"):this.#t.join("/"):this.#t.slice(this.#s).join("/"))}hasMore(){return this.length>this.#s+1}rest(){return this.#a!==void 0?this.#a:this.hasMore()?(this.#a=new r(this.#e,this.#t,this.#s+1,this.#i),this.#a.#o=this.#o,this.#a.#f=this.#f,this.#a.#u=this.#u,this.#a):this.#a=null}isUNC(){let e=this.#e;return this.#f!==void 0?this.#f:this.#f=this.#i==="win32"&&this.#s===0&&e[0]===""&&e[1]===""&&typeof e[2]=="string"&&!!e[2]&&typeof e[3]=="string"&&!!e[3]}isDrive(){let e=this.#e;return this.#u!==void 0?this.#u:this.#u=this.#i==="win32"&&this.#s===0&&this.length>1&&typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0])}isAbsolute(){let e=this.#e;return this.#o!==void 0?this.#o:this.#o=e[0]===""&&e.length>1||this.isDrive()||this.isUNC()}root(){let e=this.#e[0];return typeof e=="string"&&this.isAbsolute()&&this.#s===0?e:""}checkFollowGlobstar(){return!(this.#s===0||!this.isGlobstar()||!this.#c)}markFollowGlobstar(){return this.#s===0||!this.isGlobstar()||!this.#c?!1:(this.#c=!1,!0)}};var H8=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",Ys=class{static{o(this,"Ignore")}relative;relativeChildren;absolute;absoluteChildren;platform;mmopts;constructor(e,{nobrace:t,nocase:i,noext:n,noglobstar:s,platform:a=H8}){this.relative=[],this.absolute=[],this.relativeChildren=[],this.absoluteChildren=[],this.platform=a,this.mmopts={dot:!0,nobrace:t,nocase:i,noext:n,noglobstar:s,optimizationLevel:2,platform:a,nocomment:!0,nonegate:!0};for(let c of e)this.add(c)}add(e){let t=new mr(e,this.mmopts);for(let i=0;i<t.set.length;i++){let n=t.set[i],s=t.globParts[i];if(!n||!s)throw new Error("invalid pattern object");for(;n[0]==="."&&s[0]===".";)n.shift(),s.shift();let a=new Ks(n,s,0,this.platform),c=new mr(a.globString(),this.mmopts),u=s[s.length-1]==="**",f=a.isAbsolute();f?this.absolute.push(c):this.relative.push(c),u&&(f?this.absoluteChildren.push(c):this.relativeChildren.push(c))}}ignored(e){let t=e.fullpath(),i=`${t}/`,n=e.relative()||".",s=`${n}/`;for(let a of this.relative)if(a.match(n)||a.match(s))return!0;for(let a of this.absolute)if(a.match(t)||a.match(i))return!0;return!1}childrenIgnored(e){let t=e.fullpath()+"/",i=(e.relative()||".")+"/";for(let n of this.relativeChildren)if(n.match(i))return!0;for(let n of this.absoluteChildren)if(n.match(t))return!0;return!1}};var gm=class r{static{o(this,"HasWalkedCache")}store;constructor(e=new Map){this.store=e}copy(){return new r(new Map(this.store))}hasWalked(e,t){return this.store.get(e.fullpath())?.has(t.globString())}storeWalked(e,t){let i=e.fullpath(),n=this.store.get(i);n?n.add(t.globString()):this.store.set(i,new Set([t.globString()]))}},ym=class{static{o(this,"MatchRecord")}store=new Map;add(e,t,i){let n=(t?2:0)|(i?1:0),s=this.store.get(e);this.store.set(e,s===void 0?n:n&s)}entries(){return[...this.store.entries()].map(([e,t])=>[e,!!(t&2),!!(t&1)])}},_m=class{static{o(this,"SubWalks")}store=new Map;add(e,t){if(!e.canReaddir())return;let i=this.store.get(e);i?i.find(n=>n.globString()===t.globString())||i.push(t):this.store.set(e,[t])}get(e){let t=this.store.get(e);if(!t)throw new Error("attempting to walk unknown path");return t}entries(){return this.keys().map(e=>[e,this.store.get(e)])}keys(){return[...this.store.keys()].filter(e=>e.canReaddir())}},so=class r{static{o(this,"Processor")}hasWalkedCache;matches=new ym;subwalks=new _m;patterns;follow;dot;opts;constructor(e,t){this.opts=e,this.follow=!!e.follow,this.dot=!!e.dot,this.hasWalkedCache=t?t.copy():new gm}processPatterns(e,t){this.patterns=t;let i=t.map(n=>[e,n]);for(let[n,s]of i){this.hasWalkedCache.storeWalked(n,s);let a=s.root(),c=s.isAbsolute()&&this.opts.absolute!==!1;if(a){n=n.resolve(a==="/"&&this.opts.root!==void 0?this.opts.root:a);let h=s.rest();if(h)s=h;else{this.matches.add(n,!0,!1);continue}}if(n.isENOENT())continue;let u,f,l=!1;for(;typeof(u=s.pattern())=="string"&&(f=s.rest());)n=n.resolve(u),s=f,l=!0;if(u=s.pattern(),f=s.rest(),l){if(this.hasWalkedCache.hasWalked(n,s))continue;this.hasWalkedCache.storeWalked(n,s)}if(typeof u=="string"){let h=u===".."||u===""||u===".";this.matches.add(n.resolve(u),c,h);continue}else if(u===Dt){(!n.isSymbolicLink()||this.follow||s.checkFollowGlobstar())&&this.subwalks.add(n,s);let h=f?.pattern(),p=f?.rest();if(!f||(h===""||h===".")&&!p)this.matches.add(n,c,h===""||h===".");else if(h===".."){let g=n.parent||n;p?this.hasWalkedCache.hasWalked(g,p)||this.subwalks.add(g,p):this.matches.add(g,c,!0)}}else u instanceof RegExp&&this.subwalks.add(n,s)}return this}subwalkTargets(){return this.subwalks.keys()}child(){return new r(this.opts,this.hasWalkedCache)}filterEntries(e,t){let i=this.subwalks.get(e),n=this.child();for(let s of t)for(let a of i){let c=a.isAbsolute(),u=a.pattern(),f=a.rest();u===Dt?n.testGlobstar(s,a,f,c):u instanceof RegExp?n.testRegExp(s,u,f,c):n.testString(s,u,f,c)}return n}testGlobstar(e,t,i,n){if((this.dot||!e.name.startsWith("."))&&(t.hasMore()||this.matches.add(e,n,!1),e.canReaddir()&&(this.follow||!e.isSymbolicLink()?this.subwalks.add(e,t):e.isSymbolicLink()&&(i&&t.checkFollowGlobstar()?this.subwalks.add(e,i):t.markFollowGlobstar()&&this.subwalks.add(e,t)))),i){let s=i.pattern();if(typeof s=="string"&&s!==".."&&s!==""&&s!==".")this.testString(e,s,i.rest(),n);else if(s===".."){let a=e.parent||e;this.subwalks.add(a,i)}else s instanceof RegExp&&this.testRegExp(e,s,i.rest(),n)}}testRegExp(e,t,i,n){t.test(e.name)&&(i?this.subwalks.add(e,i):this.matches.add(e,n,!1))}testString(e,t,i,n){e.isNamed(t)&&(i?this.subwalks.add(e,i):this.matches.add(e,n,!1))}};var z8=o((r,e)=>typeof r=="string"?new Ys([r],e):Array.isArray(r)?new Ys(r,e):r,"makeIgnore"),ol=class{static{o(this,"GlobUtil")}path;patterns;opts;seen=new Set;paused=!1;aborted=!1;#e=[];#t;#s;signal;maxDepth;includeChildMatches;constructor(e,t,i){if(this.patterns=e,this.path=t,this.opts=i,this.#s=!i.posix&&i.platform==="win32"?"\\":"/",this.includeChildMatches=i.includeChildMatches!==!1,(i.ignore||!this.includeChildMatches)&&(this.#t=z8(i.ignore??[],i),!this.includeChildMatches&&typeof this.#t.add!="function")){let n="cannot ignore child matches, ignore lacks add() method.";throw new Error(n)}this.maxDepth=i.maxDepth||1/0,i.signal&&(this.signal=i.signal,this.signal.addEventListener("abort",()=>{this.#e.length=0}))}#i(e){return this.seen.has(e)||!!this.#t?.ignored?.(e)}#a(e){return!!this.#t?.childrenIgnored?.(e)}pause(){this.paused=!0}resume(){if(this.signal?.aborted)return;this.paused=!1;let e;for(;!this.paused&&(e=this.#e.shift());)e()}onResume(e){this.signal?.aborted||(this.paused?this.#e.push(e):e())}async matchCheck(e,t){if(t&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=e.realpathCached()||await e.realpath(),!i)return;e=i}let s=e.isUnknown()||this.opts.stat?await e.lstat():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let a=await s.realpath();a&&(a.isUnknown()||this.opts.stat)&&await a.lstat()}return this.matchCheckTest(s,t)}matchCheckTest(e,t){return e&&(this.maxDepth===1/0||e.depth()<=this.maxDepth)&&(!t||e.canReaddir())&&(!this.opts.nodir||!e.isDirectory())&&(!this.opts.nodir||!this.opts.follow||!e.isSymbolicLink()||!e.realpathCached()?.isDirectory())&&!this.#i(e)?e:void 0}matchCheckSync(e,t){if(t&&this.opts.nodir)return;let i;if(this.opts.realpath){if(i=e.realpathCached()||e.realpathSync(),!i)return;e=i}let s=e.isUnknown()||this.opts.stat?e.lstatSync():e;if(this.opts.follow&&this.opts.nodir&&s?.isSymbolicLink()){let a=s.realpathSync();a&&(a?.isUnknown()||this.opts.stat)&&a.lstatSync()}return this.matchCheckTest(s,t)}matchFinish(e,t){if(this.#i(e))return;if(!this.includeChildMatches&&this.#t?.add){let s=`${e.relativePosix()}/**`;this.#t.add(s)}let i=this.opts.absolute===void 0?t:this.opts.absolute;this.seen.add(e);let n=this.opts.mark&&e.isDirectory()?this.#s:"";if(this.opts.withFileTypes)this.matchEmit(e);else if(i){let s=this.opts.posix?e.fullpathPosix():e.fullpath();this.matchEmit(s+n)}else{let s=this.opts.posix?e.relativePosix():e.relative(),a=this.opts.dotRelative&&!s.startsWith(".."+this.#s)?"."+this.#s:"";this.matchEmit(s?a+s+n:"."+n)}}async match(e,t,i){let n=await this.matchCheck(e,i);n&&this.matchFinish(n,t)}matchSync(e,t,i){let n=this.matchCheckSync(e,i);n&&this.matchFinish(n,t)}walkCB(e,t,i){this.signal?.aborted&&i(),this.walkCB2(e,t,new so(this.opts),i)}walkCB2(e,t,i,n){if(this.#a(e))return n();if(this.signal?.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2(e,t,i,n));return}i.processPatterns(e,t);let s=1,a=o(()=>{--s===0&&n()},"next");for(let[c,u,f]of i.matches.entries())this.#i(c)||(s++,this.match(c,u,f).then(()=>a()));for(let c of i.subwalkTargets()){if(this.maxDepth!==1/0&&c.depth()>=this.maxDepth)continue;s++;let u=c.readdirCached();c.calledReaddir()?this.walkCB3(c,u,i,a):c.readdirCB((f,l)=>this.walkCB3(c,l,i,a),!0)}a()}walkCB3(e,t,i,n){i=i.filterEntries(e,t);let s=1,a=o(()=>{--s===0&&n()},"next");for(let[c,u,f]of i.matches.entries())this.#i(c)||(s++,this.match(c,u,f).then(()=>a()));for(let[c,u]of i.subwalks.entries())s++,this.walkCB2(c,u,i.child(),a);a()}walkCBSync(e,t,i){this.signal?.aborted&&i(),this.walkCB2Sync(e,t,new so(this.opts),i)}walkCB2Sync(e,t,i,n){if(this.#a(e))return n();if(this.signal?.aborted&&n(),this.paused){this.onResume(()=>this.walkCB2Sync(e,t,i,n));return}i.processPatterns(e,t);let s=1,a=o(()=>{--s===0&&n()},"next");for(let[c,u,f]of i.matches.entries())this.#i(c)||this.matchSync(c,u,f);for(let c of i.subwalkTargets()){if(this.maxDepth!==1/0&&c.depth()>=this.maxDepth)continue;s++;let u=c.readdirSync();this.walkCB3Sync(c,u,i,a)}a()}walkCB3Sync(e,t,i,n){i=i.filterEntries(e,t);let s=1,a=o(()=>{--s===0&&n()},"next");for(let[c,u,f]of i.matches.entries())this.#i(c)||this.matchSync(c,u,f);for(let[c,u]of i.subwalks.entries())s++,this.walkCB2Sync(c,u,i.child(),a);a()}},ao=class extends ol{static{o(this,"GlobWalker")}matches=new Set;constructor(e,t,i){super(e,t,i)}matchEmit(e){this.matches.add(e)}async walk(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&await this.path.lstat(),await new Promise((e,t)=>{this.walkCB(this.path,this.patterns,()=>{this.signal?.aborted?t(this.signal.reason):e(this.matches)})}),this.matches}walkSync(){if(this.signal?.aborted)throw this.signal.reason;return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>{if(this.signal?.aborted)throw this.signal.reason}),this.matches}},oo=class extends ol{static{o(this,"GlobStream")}results;constructor(e,t,i){super(e,t,i),this.results=new hn({signal:this.signal,objectMode:!0}),this.results.on("drain",()=>this.resume()),this.results.on("resume",()=>this.resume())}matchEmit(e){this.results.write(e),this.results.flowing||this.pause()}stream(){let e=this.path;return e.isUnknown()?e.lstat().then(()=>{this.walkCB(e,this.patterns,()=>this.results.end())}):this.walkCB(e,this.patterns,()=>this.results.end()),this.results}streamSync(){return this.path.isUnknown()&&this.path.lstatSync(),this.walkCBSync(this.path,this.patterns,()=>this.results.end()),this.results}};var K8=typeof process=="object"&&process&&typeof process.platform=="string"?process.platform:"linux",ei=class{static{o(this,"Glob")}absolute;cwd;root;dot;dotRelative;follow;ignore;magicalBraces;mark;matchBase;maxDepth;nobrace;nocase;nodir;noext;noglobstar;pattern;platform;realpath;scurry;stat;signal;windowsPathsNoEscape;withFileTypes;includeChildMatches;opts;patterns;constructor(e,t){if(!t)throw new TypeError("glob options required");if(this.withFileTypes=!!t.withFileTypes,this.signal=t.signal,this.follow=!!t.follow,this.dot=!!t.dot,this.dotRelative=!!t.dotRelative,this.nodir=!!t.nodir,this.mark=!!t.mark,t.cwd?(t.cwd instanceof URL||t.cwd.startsWith("file://"))&&(t.cwd=(0,Ov.fileURLToPath)(t.cwd)):this.cwd="",this.cwd=t.cwd||"",this.root=t.root,this.magicalBraces=!!t.magicalBraces,this.nobrace=!!t.nobrace,this.noext=!!t.noext,this.realpath=!!t.realpath,this.absolute=t.absolute,this.includeChildMatches=t.includeChildMatches!==!1,this.noglobstar=!!t.noglobstar,this.matchBase=!!t.matchBase,this.maxDepth=typeof t.maxDepth=="number"?t.maxDepth:1/0,this.stat=!!t.stat,this.ignore=t.ignore,this.withFileTypes&&this.absolute!==void 0)throw new Error("cannot set absolute and withFileTypes:true");if(typeof e=="string"&&(e=[e]),this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(e=e.map(u=>u.replace(/\\/g,"/"))),this.matchBase){if(t.noglobstar)throw new TypeError("base matching requires globstar");e=e.map(u=>u.includes("/")?u:`./**/${u}`)}if(this.pattern=e,this.platform=t.platform||K8,this.opts={...t,platform:this.platform},t.scurry){if(this.scurry=t.scurry,t.nocase!==void 0&&t.nocase!==t.scurry.nocase)throw new Error("nocase option contradicts provided scurry option")}else{let u=t.platform==="win32"?Hs:t.platform==="darwin"?no:t.platform?zs:Av;this.scurry=new u(this.cwd,{nocase:t.nocase,fs:t.fs})}this.nocase=this.scurry.nocase;let i=this.platform==="darwin"||this.platform==="win32",n={...t,dot:this.dot,matchBase:this.matchBase,nobrace:this.nobrace,nocase:this.nocase,nocaseMagicOnly:i,nocomment:!0,noext:this.noext,nonegate:!0,optimizationLevel:2,platform:this.platform,windowsPathsNoEscape:this.windowsPathsNoEscape,debug:!!this.opts.debug},s=this.pattern.map(u=>new mr(u,n)),[a,c]=s.reduce((u,f)=>(u[0].push(...f.set),u[1].push(...f.globParts),u),[[],[]]);this.patterns=a.map((u,f)=>{let l=c[f];if(!l)throw new Error("invalid pattern object");return new Ks(u,l,0,this.platform)})}async walk(){return[...await new ao(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walk()]}walkSync(){return[...new ao(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).walkSync()]}stream(){return new oo(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).stream()}streamSync(){return new oo(this.patterns,this.scurry.cwd,{...this.opts,maxDepth:this.maxDepth!==1/0?this.maxDepth+this.scurry.cwd.depth():1/0,platform:this.platform,nocase:this.nocase,includeChildMatches:this.includeChildMatches}).streamSync()}iterateSync(){return this.streamSync()[Symbol.iterator]()}[Symbol.iterator](){return this.iterateSync()}iterate(){return this.stream()[Symbol.asyncIterator]()}[Symbol.asyncIterator](){return this.iterate()}};var vm=o((r,e={})=>{Array.isArray(r)||(r=[r]);for(let t of r)if(new mr(t,e).hasMagic())return!0;return!1},"hasMagic");function ul(r,e={}){return new ei(r,e).streamSync()}o(ul,"globStreamSync");function Fv(r,e={}){return new ei(r,e).stream()}o(Fv,"globStream");function Pv(r,e={}){return new ei(r,e).walkSync()}o(Pv,"globSync");async function Cv(r,e={}){return new ei(r,e).walk()}o(Cv,"glob_");function ll(r,e={}){return new ei(r,e).iterateSync()}o(ll,"globIterateSync");function Dv(r,e={}){return new ei(r,e).iterate()}o(Dv,"globIterate");var Y8=ul,Q8=Object.assign(Fv,{sync:ul}),J8=ll,X8=Object.assign(Dv,{sync:ll}),Z8=Object.assign(Pv,{stream:ul,iterate:ll}),cl=Object.assign(Cv,{glob:Cv,globSync:Pv,sync:Z8,globStream:Fv,stream:Q8,globStreamSync:ul,streamSync:Y8,globIterate:Dv,iterate:X8,globIterateSync:ll,iterateSync:J8,Glob:ei,hasMagic:vm,escape:Vs,unescape:Jr});cl.glob=cl;var Jn=st(Gn());var fl=class{constructor(e){this.rootPath=e}static{o(this,"NodeFsAdapter")}async readFile(e){let t=this.resolvePath(e);if(!await dt.default.pathExists(t))throw new Jn.FileNotFoundError(e);return dt.default.readFile(t,"utf-8")}async fileExists(e){let t=this.resolvePath(e);return dt.default.pathExists(t)}async getFileMetadata(e){let t=await this.readFile(e);return this.extractFrontmatter(t)}async createFile(e,t){let i=this.resolvePath(e);if(await dt.default.pathExists(i))throw new Jn.FileAlreadyExistsError(e);return await dt.default.ensureDir(pn.default.dirname(i)),await dt.default.writeFile(i,t,"utf-8"),e}async updateFile(e,t){let i=this.resolvePath(e);if(!await dt.default.pathExists(i))throw new Jn.FileNotFoundError(e);await dt.default.writeFile(i,t,"utf-8")}async writeFile(e,t){let i=this.resolvePath(e);await dt.default.ensureDir(pn.default.dirname(i)),await dt.default.writeFile(i,t,"utf-8")}async deleteFile(e){let t=this.resolvePath(e);if(!await dt.default.pathExists(t))throw new Jn.FileNotFoundError(e);await dt.default.remove(t)}async renameFile(e,t){let i=this.resolvePath(e),n=this.resolvePath(t);if(!await dt.default.pathExists(i))throw new Jn.FileNotFoundError(e);await dt.default.ensureDir(pn.default.dirname(n)),await dt.default.move(i,n)}async createDirectory(e){let t=this.resolvePath(e);await dt.default.ensureDir(t)}async directoryExists(e){let t=this.resolvePath(e);return await dt.default.pathExists(t)?(await dt.default.stat(t)).isDirectory():!1}async getMarkdownFiles(e){let t=e?this.resolvePath(e):this.rootPath,i=pn.default.join(t,"**/*.md");return(await cl(i,{nodir:!0})).map(a=>pn.default.relative(this.rootPath,a))}async findFilesByMetadata(e){let t=await this.getMarkdownFiles(),i=[];for(let n of t)try{let s=await this.getFileMetadata(n);this.matchesQuery(s,e)&&i.push(n)}catch{continue}return i}async findFileByUID(e){let t=await this.findFilesByMetadata({exo__Asset_uid:e});return t.length>0?t[0]:null}resolvePath(e){return pn.default.isAbsolute(e)?e:pn.default.join(this.rootPath,e)}extractFrontmatter(e){let t=/^---\n([\s\S]*?)\n---/,i=e.match(t);if(!i)return{};try{let n=Ga.load(i[1]);return typeof n=="object"&&n!==null?n:{}}catch{return{}}}matchesQuery(e,t){for(let[i,n]of Object.entries(t)){let s=e[i];if(Array.isArray(s)){if(!s.some(a=>this.normalizeValue(a)===this.normalizeValue(n)))return!1}else if(this.normalizeValue(s)!==this.normalizeValue(n))return!1}return!0}normalizeValue(e){return e==null?"":String(e).replace(/["'[\]]/g,"").trim()}};var uo=st(require("path")),bm=st(ku());var vi=class extends Error{static{o(this,"CLIError")}constructor(e,t){super(e),this.name=this.constructor.name,this.context=t,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}format(){let e=`\u274C ${this.name}: ${this.message}`;if(this.guidance&&(e+=`

\u{1F4A1} ${this.guidance}`),this.context&&Object.keys(this.context).length>0){e+=`

\u{1F4CB} Context:`;for(let[t,i]of Object.entries(this.context))e+=`
  ${t}: ${JSON.stringify(i)}`}return e}};var co=class extends vi{constructor(t,i){super(`File not found: ${t}`,{filepath:t,...i});this.exitCode=3;this.guidance=`Verify the file path is correct and the file exists.
Check:
  \u2022 File path spelling
  \u2022 File is in the vault directory
  \u2022 File has .md extension`}static{o(this,"FileNotFoundError")}};var Xn=class extends vi{constructor(t,i,n){super(t,n);this.exitCode=2;this.guidance=i||`Check command syntax and argument format.
Use: exocortex command --help for usage information.`}static{o(this,"InvalidArgumentsError")}};var hl=class{constructor(e){this.vaultRoot=e}static{o(this,"PathResolver")}resolve(e){if(!uo.default.isAbsolute(e))return uo.default.resolve(this.vaultRoot,e);let t=uo.default.resolve(e),i=uo.default.resolve(this.vaultRoot);if(!t.startsWith(i))throw new Xn(`File path ${e} is outside vault root ${this.vaultRoot}`,"Provide a file path within the vault directory.",{filepath:e,vaultRoot:this.vaultRoot});return t}validate(e){if(!bm.default.existsSync(e))throw new co(e);if(!bm.default.statSync(e).isFile())throw new Xn(`Not a file: ${e}`,"Provide a path to a file, not a directory.",{filepath:e});if(!e.endsWith(".md"))throw new Xn(`Not a Markdown file: ${e}`,"Provide a path to a .md file.",{filepath:e})}getVaultRoot(){return this.vaultRoot}};var rt=class{static{o(this,"ErrorHandler")}static handle(e){e instanceof vi&&(console.error(e.format()),process.env.DEBUG&&(console.error(`
\u{1F4CD} Stack trace:`),console.error(e.stack)),process.exit(e.exitCode)),e.message.toLowerCase().includes("transition")&&(console.error(`\u274C Error: ${e.message}`),process.exit(6)),e.message.toLowerCase().includes("transaction")&&(console.error(`\u274C Error: ${e.message}`),process.exit(7)),(e.message.includes("not found")||e.message.includes("ENOENT"))&&(console.error(`\u274C Error: ${e.message}`),process.exit(3)),(e.message.includes("EACCES")||e.message.includes("permission denied"))&&(console.error(`\u274C Error: ${e.message}`),process.exit(4)),(e.message.includes("Invalid")||e.message.includes("outside vault")||e.message.includes("Not a"))&&(console.error(`\u274C Error: ${e.message}`),process.exit(2)),console.error(`\u274C Error: ${e.message}`),process.env.DEBUG&&console.error(e.stack),process.exit(1)}static handleWithMessage(e,t=1){console.error(`\u274C Error: ${e}`),process.exit(t)}};var Mv=st(Gn());var Rv=st(Gn());var Bi=class{static{o(this,"BaseCommandExecutor")}constructor(e){this.pathResolver=e.pathResolver,this.fsAdapter=e.fsAdapter,this.frontmatterService=e.frontmatterService,this.dryRun=e.dryRun}resolveAndValidate(e){let t=this.pathResolver.resolve(e);this.pathResolver.validate(t);let i=t.replace(this.pathResolver.getVaultRoot()+"/","");return{resolvedPath:t,relativePath:i}}getCurrentTimestamp(){return Rv.DateFormatter.toLocalTimestamp(new Date)}isAssetArchived(e){if(e?.exo__Asset_isArchived===!0)return!0;let t=e?.archived;if(t==null)return!1;if(typeof t=="boolean")return t;if(typeof t=="number")return t!==0;if(typeof t=="string"){let i=t.toLowerCase().trim();return i==="true"||i==="yes"||i==="1"}return!1}extractAliasesFromFrontmatter(e){let t=e.match(/aliases:\s*\n((?:  - .*\n?)*)/);return t?t[1].split(`
`).filter(n=>n.trim()).map(n=>n.replace(/^\s*-\s*/,"").trim()):[]}};var lo=class extends Bi{static{o(this,"StatusCommandExecutor")}constructor(e){super(e)}async executeStart(e){try{let{relativePath:t}=this.resolveAndValidate(e),i=await this.fsAdapter.readFile(t),n=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(i,"ems__Effort_status",'"[[ems__EffortStatusDoing]]"');s=this.frontmatterService.updateProperty(s,"ems__Effort_startTimestamp",n),await this.fsAdapter.updateFile(t,s),console.log(`\u2705 Started: ${e}`),console.log("   Status: Doing"),console.log(`   Start time: ${n}`),process.exit(0)}catch(t){rt.handle(t)}}async executeComplete(e){try{let{relativePath:t}=this.resolveAndValidate(e),i=await this.fsAdapter.readFile(t),n=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(i,"ems__Effort_status",'"[[ems__EffortStatusDone]]"');s=this.frontmatterService.updateProperty(s,"ems__Effort_endTimestamp",n),s=this.frontmatterService.updateProperty(s,"ems__Effort_resolutionTimestamp",n),await this.fsAdapter.updateFile(t,s),console.log(`\u2705 Completed: ${e}`),console.log("   Status: Done"),console.log(`   Completion time: ${n}`),process.exit(0)}catch(t){rt.handle(t)}}async executeTrash(e){try{let{relativePath:t}=this.resolveAndValidate(e),i=await this.fsAdapter.readFile(t),n=this.getCurrentTimestamp(),s=this.frontmatterService.updateProperty(i,"ems__Effort_status",'"[[ems__EffortStatusTrashed]]"');s=this.frontmatterService.updateProperty(s,"ems__Effort_resolutionTimestamp",n),await this.fsAdapter.updateFile(t,s),console.log(`\u2705 Trashed: ${e}`),console.log("   Status: Trashed"),console.log(`   Resolution time: ${n}`),process.exit(0)}catch(t){rt.handle(t)}}async executeArchive(e){try{let{relativePath:t}=this.resolveAndValidate(e),i=await this.fsAdapter.readFile(t),n=this.frontmatterService.updateProperty(i,"archived","true");n=this.frontmatterService.removeProperty(n,"aliases"),await this.fsAdapter.updateFile(t,n),console.log(`\u2705 Archived: ${e}`),console.log("   Archived: true"),console.log("   Aliases removed"),process.exit(0)}catch(t){rt.handle(t)}}async executeMoveToBacklog(e){try{await this.updateStatus(e,"ems__EffortStatusBacklog","Backlog"),process.exit(0)}catch(t){rt.handle(t)}}async executeMoveToAnalysis(e){try{await this.updateStatus(e,"ems__EffortStatusAnalysis","Analysis"),process.exit(0)}catch(t){rt.handle(t)}}async executeMoveToToDo(e){try{await this.updateStatus(e,"ems__EffortStatusToDo","ToDo"),process.exit(0)}catch(t){rt.handle(t)}}async updateStatus(e,t,i){let{relativePath:n}=this.resolveAndValidate(e),s=await this.fsAdapter.readFile(n),a=this.frontmatterService.updateProperty(s,"ems__Effort_status",`"[[${t}]]"`);await this.fsAdapter.updateFile(n,a),console.log(`\u2705 Moved to ${i}: ${e}`),console.log(`   Status: ${i}`)}};var It=[];for(let r=0;r<256;++r)It.push((r+256).toString(16).slice(1));function Iv(r,e=0){return(It[r[e+0]]+It[r[e+1]]+It[r[e+2]]+It[r[e+3]]+"-"+It[r[e+4]]+It[r[e+5]]+"-"+It[r[e+6]]+It[r[e+7]]+"-"+It[r[e+8]]+It[r[e+9]]+"-"+It[r[e+10]]+It[r[e+11]]+It[r[e+12]]+It[r[e+13]]+It[r[e+14]]+It[r[e+15]]).toLowerCase()}o(Iv,"unsafeStringify");var Nv=require("node:crypto");var pl=new Uint8Array(256),dl=pl.length;function Sm(){return dl>pl.length-16&&((0,Nv.randomFillSync)(pl),dl=0),pl.slice(dl,dl+=16)}o(Sm,"rng");var kv=require("node:crypto"),wm={randomUUID:kv.randomUUID};function tF(r,e,t){r=r||{};let i=r.random??r.rng?.()??Sm();if(i.length<16)throw new Error("Random bytes length must be >= 16");if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let n=0;n<16;++n)e[t+n]=i[n];return e}return Iv(i)}o(tF,"_v4");function rF(r,e,t){return wm.randomUUID&&!e&&!r?wm.randomUUID():tF(r,e,t)}o(rF,"v4");var Em=rF;var Qs=st(Gn());var fo=class extends Bi{static{o(this,"AssetCreationExecutor")}constructor(e){super(e)}async executeCreateTask(e,t,i={}){try{await this.createAsset(e,t,"ems__Task",i),process.exit(0)}catch(n){rt.handle(n)}}async executeCreateMeeting(e,t,i={}){try{await this.createAsset(e,t,"ems__Meeting",i),process.exit(0)}catch(n){rt.handle(n)}}async executeCreateProject(e,t,i={}){try{await this.createAsset(e,t,"ems__Project",i),process.exit(0)}catch(n){rt.handle(n)}}async executeCreateArea(e,t,i={}){try{await this.createAsset(e,t,"ems__Area",i),process.exit(0)}catch(n){rt.handle(n)}}async createAsset(e,t,i,n={}){if(!t||t.trim().length===0)throw new Error("Label cannot be empty");let s=t.trim(),{relativePath:a}=this.resolveAndValidate(e);if(await this.fsAdapter.fileExists(a))throw new Qs.FileAlreadyExistsError(e);let u=Em(),f=this.buildAssetFrontmatter(i,u,s,n),l=Qs.MetadataHelpers.buildFileContent(f);await this.fsAdapter.createFile(a,l),console.log(`\u2705 Created ${this.getAssetTypeName(i)}: ${e}`),console.log(`   UID: ${u}`),console.log(`   Label: ${s}`),console.log(`   Class: ${i}`)}buildAssetFrontmatter(e,t,i,n={}){let s=Qs.DateFormatter.toLocalTimestamp(new Date),a={exo__Asset_isDefinedBy:'"[[Ontology/EMS]]"',exo__Asset_uid:t,exo__Asset_label:i,exo__Asset_createdAt:s,exo__Instance_class:[`"[[${e}]]"`],aliases:[i]};return(e==="ems__Task"||e==="ems__Project"||e==="ems__Meeting")&&(a.ems__Effort_status='"[[ems__EffortStatusDraft]]"'),n.prototype&&(a.ems__Effort_prototype=`"[[${n.prototype}]]"`),n.area&&(a.ems__Effort_area=`"[[${n.area}]]"`),n.parent&&(a.ems__Effort_parent=`"[[${n.parent}]]"`),a}getAssetTypeName(e){return{ems__Task:"task",ems__Meeting:"meeting",ems__Project:"project",ems__Area:"area"}[e]||"asset"}};var Tm=st(require("path"));var jv=st(Gn());var ho=class extends Bi{static{o(this,"PropertyCommandExecutor")}constructor(e){super(e)}async executeRenameToUid(e){try{let{relativePath:t}=this.resolveAndValidate(e),i=await this.fsAdapter.getFileMetadata(t);if(!i.exo__Asset_uid)throw new Error("Asset missing exo__Asset_uid property");let n=Tm.default.basename(t,".md"),s=i.exo__Asset_uid;if(n===s&&(console.log(`\u2705 Already renamed: ${e}`),console.log(`   Current filename matches UID: ${s}.md`),process.exit(0)),!i.exo__Asset_label||i.exo__Asset_label.trim()===""){let u=await this.fsAdapter.readFile(t),f=this.frontmatterService.updateProperty(u,"exo__Asset_label",n),l=this.isAssetArchived(i),h=f;l||(h=this.frontmatterService.updateProperty(f,"aliases",`
  - ${n}`)),await this.fsAdapter.updateFile(t,h),console.log(`   Updated label: "${n}"`)}let a=Tm.default.dirname(t),c=a!=="."?`${a}/${s}.md`:`${s}.md`;await this.fsAdapter.renameFile(t,c),console.log("\u2705 Renamed to UID format"),console.log(`   Old: ${t}`),console.log(`   New: ${c}`),process.exit(0)}catch(t){rt.handle(t)}}async executeUpdateLabel(e,t){try{if(!t||t.trim().length===0)throw new Error("Label cannot be empty");let i=t.trim(),{relativePath:n}=this.resolveAndValidate(e),s=await this.fsAdapter.readFile(n),a=this.frontmatterService.updateProperty(s,"exo__Asset_label",i),c=this.frontmatterService.parse(a),u=this.extractAliasesFromFrontmatter(c.content);if(u.includes(i)||(u.length===0?a=this.frontmatterService.updateProperty(a,"aliases",`
  - ${i}`):a=this.frontmatterService.updateProperty(a,"aliases",`${u.map(f=>`
  - ${f}`).join("")}
  - ${i}`)),this.dryRun){if(console.log("\u{1F50D} DRY RUN: Preview of changes (not applied)"),console.log(`   File: ${e}`),console.log("   Changes:"),console.log(`     \u2022 exo__Asset_label: "${i}"`),u.includes(i))console.log("     \u2022 aliases: unchanged (label already present)");else{let f=u.length===0?[i]:[...u,i];console.log(`     \u2022 aliases: [${f.map(l=>`"${l}"`).join(", ")}]`)}console.log(`
\u{1F4A1} Run without --dry-run to apply changes`),process.exit(0)}await this.fsAdapter.updateFile(n,a),console.log("\u2705 Updated label"),console.log(`   File: ${e}`),console.log(`   New label: "${i}"`),console.log("   Aliases synchronized"),process.exit(0)}catch(i){rt.handle(i)}}async executeSchedule(e,t){try{await this.updatePlannedTimestamp(e,t,"ems__Effort_plannedStartTimestamp"),process.exit(0)}catch(i){rt.handle(i)}}async executeSetDeadline(e,t){try{await this.updatePlannedTimestamp(e,t,"ems__Effort_plannedEndTimestamp"),process.exit(0)}catch(i){rt.handle(i)}}async updatePlannedTimestamp(e,t,i){let{relativePath:n}=this.resolveAndValidate(e);if(!await this.fsAdapter.fileExists(n))throw new Error(`File not found: ${e}`);if(!/^\d{4}-\d{2}-\d{2}$/.test(t))throw new Error(`Invalid date format: ${t}. Expected YYYY-MM-DD (e.g., 2025-11-25)`);let a=jv.DateFormatter.toTimestampAtStartOfDay(t),c=await this.fsAdapter.readFile(n),u=this.frontmatterService.updateProperty(c,i,a);await this.fsAdapter.writeFile(n,u),console.log(`\u2705 ${i==="ems__Effort_plannedStartTimestamp"?"Scheduled":"Set deadline for"}: ${e}`),console.log(`   Date: ${t}`),console.log(`   Timestamp: ${a}`)}};var ml=class{static{o(this,"CommandExecutor")}constructor(e,t=!1){this.context={pathResolver:new hl(e),fsAdapter:new fl(e),frontmatterService:new Mv.FrontmatterService,dryRun:t},this.statusExecutor=new lo(this.context),this.creationExecutor=new fo(this.context),this.propertyExecutor=new ho(this.context)}async execute(e,t,i){try{let n=this.context.pathResolver.resolve(t);this.context.pathResolver.validate(n),await this.context.fsAdapter.readFile(n.replace(this.context.pathResolver.getVaultRoot()+"/","")),console.log("\u2705 Command infrastructure verified"),console.log(`   Command: ${e}`),console.log(`   File: ${n}`),console.log(`   Vault: ${this.context.pathResolver.getVaultRoot()}`),Object.keys(i).length>0&&console.log(`   Options: ${JSON.stringify(i,null,2)}`),console.log(`
\u{1F4DD} Note: Actual command execution will be implemented in follow-up issues.`),console.log("    This PR establishes the infrastructure foundation."),process.exit(0)}catch(n){rt.handle(n)}}getVaultRoot(){return this.context.pathResolver.getVaultRoot()}async executeStart(e){return this.statusExecutor.executeStart(e)}async executeComplete(e){return this.statusExecutor.executeComplete(e)}async executeTrash(e){return this.statusExecutor.executeTrash(e)}async executeArchive(e){return this.statusExecutor.executeArchive(e)}async executeMoveToBacklog(e){return this.statusExecutor.executeMoveToBacklog(e)}async executeMoveToAnalysis(e){return this.statusExecutor.executeMoveToAnalysis(e)}async executeMoveToToDo(e){return this.statusExecutor.executeMoveToToDo(e)}async executeCreateTask(e,t,i={}){return this.creationExecutor.executeCreateTask(e,t,i)}async executeCreateMeeting(e,t,i={}){return this.creationExecutor.executeCreateMeeting(e,t,i)}async executeCreateProject(e,t,i={}){return this.creationExecutor.executeCreateProject(e,t,i)}async executeCreateArea(e,t,i={}){return this.creationExecutor.executeCreateArea(e,t,i)}async executeRenameToUid(e){return this.propertyExecutor.executeRenameToUid(e)}async executeUpdateLabel(e,t){return this.propertyExecutor.executeUpdateLabel(e,t)}async executeSchedule(e,t){return this.propertyExecutor.executeSchedule(e,t)}async executeSetDeadline(e,t){return this.propertyExecutor.executeSetDeadline(e,t)}};function qv(){return new zi("command").description("Execute plugin command on single asset").argument("<command-name>","Command to execute (rename-to-uid, start, complete, schedule, set-deadline, etc.)").argument("<filepath>","Path to asset file (relative to vault root or absolute)").option("--vault <path>","Path to Obsidian vault",process.cwd()).option("--label <value>","Asset label (required for update-label and creation commands)").option("--prototype <uid>","Prototype UID for inheritance (creation commands)").option("--area <uid>","Area UID for effort linkage (creation commands)").option("--parent <uid>","Parent UID for effort linkage (creation commands)").option("--date <value>","Date in YYYY-MM-DD format (required for schedule and set-deadline commands)").option("--dry-run","Preview changes without modifying files").action(async(r,e,t)=>{let i=(0,Lv.resolve)(t.vault),n=new ml(i,t.dryRun);switch(r){case"rename-to-uid":await n.executeRenameToUid(e);break;case"update-label":t.label||(console.error("Error: --label option is required for update-label command"),console.error('Usage: exocortex command update-label <filepath> --label "<value>"'),process.exit(2)),await n.executeUpdateLabel(e,t.label);break;case"start":await n.executeStart(e);break;case"complete":await n.executeComplete(e);break;case"trash":await n.executeTrash(e);break;case"archive":await n.executeArchive(e);break;case"move-to-backlog":await n.executeMoveToBacklog(e);break;case"move-to-analysis":await n.executeMoveToAnalysis(e);break;case"move-to-todo":await n.executeMoveToToDo(e);break;case"create-task":t.label||(console.error("Error: --label option is required for create-task command"),console.error('Usage: exocortex command create-task <filepath> --label "<value>"'),process.exit(2)),await n.executeCreateTask(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent});break;case"create-meeting":t.label||(console.error("Error: --label option is required for create-meeting command"),console.error('Usage: exocortex command create-meeting <filepath> --label "<value>"'),process.exit(2)),await n.executeCreateMeeting(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent});break;case"create-project":t.label||(console.error("Error: --label option is required for create-project command"),console.error('Usage: exocortex command create-project <filepath> --label "<value>"'),process.exit(2)),await n.executeCreateProject(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent});break;case"create-area":t.label||(console.error("Error: --label option is required for create-area command"),console.error('Usage: exocortex command create-area <filepath> --label "<value>"'),process.exit(2)),await n.executeCreateArea(e,t.label,{prototype:t.prototype,area:t.area,parent:t.parent});break;case"schedule":t.date||(console.error("Error: --date option is required for schedule command"),console.error('Usage: exocortex command schedule <filepath> --date "YYYY-MM-DD"'),process.exit(2)),await n.executeSchedule(e,t.date);break;case"set-deadline":t.date||(console.error("Error: --date option is required for set-deadline command"),console.error('Usage: exocortex command set-deadline <filepath> --date "YYYY-MM-DD"'),process.exit(2)),await n.executeSetDeadline(e,t.date);break;default:await n.execute(r,e,t);break}})}o(qv,"commandCommand");var Uv=require("path");var $i=st(require("fs")),xm=st(require("path")),Vv=require("events");var iF={watch:$i.default.watch.bind($i.default),existsSync:$i.default.existsSync.bind($i.default),statSync:$i.default.statSync.bind($i.default),readFileSync:$i.default.readFileSync.bind($i.default)},gl=class extends Vv.EventEmitter{constructor(t,i={}){super();this.watcher=null;this.debounceTimers=new Map;this.isRunning=!1;this.vaultPath=xm.default.resolve(t),this.fsAdapter=i.fsAdapter??iF,this.options={pattern:i.pattern??"**/*.md",assetType:i.assetType??"",debounceMs:i.debounceMs??100,recursive:i.recursive??!0}}static{o(this,"FileSystemWatcher")}start(){this.isRunning||(this.watcher=this.fsAdapter.watch(this.vaultPath,{recursive:this.options.recursive},(t,i)=>{i&&this.handleFileEvent(t,i.toString())}),this.watcher.on("error",t=>{this.emit("error",t)}),this.isRunning=!0,this.emit("started"))}stop(){if(this.isRunning){for(let t of this.debounceTimers.values())clearTimeout(t);this.debounceTimers.clear(),this.watcher&&(this.watcher.close(),this.watcher=null),this.isRunning=!1,this.emit("stopped")}}isWatching(){return this.isRunning}handleFileEvent(t,i){let n=xm.default.join(this.vaultPath,i),s=i;if(!this.matchesPattern(s))return;let a=this.debounceTimers.get(n);a&&clearTimeout(a);let c=setTimeout(()=>{this.debounceTimers.delete(n),this.processFileEvent(n,s)},this.options.debounceMs);this.debounceTimers.set(n,c)}processFileEvent(t,i){let n=this.fsAdapter.existsSync(t),s;if(!n)s="delete";else{let u=this.fsAdapter.statSync(t);s=Date.now()-u.birthtimeMs<1e3?"create":"modify"}let a;if(n&&t.endsWith(".md")&&(a=this.extractAssetType(t)),this.options.assetType&&a!==this.options.assetType)return;let c={type:s,path:t,relativePath:i,timestamp:new Date().toISOString(),assetType:a};this.emit("change",c)}matchesPattern(t){return this.options.pattern?Rt(t,this.options.pattern):!0}extractAssetType(t){try{let n=this.fsAdapter.readFileSync(t,"utf-8").match(/^---\n([\s\S]*?)\n---/);if(!n)return;let a=n[1].match(/exo__Instance_class:\s*(?:\[?"?\[\[([^\]]+)\]\]"?\]?|"?\[\[([^\]]+)\]\]"?)/);return a?a[1]||a[2]:void 0}catch{return}}};var Am=st(require("fs"));function Bv(){return new zi("watch").description("Watch vault for file changes and emit NDJSON events").option("--vault <path>","Path to Obsidian vault",process.cwd()).option("--pattern <glob>","Glob pattern to filter files (e.g., '*.md', 'tasks/**')").option("--asset-type <type>","Filter by asset type (e.g., 'ems__Task', 'ems__Project')").option("--debounce <ms>","Debounce interval in milliseconds","100").action(async r=>{let e=(0,Uv.resolve)(r.vault);Am.default.existsSync(e)||(console.error(`Error: Vault path does not exist: ${e}`),process.exit(3)),Am.default.statSync(e).isDirectory()||(console.error(`Error: Vault path is not a directory: ${e}`),process.exit(2));let t=parseInt(r.debounce?.toString()??"100",10);(isNaN(t)||t<0)&&(console.error("Error: --debounce must be a non-negative integer"),process.exit(2));let i=new gl(e,{pattern:r.pattern,assetType:r.assetType,debounceMs:t});i.on("change",s=>{console.log(JSON.stringify(s))}),i.on("error",s=>{console.error(JSON.stringify({type:"error",message:s.message,timestamp:new Date().toISOString()}))});let n=o(()=>{i.stop(),process.exit(0)},"shutdown");process.on("SIGINT",n),process.on("SIGTERM",n),console.error(`Watching vault: ${e}`),r.pattern&&console.error(`  Pattern filter: ${r.pattern}`),r.assetType&&console.error(`  Asset type filter: ${r.assetType}`),console.error(`  Debounce: ${t}ms`),console.error("Press Ctrl+C to stop"),i.start()})}o(Bv,"watchCommand");var po=new zi;po.name("exocortex").description("CLI tool for Exocortex knowledge management system").version("0.1.0");po.command("sparql").description("SPARQL query execution").addCommand(R_());po.addCommand(qv());po.addCommand(Bv());po.parse();
/*! Bundled license information:

reflect-metadata/Reflect.js:
  (*! *****************************************************************************
  Copyright (C) Microsoft. All rights reserved.
  Licensed under the Apache License, Version 2.0 (the "License"); you may not use
  this file except in compliance with the License. You may obtain a copy of the
  License at http://www.apache.org/licenses/LICENSE-2.0
  
  THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
  WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
  MERCHANTABLITY OR NON-INFRINGEMENT.
  
  See the Apache Version 2.0 License for specific language governing permissions
  and limitations under the License.
  ***************************************************************************** *)

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
