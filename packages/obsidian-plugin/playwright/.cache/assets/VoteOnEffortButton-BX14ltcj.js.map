{"version":3,"file":"VoteOnEffortButton-BX14ltcj.js","sources":["../../../src/presentation/components/VoteOnEffortButton.tsx"],"sourcesContent":["import React from \"react\";\nimport { TFile } from \"obsidian\";\nimport { canVoteOnEffort, CommandVisibilityContext } from '@exocortex/core';\n\nexport interface VoteOnEffortButtonProps {\n  instanceClass: string | string[] | null;\n  metadata: Record<string, any>;\n  isArchived: boolean;\n  sourceFile: TFile;\n  onVote: () => Promise<void>;\n}\n\nexport const VoteOnEffortButton: React.FC<VoteOnEffortButtonProps> = ({\n  instanceClass,\n  metadata,\n  isArchived,\n  sourceFile,\n  onVote,\n}) => {\n  // Use centralized visibility logic from CommandVisibility\n  const shouldShowButton = React.useMemo(() => {\n    const context: CommandVisibilityContext = {\n      instanceClass,\n      currentStatus: null,\n      metadata,\n      isArchived,\n      currentFolder: sourceFile.parent?.path || \"\",\n      expectedFolder: null,\n    };\n    return canVoteOnEffort(context);\n  }, [instanceClass, metadata, isArchived, sourceFile]);\n\n  // Extract current vote count from metadata\n  const currentVotes = React.useMemo(() => {\n    const votes = metadata?.ems__Effort_votes;\n    if (typeof votes === \"number\") {\n      return votes;\n    }\n    return 0;\n  }, [metadata]);\n\n  const handleClick = async (e: React.MouseEvent) => {\n    e.preventDefault();\n    await onVote();\n  };\n\n  if (!shouldShowButton) {\n    return null;\n  }\n\n  return (\n    <button\n      className=\"exocortex-vote-btn\"\n      onClick={handleClick}\n      type=\"button\"\n      title={`Vote on this effort (current votes: ${currentVotes})`}\n    >\n      {currentVotes > 0 ? `Vote (${currentVotes})` : \"Vote\"}\n    </button>\n  );\n};\n"],"names":["jsx"],"mappings":";;;;;AAYO,MAAM,qBAAwD,CAAC;AAAA,EACpE,aAAA;AAAA,EACA,QAAA;AAAA,EACA,UAAA;AAAA,EACA,UAAA;AAAA,EACA;AACF,CAAA,KAAM;AAEJ,EAAA,MAAM,gBAAA,GAAmB,KAAA,CAAM,OAAA,CAAQ,MAAM;AAC3C,IAAA,MAAM,OAAA,GAAoC;AAAA,MACxC,aAAA;AAAA,MACA,aAAA,EAAe,IAAA;AAAA,MACf,QAAA;AAAA,MACA,UAAA;AAAA,MACA,aAAA,EAAe,UAAA,CAAW,MAAA,EAAQ,IAAA,IAAQ,EAAA;AAAA,MAC1C,cAAA,EAAgB;AAAA,KAClB;AACA,IAAA,OAAO,gBAAgB,OAAO,CAAA;AAAA,EAChC,GAAG,CAAC,aAAA,EAAe,QAAA,EAAU,UAAA,EAAY,UAAU,CAAC,CAAA;AAGpD,EAAA,MAAM,YAAA,GAAe,KAAA,CAAM,OAAA,CAAQ,MAAM;AACvC,IAAA,MAAM,QAAQ,QAAA,EAAU,iBAAA;AACxB,IAAA,IAAI,OAAO,UAAU,QAAA,EAAU;AAC7B,MAAA,OAAO,KAAA;AAAA,IACT;AACA,IAAA,OAAO,CAAA;AAAA,EACT,CAAA,EAAG,CAAC,QAAQ,CAAC,CAAA;AAEb,EAAA,MAAM,WAAA,GAAc,OAAO,CAAA,KAAwB;AACjD,IAAA,CAAA,CAAE,cAAA,EAAe;AACjB,IAAA,MAAM,MAAA,EAAO;AAAA,EACf,CAAA;AAEA,EAAA,IAAI,CAAC,gBAAA,EAAkB;AACrB,IAAA,OAAO,IAAA;AAAA,EACT;AAEA,EAAA,uBACEA,qBAAA;AAAA,IAAC,QAAA;AAAA,IAAA;AAAA,MACC,SAAA,EAAU,oBAAA;AAAA,MACV,OAAA,EAAS,WAAA;AAAA,MACT,IAAA,EAAK,QAAA;AAAA,MACL,KAAA,EAAO,uCAAuC,YAAY,CAAA,CAAA,CAAA;AAAA,MAEzD,QAAA,EAAA,YAAA,GAAe,CAAA,GAAI,CAAA,MAAA,EAAS,YAAY,CAAA,CAAA,CAAA,GAAM;AAAA;AAAA,GACjD;AAEJ;;;;"}