{"version":3,"file":"ArchiveTaskButton-BUdm6yXa.js","sources":["../../../src/presentation/components/ArchiveTaskButton.tsx"],"sourcesContent":["import React from \"react\";\nimport { TFile } from \"obsidian\";\nimport { canArchiveTask, CommandVisibilityContext } from '@exocortex/core';\n\nexport interface ArchiveTaskButtonProps {\n  instanceClass: string | string[] | null;\n  currentStatus: string | string[] | null;\n  isArchived: boolean | string | number | null;\n  sourceFile: TFile;\n  onArchive: () => Promise<void>;\n}\n\nexport const ArchiveTaskButton: React.FC<ArchiveTaskButtonProps> = ({\n  instanceClass,\n  currentStatus,\n  isArchived,\n  sourceFile,\n  onArchive,\n}) => {\n  // Use centralized visibility logic from CommandVisibility\n  const shouldShowButton = React.useMemo(() => {\n    // Normalize isArchived to boolean (handle string/number/boolean)\n    const normalizedArchived = Boolean(\n      isArchived === true ||\n        isArchived === \"true\" ||\n        isArchived === \"yes\" ||\n        isArchived === 1,\n    );\n\n    const context: CommandVisibilityContext = {\n      instanceClass,\n      currentStatus,\n      metadata: {},\n      isArchived: normalizedArchived,\n      currentFolder: sourceFile.parent?.path || \"\",\n      expectedFolder: null,\n    };\n    return canArchiveTask(context);\n  }, [instanceClass, currentStatus, isArchived, sourceFile]);\n\n  const handleClick = async (e: React.MouseEvent) => {\n    e.preventDefault();\n    await onArchive();\n  };\n\n  if (!shouldShowButton) {\n    return null;\n  }\n\n  return (\n    <button\n      className=\"exocortex-archive-task-btn\"\n      onClick={handleClick}\n      type=\"button\"\n    >\n      To Archive\n    </button>\n  );\n};\n"],"names":["jsx"],"mappings":";;;;;AAYO,MAAM,oBAAsD,CAAC;AAAA,EAClE,aAAA;AAAA,EACA,aAAA;AAAA,EACA,UAAA;AAAA,EACA,UAAA;AAAA,EACA;AACF,CAAA,KAAM;AAEJ,EAAA,MAAM,gBAAA,GAAmB,KAAA,CAAM,OAAA,CAAQ,MAAM;AAE3C,IAAA,MAAM,kBAAA,GAAqB,OAAA;AAAA,MACzB,eAAe,IAAA,IACb,UAAA,KAAe,MAAA,IACf,UAAA,KAAe,SACf,UAAA,KAAe;AAAA,KACnB;AAEA,IAAA,MAAM,OAAA,GAAoC;AAAA,MACxC,aAAA;AAAA,MACA,aAAA;AAAA,MACA,UAAU,EAAC;AAAA,MACX,UAAA,EAAY,kBAAA;AAAA,MACZ,aAAA,EAAe,UAAA,CAAW,MAAA,EAAQ,IAAA,IAAQ,EAAA;AAAA,MAC1C,cAAA,EAAgB;AAAA,KAClB;AACA,IAAA,OAAO,eAAe,OAAO,CAAA;AAAA,EAC/B,GAAG,CAAC,aAAA,EAAe,aAAA,EAAe,UAAA,EAAY,UAAU,CAAC,CAAA;AAEzD,EAAA,MAAM,WAAA,GAAc,OAAO,CAAA,KAAwB;AACjD,IAAA,CAAA,CAAE,cAAA,EAAe;AACjB,IAAA,MAAM,SAAA,EAAU;AAAA,EAClB,CAAA;AAEA,EAAA,IAAI,CAAC,gBAAA,EAAkB;AACrB,IAAA,OAAO,IAAA;AAAA,EACT;AAEA,EAAA,uBACEA,qBAAA;AAAA,IAAC,QAAA;AAAA,IAAA;AAAA,MACC,SAAA,EAAU,4BAAA;AAAA,MACV,OAAA,EAAS,WAAA;AAAA,MACT,IAAA,EAAK,QAAA;AAAA,MACN,QAAA,EAAA;AAAA;AAAA,GAED;AAEJ;;;;"}