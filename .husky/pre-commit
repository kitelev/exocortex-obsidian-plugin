# Check for version conflicts ONLY on main branch
# Feature branches skip this check (versioning handled by pr-auto-version workflow)
BRANCH=$(git rev-parse --abbrev-ref HEAD)
if [ "$BRANCH" = "main" ]; then
  echo "ğŸ” Checking version uniqueness (main branch)..."
  ./.claude/scripts/check-version-conflict.sh || exit 1
else
  echo "â­ï¸  Skipping version check (feature branch: $BRANCH)"
  echo "   Version will be auto-bumped after PR merge by pr-auto-version workflow"
fi

# Run lint-staged (ESLint + related tests for staged files only)
echo "ğŸš€ Running lint-staged (affected files only)..."
npx lint-staged || exit 1

# Check BDD coverage (fast static check)
echo "ğŸ“Š Checking BDD coverage..."
npm run bdd:check || exit 1

echo "âœ… All pre-commit checks passed!"
echo "   Note: Full test suite (unit + UI + component + E2E) runs in CI"
