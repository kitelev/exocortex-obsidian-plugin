# language: ru
Функция: Кликабельные ссылки в колонке Instance Class

  Как пользователь Exocortex плагина
  Я хочу видеть Instance Class как кликабельные ссылки
  Чтобы быстро переходить к определениям классов онтологии

  Правило: Instance Class всегда отображается как internal-link

    Сценарий: Простое значение Instance Class
      Дано существует заметка "Задача" с метаданными:
        | Свойство            | Значение      |
        | exo__Instance_class | [[ems__Task]] |
      И существует заметка класса "ems__Task"
      Когда я добавляю Universal Layout таблицу в другую заметку
      И заметка "Задача" отображается в таблице
      Тогда в колонке "exo__Instance_class" я вижу:
        | Элемент      | Значение       |
        | Тег          | <a>            |
        | Текст        | ems__Task      |
        | Класс        | internal-link  |
        | href         | ems__Task      |
      И я НЕ вижу текст "[[ems__Task]]"
      И я НЕ вижу символы "[[" или "]]"

    Сценарий: Массив значений Instance Class
      Дано существует заметка "Гибридный объект" с метаданными:
        | Свойство            | Значение                          |
        | exo__Instance_class | [[ems__Task]], [[ems__Document]]  |
      Когда заметка "Гибридный объект" отображается в таблице
      Тогда в колонке "exo__Instance_class" я вижу элемент <a>
      И элемент <a> содержит текст "ems__Task"
      И элемент <a> имеет класс "internal-link"
      Примечание: Отображается только первое значение из массива

    Сценарий: Клик на Instance Class ссылку
      Дано существует заметка "Задача 1" с Instance Class "[[ems__Task]]"
      И существует файл класса "ems__Task.md"
      И заметка "Задача 1" отображается в Universal Layout таблице
      Когда я кликаю на ссылку "ems__Task" в колонке "exo__Instance_class"
      Тогда открывается заметка "ems__Task"
      И я вижу определение класса ems__Task

    Сценарий: Отсутствующий Instance Class
      Дано существует заметка "Без Класса" без метаданных
      Когда заметка "Без Класса" отображается в таблице
      Тогда в колонке "exo__Instance_class" я вижу текст "-"
      И НЕ вижу элемент <a>

    Сценарий: Instance Class с префиксом
      Дано существует заметка "Проект EMS" с метаданными:
        | Свойство            | Значение        |
        | exo__Instance_class | [[ems__Project]] |
      Когда заметка отображается в таблице
      Тогда ссылка Instance Class содержит полное имя "ems__Project"
      И префикс "ems__" сохраняется в тексте ссылки

  Правило: Instance Class в групповых таблицах

    Сценарий: Группировка по Instance Class
      Дано существуют заметки:
        | Название  | exo__Instance_class |
        | Задача 1  | [[ems__Task]]       |
        | Задача 2  | [[ems__Task]]       |
        | Проект 1  | [[ems__Project]]    |
      Когда я добавляю блок с конфигурацией:
        """yaml
        layout: table
        groupByProperty: true
        showProperties:
          - exo__Instance_class
        """
      Тогда я вижу группу "ems__Task" с 2 заметками
      И я вижу группу "ems__Project" с 1 заметкой
      И в каждой группе колонка "exo__Instance_class" содержит кликабельные ссылки

    Сценарий: Instance Class в заголовке группы
      Дано существуют заметки с Instance Class "[[ems__Task]]"
      И включена группировка по свойствам
      Когда рендерится групповая таблица
      Тогда заголовок группы может содержать ссылку на "ems__Task"
      И ссылка в заголовке также является кликабельной

  Правило: Форматирование Instance Class

    Сценарий: Удаление wiki-link синтаксиса
      Дано значение Instance Class в frontmatter: "[[ems__Task]]"
      Когда значение обрабатывается для отображения
      Тогда результат: "ems__Task"
      И НЕ содержит "[[" или "]]"

    Сценарий: Обработка пустых значений
      Дано заметка имеет Instance Class со значением:
        | Входное значение | Отображаемый результат |
        | null             | -                      |
        | undefined        | -                      |
        | ""               | -                      |
        | []               | -                      |
      Тогда для всех пустых значений отображается "-"
      И НЕ создаётся элемент <a>

    Сценарий: Обработка некорректных значений
      Дано заметка имеет Instance Class: "simple-text-without-brackets"
      Когда значение отображается в таблице
      Тогда создаётся ссылка с текстом "simple-text-without-brackets"
      И ссылка остаётся кликабельной
      Примечание: Даже без скобок значение обрабатывается как ссылка
