9277701fb2509d6a69a981ebc751171b
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DIContainer = void 0;
const Container_1 = require("../../application/core/Container");
// Infrastructure Adapters
const ObsidianNotificationService_1 = require("../adapters/ObsidianNotificationService");
const ObsidianFileSystemAdapter_1 = require("../adapters/ObsidianFileSystemAdapter");
const ObsidianUIAdapter_1 = require("../adapters/ObsidianUIAdapter");
const ObsidianVaultAdapter_1 = require("../adapters/ObsidianVaultAdapter");
const ObsidianAssetRepository_1 = require("../repositories/ObsidianAssetRepository");
const ObsidianOntologyRepository_1 = require("../repositories/ObsidianOntologyRepository");
const ObsidianClassViewRepository_1 = require("../repositories/ObsidianClassViewRepository");
const ObsidianButtonRepository_1 = require("../repositories/ObsidianButtonRepository");
const ObsidianClassLayoutRepository_1 = require("../repositories/ObsidianClassLayoutRepository");
// Use Cases
const CreateAssetUseCase_1 = require("../../application/use-cases/CreateAssetUseCase");
const CreateChildTaskUseCase_1 = require("../../application/use-cases/CreateChildTaskUseCase");
const RenderClassButtonsUseCase_1 = require("../../application/use-cases/RenderClassButtonsUseCase");
const ExecuteButtonCommandUseCase_1 = require("../../application/use-cases/ExecuteButtonCommandUseCase");
const PropertyEditingUseCase_1 = require("../../application/use-cases/PropertyEditingUseCase");
const QueryTemplateUseCase_1 = require("../../application/use-cases/QueryTemplateUseCase");
const ObsidianCommandExecutor_1 = require("../services/ObsidianCommandExecutor");
const ErrorHandlerService_1 = require("../../application/services/ErrorHandlerService");
const SPARQLAutocompleteService_1 = require("../../application/services/SPARQLAutocompleteService");
const OntologyProvisioningService_1 = require("../../domain/services/OntologyProvisioningService");
const PropertyCacheService_1 = require("../../domain/services/PropertyCacheService");
const CircuitBreakerService_1 = require("../resilience/CircuitBreakerService");
const GraphSuggestionRepository_1 = require("../repositories/GraphSuggestionRepository");
const ObsidianQueryTemplateRepository_1 = require("../repositories/ObsidianQueryTemplateRepository");
const QueryEngineFactory_1 = require("../query-engines/QueryEngineFactory");
const QueryEngineService_1 = require("../../application/services/QueryEngineService");
const QueryEngineConfig_1 = require("../../domain/entities/QueryEngineConfig");
const RDFService_1 = require("../../application/services/RDFService");
// Presentation
const ButtonRenderer_1 = require("../../presentation/components/ButtonRenderer");
const PropertyRenderer_1 = require("../../presentation/components/PropertyRenderer");
const LayoutRenderer_1 = require("../../presentation/renderers/LayoutRenderer");
// Mobile Components
const MobileUIComponents_1 = require("../../presentation/components/MobileUIComponents");
const TouchGraphController_1 = require("../../presentation/mobile/TouchGraphController");
const MobileModalAdapter_1 = require("../../presentation/mobile/MobileModalAdapter");
const MobilePerformanceOptimizer_1 = require("../optimizers/MobilePerformanceOptimizer");
const OfflineDataManager_1 = require("../offline/OfflineDataManager");
const PlatformDetector_1 = require("../utils/PlatformDetector");
/**
 * Dependency Injection Container Setup
 * Following Clean Architecture - wires up all dependencies
 */
class DIContainer {
    constructor(app) {
        this.app = app;
        this.container = Container_1.Container.getInstance();
        this.registerDependencies();
    }
    static initialize(app, plugin) {
        if (!DIContainer.instance) {
            DIContainer.instance = new DIContainer(app);
        }
        else {
            // Always update app and plugin references
            DIContainer.instance.app = app;
            if (plugin) {
                DIContainer.instance.plugin = plugin;
            }
            // Re-register dependencies to ensure they use the new app instance
            DIContainer.instance.container.clear();
            DIContainer.instance.registerDependencies();
        }
        if (plugin && !DIContainer.instance.plugin) {
            DIContainer.instance.plugin = plugin;
        }
        return DIContainer.instance;
    }
    static getInstance() {
        if (!DIContainer.instance) {
            throw new Error("DIContainer not initialized. Call initialize(app) first.");
        }
        return DIContainer.instance;
    }
    /**
     * Async initialize method for backward compatibility
     */
    async initialize(app) {
        // Already initialized in constructor, this is for backward compatibility
        return Promise.resolve();
    }
    /**
     * Reset the container instance (for testing purposes)
     */
    static reset() {
        DIContainer.instance = null;
    }
    registerDependencies() {
        // Register Obsidian App
        this.container.register("App", () => this.app);
        // Register Port Implementations
        this.container.register("INotificationService", () => new ObsidianNotificationService_1.ObsidianNotificationService());
        this.container.register("IFileSystemAdapter", () => new ObsidianFileSystemAdapter_1.ObsidianFileSystemAdapter(this.app));
        this.container.register("IUIAdapter", () => new ObsidianUIAdapter_1.ObsidianUIAdapter(this.app));
        this.container.register("IVaultAdapter", () => new ObsidianVaultAdapter_1.ObsidianVaultAdapter(this.app.vault, this.app.metadataCache));
        // Register Repositories
        this.container.register("IAssetRepository", () => new ObsidianAssetRepository_1.ObsidianAssetRepository(this.app));
        this.container.register("IOntologyRepository", () => new ObsidianOntologyRepository_1.ObsidianOntologyRepository(this.app));
        this.container.register("IClassViewRepository", () => new ObsidianClassViewRepository_1.ObsidianClassViewRepository(this.app));
        this.container.register("IButtonRepository", () => new ObsidianButtonRepository_1.ObsidianButtonRepository(this.app));
        this.container.register("IClassLayoutRepository", () => new ObsidianClassLayoutRepository_1.ObsidianClassLayoutRepository(this.app, this.plugin?.settings?.layoutsFolderPath || "layouts"));
        this.container.register("IQueryTemplateRepository", () => new ObsidianQueryTemplateRepository_1.ObsidianQueryTemplateRepository(this.app, this.plugin?.settings?.templatesPath || ".exocortex/templates", this.plugin?.settings?.templateUsageDataPath ||
            ".exocortex/template-usage.json"));
        // Register Services
        this.container.register("ICommandExecutor", () => new ObsidianCommandExecutor_1.ObsidianCommandExecutor(this.app, this.container.resolve("IAssetRepository"), this.container.resolve("CreateChildTaskUseCase")));
        // Register Error Handler Service
        this.container.register("ErrorHandlerService", () => new ErrorHandlerService_1.ErrorHandlerService({
            showUserNotification: true,
            logToConsole: true,
            trackMetrics: true,
            autoRecover: false,
        }, this.container.resolve("INotificationService")));
        // Register Autocomplete Services
        this.container.register("ISuggestionRepository", () => {
            // Need to get graph instance - will be provided by plugin
            const graph = this.plugin?.graph || null;
            return new GraphSuggestionRepository_1.GraphSuggestionRepository(graph);
        });
        this.container.register("SPARQLAutocompleteService", () => new SPARQLAutocompleteService_1.SPARQLAutocompleteService(this.container.resolve("ISuggestionRepository"), this.plugin?.graph || null));
        // Register Query Engine Services
        this.container.register("QueryEngineFactory", () => {
            const factory = new QueryEngineFactory_1.QueryEngineFactory(this.app);
            // Try to get Dataview and Datacore APIs if available
            const plugins = this.app.plugins;
            const dataviewApi = plugins?.plugins?.dataview?.api;
            const datacoreApi = plugins?.plugins?.datacore?.api;
            factory.updateApis(dataviewApi, datacoreApi);
            return factory;
        });
        this.container.register("QueryEngineConfig", () => {
            // Create default config, could be overridden by plugin settings
            const configResult = QueryEngineConfig_1.QueryEngineConfig.createDefault();
            return configResult.getValue();
        });
        this.container.register("QueryEngineService", () => new QueryEngineService_1.QueryEngineService(this.container.resolve("QueryEngineFactory"), this.container.resolve("QueryEngineConfig")));
        // Register RDF Service
        this.container.register("RDFService", () => new RDFService_1.RDFService(this.container.resolve("INotificationService"), this.container.resolve("IFileSystemAdapter")));
        // Register Domain Services
        this.container.register("OntologyProvisioningService", () => new OntologyProvisioningService_1.OntologyProvisioningService(this.container.resolve("IOntologyRepository"), this.container.resolve("IVaultAdapter")));
        this.container.register("PropertyCacheService", () => PropertyCacheService_1.PropertyCacheService.getInstance());
        this.container.register("CircuitBreakerService", () => CircuitBreakerService_1.CircuitBreakerService.getInstance());
        // Register Use Cases
        this.container.register("CreateAssetUseCase", () => new CreateAssetUseCase_1.CreateAssetUseCase(this.container.resolve("IAssetRepository"), this.container.resolve("IOntologyRepository"), this.container.resolve("OntologyProvisioningService")));
        this.container.register("CreateChildTaskUseCase", () => new CreateChildTaskUseCase_1.CreateChildTaskUseCase(this.container.resolve("IAssetRepository"), this.container.resolve("CreateAssetUseCase")));
        this.container.register("RenderClassButtonsUseCase", () => new RenderClassButtonsUseCase_1.RenderClassButtonsUseCase(this.container.resolve("IClassViewRepository"), this.container.resolve("IButtonRepository")));
        this.container.register("ExecuteButtonCommandUseCase", () => new ExecuteButtonCommandUseCase_1.ExecuteButtonCommandUseCase(this.container.resolve("IButtonRepository"), this.container.resolve("ICommandExecutor")));
        this.container.register("PropertyEditingUseCase", () => new PropertyEditingUseCase_1.PropertyEditingUseCase(this.container.resolve("IAssetRepository"), this.plugin || this.app));
        this.container.register("QueryTemplateUseCase", () => new QueryTemplateUseCase_1.QueryTemplateUseCase(this.container.resolve("IQueryTemplateRepository")));
        // Register Presentation Components
        this.container.register("ButtonRenderer", () => new ButtonRenderer_1.ButtonRenderer(this.app, this.container.resolve("RenderClassButtonsUseCase"), this.container.resolve("ExecuteButtonCommandUseCase")));
        this.container.register("PropertyRenderer", () => new PropertyRenderer_1.PropertyRenderer(this.app, this.container.resolve("PropertyEditingUseCase")));
        this.container.register("LayoutRenderer", () => new LayoutRenderer_1.LayoutRenderer(this.app, this.container.resolve("IClassLayoutRepository")));
        // Register Mobile Components
        this.container.register("MobilePerformanceOptimizer", () => MobilePerformanceOptimizer_1.MobilePerformanceOptimizer.getInstance({
            maxMemoryMB: PlatformDetector_1.PlatformDetector.isMobile() ? 50 : 200,
            maxCacheEntries: PlatformDetector_1.PlatformDetector.isMobile() ? 100 : 500,
            batchSize: PlatformDetector_1.PlatformDetector.isMobile() ? 10 : 50,
            debounceMs: PlatformDetector_1.PlatformDetector.isMobile() ? 500 : 200,
            enableGCHints: PlatformDetector_1.PlatformDetector.isMobile(),
            enableLazyLoading: true,
            virtualScrollThreshold: 100,
        }));
        this.container.register("OfflineDataManager", () => new OfflineDataManager_1.OfflineDataManager({
            strategy: "indexeddb",
            maxStorageMB: PlatformDetector_1.PlatformDetector.isMobile() ? 50 : 200,
            maxAge: 7 * 24 * 60 * 60 * 1000,
            autoSync: true,
            syncIntervalMs: 30000,
            enableConflictResolution: true,
            enableCompression: PlatformDetector_1.PlatformDetector.isMobile(),
        }));
        this.container.register("MobileUIComponents", () => new MobileUIComponents_1.MobileUIComponents(this.container.resolve("MobilePerformanceOptimizer")));
        // TouchGraphController is typically created per graph instance,
        // so we register a factory function
        this.container.register("TouchGraphControllerClass", () => TouchGraphController_1.TouchGraphController);
        // MobileModalAdapter is typically created per modal,
        // so we register a factory function
        this.container.register("MobileModalAdapterClass", () => MobileModalAdapter_1.MobileModalAdapter);
    }
    /**
     * Resolve a dependency from the container
     */
    resolve(token) {
        return this.container.resolve(token);
    }
    /**
     * Get specific use cases for common operations
     */
    getCreateAssetUseCase() {
        return this.resolve("CreateAssetUseCase");
    }
    getRenderButtonsUseCase() {
        return this.resolve("RenderClassButtonsUseCase");
    }
    getExecuteButtonCommandUseCase() {
        return this.resolve("ExecuteButtonCommandUseCase");
    }
    getButtonRenderer() {
        return this.resolve("ButtonRenderer");
    }
    getPropertyRenderer() {
        return this.resolve("PropertyRenderer");
    }
    getLayoutRenderer() {
        return this.resolve("LayoutRenderer");
    }
    getPropertyEditingUseCase() {
        return this.resolve("PropertyEditingUseCase");
    }
    getQueryTemplateUseCase() {
        return this.resolve("QueryTemplateUseCase");
    }
    getQueryTemplateRepository() {
        return this.resolve("IQueryTemplateRepository");
    }
    getQueryEngineService() {
        return this.resolve("QueryEngineService");
    }
    getQueryEngineFactory() {
        return this.resolve("QueryEngineFactory");
    }
    getRDFService() {
        return this.resolve("RDFService");
    }
    // Mobile Components Getters
    getMobilePerformanceOptimizer() {
        return this.resolve("MobilePerformanceOptimizer");
    }
    getOfflineDataManager() {
        return this.resolve("OfflineDataManager");
    }
    getMobileUIComponents() {
        return this.resolve("MobileUIComponents");
    }
    getTouchGraphControllerClass() {
        return this.resolve("TouchGraphControllerClass");
    }
    getMobileModalAdapterClass() {
        return this.resolve("MobileModalAdapterClass");
    }
    /**
     * Clean up resources
     */
    dispose() {
        // Clean up any resources if needed
        this.container.clear();
    }
}
exports.DIContainer = DIContainer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vc3JjL2luZnJhc3RydWN0dXJlL2NvbnRhaW5lci9ESUNvbnRhaW5lci50cyIsIm1hcHBpbmdzIjoiOzs7QUFDQSxnRUFBNkQ7QUFRN0QsMEJBQTBCO0FBQzFCLHlGQUFzRjtBQUN0RixxRkFBa0Y7QUFDbEYscUVBQWtFO0FBQ2xFLDJFQUF3RTtBQVF4RSxxRkFBa0Y7QUFDbEYsMkZBQXdGO0FBQ3hGLDZGQUEwRjtBQUMxRix1RkFBb0Y7QUFDcEYsaUdBQThGO0FBRTlGLFlBQVk7QUFDWix1RkFBb0Y7QUFDcEYsK0ZBQTRGO0FBQzVGLHFHQUFrRztBQUNsRyx5R0FBc0c7QUFDdEcsK0ZBQTRGO0FBQzVGLDJGQUF3RjtBQUl4RixpRkFBOEU7QUFDOUUsd0ZBQXFGO0FBQ3JGLG9HQUFpRztBQUNqRyxtR0FBZ0c7QUFDaEcscUZBQWtGO0FBQ2xGLCtFQUE0RTtBQUU1RSx5RkFBc0Y7QUFFdEYscUdBQWtHO0FBQ2xHLDRFQUF5RTtBQUN6RSxzRkFBbUY7QUFDbkYsK0VBQTRFO0FBQzVFLHNFQUFtRTtBQUVuRSxlQUFlO0FBQ2YsaUZBQThFO0FBQzlFLHFGQUFrRjtBQUNsRixnRkFBNkU7QUFFN0Usb0JBQW9CO0FBQ3BCLHlGQUFzRjtBQUN0Rix5RkFBc0Y7QUFDdEYscUZBQWtGO0FBQ2xGLHlGQUFzRjtBQUN0RixzRUFBbUU7QUFDbkUsZ0VBQTZEO0FBRTdEOzs7R0FHRztBQUNILE1BQWEsV0FBVztJQU10QixZQUE0QixHQUFRO1FBQVIsUUFBRyxHQUFILEdBQUcsQ0FBSztRQUNsQyxJQUFJLENBQUMsU0FBUyxHQUFHLHFCQUFTLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDekMsSUFBSSxDQUFDLG9CQUFvQixFQUFFLENBQUM7SUFDOUIsQ0FBQztJQUVNLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBUSxFQUFFLE1BQVk7UUFDN0MsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLEVBQUU7WUFDekIsV0FBVyxD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LENBQTJCLDBCQUEwQixDQUFDLENBQUM7SUFDNUUsQ0FBQztJQUVNLHFCQUFxQjtRQUMxQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQXFCLG9CQUFvQixDQUFDLENBQUM7SUFDaEUsQ0FBQztJQUVNLHFCQUFxQjtRQUMxQixPQUFPLElBQUksQ0FBQyxPQUFPLENBQXFCLG9CQUFvQixDQUFDLENBQUM7SUFDaEUsQ0FBQztJQUVNLGFBQWE7UUFDbEIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFhLFlBQVksQ0FBQyxDQUFDO0lBQ2hELENBQUM7SUFFRCw0QkFBNEI7SUFDckIsNkJBQTZCO1FBQ2xDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FDakIsNEJBQTRCLENBQzdCLENBQUM7SUFDSixDQUFDO0lBRU0scUJBQXFCO1FBQzFCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBcUIsb0JBQW9CLENBQUMsQ0FBQztJQUNoRSxDQUFDO0lBRU0scUJBQXFCO1FBQzFCLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBcUIsb0JBQW9CLENBQUMsQ0FBQztJQUNoRSxDQUFDO0lBRU0sNEJBQTRCO1FBQ2pDLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FDakIsMkJBQTJCLENBQzVCLENBQUM7SUFDSixDQUFDO0lBRU0sMEJBQTBCO1FBQy9CLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBNEIseUJBQXlCLENBQUMsQ0FBQztJQUM1RSxDQUFDO0lBRUQ7O09BRUc7SUFDSSxPQUFPO1FBQ1osbUNBQW1DO1FBQ25DLElBQUksQ0FBQyxTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDekIsQ0FBQztDQUNGO0FBbmRELGtDQW1kQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMva2l0ZWxldi9Eb2N1bWVudHMvZXhvY29ydGV4LW9ic2lkaWFuLXBsdWdpbi9zcmMvaW5mcmFzdHJ1Y3R1cmUvY29udGFpbmVyL0RJQ29udGFpbmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcCB9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IHsgQ29udGFpbmVyIH0gZnJvbSBcIi4uLy4uL2FwcGxpY2F0aW9uL2NvcmUvQ29udGFpbmVyXCI7XG5cbi8vIFBvcnQgSW50ZXJmYWNlc1xuaW1wb3J0IHsgSU5vdGlmaWNhdGlvblNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vYXBwbGljYXRpb24vcG9ydHMvSU5vdGlmaWNhdGlvblNlcnZpY2VcIjtcbmltcG9ydCB7IElGaWxlU3lzdGVtQWRhcHRlciB9IGZyb20gXCIuLi8uLi9hcHBsaWNhdGlvbi9wb3J0cy9JRmlsZVN5c3RlbUFkYXB0ZXJcIjtcbmltcG9ydCB7IElVSUFkYXB0ZXIgfSBmcm9tIFwiLi4vLi4vYXBwbGljYXRpb24vcG9ydHMvSVVJQWRhcHRlclwiO1xuaW1wb3J0IHsgSVZhdWx0QWRhcHRlciB9IGZyb20gXCIuLi8uLi9hcHBsaWNhdGlvbi9wb3J0cy9JVmF1bHRBZGFwdGVyXCI7XG5cbi8vIEluZnJhc3RydWN0dXJlIEFkYXB0ZXJzXG5pbXBvcnQgeyBPYnNpZGlhbk5vdGlmaWNhdGlvblNlcnZpY2UgfSBmcm9tIFwiLi4vYWRhcHRlcnMvT2JzaWRpYW5Ob3RpZmljYXRpb25TZXJ2aWNlXCI7XG5pbXBvcnQgeyBPYnNpZGlhbkZpbGVTeXN0ZW1BZGFwdGVyIH0gZnJvbSBcIi4uL2FkYXB0ZXJzL09ic2lkaWFuRmlsZVN5c3RlbUFkYXB0ZXJcIjtcbmltcG9ydCB7IE9ic2lkaWFuVUlBZGFwdGVyIH0gZnJvbSBcIi4uL2FkYXB0ZXJzL09ic2lkaWFuVUlBZGFwdGVyXCI7XG5pbXBvcnQgeyBPYnNpZGlhblZhdWx0QWRhcHRlciB9IGZyb20gXCIuLi9hZGFwdGVycy9PYnNpZGlhblZhdWx0QWRhcHRlclwiO1xuXG4vLyBSZXBvc2l0b3JpZXNcbmltcG9ydCB7IElBc3NldFJlcG9zaXRvcnkgfSBmcm9tIFwiLi4vLi4vZG9tYWluL3JlcG9zaXRvcmllcy9JQXNzZXRSZXBvc2l0b3J5XCI7XG5pbXBvcnQgeyBJT250b2xvZ3lSZXBvc2l0b3J5IH0gZnJvbSBcIi4uLy4uL2RvbWFpbi9yZXBvc2l0b3JpZXMvSU9udG9sb2d5UmVwb3NpdG9yeVwiO1xuaW1wb3J0IHsgSUNsYXNzVmlld1JlcG9zaXRvcnkgfSBmcm9tIFwiLi4vLi4vZG9tYWluL3JlcG9zaXRvcmllcy9JQ2xhc3NWaWV3UmVwb3NpdG9yeVwiO1xuaW1wb3J0IHsgSUJ1dHRvblJlcG9zaXRvcnkgfSBmcm9tIFwiLi4vLi4vZG9tYWluL3JlcG9zaXRvcmllcy9JQnV0dG9uUmVwb3NpdG9yeVwiO1xuaW1wb3J0IHsgSUNsYXNzTGF5b3V0UmVwb3NpdG9yeSB9IGZyb20gXCIuLi8uLi9kb21haW4vcmVwb3NpdG9yaWVzL0lDbGFzc0xheW91dFJlcG9zaXRvcnlcIjtcbmltcG9ydCB7IE9ic2lkaWFuQXNzZXRSZXBvc2l0b3J5IH0gZnJvbSBcIi4uL3JlcG9zaXRvcmllcy9PYnNpZGlhbkFzc2V0UmVwb3NpdG9yeVwiO1xuaW1wb3J0IHsgT2JzaWRpYW5PbnRvbG9neVJlcG9zaXRvcnkgfSBmcm9tIFwiLi4vcmVwb3NpdG9yaWVzL09ic2lkaWFuT250b2xvZ3lSZXBvc2l0b3J5XCI7XG5pbXBvcnQgeyBPYnNpZGlhbkNsYXNzVmlld1JlcG9zaXRvcnkgfSBmcm9tIFwiLi4vcmVwb3NpdG9yaWVzL09ic2lkaWFuQ2xhc3NWaWV3UmVwb3NpdG9yeVwiO1xuaW1wb3J0IHsgT2JzaWRpYW5CdXR0b25SZXBvc2l0b3J5IH0gZnJvbSBcIi4uL3JlcG9zaXRvcmllcy9PYnNpZGlhbkJ1dHRvblJlcG9zaXRvcnlcIjtcbmltcG9ydCB7IE9ic2lkaWFuQ2xhc3NMYXlvdXRSZXBvc2l0b3J5IH0gZnJvbSBcIi4uL3JlcG9zaXRvcmllcy9PYnNpZGlhbkNsYXNzTGF5b3V0UmVwb3NpdG9yeVwiO1xuXG4vLyBVc2UgQ2FzZXNcbmltcG9ydCB7IENyZWF0ZUFzc2V0VXNlQ2FzZSB9IGZyb20gXCIuLi8uLi9hcHBsaWNhdGlvbi91c2UtY2FzZXMvQ3JlYXRlQXNzZXRVc2VDYXNlXCI7XG5pbXBvcnQgeyBDcmVhdGVDaGlsZFRhc2tVc2VDYXNlIH0gZnJvbSBcIi4uLy4uL2FwcGxpY2F0aW9uL3VzZS1jYXNlcy9DcmVhdGVDaGlsZFRhc2tVc2VDYXNlXCI7XG5pbXBvcnQgeyBSZW5kZXJDbGFzc0J1dHRvbnNVc2VDYXNlIH0gZnJvbSBcIi4uLy4uL2FwcGxpY2F0aW9uL3VzZS1jYXNlcy9SZW5kZXJDbGFzc0J1dHRvbnNVc2VDYXNlXCI7XG5pbXBvcnQgeyBFeGVjdXRlQnV0dG9uQ29tbWFuZFVzZUNhc2UgfSBmcm9tIFwiLi4vLi4vYXBwbGljYXRpb24vdXNlLWNhc2VzL0V4ZWN1dGVCdXR0b25Db21tYW5kVXNlQ2FzZVwiO1xuaW1wb3J0IHsgUHJvcGVydHlFZGl0aW5nVXNlQ2FzZSB9IGZyb20gXCIuLi8uLi9hcHBsaWNhdGlvbi91c2UtY2FzZXMvUHJvcGVydHlFZGl0aW5nVXNlQ2FzZVwiO1xuaW1wb3J0IHsgUXVlcnlUZW1wbGF0ZVVzZUNhc2UgfSBmcm9tIFwiLi4vLi4vYXBwbGljYXRpb24vdXNlLWNhc2VzL1F1ZXJ5VGVtcGxhdGVVc2VDYXNlXCI7XG5cbi8vIFNlcnZpY2VzXG5pbXBvcnQgeyBJQ29tbWFuZEV4ZWN1dG9yIH0gZnJvbSBcIi4uLy4uL2FwcGxpY2F0aW9uL3NlcnZpY2VzL0lDb21tYW5kRXhlY3V0b3JcIjtcbmltcG9ydCB7IE9ic2lkaWFuQ29tbWFuZEV4ZWN1dG9yIH0gZnJvbSBcIi4uL3NlcnZpY2VzL09ic2lkaWFuQ29tbWFuZEV4ZWN1dG9yXCI7XG5pbXBvcnQgeyBFcnJvckhhbmRsZXJTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2FwcGxpY2F0aW9uL3NlcnZpY2VzL0Vycm9ySGFuZGxlclNlcnZpY2VcIjtcbmltcG9ydCB7IFNQQVJRTEF1dG9jb21wbGV0ZVNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vYXBwbGljYXRpb24vc2VydmljZXMvU1BBUlFMQXV0b2NvbXBsZXRlU2VydmljZVwiO1xuaW1wb3J0IHsgT250b2xvZ3lQcm92aXNpb25pbmdTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2RvbWFpbi9zZXJ2aWNlcy9PbnRvbG9neVByb3Zpc2lvbmluZ1NlcnZpY2VcIjtcbmltcG9ydCB7IFByb3BlcnR5Q2FjaGVTZXJ2aWNlIH0gZnJvbSBcIi4uLy4uL2RvbWFpbi9zZXJ2aWNlcy9Qcm9wZXJ0eUNhY2hlU2VydmljZVwiO1xuaW1wb3J0IHsgQ2lyY3VpdEJyZWFrZXJTZXJ2aWNlIH0gZnJvbSBcIi4uL3Jlc2lsaWVuY2UvQ2lyY3VpdEJyZWFrZXJTZXJ2aWNlXCI7XG5pbXBvcnQgeyBJU3VnZ2VzdGlvblJlcG9zaXRvcnkgfSBmcm9tIFwiLi4vLi4vZG9tYWluL3JlcG9zaXRvcmllcy9JU3VnZ2VzdGlvblJlcG9zaXRvcnlcIjtcbmltcG9ydCB7IEdyYXBoU3VnZ2VzdGlvblJlcG9zaXRvcnkgfSBmcm9tIFwiLi4vcmVwb3NpdG9yaWVzL0dyYXBoU3VnZ2VzdGlvblJlcG9zaXRvcnlcIjtcbmltcG9ydCB7IElRdWVyeVRlbXBsYXRlUmVwb3NpdG9yeSB9IGZyb20gXCIuLi8uLi9kb21haW4vcmVwb3NpdG9yaWVzL0lRdWVyeVRlbXBsYXRlUmVwb3NpdG9yeVwiO1xuaW1wb3J0IHsgT2JzaWRpYW5RdWVyeVRlbXBsYXRlUmVwb3NpdG9yeSB9IGZyb20gXCIuLi9yZXBvc2l0b3JpZXMvT2JzaWRpYW5RdWVyeVRlbXBsYXRlUmVwb3NpdG9yeVwiO1xuaW1wb3J0IHsgUXVlcnlFbmdpbmVGYWN0b3J5IH0gZnJvbSBcIi4uL3F1ZXJ5LWVuZ2luZXMvUXVlcnlFbmdpbmVGYWN0b3J5XCI7XG5pbXBvcnQgeyBRdWVyeUVuZ2luZVNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vYXBwbGljYXRpb24vc2VydmljZXMvUXVlcnlFbmdpbmVTZXJ2aWNlXCI7XG5pbXBvcnQgeyBRdWVyeUVuZ2luZUNvbmZpZyB9IGZyb20gXCIuLi8uLi9kb21haW4vZW50aXRpZXMvUXVlcnlFbmdpbmVDb25maWdcIjtcbmltcG9ydCB7IFJERlNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vYXBwbGljYXRpb24vc2VydmljZXMvUkRGU2VydmljZVwiO1xuXG4vLyBQcmVzZW50YXRpb25cbmltcG9ydCB7IEJ1dHRvblJlbmRlcmVyIH0gZnJvbSBcIi4uLy4uL3ByZXNlbnRhdGlvbi9jb21wb25lbnRzL0J1dHRvblJlbmRlcmVyXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eVJlbmRlcmVyIH0gZnJvbSBcIi4uLy4uL3ByZXNlbnRhdGlvbi9jb21wb25lbnRzL1Byb3BlcnR5UmVuZGVyZXJcIjtcbmltcG9ydCB7IExheW91dFJlbmRlcmVyIH0gZnJvbSBcIi4uLy4uL3ByZXNlbnRhdGlvbi9yZW5kZXJlcnMvTGF5b3V0UmVuZGVyZXJcIjtcblxuLy8gTW9iaWxlIENvbXBvbmVudHNcbmltcG9ydCB7IE1vYmlsZVVJQ29tcG9uZW50cyB9IGZyb20gXCIuLi8uLi9wcmVzZW50YXRpb24vY29tcG9uZW50cy9Nb2JpbGVVSUNvbXBvbmVudHNcIjtcbmltcG9ydCB7IFRvdWNoR3JhcGhDb250cm9sbGVyIH0gZnJvbSBcIi4uLy4uL3ByZXNlbnRhdGlvbi9tb2JpbGUvVG91Y2hHcmFwaENvbnRyb2xsZXJcIjtcbmltcG9ydCB7IE1vYmlsZU1vZGFsQWRhcHRlciB9IGZyb20gXCIuLi8uLi9wcmVzZW50YXRpb24vbW9iaWxlL01vYmlsZU1vZGFsQWRhcHRlclwiO1xuaW1wb3J0IHsgTW9iaWxlUGVyZm9ybWFuY2VPcHRpbWl6ZXIgfSBmcm9tIFwiLi4vb3B0aW1pemVycy9Nb2JpbGVQZXJmb3JtYW5jZU9wdGltaXplclwiO1xuaW1wb3J0IHsgT2ZmbGluZURhdGFNYW5hZ2VyIH0gZnJvbSBcIi4uL29mZmxpbmUvT2ZmbGluZURhdGFNYW5hZ2VyXCI7XG5pbXBvcnQgeyBQbGF0Zm9ybURldGVjdG9yIH0gZnJvbSBcIi4uL3V0aWxzL1BsYXRmb3JtRGV0ZWN0b3JcIjtcblxuLyoqXG4gKiBEZXBlbmRlbmN5IEluamVjdGlvbiBDb250YWluZXIgU2V0dXBcbiAqIEZvbGxvd2luZyBDbGVhbiBBcmNoaXRlY3R1cmUgLSB3aXJlcyB1cCBhbGwgZGVwZW5kZW5jaWVzXG4gKi9cbmV4cG9ydCBjbGFzcyBESUNvbnRhaW5lciB7XG4gIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBESUNvbnRhaW5lcjtcbiAgcHJpdmF0ZSBjb250YWluZXI6IENvbnRhaW5lcjtcblxuICBwcml2YXRlIHBsdWdpbjogYW55O1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCkge1xuICAgIHRoaXMuY29udGFpbmVyID0gQ29udGFpbmVyLmdldEluc3RhbmNlKCk7XG4gICAgdGhpcy5yZWdpc3RlckRlcGVuZGVuY2llcygpO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBpbml0aWFsaXplKGFwcDogQXBwLCBwbHVnaW4/OiBhbnkpOiBESUNvbnRhaW5lciB7XG4gICAgaWYgKCFESUNvbnRhaW5lci5pbnN0YW5jZSkge1xuICAgICAgRElDb250YWluZXIuaW5zdGFuY2UgPSBuZXcgRElDb250YWluZXIoYXBwKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gQWx3YXlzIHVwZGF0ZSBhcHAgYW5kIHBsdWdpbiByZWZlcmVuY2VzXG4gICAgICBESUNvbnRhaW5lci5pbnN0YW5jZS5hcHAgPSBhcHA7XG4gICAgICBpZiAocGx1Z2luKSB7XG4gICAgICAgIERJQ29udGFpbmVyLmluc3RhbmNlLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgIH1cbiAgICAgIC8vIFJlLXJlZ2lzdGVyIGRlcGVuZGVuY2llcyB0byBlbnN1cmUgdGhleSB1c2UgdGhlIG5ldyBhcHAgaW5zdGFuY2VcbiAgICAgIERJQ29udGFpbmVyLmluc3RhbmNlLmNvbnRhaW5lci5jbGVhcigpO1xuICAgICAgRElDb250YWluZXIuaW5zdGFuY2UucmVnaXN0ZXJEZXBlbmRlbmNpZXMoKTtcbiAgICB9XG4gICAgaWYgKHBsdWdpbiAmJiAhRElDb250YWluZXIuaW5zdGFuY2UucGx1Z2luKSB7XG4gICAgICBESUNvbnRhaW5lci5pbnN0YW5jZS5wbHVnaW4gPSBwbHVnaW47XG4gICAgfVxuICAgIHJldHVybiBESUNvbnRhaW5lci5pbnN0YW5jZTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogRElDb250YWluZXIge1xuICAgIGlmICghRElDb250YWluZXIuaW5zdGFuY2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgXCJESUNvbnRhaW5lciBub3QgaW5pdGlhbGl6ZWQuIENhbGwgaW5pdGlhbGl6ZShhcHApIGZpcnN0LlwiLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIERJQ29udGFpbmVyLmluc3RhbmNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEFzeW5jIGluaXRpYWxpemUgbWV0aG9kIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XG4gICAqL1xuICBwdWJsaWMgYXN5bmMgaW5pdGlhbGl6ZShhcHA6IEFwcCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIEFscmVhZHkgaW5pdGlhbGl6ZWQgaW4gY29uc3RydWN0b3IsIHRoaXMgaXMgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVzZXQgdGhlIGNvbnRhaW5lciBpbnN0YW5jZSAoZm9yIHRlc3RpbmcgcHVycG9zZXMpXG4gICAqL1xuICBwdWJsaWMgc3RhdGljIHJlc2V0KCk6IHZvaWQge1xuICAgIERJQ29udGFpbmVyLmluc3RhbmNlID0gbnVsbCBhcyBhbnk7XG4gIH1cblxuICBwcml2YXRlIHJlZ2lzdGVyRGVwZW5kZW5jaWVzKCk6IHZvaWQge1xuICAgIC8vIFJlZ2lzdGVyIE9ic2lkaWFuIEFwcFxuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyKFwiQXBwXCIsICgpID0+IHRoaXMuYXBwKTtcblxuICAgIC8vIFJlZ2lzdGVyIFBvcnQgSW1wbGVtZW50YXRpb25zXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8SU5vdGlmaWNhdGlvblNlcnZpY2U+KFxuICAgICAgXCJJTm90aWZpY2F0aW9uU2VydmljZVwiLFxuICAgICAgKCkgPT4gbmV3IE9ic2lkaWFuTm90aWZpY2F0aW9uU2VydmljZSgpLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxJRmlsZVN5c3RlbUFkYXB0ZXI+KFxuICAgICAgXCJJRmlsZVN5c3RlbUFkYXB0ZXJcIixcbiAgICAgICgpID0+IG5ldyBPYnNpZGlhbkZpbGVTeXN0ZW1BZGFwdGVyKHRoaXMuYXBwKSxcbiAgICApO1xuXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8SVVJQWRhcHRlcj4oXG4gICAgICBcIklVSUFkYXB0ZXJcIixcbiAgICAgICgpID0+IG5ldyBPYnNpZGlhblVJQWRhcHRlcih0aGlzLmFwcCksXG4gICAgKTtcblxuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPElWYXVsdEFkYXB0ZXI+KFxuICAgICAgXCJJVmF1bHRBZGFwdGVyXCIsXG4gICAgICAoKSA9PiBuZXcgT2JzaWRpYW5WYXVsdEFkYXB0ZXIodGhpcy5hcHAudmF1bHQsIHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUpLFxuICAgICk7XG5cbiAgICAvLyBSZWdpc3RlciBSZXBvc2l0b3JpZXNcbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxJQXNzZXRSZXBvc2l0b3J5PihcbiAgICAgIFwiSUFzc2V0UmVwb3NpdG9yeVwiLFxuICAgICAgKCkgPT4gbmV3IE9ic2lkaWFuQXNzZXRSZXBvc2l0b3J5KHRoaXMuYXBwKSxcbiAgICApO1xuXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8SU9udG9sb2d5UmVwb3NpdG9yeT4oXG4gICAgICBcIklPbnRvbG9neVJlcG9zaXRvcnlcIixcbiAgICAgICgpID0+IG5ldyBPYnNpZGlhbk9udG9sb2d5UmVwb3NpdG9yeSh0aGlzLmFwcCksXG4gICAgKTtcblxuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPElDbGFzc1ZpZXdSZXBvc2l0b3J5PihcbiAgICAgIFwiSUNsYXNzVmlld1JlcG9zaXRvcnlcIixcbiAgICAgICgpID0+IG5ldyBPYnNpZGlhbkNsYXNzVmlld1JlcG9zaXRvcnkodGhpcy5hcHApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxJQnV0dG9uUmVwb3NpdG9yeT4oXG4gICAgICBcIklCdXR0b25SZXBvc2l0b3J5XCIsXG4gICAgICAoKSA9PiBuZXcgT2JzaWRpYW5CdXR0b25SZXBvc2l0b3J5KHRoaXMuYXBwKSxcbiAgICApO1xuXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8SUNsYXNzTGF5b3V0UmVwb3NpdG9yeT4oXG4gICAgICBcIklDbGFzc0xheW91dFJlcG9zaXRvcnlcIixcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBPYnNpZGlhbkNsYXNzTGF5b3V0UmVwb3NpdG9yeShcbiAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICB0aGlzLnBsdWdpbj8uc2V0dGluZ3M/LmxheW91dHNGb2xkZXJQYXRoIHx8IFwibGF5b3V0c1wiLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxJUXVlcnlUZW1wbGF0ZVJlcG9zaXRvcnk+KFxuICAgICAgXCJJUXVlcnlUZW1wbGF0ZVJlcG9zaXRvcnlcIixcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBPYnNpZGlhblF1ZXJ5VGVtcGxhdGVSZXBvc2l0b3J5KFxuICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgIHRoaXMucGx1Z2luPy5zZXR0aW5ncz8udGVtcGxhdGVzUGF0aCB8fCBcIi5leG9jb3J0ZXgvdGVtcGxhdGVzXCIsXG4gICAgICAgICAgdGhpcy5wbHVnaW4/LnNldHRpbmdzPy50ZW1wbGF0ZVVzYWdlRGF0YVBhdGggfHxcbiAgICAgICAgICAgIFwiLmV4b2NvcnRleC90ZW1wbGF0ZS11c2FnZS5qc29uXCIsXG4gICAgICAgICksXG4gICAgKTtcblxuICAgIC8vIFJlZ2lzdGVyIFNlcnZpY2VzXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8SUNvbW1hbmRFeGVjdXRvcj4oXG4gICAgICBcIklDb21tYW5kRXhlY3V0b3JcIixcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBPYnNpZGlhbkNvbW1hbmRFeGVjdXRvcihcbiAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPElBc3NldFJlcG9zaXRvcnk+KFwiSUFzc2V0UmVwb3NpdG9yeVwiKSxcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPENyZWF0ZUNoaWxkVGFza1VzZUNhc2U+KFxuICAgICAgICAgICAgXCJDcmVhdGVDaGlsZFRhc2tVc2VDYXNlXCIsXG4gICAgICAgICAgKSxcbiAgICAgICAgKSxcbiAgICApO1xuXG4gICAgLy8gUmVnaXN0ZXIgRXJyb3IgSGFuZGxlciBTZXJ2aWNlXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8RXJyb3JIYW5kbGVyU2VydmljZT4oXG4gICAgICBcIkVycm9ySGFuZGxlclNlcnZpY2VcIixcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBFcnJvckhhbmRsZXJTZXJ2aWNlKFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHNob3dVc2VyTm90aWZpY2F0aW9uOiB0cnVlLFxuICAgICAgICAgICAgbG9nVG9Db25zb2xlOiB0cnVlLFxuICAgICAgICAgICAgdHJhY2tNZXRyaWNzOiB0cnVlLFxuICAgICAgICAgICAgYXV0b1JlY292ZXI6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxJTm90aWZpY2F0aW9uU2VydmljZT4oXCJJTm90aWZpY2F0aW9uU2VydmljZVwiKSxcbiAgICAgICAgKSxcbiAgICApO1xuXG4gICAgLy8gUmVnaXN0ZXIgQXV0b2NvbXBsZXRlIFNlcnZpY2VzXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8SVN1Z2dlc3Rpb25SZXBvc2l0b3J5PihcbiAgICAgIFwiSVN1Z2dlc3Rpb25SZXBvc2l0b3J5XCIsXG4gICAgICAoKSA9PiB7XG4gICAgICAgIC8vIE5lZWQgdG8gZ2V0IGdyYXBoIGluc3RhbmNlIC0gd2lsbCBiZSBwcm92aWRlZCBieSBwbHVnaW5cbiAgICAgICAgY29uc3QgZ3JhcGggPSAodGhpcy5wbHVnaW4gYXMgYW55KT8uZ3JhcGggfHwgbnVsbDtcbiAgICAgICAgcmV0dXJuIG5ldyBHcmFwaFN1Z2dlc3Rpb25SZXBvc2l0b3J5KGdyYXBoKTtcbiAgICAgIH0sXG4gICAgKTtcblxuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPFNQQVJRTEF1dG9jb21wbGV0ZVNlcnZpY2U+KFxuICAgICAgXCJTUEFSUUxBdXRvY29tcGxldGVTZXJ2aWNlXCIsXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgU1BBUlFMQXV0b2NvbXBsZXRlU2VydmljZShcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPElTdWdnZXN0aW9uUmVwb3NpdG9yeT4oXG4gICAgICAgICAgICBcIklTdWdnZXN0aW9uUmVwb3NpdG9yeVwiLFxuICAgICAgICAgICksXG4gICAgICAgICAgKHRoaXMucGx1Z2luIGFzIGFueSk/LmdyYXBoIHx8IG51bGwsXG4gICAgICAgICksXG4gICAgKTtcblxuICAgIC8vIFJlZ2lzdGVyIFF1ZXJ5IEVuZ2luZSBTZXJ2aWNlc1xuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPFF1ZXJ5RW5naW5lRmFjdG9yeT4oXCJRdWVyeUVuZ2luZUZhY3RvcnlcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgZmFjdG9yeSA9IG5ldyBRdWVyeUVuZ2luZUZhY3RvcnkodGhpcy5hcHApO1xuXG4gICAgICAvLyBUcnkgdG8gZ2V0IERhdGF2aWV3IGFuZCBEYXRhY29yZSBBUElzIGlmIGF2YWlsYWJsZVxuICAgICAgY29uc3QgcGx1Z2lucyA9ICh0aGlzLmFwcCBhcyBhbnkpLnBsdWdpbnM7XG4gICAgICBjb25zdCBkYXRhdmlld0FwaSA9IHBsdWdpbnM/LnBsdWdpbnM/LmRhdGF2aWV3Py5hcGk7XG4gICAgICBjb25zdCBkYXRhY29yZUFwaSA9IHBsdWdpbnM/LnBsdWdpbnM/LmRhdGFjb3JlPy5hcGk7XG5cbiAgICAgIGZhY3RvcnkudXBkYXRlQXBpcyhkYXRhdmlld0FwaSwgZGF0YWNvcmVBcGkpO1xuICAgICAgcmV0dXJuIGZhY3Rvcnk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxRdWVyeUVuZ2luZUNvbmZpZz4oXCJRdWVyeUVuZ2luZUNvbmZpZ1wiLCAoKSA9PiB7XG4gICAgICAvLyBDcmVhdGUgZGVmYXVsdCBjb25maWcsIGNvdWxkIGJlIG92ZXJyaWRkZW4gYnkgcGx1Z2luIHNldHRpbmdzXG4gICAgICBjb25zdCBjb25maWdSZXN1bHQgPSBRdWVyeUVuZ2luZUNvbmZpZy5jcmVhdGVEZWZhdWx0KCk7XG4gICAgICByZXR1cm4gY29uZmlnUmVzdWx0LmdldFZhbHVlKCkhO1xuICAgIH0pO1xuXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8UXVlcnlFbmdpbmVTZXJ2aWNlPihcbiAgICAgIFwiUXVlcnlFbmdpbmVTZXJ2aWNlXCIsXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgUXVlcnlFbmdpbmVTZXJ2aWNlKFxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlc29sdmU8UXVlcnlFbmdpbmVGYWN0b3J5PihcIlF1ZXJ5RW5naW5lRmFjdG9yeVwiKSxcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPFF1ZXJ5RW5naW5lQ29uZmlnPihcIlF1ZXJ5RW5naW5lQ29uZmlnXCIpLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICAvLyBSZWdpc3RlciBSREYgU2VydmljZVxuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPFJERlNlcnZpY2U+KFxuICAgICAgXCJSREZTZXJ2aWNlXCIsXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgUkRGU2VydmljZShcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPElOb3RpZmljYXRpb25TZXJ2aWNlPihcIklOb3RpZmljYXRpb25TZXJ2aWNlXCIpLFxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlc29sdmU8SUZpbGVTeXN0ZW1BZGFwdGVyPihcIklGaWxlU3lzdGVtQWRhcHRlclwiKSxcbiAgICAgICAgKSxcbiAgICApO1xuXG4gICAgLy8gUmVnaXN0ZXIgRG9tYWluIFNlcnZpY2VzXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8T250b2xvZ3lQcm92aXNpb25pbmdTZXJ2aWNlPihcbiAgICAgIFwiT250b2xvZ3lQcm92aXNpb25pbmdTZXJ2aWNlXCIsXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgT250b2xvZ3lQcm92aXNpb25pbmdTZXJ2aWNlKFxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlc29sdmU8SU9udG9sb2d5UmVwb3NpdG9yeT4oXCJJT250b2xvZ3lSZXBvc2l0b3J5XCIpLFxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlc29sdmU8SVZhdWx0QWRhcHRlcj4oXCJJVmF1bHRBZGFwdGVyXCIpLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxQcm9wZXJ0eUNhY2hlU2VydmljZT4oXG4gICAgICBcIlByb3BlcnR5Q2FjaGVTZXJ2aWNlXCIsXG4gICAgICAoKSA9PiBQcm9wZXJ0eUNhY2hlU2VydmljZS5nZXRJbnN0YW5jZSgpLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxDaXJjdWl0QnJlYWtlclNlcnZpY2U+KFxuICAgICAgXCJDaXJjdWl0QnJlYWtlclNlcnZpY2VcIixcbiAgICAgICgpID0+IENpcmN1aXRCcmVha2VyU2VydmljZS5nZXRJbnN0YW5jZSgpLFxuICAgICk7XG5cbiAgICAvLyBSZWdpc3RlciBVc2UgQ2FzZXNcbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxDcmVhdGVBc3NldFVzZUNhc2U+KFxuICAgICAgXCJDcmVhdGVBc3NldFVzZUNhc2VcIixcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBDcmVhdGVBc3NldFVzZUNhc2UoXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxJQXNzZXRSZXBvc2l0b3J5PihcIklBc3NldFJlcG9zaXRvcnlcIiksXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxJT250b2xvZ3lSZXBvc2l0b3J5PihcIklPbnRvbG9neVJlcG9zaXRvcnlcIiksXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxPbnRvbG9neVByb3Zpc2lvbmluZ1NlcnZpY2U+KFwiT250b2xvZ3lQcm92aXNpb25pbmdTZXJ2aWNlXCIpLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxDcmVhdGVDaGlsZFRhc2tVc2VDYXNlPihcbiAgICAgIFwiQ3JlYXRlQ2hpbGRUYXNrVXNlQ2FzZVwiLFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IENyZWF0ZUNoaWxkVGFza1VzZUNhc2UoXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxJQXNzZXRSZXBvc2l0b3J5PihcIklBc3NldFJlcG9zaXRvcnlcIiksXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxDcmVhdGVBc3NldFVzZUNhc2U+KFwiQ3JlYXRlQXNzZXRVc2VDYXNlXCIpLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxSZW5kZXJDbGFzc0J1dHRvbnNVc2VDYXNlPihcbiAgICAgIFwiUmVuZGVyQ2xhc3NCdXR0b25zVXNlQ2FzZVwiLFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IFJlbmRlckNsYXNzQnV0dG9uc1VzZUNhc2UoXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxJQ2xhc3NWaWV3UmVwb3NpdG9yeT4oXCJJQ2xhc3NWaWV3UmVwb3NpdG9yeVwiKSxcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPElCdXR0b25SZXBvc2l0b3J5PihcIklCdXR0b25SZXBvc2l0b3J5XCIpLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxFeGVjdXRlQnV0dG9uQ29tbWFuZFVzZUNhc2U+KFxuICAgICAgXCJFeGVjdXRlQnV0dG9uQ29tbWFuZFVzZUNhc2VcIixcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBFeGVjdXRlQnV0dG9uQ29tbWFuZFVzZUNhc2UoXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxJQnV0dG9uUmVwb3NpdG9yeT4oXCJJQnV0dG9uUmVwb3NpdG9yeVwiKSxcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPElDb21tYW5kRXhlY3V0b3I+KFwiSUNvbW1hbmRFeGVjdXRvclwiKSxcbiAgICAgICAgKSxcbiAgICApO1xuXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8UHJvcGVydHlFZGl0aW5nVXNlQ2FzZT4oXG4gICAgICBcIlByb3BlcnR5RWRpdGluZ1VzZUNhc2VcIixcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBQcm9wZXJ0eUVkaXRpbmdVc2VDYXNlKFxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlc29sdmU8SUFzc2V0UmVwb3NpdG9yeT4oXCJJQXNzZXRSZXBvc2l0b3J5XCIpLFxuICAgICAgICAgIHRoaXMucGx1Z2luIHx8IHRoaXMuYXBwLCAvLyBVc2UgcGx1Z2luIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGFwcFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxRdWVyeVRlbXBsYXRlVXNlQ2FzZT4oXG4gICAgICBcIlF1ZXJ5VGVtcGxhdGVVc2VDYXNlXCIsXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgUXVlcnlUZW1wbGF0ZVVzZUNhc2UoXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxJUXVlcnlUZW1wbGF0ZVJlcG9zaXRvcnk+KFxuICAgICAgICAgICAgXCJJUXVlcnlUZW1wbGF0ZVJlcG9zaXRvcnlcIixcbiAgICAgICAgICApLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICAvLyBSZWdpc3RlciBQcmVzZW50YXRpb24gQ29tcG9uZW50c1xuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPEJ1dHRvblJlbmRlcmVyPihcbiAgICAgIFwiQnV0dG9uUmVuZGVyZXJcIixcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBCdXR0b25SZW5kZXJlcihcbiAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPFJlbmRlckNsYXNzQnV0dG9uc1VzZUNhc2U+KFxuICAgICAgICAgICAgXCJSZW5kZXJDbGFzc0J1dHRvbnNVc2VDYXNlXCIsXG4gICAgICAgICAgKSxcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPEV4ZWN1dGVCdXR0b25Db21tYW5kVXNlQ2FzZT4oXG4gICAgICAgICAgICBcIkV4ZWN1dGVCdXR0b25Db21tYW5kVXNlQ2FzZVwiLFxuICAgICAgICAgICksXG4gICAgICAgICksXG4gICAgKTtcblxuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPFByb3BlcnR5UmVuZGVyZXI+KFxuICAgICAgXCJQcm9wZXJ0eVJlbmRlcmVyXCIsXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgUHJvcGVydHlSZW5kZXJlcihcbiAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPFByb3BlcnR5RWRpdGluZ1VzZUNhc2U+KFxuICAgICAgICAgICAgXCJQcm9wZXJ0eUVkaXRpbmdVc2VDYXNlXCIsXG4gICAgICAgICAgKSxcbiAgICAgICAgKSxcbiAgICApO1xuXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8TGF5b3V0UmVuZGVyZXI+KFxuICAgICAgXCJMYXlvdXRSZW5kZXJlclwiLFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IExheW91dFJlbmRlcmVyKFxuICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlc29sdmU8SUNsYXNzTGF5b3V0UmVwb3NpdG9yeT4oXG4gICAgICAgICAgICBcIklDbGFzc0xheW91dFJlcG9zaXRvcnlcIixcbiAgICAgICAgICApLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICAvLyBSZWdpc3RlciBNb2JpbGUgQ29tcG9uZW50c1xuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPE1vYmlsZVBlcmZvcm1hbmNlT3B0aW1pemVyPihcbiAgICAgIFwiTW9iaWxlUGVyZm9ybWFuY2VPcHRpbWl6ZXJcIixcbiAgICAgICgpID0+XG4gICAgICAgIE1vYmlsZVBlcmZvcm1hbmNlT3B0aW1pemVyLmdldEluc3RhbmNlKHtcbiAgICAgICAgICBtYXhNZW1vcnlNQjogUGxhdGZvcm1EZXRlY3Rvci5pc01vYmlsZSgpID8gNTAgOiAyMDAsXG4gICAgICAgICAgbWF4Q2FjaGVFbnRyaWVzOiBQbGF0Zm9ybURldGVjdG9yLmlzTW9iaWxlKCkgPyAxMDAgOiA1MDAsXG4gICAgICAgICAgYmF0Y2hTaXplOiBQbGF0Zm9ybURldGVjdG9yLmlzTW9iaWxlKCkgPyAxMCA6IDUwLFxuICAgICAgICAgIGRlYm91bmNlTXM6IFBsYXRmb3JtRGV0ZWN0b3IuaXNNb2JpbGUoKSA/IDUwMCA6IDIwMCxcbiAgICAgICAgICBlbmFibGVHQ0hpbnRzOiBQbGF0Zm9ybURldGVjdG9yLmlzTW9iaWxlKCksXG4gICAgICAgICAgZW5hYmxlTGF6eUxvYWRpbmc6IHRydWUsXG4gICAgICAgICAgdmlydHVhbFNjcm9sbFRocmVzaG9sZDogMTAwLFxuICAgICAgICB9KSxcbiAgICApO1xuXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8T2ZmbGluZURhdGFNYW5hZ2VyPihcbiAgICAgIFwiT2ZmbGluZURhdGFNYW5hZ2VyXCIsXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgT2ZmbGluZURhdGFNYW5hZ2VyKHtcbiAgICAgICAgICBzdHJhdGVneTogXCJpbmRleGVkZGJcIixcbiAgICAgICAgICBtYXhTdG9yYWdlTUI6IFBsYXRmb3JtRGV0ZWN0b3IuaXNNb2JpbGUoKSA/IDUwIDogMjAwLFxuICAgICAgICAgIG1heEFnZTogNyAqIDI0ICogNjAgKiA2MCAqIDEwMDAsIC8vIDcgZGF5c1xuICAgICAgICAgIGF1dG9TeW5jOiB0cnVlLFxuICAgICAgICAgIHN5bmNJbnRlcnZhbE1zOiAzMDAwMCxcbiAgICAgICAgICBlbmFibGVDb25mbGljdFJlc29sdXRpb246IHRydWUsXG4gICAgICAgICAgZW5hYmxlQ29tcHJlc3Npb246IFBsYXRmb3JtRGV0ZWN0b3IuaXNNb2JpbGUoKSxcbiAgICAgICAgfSksXG4gICAgKTtcblxuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPE1vYmlsZVVJQ29tcG9uZW50cz4oXG4gICAgICBcIk1vYmlsZVVJQ29tcG9uZW50c1wiLFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IE1vYmlsZVVJQ29tcG9uZW50cyhcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPE1vYmlsZVBlcmZvcm1hbmNlT3B0aW1pemVyPihcbiAgICAgICAgICAgIFwiTW9iaWxlUGVyZm9ybWFuY2VPcHRpbWl6ZXJcIixcbiAgICAgICAgICApLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICAvLyBUb3VjaEdyYXBoQ29udHJvbGxlciBpcyB0eXBpY2FsbHkgY3JlYXRlZCBwZXIgZ3JhcGggaW5zdGFuY2UsXG4gICAgLy8gc28gd2UgcmVnaXN0ZXIgYSBmYWN0b3J5IGZ1bmN0aW9uXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8dHlwZW9mIFRvdWNoR3JhcGhDb250cm9sbGVyPihcbiAgICAgIFwiVG91Y2hHcmFwaENvbnRyb2xsZXJDbGFzc1wiLFxuICAgICAgKCkgPT4gVG91Y2hHcmFwaENvbnRyb2xsZXIsXG4gICAgKTtcblxuICAgIC8vIE1vYmlsZU1vZGFsQWRhcHRlciBpcyB0eXBpY2FsbHkgY3JlYXRlZCBwZXIgbW9kYWwsXG4gICAgLy8gc28gd2UgcmVnaXN0ZXIgYSBmYWN0b3J5IGZ1bmN0aW9uXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8dHlwZW9mIE1vYmlsZU1vZGFsQWRhcHRlcj4oXG4gICAgICBcIk1vYmlsZU1vZGFsQWRhcHRlckNsYXNzXCIsXG4gICAgICAoKSA9PiBNb2JpbGVNb2RhbEFkYXB0ZXIsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNvbHZlIGEgZGVwZW5kZW5jeSBmcm9tIHRoZSBjb250YWluZXJcbiAgICovXG4gIHB1YmxpYyByZXNvbHZlPFQ+KHRva2VuOiBzdHJpbmcpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXIucmVzb2x2ZTxUPih0b2tlbik7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNwZWNpZmljIHVzZSBjYXNlcyBmb3IgY29tbW9uIG9wZXJhdGlvbnNcbiAgICovXG4gIHB1YmxpYyBnZXRDcmVhdGVBc3NldFVzZUNhc2UoKTogQ3JlYXRlQXNzZXRVc2VDYXNlIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlPENyZWF0ZUFzc2V0VXNlQ2FzZT4oXCJDcmVhdGVBc3NldFVzZUNhc2VcIik7XG4gIH1cblxuICBwdWJsaWMgZ2V0UmVuZGVyQnV0dG9uc1VzZUNhc2UoKTogUmVuZGVyQ2xhc3NCdXR0b25zVXNlQ2FzZSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxSZW5kZXJDbGFzc0J1dHRvbnNVc2VDYXNlPihcIlJlbmRlckNsYXNzQnV0dG9uc1VzZUNhc2VcIik7XG4gIH1cblxuICBwdWJsaWMgZ2V0RXhlY3V0ZUJ1dHRvbkNvbW1hbmRVc2VDYXNlKCk6IEV4ZWN1dGVCdXR0b25Db21tYW5kVXNlQ2FzZSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxFeGVjdXRlQnV0dG9uQ29tbWFuZFVzZUNhc2U+KFxuICAgICAgXCJFeGVjdXRlQnV0dG9uQ29tbWFuZFVzZUNhc2VcIixcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGdldEJ1dHRvblJlbmRlcmVyKCk6IEJ1dHRvblJlbmRlcmVyIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlPEJ1dHRvblJlbmRlcmVyPihcIkJ1dHRvblJlbmRlcmVyXCIpO1xuICB9XG5cbiAgcHVibGljIGdldFByb3BlcnR5UmVuZGVyZXIoKTogUHJvcGVydHlSZW5kZXJlciB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxQcm9wZXJ0eVJlbmRlcmVyPihcIlByb3BlcnR5UmVuZGVyZXJcIik7XG4gIH1cblxuICBwdWJsaWMgZ2V0TGF5b3V0UmVuZGVyZXIoKTogTGF5b3V0UmVuZGVyZXIge1xuICAgIHJldHVybiB0aGlzLnJlc29sdmU8TGF5b3V0UmVuZGVyZXI+KFwiTGF5b3V0UmVuZGVyZXJcIik7XG4gIH1cblxuICBwdWJsaWMgZ2V0UHJvcGVydHlFZGl0aW5nVXNlQ2FzZSgpOiBQcm9wZXJ0eUVkaXRpbmdVc2VDYXNlIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlPFByb3BlcnR5RWRpdGluZ1VzZUNhc2U+KFwiUHJvcGVydHlFZGl0aW5nVXNlQ2FzZVwiKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRRdWVyeVRlbXBsYXRlVXNlQ2FzZSgpOiBRdWVyeVRlbXBsYXRlVXNlQ2FzZSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxRdWVyeVRlbXBsYXRlVXNlQ2FzZT4oXCJRdWVyeVRlbXBsYXRlVXNlQ2FzZVwiKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRRdWVyeVRlbXBsYXRlUmVwb3NpdG9yeSgpOiBJUXVlcnlUZW1wbGF0ZVJlcG9zaXRvcnkge1xuICAgIHJldHVybiB0aGlzLnJlc29sdmU8SVF1ZXJ5VGVtcGxhdGVSZXBvc2l0b3J5PihcIklRdWVyeVRlbXBsYXRlUmVwb3NpdG9yeVwiKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRRdWVyeUVuZ2luZVNlcnZpY2UoKTogUXVlcnlFbmdpbmVTZXJ2aWNlIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlPFF1ZXJ5RW5naW5lU2VydmljZT4oXCJRdWVyeUVuZ2luZVNlcnZpY2VcIik7XG4gIH1cblxuICBwdWJsaWMgZ2V0UXVlcnlFbmdpbmVGYWN0b3J5KCk6IFF1ZXJ5RW5naW5lRmFjdG9yeSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxRdWVyeUVuZ2luZUZhY3Rvcnk+KFwiUXVlcnlFbmdpbmVGYWN0b3J5XCIpO1xuICB9XG5cbiAgcHVibGljIGdldFJERlNlcnZpY2UoKTogUkRGU2VydmljZSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxSREZTZXJ2aWNlPihcIlJERlNlcnZpY2VcIik7XG4gIH1cblxuICAvLyBNb2JpbGUgQ29tcG9uZW50cyBHZXR0ZXJzXG4gIHB1YmxpYyBnZXRNb2JpbGVQZXJmb3JtYW5jZU9wdGltaXplcigpOiBNb2JpbGVQZXJmb3JtYW5jZU9wdGltaXplciB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxNb2JpbGVQZXJmb3JtYW5jZU9wdGltaXplcj4oXG4gICAgICBcIk1vYmlsZVBlcmZvcm1hbmNlT3B0aW1pemVyXCIsXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRPZmZsaW5lRGF0YU1hbmFnZXIoKTogT2ZmbGluZURhdGFNYW5hZ2VyIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlPE9mZmxpbmVEYXRhTWFuYWdlcj4oXCJPZmZsaW5lRGF0YU1hbmFnZXJcIik7XG4gIH1cblxuICBwdWJsaWMgZ2V0TW9iaWxlVUlDb21wb25lbnRzKCk6IE1vYmlsZVVJQ29tcG9uZW50cyB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxNb2JpbGVVSUNvbXBvbmVudHM+KFwiTW9iaWxlVUlDb21wb25lbnRzXCIpO1xuICB9XG5cbiAgcHVibGljIGdldFRvdWNoR3JhcGhDb250cm9sbGVyQ2xhc3MoKTogdHlwZW9mIFRvdWNoR3JhcGhDb250cm9sbGVyIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlPHR5cGVvZiBUb3VjaEdyYXBoQ29udHJvbGxlcj4oXG4gICAgICBcIlRvdWNoR3JhcGhDb250cm9sbGVyQ2xhc3NcIixcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGdldE1vYmlsZU1vZGFsQWRhcHRlckNsYXNzKCk6IHR5cGVvZiBNb2JpbGVNb2RhbEFkYXB0ZXIge1xuICAgIHJldHVybiB0aGlzLnJlc29sdmU8dHlwZW9mIE1vYmlsZU1vZGFsQWRhcHRlcj4oXCJNb2JpbGVNb2RhbEFkYXB0ZXJDbGFzc1wiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cCByZXNvdXJjZXNcbiAgICovXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIC8vIENsZWFuIHVwIGFueSByZXNvdXJjZXMgaWYgbmVlZGVkXG4gICAgdGhpcy5jb250YWluZXIuY2xlYXIoKTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9