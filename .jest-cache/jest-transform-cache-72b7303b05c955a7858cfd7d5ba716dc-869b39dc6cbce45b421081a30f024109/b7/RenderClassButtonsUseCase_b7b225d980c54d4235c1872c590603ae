6029b8557a25504986b0884c9ee26c3e
"use strict";

/* istanbul ignore next */
function cov_1415xdtsds() {
  var path = "/Users/kitelev/Documents/exocortex-obsidian-plugin/src/application/use-cases/RenderClassButtonsUseCase.ts";
  var hash = "e09188eae6eaa2a03fd5b0731cff822346756329";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/kitelev/Documents/exocortex-obsidian-plugin/src/application/use-cases/RenderClassButtonsUseCase.ts",
    statementMap: {
      "0": {
        start: {
          line: 2,
          column: 0
        },
        end: {
          line: 2,
          column: 62
        }
      },
      "1": {
        start: {
          line: 3,
          column: 0
        },
        end: {
          line: 3,
          column: 43
        }
      },
      "2": {
        start: {
          line: 4,
          column: 16
        },
        end: {
          line: 4,
          column: 32
        }
      },
      "3": {
        start: {
          line: 5,
          column: 17
        },
        end: {
          line: 5,
          column: 52
        }
      },
      "4": {
        start: {
          line: 6,
          column: 20
        },
        end: {
          line: 6,
          column: 67
        }
      },
      "5": {
        start: {
          line: 9,
          column: 8
        },
        end: {
          line: 9,
          column: 55
        }
      },
      "6": {
        start: {
          line: 10,
          column: 8
        },
        end: {
          line: 10,
          column: 49
        }
      },
      "7": {
        start: {
          line: 14,
          column: 8
        },
        end: {
          line: 97,
          column: 11
        }
      },
      "8": {
        start: {
          line: 16,
          column: 12
        },
        end: {
          line: 18,
          column: 13
        }
      },
      "9": {
        start: {
          line: 17,
          column: 16
        },
        end: {
          line: 17,
          column: 70
        }
      },
      "10": {
        start: {
          line: 20,
          column: 36
        },
        end: {
          line: 20,
          column: 83
        }
      },
      "11": {
        start: {
          line: 21,
          column: 12
        },
        end: {
          line: 23,
          column: 13
        }
      },
      "12": {
        start: {
          line: 22,
          column: 16
        },
        end: {
          line: 22,
          column: 67
        }
      },
      "13": {
        start: {
          line: 24,
          column: 30
        },
        end: {
          line: 24,
          column: 56
        }
      },
      "14": {
        start: {
          line: 26,
          column: 36
        },
        end: {
          line: 26,
          column: 93
        }
      },
      "15": {
        start: {
          line: 27,
          column: 12
        },
        end: {
          line: 29,
          column: 13
        }
      },
      "16": {
        start: {
          line: 28,
          column: 16
        },
        end: {
          line: 28,
          column: 99
        }
      },
      "17": {
        start: {
          line: 30,
          column: 30
        },
        end: {
          line: 30,
          column: 56
        }
      },
      "18": {
        start: {
          line: 32,
          column: 12
        },
        end: {
          line: 40,
          column: 13
        }
      },
      "19": {
        start: {
          line: 33,
          column: 16
        },
        end: {
          line: 39,
          column: 19
        }
      },
      "20": {
        start: {
          line: 42,
          column: 12
        },
        end: {
          line: 50,
          column: 13
        }
      },
      "21": {
        start: {
          line: 43,
          column: 16
        },
        end: {
          line: 49,
          column: 19
        }
      },
      "22": {
        start: {
          line: 52,
          column: 35
        },
        end: {
          line: 52,
          column: 64
        }
      },
      "23": {
        start: {
          line: 54,
          column: 37
        },
        end: {
          line: 54,
          column: 39
        }
      },
      "24": {
        start: {
          line: 55,
          column: 12
        },
        end: {
          line: 87,
          column: 13
        }
      },
      "25": {
        start: {
          line: 56,
          column: 38
        },
        end: {
          line: 56,
          column: 99
        }
      },
      "26": {
        start: {
          line: 57,
          column: 16
        },
        end: {
          line: 60,
          column: 17
        }
      },
      "27": {
        start: {
          line: 58,
          column: 20
        },
        end: {
          line: 58,
          column: 107
        }
      },
      "28": {
        start: {
          line: 59,
          column: 20
        },
        end: {
          line: 59,
          column: 29
        }
      },
      "29": {
        start: {
          line: 61,
          column: 32
        },
        end: {
          line: 61,
          column: 56
        }
      },
      "30": {
        start: {
          line: 62,
          column: 16
        },
        end: {
          line: 65,
          column: 17
        }
      },
      "31": {
        start: {
          line: 63,
          column: 20
        },
        end: {
          line: 63,
          column: 78
        }
      },
      "32": {
        start: {
          line: 64,
          column: 20
        },
        end: {
          line: 64,
          column: 29
        }
      },
      "33": {
        start: {
          line: 67,
          column: 35
        },
        end: {
          line: 70,
          column: 18
        }
      },
      "34": {
        start: {
          line: 72,
          column: 16
        },
        end: {
          line: 86,
          column: 17
        }
      },
      "35": {
        start: {
          line: 73,
          column: 20
        },
        end: {
          line: 85,
          column: 23
        }
      },
      "36": {
        start: {
          line: 89,
          column: 12
        },
        end: {
          line: 89,
          column: 63
        }
      },
      "37": {
        start: {
          line: 89,
          column: 44
        },
        end: {
          line: 89,
          column: 61
        }
      },
      "38": {
        start: {
          line: 90,
          column: 12
        },
        end: {
          line: 96,
          column: 15
        }
      },
      "39": {
        start: {
          line: 100,
          column: 0
        },
        end: {
          line: 100,
          column: 62
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 8,
            column: 4
          },
          end: {
            line: 8,
            column: 5
          }
        },
        loc: {
          start: {
            line: 8,
            column: 55
          },
          end: {
            line: 11,
            column: 5
          }
        },
        line: 8
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 12,
            column: 4
          },
          end: {
            line: 12,
            column: 5
          }
        },
        loc: {
          start: {
            line: 12,
            column: 21
          },
          end: {
            line: 98,
            column: 5
          }
        },
        line: 12
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 14,
            column: 55
          },
          end: {
            line: 14,
            column: 56
          }
        },
        loc: {
          start: {
            line: 14,
            column: 68
          },
          end: {
            line: 97,
            column: 9
          }
        },
        line: 14
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 89,
            column: 34
          },
          end: {
            line: 89,
            column: 35
          }
        },
        loc: {
          start: {
            line: 89,
            column: 44
          },
          end: {
            line: 89,
            column: 61
          }
        },
        line: 89
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 16,
            column: 12
          },
          end: {
            line: 18,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 16,
            column: 12
          },
          end: {
            line: 18,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 16
      },
      "1": {
        loc: {
          start: {
            line: 21,
            column: 12
          },
          end: {
            line: 23,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 21,
            column: 12
          },
          end: {
            line: 23,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 21
      },
      "2": {
        loc: {
          start: {
            line: 27,
            column: 12
          },
          end: {
            line: 29,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 27,
            column: 12
          },
          end: {
            line: 29,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 27
      },
      "3": {
        loc: {
          start: {
            line: 32,
            column: 12
          },
          end: {
            line: 40,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 32,
            column: 12
          },
          end: {
            line: 40,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 32
      },
      "4": {
        loc: {
          start: {
            line: 42,
            column: 12
          },
          end: {
            line: 50,
            column: 13
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 42,
            column: 12
          },
          end: {
            line: 50,
            column: 13
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 42
      },
      "5": {
        loc: {
          start: {
            line: 57,
            column: 16
          },
          end: {
            line: 60,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 57,
            column: 16
          },
          end: {
            line: 60,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 57
      },
      "6": {
        loc: {
          start: {
            line: 62,
            column: 16
          },
          end: {
            line: 65,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 62,
            column: 16
          },
          end: {
            line: 65,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 62
      },
      "7": {
        loc: {
          start: {
            line: 69,
            column: 34
          },
          end: {
            line: 69,
            column: 120
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 69,
            column: 35
          },
          end: {
            line: 69,
            column: 110
          }
        }, {
          start: {
            line: 69,
            column: 115
          },
          end: {
            line: 69,
            column: 120
          }
        }],
        line: 69
      },
      "8": {
        loc: {
          start: {
            line: 69,
            column: 35
          },
          end: {
            line: 69,
            column: 110
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 69,
            column: 86
          },
          end: {
            line: 69,
            column: 92
          }
        }, {
          start: {
            line: 69,
            column: 95
          },
          end: {
            line: 69,
            column: 110
          }
        }],
        line: 69
      },
      "9": {
        loc: {
          start: {
            line: 69,
            column: 35
          },
          end: {
            line: 69,
            column: 83
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 69,
            column: 35
          },
          end: {
            line: 69,
            column: 66
          }
        }, {
          start: {
            line: 69,
            column: 70
          },
          end: {
            line: 69,
            column: 83
          }
        }],
        line: 69
      },
      "10": {
        loc: {
          start: {
            line: 72,
            column: 16
          },
          end: {
            line: 86,
            column: 17
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 72,
            column: 16
          },
          end: {
            line: 86,
            column: 17
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 72
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0]
    },
    inputSourceMap: {
      file: "/Users/kitelev/Documents/exocortex-obsidian-plugin/src/application/use-cases/RenderClassButtonsUseCase.ts",
      mappings: "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",
      names: [],
      sources: ["/Users/kitelev/Documents/exocortex-obsidian-plugin/src/application/use-cases/RenderClassButtonsUseCase.ts"],
      sourcesContent: ["import { UseCase } from '../core/UseCase';\nimport { Result } from '../../domain/core/Result';\nimport { IClassViewRepository } from '../../domain/repositories/IClassViewRepository';\nimport { IButtonRepository } from '../../domain/repositories/IButtonRepository';\nimport { ClassName } from '../../domain/value-objects/ClassName';\nimport { UIButton } from '../../domain/entities/UIButton';\nimport { ButtonCommand } from '../../domain/entities/ButtonCommand';\n\n/**\n * Use Case for rendering buttons in an asset view\n * Following Clean Architecture - orchestrates domain logic\n */\nexport interface RenderClassButtonsRequest {\n    className: string;\n    assetId?: string;\n    context?: {\n        hasSelection: boolean;\n        currentUser?: string;\n    };\n}\n\nexport interface ButtonRenderData {\n    buttonId: string;\n    label: string;\n    tooltip?: string;\n    isEnabled: boolean;\n    order: number;\n    command: {\n        id: string;\n        type: string;\n        requiresInput: boolean;\n        parameters: any[];\n    };\n}\n\nexport interface RenderClassButtonsResponse {\n    buttons: ButtonRenderData[];\n    displayOptions: {\n        position: 'top' | 'bottom' | 'floating';\n        showButtons: boolean;\n    };\n}\n\nexport class RenderClassButtonsUseCase \n    implements UseCase<RenderClassButtonsRequest, RenderClassButtonsResponse> {\n    \n    constructor(\n        private classViewRepository: IClassViewRepository,\n        private buttonRepository: IButtonRepository\n    ) {}\n\n    async execute(request: RenderClassButtonsRequest): Promise<Result<RenderClassButtonsResponse>> {\n        // Validate request\n        if (!request.className) {\n            return Result.fail<RenderClassButtonsResponse>('Class name is required');\n        }\n\n        // Create ClassName value object\n        const classNameResult = ClassName.create(request.className);\n        if (classNameResult.isFailure) {\n            return Result.fail<RenderClassButtonsResponse>(classNameResult.error);\n        }\n        const className = classNameResult.getValue();\n\n        // Find ClassView configuration\n        const classViewResult = await this.classViewRepository.findByClassName(className);\n        if (classViewResult.isFailure) {\n            return Result.fail<RenderClassButtonsResponse>(\n                `Failed to load class view: ${classViewResult.error}`\n            );\n        }\n\n        const classView = classViewResult.getValue();\n        \n        // If no ClassView configured, return empty buttons\n        if (!classView) {\n            return Result.ok<RenderClassButtonsResponse>({\n                buttons: [],\n                displayOptions: {\n                    position: 'top',\n                    showButtons: false\n                }\n            });\n        }\n\n        // Check if buttons should be shown\n        if (!classView.displayOptions.showButtons) {\n            return Result.ok<RenderClassButtonsResponse>({\n                buttons: [],\n                displayOptions: {\n                    position: classView.displayOptions.buttonPosition,\n                    showButtons: false\n                }\n            });\n        }\n\n        // Get enabled buttons\n        const enabledButtons = classView.getEnabledButtons();\n        \n        // Load commands for each button\n        const buttonRenderData: ButtonRenderData[] = [];\n        \n        for (const button of enabledButtons) {\n            const commandResult = await this.buttonRepository.findCommandById(button.commandId);\n            \n            if (commandResult.isFailure) {\n                console.warn(`Failed to load command for button ${button.id}: ${commandResult.error}`);\n                continue;\n            }\n\n            const command = commandResult.getValue();\n            if (!command) {\n                console.warn(`Command not found for button ${button.id}`);\n                continue;\n            }\n\n            // Check if command can be executed in current context\n            const canExecute = command.canExecute({\n                currentClass: request.className,\n                hasSelection: request.context?.hasSelection || false\n            });\n\n            // Only include button if it can be executed\n            if (canExecute) {\n                buttonRenderData.push({\n                    buttonId: button.id.toString(),\n                    label: button.label,\n                    tooltip: button.tooltip,\n                    isEnabled: button.isEnabled,\n                    order: button.order,\n                    command: {\n                        id: command.id.toString(),\n                        type: command.type,\n                        requiresInput: command.requiresInput,\n                        parameters: command.parameters\n                    }\n                });\n            }\n        }\n\n        // Sort buttons by order\n        buttonRenderData.sort((a, b) => a.order - b.order);\n\n        return Result.ok<RenderClassButtonsResponse>({\n            buttons: buttonRenderData,\n            displayOptions: {\n                position: classView.displayOptions.buttonPosition,\n                showButtons: true\n            }\n        });\n    }\n}"],
      version: 3
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "e09188eae6eaa2a03fd5b0731cff822346756329"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1415xdtsds = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1415xdtsds();
cov_1415xdtsds().s[0]++;
Object.defineProperty(exports, "__esModule", {
  value: true
});
/* istanbul ignore next */
cov_1415xdtsds().s[1]++;
exports.RenderClassButtonsUseCase = void 0;
const tslib_1 =
/* istanbul ignore next */
(cov_1415xdtsds().s[2]++, require("tslib"));
const Result_1 =
/* istanbul ignore next */
(cov_1415xdtsds().s[3]++, require("../../domain/core/Result"));
const ClassName_1 =
/* istanbul ignore next */
(cov_1415xdtsds().s[4]++, require("../../domain/value-objects/ClassName"));
class RenderClassButtonsUseCase {
  constructor(classViewRepository, buttonRepository) {
    /* istanbul ignore next */
    cov_1415xdtsds().f[0]++;
    cov_1415xdtsds().s[5]++;
    this.classViewRepository = classViewRepository;
    /* istanbul ignore next */
    cov_1415xdtsds().s[6]++;
    this.buttonRepository = buttonRepository;
  }
  execute(request) {
    /* istanbul ignore next */
    cov_1415xdtsds().f[1]++;
    var _a;
    /* istanbul ignore next */
    cov_1415xdtsds().s[7]++;
    return tslib_1.__awaiter(this, void 0, void 0, function* () {
      /* istanbul ignore next */
      cov_1415xdtsds().f[2]++;
      cov_1415xdtsds().s[8]++;
      // Validate request
      if (!request.className) {
        /* istanbul ignore next */
        cov_1415xdtsds().b[0][0]++;
        cov_1415xdtsds().s[9]++;
        return Result_1.Result.fail('Class name is required');
      } else
      /* istanbul ignore next */
      {
        cov_1415xdtsds().b[0][1]++;
      }
      // Create ClassName value object
      const classNameResult =
      /* istanbul ignore next */
      (cov_1415xdtsds().s[10]++, ClassName_1.ClassName.create(request.className));
      /* istanbul ignore next */
      cov_1415xdtsds().s[11]++;
      if (classNameResult.isFailure) {
        /* istanbul ignore next */
        cov_1415xdtsds().b[1][0]++;
        cov_1415xdtsds().s[12]++;
        return Result_1.Result.fail(classNameResult.error);
      } else
      /* istanbul ignore next */
      {
        cov_1415xdtsds().b[1][1]++;
      }
      const className =
      /* istanbul ignore next */
      (cov_1415xdtsds().s[13]++, classNameResult.getValue());
      // Find ClassView configuration
      const classViewResult =
      /* istanbul ignore next */
      (cov_1415xdtsds().s[14]++, yield this.classViewRepository.findByClassName(className));
      /* istanbul ignore next */
      cov_1415xdtsds().s[15]++;
      if (classViewResult.isFailure) {
        /* istanbul ignore next */
        cov_1415xdtsds().b[2][0]++;
        cov_1415xdtsds().s[16]++;
        return Result_1.Result.fail(`Failed to load class view: ${classViewResult.error}`);
      } else
      /* istanbul ignore next */
      {
        cov_1415xdtsds().b[2][1]++;
      }
      const classView =
      /* istanbul ignore next */
      (cov_1415xdtsds().s[17]++, classViewResult.getValue());
      // If no ClassView configured, return empty buttons
      /* istanbul ignore next */
      cov_1415xdtsds().s[18]++;
      if (!classView) {
        /* istanbul ignore next */
        cov_1415xdtsds().b[3][0]++;
        cov_1415xdtsds().s[19]++;
        return Result_1.Result.ok({
          buttons: [],
          displayOptions: {
            position: 'top',
            showButtons: false
          }
        });
      } else
      /* istanbul ignore next */
      {
        cov_1415xdtsds().b[3][1]++;
      }
      // Check if buttons should be shown
      cov_1415xdtsds().s[20]++;
      if (!classView.displayOptions.showButtons) {
        /* istanbul ignore next */
        cov_1415xdtsds().b[4][0]++;
        cov_1415xdtsds().s[21]++;
        return Result_1.Result.ok({
          buttons: [],
          displayOptions: {
            position: classView.displayOptions.buttonPosition,
            showButtons: false
          }
        });
      } else
      /* istanbul ignore next */
      {
        cov_1415xdtsds().b[4][1]++;
      }
      // Get enabled buttons
      const enabledButtons =
      /* istanbul ignore next */
      (cov_1415xdtsds().s[22]++, classView.getEnabledButtons());
      // Load commands for each button
      const buttonRenderData =
      /* istanbul ignore next */
      (cov_1415xdtsds().s[23]++, []);
      /* istanbul ignore next */
      cov_1415xdtsds().s[24]++;
      for (const button of enabledButtons) {
        const commandResult =
        /* istanbul ignore next */
        (cov_1415xdtsds().s[25]++, yield this.buttonRepository.findCommandById(button.commandId));
        /* istanbul ignore next */
        cov_1415xdtsds().s[26]++;
        if (commandResult.isFailure) {
          /* istanbul ignore next */
          cov_1415xdtsds().b[5][0]++;
          cov_1415xdtsds().s[27]++;
          console.warn(`Failed to load command for button ${button.id}: ${commandResult.error}`);
          /* istanbul ignore next */
          cov_1415xdtsds().s[28]++;
          continue;
        } else
        /* istanbul ignore next */
        {
          cov_1415xdtsds().b[5][1]++;
        }
        const command =
        /* istanbul ignore next */
        (cov_1415xdtsds().s[29]++, commandResult.getValue());
        /* istanbul ignore next */
        cov_1415xdtsds().s[30]++;
        if (!command) {
          /* istanbul ignore next */
          cov_1415xdtsds().b[6][0]++;
          cov_1415xdtsds().s[31]++;
          console.warn(`Command not found for button ${button.id}`);
          /* istanbul ignore next */
          cov_1415xdtsds().s[32]++;
          continue;
        } else
        /* istanbul ignore next */
        {
          cov_1415xdtsds().b[6][1]++;
        }
        // Check if command can be executed in current context
        const canExecute =
        /* istanbul ignore next */
        (cov_1415xdtsds().s[33]++, command.canExecute({
          currentClass: request.className,
          hasSelection:
          /* istanbul ignore next */
          (cov_1415xdtsds().b[7][0]++,
          /* istanbul ignore next */
          (cov_1415xdtsds().b[9][0]++, (_a = request.context) === null) ||
          /* istanbul ignore next */
          (cov_1415xdtsds().b[9][1]++, _a === void 0) ?
          /* istanbul ignore next */
          (cov_1415xdtsds().b[8][0]++, void 0) :
          /* istanbul ignore next */
          (cov_1415xdtsds().b[8][1]++, _a.hasSelection)) ||
          /* istanbul ignore next */
          (cov_1415xdtsds().b[7][1]++, false)
        }));
        // Only include button if it can be executed
        /* istanbul ignore next */
        cov_1415xdtsds().s[34]++;
        if (canExecute) {
          /* istanbul ignore next */
          cov_1415xdtsds().b[10][0]++;
          cov_1415xdtsds().s[35]++;
          buttonRenderData.push({
            buttonId: button.id.toString(),
            label: button.label,
            tooltip: button.tooltip,
            isEnabled: button.isEnabled,
            order: button.order,
            command: {
              id: command.id.toString(),
              type: command.type,
              requiresInput: command.requiresInput,
              parameters: command.parameters
            }
          });
        } else
        /* istanbul ignore next */
        {
          cov_1415xdtsds().b[10][1]++;
        }
      }
      // Sort buttons by order
      /* istanbul ignore next */
      cov_1415xdtsds().s[36]++;
      buttonRenderData.sort((a, b) => {
        /* istanbul ignore next */
        cov_1415xdtsds().f[3]++;
        cov_1415xdtsds().s[37]++;
        return a.order - b.order;
      });
      /* istanbul ignore next */
      cov_1415xdtsds().s[38]++;
      return Result_1.Result.ok({
        buttons: buttonRenderData,
        displayOptions: {
          position: classView.displayOptions.buttonPosition,
          showButtons: true
        }
      });
    });
  }
}
/* istanbul ignore next */
cov_1415xdtsds().s[39]++;
exports.RenderClassButtonsUseCase = RenderClassButtonsUseCase;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMTQxNXhkdHNkcyIsImFjdHVhbENvdmVyYWdlIiwicyIsIlJlc3VsdF8xIiwicmVxdWlyZSIsIkNsYXNzTmFtZV8xIiwiUmVuZGVyQ2xhc3NCdXR0b25zVXNlQ2FzZSIsImNvbnN0cnVjdG9yIiwiY2xhc3NWaWV3UmVwb3NpdG9yeSIsImJ1dHRvblJlcG9zaXRvcnkiLCJmIiwiZXhlY3V0ZSIsInJlcXVlc3QiLCJjbGFzc05hbWUiLCJiIiwiUmVzdWx0IiwiZmFpbCIsImNsYXNzTmFtZVJlc3VsdCIsIkNsYXNzTmFtZSIsImNyZWF0ZSIsImlzRmFpbHVyZSIsImVycm9yIiwiZ2V0VmFsdWUiLCJjbGFzc1ZpZXdSZXN1bHQiLCJmaW5kQnlDbGFzc05hbWUiLCJjbGFzc1ZpZXciLCJvayIsImJ1dHRvbnMiLCJkaXNwbGF5T3B0aW9ucyIsInBvc2l0aW9uIiwic2hvd0J1dHRvbnMiLCJidXR0b25Qb3NpdGlvbiIsImVuYWJsZWRCdXR0b25zIiwiZ2V0RW5hYmxlZEJ1dHRvbnMiLCJidXR0b25SZW5kZXJEYXRhIiwiYnV0dG9uIiwiY29tbWFuZFJlc3VsdCIsImZpbmRDb21tYW5kQnlJZCIsImNvbW1hbmRJZCIsImNvbnNvbGUiLCJ3YXJuIiwiaWQiLCJjb21tYW5kIiwiY2FuRXhlY3V0ZSIsImN1cnJlbnRDbGFzcyIsImhhc1NlbGVjdGlvbiIsIl9hIiwiY29udGV4dCIsInB1c2giLCJidXR0b25JZCIsInRvU3RyaW5nIiwibGFiZWwiLCJ0b29sdGlwIiwiaXNFbmFibGVkIiwib3JkZXIiLCJ0eXBlIiwicmVxdWlyZXNJbnB1dCIsInBhcmFtZXRlcnMiLCJzb3J0IiwiYSIsImV4cG9ydHMiXSwic291cmNlcyI6WyIvVXNlcnMva2l0ZWxldi9Eb2N1bWVudHMvZXhvY29ydGV4LW9ic2lkaWFuLXBsdWdpbi9zcmMvYXBwbGljYXRpb24vdXNlLWNhc2VzL1JlbmRlckNsYXNzQnV0dG9uc1VzZUNhc2UudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgVXNlQ2FzZSB9IGZyb20gJy4uL2NvcmUvVXNlQ2FzZSc7XG5pbXBvcnQgeyBSZXN1bHQgfSBmcm9tICcuLi8uLi9kb21haW4vY29yZS9SZXN1bHQnO1xuaW1wb3J0IHsgSUNsYXNzVmlld1JlcG9zaXRvcnkgfSBmcm9tICcuLi8uLi9kb21haW4vcmVwb3NpdG9yaWVzL0lDbGFzc1ZpZXdSZXBvc2l0b3J5JztcbmltcG9ydCB7IElCdXR0b25SZXBvc2l0b3J5IH0gZnJvbSAnLi4vLi4vZG9tYWluL3JlcG9zaXRvcmllcy9JQnV0dG9uUmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBDbGFzc05hbWUgfSBmcm9tICcuLi8uLi9kb21haW4vdmFsdWUtb2JqZWN0cy9DbGFzc05hbWUnO1xuaW1wb3J0IHsgVUlCdXR0b24gfSBmcm9tICcuLi8uLi9kb21haW4vZW50aXRpZXMvVUlCdXR0b24nO1xuaW1wb3J0IHsgQnV0dG9uQ29tbWFuZCB9IGZyb20gJy4uLy4uL2RvbWFpbi9lbnRpdGllcy9CdXR0b25Db21tYW5kJztcblxuLyoqXG4gKiBVc2UgQ2FzZSBmb3IgcmVuZGVyaW5nIGJ1dHRvbnMgaW4gYW4gYXNzZXQgdmlld1xuICogRm9sbG93aW5nIENsZWFuIEFyY2hpdGVjdHVyZSAtIG9yY2hlc3RyYXRlcyBkb21haW4gbG9naWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZW5kZXJDbGFzc0J1dHRvbnNSZXF1ZXN0IHtcbiAgICBjbGFzc05hbWU6IHN0cmluZztcbiAgICBhc3NldElkPzogc3RyaW5nO1xuICAgIGNvbnRleHQ/OiB7XG4gICAgICAgIGhhc1NlbGVjdGlvbjogYm9vbGVhbjtcbiAgICAgICAgY3VycmVudFVzZXI/OiBzdHJpbmc7XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCdXR0b25SZW5kZXJEYXRhIHtcbiAgICBidXR0b25JZDogc3RyaW5nO1xuICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgdG9vbHRpcD86IHN0cmluZztcbiAgICBpc0VuYWJsZWQ6IGJvb2xlYW47XG4gICAgb3JkZXI6IG51bWJlcjtcbiAgICBjb21tYW5kOiB7XG4gICAgICAgIGlkOiBzdHJpbmc7XG4gICAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgICAgcmVxdWlyZXNJbnB1dDogYm9vbGVhbjtcbiAgICAgICAgcGFyYW1ldGVyczogYW55W107XG4gICAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSZW5kZXJDbGFzc0J1dHRvbnNSZXNwb25zZSB7XG4gICAgYnV0dG9uczogQnV0dG9uUmVuZGVyRGF0YVtdO1xuICAgIGRpc3BsYXlPcHRpb25zOiB7XG4gICAgICAgIHBvc2l0aW9uOiAndG9wJyB8ICdib3R0b20nIHwgJ2Zsb2F0aW5nJztcbiAgICAgICAgc2hvd0J1dHRvbnM6IGJvb2xlYW47XG4gICAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIFJlbmRlckNsYXNzQnV0dG9uc1VzZUNhc2UgXG4gICAgaW1wbGVtZW50cyBVc2VDYXNlPFJlbmRlckNsYXNzQnV0dG9uc1JlcXVlc3QsIFJlbmRlckNsYXNzQnV0dG9uc1Jlc3BvbnNlPiB7XG4gICAgXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgY2xhc3NWaWV3UmVwb3NpdG9yeTogSUNsYXNzVmlld1JlcG9zaXRvcnksXG4gICAgICAgIHByaXZhdGUgYnV0dG9uUmVwb3NpdG9yeTogSUJ1dHRvblJlcG9zaXRvcnlcbiAgICApIHt9XG5cbiAgICBhc3luYyBleGVjdXRlKHJlcXVlc3Q6IFJlbmRlckNsYXNzQnV0dG9uc1JlcXVlc3QpOiBQcm9taXNlPFJlc3VsdDxSZW5kZXJDbGFzc0J1dHRvbnNSZXNwb25zZT4+IHtcbiAgICAgICAgLy8gVmFsaWRhdGUgcmVxdWVzdFxuICAgICAgICBpZiAoIXJlcXVlc3QuY2xhc3NOYW1lKSB7XG4gICAgICAgICAgICByZXR1cm4gUmVzdWx0LmZhaWw8UmVuZGVyQ2xhc3NCdXR0b25zUmVzcG9uc2U+KCdDbGFzcyBuYW1lIGlzIHJlcXVpcmVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgQ2xhc3NOYW1lIHZhbHVlIG9iamVjdFxuICAgICAgICBjb25zdCBjbGFzc05hbWVSZXN1bHQgPSBDbGFzc05hbWUuY3JlYXRlKHJlcXVlc3QuY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKGNsYXNzTmFtZVJlc3VsdC5pc0ZhaWx1cmUpIHtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQuZmFpbDxSZW5kZXJDbGFzc0J1dHRvbnNSZXNwb25zZT4oY2xhc3NOYW1lUmVzdWx0LmVycm9yKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjbGFzc05hbWUgPSBjbGFzc05hbWVSZXN1bHQuZ2V0VmFsdWUoKTtcblxuICAgICAgICAvLyBGaW5kIENsYXNzVmlldyBjb25maWd1cmF0aW9uXG4gICAgICAgIGNvbnN0IGNsYXNzVmlld1Jlc3VsdCA9IGF3YWl0IHRoaXMuY2xhc3NWaWV3UmVwb3NpdG9yeS5maW5kQnlDbGFzc05hbWUoY2xhc3NOYW1lKTtcbiAgICAgICAgaWYgKGNsYXNzVmlld1Jlc3VsdC5pc0ZhaWx1cmUpIHtcbiAgICAgICAgICAgIHJldHVybiBSZXN1bHQuZmFpbDxSZW5kZXJDbGFzc0J1dHRvbnNSZXNwb25zZT4oXG4gICAgICAgICAgICAgICAgYEZhaWxlZCB0byBsb2FkIGNsYXNzIHZpZXc6ICR7Y2xhc3NWaWV3UmVzdWx0LmVycm9yfWBcbiAgICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjbGFzc1ZpZXcgPSBjbGFzc1ZpZXdSZXN1bHQuZ2V0VmFsdWUoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIElmIG5vIENsYXNzVmlldyBjb25maWd1cmVkLCByZXR1cm4gZW1wdHkgYnV0dG9uc1xuICAgICAgICBpZiAoIWNsYXNzVmlldykge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5vazxSZW5kZXJDbGFzc0J1dHRvbnNSZXNwb25zZT4oe1xuICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFtdLFxuICAgICAgICAgICAgICAgIGRpc3BsYXlPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAndG9wJyxcbiAgICAgICAgICAgICAgICAgICAgc2hvd0J1dHRvbnM6IGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiBidXR0b25zIHNob3VsZCBiZSBzaG93blxuICAgICAgICBpZiAoIWNsYXNzVmlldy5kaXNwbGF5T3B0aW9ucy5zaG93QnV0dG9ucykge1xuICAgICAgICAgICAgcmV0dXJuIFJlc3VsdC5vazxSZW5kZXJDbGFzc0J1dHRvbnNSZXNwb25zZT4oe1xuICAgICAgICAgICAgICAgIGJ1dHRvbnM6IFtdLFxuICAgICAgICAgICAgICAgIGRpc3BsYXlPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBjbGFzc1ZpZXcuZGlzcGxheU9wdGlvbnMuYnV0dG9uUG9zaXRpb24sXG4gICAgICAgICAgICAgICAgICAgIHNob3dCdXR0b25zOiBmYWxzZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2V0IGVuYWJsZWQgYnV0dG9uc1xuICAgICAgICBjb25zdCBlbmFibGVkQnV0dG9ucyA9IGNsYXNzVmlldy5nZXRFbmFibGVkQnV0dG9ucygpO1xuICAgICAgICBcbiAgICAgICAgLy8gTG9hZCBjb21tYW5kcyBmb3IgZWFjaCBidXR0b25cbiAgICAgICAgY29uc3QgYnV0dG9uUmVuZGVyRGF0YTogQnV0dG9uUmVuZGVyRGF0YVtdID0gW107XG4gICAgICAgIFxuICAgICAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiBlbmFibGVkQnV0dG9ucykge1xuICAgICAgICAgICAgY29uc3QgY29tbWFuZFJlc3VsdCA9IGF3YWl0IHRoaXMuYnV0dG9uUmVwb3NpdG9yeS5maW5kQ29tbWFuZEJ5SWQoYnV0dG9uLmNvbW1hbmRJZCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChjb21tYW5kUmVzdWx0LmlzRmFpbHVyZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgRmFpbGVkIHRvIGxvYWQgY29tbWFuZCBmb3IgYnV0dG9uICR7YnV0dG9uLmlkfTogJHtjb21tYW5kUmVzdWx0LmVycm9yfWApO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBjb21tYW5kID0gY29tbWFuZFJlc3VsdC5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgaWYgKCFjb21tYW5kKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBDb21tYW5kIG5vdCBmb3VuZCBmb3IgYnV0dG9uICR7YnV0dG9uLmlkfWApO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBDaGVjayBpZiBjb21tYW5kIGNhbiBiZSBleGVjdXRlZCBpbiBjdXJyZW50IGNvbnRleHRcbiAgICAgICAgICAgIGNvbnN0IGNhbkV4ZWN1dGUgPSBjb21tYW5kLmNhbkV4ZWN1dGUoe1xuICAgICAgICAgICAgICAgIGN1cnJlbnRDbGFzczogcmVxdWVzdC5jbGFzc05hbWUsXG4gICAgICAgICAgICAgICAgaGFzU2VsZWN0aW9uOiByZXF1ZXN0LmNvbnRleHQ/Lmhhc1NlbGVjdGlvbiB8fCBmYWxzZVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIE9ubHkgaW5jbHVkZSBidXR0b24gaWYgaXQgY2FuIGJlIGV4ZWN1dGVkXG4gICAgICAgICAgICBpZiAoY2FuRXhlY3V0ZSkge1xuICAgICAgICAgICAgICAgIGJ1dHRvblJlbmRlckRhdGEucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbklkOiBidXR0b24uaWQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgbGFiZWw6IGJ1dHRvbi5sYWJlbCxcbiAgICAgICAgICAgICAgICAgICAgdG9vbHRpcDogYnV0dG9uLnRvb2x0aXAsXG4gICAgICAgICAgICAgICAgICAgIGlzRW5hYmxlZDogYnV0dG9uLmlzRW5hYmxlZCxcbiAgICAgICAgICAgICAgICAgICAgb3JkZXI6IGJ1dHRvbi5vcmRlcixcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvbW1hbmQuaWQudG9TdHJpbmcoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGNvbW1hbmQudHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVzSW5wdXQ6IGNvbW1hbmQucmVxdWlyZXNJbnB1dCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IGNvbW1hbmQucGFyYW1ldGVyc1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTb3J0IGJ1dHRvbnMgYnkgb3JkZXJcbiAgICAgICAgYnV0dG9uUmVuZGVyRGF0YS5zb3J0KChhLCBiKSA9PiBhLm9yZGVyIC0gYi5vcmRlcik7XG5cbiAgICAgICAgcmV0dXJuIFJlc3VsdC5vazxSZW5kZXJDbGFzc0J1dHRvbnNSZXNwb25zZT4oe1xuICAgICAgICAgICAgYnV0dG9uczogYnV0dG9uUmVuZGVyRGF0YSxcbiAgICAgICAgICAgIGRpc3BsYXlPcHRpb25zOiB7XG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGNsYXNzVmlldy5kaXNwbGF5T3B0aW9ucy5idXR0b25Qb3NpdGlvbixcbiAgICAgICAgICAgICAgICBzaG93QnV0dG9uczogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG59Il0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQXFEUTtJQUFBQSxjQUFBLFlBQUFBLENBQUE7TUFBQSxPQUFBQyxjQUFBO0lBQUE7RUFBQTtFQUFBLE9BQUFBLGNBQUE7QUFBQTtBQUFBRCxjQUFBO0FBQUFBLGNBQUEsR0FBQUUsQ0FBQTs7Ozs7Ozs7OztBQXBEUixNQUFBQyxRQUFBO0FBQUE7QUFBQSxDQUFBSCxjQUFBLEdBQUFFLENBQUEsT0FBQUUsT0FBQTtBQUdBLE1BQUFDLFdBQUE7QUFBQTtBQUFBLENBQUFMLGNBQUEsR0FBQUUsQ0FBQSxPQUFBRSxPQUFBO0FBdUNBLE1BQWFFLHlCQUF5QjtFQUdsQ0MsWUFDWUMsbUJBQXlDLEVBQ3pDQyxnQkFBbUM7SUFBQTtJQUFBVCxjQUFBLEdBQUFVLENBQUE7SUFBQVYsY0FBQSxHQUFBRSxDQUFBO0lBRG5DLEtBQUFNLG1CQUFtQixHQUFuQkEsbUJBQW1CO0lBQXNCO0lBQUFSLGNBQUEsR0FBQUUsQ0FBQTtJQUN6QyxLQUFBTyxnQkFBZ0IsR0FBaEJBLGdCQUFnQjtFQUN6QjtFQUVHRSxPQUFPQSxDQUFDQyxPQUFrQztJQUFBO0lBQUFaLGNBQUEsR0FBQVUsQ0FBQTs7Ozs7Ozs7TUFDNUM7TUFDQSxJQUFJLENBQUNFLE9BQU8sQ0FBQ0MsU0FBUyxFQUFFO1FBQUE7UUFBQWIsY0FBQSxHQUFBYyxDQUFBO1FBQUFkLGNBQUEsR0FBQUUsQ0FBQTtRQUNwQixPQUFPQyxRQUFBLENBQUFZLE1BQU0sQ0FBQ0MsSUFBSSxDQUE2Qix3QkFBd0IsQ0FBQztPQUMzRTtNQUFBO01BQUE7UUFBQWhCLGNBQUEsR0FBQWMsQ0FBQTtNQUFBO01BRUQ7TUFDQSxNQUFNRyxlQUFlO01BQUE7TUFBQSxDQUFBakIsY0FBQSxHQUFBRSxDQUFBLFFBQUdHLFdBQUEsQ0FBQWEsU0FBUyxDQUFDQyxNQUFNLENBQUNQLE9BQU8sQ0FBQ0MsU0FBUyxDQUFDO01BQUM7TUFBQWIsY0FBQSxHQUFBRSxDQUFBO01BQzVELElBQUllLGVBQWUsQ0FBQ0csU0FBUyxFQUFFO1FBQUE7UUFBQXBCLGNBQUEsR0FBQWMsQ0FBQTtRQUFBZCxjQUFBLEdBQUFFLENBQUE7UUFDM0IsT0FBT0MsUUFBQSxDQUFBWSxNQUFNLENBQUNDLElBQUksQ0FBNkJDLGVBQWUsQ0FBQ0ksS0FBSyxDQUFDO09BQ3hFO01BQUE7TUFBQTtRQUFBckIsY0FBQSxHQUFBYyxDQUFBO01BQUE7TUFDRCxNQUFNRCxTQUFTO01BQUE7TUFBQSxDQUFBYixjQUFBLEdBQUFFLENBQUEsUUFBR2UsZUFBZSxDQUFDSyxRQUFRLEVBQUU7TUFFNUM7TUFDQSxNQUFNQyxlQUFlO01BQUE7TUFBQSxDQUFBdkIsY0FBQSxHQUFBRSxDQUFBLFFBQUcsTUFBTSxJQUFJLENBQUNNLG1CQUFtQixDQUFDZ0IsZUFBZSxDQUFDWCxTQUFTLENBQUM7TUFBQztNQUFBYixjQUFBLEdBQUFFLENBQUE7TUFDbEYsSUFBSXFCLGVBQWUsQ0FBQ0gsU0FBUyxFQUFFO1FBQUE7UUFBQXBCLGNBQUEsR0FBQWMsQ0FBQTtRQUFBZCxjQUFBLEdBQUFFLENBQUE7UUFDM0IsT0FBT0MsUUFBQSxDQUFBWSxNQUFNLENBQUNDLElBQUksQ0FDZCw4QkFBOEJPLGVBQWUsQ0FBQ0YsS0FBSyxFQUFFLENBQ3hEO09BQ0o7TUFBQTtNQUFBO1FBQUFyQixjQUFBLEdBQUFjLENBQUE7TUFBQTtNQUVELE1BQU1XLFNBQVM7TUFBQTtNQUFBLENBQUF6QixjQUFBLEdBQUFFLENBQUEsUUFBR3FCLGVBQWUsQ0FBQ0QsUUFBUSxFQUFFO01BRTVDO01BQUE7TUFBQXRCLGNBQUEsR0FBQUUsQ0FBQTtNQUNBLElBQUksQ0FBQ3VCLFNBQVMsRUFBRTtRQUFBO1FBQUF6QixjQUFBLEdBQUFjLENBQUE7UUFBQWQsY0FBQSxHQUFBRSxDQUFBO1FBQ1osT0FBT0MsUUFBQSxDQUFBWSxNQUFNLENBQUNXLEVBQUUsQ0FBNkI7VUFDekNDLE9BQU8sRUFBRSxFQUFFO1VBQ1hDLGNBQWMsRUFBRTtZQUNaQyxRQUFRLEVBQUUsS0FBSztZQUNmQyxXQUFXLEVBQUU7O1NBRXBCLENBQUM7T0FDTDtNQUFBO01BQUE7UUFBQTlCLGNBQUEsR0FBQWMsQ0FBQTtNQUFBO01BRUQ7TUFBQWQsY0FBQSxHQUFBRSxDQUFBO01BQ0EsSUFBSSxDQUFDdUIsU0FBUyxDQUFDRyxjQUFjLENBQUNFLFdBQVcsRUFBRTtRQUFBO1FBQUE5QixjQUFBLEdBQUFjLENBQUE7UUFBQWQsY0FBQSxHQUFBRSxDQUFBO1FBQ3ZDLE9BQU9DLFFBQUEsQ0FBQVksTUFBTSxDQUFDVyxFQUFFLENBQTZCO1VBQ3pDQyxPQUFPLEVBQUUsRUFBRTtVQUNYQyxjQUFjLEVBQUU7WUFDWkMsUUFBUSxFQUFFSixTQUFTLENBQUNHLGNBQWMsQ0FBQ0csY0FBYztZQUNqREQsV0FBVyxFQUFFOztTQUVwQixDQUFDO09BQ0w7TUFBQTtNQUFBO1FBQUE5QixjQUFBLEdBQUFjLENBQUE7TUFBQTtNQUVEO01BQ0EsTUFBTWtCLGNBQWM7TUFBQTtNQUFBLENBQUFoQyxjQUFBLEdBQUFFLENBQUEsUUFBR3VCLFNBQVMsQ0FBQ1EsaUJBQWlCLEVBQUU7TUFFcEQ7TUFDQSxNQUFNQyxnQkFBZ0I7TUFBQTtNQUFBLENBQUFsQyxjQUFBLEdBQUFFLENBQUEsUUFBdUIsRUFBRTtNQUFDO01BQUFGLGNBQUEsR0FBQUUsQ0FBQTtNQUVoRCxLQUFLLE1BQU1pQyxNQUFNLElBQUlILGNBQWMsRUFBRTtRQUNqQyxNQUFNSSxhQUFhO1FBQUE7UUFBQSxDQUFBcEMsY0FBQSxHQUFBRSxDQUFBLFFBQUcsTUFBTSxJQUFJLENBQUNPLGdCQUFnQixDQUFDNEIsZUFBZSxDQUFDRixNQUFNLENBQUNHLFNBQVMsQ0FBQztRQUFDO1FBQUF0QyxjQUFBLEdBQUFFLENBQUE7UUFFcEYsSUFBSWtDLGFBQWEsQ0FBQ2hCLFNBQVMsRUFBRTtVQUFBO1VBQUFwQixjQUFBLEdBQUFjLENBQUE7VUFBQWQsY0FBQSxHQUFBRSxDQUFBO1VBQ3pCcUMsT0FBTyxDQUFDQyxJQUFJLENBQUMscUNBQXFDTCxNQUFNLENBQUNNLEVBQUUsS0FBS0wsYUFBYSxDQUFDZixLQUFLLEVBQUUsQ0FBQztVQUFDO1VBQUFyQixjQUFBLEdBQUFFLENBQUE7VUFDdkY7U0FDSDtRQUFBO1FBQUE7VUFBQUYsY0FBQSxHQUFBYyxDQUFBO1FBQUE7UUFFRCxNQUFNNEIsT0FBTztRQUFBO1FBQUEsQ0FBQTFDLGNBQUEsR0FBQUUsQ0FBQSxRQUFHa0MsYUFBYSxDQUFDZCxRQUFRLEVBQUU7UUFBQztRQUFBdEIsY0FBQSxHQUFBRSxDQUFBO1FBQ3pDLElBQUksQ0FBQ3dDLE9BQU8sRUFBRTtVQUFBO1VBQUExQyxjQUFBLEdBQUFjLENBQUE7VUFBQWQsY0FBQSxHQUFBRSxDQUFBO1VBQ1ZxQyxPQUFPLENBQUNDLElBQUksQ0FBQyxnQ0FBZ0NMLE1BQU0sQ0FBQ00sRUFBRSxFQUFFLENBQUM7VUFBQztVQUFBekMsY0FBQSxHQUFBRSxDQUFBO1VBQzFEO1NBQ0g7UUFBQTtRQUFBO1VBQUFGLGNBQUEsR0FBQWMsQ0FBQTtRQUFBO1FBRUQ7UUFDQSxNQUFNNkIsVUFBVTtRQUFBO1FBQUEsQ0FBQTNDLGNBQUEsR0FBQUUsQ0FBQSxRQUFHd0MsT0FBTyxDQUFDQyxVQUFVLENBQUM7VUFDbENDLFlBQVksRUFBRWhDLE9BQU8sQ0FBQ0MsU0FBUztVQUMvQmdDLFlBQVk7VUFBRTtVQUFBLENBQUE3QyxjQUFBLEdBQUFjLENBQUE7VUFBQTtVQUFBLENBQUFkLGNBQUEsR0FBQWMsQ0FBQSxXQUFBZ0MsRUFBQSxHQUFBbEMsT0FBTyxDQUFDbUMsT0FBTztVQUFBO1VBQUEsQ0FBQS9DLGNBQUEsR0FBQWMsQ0FBQSxVQUFBZ0MsRUFBQTtVQUFBO1VBQUEsQ0FBQTlDLGNBQUEsR0FBQWMsQ0FBQTtVQUFBO1VBQUEsQ0FBQWQsY0FBQSxHQUFBYyxDQUFBLFVBQUFnQyxFQUFBLENBQUVELFlBQVk7VUFBQTtVQUFBLENBQUE3QyxjQUFBLEdBQUFjLENBQUEsVUFBSSxLQUFLO1NBQ3ZELENBQUM7UUFFRjtRQUFBO1FBQUFkLGNBQUEsR0FBQUUsQ0FBQTtRQUNBLElBQUl5QyxVQUFVLEVBQUU7VUFBQTtVQUFBM0MsY0FBQSxHQUFBYyxDQUFBO1VBQUFkLGNBQUEsR0FBQUUsQ0FBQTtVQUNaZ0MsZ0JBQWdCLENBQUNjLElBQUksQ0FBQztZQUNsQkMsUUFBUSxFQUFFZCxNQUFNLENBQUNNLEVBQUUsQ0FBQ1MsUUFBUSxFQUFFO1lBQzlCQyxLQUFLLEVBQUVoQixNQUFNLENBQUNnQixLQUFLO1lBQ25CQyxPQUFPLEVBQUVqQixNQUFNLENBQUNpQixPQUFPO1lBQ3ZCQyxTQUFTLEVBQUVsQixNQUFNLENBQUNrQixTQUFTO1lBQzNCQyxLQUFLLEVBQUVuQixNQUFNLENBQUNtQixLQUFLO1lBQ25CWixPQUFPLEVBQUU7Y0FDTEQsRUFBRSxFQUFFQyxPQUFPLENBQUNELEVBQUUsQ0FBQ1MsUUFBUSxFQUFFO2NBQ3pCSyxJQUFJLEVBQUViLE9BQU8sQ0FBQ2EsSUFBSTtjQUNsQkMsYUFBYSxFQUFFZCxPQUFPLENBQUNjLGFBQWE7Y0FDcENDLFVBQVUsRUFBRWYsT0FBTyxDQUFDZTs7V0FFM0IsQ0FBQztTQUNMO1FBQUE7UUFBQTtVQUFBekQsY0FBQSxHQUFBYyxDQUFBO1FBQUE7O01BR0w7TUFBQTtNQUFBZCxjQUFBLEdBQUFFLENBQUE7TUFDQWdDLGdCQUFnQixDQUFDd0IsSUFBSSxDQUFDLENBQUNDLENBQUMsRUFBRTdDLENBQUMsS0FBSztRQUFBO1FBQUFkLGNBQUEsR0FBQVUsQ0FBQTtRQUFBVixjQUFBLEdBQUFFLENBQUE7UUFBQSxPQUFBeUQsQ0FBQyxDQUFDTCxLQUFLLEdBQUd4QyxDQUFDLENBQUN3QyxLQUFLO01BQUwsQ0FBSyxDQUFDO01BQUM7TUFBQXRELGNBQUEsR0FBQUUsQ0FBQTtNQUVuRCxPQUFPQyxRQUFBLENBQUFZLE1BQU0sQ0FBQ1csRUFBRSxDQUE2QjtRQUN6Q0MsT0FBTyxFQUFFTyxnQkFBZ0I7UUFDekJOLGNBQWMsRUFBRTtVQUNaQyxRQUFRLEVBQUVKLFNBQVMsQ0FBQ0csY0FBYyxDQUFDRyxjQUFjO1VBQ2pERCxXQUFXLEVBQUU7O09BRXBCLENBQUM7Ozs7QUFFVDtBQUFBOUIsY0FBQSxHQUFBRSxDQUFBO0FBNUdEMEQsT0FBQSxDQUFBdEQseUJBQUEsR0FBQUEseUJBQUEiLCJpZ25vcmVMaXN0IjpbXX0=