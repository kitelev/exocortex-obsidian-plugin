ae7a389078de9cb1da78de8871846b94
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.Entity = void 0;
/**
 * Base Entity class for Domain-Driven Design
 * Entities have identity and lifecycle
 */
class Entity {
    constructor(props) {
        this._domainEvents = [];
        this.props = props;
    }
    /**
     * Entities are equal if they have the same ID
     */
    equals(object) {
        if (object === null || object === undefined) {
            return false;
        }
        if (this === object) {
            return true;
        }
        if (!this.isEntity(object)) {
            return false;
        }
        return this._id === object._id;
    }
    isEntity(v) {
        return v instanceof Entity;
    }
    /**
     * Domain events
     */
    addDomainEvent(domainEvent) {
        this._domainEvents.push(domainEvent);
    }
    clearEvents() {
        this._domainEvents = [];
    }
    get domainEvents() {
        return this._domainEvents;
    }
    getDomainEvents() {
        return this._domainEvents;
    }
    clearDomainEvents() {
        this._domainEvents = [];
    }
}
exports.Entity = Entity;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vc3JjL2RvbWFpbi9jb3JlL0VudGl0eS50cyIsIm1hcHBpbmdzIjoiOzs7QUFBQTs7O0dBR0c7QUFDSCxNQUFzQixNQUFNO0lBS3hCLFlBQXNCLEtBQVE7UUFGdEIsa0JBQWEsR0FBVSxFQUFFLENBQUM7UUFHOUIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUM7SUFDdkIsQ0FBQztJQUVEOztPQUVHO0lBQ0ksTUFBTSxDQUFDLE1BQWtCO1FBQzVCLElBQUksTUFBTSxLQUFLLElBQUksSUFBSSxNQUFNLEtBQUssU0FBUyxFQUFFO1lBQ3pDLE9BQU8sS0FBSyxDQUFDO1NBQ2hCO1FBRUQsSUFBSSxJQUFJLEtBQUssTUFBTSxFQUFFO1lBQ2pCLE9BQU8sSUFBSSxDQUFDO1NBQ2Y7UUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRTtZQUN4QixPQUFPLEtBQUssQ0FBQztTQUNoQjtRQUVELE9BQU8sSUFBSSxDQUFDLEdBQUcsS0FBSyxNQUFNLENBQUMsR0FBRyxDQUFDO0lBQ25DLENBQUM7SUFFTyxRQUFRLENBQUMsQ0FBTTtRQUNuQixPQUFPLENBQUMsWUFBWSxNQUFNLENBQUM7SUFDL0IsQ0FBQztJQUVEOztPQUVHO0lBQ08sY0FBYyxDQUFDLFdBQWdCO1FBQ3JDLElBQUksQ0FBQyxhQUFhLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFFTSxXQUFXO1FBQ2QsSUFBSSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUM7SUFDNUIsQ0FBQztJQUVELElBQVcsWUFBWTtRQUNuQixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7SUFDOUIsQ0FBQztJQUVTLGVBQWU7UUFDckIsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzlCLENBQUM7SUFFUyxpQkFBaUI7UUFDdkIsSUFBSSxDQUFDLGFBQWEsR0FBRyxFQUFFLENBQUM7SUFDNUIsQ0FBQztDQUNKO0FBdERELHdCQXNEQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMva2l0ZWxldi9Eb2N1bWVudHMvZXhvY29ydGV4LW9ic2lkaWFuLXBsdWdpbi9zcmMvZG9tYWluL2NvcmUvRW50aXR5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQmFzZSBFbnRpdHkgY2xhc3MgZm9yIERvbWFpbi1Ecml2ZW4gRGVzaWduXG4gKiBFbnRpdGllcyBoYXZlIGlkZW50aXR5IGFuZCBsaWZlY3ljbGVcbiAqL1xuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEVudGl0eTxUPiB7XG4gICAgcHJvdGVjdGVkIHJlYWRvbmx5IF9pZDogc3RyaW5nIHwgbnVtYmVyO1xuICAgIHByb3RlY3RlZCBwcm9wczogVDtcbiAgICBwcml2YXRlIF9kb21haW5FdmVudHM6IGFueVtdID0gW107XG5cbiAgICBwcm90ZWN0ZWQgY29uc3RydWN0b3IocHJvcHM6IFQpIHtcbiAgICAgICAgdGhpcy5wcm9wcyA9IHByb3BzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEVudGl0aWVzIGFyZSBlcXVhbCBpZiB0aGV5IGhhdmUgdGhlIHNhbWUgSURcbiAgICAgKi9cbiAgICBwdWJsaWMgZXF1YWxzKG9iamVjdD86IEVudGl0eTxUPik6IGJvb2xlYW4ge1xuICAgICAgICBpZiAob2JqZWN0ID09PSBudWxsIHx8IG9iamVjdCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcyA9PT0gb2JqZWN0KSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghdGhpcy5pc0VudGl0eShvYmplY3QpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gdGhpcy5faWQgPT09IG9iamVjdC5faWQ7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpc0VudGl0eSh2OiBhbnkpOiB2IGlzIEVudGl0eTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHYgaW5zdGFuY2VvZiBFbnRpdHk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogRG9tYWluIGV2ZW50c1xuICAgICAqL1xuICAgIHByb3RlY3RlZCBhZGREb21haW5FdmVudChkb21haW5FdmVudDogYW55KTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2RvbWFpbkV2ZW50cy5wdXNoKGRvbWFpbkV2ZW50KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgY2xlYXJFdmVudHMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2RvbWFpbkV2ZW50cyA9IFtdO1xuICAgIH1cblxuICAgIHB1YmxpYyBnZXQgZG9tYWluRXZlbnRzKCk6IGFueVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RvbWFpbkV2ZW50cztcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0RG9tYWluRXZlbnRzKCk6IGFueVtdIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RvbWFpbkV2ZW50cztcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgY2xlYXJEb21haW5FdmVudHMoKTogdm9pZCB7XG4gICAgICAgIHRoaXMuX2RvbWFpbkV2ZW50cyA9IFtdO1xuICAgIH1cbn0iXSwidmVyc2lvbiI6M30=