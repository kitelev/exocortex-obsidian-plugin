a5b9475a19ed83c0d8d120700ceccf9e
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
// Mock CreateAssetModal
jest.mock('../../src/presentation/modals/CreateAssetModal');
// Mock DIContainer
jest.mock('../../src/infrastructure/container/DIContainer', () => {
    const mockContainer = {
        getCreateAssetUseCase: jest.fn().mockReturnValue({
            execute: jest.fn().mockResolvedValue({
                success: true,
                message: 'Asset created'
            })
        }),
        getPropertyEditingUseCase: jest.fn().mockReturnValue({
            execute: jest.fn().mockResolvedValue({
                success: true,
                message: 'Property edited'
            })
        }),
        resolve: jest.fn().mockImplementation(() => ({})),
        dispose: jest.fn()
    };
    return {
        DIContainer: {
            initialize: jest.fn((app, plugin) => mockContainer),
            getInstance: jest.fn(() => mockContainer),
            instance: mockContainer
        }
    };
});
const main_1 = tslib_1.__importDefault(require("../../src/main"));
describe('Command Registration Integration Tests', () => {
    let app;
    let plugin;
    let addCommandSpy;
    let addRibbonIconSpy;
    beforeEach(() => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
        // Setup app mock
        app = {
            vault: {
                getMarkdownFiles: jest.fn().mockReturnValue([]),
                read: jest.fn().mockResolvedValue(''),
                on: jest.fn()
            },
            workspace: {
                openLinkText: jest.fn()
            }
        };
        // Create plugin instance
        plugin = new main_1.default(app, {
            id: 'exocortex',
            name: 'Exocortex',
            version: '2.16.0',
            minAppVersion: '1.0.0',
            description: 'SPARQL queries in Obsidian',
            author: 'Test Author',
            authorUrl: '',
            isDesktopOnly: false
        });
        // Setup spies for command registration
        addCommandSpy = jest.spyOn(plugin, 'addCommand');
        addRibbonIconSpy = jest.spyOn(plugin, 'addRibbonIcon');
        // DIContainer is already mocked at the module level
    }));
    afterEach(() => {
        jest.clearAllMocks();
        jest.resetModules();
    });
    describe('Create ExoAsset Command Registration', () => {
        test('should register create-exo-asset command on plugin load', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            expect(addCommandSpy).toHaveBeenCalledWith({
                id: 'create-exo-asset',
                name: 'Create new ExoAsset',
                hotkeys: [{ modifiers: ["Mod", "Shift"], key: "n" }],
                callback: expect.any(Function)
            });
        }));
        test('should register ribbon icon for create asset', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            expect(addRibbonIconSpy).toHaveBeenCalledWith('plus-circle', 'Create ExoAsset', expect.any(Function));
        }));
        test('should have valid command callback', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            // Get the callback function from the command registration
            const commandCall = addCommandSpy.mock.calls.find(call => call[0].id === 'create-exo-asset');
            expect(commandCall).toBeDefined();
            const callback = commandCall[0].callback;
            // Verify callback is a function and doesn't throw when executed
            expect(typeof callback).toBe('function');
            expect(() => callback()).not.toThrow();
        }));
        test('should have valid ribbon callback', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            // Get the callback function from the ribbon icon registration
            const ribbonCall = addRibbonIconSpy.mock.calls.find(call => call[1] === 'Create ExoAsset');
            expect(ribbonCall).toBeDefined();
            const callback = ribbonCall[2];
            // Verify callback is a function and doesn't throw when executed
            expect(typeof callback).toBe('function');
            expect(() => callback()).not.toThrow();
        }));
    });
    describe('Command Properties', () => {
        test('should have correct command ID', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const commandCall = addCommandSpy.mock.calls.find(call => call[0].id === 'create-exo-asset');
            expect(commandCall[0].id).toBe('create-exo-asset');
        }));
        test('should have correct command name', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const commandCall = addCommandSpy.mock.calls.find(call => call[0].id === 'create-exo-asset');
            expect(commandCall[0].name).toBe('Create new ExoAsset');
        }));
        test('should have correct hotkey combination', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const commandCall = addCommandSpy.mock.calls.find(call => call[0].id === 'create-exo-asset');
            expect(commandCall[0].hotkeys).toEqual([
                { modifiers: ["Mod", "Shift"], key: "n" }
            ]);
        }));
        test('should have valid callback function', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const commandCall = addCommandSpy.mock.calls.find(call => call[0].id === 'create-exo-asset');
            expect(typeof commandCall[0].callback).toBe('function');
        }));
    });
    describe('Ribbon Icon Properties', () => {
        test('should use plus-circle icon', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const ribbonCall = addRibbonIconSpy.mock.calls.find(call => call[1] === 'Create ExoAsset');
            expect(ribbonCall[0]).toBe('plus-circle');
        }));
        test('should have correct tooltip text', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const ribbonCall = addRibbonIconSpy.mock.calls.find(call => call[0] === 'plus-circle');
            expect(ribbonCall[1]).toBe('Create ExoAsset');
        }));
        test('should have valid callback function', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const ribbonCall = addRibbonIconSpy.mock.calls.find(call => call[1] === 'Create ExoAsset');
            expect(typeof ribbonCall[2]).toBe('function');
        }));
    });
    describe('Command Integration with Other Components', () => {
        test('should register SPARQL processor alongside create asset command', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const registerMarkdownCodeBlockProcessorSpy = jest.spyOn(plugin, 'registerMarkdownCodeBlockProcessor');
            yield plugin.onload();
            expect(registerMarkdownCodeBlockProcessorSpy).toHaveBeenCalledWith('sparql', expect.any(Function));
            expect(addCommandSpy).toHaveBeenCalled();
        }));
        test('should register file event handlers alongside commands', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const registerEventSpy = jest.spyOn(plugin, 'registerEvent');
            yield plugin.onload();
            expect(registerEventSpy).toHaveBeenCalledTimes(3); // modify, create, delete
            expect(addCommandSpy).toHaveBeenCalled();
        }));
    });
    describe('Command Error Handling', () => {
        test('command callback should be resilient', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const commandCall = addCommandSpy.mock.calls.find(call => call[0].id === 'create-exo-asset');
            // Verify callback exists and is a function
            expect(commandCall).toBeDefined();
            expect(typeof commandCall[0].callback).toBe('function');
            // Should not throw when executed (CreateAssetModal creation is internal)
            expect(() => commandCall[0].callback()).not.toThrow();
        }));
        test('ribbon callback should be resilient', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const ribbonCall = addRibbonIconSpy.mock.calls.find(call => call[1] === 'Create ExoAsset');
            // Verify callback exists and is a function
            expect(ribbonCall).toBeDefined();
            expect(typeof ribbonCall[2]).toBe('function');
            // Should not throw when executed
            expect(() => ribbonCall[2]()).not.toThrow();
        }));
    });
    describe('Plugin Lifecycle', () => {
        test('should register commands only during onload', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Commands should not be registered before onload
            expect(addCommandSpy).not.toHaveBeenCalled();
            yield plugin.onload();
            // Commands should be registered after onload
            expect(addCommandSpy).toHaveBeenCalled();
        }));
        test('should not register commands twice if onload called multiple times', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const firstCallCount = addCommandSpy.mock.calls.length;
            yield plugin.onload();
            const secondCallCount = addCommandSpy.mock.calls.length;
            // Should only register commands once
            // Note: In practice, Obsidian ensures onload is called only once
            expect(secondCallCount).toBe(firstCallCount * 2); // Each onload call registers the command
        }));
        test('should clean up properly on unload', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            // Unload should not throw errors
            yield expect(plugin.onunload()).resolves.toBeUndefined();
        }));
    });
    describe('Command Accessibility', () => {
        test('should be accessible via command palette', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const commandCall = addCommandSpy.mock.calls.find(call => call[0].id === 'create-exo-asset');
            // Command should have a name that appears in the command palette
            expect(commandCall[0].name).toBeTruthy();
            expect(commandCall[0].name).toBe('Create new ExoAsset');
        }));
        test('should be accessible via hotkey', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const commandCall = addCommandSpy.mock.calls.find(call => call[0].id === 'create-exo-asset');
            // Command should have hotkeys defined
            expect(commandCall[0].hotkeys).toBeDefined();
            expect(Array.isArray(commandCall[0].hotkeys)).toBe(true);
            expect(commandCall[0].hotkeys.length).toBeGreaterThan(0);
        }));
        test('should be accessible via ribbon icon', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const ribbonCall = addRibbonIconSpy.mock.calls.find(call => call[1] === 'Create ExoAsset');
            // Ribbon icon should be registered
            expect(ribbonCall).toBeDefined();
            expect(ribbonCall[0]).toBe('plus-circle'); // Valid icon name
            expect(ribbonCall[1]).toBe('Create ExoAsset'); // Tooltip
            expect(typeof ribbonCall[2]).toBe('function'); // Click handler
        }));
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvaW50ZWdyYXRpb24vQ29tbWFuZFJlZ2lzdHJhdGlvbi50ZXN0LnRzIiwibWFwcGluZ3MiOiI7OztBQUlBLHdCQUF3QjtBQUN4QixJQUFJLENBQUMsSUFBSSxDQUFDLGdEQUFnRCxDQUFDLENBQUM7QUFFNUQsbUJBQW1CO0FBQ25CLElBQUksQ0FBQyxJQUFJLENBQUMsZ0RBQWdELEVBQUUsR0FBRyxFQUFFO0lBQy9ELE1BQU0sYUFBYSxHQUFHO1FBQ3BCLHFCQUFxQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUM7WUFDL0MsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQztnQkFDbkMsT0FBTyxFQUFFLElBQUk7Z0JBQ2IsT0FBTyxFQUFFLGVBQWU7YUFDekIsQ0FBQztTQUNILENBQUM7UUFDRix5QkFBeUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDO1lBQ25ELE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUM7Z0JBQ25DLE9BQU8sRUFBRSxJQUFJO2dCQUNiLE9BQU8sRUFBRSxpQkFBaUI7YUFDM0IsQ0FBQztTQUNILENBQUM7UUFDRixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDakQsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7S0FDbkIsQ0FBQztJQUVGLE9BQU87UUFDTCxXQUFXLEVBQUU7WUFDWCxVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsRUFBRSxDQUFDLGFBQWEsQ0FBQztZQUNuRCxXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxhQUFhLENBQUM7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bmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9raXRlbGV2L0RvY3VtZW50cy9leG9jb3J0ZXgtb2JzaWRpYW4tcGx1Z2luL3Rlc3RzL2ludGVncmF0aW9uL0NvbW1hbmRSZWdpc3RyYXRpb24udGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgRXhvY29ydGV4UGx1Z2luIGZyb20gJy4uLy4uL3NyYy9tYWluJztcbmltcG9ydCB7IENyZWF0ZUFzc2V0TW9kYWwgfSBmcm9tICcuLi8uLi9zcmMvcHJlc2VudGF0aW9uL21vZGFscy9DcmVhdGVBc3NldE1vZGFsJztcblxuLy8gTW9jayBDcmVhdGVBc3NldE1vZGFsXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy9wcmVzZW50YXRpb24vbW9kYWxzL0NyZWF0ZUFzc2V0TW9kYWwnKTtcblxuLy8gTW9jayBESUNvbnRhaW5lclxuamVzdC5tb2NrKCcuLi8uLi9zcmMvaW5mcmFzdHJ1Y3R1cmUvY29udGFpbmVyL0RJQ29udGFpbmVyJywgKCkgPT4ge1xuICBjb25zdCBtb2NrQ29udGFpbmVyID0ge1xuICAgIGdldENyZWF0ZUFzc2V0VXNlQ2FzZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBleGVjdXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnQXNzZXQgY3JlYXRlZCdcbiAgICAgIH0pXG4gICAgfSksXG4gICAgZ2V0UHJvcGVydHlFZGl0aW5nVXNlQ2FzZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBleGVjdXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBtZXNzYWdlOiAnUHJvcGVydHkgZWRpdGVkJ1xuICAgICAgfSlcbiAgICB9KSxcbiAgICByZXNvbHZlOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7fSkpLFxuICAgIGRpc3Bvc2U6IGplc3QuZm4oKVxuICB9O1xuXG4gIHJldHVybiB7XG4gICAgRElDb250YWluZXI6IHtcbiAgICAgIGluaXRpYWxpemU6IGplc3QuZm4oKGFwcCwgcGx1Z2luKSA9PiBtb2NrQ29udGFpbmVyKSxcbiAgICAgIGdldEluc3RhbmNlOiBqZXN0LmZuKCgpID0+IG1vY2tDb250YWluZXIpLFxuICAgICAgaW5zdGFuY2U6IG1vY2tDb250YWluZXJcbiAgICB9XG4gIH07XG59KTtcblxuZGVzY3JpYmUoJ0NvbW1hbmQgUmVnaXN0cmF0aW9uIEludGVncmF0aW9uIFRlc3RzJywgKCkgPT4ge1xuICBsZXQgYXBwOiBBcHA7XG4gIGxldCBwbHVnaW46IEV4b2NvcnRleFBsdWdpbjtcbiAgbGV0IGFkZENvbW1hbmRTcHk6IGplc3QuU3B5SW5zdGFuY2U7XG4gIGxldCBhZGRSaWJib25JY29uU3B5OiBqZXN0LlNweUluc3RhbmNlO1xuXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgIC8vIFNldHVwIGFwcCBtb2NrXG4gICAgYXBwID0ge1xuICAgICAgdmF1bHQ6IHtcbiAgICAgICAgZ2V0TWFya2Rvd25GaWxlczogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbXSksXG4gICAgICAgIHJlYWQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSgnJyksXG4gICAgICAgIG9uOiBqZXN0LmZuKClcbiAgICAgIH0sXG4gICAgICB3b3Jrc3BhY2U6IHtcbiAgICAgICAgb3BlbkxpbmtUZXh0OiBqZXN0LmZuKClcbiAgICAgIH1cbiAgICB9IGFzIHVua25vd24gYXMgQXBwO1xuXG4gICAgLy8gQ3JlYXRlIHBsdWdpbiBpbnN0YW5jZVxuICAgIHBsdWdpbiA9IG5ldyBFeG9jb3J0ZXhQbHVnaW4oYXBwLCB7XG4gICAgICBpZDogJ2V4b2NvcnRleCcsXG4gICAgICBuYW1lOiAnRXhvY29ydGV4JyxcbiAgICAgIHZlcnNpb246ICcyLjE2LjAnLFxuICAgICAgbWluQXBwVmVyc2lvbjogJzEuMC4wJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU1BBUlFMIHF1ZXJpZXMgaW4gT2JzaWRpYW4nLFxuICAgICAgYXV0aG9yOiAnVGVzdCBBdXRob3InLFxuICAgICAgYXV0aG9yVXJsOiAnJyxcbiAgICAgIGlzRGVza3RvcE9ubHk6IGZhbHNlXG4gICAgfSk7XG5cbiAgICAvLyBTZXR1cCBzcGllcyBmb3IgY29tbWFuZCByZWdpc3RyYXRpb25cbiAgICBhZGRDb21tYW5kU3B5ID0gamVzdC5zcHlPbihwbHVnaW4sICdhZGRDb21tYW5kJyk7XG4gICAgYWRkUmliYm9uSWNvblNweSA9IGplc3Quc3B5T24ocGx1Z2luLCAnYWRkUmliYm9uSWNvbicpO1xuXG4gICAgLy8gRElDb250YWluZXIgaXMgYWxyZWFkeSBtb2NrZWQgYXQgdGhlIG1vZHVsZSBsZXZlbFxuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIGplc3QucmVzZXRNb2R1bGVzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDcmVhdGUgRXhvQXNzZXQgQ29tbWFuZCBSZWdpc3RyYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJlZ2lzdGVyIGNyZWF0ZS1leG8tYXNzZXQgY29tbWFuZCBvbiBwbHVnaW4gbG9hZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHBsdWdpbi5vbmxvYWQoKTtcblxuICAgICAgZXhwZWN0KGFkZENvbW1hbmRTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgaWQ6ICdjcmVhdGUtZXhvLWFzc2V0JyxcbiAgICAgICAgbmFtZTogJ0NyZWF0ZSBuZXcgRXhvQXNzZXQnLFxuICAgICAgICBob3RrZXlzOiBbeyBtb2RpZmllcnM6IFtcIk1vZFwiLCBcIlNoaWZ0XCJdLCBrZXk6IFwiblwiIH1dLFxuICAgICAgICBjYWxsYmFjazogZXhwZWN0LmFueShGdW5jdGlvbilcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHJlZ2lzdGVyIHJpYmJvbiBpY29uIGZvciBjcmVhdGUgYXNzZXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBwbHVnaW4ub25sb2FkKCk7XG5cbiAgICAgIGV4cGVjdChhZGRSaWJib25JY29uU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ3BsdXMtY2lyY2xlJyxcbiAgICAgICAgJ0NyZWF0ZSBFeG9Bc3NldCcsXG4gICAgICAgIGV4cGVjdC5hbnkoRnVuY3Rpb24pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgdmFsaWQgY29tbWFuZCBjYWxsYmFjaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHBsdWdpbi5vbmxvYWQoKTtcblxuICAgICAgLy8gR2V0IHRoZSBjYWxsYmFjayBmdW5jdGlvbiBmcm9tIHRoZSBjb21tYW5kIHJlZ2lzdHJhdGlvblxuICAgICAgY29uc3QgY29tbWFuZENhbGwgPSBhZGRDb21tYW5kU3B5Lm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLmlkID09PSAnY3JlYXRlLWV4by1hc3NldCdcbiAgICAgICk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjb21tYW5kQ2FsbCkudG9CZURlZmluZWQoKTtcbiAgICAgIGNvbnN0IGNhbGxiYWNrID0gY29tbWFuZENhbGxbMF0uY2FsbGJhY2s7XG5cbiAgICAgIC8vIFZlcmlmeSBjYWxsYmFjayBpcyBhIGZ1bmN0aW9uIGFuZCBkb2Vzbid0IHRocm93IHdoZW4gZXhlY3V0ZWRcbiAgICAgIGV4cGVjdCh0eXBlb2YgY2FsbGJhY2spLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICBleHBlY3QoKCkgPT4gY2FsbGJhY2soKSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIHZhbGlkIHJpYmJvbiBjYWxsYmFjaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHBsdWdpbi5vbmxvYWQoKTtcblxuICAgICAgLy8gR2V0IHRoZSBjYWxsYmFjayBmdW5jdGlvbiBmcm9tIHRoZSByaWJib24gaWNvbiByZWdpc3RyYXRpb25cbiAgICAgIGNvbnN0IHJpYmJvbkNhbGwgPSBhZGRSaWJib25JY29uU3B5Lm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzFdID09PSAnQ3JlYXRlIEV4b0Fzc2V0J1xuICAgICAgKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJpYmJvbkNhbGwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBjb25zdCBjYWxsYmFjayA9IHJpYmJvbkNhbGxbMl07XG5cbiAgICAgIC8vIFZlcmlmeSBjYWxsYmFjayBpcyBhIGZ1bmN0aW9uIGFuZCBkb2Vzbid0IHRocm93IHdoZW4gZXhlY3V0ZWRcbiAgICAgIGV4cGVjdCh0eXBlb2YgY2FsbGJhY2spLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgICBleHBlY3QoKCkgPT4gY2FsbGJhY2soKSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbW1hbmQgUHJvcGVydGllcycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBjb3JyZWN0IGNvbW1hbmQgSUQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBwbHVnaW4ub25sb2FkKCk7XG5cbiAgICAgIGNvbnN0IGNvbW1hbmRDYWxsID0gYWRkQ29tbWFuZFNweS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS5pZCA9PT0gJ2NyZWF0ZS1leG8tYXNzZXQnXG4gICAgICApO1xuXG4gICAgICBleHBlY3QoY29tbWFuZENhbGxbMF0uaWQpLnRvQmUoJ2NyZWF0ZS1leG8tYXNzZXQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIGNvcnJlY3QgY29tbWFuZCBuYW1lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcGx1Z2luLm9ubG9hZCgpO1xuXG4gICAgICBjb25zdCBjb21tYW5kQ2FsbCA9IGFkZENvbW1hbmRTcHkubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0uaWQgPT09ICdjcmVhdGUtZXhvLWFzc2V0J1xuICAgICAgKTtcblxuICAgICAgZXhwZWN0KGNvbW1hbmRDYWxsWzBdLm5hbWUpLnRvQmUoJ0NyZWF0ZSBuZXcgRXhvQXNzZXQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIGNvcnJlY3QgaG90a2V5IGNvbWJpbmF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcGx1Z2luLm9ubG9hZCgpO1xuXG4gICAgICBjb25zdCBjb21tYW5kQ2FsbCA9IGFkZENvbW1hbmRTcHkubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0uaWQgPT09ICdjcmVhdGUtZXhvLWFzc2V0J1xuICAgICAgKTtcblxuICAgICAgZXhwZWN0KGNvbW1hbmRDYWxsWzBdLmhvdGtleXMpLnRvRXF1YWwoW1xuICAgICAgICB7IG1vZGlmaWVyczogW1wiTW9kXCIsIFwiU2hpZnRcIl0sIGtleTogXCJuXCIgfVxuICAgICAgXSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSB2YWxpZCBjYWxsYmFjayBmdW5jdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHBsdWdpbi5vbmxvYWQoKTtcblxuICAgICAgY29uc3QgY29tbWFuZENhbGwgPSBhZGRDb21tYW5kU3B5Lm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLmlkID09PSAnY3JlYXRlLWV4by1hc3NldCdcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdCh0eXBlb2YgY29tbWFuZENhbGxbMF0uY2FsbGJhY2spLnRvQmUoJ2Z1bmN0aW9uJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdSaWJib24gSWNvbiBQcm9wZXJ0aWVzJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCB1c2UgcGx1cy1jaXJjbGUgaWNvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHBsdWdpbi5vbmxvYWQoKTtcblxuICAgICAgY29uc3QgcmliYm9uQ2FsbCA9IGFkZFJpYmJvbkljb25TcHkubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMV0gPT09ICdDcmVhdGUgRXhvQXNzZXQnXG4gICAgICApO1xuXG4gICAgICBleHBlY3QocmliYm9uQ2FsbFswXSkudG9CZSgncGx1cy1jaXJjbGUnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYXZlIGNvcnJlY3QgdG9vbHRpcCB0ZXh0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcGx1Z2luLm9ubG9hZCgpO1xuXG4gICAgICBjb25zdCByaWJib25DYWxsID0gYWRkUmliYm9uSWNvblNweS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXSA9PT0gJ3BsdXMtY2lyY2xlJ1xuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJpYmJvbkNhbGxbMV0pLnRvQmUoJ0NyZWF0ZSBFeG9Bc3NldCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgdmFsaWQgY2FsbGJhY2sgZnVuY3Rpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBwbHVnaW4ub25sb2FkKCk7XG5cbiAgICAgIGNvbnN0IHJpYmJvbkNhbGwgPSBhZGRSaWJib25JY29uU3B5Lm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzFdID09PSAnQ3JlYXRlIEV4b0Fzc2V0J1xuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHR5cGVvZiByaWJib25DYWxsWzJdKS50b0JlKCdmdW5jdGlvbicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29tbWFuZCBJbnRlZ3JhdGlvbiB3aXRoIE90aGVyIENvbXBvbmVudHMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJlZ2lzdGVyIFNQQVJRTCBwcm9jZXNzb3IgYWxvbmdzaWRlIGNyZWF0ZSBhc3NldCBjb21tYW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvclNweSA9IGplc3Quc3B5T24oXG4gICAgICAgIHBsdWdpbixcbiAgICAgICAgJ3JlZ2lzdGVyTWFya2Rvd25Db2RlQmxvY2tQcm9jZXNzb3InXG4gICAgICApO1xuXG4gICAgICBhd2FpdCBwbHVnaW4ub25sb2FkKCk7XG5cbiAgICAgIGV4cGVjdChyZWdpc3Rlck1hcmtkb3duQ29kZUJsb2NrUHJvY2Vzc29yU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ3NwYXJxbCcsXG4gICAgICAgIGV4cGVjdC5hbnkoRnVuY3Rpb24pXG4gICAgICApO1xuICAgICAgZXhwZWN0KGFkZENvbW1hbmRTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZWdpc3RlciBmaWxlIGV2ZW50IGhhbmRsZXJzIGFsb25nc2lkZSBjb21tYW5kcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlZ2lzdGVyRXZlbnRTcHkgPSBqZXN0LnNweU9uKHBsdWdpbiwgJ3JlZ2lzdGVyRXZlbnQnKTtcblxuICAgICAgYXdhaXQgcGx1Z2luLm9ubG9hZCgpO1xuXG4gICAgICBleHBlY3QocmVnaXN0ZXJFdmVudFNweSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDMpOyAvLyBtb2RpZnksIGNyZWF0ZSwgZGVsZXRlXG4gICAgICBleHBlY3QoYWRkQ29tbWFuZFNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29tbWFuZCBFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICB0ZXN0KCdjb21tYW5kIGNhbGxiYWNrIHNob3VsZCBiZSByZXNpbGllbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBwbHVnaW4ub25sb2FkKCk7XG5cbiAgICAgIGNvbnN0IGNvbW1hbmRDYWxsID0gYWRkQ29tbWFuZFNweS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFswXS5pZCA9PT0gJ2NyZWF0ZS1leG8tYXNzZXQnXG4gICAgICApO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgY2FsbGJhY2sgZXhpc3RzIGFuZCBpcyBhIGZ1bmN0aW9uXG4gICAgICBleHBlY3QoY29tbWFuZENhbGwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QodHlwZW9mIGNvbW1hbmRDYWxsWzBdLmNhbGxiYWNrKS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgbm90IHRocm93IHdoZW4gZXhlY3V0ZWQgKENyZWF0ZUFzc2V0TW9kYWwgY3JlYXRpb24gaXMgaW50ZXJuYWwpXG4gICAgICBleHBlY3QoKCkgPT4gY29tbWFuZENhbGxbMF0uY2FsbGJhY2soKSkubm90LnRvVGhyb3coKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3JpYmJvbiBjYWxsYmFjayBzaG91bGQgYmUgcmVzaWxpZW50JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcGx1Z2luLm9ubG9hZCgpO1xuXG4gICAgICBjb25zdCByaWJib25DYWxsID0gYWRkUmliYm9uSWNvblNweS5tb2NrLmNhbGxzLmZpbmQoXG4gICAgICAgIGNhbGwgPT4gY2FsbFsxXSA9PT0gJ0NyZWF0ZSBFeG9Bc3NldCdcbiAgICAgICk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBjYWxsYmFjayBleGlzdHMgYW5kIGlzIGEgZnVuY3Rpb25cbiAgICAgIGV4cGVjdChyaWJib25DYWxsKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHR5cGVvZiByaWJib25DYWxsWzJdKS50b0JlKCdmdW5jdGlvbicpO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgbm90IHRocm93IHdoZW4gZXhlY3V0ZWRcbiAgICAgIGV4cGVjdCgoKSA9PiByaWJib25DYWxsWzJdKCkpLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQbHVnaW4gTGlmZWN5Y2xlJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCByZWdpc3RlciBjb21tYW5kcyBvbmx5IGR1cmluZyBvbmxvYWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBDb21tYW5kcyBzaG91bGQgbm90IGJlIHJlZ2lzdGVyZWQgYmVmb3JlIG9ubG9hZFxuICAgICAgZXhwZWN0KGFkZENvbW1hbmRTcHkpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XG5cbiAgICAgIGF3YWl0IHBsdWdpbi5vbmxvYWQoKTtcblxuICAgICAgLy8gQ29tbWFuZHMgc2hvdWxkIGJlIHJlZ2lzdGVyZWQgYWZ0ZXIgb25sb2FkXG4gICAgICBleHBlY3QoYWRkQ29tbWFuZFNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIG5vdCByZWdpc3RlciBjb21tYW5kcyB0d2ljZSBpZiBvbmxvYWQgY2FsbGVkIG11bHRpcGxlIHRpbWVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcGx1Z2luLm9ubG9hZCgpO1xuICAgICAgY29uc3QgZmlyc3RDYWxsQ291bnQgPSBhZGRDb21tYW5kU3B5Lm1vY2suY2FsbHMubGVuZ3RoO1xuXG4gICAgICBhd2FpdCBwbHVnaW4ub25sb2FkKCk7XG4gICAgICBjb25zdCBzZWNvbmRDYWxsQ291bnQgPSBhZGRDb21tYW5kU3B5Lm1vY2suY2FsbHMubGVuZ3RoO1xuXG4gICAgICAvLyBTaG91bGQgb25seSByZWdpc3RlciBjb21tYW5kcyBvbmNlXG4gICAgICAvLyBOb3RlOiBJbiBwcmFjdGljZSwgT2JzaWRpYW4gZW5zdXJlcyBvbmxvYWQgaXMgY2FsbGVkIG9ubHkgb25jZVxuICAgICAgZXhwZWN0KHNlY29uZENhbGxDb3VudCkudG9CZShmaXJzdENhbGxDb3VudCAqIDIpOyAvLyBFYWNoIG9ubG9hZCBjYWxsIHJlZ2lzdGVycyB0aGUgY29tbWFuZFxuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNsZWFuIHVwIHByb3Blcmx5IG9uIHVubG9hZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHBsdWdpbi5vbmxvYWQoKTtcbiAgICAgIFxuICAgICAgLy8gVW5sb2FkIHNob3VsZCBub3QgdGhyb3cgZXJyb3JzXG4gICAgICBhd2FpdCBleHBlY3QocGx1Z2luLm9udW5sb2FkKCkpLnJlc29sdmVzLnRvQmVVbmRlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NvbW1hbmQgQWNjZXNzaWJpbGl0eScsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgYmUgYWNjZXNzaWJsZSB2aWEgY29tbWFuZCBwYWxldHRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcGx1Z2luLm9ubG9hZCgpO1xuXG4gICAgICBjb25zdCBjb21tYW5kQ2FsbCA9IGFkZENvbW1hbmRTcHkubW9jay5jYWxscy5maW5kKFxuICAgICAgICBjYWxsID0+IGNhbGxbMF0uaWQgPT09ICdjcmVhdGUtZXhvLWFzc2V0J1xuICAgICAgKTtcblxuICAgICAgLy8gQ29tbWFuZCBzaG91bGQgaGF2ZSBhIG5hbWUgdGhhdCBhcHBlYXJzIGluIHRoZSBjb21tYW5kIHBhbGV0dGVcbiAgICAgIGV4cGVjdChjb21tYW5kQ2FsbFswXS5uYW1lKS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3QoY29tbWFuZENhbGxbMF0ubmFtZSkudG9CZSgnQ3JlYXRlIG5ldyBFeG9Bc3NldCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGJlIGFjY2Vzc2libGUgdmlhIGhvdGtleScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHBsdWdpbi5vbmxvYWQoKTtcblxuICAgICAgY29uc3QgY29tbWFuZENhbGwgPSBhZGRDb21tYW5kU3B5Lm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzBdLmlkID09PSAnY3JlYXRlLWV4by1hc3NldCdcbiAgICAgICk7XG5cbiAgICAgIC8vIENvbW1hbmQgc2hvdWxkIGhhdmUgaG90a2V5cyBkZWZpbmVkXG4gICAgICBleHBlY3QoY29tbWFuZENhbGxbMF0uaG90a2V5cykudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChBcnJheS5pc0FycmF5KGNvbW1hbmRDYWxsWzBdLmhvdGtleXMpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KGNvbW1hbmRDYWxsWzBdLmhvdGtleXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgYmUgYWNjZXNzaWJsZSB2aWEgcmliYm9uIGljb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBwbHVnaW4ub25sb2FkKCk7XG5cbiAgICAgIGNvbnN0IHJpYmJvbkNhbGwgPSBhZGRSaWJib25JY29uU3B5Lm1vY2suY2FsbHMuZmluZChcbiAgICAgICAgY2FsbCA9PiBjYWxsWzFdID09PSAnQ3JlYXRlIEV4b0Fzc2V0J1xuICAgICAgKTtcblxuICAgICAgLy8gUmliYm9uIGljb24gc2hvdWxkIGJlIHJlZ2lzdGVyZWRcbiAgICAgIGV4cGVjdChyaWJib25DYWxsKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHJpYmJvbkNhbGxbMF0pLnRvQmUoJ3BsdXMtY2lyY2xlJyk7IC8vIFZhbGlkIGljb24gbmFtZVxuICAgICAgZXhwZWN0KHJpYmJvbkNhbGxbMV0pLnRvQmUoJ0NyZWF0ZSBFeG9Bc3NldCcpOyAvLyBUb29sdGlwXG4gICAgICBleHBlY3QodHlwZW9mIHJpYmJvbkNhbGxbMl0pLnRvQmUoJ2Z1bmN0aW9uJyk7IC8vIENsaWNrIGhhbmRsZXJcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=