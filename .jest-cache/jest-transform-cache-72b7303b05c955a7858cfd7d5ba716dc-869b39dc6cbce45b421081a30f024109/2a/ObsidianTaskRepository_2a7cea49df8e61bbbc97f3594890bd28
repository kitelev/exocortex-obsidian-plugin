d56da1ba782113847e218c1955330a2d
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ObsidianTaskRepository = void 0;
const tslib_1 = require("tslib");
const obsidian_1 = require("obsidian");
const Task_1 = require("../../domain/entities/Task");
const TaskId_1 = require("../../domain/value-objects/TaskId");
const AssetId_1 = require("../../domain/value-objects/AssetId");
const TaskStatus_1 = require("../../domain/value-objects/TaskStatus");
const Priority_1 = require("../../domain/value-objects/Priority");
/**
 * Obsidian-specific implementation of ITaskRepository
 * Manages task persistence using Obsidian vault files
 */
class ObsidianTaskRepository {
    constructor(app) {
        this.app = app;
        this.tasksFolder = 'Tasks';
        this.taskCache = new Map();
    }
    findById(id) {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            // Check cache first
            const cached = this.taskCache.get(id.toString());
            if (cached) {
                return cached;
            }
            // Search for task file
            const files = this.app.vault.getMarkdownFiles();
            for (const file of files) {
                if (file.path.startsWith(this.tasksFolder)) {
                    const metadata = this.app.metadataCache.getFileCache(file);
                    if (((_a = metadata === null || metadata === void 0 ? void 0 : metadata.frontmatter) === null || _a === void 0 ? void 0 : _a.id) === id.toString()) {
                        const task = yield this.loadTaskFromFile(file);
                        if (task) {
                            this.taskCache.set(id.toString(), task);
                            return task;
                        }
                    }
                }
            }
            return null;
        });
    }
    findByProject(projectId) {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const tasks = [];
            const files = this.app.vault.getMarkdownFiles();
            for (const file of files) {
                if (file.path.startsWith(this.tasksFolder)) {
                    const metadata = this.app.metadataCache.getFileCache(file);
                    if (((_a = metadata === null || metadata === void 0 ? void 0 : metadata.frontmatter) === null || _a === void 0 ? void 0 : _a.projectId) === projectId.toString()) {
                        const task = yield this.loadTaskFromFile(file);
                        if (task) {
                            tasks.push(task);
                        }
                    }
                }
            }
            return tasks;
        });
    }
    findByStatus(status) {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const tasks = [];
            const files = this.app.vault.getMarkdownFiles();
            for (const file of files) {
                if (file.path.startsWith(this.tasksFolder)) {
                    const metadata = this.app.metadataCache.getFileCache(file);
                    if (((_a = metadata === null || metadata === void 0 ? void 0 : metadata.frontmatter) === null || _a === void 0 ? void 0 : _a.status) === status.toString()) {
                        const task = yield this.loadTaskFromFile(file);
                        if (task) {
                            tasks.push(task);
                        }
                    }
                }
            }
            return tasks;
        });
    }
    findByPriority(priority) {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const tasks = [];
            const files = this.app.vault.getMarkdownFiles();
            for (const file of files) {
                if (file.path.startsWith(this.tasksFolder)) {
                    const metadata = this.app.metadataCache.getFileCache(file);
                    if (((_a = metadata === null || metadata === void 0 ? void 0 : metadata.frontmatter) === null || _a === void 0 ? void 0 : _a.priority) === priority.toString()) {
                        const task = yield this.loadTaskFromFile(file);
                        if (task) {
                            tasks.push(task);
                        }
                    }
                }
            }
            return tasks;
        });
    }
    findByTag(tag) {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const tasks = [];
            const files = this.app.vault.getMarkdownFiles();
            for (const file of files) {
                if (file.path.startsWith(this.tasksFolder)) {
                    const metadata = this.app.metadataCache.getFileCache(file);
                    const tags = ((_a = metadata === null || metadata === void 0 ? void 0 : metadata.frontmatter) === null || _a === void 0 ? void 0 : _a.tags) || [];
                    if (Array.isArray(tags) && tags.includes(tag)) {
                        const task = yield this.loadTaskFromFile(file);
                        if (task) {
                            tasks.push(task);
                        }
                    }
                }
            }
            return tasks;
        });
    }
    findOverdue() {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const now = new Date();
            const tasks = [];
            const files = this.app.vault.getMarkdownFiles();
            for (const file of files) {
                if (file.path.startsWith(this.tasksFolder)) {
                    const metadata = this.app.metadataCache.getFileCache(file);
                    if ((_a = metadata === null || metadata === void 0 ? void 0 : metadata.frontmatter) === null || _a === void 0 ? void 0 : _a.dueDate) {
                        const dueDate = new Date(metadata.frontmatter.dueDate);
                        if (dueDate < now && metadata.frontmatter.status !== 'done') {
                            const task = yield this.loadTaskFromFile(file);
                            if (task) {
                                tasks.push(task);
                            }
                        }
                    }
                }
            }
            return tasks;
        });
    }
    findDueToday() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            return this.findDueBetween(today, tomorrow);
        });
    }
    findDueBetween(startDate, endDate) {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const tasks = [];
            const files = this.app.vault.getMarkdownFiles();
            for (const file of files) {
                if (file.path.startsWith(this.tasksFolder)) {
                    const metadata = this.app.metadataCache.getFileCache(file);
                    if ((_a = metadata === null || metadata === void 0 ? void 0 : metadata.frontmatter) === null || _a === void 0 ? void 0 : _a.dueDate) {
                        const dueDate = new Date(metadata.frontmatter.dueDate);
                        if (dueDate >= startDate && dueDate <= endDate) {
                            const task = yield this.loadTaskFromFile(file);
                            if (task) {
                                tasks.push(task);
                            }
                        }
                    }
                }
            }
            return tasks;
        });
    }
    findAll() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const tasks = [];
            const files = this.app.vault.getMarkdownFiles();
            for (const file of files) {
                if (file.path.startsWith(this.tasksFolder)) {
                    const task = yield this.loadTaskFromFile(file);
                    if (task) {
                        tasks.push(task);
                    }
                }
            }
            return tasks;
        });
    }
    findByCriteria(criteria) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            let tasks = yield this.findAll();
            if (criteria.status) {
                tasks = tasks.filter(t => t.getStatus().equals(criteria.status));
            }
            if (criteria.priority) {
                tasks = tasks.filter(t => t.getPriority().equals(criteria.priority));
            }
            if (criteria.projectId) {
                tasks = tasks.filter(t => { var _a; return (_a = t.getProjectId()) === null || _a === void 0 ? void 0 : _a.equals(criteria.projectId); });
            }
            if (criteria.tags && criteria.tags.length > 0) {
                tasks = tasks.filter(t => {
                    const taskTags = t.getTags();
                    return criteria.tags.some(tag => taskTags.includes(tag));
                });
            }
            return tasks;
        });
    }
    save(task) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            try {
                // Ensure tasks folder exists
                yield this.ensureTasksFolder();
                // Generate file path
                const fileName = this.sanitizeFileName(task.getTitle());
                const filePath = `${this.tasksFolder}/${fileName}.md`;
                // Check if file already exists
                let file = this.app.vault.getAbstractFileByPath(filePath);
                if (!file) {
                    // Create new file
                    file = yield this.app.vault.create(filePath, '');
                }
                if (!(file instanceof obsidian_1.TFile)) {
                    throw new Error('File path exists but is not a file');
                }
                // Generate content
                const content = this.generateTaskContent(task);
                // Save file
                yield this.app.vault.modify(file, content);
                // Update cache
                this.taskCache.set(task.getId().toString(), task);
                // Show success notice
                new obsidian_1.Notice(`Task "${task.getTitle()}" saved successfully`);
            }
            catch (error) {
                console.error('Failed to save task:', error);
                new obsidian_1.Notice(`Failed to save task: ${error.message}`);
                throw error;
            }
        });
    }
    delete(id) {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const files = this.app.vault.getMarkdownFiles();
            for (const file of files) {
                if (file.path.startsWith(this.tasksFolder)) {
                    const metadata = this.app.metadataCache.getFileCache(file);
                    if (((_a = metadata === null || metadata === void 0 ? void 0 : metadata.frontmatter) === null || _a === void 0 ? void 0 : _a.id) === id.toString()) {
                        yield this.app.vault.delete(file);
                        this.taskCache.delete(id.toString());
                        new obsidian_1.Notice('Task deleted successfully');
                        return;
                    }
                }
            }
            throw new Error(`Task with id ${id.toString()} not found`);
        });
    }
    exists(id) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const task = yield this.findById(id);
            return task !== null;
        });
    }
    findByFilename(filename) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const file = this.app.vault.getAbstractFileByPath(`${this.tasksFolder}/${filename}`);
            if (file instanceof obsidian_1.TFile) {
                return yield this.loadTaskFromFile(file);
            }
            return null;
        });
    }
    getStatistics() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const tasks = yield this.findAll();
            const now = new Date();
            const today = new Date();
            today.setHours(0, 0, 0, 0);
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            const weekEnd = new Date(today);
            weekEnd.setDate(weekEnd.getDate() + 7);
            const stats = {
                total: tasks.length,
                byStatus: {},
                byPriority: {},
                overdue: 0,
                dueToday: 0,
                dueThisWeek: 0,
                completed: 0,
                averageCompletionTime: undefined
            };
            let completionTimes = [];
            for (const task of tasks) {
                // Status statistics
                const status = task.getStatus().toString();
                stats.byStatus[status] = (stats.byStatus[status] || 0) + 1;
                // Count completed tasks
                if (status === 'done') {
                    stats.completed++;
                    // Calculate completion time if we have both created and updated dates
                    const createdAt = task.getCreatedAt();
                    const updatedAt = task.getUpdatedAt();
                    if (createdAt && updatedAt) {
                        const completionTime = updatedAt.getTime() - createdAt.getTime();
                        completionTimes.push(completionTime);
                    }
                }
                // Priority statistics
                const priority = task.getPriority().toString();
                stats.byPriority[priority] = (stats.byPriority[priority] || 0) + 1;
                // Due date statistics
                const dueDate = task.getDueDate();
                if (dueDate) {
                    if (dueDate < now && task.getStatus().toString() !== 'done') {
                        stats.overdue++;
                    }
                    if (dueDate >= today && dueDate < tomorrow) {
                        stats.dueToday++;
                    }
                    if (dueDate >= today && dueDate < weekEnd) {
                        stats.dueThisWeek++;
                    }
                }
            }
            // Calculate average completion time
            if (completionTimes.length > 0) {
                const totalTime = completionTimes.reduce((sum, time) => sum + time, 0);
                stats.averageCompletionTime = totalTime / completionTimes.length;
            }
            return stats;
        });
    }
    search(query) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const tasks = yield this.findAll();
            const lowerQuery = query.toLowerCase();
            return tasks.filter(task => {
                var _a;
                const title = task.getTitle().toLowerCase();
                const description = ((_a = task.getDescription()) === null || _a === void 0 ? void 0 : _a.toLowerCase()) || '';
                const tags = task.getTags().join(' ').toLowerCase();
                return title.includes(lowerQuery) ||
                    description.includes(lowerQuery) ||
                    tags.includes(lowerQuery);
            });
        });
    }
    findRecentlyUpdated(limit = 10) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const tasks = yield this.findAll();
            return tasks
                .sort((a, b) => b.getUpdatedAt().getTime() - a.getUpdatedAt().getTime())
                .slice(0, limit);
        });
    }
    findRecentlyCreated(limit = 10) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const tasks = yield this.findAll();
            return tasks
                .sort((a, b) => b.getCreatedAt().getTime() - a.getCreatedAt().getTime())
                .slice(0, limit);
        });
    }
    /**
     * Load task from Obsidian file
     */
    loadTaskFromFile(file) {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            try {
                const content = yield this.app.vault.read(file);
                const metadata = this.app.metadataCache.getFileCache(file);
                if (!((_a = metadata === null || metadata === void 0 ? void 0 : metadata.frontmatter) === null || _a === void 0 ? void 0 : _a.id)) {
                    return null;
                }
                const fm = metadata.frontmatter;
                // Parse priority
                const priorityResult = Priority_1.Priority.create(fm.priority || 'medium');
                if (priorityResult.isFailure) {
                    console.warn(`Invalid priority in task ${fm.id}: ${fm.priority}`);
                    return null;
                }
                // Parse status
                const statusResult = TaskStatus_1.TaskStatus.create(fm.status || 'todo');
                if (statusResult.isFailure) {
                    console.warn(`Invalid status in task ${fm.id}: ${fm.status}`);
                    return null;
                }
                // Parse project ID
                let projectId;
                if (fm.projectId) {
                    const projectIdResult = AssetId_1.AssetId.create(fm.projectId);
                    if (projectIdResult.isSuccess) {
                        projectId = projectIdResult.getValue();
                    }
                }
                // Parse dates
                const dueDate = fm.dueDate ? new Date(fm.dueDate) : undefined;
                const createdAt = fm.createdAt ? new Date(fm.createdAt) : file.stat.ctime;
                const updatedAt = fm.updatedAt ? new Date(fm.updatedAt) : file.stat.mtime;
                // Create task ID
                const taskIdResult = TaskId_1.TaskId.create(fm.id);
                if (taskIdResult.isFailure) {
                    console.warn(`Invalid task ID: ${fm.id}`);
                    return null;
                }
                // Extract description from content (everything after frontmatter)
                const contentLines = content.split('\n');
                let inFrontmatter = false;
                let description = '';
                for (const line of contentLines) {
                    if (line === '---') {
                        inFrontmatter = !inFrontmatter;
                        continue;
                    }
                    if (!inFrontmatter && line.trim() && !line.startsWith('#')) {
                        description += line + '\n';
                    }
                }
                // Create task
                const taskResult = Task_1.Task.create({
                    title: fm.title || file.basename,
                    description: description.trim() || fm.description,
                    priority: priorityResult.getValue(),
                    status: statusResult.getValue(),
                    projectId,
                    dueDate,
                    estimatedHours: fm.estimatedHours,
                    tags: fm.tags || []
                });
                if (taskResult.isFailure) {
                    console.warn(`Failed to create task from file ${file.path}: ${taskResult.error}`);
                    return null;
                }
                return taskResult.getValue();
            }
            catch (error) {
                console.error(`Failed to load task from file ${file.path}:`, error);
                return null;
            }
        });
    }
    /**
     * Generate markdown content for task
     */
    generateTaskContent(task) {
        var _a, _b;
        const frontmatter = task.toFrontmatter();
        const description = task.getDescription() || '';
        // Build frontmatter YAML
        let content = '---\n';
        for (const [key, value] of Object.entries(frontmatter)) {
            if (value !== undefined && value !== null) {
                if (Array.isArray(value)) {
                    if (value.length > 0) {
                        content += `${key}:\n`;
                        for (const item of value) {
                            content += `  - ${item}\n`;
                        }
                    }
                }
                else if (typeof value === 'object') {
                    content += `${key}: ${JSON.stringify(value)}\n`;
                }
                else {
                    content += `${key}: ${value}\n`;
                }
            }
        }
        content += '---\n\n';
        // Add title
        content += `# ${task.getTitle()}\n\n`;
        // Add description
        if (description) {
            content += `${description}\n\n`;
        }
        // Add task details section
        content += '## Details\n\n';
        content += `- **Status**: ${task.getStatus().toString()}\n`;
        content += `- **Priority**: ${task.getPriority().toString()}\n`;
        if (task.getProjectId()) {
            content += `- **Project**: [[${(_a = task.getProjectId()) === null || _a === void 0 ? void 0 : _a.toString()}]]\n`;
        }
        if (task.getDueDate()) {
            content += `- **Due Date**: ${(_b = task.getDueDate()) === null || _b === void 0 ? void 0 : _b.toISOString().split('T')[0]}\n`;
        }
        if (task.getEstimatedHours()) {
            content += `- **Estimated Hours**: ${task.getEstimatedHours()}\n`;
        }
        // Add tags section
        const tags = task.getTags();
        if (tags.length > 0) {
            content += '\n## Tags\n\n';
            content += tags.map(tag => `#${tag}`).join(' ') + '\n';
        }
        // Add notes section
        content += '\n## Notes\n\n';
        content += '_Add your notes here..._\n';
        return content;
    }
    /**
     * Ensure tasks folder exists
     */
    ensureTasksFolder() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const folder = this.app.vault.getAbstractFileByPath(this.tasksFolder);
            if (!folder) {
                yield this.app.vault.createFolder(this.tasksFolder);
            }
        });
    }
    /**
     * Sanitize filename for safe file creation
     */
    sanitizeFileName(title) {
        return title
            .replace(/[\\/:*?"<>|]/g, '-')
            .replace(/\s+/g, ' ')
            .trim()
            .substring(0, 100); // Limit length
    }
}
exports.ObsidianTaskRepository = ObsidianTaskRepository;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vc3JjL2luZnJhc3RydWN0dXJlL3JlcG9zaXRvcmllcy9PYnNpZGlhblRhc2tSZXBvc2l0b3J5LnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFBQSx1Q0FBOEM7QUFFOUMscURBQWtEO0FBQ2xELDhEQUEyRDtBQUMzRCxnRUFBNkQ7QUFDN0Qsc0VBQW1GO0FBQ25GLGtFQUE4RTtBQUc5RTs7O0dBR0c7QUFDSCxNQUFhLHNCQUFzQjtJQUlqQyxZQUE2QixHQUFRO1FBQVIsUUFBRyxHQUFILEdBQUcsQ0FBSztRQUhwQixnQkFBVyxHQUFHLE9BQU8sQ0FBQztRQUMvQixjQUFTLEdBQXNCLElBQUksR0FBRyxFQUFFLENBQUM7SUFFVCxDQUFDO0lBRW5DLFFBQVEsQ0FBQyxFQUFVOzs7WUFDdkIsb0JBQW9CO1lBQ3BCLE1BQU0sTUFBTSxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1lBQ2pELElBQUksTUFBTSxFQUFFO2dCQUNWLE9BQU8sTUFBTSxDQUFDO2FBQ2Y7WUFFRCx1QkFBdUI7WUFDdkIsTUFBTSxLQUFLLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztZQUNoRCxLQUFLLE1BQU0sSUFBSSxJQUFJLEtBQUssRUFBRTtnQkFDeEIsSUFBSSxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUU7b0JBQzFDLE1BQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsQ0FBQztvQkFDM0QsSUFBSSxDQUFBLE1BQUEsUUFBUSxhQUFSLFFBQVEsdUJBQVIsUUFBUSxDQUFFLFdBQVcsMENBQUUsRUFBRSxNQUFLLEVBQUUsQ0FBQyxRQUFRLEVBQUUsRUFBRTt3QkFDL0MsTUFBTSxJQUFJLEdB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Q0FBQztTQUN4RDtRQUVELG9CQUFvQjtRQUNwQixPQUFPLElBQUksZ0JBQWdCLENBQUM7UUFDNUIsT0FBTyxJQUFJLDRCQUE0QixDQUFDO1FBRXhDLE9BQU8sT0FBTyxDQUFDO0lBQ2pCLENBQUM7SUFFRDs7T0FFRztJQUNXLGlCQUFpQjs7WUFDN0IsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMscUJBQXFCLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBQ3RFLElBQUksQ0FBQyxNQUFNLEVBQUU7Z0JBQ1gsTUFBTSxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO2FBQ3JEO1FBQ0gsQ0FBQztLQUFBO0lBRUQ7O09BRUc7SUFDSyxnQkFBZ0IsQ0FBQyxLQUFhO1FBQ3BDLE9BQU8sS0FBSzthQUNULE9BQU8sQ0FBQyxlQUFlLEVBQUUsR0FBRyxDQUFDO2FBQzdCLE9BQU8sQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDO2FBQ3BCLElBQUksRUFBRTthQUNOLFNBQVMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxlQUFlO0lBQ3ZDLENBQUM7Q0FDRjtBQW5qQkQsd0RBbWpCQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMva2l0ZWxldi9Eb2N1bWVudHMvZXhvY29ydGV4LW9ic2lkaWFuLXBsdWdpbi9zcmMvaW5mcmFzdHJ1Y3R1cmUvcmVwb3NpdG9yaWVzL09ic2lkaWFuVGFza1JlcG9zaXRvcnkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwLCBURmlsZSwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgSVRhc2tSZXBvc2l0b3J5IH0gZnJvbSAnLi4vLi4vZG9tYWluL3JlcG9zaXRvcmllcy9JVGFza1JlcG9zaXRvcnknO1xuaW1wb3J0IHsgVGFzayB9IGZyb20gJy4uLy4uL2RvbWFpbi9lbnRpdGllcy9UYXNrJztcbmltcG9ydCB7IFRhc2tJZCB9IGZyb20gJy4uLy4uL2RvbWFpbi92YWx1ZS1vYmplY3RzL1Rhc2tJZCc7XG5pbXBvcnQgeyBBc3NldElkIH0gZnJvbSAnLi4vLi4vZG9tYWluL3ZhbHVlLW9iamVjdHMvQXNzZXRJZCc7XG5pbXBvcnQgeyBUYXNrU3RhdHVzLCBUYXNrU3RhdHVzVHlwZSB9IGZyb20gJy4uLy4uL2RvbWFpbi92YWx1ZS1vYmplY3RzL1Rhc2tTdGF0dXMnO1xuaW1wb3J0IHsgUHJpb3JpdHksIFByaW9yaXR5TGV2ZWwgfSBmcm9tICcuLi8uLi9kb21haW4vdmFsdWUtb2JqZWN0cy9Qcmlvcml0eSc7XG5pbXBvcnQgeyBSZXN1bHQgfSBmcm9tICcuLi8uLi9kb21haW4vY29yZS9SZXN1bHQnO1xuXG4vKipcbiAqIE9ic2lkaWFuLXNwZWNpZmljIGltcGxlbWVudGF0aW9uIG9mIElUYXNrUmVwb3NpdG9yeVxuICogTWFuYWdlcyB0YXNrIHBlcnNpc3RlbmNlIHVzaW5nIE9ic2lkaWFuIHZhdWx0IGZpbGVzXG4gKi9cbmV4cG9ydCBjbGFzcyBPYnNpZGlhblRhc2tSZXBvc2l0b3J5IGltcGxlbWVudHMgSVRhc2tSZXBvc2l0b3J5IHtcbiAgcHJpdmF0ZSByZWFkb25seSB0YXNrc0ZvbGRlciA9ICdUYXNrcyc7XG4gIHByaXZhdGUgdGFza0NhY2hlOiBNYXA8c3RyaW5nLCBUYXNrPiA9IG5ldyBNYXAoKTtcblxuICBjb25zdHJ1Y3Rvcihwcml2YXRlIHJlYWRvbmx5IGFwcDogQXBwKSB7fVxuXG4gIGFzeW5jIGZpbmRCeUlkKGlkOiBUYXNrSWQpOiBQcm9taXNlPFRhc2sgfCBudWxsPiB7XG4gICAgLy8gQ2hlY2sgY2FjaGUgZmlyc3RcbiAgICBjb25zdCBjYWNoZWQgPSB0aGlzLnRhc2tDYWNoZS5nZXQoaWQudG9TdHJpbmcoKSk7XG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICB9XG5cbiAgICAvLyBTZWFyY2ggZm9yIHRhc2sgZmlsZVxuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKHRoaXMudGFza3NGb2xkZXIpKSB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmlkID09PSBpZC50b1N0cmluZygpKSB7XG4gICAgICAgICAgY29uc3QgdGFzayA9IGF3YWl0IHRoaXMubG9hZFRhc2tGcm9tRmlsZShmaWxlKTtcbiAgICAgICAgICBpZiAodGFzaykge1xuICAgICAgICAgICAgdGhpcy50YXNrQ2FjaGUuc2V0KGlkLnRvU3RyaW5nKCksIHRhc2spO1xuICAgICAgICAgICAgcmV0dXJuIHRhc2s7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBhc3luYyBmaW5kQnlQcm9qZWN0KHByb2plY3RJZDogQXNzZXRJZCk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgY29uc3QgdGFza3M6IFRhc2tbXSA9IFtdO1xuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgodGhpcy50YXNrc0ZvbGRlcikpIHtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgaWYgKG1ldGFkYXRhPy5mcm9udG1hdHRlcj8ucHJvamVjdElkID09PSBwcm9qZWN0SWQudG9TdHJpbmcoKSkge1xuICAgICAgICAgIGNvbnN0IHRhc2sgPSBhd2FpdCB0aGlzLmxvYWRUYXNrRnJvbUZpbGUoZmlsZSk7XG4gICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgIHRhc2tzLnB1c2godGFzayk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhc2tzO1xuICB9XG5cbiAgYXN5bmMgZmluZEJ5U3RhdHVzKHN0YXR1czogVGFza1N0YXR1cyk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgY29uc3QgdGFza3M6IFRhc2tbXSA9IFtdO1xuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuXG4gICAgZm9yIChjb25zdCBmaWxlIG9mIGZpbGVzKSB7XG4gICAgICBpZiAoZmlsZS5wYXRoLnN0YXJ0c1dpdGgodGhpcy50YXNrc0ZvbGRlcikpIHtcbiAgICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgICAgaWYgKG1ldGFkYXRhPy5mcm9udG1hdHRlcj8uc3RhdHVzID09PSBzdGF0dXMudG9TdHJpbmcoKSkge1xuICAgICAgICAgIGNvbnN0IHRhc2sgPSBhd2FpdCB0aGlzLmxvYWRUYXNrRnJvbUZpbGUoZmlsZSk7XG4gICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgIHRhc2tzLnB1c2godGFzayk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhc2tzO1xuICB9XG5cbiAgYXN5bmMgZmluZEJ5UHJpb3JpdHkocHJpb3JpdHk6IFByaW9yaXR5KTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICBjb25zdCB0YXNrczogVGFza1tdID0gW107XG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aCh0aGlzLnRhc2tzRm9sZGVyKSkge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICBpZiAobWV0YWRhdGE/LmZyb250bWF0dGVyPy5wcmlvcml0eSA9PT0gcHJpb3JpdHkudG9TdHJpbmcoKSkge1xuICAgICAgICAgIGNvbnN0IHRhc2sgPSBhd2FpdCB0aGlzLmxvYWRUYXNrRnJvbUZpbGUoZmlsZSk7XG4gICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgIHRhc2tzLnB1c2godGFzayk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhc2tzO1xuICB9XG5cbiAgYXN5bmMgZmluZEJ5VGFnKHRhZzogc3RyaW5nKTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICBjb25zdCB0YXNrczogVGFza1tdID0gW107XG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aCh0aGlzLnRhc2tzRm9sZGVyKSkge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICBjb25zdCB0YWdzID0gbWV0YWRhdGE/LmZyb250bWF0dGVyPy50YWdzIHx8IFtdO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0YWdzKSAmJiB0YWdzLmluY2x1ZGVzKHRhZykpIHtcbiAgICAgICAgICBjb25zdCB0YXNrID0gYXdhaXQgdGhpcy5sb2FkVGFza0Zyb21GaWxlKGZpbGUpO1xuICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICB0YXNrcy5wdXNoKHRhc2spO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXNrcztcbiAgfVxuXG4gIGFzeW5jIGZpbmRPdmVyZHVlKCk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcbiAgICBjb25zdCB0YXNrczogVGFza1tdID0gW107XG4gICAgY29uc3QgZmlsZXMgPSB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCk7XG5cbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIGlmIChmaWxlLnBhdGguc3RhcnRzV2l0aCh0aGlzLnRhc2tzRm9sZGVyKSkge1xuICAgICAgICBjb25zdCBtZXRhZGF0YSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlKGZpbGUpO1xuICAgICAgICBpZiAobWV0YWRhdGE/LmZyb250bWF0dGVyPy5kdWVEYXRlKSB7XG4gICAgICAgICAgY29uc3QgZHVlRGF0ZSA9IG5ldyBEYXRlKG1ldGFkYXRhLmZyb250bWF0dGVyLmR1ZURhdGUpO1xuICAgICAgICAgIGlmIChkdWVEYXRlIDwgbm93ICYmIG1ldGFkYXRhLmZyb250bWF0dGVyLnN0YXR1cyAhPT0gJ2RvbmUnKSB7XG4gICAgICAgICAgICBjb25zdCB0YXNrID0gYXdhaXQgdGhpcy5sb2FkVGFza0Zyb21GaWxlKGZpbGUpO1xuICAgICAgICAgICAgaWYgKHRhc2spIHtcbiAgICAgICAgICAgICAgdGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdGFza3M7XG4gIH1cblxuICBhc3luYyBmaW5kRHVlVG9kYXkoKTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICBjb25zdCB0b2RheSA9IG5ldyBEYXRlKCk7XG4gICAgdG9kYXkuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgY29uc3QgdG9tb3Jyb3cgPSBuZXcgRGF0ZSh0b2RheSk7XG4gICAgdG9tb3Jyb3cuc2V0RGF0ZSh0b21vcnJvdy5nZXREYXRlKCkgKyAxKTtcblxuICAgIHJldHVybiB0aGlzLmZpbmREdWVCZXR3ZWVuKHRvZGF5LCB0b21vcnJvdyk7XG4gIH1cblxuICBhc3luYyBmaW5kRHVlQmV0d2VlbihzdGFydERhdGU6IERhdGUsIGVuZERhdGU6IERhdGUpOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgIGNvbnN0IHRhc2tzOiBUYXNrW10gPSBbXTtcbiAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKHRoaXMudGFza3NGb2xkZXIpKSB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmR1ZURhdGUpIHtcbiAgICAgICAgICBjb25zdCBkdWVEYXRlID0gbmV3IERhdGUobWV0YWRhdGEuZnJvbnRtYXR0ZXIuZHVlRGF0ZSk7XG4gICAgICAgICAgaWYgKGR1ZURhdGUgPj0gc3RhcnREYXRlICYmIGR1ZURhdGUgPD0gZW5kRGF0ZSkge1xuICAgICAgICAgICAgY29uc3QgdGFzayA9IGF3YWl0IHRoaXMubG9hZFRhc2tGcm9tRmlsZShmaWxlKTtcbiAgICAgICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgICAgIHRhc2tzLnB1c2godGFzayk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhc2tzO1xuICB9XG5cbiAgYXN5bmMgZmluZEFsbCgpOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgIGNvbnN0IHRhc2tzOiBUYXNrW10gPSBbXTtcbiAgICBjb25zdCBmaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcblxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKHRoaXMudGFza3NGb2xkZXIpKSB7XG4gICAgICAgIGNvbnN0IHRhc2sgPSBhd2FpdCB0aGlzLmxvYWRUYXNrRnJvbUZpbGUoZmlsZSk7XG4gICAgICAgIGlmICh0YXNrKSB7XG4gICAgICAgICAgdGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXNrcztcbiAgfVxuXG4gIGFzeW5jIGZpbmRCeUNyaXRlcmlhKGNyaXRlcmlhOiB7XG4gICAgc3RhdHVzPzogVGFza1N0YXR1cztcbiAgICBwcmlvcml0eT86IFByaW9yaXR5O1xuICAgIHByb2plY3RJZD86IEFzc2V0SWQ7XG4gICAgdGFncz86IHN0cmluZ1tdO1xuICB9KTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICBsZXQgdGFza3MgPSBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcblxuICAgIGlmIChjcml0ZXJpYS5zdGF0dXMpIHtcbiAgICAgIHRhc2tzID0gdGFza3MuZmlsdGVyKHQgPT4gdC5nZXRTdGF0dXMoKS5lcXVhbHMoY3JpdGVyaWEuc3RhdHVzISkpO1xuICAgIH1cblxuICAgIGlmIChjcml0ZXJpYS5wcmlvcml0eSkge1xuICAgICAgdGFza3MgPSB0YXNrcy5maWx0ZXIodCA9PiB0LmdldFByaW9yaXR5KCkuZXF1YWxzKGNyaXRlcmlhLnByaW9yaXR5ISkpO1xuICAgIH1cblxuICAgIGlmIChjcml0ZXJpYS5wcm9qZWN0SWQpIHtcbiAgICAgIHRhc2tzID0gdGFza3MuZmlsdGVyKHQgPT4gdC5nZXRQcm9qZWN0SWQoKT8uZXF1YWxzKGNyaXRlcmlhLnByb2plY3RJZCEpKTtcbiAgICB9XG5cbiAgICBpZiAoY3JpdGVyaWEudGFncyAmJiBjcml0ZXJpYS50YWdzLmxlbmd0aCA+IDApIHtcbiAgICAgIHRhc2tzID0gdGFza3MuZmlsdGVyKHQgPT4ge1xuICAgICAgICBjb25zdCB0YXNrVGFncyA9IHQuZ2V0VGFncygpO1xuICAgICAgICByZXR1cm4gY3JpdGVyaWEudGFncyEuc29tZSh0YWcgPT4gdGFza1RhZ3MuaW5jbHVkZXModGFnKSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGFza3M7XG4gIH1cblxuICBhc3luYyBzYXZlKHRhc2s6IFRhc2spOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0cnkge1xuICAgICAgLy8gRW5zdXJlIHRhc2tzIGZvbGRlciBleGlzdHNcbiAgICAgIGF3YWl0IHRoaXMuZW5zdXJlVGFza3NGb2xkZXIoKTtcblxuICAgICAgLy8gR2VuZXJhdGUgZmlsZSBwYXRoXG4gICAgICBjb25zdCBmaWxlTmFtZSA9IHRoaXMuc2FuaXRpemVGaWxlTmFtZSh0YXNrLmdldFRpdGxlKCkpO1xuICAgICAgY29uc3QgZmlsZVBhdGggPSBgJHt0aGlzLnRhc2tzRm9sZGVyfS8ke2ZpbGVOYW1lfS5tZGA7XG5cbiAgICAgIC8vIENoZWNrIGlmIGZpbGUgYWxyZWFkeSBleGlzdHNcbiAgICAgIGxldCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcbiAgICAgIFxuICAgICAgaWYgKCFmaWxlKSB7XG4gICAgICAgIC8vIENyZWF0ZSBuZXcgZmlsZVxuICAgICAgICBmaWxlID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY3JlYXRlKGZpbGVQYXRoLCAnJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICghKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGaWxlIHBhdGggZXhpc3RzIGJ1dCBpcyBub3QgYSBmaWxlJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIEdlbmVyYXRlIGNvbnRlbnRcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSB0aGlzLmdlbmVyYXRlVGFza0NvbnRlbnQodGFzayk7XG5cbiAgICAgIC8vIFNhdmUgZmlsZVxuICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQubW9kaWZ5KGZpbGUsIGNvbnRlbnQpO1xuXG4gICAgICAvLyBVcGRhdGUgY2FjaGVcbiAgICAgIHRoaXMudGFza0NhY2hlLnNldCh0YXNrLmdldElkKCkudG9TdHJpbmcoKSwgdGFzayk7XG5cbiAgICAgIC8vIFNob3cgc3VjY2VzcyBub3RpY2VcbiAgICAgIG5ldyBOb3RpY2UoYFRhc2sgXCIke3Rhc2suZ2V0VGl0bGUoKX1cIiBzYXZlZCBzdWNjZXNzZnVsbHlgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHNhdmUgdGFzazonLCBlcnJvcik7XG4gICAgICBuZXcgTm90aWNlKGBGYWlsZWQgdG8gc2F2ZSB0YXNrOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG4gIH1cblxuICBhc3luYyBkZWxldGUoaWQ6IFRhc2tJZCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xuICAgIFxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgaWYgKGZpbGUucGF0aC5zdGFydHNXaXRoKHRoaXMudGFza3NGb2xkZXIpKSB7XG4gICAgICAgIGNvbnN0IG1ldGFkYXRhID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUoZmlsZSk7XG4gICAgICAgIGlmIChtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmlkID09PSBpZC50b1N0cmluZygpKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5hcHAudmF1bHQuZGVsZXRlKGZpbGUpO1xuICAgICAgICAgIHRoaXMudGFza0NhY2hlLmRlbGV0ZShpZC50b1N0cmluZygpKTtcbiAgICAgICAgICBuZXcgTm90aWNlKCdUYXNrIGRlbGV0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKGBUYXNrIHdpdGggaWQgJHtpZC50b1N0cmluZygpfSBub3QgZm91bmRgKTtcbiAgfVxuXG4gIGFzeW5jIGV4aXN0cyhpZDogVGFza0lkKTogUHJvbWlzZTxib29sZWFuPiB7XG4gICAgY29uc3QgdGFzayA9IGF3YWl0IHRoaXMuZmluZEJ5SWQoaWQpO1xuICAgIHJldHVybiB0YXNrICE9PSBudWxsO1xuICB9XG5cbiAgYXN5bmMgZmluZEJ5RmlsZW5hbWUoZmlsZW5hbWU6IHN0cmluZyk6IFByb21pc2U8VGFzayB8IG51bGw+IHtcbiAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGAke3RoaXMudGFza3NGb2xkZXJ9LyR7ZmlsZW5hbWV9YCk7XG4gICAgXG4gICAgaWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xuICAgICAgcmV0dXJuIGF3YWl0IHRoaXMubG9hZFRhc2tGcm9tRmlsZShmaWxlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGdldFN0YXRpc3RpY3MoKTogUHJvbWlzZTx7XG4gICAgdG90YWw6IG51bWJlcjtcbiAgICBieVN0YXR1czogUmVjb3JkPHN0cmluZywgbnVtYmVyPjtcbiAgICBieVByaW9yaXR5OiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+O1xuICAgIG92ZXJkdWU6IG51bWJlcjtcbiAgICBkdWVUb2RheTogbnVtYmVyO1xuICAgIGR1ZVRoaXNXZWVrOiBudW1iZXI7XG4gICAgY29tcGxldGVkOiBudW1iZXI7XG4gICAgYXZlcmFnZUNvbXBsZXRpb25UaW1lPzogbnVtYmVyO1xuICB9PiB7XG4gICAgY29uc3QgdGFza3MgPSBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IHRvZGF5ID0gbmV3IERhdGUoKTtcbiAgICB0b2RheS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICBjb25zdCB0b21vcnJvdyA9IG5ldyBEYXRlKHRvZGF5KTtcbiAgICB0b21vcnJvdy5zZXREYXRlKHRvbW9ycm93LmdldERhdGUoKSArIDEpO1xuICAgIGNvbnN0IHdlZWtFbmQgPSBuZXcgRGF0ZSh0b2RheSk7XG4gICAgd2Vla0VuZC5zZXREYXRlKHdlZWtFbmQuZ2V0RGF0ZSgpICsgNyk7XG5cbiAgICBjb25zdCBzdGF0cyA9IHtcbiAgICAgIHRvdGFsOiB0YXNrcy5sZW5ndGgsXG4gICAgICBieVN0YXR1czoge30gYXMgUmVjb3JkPHN0cmluZywgbnVtYmVyPixcbiAgICAgIGJ5UHJpb3JpdHk6IHt9IGFzIFJlY29yZDxzdHJpbmcsIG51bWJlcj4sXG4gICAgICBvdmVyZHVlOiAwLFxuICAgICAgZHVlVG9kYXk6IDAsXG4gICAgICBkdWVUaGlzV2VlazogMCxcbiAgICAgIGNvbXBsZXRlZDogMCxcbiAgICAgIGF2ZXJhZ2VDb21wbGV0aW9uVGltZTogdW5kZWZpbmVkIGFzIG51bWJlciB8IHVuZGVmaW5lZFxuICAgIH07XG5cbiAgICBsZXQgY29tcGxldGlvblRpbWVzOiBudW1iZXJbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCB0YXNrIG9mIHRhc2tzKSB7XG4gICAgICAvLyBTdGF0dXMgc3RhdGlzdGljc1xuICAgICAgY29uc3Qgc3RhdHVzID0gdGFzay5nZXRTdGF0dXMoKS50b1N0cmluZygpO1xuICAgICAgc3RhdHMuYnlTdGF0dXNbc3RhdHVzXSA9IChzdGF0cy5ieVN0YXR1c1tzdGF0dXNdIHx8IDApICsgMTtcblxuICAgICAgLy8gQ291bnQgY29tcGxldGVkIHRhc2tzXG4gICAgICBpZiAoc3RhdHVzID09PSAnZG9uZScpIHtcbiAgICAgICAgc3RhdHMuY29tcGxldGVkKys7XG4gICAgICAgIFxuICAgICAgICAvLyBDYWxjdWxhdGUgY29tcGxldGlvbiB0aW1lIGlmIHdlIGhhdmUgYm90aCBjcmVhdGVkIGFuZCB1cGRhdGVkIGRhdGVzXG4gICAgICAgIGNvbnN0IGNyZWF0ZWRBdCA9IHRhc2suZ2V0Q3JlYXRlZEF0KCk7XG4gICAgICAgIGNvbnN0IHVwZGF0ZWRBdCA9IHRhc2suZ2V0VXBkYXRlZEF0KCk7XG4gICAgICAgIGlmIChjcmVhdGVkQXQgJiYgdXBkYXRlZEF0KSB7XG4gICAgICAgICAgY29uc3QgY29tcGxldGlvblRpbWUgPSB1cGRhdGVkQXQuZ2V0VGltZSgpIC0gY3JlYXRlZEF0LmdldFRpbWUoKTtcbiAgICAgICAgICBjb21wbGV0aW9uVGltZXMucHVzaChjb21wbGV0aW9uVGltZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gUHJpb3JpdHkgc3RhdGlzdGljc1xuICAgICAgY29uc3QgcHJpb3JpdHkgPSB0YXNrLmdldFByaW9yaXR5KCkudG9TdHJpbmcoKTtcbiAgICAgIHN0YXRzLmJ5UHJpb3JpdHlbcHJpb3JpdHldID0gKHN0YXRzLmJ5UHJpb3JpdHlbcHJpb3JpdHldIHx8IDApICsgMTtcblxuICAgICAgLy8gRHVlIGRhdGUgc3RhdGlzdGljc1xuICAgICAgY29uc3QgZHVlRGF0ZSA9IHRhc2suZ2V0RHVlRGF0ZSgpO1xuICAgICAgaWYgKGR1ZURhdGUpIHtcbiAgICAgICAgaWYgKGR1ZURhdGUgPCBub3cgJiYgdGFzay5nZXRTdGF0dXMoKS50b1N0cmluZygpICE9PSAnZG9uZScpIHtcbiAgICAgICAgICBzdGF0cy5vdmVyZHVlKys7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGR1ZURhdGUgPj0gdG9kYXkgJiYgZHVlRGF0ZSA8IHRvbW9ycm93KSB7XG4gICAgICAgICAgc3RhdHMuZHVlVG9kYXkrKztcbiAgICAgICAgfVxuICAgICAgICBpZiAoZHVlRGF0ZSA+PSB0b2RheSAmJiBkdWVEYXRlIDwgd2Vla0VuZCkge1xuICAgICAgICAgIHN0YXRzLmR1ZVRoaXNXZWVrKys7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDYWxjdWxhdGUgYXZlcmFnZSBjb21wbGV0aW9uIHRpbWVcbiAgICBpZiAoY29tcGxldGlvblRpbWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHRvdGFsVGltZSA9IGNvbXBsZXRpb25UaW1lcy5yZWR1Y2UoKHN1bSwgdGltZSkgPT4gc3VtICsgdGltZSwgMCk7XG4gICAgICBzdGF0cy5hdmVyYWdlQ29tcGxldGlvblRpbWUgPSB0b3RhbFRpbWUgLyBjb21wbGV0aW9uVGltZXMubGVuZ3RoO1xuICAgIH1cblxuICAgIHJldHVybiBzdGF0cztcbiAgfVxuXG4gIGFzeW5jIHNlYXJjaChxdWVyeTogc3RyaW5nKTogUHJvbWlzZTxUYXNrW10+IHtcbiAgICBjb25zdCB0YXNrcyA9IGF3YWl0IHRoaXMuZmluZEFsbCgpO1xuICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgcmV0dXJuIHRhc2tzLmZpbHRlcih0YXNrID0+IHtcbiAgICAgIGNvbnN0IHRpdGxlID0gdGFzay5nZXRUaXRsZSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRhc2suZ2V0RGVzY3JpcHRpb24oKT8udG9Mb3dlckNhc2UoKSB8fCAnJztcbiAgICAgIGNvbnN0IHRhZ3MgPSB0YXNrLmdldFRhZ3MoKS5qb2luKCcgJykudG9Mb3dlckNhc2UoKTtcblxuICAgICAgcmV0dXJuIHRpdGxlLmluY2x1ZGVzKGxvd2VyUXVlcnkpIHx8XG4gICAgICAgICAgICAgZGVzY3JpcHRpb24uaW5jbHVkZXMobG93ZXJRdWVyeSkgfHxcbiAgICAgICAgICAgICB0YWdzLmluY2x1ZGVzKGxvd2VyUXVlcnkpO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZmluZFJlY2VudGx5VXBkYXRlZChsaW1pdDogbnVtYmVyID0gMTApOiBQcm9taXNlPFRhc2tbXT4ge1xuICAgIGNvbnN0IHRhc2tzID0gYXdhaXQgdGhpcy5maW5kQWxsKCk7XG4gICAgXG4gICAgcmV0dXJuIHRhc2tzXG4gICAgICAuc29ydCgoYSwgYikgPT4gYi5nZXRVcGRhdGVkQXQoKS5nZXRUaW1lKCkgLSBhLmdldFVwZGF0ZWRBdCgpLmdldFRpbWUoKSlcbiAgICAgIC5zbGljZSgwLCBsaW1pdCk7XG4gIH1cblxuICBhc3luYyBmaW5kUmVjZW50bHlDcmVhdGVkKGxpbWl0OiBudW1iZXIgPSAxMCk6IFByb21pc2U8VGFza1tdPiB7XG4gICAgY29uc3QgdGFza3MgPSBhd2FpdCB0aGlzLmZpbmRBbGwoKTtcbiAgICBcbiAgICByZXR1cm4gdGFza3NcbiAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmdldENyZWF0ZWRBdCgpLmdldFRpbWUoKSAtIGEuZ2V0Q3JlYXRlZEF0KCkuZ2V0VGltZSgpKVxuICAgICAgLnNsaWNlKDAsIGxpbWl0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMb2FkIHRhc2sgZnJvbSBPYnNpZGlhbiBmaWxlXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGxvYWRUYXNrRnJvbUZpbGUoZmlsZTogVEZpbGUpOiBQcm9taXNlPFRhc2sgfCBudWxsPiB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xuICAgICAgY29uc3QgbWV0YWRhdGEgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICAgIFxuICAgICAgaWYgKCFtZXRhZGF0YT8uZnJvbnRtYXR0ZXI/LmlkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBmbSA9IG1ldGFkYXRhLmZyb250bWF0dGVyO1xuXG4gICAgICAvLyBQYXJzZSBwcmlvcml0eVxuICAgICAgY29uc3QgcHJpb3JpdHlSZXN1bHQgPSBQcmlvcml0eS5jcmVhdGUoZm0ucHJpb3JpdHkgfHwgJ21lZGl1bScpO1xuICAgICAgaWYgKHByaW9yaXR5UmVzdWx0LmlzRmFpbHVyZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEludmFsaWQgcHJpb3JpdHkgaW4gdGFzayAke2ZtLmlkfTogJHtmbS5wcmlvcml0eX1gKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhcnNlIHN0YXR1c1xuICAgICAgY29uc3Qgc3RhdHVzUmVzdWx0ID0gVGFza1N0YXR1cy5jcmVhdGUoZm0uc3RhdHVzIHx8ICd0b2RvJyk7XG4gICAgICBpZiAoc3RhdHVzUmVzdWx0LmlzRmFpbHVyZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEludmFsaWQgc3RhdHVzIGluIHRhc2sgJHtmbS5pZH06ICR7Zm0uc3RhdHVzfWApO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLy8gUGFyc2UgcHJvamVjdCBJRFxuICAgICAgbGV0IHByb2plY3RJZDogQXNzZXRJZCB8IHVuZGVmaW5lZDtcbiAgICAgIGlmIChmbS5wcm9qZWN0SWQpIHtcbiAgICAgICAgY29uc3QgcHJvamVjdElkUmVzdWx0ID0gQXNzZXRJZC5jcmVhdGUoZm0ucHJvamVjdElkKTtcbiAgICAgICAgaWYgKHByb2plY3RJZFJlc3VsdC5pc1N1Y2Nlc3MpIHtcbiAgICAgICAgICBwcm9qZWN0SWQgPSBwcm9qZWN0SWRSZXN1bHQuZ2V0VmFsdWUoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBQYXJzZSBkYXRlc1xuICAgICAgY29uc3QgZHVlRGF0ZSA9IGZtLmR1ZURhdGUgPyBuZXcgRGF0ZShmbS5kdWVEYXRlKSA6IHVuZGVmaW5lZDtcbiAgICAgIGNvbnN0IGNyZWF0ZWRBdCA9IGZtLmNyZWF0ZWRBdCA/IG5ldyBEYXRlKGZtLmNyZWF0ZWRBdCkgOiBmaWxlLnN0YXQuY3RpbWU7XG4gICAgICBjb25zdCB1cGRhdGVkQXQgPSBmbS51cGRhdGVkQXQgPyBuZXcgRGF0ZShmbS51cGRhdGVkQXQpIDogZmlsZS5zdGF0Lm10aW1lO1xuXG4gICAgICAvLyBDcmVhdGUgdGFzayBJRFxuICAgICAgY29uc3QgdGFza0lkUmVzdWx0ID0gVGFza0lkLmNyZWF0ZShmbS5pZCk7XG4gICAgICBpZiAodGFza0lkUmVzdWx0LmlzRmFpbHVyZSkge1xuICAgICAgICBjb25zb2xlLndhcm4oYEludmFsaWQgdGFzayBJRDogJHtmbS5pZH1gKTtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8vIEV4dHJhY3QgZGVzY3JpcHRpb24gZnJvbSBjb250ZW50IChldmVyeXRoaW5nIGFmdGVyIGZyb250bWF0dGVyKVxuICAgICAgY29uc3QgY29udGVudExpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgICBsZXQgaW5Gcm9udG1hdHRlciA9IGZhbHNlO1xuICAgICAgbGV0IGRlc2NyaXB0aW9uID0gJyc7XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgbGluZSBvZiBjb250ZW50TGluZXMpIHtcbiAgICAgICAgaWYgKGxpbmUgPT09ICctLS0nKSB7XG4gICAgICAgICAgaW5Gcm9udG1hdHRlciA9ICFpbkZyb250bWF0dGVyO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghaW5Gcm9udG1hdHRlciAmJiBsaW5lLnRyaW0oKSAmJiAhbGluZS5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgICAgICBkZXNjcmlwdGlvbiArPSBsaW5lICsgJ1xcbic7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ3JlYXRlIHRhc2tcbiAgICAgIGNvbnN0IHRhc2tSZXN1bHQgPSBUYXNrLmNyZWF0ZSh7XG4gICAgICAgIHRpdGxlOiBmbS50aXRsZSB8fCBmaWxlLmJhc2VuYW1lLFxuICAgICAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb24udHJpbSgpIHx8IGZtLmRlc2NyaXB0aW9uLFxuICAgICAgICBwcmlvcml0eTogcHJpb3JpdHlSZXN1bHQuZ2V0VmFsdWUoKSxcbiAgICAgICAgc3RhdHVzOiBzdGF0dXNSZXN1bHQuZ2V0VmFsdWUoKSxcbiAgICAgICAgcHJvamVjdElkLFxuICAgICAgICBkdWVEYXRlLFxuICAgICAgICBlc3RpbWF0ZWRIb3VyczogZm0uZXN0aW1hdGVkSG91cnMsXG4gICAgICAgIHRhZ3M6IGZtLnRhZ3MgfHwgW11cbiAgICAgIH0pO1xuXG4gICAgICBpZiAodGFza1Jlc3VsdC5pc0ZhaWx1cmUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBGYWlsZWQgdG8gY3JlYXRlIHRhc2sgZnJvbSBmaWxlICR7ZmlsZS5wYXRofTogJHt0YXNrUmVzdWx0LmVycm9yfWApO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRhc2tSZXN1bHQuZ2V0VmFsdWUoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGxvYWQgdGFzayBmcm9tIGZpbGUgJHtmaWxlLnBhdGh9OmAsIGVycm9yKTtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBtYXJrZG93biBjb250ZW50IGZvciB0YXNrXG4gICAqL1xuICBwcml2YXRlIGdlbmVyYXRlVGFza0NvbnRlbnQodGFzazogVGFzayk6IHN0cmluZyB7XG4gICAgY29uc3QgZnJvbnRtYXR0ZXIgPSB0YXNrLnRvRnJvbnRtYXR0ZXIoKTtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IHRhc2suZ2V0RGVzY3JpcHRpb24oKSB8fCAnJztcblxuICAgIC8vIEJ1aWxkIGZyb250bWF0dGVyIFlBTUxcbiAgICBsZXQgY29udGVudCA9ICctLS1cXG4nO1xuICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGZyb250bWF0dGVyKSkge1xuICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwpIHtcbiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGNvbnRlbnQgKz0gYCR7a2V5fTpcXG5gO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHZhbHVlKSB7XG4gICAgICAgICAgICAgIGNvbnRlbnQgKz0gYCAgLSAke2l0ZW19XFxuYDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgIGNvbnRlbnQgKz0gYCR7a2V5fTogJHtKU09OLnN0cmluZ2lmeSh2YWx1ZSl9XFxuYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb250ZW50ICs9IGAke2tleX06ICR7dmFsdWV9XFxuYDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb250ZW50ICs9ICctLS1cXG5cXG4nO1xuXG4gICAgLy8gQWRkIHRpdGxlXG4gICAgY29udGVudCArPSBgIyAke3Rhc2suZ2V0VGl0bGUoKX1cXG5cXG5gO1xuXG4gICAgLy8gQWRkIGRlc2NyaXB0aW9uXG4gICAgaWYgKGRlc2NyaXB0aW9uKSB7XG4gICAgICBjb250ZW50ICs9IGAke2Rlc2NyaXB0aW9ufVxcblxcbmA7XG4gICAgfVxuXG4gICAgLy8gQWRkIHRhc2sgZGV0YWlscyBzZWN0aW9uXG4gICAgY29udGVudCArPSAnIyMgRGV0YWlsc1xcblxcbic7XG4gICAgY29udGVudCArPSBgLSAqKlN0YXR1cyoqOiAke3Rhc2suZ2V0U3RhdHVzKCkudG9TdHJpbmcoKX1cXG5gO1xuICAgIGNvbnRlbnQgKz0gYC0gKipQcmlvcml0eSoqOiAke3Rhc2suZ2V0UHJpb3JpdHkoKS50b1N0cmluZygpfVxcbmA7XG4gICAgXG4gICAgaWYgKHRhc2suZ2V0UHJvamVjdElkKCkpIHtcbiAgICAgIGNvbnRlbnQgKz0gYC0gKipQcm9qZWN0Kio6IFtbJHt0YXNrLmdldFByb2plY3RJZCgpPy50b1N0cmluZygpfV1dXFxuYDtcbiAgICB9XG4gICAgXG4gICAgaWYgKHRhc2suZ2V0RHVlRGF0ZSgpKSB7XG4gICAgICBjb250ZW50ICs9IGAtICoqRHVlIERhdGUqKjogJHt0YXNrLmdldER1ZURhdGUoKT8udG9JU09TdHJpbmcoKS5zcGxpdCgnVCcpWzBdfVxcbmA7XG4gICAgfVxuICAgIFxuICAgIGlmICh0YXNrLmdldEVzdGltYXRlZEhvdXJzKCkpIHtcbiAgICAgIGNvbnRlbnQgKz0gYC0gKipFc3RpbWF0ZWQgSG91cnMqKjogJHt0YXNrLmdldEVzdGltYXRlZEhvdXJzKCl9XFxuYDtcbiAgICB9XG5cbiAgICAvLyBBZGQgdGFncyBzZWN0aW9uXG4gICAgY29uc3QgdGFncyA9IHRhc2suZ2V0VGFncygpO1xuICAgIGlmICh0YWdzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnRlbnQgKz0gJ1xcbiMjIFRhZ3NcXG5cXG4nO1xuICAgICAgY29udGVudCArPSB0YWdzLm1hcCh0YWcgPT4gYCMke3RhZ31gKS5qb2luKCcgJykgKyAnXFxuJztcbiAgICB9XG5cbiAgICAvLyBBZGQgbm90ZXMgc2VjdGlvblxuICAgIGNvbnRlbnQgKz0gJ1xcbiMjIE5vdGVzXFxuXFxuJztcbiAgICBjb250ZW50ICs9ICdfQWRkIHlvdXIgbm90ZXMgaGVyZS4uLl9cXG4nO1xuXG4gICAgcmV0dXJuIGNvbnRlbnQ7XG4gIH1cblxuICAvKipcbiAgICogRW5zdXJlIHRhc2tzIGZvbGRlciBleGlzdHNcbiAgICovXG4gIHByaXZhdGUgYXN5bmMgZW5zdXJlVGFza3NGb2xkZXIoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgZm9sZGVyID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMudGFza3NGb2xkZXIpO1xuICAgIGlmICghZm9sZGVyKSB7XG4gICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5jcmVhdGVGb2xkZXIodGhpcy50YXNrc0ZvbGRlcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNhbml0aXplIGZpbGVuYW1lIGZvciBzYWZlIGZpbGUgY3JlYXRpb25cbiAgICovXG4gIHByaXZhdGUgc2FuaXRpemVGaWxlTmFtZSh0aXRsZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGl0bGVcbiAgICAgIC5yZXBsYWNlKC9bXFxcXC86Kj9cIjw+fF0vZywgJy0nKVxuICAgICAgLnJlcGxhY2UoL1xccysvZywgJyAnKVxuICAgICAgLnRyaW0oKVxuICAgICAgLnN1YnN0cmluZygwLCAxMDApOyAvLyBMaW1pdCBsZW5ndGhcbiAgfVxufSJdLCJ2ZXJzaW9uIjozfQ==