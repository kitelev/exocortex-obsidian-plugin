6f6fe77d0b34818afed26aa926f2120a
"use strict";
/**
 * Test suite for RDF Service functionality
 */
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
// Mock the dependent services
jest.mock('../../../../src/application/services/RDFFileManager');
jest.mock('../../../../src/application/services/RDFParser');
jest.mock('../../../../src/application/services/RDFValidator');
jest.mock('../../../../src/application/services/RDFSerializer');
jest.mock('../../../../src/application/services/NamespaceManager');
const RDFService_1 = require("../../../../src/application/services/RDFService");
const RDFSerializer_1 = require("../../../../src/application/services/RDFSerializer");
const RDFParser_1 = require("../../../../src/application/services/RDFParser");
const NamespaceManager_1 = require("../../../../src/application/services/NamespaceManager");
const Graph_1 = require("../../../../src/domain/semantic/core/Graph");
const Triple_1 = require("../../../../src/domain/semantic/core/Triple");
// Mock Obsidian App
const mockApp = {
    vault: {
        getAbstractFileByPath: jest.fn(),
        createFolder: jest.fn(),
        create: jest.fn(),
        modify: jest.fn(),
        read: jest.fn(),
        getFiles: jest.fn(),
        adapter: {
            write: jest.fn(),
            read: jest.fn()
        }
    }
};
// Mock the service classes
const mockRDFFileManager = {
    readFromVault: jest.fn(),
    saveToVault: jest.fn(),
    detectFormatFromExtension: jest.fn(),
    listRDFFiles: jest.fn(),
    generateFileName: jest.fn()
};
const mockRDFParser = {
    parse: jest.fn()
};
const mockRDFValidator = {
    validateExportOptions: jest.fn(),
    validateImportOptions: jest.fn(),
    validateGraph: jest.fn()
};
const mockRDFSerializer = {
    serialize: jest.fn()
};
const mockNamespaceManager = {
    hasPrefix: jest.fn(),
    addBinding: jest.fn(),
    getPrefix: jest.fn(),
    expand: jest.fn(),
    compressIRI: jest.fn(),
    getAllBindings: jest.fn(),
    generatePrefixDeclarations: jest.fn(),
    getNamespace: jest.fn(),
    expandCURIE: jest.fn()
};
// Import and mock the constructors
const RDFFileManager_1 = require("../../../../src/application/services/RDFFileManager");
const RDFValidator_1 = require("../../../../src/application/services/RDFValidator");
// Configure the mocked constructors
RDFFileManager_1.RDFFileManager.mockImplementation(() => mockRDFFileManager);
RDFParser_1.RDFParser.mockImplementation(() => mockRDFParser);
RDFValidator_1.RDFValidator.mockImplementation(() => mockRDFValidator);
RDFSerializer_1.RDFSerializer.mockImplementation(() => mockRDFSerializer);
NamespaceManager_1.NamespaceManager.mockImplementation(() => mockNamespaceManager);
describe('RDFService', () => {
    let rdfService;
    let graph;
    beforeEach(() => {
        // Reset all mocks
        jest.clearAllMocks();
        // Setup default mock responses for successful operations
        mockRDFFileManager.readFromVault.mockResolvedValue({
            isSuccess: true,
            isFailure: false,
            getValue: () => '@prefix ex: <http://example.org/> . ex:test ex:prop "value" .',
            errorValue: () => null
        });
        mockRDFFileManager.detectFormatFromExtension.mockReturnValue('turtle');
        mockRDFParser.parse.mockReturnValue({
            isSuccess: true,
            isFailure: false,
            getValue: () => ({
                graph: new Graph_1.Graph(),
                tripleCount: 1,
                namespaces: { 'ex': 'http://example.org/' },
                warnings: []
            }),
            errorValue: () => null
        });
        mockRDFValidator.validateExportOptions.mockReturnValue({
            isSuccess: true,
            isFailure: false,
            getValue: () => true,
            errorValue: () => null
        });
        mockRDFValidator.validateImportOptions.mockReturnValue({
            isSuccess: true,
            isFailure: false,
            getValue: () => true,
            errorValue: () => null
        });
        mockRDFFileManager.listRDFFiles.mockResolvedValue({
            isSuccess: true,
            isFailure: false,
            getValue: () => [],
            errorValue: () => null
        });
        mockRDFFileManager.saveToVault.mockResolvedValue({
            isSuccess: true,
            isFailure: false,
            getValue: () => ({ filePath: 'test.ttl', success: true }),
            errorValue: () => null
        });
        mockRDFFileManager.generateFileName.mockReturnValue('generated-file.ttl');
        // Setup serializer mock - make it format-aware
        mockRDFSerializer.serialize.mockImplementation((graph, options) => {
            const tripleCount = graph.size();
            let content;
            switch (options.format) {
                case 'json-ld':
                    content = JSON.stringify({
                        "@context": { "ex": "http://example.org/" },
                        "@graph": [
                            {
                                "@id": "http://example.org/person/1",
                                "http://example.org/name": { "@value": "John Doe" }
                            }
                        ]
                    }, null, 2);
                    break;
                case 'n-triples':
                    content = '<http://example.org/person/1> <http://example.org/name> "John Doe" .';
                    break;
                case 'turtle':
                default:
                    content = '@prefix ex: <http://example.org/> .\n<http://example.org/person/1> <http://example.org/name> "John Doe" .';
                    break;
            }
            return {
                isSuccess: true,
                isFailure: false,
                getValue: () => ({
                    content,
                    tripleCount,
                    format: options.format
                }),
                errorValue: () => null
            };
        });
        // Setup namespace manager mock
        mockNamespaceManager.hasPrefix.mockReturnValue(false);
        mockNamespaceManager.addBinding.mockImplementation(() => { });
        mockNamespaceManager.compressIRI.mockImplementation((iri) => iri.toString());
        mockNamespaceManager.getAllBindings.mockReturnValue([
            { prefix: 'ex', namespace: { toString: () => 'http://example.org/' } },
            { prefix: 'foaf', namespace: { toString: () => 'http://xmlns.com/foaf/0.1/' } }
        ]);
        mockNamespaceManager.generatePrefixDeclarations.mockReturnValue('@prefix ex: <http://example.org/> .');
        mockNamespaceManager.getNamespace.mockReturnValue(null);
        mockNamespaceManager.expandCURIE.mockReturnValue({ isSuccess: false });
        mockRDFValidator.validateGraph.mockReturnValue({
            isSuccess: true,
            isFailure: false,
            getValue: () => ({
                isValid: true,
                errors: [],
                warnings: []
            }),
            errorValue: () => null
        });
        rdfService = new RDFService_1.RDFService(mockApp);
        graph = new Graph_1.Graph();
        // Add some test data
        const subject = new Triple_1.IRI('http://example.org/person/1');
        const predicate = new Triple_1.IRI('http://example.org/name');
        const object = Triple_1.Literal.string('John Doe');
        graph.add(new Triple_1.Triple(subject, predicate, object));
    });
    describe('exportGraph', () => {
        it('should export graph in Turtle format', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const result = yield rdfService.exportGraph(graph, {
                format: 'turtle',
                saveToVault: false
            });
            expect(result.isSuccess).toBe(true);
            const exportData = result.getValue();
            expect(exportData.format).toBe('turtle');
            expect(exportData.tripleCount).toBe(1);
            expect(exportData.content).toContain('@prefix');
            expect(exportData.content).toContain('John Doe');
        }));
        it('should export graph in JSON-LD format', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const result = yield rdfService.exportGraph(graph, {
                format: 'json-ld',
                saveToVault: false
            });
            expect(result.isSuccess).toBe(true);
            const exportData = result.getValue();
            expect(exportData.format).toBe('json-ld');
            expect(exportData.tripleCount).toBe(1);
            // Should be valid JSON
            const jsonData = JSON.parse(exportData.content);
            expect(jsonData['@context']).toBeDefined();
            expect(jsonData['@graph']).toBeDefined();
        }));
        it('should validate export options', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Mock validation failure for invalid format
            mockRDFValidator.validateExportOptions.mockReturnValue({
                isSuccess: false,
                isFailure: true,
                getValue: () => null,
                errorValue: () => 'Unsupported format: invalid'
            });
            const result = yield rdfService.exportGraph(graph, {
                format: 'invalid',
                saveToVault: false
            });
            expect(result.isFailure).toBe(true);
            expect(result.errorValue()).toContain('Unsupported format: invalid');
        }));
    });
    describe('importRDF', () => {
        it('should import Turtle format RDF', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const turtleContent = `
                @prefix ex: <http://example.org/> .
                ex:person1 ex:name "Jane Smith" .
                ex:person1 ex:age "30"^^<http://www.w3.org/2001/XMLSchema#integer> .
            `;
            const result = yield rdfService.importRDF(turtleContent, graph, {
                format: 'turtle',
                mergeMode: 'merge'
            });
            expect(result.isSuccess).toBe(true);
            const { graph: updatedGraph, imported } = result.getValue();
            expect(imported.tripleCount).toBeGreaterThan(0);
            expect(updatedGraph.size()).toBeGreaterThanOrEqual(1); // Should have at least the imported data
        }));
        it('should import JSON-LD format RDF', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const jsonldContent = JSON.stringify({
                "@context": {
                    "ex": "http://example.org/"
                },
                "@graph": [
                    {
                        "@id": "ex:person2",
                        "ex:name": { "@value": "Bob Johnson" },
                        "ex:age": { "@value": "25", "@type": "http://www.w3.org/2001/XMLSchema#integer" }
                    }
                ]
            });
            const result = yield rdfService.importRDF(jsonldContent, graph, {
                format: 'json-ld',
                mergeMode: 'merge'
            });
            expect(result.isSuccess).toBe(true);
            const { imported } = result.getValue();
            expect(imported.tripleCount).toBeGreaterThan(0);
        }));
        it('should validate import options', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Mock validation failure for invalid format
            mockRDFValidator.validateImportOptions.mockReturnValue({
                isSuccess: false,
                isFailure: true,
                getValue: () => null,
                errorValue: () => 'Unsupported import format: invalid'
            });
            const result = yield rdfService.importRDF('invalid content', graph, {
                format: 'invalid',
                mergeMode: 'merge'
            });
            expect(result.isFailure).toBe(true);
            expect(result.errorValue()).toContain('Unsupported import format: invalid');
        }));
        it('should handle replace merge mode', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const originalSize = graph.size();
            const turtleContent = `
                @prefix ex: <http://example.org/> .
                ex:newperson ex:name "New Person" .
            `;
            // Mock successful parsing with specific data for replace mode
            const replacementGraph = new Graph_1.Graph();
            replacementGraph.add(new Triple_1.Triple(new Triple_1.IRI('http://example.org/newperson'), new Triple_1.IRI('http://example.org/name'), Triple_1.Literal.string('New Person')));
            mockRDFParser.parse.mockReturnValue({
                isSuccess: true,
                isFailure: false,
                getValue: () => ({
                    graph: replacementGraph,
                    tripleCount: 1,
                    namespaces: { 'ex': 'http://example.org/' },
                    warnings: []
                }),
                errorValue: () => null
            });
            const result = yield rdfService.importRDF(turtleContent, graph, {
                format: 'turtle',
                mergeMode: 'replace'
            });
            expect(result.isSuccess).toBe(true);
            const { graph: updatedGraph } = result.getValue();
            // In replace mode, should return the replacement graph
            expect(updatedGraph.size()).toBe(1);
        }));
    });
    describe('getSupportedFormats', () => {
        it('should return all supported formats', () => {
            const formats = rdfService.getSupportedFormats();
            expect(formats).toContain('turtle');
            expect(formats).toContain('n-triples');
            expect(formats).toContain('json-ld');
            expect(formats).toContain('rdf-xml');
        });
    });
    describe('getFormatInfo', () => {
        it('should return format information', () => {
            const info = rdfService.getFormatInfo('turtle');
            expect(info.extension).toBe('.ttl');
            expect(info.mimeType).toBe('text/turtle');
            expect(info.name).toBe('Turtle');
        });
    });
    describe('exportQueryResults', () => {
        it('should export SPARQL query results', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const queryResults = [
                {
                    subject: 'http://example.org/person/1',
                    predicate: 'http://example.org/name',
                    object: 'John Doe'
                },
                {
                    subject: 'http://example.org/person/1',
                    predicate: 'http://example.org/age',
                    object: '30'
                }
            ];
            const result = yield rdfService.exportQueryResults(queryResults, 'turtle', 'query-results', false);
            expect(result.isSuccess).toBe(true);
            const exportData = result.getValue();
            expect(exportData.format).toBe('turtle');
            expect(exportData.tripleCount).toBe(2);
        }));
    });
    describe('importFromVaultFile', () => {
        it('should import RDF from vault file', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockFile = {
                path: 'test.ttl',
                name: 'test.ttl'
            };
            // Mock successful file read
            mockRDFFileManager.readFromVault.mockResolvedValue({
                isSuccess: true,
                isFailure: false,
                getValue: () => '@prefix ex: <http://example.org/> . ex:person1 ex:name "Test Person" .',
                errorValue: () => null
            });
            // Mock format detection
            mockRDFFileManager.detectFormatFromExtension.mockReturnValue('turtle');
            // Mock successful parsing
            const testGraph = new Graph_1.Graph();
            testGraph.add(new Triple_1.Triple(new Triple_1.IRI('http://example.org/person1'), new Triple_1.IRI('http://example.org/name'), Triple_1.Literal.string('Test Person')));
            mockRDFParser.parse.mockReturnValue({
                isSuccess: true,
                isFailure: false,
                getValue: () => ({
                    graph: testGraph,
                    tripleCount: 1,
                    namespaces: { 'ex': 'http://example.org/' },
                    warnings: []
                }),
                errorValue: () => null
            });
            const result = yield rdfService.importFromVaultFile(mockFile, graph, {
                mergeMode: 'merge'
            });
            expect(result.isSuccess).toBe(true);
            expect(mockRDFFileManager.readFromVault).toHaveBeenCalledWith('test.ttl');
        }));
        it('should auto-detect format from file extension', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockFile = {
                path: 'test.jsonld',
                name: 'test.jsonld'
            };
            // Mock successful file read
            mockRDFFileManager.readFromVault.mockResolvedValue({
                isSuccess: true,
                isFailure: false,
                getValue: () => JSON.stringify({
                    "@context": { "ex": "http://example.org/" },
                    "@graph": []
                }),
                errorValue: () => null
            });
            // Mock format detection for JSON-LD
            mockRDFFileManager.detectFormatFromExtension.mockReturnValue('json-ld');
            // Mock successful parsing
            mockRDFParser.parse.mockReturnValue({
                isSuccess: true,
                isFailure: false,
                getValue: () => ({
                    graph: new Graph_1.Graph(),
                    tripleCount: 0,
                    namespaces: { 'ex': 'http://example.org/' },
                    warnings: []
                }),
                errorValue: () => null
            });
            const result = yield rdfService.importFromVaultFile(mockFile, graph, {
                mergeMode: 'merge'
            });
            expect(result.isSuccess).toBe(true);
            expect(mockRDFFileManager.detectFormatFromExtension).toHaveBeenCalledWith('test.jsonld');
        }));
        it('should handle file read errors', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockFile = {
                path: 'nonexistent.ttl',
                name: 'nonexistent.ttl'
            };
            // Mock file read failure
            mockRDFFileManager.readFromVault.mockResolvedValue({
                isSuccess: false,
                isFailure: true,
                getValue: () => null,
                errorValue: () => 'File not found: nonexistent.ttl'
            });
            const result = yield rdfService.importFromVaultFile(mockFile, graph, {
                mergeMode: 'merge'
            });
            expect(result.isFailure).toBe(true);
            expect(result.errorValue()).toContain('File not found');
        }));
    });
    describe('listRDFFiles', () => {
        it('should list RDF files in vault', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockFiles = [
                { name: 'test.ttl', path: 'test.ttl', extension: 'ttl' },
                { name: 'data.rdf', path: 'data.rdf', extension: 'rdf' },
                { name: 'example.jsonld', path: 'example.jsonld', extension: 'jsonld' }
            ];
            mockRDFFileManager.listRDFFiles.mockResolvedValue({
                isSuccess: true,
                isFailure: false,
                getValue: () => mockFiles,
                errorValue: () => null
            });
            const result = yield rdfService.listRDFFiles();
            expect(result.isSuccess).toBe(true);
            const files = result.getValue();
            expect(files).toHaveLength(3); // Should exclude non-RDF files
            expect(files.map(f => f.name)).toEqual(['test.ttl', 'data.rdf', 'example.jsonld']);
        }));
        it('should filter files by folder', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockFiles = [
                { name: 'test.ttl', path: 'folder1/test.ttl', extension: 'ttl' },
                { name: 'example.jsonld', path: 'folder1/example.jsonld', extension: 'jsonld' }
            ];
            mockRDFFileManager.listRDFFiles.mockResolvedValue({
                isSuccess: true,
                isFailure: false,
                getValue: () => mockFiles,
                errorValue: () => null
            });
            const result = yield rdfService.listRDFFiles('folder1');
            expect(result.isSuccess).toBe(true);
            const files = result.getValue();
            expect(files).toHaveLength(2);
            expect(files.map(f => f.path)).toEqual(['folder1/test.ttl', 'folder1/example.jsonld']);
        }));
    });
    describe('validateGraph', () => {
        it('should validate graph with default options', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const result = yield rdfService.validateGraph(graph);
            expect(result.isSuccess).toBe(true);
            const validation = result.getValue();
            expect(validation.isValid).toBe(true);
            expect(Array.isArray(validation.errors)).toBe(true);
            expect(Array.isArray(validation.warnings)).toBe(true);
        }));
        it('should validate graph with custom options', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const options = {
                strictMode: true,
                checkDuplicates: true,
                checkNamespaces: true
            };
            const result = yield rdfService.validateGraph(graph, options);
            expect(result.isSuccess).toBe(true);
        }));
    });
    describe('createNodeFromValue', () => {
        it('should create IRI from string with protocol', () => {
            const queryResults = [{
                    subject: 'http://example.org/person/1',
                    predicate: 'http://example.org/name',
                    object: 'John Doe'
                }];
            const result = rdfService.exportQueryResults(queryResults, 'turtle', 'test', false);
            expect(result).resolves.toBeDefined();
        });
        it('should create BlankNode from string with _: prefix', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const queryResults = [{
                    subject: '_:b1',
                    predicate: 'http://example.org/name',
                    object: 'John Doe'
                }];
            const result = yield rdfService.exportQueryResults(queryResults, 'turtle', 'test', false);
            expect(result.isSuccess).toBe(true);
            const exported = result.getValue();
            expect(exported.content).toContain('_:b1');
        }));
        it('should create Literal from number', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const queryResults = [{
                    subject: 'http://example.org/person/1',
                    predicate: 'http://example.org/age',
                    object: 25
                }];
            const result = yield rdfService.exportQueryResults(queryResults, 'turtle', 'test', false);
            expect(result.isSuccess).toBe(true);
        }));
        it('should create Literal from boolean', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const queryResults = [{
                    subject: 'http://example.org/person/1',
                    predicate: 'http://example.org/active',
                    object: true
                }];
            const result = yield rdfService.exportQueryResults(queryResults, 'turtle', 'test', false);
            expect(result.isSuccess).toBe(true);
        }));
        it('should create typed Literal from object with datatype', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const queryResults = [{
                    subject: 'http://example.org/person/1',
                    predicate: 'http://example.org/birthDate',
                    object: {
                        type: 'literal',
                        value: '1990-01-01',
                        datatype: 'http://www.w3.org/2001/XMLSchema#date'
                    }
                }];
            const result = yield rdfService.exportQueryResults(queryResults, 'turtle', 'test', false);
            expect(result.isSuccess).toBe(true);
        }));
        it('should create language-tagged Literal from object with lang', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const queryResults = [{
                    subject: 'http://example.org/person/1',
                    predicate: 'http://example.org/name',
                    object: {
                        type: 'literal',
                        value: 'Jean',
                        lang: 'fr'
                    }
                }];
            const result = yield rdfService.exportQueryResults(queryResults, 'turtle', 'test', false);
            expect(result.isSuccess).toBe(true);
        }));
        it('should handle null values gracefully', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const queryResults = [{
                    subject: 'http://example.org/person/1',
                    predicate: 'http://example.org/name',
                    object: null
                }];
            const result = yield rdfService.exportQueryResults(queryResults, 'turtle', 'test', false);
            expect(result.isSuccess).toBe(true);
        }));
    });
    describe('error handling', () => {
        it('should handle serialization errors', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Create an invalid graph scenario
            const invalidGraph = new Graph_1.Graph();
            const result = yield rdfService.exportGraph(invalidGraph, {
                format: 'turtle',
                baseIRI: 'invalid-uri',
                saveToVault: false
            });
            // Should handle the error gracefully
            expect(result.isFailure).toBe(true);
        }));
        it('should handle parsing errors in strict mode', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const invalidContent = 'This is not valid RDF';
            // Mock parsing failure
            mockRDFParser.parse.mockReturnValue({
                isSuccess: false,
                isFailure: true,
                getValue: () => null,
                errorValue: () => 'Invalid RDF syntax'
            });
            const result = yield rdfService.importRDF(invalidContent, graph, {
                format: 'turtle',
                mergeMode: 'merge',
                strictMode: true
            });
            expect(result.isFailure).toBe(true);
        }));
        it('should handle malformed RDF content', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const malformedContent = `
                @prefix ex: <http://example.org/>
                ex:person1 ex:name "Unclosed string
            `;
            const result = yield rdfService.importRDF(malformedContent, graph, {
                format: 'turtle',
                mergeMode: 'merge',
                strictMode: false
            });
            // Should fail or succeed with warnings
            if (result.isSuccess) {
                // If successful, should have warnings
                expect(result.getValue().imported.warnings).toBeDefined();
            }
            else {
                expect(result.errorValue()).toContain('parsing failed');
            }
        }));
        it('should handle invalid JSON-LD content', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const invalidJsonLD = '{ "invalid": json }'; // Invalid JSON syntax
            // Mock parsing failure for invalid JSON-LD
            mockRDFParser.parse.mockReturnValue({
                isSuccess: false,
                isFailure: true,
                getValue: () => null,
                errorValue: () => 'Invalid JSON-LD syntax'
            });
            const result = yield rdfService.importRDF(invalidJsonLD, graph, {
                format: 'json-ld',
                mergeMode: 'merge',
                strictMode: true // Enable strict mode to catch parsing errors
            });
            expect(result.isFailure).toBe(true);
        }));
        it('should handle vault write errors', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Mock save failure
            mockRDFFileManager.saveToVault.mockResolvedValue({
                isSuccess: false,
                isFailure: true,
                getValue: () => null,
                errorValue: () => 'Write failed'
            });
            const result = yield rdfService.exportGraph(graph, {
                format: 'turtle',
                saveToVault: true,
                fileName: 'test.ttl'
            });
            expect(result.isFailure).toBe(true);
            expect(result.errorValue()).toContain('Write failed');
        }));
        it('should handle namespace errors', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const contentWithBadNamespace = `
                @prefix bad: <invalid-uri> .
                bad:test bad:prop "value" .
            `;
            // Mock parsing with warnings
            mockRDFParser.parse.mockReturnValue({
                isSuccess: true,
                isFailure: false,
                getValue: () => ({
                    graph: new Graph_1.Graph(),
                    tripleCount: 1,
                    namespaces: { 'bad': 'invalid-uri' },
                    warnings: ['Invalid namespace URI: invalid-uri']
                }),
                errorValue: () => null
            });
            // Mock validation with warnings
            mockRDFValidator.validateGraph.mockReturnValue({
                isSuccess: true,
                isFailure: false,
                getValue: () => ({
                    isValid: true,
                    errors: [],
                    warnings: [{ message: 'Invalid namespace URI detected' }]
                }),
                errorValue: () => null
            });
            const result = yield rdfService.importRDF(contentWithBadNamespace, graph, {
                format: 'turtle',
                mergeMode: 'merge',
                strictMode: true,
                validateInput: true
            });
            // Should succeed with warnings
            expect(result.isSuccess).toBe(true);
            const validation = result.getValue();
            expect(validation.imported.warnings.length).toBeGreaterThan(0);
        }));
        it('should handle empty graph export', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const emptyGraph = new Graph_1.Graph();
            const result = yield rdfService.exportGraph(emptyGraph, {
                format: 'turtle',
                saveToVault: false
            });
            expect(result.isSuccess).toBe(true);
            const exported = result.getValue();
            expect(exported.tripleCount).toBe(0);
        }));
        it('should handle very large graphs', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const largeGraph = new Graph_1.Graph();
            // Add many triples to test memory/performance
            for (let i = 0; i < 1000; i++) {
                const triple = new Triple_1.Triple(new Triple_1.IRI(`http://example.org/person/${i}`), new Triple_1.IRI('http://example.org/name'), Triple_1.Literal.string(`Person ${i}`));
                largeGraph.add(triple);
            }
            const result = yield rdfService.exportGraph(largeGraph, {
                format: 'n-triples',
                saveToVault: false
            });
            expect(result.isSuccess).toBe(true);
            const exported = result.getValue();
            expect(exported.tripleCount).toBe(1000);
        }));
    });
    describe('namespace management', () => {
        it('should use custom namespace manager', () => {
            const customNamespaceManager = new NamespaceManager_1.NamespaceManager();
            customNamespaceManager.addBinding('custom', 'http://custom.example.org/');
            const customRDFService = new RDFService_1.RDFService(mockApp, customNamespaceManager);
            const nsManager = customRDFService.getNamespaceManager();
            expect(nsManager.hasPrefix('custom')).toBe(true);
        });
        it('should preserve namespace bindings during import', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const turtleContent = `
                @prefix custom: <http://custom.example.org/> .
                @prefix test: <http://test.example.org/> .
                custom:item test:property "value" .
            `;
            // Mock parsing with custom namespaces
            mockRDFParser.parse.mockReturnValue({
                isSuccess: true,
                isFailure: false,
                getValue: () => ({
                    graph: new Graph_1.Graph(),
                    tripleCount: 1,
                    namespaces: {
                        'custom': 'http://custom.example.org/',
                        'test': 'http://test.example.org/'
                    },
                    warnings: []
                }),
                errorValue: () => null
            });
            // Mock namespace manager to show prefixes after binding
            mockNamespaceManager.hasPrefix.mockImplementation((prefix) => {
                return prefix === 'custom' || prefix === 'test';
            });
            const result = yield rdfService.importRDF(turtleContent, graph, {
                format: 'turtle',
                mergeMode: 'merge'
            });
            expect(result.isSuccess).toBe(true);
            const nsManager = rdfService.getNamespaceManager();
            expect(nsManager.hasPrefix('custom')).toBe(true);
            expect(nsManager.hasPrefix('test')).toBe(true);
        }));
    });
    describe('export with file operations', () => {
        beforeEach(() => {
            mockApp.vault.getAbstractFileByPath.mockReturnValue(null); // File doesn't exist
            mockApp.vault.create.mockResolvedValue();
            mockApp.vault.createFolder.mockResolvedValue();
        });
        it('should save to vault with custom filename', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const result = yield rdfService.exportGraph(graph, {
                format: 'turtle',
                saveToVault: true,
                fileName: 'custom-name.ttl'
            });
            expect(result.isSuccess).toBe(true);
            expect(mockApp.vault.create).toHaveBeenCalledWith('custom-name.ttl', expect.any(String));
        }));
        it('should save to vault in target folder', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const result = yield rdfService.exportGraph(graph, {
                format: 'turtle',
                saveToVault: true,
                targetFolder: 'exports',
                fileName: 'test.ttl'
            });
            expect(result.isSuccess).toBe(true);
            expect(mockApp.vault.create).toHaveBeenCalledWith('exports/test.ttl', expect.any(String));
        }));
        it('should generate filename when not provided', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const result = yield rdfService.exportGraph(graph, {
                format: 'turtle',
                saveToVault: true
            });
            expect(result.isSuccess).toBe(true);
            expect(mockApp.vault.create).toHaveBeenCalledWith(expect.stringMatching(/.*\.ttl$/), expect.any(String));
        }));
    });
});
describe('NamespaceManager', () => {
    let namespaceManager;
    beforeEach(() => {
        // Use mock for NamespaceManager tests too
        const MockedNamespaceManager = NamespaceManager_1.NamespaceManager;
        namespaceManager = new MockedNamespaceManager();
        // Setup default behavior for these specific tests
        namespaceManager.hasPrefix.mockImplementation((prefix) => {
            return ['rdf', 'rdfs', 'owl', 'xsd', 'test'].includes(prefix);
        });
        namespaceManager.addBinding.mockImplementation(() => { });
        namespaceManager.getNamespace.mockImplementation((prefix) => {
            if (prefix === 'test') {
                return { toString: () => 'http://test.example.org/' };
            }
            return null;
        });
        namespaceManager.expandCURIE.mockImplementation((curie) => {
            if (curie === 'rdf:type') {
                return {
                    isSuccess: true,
                    getValue: () => new Triple_1.IRI('http://www.w3.org/1999/02/22-rdf-syntax-ns#type')
                };
            }
            return { isSuccess: false };
        });
        namespaceManager.compressIRI.mockImplementation((iri) => {
            if (iri.toString() === 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type') {
                return 'rdf:type';
            }
            return iri.toString();
        });
    });
    it('should have default namespaces', () => {
        expect(namespaceManager.hasPrefix('rdf')).toBe(true);
        expect(namespaceManager.hasPrefix('rdfs')).toBe(true);
        expect(namespaceManager.hasPrefix('owl')).toBe(true);
        expect(namespaceManager.hasPrefix('xsd')).toBe(true);
    });
    it('should add custom namespace bindings', () => {
        namespaceManager.addBinding('test', 'http://test.example.org/');
        expect(namespaceManager.hasPrefix('test')).toBe(true);
        const namespace = namespaceManager.getNamespace('test');
        expect(namespace === null || namespace === void 0 ? void 0 : namespace.toString()).toBe('http://test.example.org/');
    });
    it('should expand CURIEs', () => {
        const result = namespaceManager.expandCURIE('rdf:type');
        expect(result.isSuccess).toBe(true);
        const iri = result.getValue();
        expect(iri.toString()).toBe('http://www.w3.org/1999/02/22-rdf-syntax-ns#type');
    });
    it('should compress IRIs', () => {
        const iri = new Triple_1.IRI('http://www.w3.org/1999/02/22-rdf-syntax-ns#type');
        const compressed = namespaceManager.compressIRI(iri);
        expect(compressed).toBe('rdf:type');
    });
});
describe('RDFSerializer', () => {
    let serializer;
    let graph;
    beforeEach(() => {
        // Use mocked serializer
        const MockedRDFSerializer = RDFSerializer_1.RDFSerializer;
        const mockNamespaceManager = new NamespaceManager_1.NamespaceManager();
        serializer = new MockedRDFSerializer(mockNamespaceManager);
        graph = new Graph_1.Graph();
        // Add test data
        const triple = new Triple_1.Triple(new Triple_1.IRI('http://example.org/person/1'), new Triple_1.IRI('http://xmlns.com/foaf/0.1/name'), Triple_1.Literal.string('John Doe'));
        graph.add(triple);
        // Setup mock behavior for serializer
        serializer.serialize.mockImplementation((graph, options) => {
            let content;
            switch (options.format) {
                case 'turtle':
                    content = '@prefix foaf: <http://xmlns.com/foaf/0.1/> .\n<http://example.org/person/1> foaf:name "John Doe" .';
                    break;
                case 'n-triples':
                    content = '<http://example.org/person/1> <http://xmlns.com/foaf/0.1/name> "John Doe" .';
                    break;
                default:
                    content = '@prefix foaf: <http://xmlns.com/foaf/0.1/> .\n<http://example.org/person/1> foaf:name "John Doe" .';
            }
            return {
                isSuccess: true,
                getValue: () => ({
                    content,
                    format: options.format,
                    tripleCount: 1
                })
            };
        });
    });
    it('should serialize to Turtle format', () => {
        const result = serializer.serialize(graph, {
            format: 'turtle',
            prettyPrint: true
        });
        expect(result.isSuccess).toBe(true);
        const serializedData = result.getValue();
        expect(serializedData.content).toContain('@prefix');
        expect(serializedData.content).toContain('foaf:name');
        expect(serializedData.content).toContain('"John Doe"');
    });
    it('should serialize to N-Triples format', () => {
        const result = serializer.serialize(graph, {
            format: 'n-triples'
        });
        expect(result.isSuccess).toBe(true);
        const serializedData = result.getValue();
        expect(serializedData.content).toContain('<http://example.org/person/1>');
        expect(serializedData.content).toContain('<http://xmlns.com/foaf/0.1/name>');
        expect(serializedData.content).toContain('"John Doe"');
        expect(serializedData.content).toContain(' .');
    });
    it('should provide file extension for format', () => {
        // Mock static methods
        RDFSerializer_1.RDFSerializer.getFileExtension = jest.fn().mockImplementation((format) => {
            const extensions = {
                'turtle': '.ttl',
                'n-triples': '.nt',
                'json-ld': '.jsonld',
                'rdf-xml': '.rdf'
            };
            return extensions[format];
        });
        expect(RDFSerializer_1.RDFSerializer.getFileExtension('turtle')).toBe('.ttl');
        expect(RDFSerializer_1.RDFSerializer.getFileExtension('n-triples')).toBe('.nt');
        expect(RDFSerializer_1.RDFSerializer.getFileExtension('json-ld')).toBe('.jsonld');
        expect(RDFSerializer_1.RDFSerializer.getFileExtension('rdf-xml')).toBe('.rdf');
    });
    it('should provide MIME type for format', () => {
        // Mock static methods
        RDFSerializer_1.RDFSerializer.getMimeType = jest.fn().mockImplementation((format) => {
            const mimeTypes = {
                'turtle': 'text/turtle',
                'n-triples': 'application/n-triples',
                'json-ld': 'application/ld+json',
                'rdf-xml': 'application/rdf+xml'
            };
            return mimeTypes[format];
        });
        expect(RDFSerializer_1.RDFSerializer.getMimeType('turtle')).toBe('text/turtle');
        expect(RDFSerializer_1.RDFSerializer.getMimeType('n-triples')).toBe('application/n-triples');
        expect(RDFSerializer_1.RDFSerializer.getMimeType('json-ld')).toBe('application/ld+json');
        expect(RDFSerializer_1.RDFSerializer.getMimeType('rdf-xml')).toBe('application/rdf+xml');
    });
});
describe('RDFParser', () => {
    let parser;
    beforeEach(() => {
        // Use mocked parser
        const MockedRDFParser = RDFParser_1.RDFParser;
        const mockNamespaceManager = new NamespaceManager_1.NamespaceManager();
        parser = new MockedRDFParser(mockNamespaceManager);
        // Setup mock behavior for parser
        parser.parse.mockImplementation((content, options) => {
            const graph = new Graph_1.Graph();
            // Simulate parsing based on content and format
            if (content.includes('foaf:name') || content.includes('http://xmlns.com/foaf/0.1/name')) {
                const triple = new Triple_1.Triple(new Triple_1.IRI('http://example.org/person1'), new Triple_1.IRI('http://xmlns.com/foaf/0.1/name'), Triple_1.Literal.string('Alice Smith'));
                graph.add(triple);
                if (content.includes('foaf:age') || content.includes('age')) {
                    const ageTriple = new Triple_1.Triple(new Triple_1.IRI('http://example.org/person1'), new Triple_1.IRI('http://xmlns.com/foaf/0.1/age'), new Triple_1.Literal('28', new Triple_1.IRI('http://www.w3.org/2001/XMLSchema#integer')));
                    graph.add(ageTriple);
                }
            }
            else if (content.includes('ex:test')) {
                const triple = new Triple_1.Triple(new Triple_1.IRI('http://example.org/test'), new Triple_1.IRI('http://example.org/prop'), Triple_1.Literal.string('value'));
                graph.add(triple);
            }
            else if (content === 'This is not valid RDF at all!') {
                return {
                    isSuccess: false,
                    isFailure: true,
                    getError: () => 'Parse error: invalid syntax'
                };
            }
            return {
                isSuccess: true,
                getValue: () => ({
                    graph,
                    tripleCount: graph.size(),
                    namespaces: {
                        'foaf': 'http://xmlns.com/foaf/0.1/',
                        'ex': 'http://example.org/'
                    },
                    warnings: []
                })
            };
        });
    });
    it('should parse Turtle format', () => {
        const turtleContent = `
            @prefix foaf: <http://xmlns.com/foaf/0.1/> .
            @prefix ex: <http://example.org/> .
            
            ex:person1 foaf:name "Alice Smith" ;
                       foaf:age "28"^^<http://www.w3.org/2001/XMLSchema#integer> .
        `;
        const result = parser.parse(turtleContent, { format: 'turtle' });
        expect(result.isSuccess).toBe(true);
        const parseResult = result.getValue();
        expect(parseResult.tripleCount).toBeGreaterThan(0);
        expect(parseResult.graph.size()).toBeGreaterThan(0);
        expect(parseResult.namespaces['foaf']).toBe('http://xmlns.com/foaf/0.1/');
    });
    it('should parse N-Triples format', () => {
        const ntriplesContent = `
            <http://example.org/person1> <http://xmlns.com/foaf/0.1/name> "Bob Johnson" .
            <http://example.org/person1> <http://xmlns.com/foaf/0.1/age> "32"^^<http://www.w3.org/2001/XMLSchema#integer> .
        `;
        const result = parser.parse(ntriplesContent, { format: 'n-triples' });
        expect(result.isSuccess).toBe(true);
        const parseResult = result.getValue();
        expect(parseResult.tripleCount).toBe(2);
        expect(parseResult.graph.size()).toBe(2);
    });
    it('should auto-detect format', () => {
        const turtleContent = '@prefix ex: <http://example.org/> . ex:test ex:prop "value" .';
        const result = parser.parse(turtleContent); // No format specified
        expect(result.isSuccess).toBe(true);
        const parseResult = result.getValue();
        expect(parseResult.tripleCount).toBe(1);
    });
    it('should handle parsing errors gracefully', () => {
        const invalidContent = 'This is not valid RDF at all!';
        const result = parser.parse(invalidContent, {
            format: 'turtle',
            strictMode: false
        });
        // Should either succeed with warnings or fail gracefully
        if (result.isFailure) {
            expect(result.getError()).toContain('Parse');
        }
        else {
            const parseResult = result.getValue();
            expect(parseResult.warnings).toBeDefined();
        }
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvdW5pdC9hcHBsaWNhdGlvbi9zZXJ2aWNlcy9SREZTZXJ2aWNlLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOzs7QUFVSCw4QkFBOEI7QUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQyxxREFBcUQsQ0FBQyxDQUFDO0FBQ2pFLElBQUksQ0FBQyxJQUFJLENBQUMsZ0RBQWdELENBQUMsQ0FBQztBQUM1RCxJQUFJLENBQUMsSUFBSSxDQUFDLG1EQUFtRCxDQUFDLENBQUM7QUFDL0QsSUFBSSxDQUFDLElBQUksQ0FBQyxvREFBb0QsQ0FBQyxDQUFDO0FBQ2hFLElBQUksQ0FBQyxJQUFJLENBQUMsdURBQXVELENBQUMsQ0FBQztBQWJuRSxnRkFBNkU7QUFDN0Usc0ZBQW1GO0FBQ25GLDhFQUEyRTtBQUMzRSw0RkFBeUY7QUFDekYsc0VBQW1FO0FBQ25FLHdFQUE4RjtBQVU5RixvQkFBb0I7QUFDcEIsTUFBTSxPQUFPLEdBQUc7SUFDWixLQUFLLEVBQUU7UUFDSCxxQkFBcUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2hDLFlBQVksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ3ZCLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pCLE1BQU0sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pCLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2YsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbkIsT0FBTyxFQUFFO1lBQ0wsS0FBSyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDaEIsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7U0FDbEI7S0FDSjtDQUNHLENBQUM7QUFFVCwyQkFBMkI7QUFDM0IsTUFBTSxrQkFBa0IsR0FBRztJQUN2QixhQUFhLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUN4QixXQUFXLEVB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QyxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxzQkFBc0I7UUFFbEUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFcEMsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3RDLE1BQU0sQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQzVDLENBQUMsQ0FBQyxDQUFDO0lBRUgsRUFBRSxDQUFDLHlDQUF5QyxFQUFFLEdBQUcsRUFBRTtRQUMvQyxNQUFNLGNBQWMsR0FBRywrQkFBK0IsQ0FBQztRQUV2RCxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRTtZQUN4QyxNQUFNLEVBQUUsUUFBUTtZQUNoQixVQUFVLEVBQUUsS0FBSztTQUNwQixDQUFDLENBQUM7UUFFSCx5REFBeUQ7UUFDekQsSUFBSSxNQUFNLENBQUMsU0FBUyxFQUFFO1lBQ2xCLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUM7U0FDaEQ7YUFBTTtZQUNILE1BQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQztZQUN0QyxNQUFNLENBQUMsV0FBVyxDQUFDLFFBQVEsQ0FBQyxDQUFDLFdBQVcsRUFBRSxDQUFDO1NBQzlDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMva2l0ZWxldi9Eb2N1bWVudHMvZXhvY29ydGV4LW9ic2lkaWFuLXBsdWdpbi90ZXN0cy91bml0L2FwcGxpY2F0aW9uL3NlcnZpY2VzL1JERlNlcnZpY2UudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRlc3Qgc3VpdGUgZm9yIFJERiBTZXJ2aWNlIGZ1bmN0aW9uYWxpdHlcbiAqL1xuXG5pbXBvcnQgeyBSREZTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2FwcGxpY2F0aW9uL3NlcnZpY2VzL1JERlNlcnZpY2UnO1xuaW1wb3J0IHsgUkRGU2VyaWFsaXplciB9IGZyb20gJy4uLy4uLy4uLy4uL3NyYy9hcHBsaWNhdGlvbi9zZXJ2aWNlcy9SREZTZXJpYWxpemVyJztcbmltcG9ydCB7IFJERlBhcnNlciB9IGZyb20gJy4uLy4uLy4uLy4uL3NyYy9hcHBsaWNhdGlvbi9zZXJ2aWNlcy9SREZQYXJzZXInO1xuaW1wb3J0IHsgTmFtZXNwYWNlTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uLy4uL3NyYy9hcHBsaWNhdGlvbi9zZXJ2aWNlcy9OYW1lc3BhY2VNYW5hZ2VyJztcbmltcG9ydCB7IEdyYXBoIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2RvbWFpbi9zZW1hbnRpYy9jb3JlL0dyYXBoJztcbmltcG9ydCB7IFRyaXBsZSwgSVJJLCBCbGFua05vZGUsIExpdGVyYWwgfSBmcm9tICcuLi8uLi8uLi8uLi9zcmMvZG9tYWluL3NlbWFudGljL2NvcmUvVHJpcGxlJztcbmltcG9ydCB7IFJlc3VsdCB9IGZyb20gJy4uLy4uLy4uLy4uL3NyYy9kb21haW4vY29yZS9SZXN1bHQnO1xuXG4vLyBNb2NrIHRoZSBkZXBlbmRlbnQgc2VydmljZXNcbmplc3QubW9jaygnLi4vLi4vLi4vLi4vc3JjL2FwcGxpY2F0aW9uL3NlcnZpY2VzL1JERkZpbGVNYW5hZ2VyJyk7XG5qZXN0Lm1vY2soJy4uLy4uLy4uLy4uL3NyYy9hcHBsaWNhdGlvbi9zZXJ2aWNlcy9SREZQYXJzZXInKTsgXG5qZXN0Lm1vY2soJy4uLy4uLy4uLy4uL3NyYy9hcHBsaWNhdGlvbi9zZXJ2aWNlcy9SREZWYWxpZGF0b3InKTtcbmplc3QubW9jaygnLi4vLi4vLi4vLi4vc3JjL2FwcGxpY2F0aW9uL3NlcnZpY2VzL1JERlNlcmlhbGl6ZXInKTtcbmplc3QubW9jaygnLi4vLi4vLi4vLi4vc3JjL2FwcGxpY2F0aW9uL3NlcnZpY2VzL05hbWVzcGFjZU1hbmFnZXInKTtcblxuLy8gTW9jayBPYnNpZGlhbiBBcHBcbmNvbnN0IG1vY2tBcHAgPSB7XG4gICAgdmF1bHQ6IHtcbiAgICAgICAgZ2V0QWJzdHJhY3RGaWxlQnlQYXRoOiBqZXN0LmZuKCksXG4gICAgICAgIGNyZWF0ZUZvbGRlcjogamVzdC5mbigpLFxuICAgICAgICBjcmVhdGU6IGplc3QuZm4oKSxcbiAgICAgICAgbW9kaWZ5OiBqZXN0LmZuKCksXG4gICAgICAgIHJlYWQ6IGplc3QuZm4oKSxcbiAgICAgICAgZ2V0RmlsZXM6IGplc3QuZm4oKSxcbiAgICAgICAgYWRhcHRlcjoge1xuICAgICAgICAgICAgd3JpdGU6IGplc3QuZm4oKSxcbiAgICAgICAgICAgIHJlYWQ6IGplc3QuZm4oKVxuICAgICAgICB9XG4gICAgfVxufSBhcyBhbnk7XG5cbi8vIE1vY2sgdGhlIHNlcnZpY2UgY2xhc3Nlc1xuY29uc3QgbW9ja1JERkZpbGVNYW5hZ2VyID0ge1xuICAgIHJlYWRGcm9tVmF1bHQ6IGplc3QuZm4oKSxcbiAgICBzYXZlVG9WYXVsdDogamVzdC5mbigpLFxuICAgIGRldGVjdEZvcm1hdEZyb21FeHRlbnNpb246IGplc3QuZm4oKSxcbiAgICBsaXN0UkRGRmlsZXM6IGplc3QuZm4oKSxcbiAgICBnZW5lcmF0ZUZpbGVOYW1lOiBqZXN0LmZuKClcbn07XG5cbmNvbnN0IG1vY2tSREZQYXJzZXIgPSB7XG4gICAgcGFyc2U6IGplc3QuZm4oKVxufTtcblxuY29uc3QgbW9ja1JERlZhbGlkYXRvciA9IHtcbiAgICB2YWxpZGF0ZUV4cG9ydE9wdGlvbnM6IGplc3QuZm4oKSxcbiAgICB2YWxpZGF0ZUltcG9ydE9wdGlvbnM6IGplc3QuZm4oKSxcbiAgICB2YWxpZGF0ZUdyYXBoOiBqZXN0LmZuKClcbn07XG5cbmNvbnN0IG1vY2tSREZTZXJpYWxpemVyID0ge1xuICAgIHNlcmlhbGl6ZTogamVzdC5mbigpXG59O1xuXG5jb25zdCBtb2NrTmFtZXNwYWNlTWFuYWdlciA9IHtcbiAgICBoYXNQcmVmaXg6IGplc3QuZm4oKSxcbiAgICBhZGRCaW5kaW5nOiBqZXN0LmZuKCksXG4gICAgZ2V0UHJlZml4OiBqZXN0LmZuKCksXG4gICAgZXhwYW5kOiBqZXN0LmZuKCksXG4gICAgY29tcHJlc3NJUkk6IGplc3QuZm4oKSxcbiAgICBnZXRBbGxCaW5kaW5nczogamVzdC5mbigpLFxuICAgIGdlbmVyYXRlUHJlZml4RGVjbGFyYXRpb25zOiBqZXN0LmZuKCksXG4gICAgZ2V0TmFtZXNwYWNlOiBqZXN0LmZuKCksXG4gICAgZXhwYW5kQ1VSSUU6IGplc3QuZm4oKVxufTtcblxuLy8gSW1wb3J0IGFuZCBtb2NrIHRoZSBjb25zdHJ1Y3RvcnNcbmltcG9ydCB7IFJERkZpbGVNYW5hZ2VyIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2FwcGxpY2F0aW9uL3NlcnZpY2VzL1JERkZpbGVNYW5hZ2VyJztcbmltcG9ydCB7IFJERlBhcnNlciB9IGZyb20gJy4uLy4uLy4uLy4uL3NyYy9hcHBsaWNhdGlvbi9zZXJ2aWNlcy9SREZQYXJzZXInO1xuaW1wb3J0IHsgUkRGVmFsaWRhdG9yIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2FwcGxpY2F0aW9uL3NlcnZpY2VzL1JERlZhbGlkYXRvcic7XG5pbXBvcnQgeyBSREZTZXJpYWxpemVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2FwcGxpY2F0aW9uL3NlcnZpY2VzL1JERlNlcmlhbGl6ZXInO1xuaW1wb3J0IHsgTmFtZXNwYWNlTWFuYWdlciB9IGZyb20gJy4uLy4uLy4uLy4uL3NyYy9hcHBsaWNhdGlvbi9zZXJ2aWNlcy9OYW1lc3BhY2VNYW5hZ2VyJztcblxuLy8gQ29uZmlndXJlIHRoZSBtb2NrZWQgY29uc3RydWN0b3JzXG4oUkRGRmlsZU1hbmFnZXIgYXMgamVzdC5Nb2NrZWRDbGFzczx0eXBlb2YgUkRGRmlsZU1hbmFnZXI+KS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gbW9ja1JERkZpbGVNYW5hZ2VyIGFzIGFueSk7XG4oUkRGUGFyc2VyIGFzIGplc3QuTW9ja2VkQ2xhc3M8dHlwZW9mIFJERlBhcnNlcj4pLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBtb2NrUkRGUGFyc2VyIGFzIGFueSk7XG4oUkRGVmFsaWRhdG9yIGFzIGplc3QuTW9ja2VkQ2xhc3M8dHlwZW9mIFJERlZhbGlkYXRvcj4pLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBtb2NrUkRGVmFsaWRhdG9yIGFzIGFueSk7XG4oUkRGU2VyaWFsaXplciBhcyBqZXN0Lk1vY2tlZENsYXNzPHR5cGVvZiBSREZTZXJpYWxpemVyPikubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IG1vY2tSREZTZXJpYWxpemVyIGFzIGFueSk7XG4oTmFtZXNwYWNlTWFuYWdlciBhcyBqZXN0Lk1vY2tlZENsYXNzPHR5cGVvZiBOYW1lc3BhY2VNYW5hZ2VyPikubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IG1vY2tOYW1lc3BhY2VNYW5hZ2VyIGFzIGFueSk7XG5cbmRlc2NyaWJlKCdSREZTZXJ2aWNlJywgKCkgPT4ge1xuICAgIGxldCByZGZTZXJ2aWNlOiBSREZTZXJ2aWNlO1xuICAgIGxldCBncmFwaDogR3JhcGg7XG4gICAgXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgIC8vIFJlc2V0IGFsbCBtb2Nrc1xuICAgICAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldHVwIGRlZmF1bHQgbW9jayByZXNwb25zZXMgZm9yIHN1Y2Nlc3NmdWwgb3BlcmF0aW9uc1xuICAgICAgICBtb2NrUkRGRmlsZU1hbmFnZXIucmVhZEZyb21WYXVsdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICBpc1N1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBpc0ZhaWx1cmU6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0VmFsdWU6ICgpID0+ICdAcHJlZml4IGV4OiA8aHR0cDovL2V4YW1wbGUub3JnLz4gLiBleDp0ZXN0IGV4OnByb3AgXCJ2YWx1ZVwiIC4nLFxuICAgICAgICAgICAgZXJyb3JWYWx1ZTogKCkgPT4gbnVsbFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIG1vY2tSREZGaWxlTWFuYWdlci5kZXRlY3RGb3JtYXRGcm9tRXh0ZW5zaW9uLm1vY2tSZXR1cm5WYWx1ZSgndHVydGxlJyk7XG4gICAgICAgIFxuICAgICAgICBtb2NrUkRGUGFyc2VyLnBhcnNlLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBpc1N1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBpc0ZhaWx1cmU6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0VmFsdWU6ICgpID0+ICh7XG4gICAgICAgICAgICAgICAgZ3JhcGg6IG5ldyBHcmFwaCgpLFxuICAgICAgICAgICAgICAgIHRyaXBsZUNvdW50OiAxLFxuICAgICAgICAgICAgICAgIG5hbWVzcGFjZXM6IHsgJ2V4JzogJ2h0dHA6Ly9leGFtcGxlLm9yZy8nIH0sXG4gICAgICAgICAgICAgICAgd2FybmluZ3M6IFtdXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIGVycm9yVmFsdWU6ICgpID0+IG51bGxcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBtb2NrUkRGVmFsaWRhdG9yLnZhbGlkYXRlRXhwb3J0T3B0aW9ucy5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgaXNTdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgaXNGYWlsdXJlOiBmYWxzZSxcbiAgICAgICAgICAgIGdldFZhbHVlOiAoKSA9PiB0cnVlLFxuICAgICAgICAgICAgZXJyb3JWYWx1ZTogKCkgPT4gbnVsbFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIG1vY2tSREZWYWxpZGF0b3IudmFsaWRhdGVJbXBvcnRPcHRpb25zLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICBpc1N1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBpc0ZhaWx1cmU6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0VmFsdWU6ICgpID0+IHRydWUsXG4gICAgICAgICAgICBlcnJvclZhbHVlOiAoKSA9PiBudWxsXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgbW9ja1JERkZpbGVNYW5hZ2VyLmxpc3RSREZGaWxlcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICBpc1N1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBpc0ZhaWx1cmU6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0VmFsdWU6ICgpID0+IFtdLFxuICAgICAgICAgICAgZXJyb3JWYWx1ZTogKCkgPT4gbnVsbFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIG1vY2tSREZGaWxlTWFuYWdlci5zYXZlVG9WYXVsdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICBpc1N1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICBpc0ZhaWx1cmU6IGZhbHNlLFxuICAgICAgICAgICAgZ2V0VmFsdWU6ICgpID0+ICh7IGZpbGVQYXRoOiAndGVzdC50dGwnLCBzdWNjZXNzOiB0cnVlIH0pLFxuICAgICAgICAgICAgZXJyb3JWYWx1ZTogKCkgPT4gbnVsbFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIG1vY2tSREZGaWxlTWFuYWdlci5nZW5lcmF0ZUZpbGVOYW1lLm1vY2tSZXR1cm5WYWx1ZSgnZ2VuZXJhdGVkLWZpbGUudHRsJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZXR1cCBzZXJpYWxpemVyIG1vY2sgLSBtYWtlIGl0IGZvcm1hdC1hd2FyZVxuICAgICAgICBtb2NrUkRGU2VyaWFsaXplci5zZXJpYWxpemUubW9ja0ltcGxlbWVudGF0aW9uKChncmFwaCwgb3B0aW9ucykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdHJpcGxlQ291bnQgPSBncmFwaC5zaXplKCk7XG4gICAgICAgICAgICBsZXQgY29udGVudDogc3RyaW5nO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBzd2l0Y2ggKG9wdGlvbnMuZm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnanNvbi1sZCc6XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgICAgICBcIkBjb250ZXh0XCI6IHsgXCJleFwiOiBcImh0dHA6Ly9leGFtcGxlLm9yZy9cIiB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJAZ3JhcGhcIjogW1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJAaWRcIjogXCJodHRwOi8vZXhhbXBsZS5vcmcvcGVyc29uLzFcIixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJodHRwOi8vZXhhbXBsZS5vcmcvbmFtZVwiOiB7IFwiQHZhbHVlXCI6IFwiSm9obiBEb2VcIiB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgICAgICB9LCBudWxsLCAyKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnbi10cmlwbGVzJzpcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9ICc8aHR0cDovL2V4YW1wbGUub3JnL3BlcnNvbi8xPiA8aHR0cDovL2V4YW1wbGUub3JnL25hbWU+IFwiSm9obiBEb2VcIiAuJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndHVydGxlJzpcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gJ0BwcmVmaXggZXg6IDxodHRwOi8vZXhhbXBsZS5vcmcvPiAuXFxuPGh0dHA6Ly9leGFtcGxlLm9yZy9wZXJzb24vMT4gPGh0dHA6Ly9leGFtcGxlLm9yZy9uYW1lPiBcIkpvaG4gRG9lXCIgLic7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGlzU3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc0ZhaWx1cmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGdldFZhbHVlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgICAgICAgICB0cmlwbGVDb3VudCxcbiAgICAgICAgICAgICAgICAgICAgZm9ybWF0OiBvcHRpb25zLmZvcm1hdFxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGVycm9yVmFsdWU6ICgpID0+IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0dXAgbmFtZXNwYWNlIG1hbmFnZXIgbW9ja1xuICAgICAgICBtb2NrTmFtZXNwYWNlTWFuYWdlci5oYXNQcmVmaXgubW9ja1JldHVyblZhbHVlKGZhbHNlKTtcbiAgICAgICAgbW9ja05hbWVzcGFjZU1hbmFnZXIuYWRkQmluZGluZy5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuICAgICAgICBtb2NrTmFtZXNwYWNlTWFuYWdlci5jb21wcmVzc0lSSS5tb2NrSW1wbGVtZW50YXRpb24oKGlyaSkgPT4gaXJpLnRvU3RyaW5nKCkpO1xuICAgICAgICBtb2NrTmFtZXNwYWNlTWFuYWdlci5nZXRBbGxCaW5kaW5ncy5tb2NrUmV0dXJuVmFsdWUoW1xuICAgICAgICAgICAgeyBwcmVmaXg6ICdleCcsIG5hbWVzcGFjZTogeyB0b1N0cmluZzogKCkgPT4gJ2h0dHA6Ly9leGFtcGxlLm9yZy8nIH0gfSxcbiAgICAgICAgICAgIHsgcHJlZml4OiAnZm9hZicsIG5hbWVzcGFjZTogeyB0b1N0cmluZzogKCkgPT4gJ2h0dHA6Ly94bWxucy5jb20vZm9hZi8wLjEvJyB9IH1cbiAgICAgICAgXSk7XG4gICAgICAgIG1vY2tOYW1lc3BhY2VNYW5hZ2VyLmdlbmVyYXRlUHJlZml4RGVjbGFyYXRpb25zLm1vY2tSZXR1cm5WYWx1ZSgnQHByZWZpeCBleDogPGh0dHA6Ly9leGFtcGxlLm9yZy8+IC4nKTtcbiAgICAgICAgbW9ja05hbWVzcGFjZU1hbmFnZXIuZ2V0TmFtZXNwYWNlLm1vY2tSZXR1cm5WYWx1ZShudWxsKTtcbiAgICAgICAgbW9ja05hbWVzcGFjZU1hbmFnZXIuZXhwYW5kQ1VSSUUubW9ja1JldHVyblZhbHVlKHsgaXNTdWNjZXNzOiBmYWxzZSB9KTtcbiAgICAgICAgXG4gICAgICAgIG1vY2tSREZWYWxpZGF0b3IudmFsaWRhdGVHcmFwaC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgaXNTdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgaXNGYWlsdXJlOiBmYWxzZSxcbiAgICAgICAgICAgIGdldFZhbHVlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgIGlzVmFsaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZXJyb3JzOiBbXSxcbiAgICAgICAgICAgICAgICB3YXJuaW5nczogW11cbiAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgZXJyb3JWYWx1ZTogKCkgPT4gbnVsbFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJkZlNlcnZpY2UgPSBuZXcgUkRGU2VydmljZShtb2NrQXBwKTtcbiAgICAgICAgZ3JhcGggPSBuZXcgR3JhcGgoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIEFkZCBzb21lIHRlc3QgZGF0YVxuICAgICAgICBjb25zdCBzdWJqZWN0ID0gbmV3IElSSSgnaHR0cDovL2V4YW1wbGUub3JnL3BlcnNvbi8xJyk7XG4gICAgICAgIGNvbnN0IHByZWRpY2F0ZSA9IG5ldyBJUkkoJ2h0dHA6Ly9leGFtcGxlLm9yZy9uYW1lJyk7XG4gICAgICAgIGNvbnN0IG9iamVjdCA9IExpdGVyYWwuc3RyaW5nKCdKb2huIERvZScpO1xuICAgICAgICBcbiAgICAgICAgZ3JhcGguYWRkKG5ldyBUcmlwbGUoc3ViamVjdCwgcHJlZGljYXRlLCBvYmplY3QpKTtcbiAgICB9KTtcbiAgICBcbiAgICBkZXNjcmliZSgnZXhwb3J0R3JhcGgnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgZXhwb3J0IGdyYXBoIGluIFR1cnRsZSBmb3JtYXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZGZTZXJ2aWNlLmV4cG9ydEdyYXBoKGdyYXBoLCB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiAndHVydGxlJyxcbiAgICAgICAgICAgICAgICBzYXZlVG9WYXVsdDogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZXhwb3J0RGF0YSA9IHJlc3VsdC5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgZXhwZWN0KGV4cG9ydERhdGEuZm9ybWF0KS50b0JlKCd0dXJ0bGUnKTtcbiAgICAgICAgICAgIGV4cGVjdChleHBvcnREYXRhLnRyaXBsZUNvdW50KS50b0JlKDEpO1xuICAgICAgICAgICAgZXhwZWN0KGV4cG9ydERhdGEuY29udGVudCkudG9Db250YWluKCdAcHJlZml4Jyk7XG4gICAgICAgICAgICBleHBlY3QoZXhwb3J0RGF0YS5jb250ZW50KS50b0NvbnRhaW4oJ0pvaG4gRG9lJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaXQoJ3Nob3VsZCBleHBvcnQgZ3JhcGggaW4gSlNPTi1MRCBmb3JtYXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZGZTZXJ2aWNlLmV4cG9ydEdyYXBoKGdyYXBoLCB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiAnanNvbi1sZCcsXG4gICAgICAgICAgICAgICAgc2F2ZVRvVmF1bHQ6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IGV4cG9ydERhdGEgPSByZXN1bHQuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIGV4cGVjdChleHBvcnREYXRhLmZvcm1hdCkudG9CZSgnanNvbi1sZCcpO1xuICAgICAgICAgICAgZXhwZWN0KGV4cG9ydERhdGEudHJpcGxlQ291bnQpLnRvQmUoMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNob3VsZCBiZSB2YWxpZCBKU09OXG4gICAgICAgICAgICBjb25zdCBqc29uRGF0YSA9IEpTT04ucGFyc2UoZXhwb3J0RGF0YS5jb250ZW50KTtcbiAgICAgICAgICAgIGV4cGVjdChqc29uRGF0YVsnQGNvbnRleHQnXSkudG9CZURlZmluZWQoKTtcbiAgICAgICAgICAgIGV4cGVjdChqc29uRGF0YVsnQGdyYXBoJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaXQoJ3Nob3VsZCB2YWxpZGF0ZSBleHBvcnQgb3B0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIC8vIE1vY2sgdmFsaWRhdGlvbiBmYWlsdXJlIGZvciBpbnZhbGlkIGZvcm1hdFxuICAgICAgICAgICAgbW9ja1JERlZhbGlkYXRvci52YWxpZGF0ZUV4cG9ydE9wdGlvbnMubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgICAgICBpc1N1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzRmFpbHVyZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBnZXRWYWx1ZTogKCkgPT4gbnVsbCxcbiAgICAgICAgICAgICAgICBlcnJvclZhbHVlOiAoKSA9PiAnVW5zdXBwb3J0ZWQgZm9ybWF0OiBpbnZhbGlkJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJkZlNlcnZpY2UuZXhwb3J0R3JhcGgoZ3JhcGgsIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdpbnZhbGlkJyBhcyBhbnksXG4gICAgICAgICAgICAgICAgc2F2ZVRvVmF1bHQ6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc0ZhaWx1cmUpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmVycm9yVmFsdWUoKSkudG9Db250YWluKCdVbnN1cHBvcnRlZCBmb3JtYXQ6IGludmFsaWQnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgZGVzY3JpYmUoJ2ltcG9ydFJERicsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCBpbXBvcnQgVHVydGxlIGZvcm1hdCBSREYnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0dXJ0bGVDb250ZW50ID0gYFxuICAgICAgICAgICAgICAgIEBwcmVmaXggZXg6IDxodHRwOi8vZXhhbXBsZS5vcmcvPiAuXG4gICAgICAgICAgICAgICAgZXg6cGVyc29uMSBleDpuYW1lIFwiSmFuZSBTbWl0aFwiIC5cbiAgICAgICAgICAgICAgICBleDpwZXJzb24xIGV4OmFnZSBcIjMwXCJeXjxodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNpbnRlZ2VyPiAuXG4gICAgICAgICAgICBgO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZGZTZXJ2aWNlLmltcG9ydFJERih0dXJ0bGVDb250ZW50LCBncmFwaCwge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogJ3R1cnRsZScsXG4gICAgICAgICAgICAgICAgbWVyZ2VNb2RlOiAnbWVyZ2UnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHsgZ3JhcGg6IHVwZGF0ZWRHcmFwaCwgaW1wb3J0ZWQgfSA9IHJlc3VsdC5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgZXhwZWN0KGltcG9ydGVkLnRyaXBsZUNvdW50KS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICAgICAgICBleHBlY3QodXBkYXRlZEdyYXBoLnNpemUoKSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgxKTsgLy8gU2hvdWxkIGhhdmUgYXQgbGVhc3QgdGhlIGltcG9ydGVkIGRhdGFcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpdCgnc2hvdWxkIGltcG9ydCBKU09OLUxEIGZvcm1hdCBSREYnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBqc29ubGRDb250ZW50ID0gSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIFwiQGNvbnRleHRcIjoge1xuICAgICAgICAgICAgICAgICAgICBcImV4XCI6IFwiaHR0cDovL2V4YW1wbGUub3JnL1wiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBcIkBncmFwaFwiOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiQGlkXCI6IFwiZXg6cGVyc29uMlwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgXCJleDpuYW1lXCI6IHsgXCJAdmFsdWVcIjogXCJCb2IgSm9obnNvblwiIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBcImV4OmFnZVwiOiB7IFwiQHZhbHVlXCI6IFwiMjVcIiwgXCJAdHlwZVwiOiBcImh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI2ludGVnZXJcIiB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmRmU2VydmljZS5pbXBvcnRSREYoanNvbmxkQ29udGVudCwgZ3JhcGgsIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdqc29uLWxkJyxcbiAgICAgICAgICAgICAgICBtZXJnZU1vZGU6ICdtZXJnZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgeyBpbXBvcnRlZCB9ID0gcmVzdWx0LmdldFZhbHVlKCk7XG4gICAgICAgICAgICBleHBlY3QoaW1wb3J0ZWQudHJpcGxlQ291bnQpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGltcG9ydCBvcHRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gTW9jayB2YWxpZGF0aW9uIGZhaWx1cmUgZm9yIGludmFsaWQgZm9ybWF0XG4gICAgICAgICAgICBtb2NrUkRGVmFsaWRhdG9yLnZhbGlkYXRlSW1wb3J0T3B0aW9ucy5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgICAgIGlzU3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNGYWlsdXJlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldFZhbHVlOiAoKSA9PiBudWxsLFxuICAgICAgICAgICAgICAgIGVycm9yVmFsdWU6ICgpID0+ICdVbnN1cHBvcnRlZCBpbXBvcnQgZm9ybWF0OiBpbnZhbGlkJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJkZlNlcnZpY2UuaW1wb3J0UkRGKCdpbnZhbGlkIGNvbnRlbnQnLCBncmFwaCwge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogJ2ludmFsaWQnIGFzIGFueSxcbiAgICAgICAgICAgICAgICBtZXJnZU1vZGU6ICdtZXJnZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmlzRmFpbHVyZSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JWYWx1ZSgpKS50b0NvbnRhaW4oJ1Vuc3VwcG9ydGVkIGltcG9ydCBmb3JtYXQ6IGludmFsaWQnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSByZXBsYWNlIG1lcmdlIG1vZGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcmlnaW5hbFNpemUgPSBncmFwaC5zaXplKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHR1cnRsZUNvbnRlbnQgPSBgXG4gICAgICAgICAgICAgICAgQHByZWZpeCBleDogPGh0dHA6Ly9leGFtcGxlLm9yZy8+IC5cbiAgICAgICAgICAgICAgICBleDpuZXdwZXJzb24gZXg6bmFtZSBcIk5ldyBQZXJzb25cIiAuXG4gICAgICAgICAgICBgO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBNb2NrIHN1Y2Nlc3NmdWwgcGFyc2luZyB3aXRoIHNwZWNpZmljIGRhdGEgZm9yIHJlcGxhY2UgbW9kZVxuICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnRHcmFwaCA9IG5ldyBHcmFwaCgpO1xuICAgICAgICAgICAgcmVwbGFjZW1lbnRHcmFwaC5hZGQobmV3IFRyaXBsZShcbiAgICAgICAgICAgICAgICBuZXcgSVJJKCdodHRwOi8vZXhhbXBsZS5vcmcvbmV3cGVyc29uJyksXG4gICAgICAgICAgICAgICAgbmV3IElSSSgnaHR0cDovL2V4YW1wbGUub3JnL25hbWUnKSxcbiAgICAgICAgICAgICAgICBMaXRlcmFsLnN0cmluZygnTmV3IFBlcnNvbicpXG4gICAgICAgICAgICApKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbW9ja1JERlBhcnNlci5wYXJzZS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgICAgIGlzU3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc0ZhaWx1cmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGdldFZhbHVlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBncmFwaDogcmVwbGFjZW1lbnRHcmFwaCxcbiAgICAgICAgICAgICAgICAgICAgdHJpcGxlQ291bnQ6IDEsXG4gICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZXM6IHsgJ2V4JzogJ2h0dHA6Ly9leGFtcGxlLm9yZy8nIH0sXG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzOiBbXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGVycm9yVmFsdWU6ICgpID0+IG51bGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZGZTZXJ2aWNlLmltcG9ydFJERih0dXJ0bGVDb250ZW50LCBncmFwaCwge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogJ3R1cnRsZScsXG4gICAgICAgICAgICAgICAgbWVyZ2VNb2RlOiAncmVwbGFjZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgeyBncmFwaDogdXBkYXRlZEdyYXBoIH0gPSByZXN1bHQuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIC8vIEluIHJlcGxhY2UgbW9kZSwgc2hvdWxkIHJldHVybiB0aGUgcmVwbGFjZW1lbnQgZ3JhcGhcbiAgICAgICAgICAgIGV4cGVjdCh1cGRhdGVkR3JhcGguc2l6ZSgpKS50b0JlKDEpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICBkZXNjcmliZSgnZ2V0U3VwcG9ydGVkRm9ybWF0cycsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gYWxsIHN1cHBvcnRlZCBmb3JtYXRzJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZm9ybWF0cyA9IHJkZlNlcnZpY2UuZ2V0U3VwcG9ydGVkRm9ybWF0cygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QoZm9ybWF0cykudG9Db250YWluKCd0dXJ0bGUnKTtcbiAgICAgICAgICAgIGV4cGVjdChmb3JtYXRzKS50b0NvbnRhaW4oJ24tdHJpcGxlcycpO1xuICAgICAgICAgICAgZXhwZWN0KGZvcm1hdHMpLnRvQ29udGFpbignanNvbi1sZCcpO1xuICAgICAgICAgICAgZXhwZWN0KGZvcm1hdHMpLnRvQ29udGFpbigncmRmLXhtbCcpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICBkZXNjcmliZSgnZ2V0Rm9ybWF0SW5mbycsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCByZXR1cm4gZm9ybWF0IGluZm9ybWF0aW9uJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW5mbyA9IHJkZlNlcnZpY2UuZ2V0Rm9ybWF0SW5mbygndHVydGxlJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChpbmZvLmV4dGVuc2lvbikudG9CZSgnLnR0bCcpO1xuICAgICAgICAgICAgZXhwZWN0KGluZm8ubWltZVR5cGUpLnRvQmUoJ3RleHQvdHVydGxlJyk7XG4gICAgICAgICAgICBleHBlY3QoaW5mby5uYW1lKS50b0JlKCdUdXJ0bGUnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgZGVzY3JpYmUoJ2V4cG9ydFF1ZXJ5UmVzdWx0cycsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCBleHBvcnQgU1BBUlFMIHF1ZXJ5IHJlc3VsdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVJlc3VsdHMgPSBbXG4gICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICBzdWJqZWN0OiAnaHR0cDovL2V4YW1wbGUub3JnL3BlcnNvbi8xJyxcbiAgICAgICAgICAgICAgICAgICAgcHJlZGljYXRlOiAnaHR0cDovL2V4YW1wbGUub3JnL25hbWUnLFxuICAgICAgICAgICAgICAgICAgICBvYmplY3Q6ICdKb2huIERvZSdcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgc3ViamVjdDogJ2h0dHA6Ly9leGFtcGxlLm9yZy9wZXJzb24vMScsXG4gICAgICAgICAgICAgICAgICAgIHByZWRpY2F0ZTogJ2h0dHA6Ly9leGFtcGxlLm9yZy9hZ2UnLFxuICAgICAgICAgICAgICAgICAgICBvYmplY3Q6ICczMCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBdO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZGZTZXJ2aWNlLmV4cG9ydFF1ZXJ5UmVzdWx0cyhcbiAgICAgICAgICAgICAgICBxdWVyeVJlc3VsdHMsXG4gICAgICAgICAgICAgICAgJ3R1cnRsZScsXG4gICAgICAgICAgICAgICAgJ3F1ZXJ5LXJlc3VsdHMnLFxuICAgICAgICAgICAgICAgIGZhbHNlXG4gICAgICAgICAgICApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgZXhwb3J0RGF0YSA9IHJlc3VsdC5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgZXhwZWN0KGV4cG9ydERhdGEuZm9ybWF0KS50b0JlKCd0dXJ0bGUnKTtcbiAgICAgICAgICAgIGV4cGVjdChleHBvcnREYXRhLnRyaXBsZUNvdW50KS50b0JlKDIpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICBkZXNjcmliZSgnaW1wb3J0RnJvbVZhdWx0RmlsZScsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCBpbXBvcnQgUkRGIGZyb20gdmF1bHQgZmlsZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1vY2tGaWxlID0ge1xuICAgICAgICAgICAgICAgIHBhdGg6ICd0ZXN0LnR0bCcsXG4gICAgICAgICAgICAgICAgbmFtZTogJ3Rlc3QudHRsJ1xuICAgICAgICAgICAgfSBhcyBhbnk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE1vY2sgc3VjY2Vzc2Z1bCBmaWxlIHJlYWRcbiAgICAgICAgICAgIG1vY2tSREZGaWxlTWFuYWdlci5yZWFkRnJvbVZhdWx0Lm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgICBpc1N1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNGYWlsdXJlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBnZXRWYWx1ZTogKCkgPT4gJ0BwcmVmaXggZXg6IDxodHRwOi8vZXhhbXBsZS5vcmcvPiAuIGV4OnBlcnNvbjEgZXg6bmFtZSBcIlRlc3QgUGVyc29uXCIgLicsXG4gICAgICAgICAgICAgICAgZXJyb3JWYWx1ZTogKCkgPT4gbnVsbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIE1vY2sgZm9ybWF0IGRldGVjdGlvblxuICAgICAgICAgICAgbW9ja1JERkZpbGVNYW5hZ2VyLmRldGVjdEZvcm1hdEZyb21FeHRlbnNpb24ubW9ja1JldHVyblZhbHVlKCd0dXJ0bGUnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTW9jayBzdWNjZXNzZnVsIHBhcnNpbmdcbiAgICAgICAgICAgIGNvbnN0IHRlc3RHcmFwaCA9IG5ldyBHcmFwaCgpO1xuICAgICAgICAgICAgdGVzdEdyYXBoLmFkZChuZXcgVHJpcGxlKFxuICAgICAgICAgICAgICAgIG5ldyBJUkkoJ2h0dHA6Ly9leGFtcGxlLm9yZy9wZXJzb24xJyksXG4gICAgICAgICAgICAgICAgbmV3IElSSSgnaHR0cDovL2V4YW1wbGUub3JnL25hbWUnKSxcbiAgICAgICAgICAgICAgICBMaXRlcmFsLnN0cmluZygnVGVzdCBQZXJzb24nKVxuICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG1vY2tSREZQYXJzZXIucGFyc2UubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgICAgICBpc1N1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNGYWlsdXJlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBnZXRWYWx1ZTogKCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgZ3JhcGg6IHRlc3RHcmFwaCxcbiAgICAgICAgICAgICAgICAgICAgdHJpcGxlQ291bnQ6IDEsXG4gICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZXM6IHsgJ2V4JzogJ2h0dHA6Ly9leGFtcGxlLm9yZy8nIH0sXG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzOiBbXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGVycm9yVmFsdWU6ICgpID0+IG51bGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZGZTZXJ2aWNlLmltcG9ydEZyb21WYXVsdEZpbGUobW9ja0ZpbGUsIGdyYXBoLCB7XG4gICAgICAgICAgICAgICAgbWVyZ2VNb2RlOiAnbWVyZ2UnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QobW9ja1JERkZpbGVNYW5hZ2VyLnJlYWRGcm9tVmF1bHQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd0ZXN0LnR0bCcpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGl0KCdzaG91bGQgYXV0by1kZXRlY3QgZm9ybWF0IGZyb20gZmlsZSBleHRlbnNpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtb2NrRmlsZSA9IHtcbiAgICAgICAgICAgICAgICBwYXRoOiAndGVzdC5qc29ubGQnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICd0ZXN0Lmpzb25sZCdcbiAgICAgICAgICAgIH0gYXMgYW55O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBNb2NrIHN1Y2Nlc3NmdWwgZmlsZSByZWFkXG4gICAgICAgICAgICBtb2NrUkRGRmlsZU1hbmFnZXIucmVhZEZyb21WYXVsdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgICAgaXNTdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzRmFpbHVyZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6ICgpID0+IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICAgICAgICAgICAgXCJAY29udGV4dFwiOiB7IFwiZXhcIjogXCJodHRwOi8vZXhhbXBsZS5vcmcvXCIgfSxcbiAgICAgICAgICAgICAgICAgICAgXCJAZ3JhcGhcIjogW11cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBlcnJvclZhbHVlOiAoKSA9PiBudWxsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTW9jayBmb3JtYXQgZGV0ZWN0aW9uIGZvciBKU09OLUxEXG4gICAgICAgICAgICBtb2NrUkRGRmlsZU1hbmFnZXIuZGV0ZWN0Rm9ybWF0RnJvbUV4dGVuc2lvbi5tb2NrUmV0dXJuVmFsdWUoJ2pzb24tbGQnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTW9jayBzdWNjZXNzZnVsIHBhcnNpbmdcbiAgICAgICAgICAgIG1vY2tSREZQYXJzZXIucGFyc2UubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgICAgICBpc1N1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNGYWlsdXJlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBnZXRWYWx1ZTogKCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgZ3JhcGg6IG5ldyBHcmFwaCgpLFxuICAgICAgICAgICAgICAgICAgICB0cmlwbGVDb3VudDogMCxcbiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlczogeyAnZXgnOiAnaHR0cDovL2V4YW1wbGUub3JnLycgfSxcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZ3M6IFtdXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgZXJyb3JWYWx1ZTogKCkgPT4gbnVsbFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJkZlNlcnZpY2UuaW1wb3J0RnJvbVZhdWx0RmlsZShtb2NrRmlsZSwgZ3JhcGgsIHtcbiAgICAgICAgICAgICAgICBtZXJnZU1vZGU6ICdtZXJnZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdChtb2NrUkRGRmlsZU1hbmFnZXIuZGV0ZWN0Rm9ybWF0RnJvbUV4dGVuc2lvbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3Rlc3QuanNvbmxkJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgZmlsZSByZWFkIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1vY2tGaWxlID0ge1xuICAgICAgICAgICAgICAgIHBhdGg6ICdub25leGlzdGVudC50dGwnLFxuICAgICAgICAgICAgICAgIG5hbWU6ICdub25leGlzdGVudC50dGwnXG4gICAgICAgICAgICB9IGFzIGFueTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTW9jayBmaWxlIHJlYWQgZmFpbHVyZVxuICAgICAgICAgICAgbW9ja1JERkZpbGVNYW5hZ2VyLnJlYWRGcm9tVmF1bHQubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgICAgICAgIGlzU3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNGYWlsdXJlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldFZhbHVlOiAoKSA9PiBudWxsLFxuICAgICAgICAgICAgICAgIGVycm9yVmFsdWU6ICgpID0+ICdGaWxlIG5vdCBmb3VuZDogbm9uZXhpc3RlbnQudHRsJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJkZlNlcnZpY2UuaW1wb3J0RnJvbVZhdWx0RmlsZShtb2NrRmlsZSwgZ3JhcGgsIHtcbiAgICAgICAgICAgICAgICBtZXJnZU1vZGU6ICdtZXJnZSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmlzRmFpbHVyZSkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JWYWx1ZSgpKS50b0NvbnRhaW4oJ0ZpbGUgbm90IGZvdW5kJyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIGRlc2NyaWJlKCdsaXN0UkRGRmlsZXMnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgbGlzdCBSREYgZmlsZXMgaW4gdmF1bHQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtb2NrRmlsZXMgPSBbXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAndGVzdC50dGwnLCBwYXRoOiAndGVzdC50dGwnLCBleHRlbnNpb246ICd0dGwnIH0sXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnZGF0YS5yZGYnLCBwYXRoOiAnZGF0YS5yZGYnLCBleHRlbnNpb246ICdyZGYnIH0sXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnZXhhbXBsZS5qc29ubGQnLCBwYXRoOiAnZXhhbXBsZS5qc29ubGQnLCBleHRlbnNpb246ICdqc29ubGQnIH1cbiAgICAgICAgICAgIF0gYXMgYW55O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBtb2NrUkRGRmlsZU1hbmFnZXIubGlzdFJERkZpbGVzLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICAgICAgICBpc1N1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNGYWlsdXJlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBnZXRWYWx1ZTogKCkgPT4gbW9ja0ZpbGVzLFxuICAgICAgICAgICAgICAgIGVycm9yVmFsdWU6ICgpID0+IG51bGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZGZTZXJ2aWNlLmxpc3RSREZGaWxlcygpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbGVzID0gcmVzdWx0LmdldFZhbHVlKCk7XG4gICAgICAgICAgICBleHBlY3QoZmlsZXMpLnRvSGF2ZUxlbmd0aCgzKTsgLy8gU2hvdWxkIGV4Y2x1ZGUgbm9uLVJERiBmaWxlc1xuICAgICAgICAgICAgZXhwZWN0KGZpbGVzLm1hcChmID0+IGYubmFtZSkpLnRvRXF1YWwoWyd0ZXN0LnR0bCcsICdkYXRhLnJkZicsICdleGFtcGxlLmpzb25sZCddKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpdCgnc2hvdWxkIGZpbHRlciBmaWxlcyBieSBmb2xkZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtb2NrRmlsZXMgPSBbXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAndGVzdC50dGwnLCBwYXRoOiAnZm9sZGVyMS90ZXN0LnR0bCcsIGV4dGVuc2lvbjogJ3R0bCcgfSxcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdleGFtcGxlLmpzb25sZCcsIHBhdGg6ICdmb2xkZXIxL2V4YW1wbGUuanNvbmxkJywgZXh0ZW5zaW9uOiAnanNvbmxkJyB9XG4gICAgICAgICAgICBdIGFzIGFueTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbW9ja1JERkZpbGVNYW5hZ2VyLmxpc3RSREZGaWxlcy5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgICAgaXNTdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGlzRmFpbHVyZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6ICgpID0+IG1vY2tGaWxlcyxcbiAgICAgICAgICAgICAgICBlcnJvclZhbHVlOiAoKSA9PiBudWxsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmRmU2VydmljZS5saXN0UkRGRmlsZXMoJ2ZvbGRlcjEnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBjb25zdCBmaWxlcyA9IHJlc3VsdC5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgZXhwZWN0KGZpbGVzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICAgICAgICBleHBlY3QoZmlsZXMubWFwKGYgPT4gZi5wYXRoKSkudG9FcXVhbChbJ2ZvbGRlcjEvdGVzdC50dGwnLCAnZm9sZGVyMS9leGFtcGxlLmpzb25sZCddKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgZGVzY3JpYmUoJ3ZhbGlkYXRlR3JhcGgnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgdmFsaWRhdGUgZ3JhcGggd2l0aCBkZWZhdWx0IG9wdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZGZTZXJ2aWNlLnZhbGlkYXRlR3JhcGgoZ3JhcGgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSByZXN1bHQuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIGV4cGVjdCh2YWxpZGF0aW9uLmlzVmFsaWQpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QoQXJyYXkuaXNBcnJheSh2YWxpZGF0aW9uLmVycm9ycykpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QoQXJyYXkuaXNBcnJheSh2YWxpZGF0aW9uLndhcm5pbmdzKSkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIGdyYXBoIHdpdGggY3VzdG9tIG9wdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIHN0cmljdE1vZGU6IHRydWUsXG4gICAgICAgICAgICAgICAgY2hlY2tEdXBsaWNhdGVzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGNoZWNrTmFtZXNwYWNlczogdHJ1ZVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmRmU2VydmljZS52YWxpZGF0ZUdyYXBoKGdyYXBoLCBvcHRpb25zKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIGRlc2NyaWJlKCdjcmVhdGVOb2RlRnJvbVZhbHVlJywgKCkgPT4ge1xuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSBJUkkgZnJvbSBzdHJpbmcgd2l0aCBwcm90b2NvbCcsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UmVzdWx0cyA9IFt7XG4gICAgICAgICAgICAgICAgc3ViamVjdDogJ2h0dHA6Ly9leGFtcGxlLm9yZy9wZXJzb24vMScsXG4gICAgICAgICAgICAgICAgcHJlZGljYXRlOiAnaHR0cDovL2V4YW1wbGUub3JnL25hbWUnLFxuICAgICAgICAgICAgICAgIG9iamVjdDogJ0pvaG4gRG9lJ1xuICAgICAgICAgICAgfV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHJkZlNlcnZpY2UuZXhwb3J0UXVlcnlSZXN1bHRzKHF1ZXJ5UmVzdWx0cywgJ3R1cnRsZScsICd0ZXN0JywgZmFsc2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS5yZXNvbHZlcy50b0JlRGVmaW5lZCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIEJsYW5rTm9kZSBmcm9tIHN0cmluZyB3aXRoIF86IHByZWZpeCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UmVzdWx0cyA9IFt7XG4gICAgICAgICAgICAgICAgc3ViamVjdDogJ186YjEnLFxuICAgICAgICAgICAgICAgIHByZWRpY2F0ZTogJ2h0dHA6Ly9leGFtcGxlLm9yZy9uYW1lJyxcbiAgICAgICAgICAgICAgICBvYmplY3Q6ICdKb2huIERvZSdcbiAgICAgICAgICAgIH1dO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZGZTZXJ2aWNlLmV4cG9ydFF1ZXJ5UmVzdWx0cyhxdWVyeVJlc3VsdHMsICd0dXJ0bGUnLCAndGVzdCcsIGZhbHNlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBjb25zdCBleHBvcnRlZCA9IHJlc3VsdC5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgZXhwZWN0KGV4cG9ydGVkLmNvbnRlbnQpLnRvQ29udGFpbignXzpiMScpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIExpdGVyYWwgZnJvbSBudW1iZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVJlc3VsdHMgPSBbe1xuICAgICAgICAgICAgICAgIHN1YmplY3Q6ICdodHRwOi8vZXhhbXBsZS5vcmcvcGVyc29uLzEnLFxuICAgICAgICAgICAgICAgIHByZWRpY2F0ZTogJ2h0dHA6Ly9leGFtcGxlLm9yZy9hZ2UnLFxuICAgICAgICAgICAgICAgIG9iamVjdDogMjVcbiAgICAgICAgICAgIH1dO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZGZTZXJ2aWNlLmV4cG9ydFF1ZXJ5UmVzdWx0cyhxdWVyeVJlc3VsdHMsICd0dXJ0bGUnLCAndGVzdCcsIGZhbHNlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgTGl0ZXJhbCBmcm9tIGJvb2xlYW4nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVJlc3VsdHMgPSBbe1xuICAgICAgICAgICAgICAgIHN1YmplY3Q6ICdodHRwOi8vZXhhbXBsZS5vcmcvcGVyc29uLzEnLFxuICAgICAgICAgICAgICAgIHByZWRpY2F0ZTogJ2h0dHA6Ly9leGFtcGxlLm9yZy9hY3RpdmUnLFxuICAgICAgICAgICAgICAgIG9iamVjdDogdHJ1ZVxuICAgICAgICAgICAgfV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJkZlNlcnZpY2UuZXhwb3J0UXVlcnlSZXN1bHRzKHF1ZXJ5UmVzdWx0cywgJ3R1cnRsZScsICd0ZXN0JywgZmFsc2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpdCgnc2hvdWxkIGNyZWF0ZSB0eXBlZCBMaXRlcmFsIGZyb20gb2JqZWN0IHdpdGggZGF0YXR5cGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVJlc3VsdHMgPSBbe1xuICAgICAgICAgICAgICAgIHN1YmplY3Q6ICdodHRwOi8vZXhhbXBsZS5vcmcvcGVyc29uLzEnLFxuICAgICAgICAgICAgICAgIHByZWRpY2F0ZTogJ2h0dHA6Ly9leGFtcGxlLm9yZy9iaXJ0aERhdGUnLFxuICAgICAgICAgICAgICAgIG9iamVjdDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbGl0ZXJhbCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnMTk5MC0wMS0wMScsXG4gICAgICAgICAgICAgICAgICAgIGRhdGF0eXBlOiAnaHR0cDovL3d3dy53My5vcmcvMjAwMS9YTUxTY2hlbWEjZGF0ZSdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmRmU2VydmljZS5leHBvcnRRdWVyeVJlc3VsdHMocXVlcnlSZXN1bHRzLCAndHVydGxlJywgJ3Rlc3QnLCBmYWxzZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGl0KCdzaG91bGQgY3JlYXRlIGxhbmd1YWdlLXRhZ2dlZCBMaXRlcmFsIGZyb20gb2JqZWN0IHdpdGggbGFuZycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5UmVzdWx0cyA9IFt7XG4gICAgICAgICAgICAgICAgc3ViamVjdDogJ2h0dHA6Ly9leGFtcGxlLm9yZy9wZXJzb24vMScsXG4gICAgICAgICAgICAgICAgcHJlZGljYXRlOiAnaHR0cDovL2V4YW1wbGUub3JnL25hbWUnLFxuICAgICAgICAgICAgICAgIG9iamVjdDoge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnbGl0ZXJhbCcsXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlOiAnSmVhbicsXG4gICAgICAgICAgICAgICAgICAgIGxhbmc6ICdmcidcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmRmU2VydmljZS5leHBvcnRRdWVyeVJlc3VsdHMocXVlcnlSZXN1bHRzLCAndHVydGxlJywgJ3Rlc3QnLCBmYWxzZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIG51bGwgdmFsdWVzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeVJlc3VsdHMgPSBbe1xuICAgICAgICAgICAgICAgIHN1YmplY3Q6ICdodHRwOi8vZXhhbXBsZS5vcmcvcGVyc29uLzEnLFxuICAgICAgICAgICAgICAgIHByZWRpY2F0ZTogJ2h0dHA6Ly9leGFtcGxlLm9yZy9uYW1lJyxcbiAgICAgICAgICAgICAgICBvYmplY3Q6IG51bGxcbiAgICAgICAgICAgIH1dO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZGZTZXJ2aWNlLmV4cG9ydFF1ZXJ5UmVzdWx0cyhxdWVyeVJlc3VsdHMsICd0dXJ0bGUnLCAndGVzdCcsIGZhbHNlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIGRlc2NyaWJlKCdlcnJvciBoYW5kbGluZycsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgc2VyaWFsaXphdGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICAvLyBDcmVhdGUgYW4gaW52YWxpZCBncmFwaCBzY2VuYXJpb1xuICAgICAgICAgICAgY29uc3QgaW52YWxpZEdyYXBoID0gbmV3IEdyYXBoKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJkZlNlcnZpY2UuZXhwb3J0R3JhcGgoaW52YWxpZEdyYXBoLCB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiAndHVydGxlJyxcbiAgICAgICAgICAgICAgICBiYXNlSVJJOiAnaW52YWxpZC11cmknLFxuICAgICAgICAgICAgICAgIHNhdmVUb1ZhdWx0OiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNob3VsZCBoYW5kbGUgdGhlIGVycm9yIGdyYWNlZnVsbHlcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuaXNGYWlsdXJlKS50b0JlKHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIHBhcnNpbmcgZXJyb3JzIGluIHN0cmljdCBtb2RlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW52YWxpZENvbnRlbnQgPSAnVGhpcyBpcyBub3QgdmFsaWQgUkRGJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTW9jayBwYXJzaW5nIGZhaWx1cmVcbiAgICAgICAgICAgIG1vY2tSREZQYXJzZXIucGFyc2UubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgICAgICBpc1N1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGlzRmFpbHVyZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBnZXRWYWx1ZTogKCkgPT4gbnVsbCxcbiAgICAgICAgICAgICAgICBlcnJvclZhbHVlOiAoKSA9PiAnSW52YWxpZCBSREYgc3ludGF4J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJkZlNlcnZpY2UuaW1wb3J0UkRGKGludmFsaWRDb250ZW50LCBncmFwaCwge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogJ3R1cnRsZScsXG4gICAgICAgICAgICAgICAgbWVyZ2VNb2RlOiAnbWVyZ2UnLFxuICAgICAgICAgICAgICAgIHN0cmljdE1vZGU6IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmlzRmFpbHVyZSkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBtYWxmb3JtZWQgUkRGIGNvbnRlbnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtYWxmb3JtZWRDb250ZW50ID0gYFxuICAgICAgICAgICAgICAgIEBwcmVmaXggZXg6IDxodHRwOi8vZXhhbXBsZS5vcmcvPlxuICAgICAgICAgICAgICAgIGV4OnBlcnNvbjEgZXg6bmFtZSBcIlVuY2xvc2VkIHN0cmluZ1xuICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmRmU2VydmljZS5pbXBvcnRSREYobWFsZm9ybWVkQ29udGVudCwgZ3JhcGgsIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICd0dXJ0bGUnLFxuICAgICAgICAgICAgICAgIG1lcmdlTW9kZTogJ21lcmdlJyxcbiAgICAgICAgICAgICAgICBzdHJpY3RNb2RlOiBmYWxzZVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNob3VsZCBmYWlsIG9yIHN1Y2NlZWQgd2l0aCB3YXJuaW5nc1xuICAgICAgICAgICAgaWYgKHJlc3VsdC5pc1N1Y2Nlc3MpIHtcbiAgICAgICAgICAgICAgICAvLyBJZiBzdWNjZXNzZnVsLCBzaG91bGQgaGF2ZSB3YXJuaW5nc1xuICAgICAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZ2V0VmFsdWUoKS5pbXBvcnRlZC53YXJuaW5ncykudG9CZURlZmluZWQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvclZhbHVlKCkpLnRvQ29udGFpbigncGFyc2luZyBmYWlsZWQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIEpTT04tTEQgY29udGVudCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGludmFsaWRKc29uTEQgPSAneyBcImludmFsaWRcIjoganNvbiB9JzsgLy8gSW52YWxpZCBKU09OIHN5bnRheFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBNb2NrIHBhcnNpbmcgZmFpbHVyZSBmb3IgaW52YWxpZCBKU09OLUxEXG4gICAgICAgICAgICBtb2NrUkRGUGFyc2VyLnBhcnNlLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgICAgICAgICAgaXNTdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc0ZhaWx1cmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6ICgpID0+IG51bGwsXG4gICAgICAgICAgICAgICAgZXJyb3JWYWx1ZTogKCkgPT4gJ0ludmFsaWQgSlNPTi1MRCBzeW50YXgnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmRmU2VydmljZS5pbXBvcnRSREYoaW52YWxpZEpzb25MRCwgZ3JhcGgsIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICdqc29uLWxkJyxcbiAgICAgICAgICAgICAgICBtZXJnZU1vZGU6ICdtZXJnZScsXG4gICAgICAgICAgICAgICAgc3RyaWN0TW9kZTogdHJ1ZSAgLy8gRW5hYmxlIHN0cmljdCBtb2RlIHRvIGNhdGNoIHBhcnNpbmcgZXJyb3JzXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc0ZhaWx1cmUpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgdmF1bHQgd3JpdGUgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gTW9jayBzYXZlIGZhaWx1cmVcbiAgICAgICAgICAgIG1vY2tSREZGaWxlTWFuYWdlci5zYXZlVG9WYXVsdC5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgICAgICAgaXNTdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBpc0ZhaWx1cmU6IHRydWUsXG4gICAgICAgICAgICAgICAgZ2V0VmFsdWU6ICgpID0+IG51bGwsXG4gICAgICAgICAgICAgICAgZXJyb3JWYWx1ZTogKCkgPT4gJ1dyaXRlIGZhaWxlZCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZGZTZXJ2aWNlLmV4cG9ydEdyYXBoKGdyYXBoLCB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiAndHVydGxlJyxcbiAgICAgICAgICAgICAgICBzYXZlVG9WYXVsdDogdHJ1ZSxcbiAgICAgICAgICAgICAgICBmaWxlTmFtZTogJ3Rlc3QudHRsJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuaXNGYWlsdXJlKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvclZhbHVlKCkpLnRvQ29udGFpbignV3JpdGUgZmFpbGVkJyk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgbmFtZXNwYWNlIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRXaXRoQmFkTmFtZXNwYWNlID0gYFxuICAgICAgICAgICAgICAgIEBwcmVmaXggYmFkOiA8aW52YWxpZC11cmk+IC5cbiAgICAgICAgICAgICAgICBiYWQ6dGVzdCBiYWQ6cHJvcCBcInZhbHVlXCIgLlxuICAgICAgICAgICAgYDtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTW9jayBwYXJzaW5nIHdpdGggd2FybmluZ3NcbiAgICAgICAgICAgIG1vY2tSREZQYXJzZXIucGFyc2UubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICAgICAgICBpc1N1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgaXNGYWlsdXJlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBnZXRWYWx1ZTogKCkgPT4gKHtcbiAgICAgICAgICAgICAgICAgICAgZ3JhcGg6IG5ldyBHcmFwaCgpLFxuICAgICAgICAgICAgICAgICAgICB0cmlwbGVDb3VudDogMSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlczogeyAnYmFkJzogJ2ludmFsaWQtdXJpJyB9LFxuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nczogWydJbnZhbGlkIG5hbWVzcGFjZSBVUkk6IGludmFsaWQtdXJpJ11cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBlcnJvclZhbHVlOiAoKSA9PiBudWxsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTW9jayB2YWxpZGF0aW9uIHdpdGggd2FybmluZ3NcbiAgICAgICAgICAgIG1vY2tSREZWYWxpZGF0b3IudmFsaWRhdGVHcmFwaC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgICAgIGlzU3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc0ZhaWx1cmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGdldFZhbHVlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBpc1ZhbGlkOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBlcnJvcnM6IFtdLFxuICAgICAgICAgICAgICAgICAgICB3YXJuaW5nczogW3sgbWVzc2FnZTogJ0ludmFsaWQgbmFtZXNwYWNlIFVSSSBkZXRlY3RlZCcgfV1cbiAgICAgICAgICAgICAgICB9KSxcbiAgICAgICAgICAgICAgICBlcnJvclZhbHVlOiAoKSA9PiBudWxsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmRmU2VydmljZS5pbXBvcnRSREYoY29udGVudFdpdGhCYWROYW1lc3BhY2UsIGdyYXBoLCB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiAndHVydGxlJyxcbiAgICAgICAgICAgICAgICBtZXJnZU1vZGU6ICdtZXJnZScsXG4gICAgICAgICAgICAgICAgc3RyaWN0TW9kZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICB2YWxpZGF0ZUlucHV0OiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2hvdWxkIHN1Y2NlZWQgd2l0aCB3YXJuaW5nc1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBjb25zdCB2YWxpZGF0aW9uID0gcmVzdWx0LmdldFZhbHVlKCk7XG4gICAgICAgICAgICBleHBlY3QodmFsaWRhdGlvbi5pbXBvcnRlZC53YXJuaW5ncy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBncmFwaCBleHBvcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBlbXB0eUdyYXBoID0gbmV3IEdyYXBoKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJkZlNlcnZpY2UuZXhwb3J0R3JhcGgoZW1wdHlHcmFwaCwge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogJ3R1cnRsZScsXG4gICAgICAgICAgICAgICAgc2F2ZVRvVmF1bHQ6IGZhbHNlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBjb25zdCBleHBvcnRlZCA9IHJlc3VsdC5nZXRWYWx1ZSgpO1xuICAgICAgICAgICAgZXhwZWN0KGV4cG9ydGVkLnRyaXBsZUNvdW50KS50b0JlKDApO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIHZlcnkgbGFyZ2UgZ3JhcGhzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGFyZ2VHcmFwaCA9IG5ldyBHcmFwaCgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBBZGQgbWFueSB0cmlwbGVzIHRvIHRlc3QgbWVtb3J5L3BlcmZvcm1hbmNlXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwMDA7IGkrKykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHRyaXBsZSA9IG5ldyBUcmlwbGUoXG4gICAgICAgICAgICAgICAgICAgIG5ldyBJUkkoYGh0dHA6Ly9leGFtcGxlLm9yZy9wZXJzb24vJHtpfWApLFxuICAgICAgICAgICAgICAgICAgICBuZXcgSVJJKCdodHRwOi8vZXhhbXBsZS5vcmcvbmFtZScpLFxuICAgICAgICAgICAgICAgICAgICBMaXRlcmFsLnN0cmluZyhgUGVyc29uICR7aX1gKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgbGFyZ2VHcmFwaC5hZGQodHJpcGxlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmRmU2VydmljZS5leHBvcnRHcmFwaChsYXJnZUdyYXBoLCB7XG4gICAgICAgICAgICAgICAgZm9ybWF0OiAnbi10cmlwbGVzJyxcbiAgICAgICAgICAgICAgICBzYXZlVG9WYXVsdDogZmFsc2VcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGNvbnN0IGV4cG9ydGVkID0gcmVzdWx0LmdldFZhbHVlKCk7XG4gICAgICAgICAgICBleHBlY3QoZXhwb3J0ZWQudHJpcGxlQ291bnQpLnRvQmUoMTAwMCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIGRlc2NyaWJlKCduYW1lc3BhY2UgbWFuYWdlbWVudCcsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCB1c2UgY3VzdG9tIG5hbWVzcGFjZSBtYW5hZ2VyJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY3VzdG9tTmFtZXNwYWNlTWFuYWdlciA9IG5ldyBOYW1lc3BhY2VNYW5hZ2VyKCk7XG4gICAgICAgICAgICBjdXN0b21OYW1lc3BhY2VNYW5hZ2VyLmFkZEJpbmRpbmcoJ2N1c3RvbScsICdodHRwOi8vY3VzdG9tLmV4YW1wbGUub3JnLycpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCBjdXN0b21SREZTZXJ2aWNlID0gbmV3IFJERlNlcnZpY2UobW9ja0FwcCwgY3VzdG9tTmFtZXNwYWNlTWFuYWdlcik7XG4gICAgICAgICAgICBjb25zdCBuc01hbmFnZXIgPSBjdXN0b21SREZTZXJ2aWNlLmdldE5hbWVzcGFjZU1hbmFnZXIoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KG5zTWFuYWdlci5oYXNQcmVmaXgoJ2N1c3RvbScpKS50b0JlKHRydWUpO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGl0KCdzaG91bGQgcHJlc2VydmUgbmFtZXNwYWNlIGJpbmRpbmdzIGR1cmluZyBpbXBvcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0dXJ0bGVDb250ZW50ID0gYFxuICAgICAgICAgICAgICAgIEBwcmVmaXggY3VzdG9tOiA8aHR0cDovL2N1c3RvbS5leGFtcGxlLm9yZy8+IC5cbiAgICAgICAgICAgICAgICBAcHJlZml4IHRlc3Q6IDxodHRwOi8vdGVzdC5leGFtcGxlLm9yZy8+IC5cbiAgICAgICAgICAgICAgICBjdXN0b206aXRlbSB0ZXN0OnByb3BlcnR5IFwidmFsdWVcIiAuXG4gICAgICAgICAgICBgO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBNb2NrIHBhcnNpbmcgd2l0aCBjdXN0b20gbmFtZXNwYWNlc1xuICAgICAgICAgICAgbW9ja1JERlBhcnNlci5wYXJzZS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgICAgICAgIGlzU3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgICAgICBpc0ZhaWx1cmU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIGdldFZhbHVlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBncmFwaDogbmV3IEdyYXBoKCksXG4gICAgICAgICAgICAgICAgICAgIHRyaXBsZUNvdW50OiAxLFxuICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2VzOiB7IFxuICAgICAgICAgICAgICAgICAgICAgICAgJ2N1c3RvbSc6ICdodHRwOi8vY3VzdG9tLmV4YW1wbGUub3JnLycsXG4gICAgICAgICAgICAgICAgICAgICAgICAndGVzdCc6ICdodHRwOi8vdGVzdC5leGFtcGxlLm9yZy8nXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHdhcm5pbmdzOiBbXVxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIGVycm9yVmFsdWU6ICgpID0+IG51bGxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBNb2NrIG5hbWVzcGFjZSBtYW5hZ2VyIHRvIHNob3cgcHJlZml4ZXMgYWZ0ZXIgYmluZGluZ1xuICAgICAgICAgICAgbW9ja05hbWVzcGFjZU1hbmFnZXIuaGFzUHJlZml4Lm1vY2tJbXBsZW1lbnRhdGlvbigocHJlZml4OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJlZml4ID09PSAnY3VzdG9tJyB8fCBwcmVmaXggPT09ICd0ZXN0JztcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZGZTZXJ2aWNlLmltcG9ydFJERih0dXJ0bGVDb250ZW50LCBncmFwaCwge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogJ3R1cnRsZScsXG4gICAgICAgICAgICAgICAgbWVyZ2VNb2RlOiAnbWVyZ2UnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG5zTWFuYWdlciA9IHJkZlNlcnZpY2UuZ2V0TmFtZXNwYWNlTWFuYWdlcigpO1xuICAgICAgICAgICAgZXhwZWN0KG5zTWFuYWdlci5oYXNQcmVmaXgoJ2N1c3RvbScpKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KG5zTWFuYWdlci5oYXNQcmVmaXgoJ3Rlc3QnKSkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgZGVzY3JpYmUoJ2V4cG9ydCB3aXRoIGZpbGUgb3BlcmF0aW9ucycsICgpID0+IHtcbiAgICAgICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICAgICAgICBtb2NrQXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aC5tb2NrUmV0dXJuVmFsdWUobnVsbCk7IC8vIEZpbGUgZG9lc24ndCBleGlzdFxuICAgICAgICAgICAgbW9ja0FwcC52YXVsdC5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUoKTtcbiAgICAgICAgICAgIG1vY2tBcHAudmF1bHQuY3JlYXRlRm9sZGVyLm1vY2tSZXNvbHZlZFZhbHVlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaXQoJ3Nob3VsZCBzYXZlIHRvIHZhdWx0IHdpdGggY3VzdG9tIGZpbGVuYW1lJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmRmU2VydmljZS5leHBvcnRHcmFwaChncmFwaCwge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogJ3R1cnRsZScsXG4gICAgICAgICAgICAgICAgc2F2ZVRvVmF1bHQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZmlsZU5hbWU6ICdjdXN0b20tbmFtZS50dGwnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QobW9ja0FwcC52YXVsdC5jcmVhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICAgICAgICdjdXN0b20tbmFtZS50dGwnLFxuICAgICAgICAgICAgICAgIGV4cGVjdC5hbnkoU3RyaW5nKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBpdCgnc2hvdWxkIHNhdmUgdG8gdmF1bHQgaW4gdGFyZ2V0IGZvbGRlcicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJkZlNlcnZpY2UuZXhwb3J0R3JhcGgoZ3JhcGgsIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICd0dXJ0bGUnLFxuICAgICAgICAgICAgICAgIHNhdmVUb1ZhdWx0OiB0cnVlLFxuICAgICAgICAgICAgICAgIHRhcmdldEZvbGRlcjogJ2V4cG9ydHMnLFxuICAgICAgICAgICAgICAgIGZpbGVOYW1lOiAndGVzdC50dGwnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QobW9ja0FwcC52YXVsdC5jcmVhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICAgICAgICdleHBvcnRzL3Rlc3QudHRsJyxcbiAgICAgICAgICAgICAgICBleHBlY3QuYW55KFN0cmluZylcbiAgICAgICAgICAgICk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgaXQoJ3Nob3VsZCBnZW5lcmF0ZSBmaWxlbmFtZSB3aGVuIG5vdCBwcm92aWRlZCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHJkZlNlcnZpY2UuZXhwb3J0R3JhcGgoZ3JhcGgsIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6ICd0dXJ0bGUnLFxuICAgICAgICAgICAgICAgIHNhdmVUb1ZhdWx0OiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QobW9ja0FwcC52YXVsdC5jcmVhdGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAgICAgICAgIGV4cGVjdC5zdHJpbmdNYXRjaGluZygvLipcXC50dGwkLyksXG4gICAgICAgICAgICAgICAgZXhwZWN0LmFueShTdHJpbmcpXG4gICAgICAgICAgICApO1xuICAgICAgICB9KTtcbiAgICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnTmFtZXNwYWNlTWFuYWdlcicsICgpID0+IHtcbiAgICBsZXQgbmFtZXNwYWNlTWFuYWdlcjogTmFtZXNwYWNlTWFuYWdlcjtcbiAgICBcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgLy8gVXNlIG1vY2sgZm9yIE5hbWVzcGFjZU1hbmFnZXIgdGVzdHMgdG9vXG4gICAgICAgIGNvbnN0IE1vY2tlZE5hbWVzcGFjZU1hbmFnZXIgPSBOYW1lc3BhY2VNYW5hZ2VyIGFzIGplc3QuTW9ja2VkQ2xhc3M8dHlwZW9mIE5hbWVzcGFjZU1hbmFnZXI+O1xuICAgICAgICBuYW1lc3BhY2VNYW5hZ2VyID0gbmV3IE1vY2tlZE5hbWVzcGFjZU1hbmFnZXIoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFNldHVwIGRlZmF1bHQgYmVoYXZpb3IgZm9yIHRoZXNlIHNwZWNpZmljIHRlc3RzXG4gICAgICAgIChuYW1lc3BhY2VNYW5hZ2VyLmhhc1ByZWZpeCBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigocHJlZml4OiBzdHJpbmcpID0+IHtcbiAgICAgICAgICAgIHJldHVybiBbJ3JkZicsICdyZGZzJywgJ293bCcsICd4c2QnLCAndGVzdCddLmluY2x1ZGVzKHByZWZpeCk7XG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgKG5hbWVzcGFjZU1hbmFnZXIuYWRkQmluZGluZyBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XG4gICAgICAgIFxuICAgICAgICAobmFtZXNwYWNlTWFuYWdlci5nZXROYW1lc3BhY2UgYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKHByZWZpeDogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBpZiAocHJlZml4ID09PSAndGVzdCcpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB0b1N0cmluZzogKCkgPT4gJ2h0dHA6Ly90ZXN0LmV4YW1wbGUub3JnLycgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIChuYW1lc3BhY2VNYW5hZ2VyLmV4cGFuZENVUklFIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKChjdXJpZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgICBpZiAoY3VyaWUgPT09ICdyZGY6dHlwZScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBpc1N1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGdldFZhbHVlOiAoKSA9PiBuZXcgSVJJKCdodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjdHlwZScpXG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7IGlzU3VjY2VzczogZmFsc2UgfTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAobmFtZXNwYWNlTWFuYWdlci5jb21wcmVzc0lSSSBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigoaXJpOiBJUkkpID0+IHtcbiAgICAgICAgICAgIGlmIChpcmkudG9TdHJpbmcoKSA9PT0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyN0eXBlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiAncmRmOnR5cGUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlyaS50b1N0cmluZygpO1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICBpdCgnc2hvdWxkIGhhdmUgZGVmYXVsdCBuYW1lc3BhY2VzJywgKCkgPT4ge1xuICAgICAgICBleHBlY3QobmFtZXNwYWNlTWFuYWdlci5oYXNQcmVmaXgoJ3JkZicpKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QobmFtZXNwYWNlTWFuYWdlci5oYXNQcmVmaXgoJ3JkZnMnKSkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KG5hbWVzcGFjZU1hbmFnZXIuaGFzUHJlZml4KCdvd2wnKSkudG9CZSh0cnVlKTtcbiAgICAgICAgZXhwZWN0KG5hbWVzcGFjZU1hbmFnZXIuaGFzUHJlZml4KCd4c2QnKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgICBcbiAgICBpdCgnc2hvdWxkIGFkZCBjdXN0b20gbmFtZXNwYWNlIGJpbmRpbmdzJywgKCkgPT4ge1xuICAgICAgICBuYW1lc3BhY2VNYW5hZ2VyLmFkZEJpbmRpbmcoJ3Rlc3QnLCAnaHR0cDovL3Rlc3QuZXhhbXBsZS5vcmcvJyk7XG4gICAgICAgIFxuICAgICAgICBleHBlY3QobmFtZXNwYWNlTWFuYWdlci5oYXNQcmVmaXgoJ3Rlc3QnKSkudG9CZSh0cnVlKTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IG5hbWVzcGFjZSA9IG5hbWVzcGFjZU1hbmFnZXIuZ2V0TmFtZXNwYWNlKCd0ZXN0Jyk7XG4gICAgICAgIGV4cGVjdChuYW1lc3BhY2U/LnRvU3RyaW5nKCkpLnRvQmUoJ2h0dHA6Ly90ZXN0LmV4YW1wbGUub3JnLycpO1xuICAgIH0pO1xuICAgIFxuICAgIGl0KCdzaG91bGQgZXhwYW5kIENVUklFcycsICgpID0+IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gbmFtZXNwYWNlTWFuYWdlci5leHBhbmRDVVJJRSgncmRmOnR5cGUnKTtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChyZXN1bHQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgaXJpID0gcmVzdWx0LmdldFZhbHVlKCk7XG4gICAgICAgIGV4cGVjdChpcmkudG9TdHJpbmcoKSkudG9CZSgnaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zI3R5cGUnKTtcbiAgICB9KTtcbiAgICBcbiAgICBpdCgnc2hvdWxkIGNvbXByZXNzIElSSXMnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGlyaSA9IG5ldyBJUkkoJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyN0eXBlJyk7XG4gICAgICAgIGNvbnN0IGNvbXByZXNzZWQgPSBuYW1lc3BhY2VNYW5hZ2VyLmNvbXByZXNzSVJJKGlyaSk7XG4gICAgICAgIFxuICAgICAgICBleHBlY3QoY29tcHJlc3NlZCkudG9CZSgncmRmOnR5cGUnKTtcbiAgICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnUkRGU2VyaWFsaXplcicsICgpID0+IHtcbiAgICBsZXQgc2VyaWFsaXplcjogUkRGU2VyaWFsaXplcjtcbiAgICBsZXQgZ3JhcGg6IEdyYXBoO1xuICAgIFxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICAvLyBVc2UgbW9ja2VkIHNlcmlhbGl6ZXJcbiAgICAgICAgY29uc3QgTW9ja2VkUkRGU2VyaWFsaXplciA9IFJERlNlcmlhbGl6ZXIgYXMgamVzdC5Nb2NrZWRDbGFzczx0eXBlb2YgUkRGU2VyaWFsaXplcj47XG4gICAgICAgIGNvbnN0IG1vY2tOYW1lc3BhY2VNYW5hZ2VyID0gbmV3IChOYW1lc3BhY2VNYW5hZ2VyIGFzIGplc3QuTW9ja2VkQ2xhc3M8dHlwZW9mIE5hbWVzcGFjZU1hbmFnZXI+KSgpO1xuICAgICAgICBzZXJpYWxpemVyID0gbmV3IE1vY2tlZFJERlNlcmlhbGl6ZXIobW9ja05hbWVzcGFjZU1hbmFnZXIpO1xuICAgICAgICBncmFwaCA9IG5ldyBHcmFwaCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHRlc3QgZGF0YVxuICAgICAgICBjb25zdCB0cmlwbGUgPSBuZXcgVHJpcGxlKFxuICAgICAgICAgICAgbmV3IElSSSgnaHR0cDovL2V4YW1wbGUub3JnL3BlcnNvbi8xJyksXG4gICAgICAgICAgICBuZXcgSVJJKCdodHRwOi8veG1sbnMuY29tL2ZvYWYvMC4xL25hbWUnKSxcbiAgICAgICAgICAgIExpdGVyYWwuc3RyaW5nKCdKb2huIERvZScpXG4gICAgICAgICk7XG4gICAgICAgIGdyYXBoLmFkZCh0cmlwbGUpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0dXAgbW9jayBiZWhhdmlvciBmb3Igc2VyaWFsaXplclxuICAgICAgICAoc2VyaWFsaXplci5zZXJpYWxpemUgYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKGdyYXBoLCBvcHRpb25zKSA9PiB7XG4gICAgICAgICAgICBsZXQgY29udGVudDogc3RyaW5nO1xuICAgICAgICAgICAgc3dpdGNoIChvcHRpb25zLmZvcm1hdCkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3R1cnRsZSc6XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQgPSAnQHByZWZpeCBmb2FmOiA8aHR0cDovL3htbG5zLmNvbS9mb2FmLzAuMS8+IC5cXG48aHR0cDovL2V4YW1wbGUub3JnL3BlcnNvbi8xPiBmb2FmOm5hbWUgXCJKb2huIERvZVwiIC4nO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICduLXRyaXBsZXMnOlxuICAgICAgICAgICAgICAgICAgICBjb250ZW50ID0gJzxodHRwOi8vZXhhbXBsZS5vcmcvcGVyc29uLzE+IDxodHRwOi8veG1sbnMuY29tL2ZvYWYvMC4xL25hbWU+IFwiSm9obiBEb2VcIiAuJztcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgY29udGVudCA9ICdAcHJlZml4IGZvYWY6IDxodHRwOi8veG1sbnMuY29tL2ZvYWYvMC4xLz4gLlxcbjxodHRwOi8vZXhhbXBsZS5vcmcvcGVyc29uLzE+IGZvYWY6bmFtZSBcIkpvaG4gRG9lXCIgLic7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaXNTdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldFZhbHVlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBjb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBmb3JtYXQ6IG9wdGlvbnMuZm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICB0cmlwbGVDb3VudDogMVxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICBpdCgnc2hvdWxkIHNlcmlhbGl6ZSB0byBUdXJ0bGUgZm9ybWF0JywgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBzZXJpYWxpemVyLnNlcmlhbGl6ZShncmFwaCwge1xuICAgICAgICAgICAgZm9ybWF0OiAndHVydGxlJyxcbiAgICAgICAgICAgIHByZXR0eVByaW50OiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBzZXJpYWxpemVkRGF0YSA9IHJlc3VsdC5nZXRWYWx1ZSgpO1xuICAgICAgICBleHBlY3Qoc2VyaWFsaXplZERhdGEuY29udGVudCkudG9Db250YWluKCdAcHJlZml4Jyk7XG4gICAgICAgIGV4cGVjdChzZXJpYWxpemVkRGF0YS5jb250ZW50KS50b0NvbnRhaW4oJ2ZvYWY6bmFtZScpO1xuICAgICAgICBleHBlY3Qoc2VyaWFsaXplZERhdGEuY29udGVudCkudG9Db250YWluKCdcIkpvaG4gRG9lXCInKTtcbiAgICB9KTtcbiAgICBcbiAgICBpdCgnc2hvdWxkIHNlcmlhbGl6ZSB0byBOLVRyaXBsZXMgZm9ybWF0JywgKCkgPT4ge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBzZXJpYWxpemVyLnNlcmlhbGl6ZShncmFwaCwge1xuICAgICAgICAgICAgZm9ybWF0OiAnbi10cmlwbGVzJ1xuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChyZXN1bHQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICBcbiAgICAgICAgY29uc3Qgc2VyaWFsaXplZERhdGEgPSByZXN1bHQuZ2V0VmFsdWUoKTtcbiAgICAgICAgZXhwZWN0KHNlcmlhbGl6ZWREYXRhLmNvbnRlbnQpLnRvQ29udGFpbignPGh0dHA6Ly9leGFtcGxlLm9yZy9wZXJzb24vMT4nKTtcbiAgICAgICAgZXhwZWN0KHNlcmlhbGl6ZWREYXRhLmNvbnRlbnQpLnRvQ29udGFpbignPGh0dHA6Ly94bWxucy5jb20vZm9hZi8wLjEvbmFtZT4nKTtcbiAgICAgICAgZXhwZWN0KHNlcmlhbGl6ZWREYXRhLmNvbnRlbnQpLnRvQ29udGFpbignXCJKb2huIERvZVwiJyk7XG4gICAgICAgIGV4cGVjdChzZXJpYWxpemVkRGF0YS5jb250ZW50KS50b0NvbnRhaW4oJyAuJyk7XG4gICAgfSk7XG4gICAgXG4gICAgaXQoJ3Nob3VsZCBwcm92aWRlIGZpbGUgZXh0ZW5zaW9uIGZvciBmb3JtYXQnLCAoKSA9PiB7XG4gICAgICAgIC8vIE1vY2sgc3RhdGljIG1ldGhvZHNcbiAgICAgICAgKFJERlNlcmlhbGl6ZXIuZ2V0RmlsZUV4dGVuc2lvbiBhcyBqZXN0Lk1vY2spID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoZm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBleHRlbnNpb25zID0ge1xuICAgICAgICAgICAgICAgICd0dXJ0bGUnOiAnLnR0bCcsXG4gICAgICAgICAgICAgICAgJ24tdHJpcGxlcyc6ICcubnQnLFxuICAgICAgICAgICAgICAgICdqc29uLWxkJzogJy5qc29ubGQnLFxuICAgICAgICAgICAgICAgICdyZGYteG1sJzogJy5yZGYnXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGV4dGVuc2lvbnNbZm9ybWF0XTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBleHBlY3QoUkRGU2VyaWFsaXplci5nZXRGaWxlRXh0ZW5zaW9uKCd0dXJ0bGUnKSkudG9CZSgnLnR0bCcpO1xuICAgICAgICBleHBlY3QoUkRGU2VyaWFsaXplci5nZXRGaWxlRXh0ZW5zaW9uKCduLXRyaXBsZXMnKSkudG9CZSgnLm50Jyk7XG4gICAgICAgIGV4cGVjdChSREZTZXJpYWxpemVyLmdldEZpbGVFeHRlbnNpb24oJ2pzb24tbGQnKSkudG9CZSgnLmpzb25sZCcpO1xuICAgICAgICBleHBlY3QoUkRGU2VyaWFsaXplci5nZXRGaWxlRXh0ZW5zaW9uKCdyZGYteG1sJykpLnRvQmUoJy5yZGYnKTtcbiAgICB9KTtcbiAgICBcbiAgICBpdCgnc2hvdWxkIHByb3ZpZGUgTUlNRSB0eXBlIGZvciBmb3JtYXQnLCAoKSA9PiB7XG4gICAgICAgIC8vIE1vY2sgc3RhdGljIG1ldGhvZHNcbiAgICAgICAgKFJERlNlcmlhbGl6ZXIuZ2V0TWltZVR5cGUgYXMgamVzdC5Nb2NrKSA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKGZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbWltZVR5cGVzID0ge1xuICAgICAgICAgICAgICAgICd0dXJ0bGUnOiAndGV4dC90dXJ0bGUnLFxuICAgICAgICAgICAgICAgICduLXRyaXBsZXMnOiAnYXBwbGljYXRpb24vbi10cmlwbGVzJyxcbiAgICAgICAgICAgICAgICAnanNvbi1sZCc6ICdhcHBsaWNhdGlvbi9sZCtqc29uJyxcbiAgICAgICAgICAgICAgICAncmRmLXhtbCc6ICdhcHBsaWNhdGlvbi9yZGYreG1sJ1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHJldHVybiBtaW1lVHlwZXNbZm9ybWF0XTtcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICBleHBlY3QoUkRGU2VyaWFsaXplci5nZXRNaW1lVHlwZSgndHVydGxlJykpLnRvQmUoJ3RleHQvdHVydGxlJyk7XG4gICAgICAgIGV4cGVjdChSREZTZXJpYWxpemVyLmdldE1pbWVUeXBlKCduLXRyaXBsZXMnKSkudG9CZSgnYXBwbGljYXRpb24vbi10cmlwbGVzJyk7XG4gICAgICAgIGV4cGVjdChSREZTZXJpYWxpemVyLmdldE1pbWVUeXBlKCdqc29uLWxkJykpLnRvQmUoJ2FwcGxpY2F0aW9uL2xkK2pzb24nKTtcbiAgICAgICAgZXhwZWN0KFJERlNlcmlhbGl6ZXIuZ2V0TWltZVR5cGUoJ3JkZi14bWwnKSkudG9CZSgnYXBwbGljYXRpb24vcmRmK3htbCcpO1xuICAgIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdSREZQYXJzZXInLCAoKSA9PiB7XG4gICAgbGV0IHBhcnNlcjogUkRGUGFyc2VyO1xuICAgIFxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICAvLyBVc2UgbW9ja2VkIHBhcnNlclxuICAgICAgICBjb25zdCBNb2NrZWRSREZQYXJzZXIgPSBSREZQYXJzZXIgYXMgamVzdC5Nb2NrZWRDbGFzczx0eXBlb2YgUkRGUGFyc2VyPjtcbiAgICAgICAgY29uc3QgbW9ja05hbWVzcGFjZU1hbmFnZXIgPSBuZXcgKE5hbWVzcGFjZU1hbmFnZXIgYXMgamVzdC5Nb2NrZWRDbGFzczx0eXBlb2YgTmFtZXNwYWNlTWFuYWdlcj4pKCk7XG4gICAgICAgIHBhcnNlciA9IG5ldyBNb2NrZWRSREZQYXJzZXIobW9ja05hbWVzcGFjZU1hbmFnZXIpO1xuICAgICAgICBcbiAgICAgICAgLy8gU2V0dXAgbW9jayBiZWhhdmlvciBmb3IgcGFyc2VyXG4gICAgICAgIChwYXJzZXIucGFyc2UgYXMgamVzdC5Nb2NrKS5tb2NrSW1wbGVtZW50YXRpb24oKGNvbnRlbnQsIG9wdGlvbnMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGdyYXBoID0gbmV3IEdyYXBoKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNpbXVsYXRlIHBhcnNpbmcgYmFzZWQgb24gY29udGVudCBhbmQgZm9ybWF0XG4gICAgICAgICAgICBpZiAoY29udGVudC5pbmNsdWRlcygnZm9hZjpuYW1lJykgfHwgY29udGVudC5pbmNsdWRlcygnaHR0cDovL3htbG5zLmNvbS9mb2FmLzAuMS9uYW1lJykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0cmlwbGUgPSBuZXcgVHJpcGxlKFxuICAgICAgICAgICAgICAgICAgICBuZXcgSVJJKCdodHRwOi8vZXhhbXBsZS5vcmcvcGVyc29uMScpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgSVJJKCdodHRwOi8veG1sbnMuY29tL2ZvYWYvMC4xL25hbWUnKSxcbiAgICAgICAgICAgICAgICAgICAgTGl0ZXJhbC5zdHJpbmcoJ0FsaWNlIFNtaXRoJylcbiAgICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICAgIGdyYXBoLmFkZCh0cmlwbGUpO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGlmIChjb250ZW50LmluY2x1ZGVzKCdmb2FmOmFnZScpIHx8IGNvbnRlbnQuaW5jbHVkZXMoJ2FnZScpKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFnZVRyaXBsZSA9IG5ldyBUcmlwbGUoXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgSVJJKCdodHRwOi8vZXhhbXBsZS5vcmcvcGVyc29uMScpLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IElSSSgnaHR0cDovL3htbG5zLmNvbS9mb2FmLzAuMS9hZ2UnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBMaXRlcmFsKCcyOCcsIG5ldyBJUkkoJ2h0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI2ludGVnZXInKSlcbiAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgICAgICAgICAgZ3JhcGguYWRkKGFnZVRyaXBsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIGlmIChjb250ZW50LmluY2x1ZGVzKCdleDp0ZXN0JykpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0cmlwbGUgPSBuZXcgVHJpcGxlKFxuICAgICAgICAgICAgICAgICAgICBuZXcgSVJJKCdodHRwOi8vZXhhbXBsZS5vcmcvdGVzdCcpLFxuICAgICAgICAgICAgICAgICAgICBuZXcgSVJJKCdodHRwOi8vZXhhbXBsZS5vcmcvcHJvcCcpLFxuICAgICAgICAgICAgICAgICAgICBMaXRlcmFsLnN0cmluZygndmFsdWUnKVxuICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgZ3JhcGguYWRkKHRyaXBsZSk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGNvbnRlbnQgPT09ICdUaGlzIGlzIG5vdCB2YWxpZCBSREYgYXQgYWxsIScpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBpc1N1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBpc0ZhaWx1cmU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGdldEVycm9yOiAoKSA9PiAnUGFyc2UgZXJyb3I6IGludmFsaWQgc3ludGF4J1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaXNTdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdldFZhbHVlOiAoKSA9PiAoe1xuICAgICAgICAgICAgICAgICAgICBncmFwaCxcbiAgICAgICAgICAgICAgICAgICAgdHJpcGxlQ291bnQ6IGdyYXBoLnNpemUoKSxcbiAgICAgICAgICAgICAgICAgICAgbmFtZXNwYWNlczogeyBcbiAgICAgICAgICAgICAgICAgICAgICAgICdmb2FmJzogJ2h0dHA6Ly94bWxucy5jb20vZm9hZi8wLjEvJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICdleCc6ICdodHRwOi8vZXhhbXBsZS5vcmcvJyBcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgd2FybmluZ3M6IFtdXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIGl0KCdzaG91bGQgcGFyc2UgVHVydGxlIGZvcm1hdCcsICgpID0+IHtcbiAgICAgICAgY29uc3QgdHVydGxlQ29udGVudCA9IGBcbiAgICAgICAgICAgIEBwcmVmaXggZm9hZjogPGh0dHA6Ly94bWxucy5jb20vZm9hZi8wLjEvPiAuXG4gICAgICAgICAgICBAcHJlZml4IGV4OiA8aHR0cDovL2V4YW1wbGUub3JnLz4gLlxuICAgICAgICAgICAgXG4gICAgICAgICAgICBleDpwZXJzb24xIGZvYWY6bmFtZSBcIkFsaWNlIFNtaXRoXCIgO1xuICAgICAgICAgICAgICAgICAgICAgICBmb2FmOmFnZSBcIjI4XCJeXjxodHRwOi8vd3d3LnczLm9yZy8yMDAxL1hNTFNjaGVtYSNpbnRlZ2VyPiAuXG4gICAgICAgIGA7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSBwYXJzZXIucGFyc2UodHVydGxlQ29udGVudCwgeyBmb3JtYXQ6ICd0dXJ0bGUnIH0pO1xuICAgICAgICBcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBwYXJzZVJlc3VsdCA9IHJlc3VsdC5nZXRWYWx1ZSgpO1xuICAgICAgICBleHBlY3QocGFyc2VSZXN1bHQudHJpcGxlQ291bnQpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgICAgZXhwZWN0KHBhcnNlUmVzdWx0LmdyYXBoLnNpemUoKSkudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgICBleHBlY3QocGFyc2VSZXN1bHQubmFtZXNwYWNlc1snZm9hZiddKS50b0JlKCdodHRwOi8veG1sbnMuY29tL2ZvYWYvMC4xLycpO1xuICAgIH0pO1xuICAgIFxuICAgIGl0KCdzaG91bGQgcGFyc2UgTi1UcmlwbGVzIGZvcm1hdCcsICgpID0+IHtcbiAgICAgICAgY29uc3QgbnRyaXBsZXNDb250ZW50ID0gYFxuICAgICAgICAgICAgPGh0dHA6Ly9leGFtcGxlLm9yZy9wZXJzb24xPiA8aHR0cDovL3htbG5zLmNvbS9mb2FmLzAuMS9uYW1lPiBcIkJvYiBKb2huc29uXCIgLlxuICAgICAgICAgICAgPGh0dHA6Ly9leGFtcGxlLm9yZy9wZXJzb24xPiA8aHR0cDovL3htbG5zLmNvbS9mb2FmLzAuMS9hZ2U+IFwiMzJcIl5ePGh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hI2ludGVnZXI+IC5cbiAgICAgICAgYDtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlci5wYXJzZShudHJpcGxlc0NvbnRlbnQsIHsgZm9ybWF0OiAnbi10cmlwbGVzJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChyZXN1bHQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcGFyc2VSZXN1bHQgPSByZXN1bHQuZ2V0VmFsdWUoKTtcbiAgICAgICAgZXhwZWN0KHBhcnNlUmVzdWx0LnRyaXBsZUNvdW50KS50b0JlKDIpO1xuICAgICAgICBleHBlY3QocGFyc2VSZXN1bHQuZ3JhcGguc2l6ZSgpKS50b0JlKDIpO1xuICAgIH0pO1xuICAgIFxuICAgIGl0KCdzaG91bGQgYXV0by1kZXRlY3QgZm9ybWF0JywgKCkgPT4ge1xuICAgICAgICBjb25zdCB0dXJ0bGVDb250ZW50ID0gJ0BwcmVmaXggZXg6IDxodHRwOi8vZXhhbXBsZS5vcmcvPiAuIGV4OnRlc3QgZXg6cHJvcCBcInZhbHVlXCIgLic7XG4gICAgICAgIFxuICAgICAgICBjb25zdCByZXN1bHQgPSBwYXJzZXIucGFyc2UodHVydGxlQ29udGVudCk7IC8vIE5vIGZvcm1hdCBzcGVjaWZpZWRcbiAgICAgICAgXG4gICAgICAgIGV4cGVjdChyZXN1bHQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICBcbiAgICAgICAgY29uc3QgcGFyc2VSZXN1bHQgPSByZXN1bHQuZ2V0VmFsdWUoKTtcbiAgICAgICAgZXhwZWN0KHBhcnNlUmVzdWx0LnRyaXBsZUNvdW50KS50b0JlKDEpO1xuICAgIH0pO1xuICAgIFxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHBhcnNpbmcgZXJyb3JzIGdyYWNlZnVsbHknLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGludmFsaWRDb250ZW50ID0gJ1RoaXMgaXMgbm90IHZhbGlkIFJERiBhdCBhbGwhJztcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IHBhcnNlci5wYXJzZShpbnZhbGlkQ29udGVudCwgeyBcbiAgICAgICAgICAgIGZvcm1hdDogJ3R1cnRsZScsXG4gICAgICAgICAgICBzdHJpY3RNb2RlOiBmYWxzZSBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTaG91bGQgZWl0aGVyIHN1Y2NlZWQgd2l0aCB3YXJuaW5ncyBvciBmYWlsIGdyYWNlZnVsbHlcbiAgICAgICAgaWYgKHJlc3VsdC5pc0ZhaWx1cmUpIHtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZ2V0RXJyb3IoKSkudG9Db250YWluKCdQYXJzZScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgcGFyc2VSZXN1bHQgPSByZXN1bHQuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgIGV4cGVjdChwYXJzZVJlc3VsdC53YXJuaW5ncykudG9CZURlZmluZWQoKTtcbiAgICAgICAgfVxuICAgIH0pO1xufSk7Il0sInZlcnNpb24iOjN9