6b08b7f7d321f2a6b1663afa8d5f5a87
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
// Mock DIContainer
jest.mock('../../../../src/infrastructure/container/DIContainer');
// Mock Notice
jest.mock('obsidian', () => {
    const actual = jest.requireActual('obsidian');
    return Object.assign(Object.assign({}, actual), { Notice: jest.fn(), Setting: jest.fn().mockImplementation(() => ({
            setName: jest.fn().mockReturnThis(),
            setDesc: jest.fn().mockReturnThis(),
            addText: jest.fn().mockReturnThis(),
            addDropdown: jest.fn().mockReturnThis(),
            addToggle: jest.fn().mockReturnThis(),
            addTextArea: jest.fn().mockReturnThis(),
            addButton: jest.fn().mockReturnThis()
        })) });
});
const obsidian_1 = require("obsidian");
const CreateAssetModal_1 = require("../../../../src/presentation/modals/CreateAssetModal");
const DIContainer_1 = require("../../../../src/infrastructure/container/DIContainer");
// Add Obsidian DOM extensions to HTMLElement prototype
beforeAll(() => {
    HTMLElement.prototype.createEl = jest.fn().mockImplementation((tag, attrs) => {
        const element = document.createElement(tag);
        if (attrs === null || attrs === void 0 ? void 0 : attrs.text)
            element.textContent = attrs.text;
        if (attrs === null || attrs === void 0 ? void 0 : attrs.cls)
            element.className = attrs.cls;
        return element;
    });
    HTMLElement.prototype.createDiv = jest.fn().mockImplementation((attrs) => {
        const element = document.createElement('div');
        if (attrs === null || attrs === void 0 ? void 0 : attrs.cls)
            element.className = attrs.cls;
        return element;
    });
    HTMLElement.prototype.empty = jest.fn().mockImplementation(() => {
        // Mock empty implementation - in real Obsidian this clears the element
    });
});
describe('CreateAssetModal', () => {
    let app;
    let modal;
    let mockCreateAssetUseCase;
    let mockContainer;
    beforeEach(() => {
        // Setup app mock with vault and metadataCache
        app = new obsidian_1.App();
        app.vault = {
            getMarkdownFiles: jest.fn().mockReturnValue([]),
            read: jest.fn()
        };
        app.metadataCache = {
            getFileCache: jest.fn().mockReturnValue(null)
        };
        // Setup CreateAssetUseCase mock
        mockCreateAssetUseCase = {
            execute: jest.fn()
        };
        // Setup DIContainer mock
        mockContainer = {
            getCreateAssetUseCase: jest.fn().mockReturnValue(mockCreateAssetUseCase),
            getInstance: jest.fn().mockReturnThis(),
            resolve: jest.fn().mockImplementation((token) => {
                // Return empty mock repositories
                return {};
            })
        };
        DIContainer_1.DIContainer.getInstance.mockReturnValue(mockContainer);
        // Create modal instance
        modal = new CreateAssetModal_1.CreateAssetModal(app);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe('Modal Initialization', () => {
        test('should create modal with default values', () => {
            expect(modal).toBeDefined();
            expect(modal.app).toBe(app);
        });
        test('should initialize with DIContainer', () => {
            expect(DIContainer_1.DIContainer.getInstance).toHaveBeenCalled();
            expect(mockContainer.getCreateAssetUseCase).toHaveBeenCalled();
        });
        test('should have default asset values', () => {
            expect(modal.assetTitle).toBe('');
            expect(modal.assetClass).toBe('exo__Asset');
            expect(modal.assetOntology).toBe('');
            expect(modal.propertyValues).toBeInstanceOf(Map);
        });
        test('should initialize empty properties list', () => {
            expect(modal.properties).toEqual([]);
            expect(modal.propertiesContainer).toBeNull();
        });
    });
    describe('Modal Opening', () => {
        test('should setup UI elements when opened', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockContentEl = document.createElement('div');
            modal.contentEl = mockContentEl;
            yield modal.onOpen();
            expect(mockContentEl.createEl).toHaveBeenCalledWith('h2', { text: 'Create ExoAsset' });
        }));
        test('should setup all required fields', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockContentEl = document.createElement('div');
            modal.contentEl = mockContentEl;
            const setupTitleFieldSpy = jest.spyOn(modal, 'setupTitleField');
            const setupClassFieldSpy = jest.spyOn(modal, 'setupClassField');
            const setupOntologyFieldSpy = jest.spyOn(modal, 'setupOntologyField');
            const setupPropertiesSectionSpy = jest.spyOn(modal, 'setupPropertiesSection');
            const setupActionButtonsSpy = jest.spyOn(modal, 'setupActionButtons');
            yield modal.onOpen();
            expect(setupTitleFieldSpy).toHaveBeenCalled();
            expect(setupClassFieldSpy).toHaveBeenCalled();
            expect(setupOntologyFieldSpy).toHaveBeenCalled();
            expect(setupPropertiesSectionSpy).toHaveBeenCalled();
            expect(setupActionButtonsSpy).toHaveBeenCalled();
        }));
        test('should handle errors during modal opening gracefully', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockContentEl = document.createElement('div');
            modal.contentEl = mockContentEl;
            // Mock setupClassField to throw error
            jest.spyOn(modal, 'setupClassField').mockRejectedValue(new Error('Setup failed'));
            yield expect(modal.onOpen()).rejects.toThrow('Setup failed');
        }));
    });
    describe('Title Field Setup', () => {
        test('should setup title field correctly', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const containerEl = document.createElement('div');
            yield modal.setupTitleField(containerEl);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        }));
        test('should update assetTitle when title changes', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const containerEl = document.createElement('div');
            yield modal.setupTitleField(containerEl);
            // Simulate title change
            const testTitle = 'Test Asset Title';
            modal.assetTitle = testTitle;
            expect(modal.assetTitle).toBe(testTitle);
        }));
        test('should handle long titles', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const containerEl = document.createElement('div');
            yield modal.setupTitleField(containerEl);
            const longTitle = 'A'.repeat(1000);
            modal.assetTitle = longTitle;
            expect(modal.assetTitle).toBe(longTitle);
        }));
        test('should handle special characters in titles', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const containerEl = document.createElement('div');
            yield modal.setupTitleField(containerEl);
            const specialTitle = 'Test!@#$%^&*()_+{}|:"<>?[]\\;\',./ Asset';
            modal.assetTitle = specialTitle;
            expect(modal.assetTitle).toBe(specialTitle);
        }));
    });
    describe('Class Field Setup', () => {
        test('should setup class field correctly', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const containerEl = document.createElement('div');
            yield modal.setupClassField(containerEl);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        }));
        test('should have default class value', () => {
            expect(modal.assetClass).toBe('exo__Asset');
        });
        test('should discover classes from vault files', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockFiles = [
                { basename: 'TestClass', name: 'TestClass.md' },
                { basename: 'AnotherClass', name: 'AnotherClass.md' }
            ];
            app.vault.getMarkdownFiles.mockReturnValue(mockFiles);
            app.metadataCache.getFileCache
                .mockReturnValueOnce({
                frontmatter: {
                    'exo__Instance_class': 'exo__Class',
                    'rdfs__label': 'Test Class'
                }
            })
                .mockReturnValueOnce({
                frontmatter: {
                    'exo__Instance_class': '[[exo__Class]]',
                    'rdfs__label': 'Another Class'
                }
            });
            const containerEl = document.createElement('div');
            yield modal.setupClassField(containerEl);
            expect(app.vault.getMarkdownFiles).toHaveBeenCalled();
            expect(app.metadataCache.getFileCache).toHaveBeenCalledTimes(2);
        }));
        test('should provide default classes when none found', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            app.vault.getMarkdownFiles.mockReturnValue([]);
            const containerEl = document.createElement('div');
            yield modal.setupClassField(containerEl);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        }));
        test('should handle vault access errors', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            app.vault.getMarkdownFiles.mockImplementation(() => {
                throw new Error('Vault access error');
            });
            const containerEl = document.createElement('div');
            yield expect(modal.setupClassField(containerEl)).rejects.toThrow('Vault access error');
        }));
        test('should update properties when class changes', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const containerEl = document.createElement('div');
            const updatePropertiesForClassSpy = jest.spyOn(modal, 'updatePropertiesForClass').mockResolvedValue(undefined);
            yield modal.setupClassField(containerEl);
            // Simulate class change
            const newClass = 'exo__Task';
            modal.assetClass = newClass;
            expect(modal.assetClass).toBe(newClass);
        }));
    });
    describe('Ontology Field Setup', () => {
        test('should setup ontology field correctly', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const containerEl = document.createElement('div');
            yield modal.setupOntologyField(containerEl);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        }));
        test('should discover ontologies from vault files', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockFiles = [
                { name: '!test-ontology.md', basename: '!test-ontology' },
                { name: '!another-onto.md', basename: '!another-onto' }
            ];
            app.vault.getMarkdownFiles.mockReturnValue(mockFiles);
            app.metadataCache.getFileCache
                .mockReturnValueOnce({
                frontmatter: {
                    'exo__Ontology_prefix': 'test',
                    'rdfs__label': 'Test Ontology'
                }
            })
                .mockReturnValueOnce({
                frontmatter: {
                    'exo__Ontology_prefix': 'another',
                    'rdfs__label': 'Another Ontology'
                }
            });
            const containerEl = document.createElement('div');
            yield modal.setupOntologyField(containerEl);
            expect(app.vault.getMarkdownFiles).toHaveBeenCalled();
        }));
        test('should handle empty ontology list', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            app.vault.getMarkdownFiles.mockReturnValue([]);
            const containerEl = document.createElement('div');
            yield modal.setupOntologyField(containerEl);
            expect(containerEl).toBeDefined();
        }));
        test('should set default ontology correctly', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            app.vault.getMarkdownFiles.mockReturnValue([]);
            const containerEl = document.createElement('div');
            yield modal.setupOntologyField(containerEl);
            expect(modal.assetOntology).toBe('exo');
        }));
    });
    describe('Properties Section Setup', () => {
        test('should setup properties section correctly', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const containerEl = document.createElement('div');
            yield modal.setupPropertiesSection(containerEl);
            expect(containerEl.createEl).toHaveBeenCalledWith('h3', {
                text: 'Properties',
                cls: 'exocortex-properties-header'
            });
            expect(containerEl.createDiv).toHaveBeenCalledWith({
                cls: 'exocortex-properties-container'
            });
        }));
        test('should update properties for default class', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const containerEl = document.createElement('div');
            const updatePropertiesForClassSpy = jest.spyOn(modal, 'updatePropertiesForClass').mockResolvedValue(undefined);
            yield modal.setupPropertiesSection(containerEl);
            expect(updatePropertiesForClassSpy).toHaveBeenCalledWith('exo__Asset');
        }));
        test('should create properties container with correct class', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const containerEl = document.createElement('div');
            yield modal.setupPropertiesSection(containerEl);
            expect(containerEl.createDiv).toHaveBeenCalledWith({
                cls: 'exocortex-properties-container'
            });
        }));
    });
    describe('Properties Management', () => {
        beforeEach(() => {
            const mockPropertiesContainer = document.createElement('div');
            mockPropertiesContainer.empty = jest.fn();
            mockPropertiesContainer.createEl = jest.fn().mockReturnValue(document.createElement('p'));
            modal.propertiesContainer = mockPropertiesContainer;
        });
        test('should clear existing properties when updating for new class', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            modal.propertyValues.set('test', 'value');
            app.vault.getMarkdownFiles.mockReturnValue([]);
            yield modal.updatePropertiesForClass('exo__Task');
            expect(modal.propertiesContainer.empty).toHaveBeenCalled();
            expect(modal.propertyValues.size).toBe(0);
        }));
        test('should add default properties for exo__Asset class', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            app.vault.getMarkdownFiles.mockReturnValue([]);
            yield modal.updatePropertiesForClass('exo__Asset');
            expect(modal.properties).toHaveLength(2); // description and tags
            expect(modal.properties[0].name).toBe('description');
            expect(modal.properties[1].name).toBe('tags');
        }));
        test('should discover properties from vault for specific class', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockFiles = [
                { basename: 'propertyName', name: 'propertyName.md' }
            ];
            app.vault.getMarkdownFiles.mockReturnValue(mockFiles);
            app.metadataCache.getFileCache.mockReturnValue({
                frontmatter: {
                    'exo__Instance_class': 'exo__Property',
                    'rdfs__domain': 'TestClass',
                    'rdfs__label': 'Test Property',
                    'rdfs__comment': 'A test property',
                    'rdfs__range': 'string',
                    'exo__Property_isRequired': true
                }
            });
            yield modal.updatePropertiesForClass('TestClass');
            expect(modal.properties).toHaveLength(1);
            expect(modal.properties[0].name).toBe('propertyName');
            expect(modal.properties[0].isRequired).toBe(true);
        }));
        test('should handle properties with array domains', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockFiles = [
                { basename: 'multiDomainProp', name: 'multiDomainProp.md' }
            ];
            app.vault.getMarkdownFiles.mockReturnValue(mockFiles);
            app.metadataCache.getFileCache.mockReturnValue({
                frontmatter: {
                    'exo__Instance_class': 'exo__Property',
                    'rdfs__domain': ['TestClass', 'AnotherClass'],
                    'rdfs__label': 'Multi Domain Property',
                    'rdfs__range': 'string'
                }
            });
            yield modal.updatePropertiesForClass('TestClass');
            expect(modal.properties).toHaveLength(1);
            expect(modal.properties[0].name).toBe('multiDomainProp');
        }));
        test('should map different ranges to correct types', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const containerEl = document.createElement('div');
            modal.propertiesContainer = containerEl;
            // Test different range mappings
            expect(modal.mapRangeToType('select')).toBe('enum');
            expect(modal.mapRangeToType('boolean')).toBe('boolean');
            expect(modal.mapRangeToType('date')).toBe('date');
            expect(modal.mapRangeToType('integer')).toBe('number');
            expect(modal.mapRangeToType('string[]')).toBe('array');
            expect(modal.mapRangeToType('text')).toBe('text');
            expect(modal.mapRangeToType('unknown')).toBe('string');
        }));
        test('should handle enum properties with options', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockFiles = [
                { basename: 'statusProp', name: 'statusProp.md' }
            ];
            app.vault.getMarkdownFiles.mockReturnValue(mockFiles);
            app.metadataCache.getFileCache.mockReturnValue({
                frontmatter: {
                    'exo__Instance_class': 'exo__Property',
                    'rdfs__domain': 'TestClass',
                    'rdfs__range': 'select',
                    'exo__Property_options': ['active', 'inactive', 'pending']
                }
            });
            yield modal.updatePropertiesForClass('TestClass');
            expect(modal.properties).toHaveLength(1);
            expect(modal.properties[0].type).toBe('enum');
            expect(modal.properties[0].options).toEqual(['active', 'inactive', 'pending']);
        }));
        test('should show no properties message when none found', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            app.vault.getMarkdownFiles.mockReturnValue([]);
            yield modal.updatePropertiesForClass('UnknownClass');
            expect(modal.propertiesContainer.createEl).toHaveBeenCalledWith('p', {
                text: 'No specific properties for this class',
                cls: 'exocortex-no-properties'
            });
        }));
    });
    describe('Property Field Creation', () => {
        let mockPropertiesContainer;
        beforeEach(() => {
            mockPropertiesContainer = document.createElement('div');
            modal.propertiesContainer = mockPropertiesContainer;
        });
        test('should create text field for string property', () => {
            const property = {
                name: 'description',
                label: 'Description',
                type: 'string',
                isRequired: false,
                description: 'Asset description'
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test('should create text area field for text property', () => {
            const property = {
                name: 'notes',
                label: 'Notes',
                type: 'text',
                isRequired: false,
                description: 'Asset notes'
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test('should create enum field for enum property', () => {
            const property = {
                name: 'status',
                label: 'Status',
                type: 'enum',
                options: ['active', 'inactive'],
                isRequired: true,
                description: 'Asset status'
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test('should create boolean field for boolean property', () => {
            const property = {
                name: 'completed',
                label: 'Completed',
                type: 'boolean',
                isRequired: false,
                description: 'Whether task is completed'
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test('should create date field for date property', () => {
            const property = {
                name: 'dueDate',
                label: 'Due Date',
                type: 'date',
                isRequired: false,
                description: 'Task due date'
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test('should create number field for number property', () => {
            const property = {
                name: 'effort',
                label: 'Effort',
                type: 'number',
                isRequired: false,
                description: 'Estimated effort in hours'
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test('should create array field for array property', () => {
            const property = {
                name: 'tags',
                label: 'Tags',
                type: 'array',
                isRequired: false,
                description: 'Asset tags'
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test('should show required indicator for required fields', () => {
            const property = {
                name: 'title',
                label: 'Title',
                type: 'string',
                isRequired: true,
                description: 'Asset title'
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
    });
    describe('Individual Field Type Tests', () => {
        let mockSetting;
        beforeEach(() => {
            mockSetting = {
                addDropdown: jest.fn().mockImplementation((callback) => {
                    const dropdown = { addOption: jest.fn(), onChange: jest.fn() };
                    callback(dropdown);
                    return mockSetting;
                }),
                addToggle: jest.fn().mockImplementation((callback) => {
                    const toggle = { onChange: jest.fn() };
                    callback(toggle);
                    return mockSetting;
                }),
                addText: jest.fn().mockImplementation((callback) => {
                    const text = {
                        setPlaceholder: jest.fn().mockReturnThis(),
                        onChange: jest.fn(),
                        inputEl: { type: 'text' }
                    };
                    callback(text);
                    return mockSetting;
                }),
                addTextArea: jest.fn().mockImplementation((callback) => {
                    const textArea = {
                        setPlaceholder: jest.fn().mockReturnThis(),
                        onChange: jest.fn()
                    };
                    callback(textArea);
                    return mockSetting;
                })
            };
        });
        test('should create enum field with all options', () => {
            const property = {
                name: 'priority',
                label: 'Priority',
                type: 'enum',
                options: ['low', 'medium', 'high'],
                isRequired: false
            };
            modal.createEnumField(mockSetting, property);
            expect(mockSetting.addDropdown).toHaveBeenCalled();
        });
        test('should handle enum field selection', () => {
            const property = {
                name: 'priority',
                label: 'Priority',
                type: 'enum',
                options: ['low', 'medium', 'high'],
                isRequired: false
            };
            modal.createEnumField(mockSetting, property);
            // Simulate selection
            modal.propertyValues.set('priority', 'high');
            expect(modal.propertyValues.get('priority')).toBe('high');
        });
        test('should create boolean field with toggle', () => {
            const property = {
                name: 'active',
                label: 'Active',
                type: 'boolean',
                isRequired: false
            };
            modal.createBooleanField(mockSetting, property);
            expect(mockSetting.addToggle).toHaveBeenCalled();
        });
        test('should handle boolean field changes', () => {
            const property = {
                name: 'active',
                label: 'Active',
                type: 'boolean',
                isRequired: false
            };
            modal.createBooleanField(mockSetting, property);
            // Simulate toggle
            modal.propertyValues.set('active', true);
            expect(modal.propertyValues.get('active')).toBe(true);
        });
        test('should create date field with correct input type', () => {
            const property = {
                name: 'dueDate',
                label: 'Due Date',
                type: 'date',
                isRequired: false
            };
            modal.createDateField(mockSetting, property);
            expect(mockSetting.addText).toHaveBeenCalled();
        });
        test('should create number field with validation', () => {
            const property = {
                name: 'count',
                label: 'Count',
                type: 'number',
                isRequired: false
            };
            modal.createNumberField(mockSetting, property);
            expect(mockSetting.addText).toHaveBeenCalled();
        });
        test('should create text area field', () => {
            const property = {
                name: 'description',
                label: 'Description',
                type: 'text',
                isRequired: false
            };
            modal.createTextAreaField(mockSetting, property);
            expect(mockSetting.addTextArea).toHaveBeenCalled();
        });
        test('should create array field for tags', () => {
            const property = {
                name: 'tags',
                label: 'Tags',
                type: 'array',
                isRequired: false
            };
            modal.createArrayField(mockSetting, property);
            expect(mockSetting.addText).toHaveBeenCalled();
        });
        test('should create basic text field as fallback', () => {
            const property = {
                name: 'generic',
                label: 'Generic',
                type: 'unknown',
                isRequired: false
            };
            modal.createTextField(mockSetting, property);
            expect(mockSetting.addText).toHaveBeenCalled();
        });
    });
    describe('Action Buttons Setup', () => {
        test('should setup create button', () => {
            const containerEl = document.createElement('div');
            modal.setupActionButtons(containerEl);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test('should call createAsset when create button is clicked', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const createAssetSpy = jest.spyOn(modal, 'createAsset').mockResolvedValue(undefined);
            const containerEl = document.createElement('div');
            modal.setupActionButtons(containerEl);
            // The button click is handled through the Setting mock
            expect(obsidian_1.Setting).toHaveBeenCalled();
        }));
    });
    describe('Asset Creation', () => {
        test('should call createAssetUseCase.execute when creating asset', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockCreateAssetUseCase.execute.mockResolvedValue({
                success: true,
                assetId: 'test-id',
                message: 'Asset created successfully'
            });
            modal.assetTitle = 'Test Asset';
            modal.assetClass = 'exo__Task';
            modal.assetOntology = 'exo';
            modal.propertyValues.set('priority', 'high');
            const closeSpy = jest.spyOn(modal, 'close').mockImplementation(() => { });
            yield modal.createAsset();
            expect(mockCreateAssetUseCase.execute).toHaveBeenCalledWith({
                title: 'Test Asset',
                className: 'exo__Task',
                ontologyPrefix: 'exo',
                properties: {
                    priority: 'high'
                }
            });
            expect(obsidian_1.Notice).toHaveBeenCalledWith('Asset created successfully');
            expect(closeSpy).toHaveBeenCalled();
        }));
        test('should show error notice when asset creation fails', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockCreateAssetUseCase.execute.mockResolvedValue({
                success: false,
                assetId: '',
                message: 'Creation failed'
            });
            modal.assetTitle = 'Test Asset';
            yield modal.createAsset();
            expect(obsidian_1.Notice).toHaveBeenCalledWith('Failed to create asset');
        }));
        test('should handle errors during asset creation', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const error = new Error('Network error');
            mockCreateAssetUseCase.execute.mockRejectedValue(error);
            modal.assetTitle = 'Test Asset';
            yield modal.createAsset();
            expect(obsidian_1.Notice).toHaveBeenCalledWith('Error: Network error');
        }));
        test('should convert property values to plain object', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockCreateAssetUseCase.execute.mockResolvedValue({
                success: true,
                assetId: 'test-id',
                message: 'Success'
            });
            modal.assetTitle = 'Test Asset';
            modal.propertyValues.set('prop1', 'value1');
            modal.propertyValues.set('prop2', 'value2');
            yield modal.createAsset();
            expect(mockCreateAssetUseCase.execute).toHaveBeenCalledWith(expect.objectContaining({
                properties: {
                    prop1: 'value1',
                    prop2: 'value2'
                }
            }));
        }));
        test('should handle empty property values', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockCreateAssetUseCase.execute.mockResolvedValue({
                success: true,
                assetId: 'test-id',
                message: 'Success'
            });
            modal.assetTitle = 'Test Asset';
            yield modal.createAsset();
            expect(mockCreateAssetUseCase.execute).toHaveBeenCalledWith(expect.objectContaining({
                properties: {}
            }));
        }));
    });
    describe('Modal Cleanup', () => {
        test('should clear content on close', () => {
            const mockContentEl = document.createElement('div');
            const emptySpy = jest.spyOn(mockContentEl, 'empty');
            modal.contentEl = mockContentEl;
            modal.onClose();
            expect(emptySpy).toHaveBeenCalled();
        });
        test('should handle DOM cleanup fallback', () => {
            const mockContentEl = document.createElement('div');
            // Remove the empty method to test fallback
            delete mockContentEl.empty;
            const child = document.createElement('div');
            mockContentEl.appendChild(child);
            modal.contentEl = mockContentEl;
            modal.onClose();
            // Should still complete without error
            expect(mockContentEl.children.length).toBe(0);
        });
    });
    describe('Input Validation', () => {
        test('should handle empty title field', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockCreateAssetUseCase.execute.mockRejectedValue(new Error('Asset title is required'));
            modal.assetTitle = '';
            yield modal.createAsset();
            expect(obsidian_1.Notice).toHaveBeenCalledWith('Error: Asset title is required');
        }));
        test('should handle missing class field', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockCreateAssetUseCase.execute.mockRejectedValue(new Error('Asset class is required'));
            modal.assetTitle = 'Test';
            modal.assetClass = '';
            yield modal.createAsset();
            expect(obsidian_1.Notice).toHaveBeenCalledWith('Error: Asset class is required');
        }));
        test('should handle missing ontology field', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockCreateAssetUseCase.execute.mockRejectedValue(new Error('Ontology prefix is required'));
            modal.assetTitle = 'Test';
            modal.assetOntology = '';
            yield modal.createAsset();
            expect(obsidian_1.Notice).toHaveBeenCalledWith('Error: Ontology prefix is required');
        }));
        test('should handle whitespace-only title', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockCreateAssetUseCase.execute.mockRejectedValue(new Error('Asset title is required'));
            modal.assetTitle = '   \t\n   ';
            yield modal.createAsset();
            expect(obsidian_1.Notice).toHaveBeenCalledWith('Error: Asset title is required');
        }));
    });
    describe('Property Value Handling', () => {
        test('should handle array values correctly', () => {
            const property = {
                name: 'tags',
                label: 'Tags',
                type: 'array',
                isRequired: false,
                description: 'Asset tags'
            };
            // Simulate array input processing
            modal.propertyValues.set(property.name, ['tag1', 'tag2', 'tag3']);
            const values = modal.propertyValues.get('tags');
            expect(values).toEqual(['tag1', 'tag2', 'tag3']);
        });
        test('should handle wiki link values correctly', () => {
            const property = {
                name: 'relatedTasks',
                label: 'Related Tasks',
                type: 'array',
                isRequired: false,
                description: 'Related task links'
            };
            // Simulate wiki link processing
            modal.propertyValues.set(property.name, ['[[Task 1]]', '[[Task 2]]']);
            const values = modal.propertyValues.get('relatedTasks');
            expect(values).toEqual(['[[Task 1]]', '[[Task 2]]']);
        });
        test('should handle number parsing correctly', () => {
            const property = {
                name: 'effort',
                label: 'Effort',
                type: 'number',
                isRequired: false,
                description: 'Effort in hours'
            };
            // Simulate number input
            modal.propertyValues.set(property.name, 42);
            const value = modal.propertyValues.get('effort');
            expect(value).toBe(42);
            expect(typeof value).toBe('number');
        });
        test('should handle invalid number input', () => {
            const property = {
                name: 'effort',
                label: 'Effort',
                type: 'number',
                isRequired: false
            };
            // Should not set invalid numbers
            const invalidNumber = 'not-a-number';
            if (isNaN(parseFloat(invalidNumber))) {
                // Property should not be set
                expect(modal.propertyValues.has('effort')).toBe(false);
            }
        });
        test('should clear property values when empty', () => {
            modal.propertyValues.set('test', 'value');
            // Simulate clearing a field
            modal.propertyValues.delete('test');
            expect(modal.propertyValues.has('test')).toBe(false);
        });
        test('should handle date input validation', () => {
            const property = {
                name: 'dueDate',
                label: 'Due Date',
                type: 'date',
                isRequired: false
            };
            // Valid date
            modal.propertyValues.set(property.name, '2024-12-31');
            expect(modal.propertyValues.get('dueDate')).toBe('2024-12-31');
            // Invalid date should not be set
            const invalidDate = 'not-a-date';
            if (isNaN(Date.parse(invalidDate))) {
                modal.propertyValues.delete('dueDate');
            }
            expect(modal.propertyValues.has('dueDate')).toBe(false);
        });
        test('should handle boolean toggle values', () => {
            const property = {
                name: 'active',
                label: 'Active',
                type: 'boolean',
                isRequired: false
            };
            // Test true value
            modal.propertyValues.set(property.name, true);
            expect(modal.propertyValues.get('active')).toBe(true);
            // Test false value
            modal.propertyValues.set(property.name, false);
            expect(modal.propertyValues.get('active')).toBe(false);
        });
        test('should handle complex array parsing', () => {
            const input = '[[Link 1]], [[Link 2]], simple, "quoted item"';
            const links = input.match(/\[\[([^\]]+)\]\]/g) || [];
            const items = input.split(',').map(s => s.trim()).filter(s => s);
            if (links.length > 0) {
                modal.propertyValues.set('test', links);
            }
            else {
                modal.propertyValues.set('test', items);
            }
            expect(modal.propertyValues.get('test')).toEqual(['[[Link 1]]', '[[Link 2]]']);
        });
    });
    describe('Container Cleanup Scenarios', () => {
        test('should handle properties container cleanup with Obsidian method', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockContainer = document.createElement('div');
            mockContainer.empty = jest.fn();
            modal.propertiesContainer = mockContainer;
            yield modal.updatePropertiesForClass('TestClass');
            expect(mockContainer.empty).toHaveBeenCalled();
        }));
        test('should handle properties container cleanup with DOM fallback', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockContainer = document.createElement('div');
            const child1 = document.createElement('div');
            const child2 = document.createElement('div');
            mockContainer.appendChild(child1);
            mockContainer.appendChild(child2);
            // Remove Obsidian empty method to test fallback
            delete mockContainer.empty;
            modal.propertiesContainer = mockContainer;
            app.vault.getMarkdownFiles.mockReturnValue([]);
            yield modal.updatePropertiesForClass('TestClass');
            expect(mockContainer.children.length).toBe(1); // Should have the "no properties" message
        }));
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvdW5pdC9wcmVzZW50YXRpb24vbW9kYWxzL0NyZWF0ZUFzc2V0TW9kYWwudGVzdC50cyIsIm1hcHBpbmdzIjoiOzs7QUFLQSxtQkFBbUI7QUFDbkIsSUFBSSxDQUFDLElBQUksQ0FBQyxzREFBc0QsQ0FBQyxDQUFDO0FBRWxFLGNBQWM7QUFDZCxJQUFJLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxHQUFHLEVBQUU7SUFDekIsTUFBTSxNQUFNLEdBQUcsSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQztJQUM5Qyx1Q0FDSyxNQUFNLEtBQ1QsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsRUFDakIsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1lBQzNDLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsY0FBYyxFQUFFO1lBQ25DLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsY0FBYyxFQUFFO1lBQ25DLE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsY0FBYyxFQUFFO1lBQ25DLFdBQVcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsY0FBYyxFQUFFO1lBQ3ZDLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsY0FBYyxFQUFFO1lBQ3JDLFdBQVcsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsY0FBYyxFQUFFO1lBQ3ZDLFNBQVMsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsY0FBYyxFQUFFO1NBQ3RDLENBQUMsQ0FBQyxJQUNIO0FBQ0osQ0FBQyxDQUFDLENBQUM7QUF4QkgsdUNBQWdEO0FBQ2hELDJGQUF3RjtBQUV4RixzRkFBbUY7QUFnQ25GLHVEQUF1RDtBQUN2RCxTQUFTLENBQUMsR0FBRyxFQUFF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QUFhLENBQUMsd0JBQXdCLENBQUMsV0FBVyxDQUFDLENBQUM7WUFFM0QsTUFBTSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsMENBQTBDO1FBQzNGLENBQUMsQ0FBQSxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9raXRlbGV2L0RvY3VtZW50cy9leG9jb3J0ZXgtb2JzaWRpYW4tcGx1Z2luL3Rlc3RzL3VuaXQvcHJlc2VudGF0aW9uL21vZGFscy9DcmVhdGVBc3NldE1vZGFsLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBDcmVhdGVBc3NldE1vZGFsIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL3ByZXNlbnRhdGlvbi9tb2RhbHMvQ3JlYXRlQXNzZXRNb2RhbCc7XG5pbXBvcnQgeyBDcmVhdGVBc3NldFVzZUNhc2UgfSBmcm9tICcuLi8uLi8uLi8uLi9zcmMvYXBwbGljYXRpb24vdXNlLWNhc2VzL0NyZWF0ZUFzc2V0VXNlQ2FzZSc7XG5pbXBvcnQgeyBESUNvbnRhaW5lciB9IGZyb20gJy4uLy4uLy4uLy4uL3NyYy9pbmZyYXN0cnVjdHVyZS9jb250YWluZXIvRElDb250YWluZXInO1xuXG4vLyBNb2NrIERJQ29udGFpbmVyXG5qZXN0Lm1vY2soJy4uLy4uLy4uLy4uL3NyYy9pbmZyYXN0cnVjdHVyZS9jb250YWluZXIvRElDb250YWluZXInKTtcblxuLy8gTW9jayBOb3RpY2Vcbmplc3QubW9jaygnb2JzaWRpYW4nLCAoKSA9PiB7XG4gIGNvbnN0IGFjdHVhbCA9IGplc3QucmVxdWlyZUFjdHVhbCgnb2JzaWRpYW4nKTtcbiAgcmV0dXJuIHtcbiAgICAuLi5hY3R1YWwsXG4gICAgTm90aWNlOiBqZXN0LmZuKCksXG4gICAgU2V0dGluZzogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xuICAgICAgc2V0TmFtZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICBzZXREZXNjOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGFkZFRleHQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgYWRkRHJvcGRvd246IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgYWRkVG9nZ2xlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGFkZFRleHRBcmVhOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGFkZEJ1dHRvbjogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKClcbiAgICB9KSlcbiAgfTtcbn0pO1xuXG4vLyBFeHRlbmQgSFRNTEVsZW1lbnQgdG8gaW5jbHVkZSBPYnNpZGlhbi1zcGVjaWZpYyBtZXRob2RzXG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudCB7XG4gICAgY3JlYXRlRWwodGFnOiBzdHJpbmcsIGF0dHJzPzogYW55KTogSFRNTEVsZW1lbnQ7XG4gICAgY3JlYXRlRGl2KGF0dHJzPzogYW55KTogSFRNTEVsZW1lbnQ7XG4gICAgZW1wdHkoKTogdm9pZDtcbiAgfVxufVxuXG4vLyBBZGQgT2JzaWRpYW4gRE9NIGV4dGVuc2lvbnMgdG8gSFRNTEVsZW1lbnQgcHJvdG90eXBlXG5iZWZvcmVBbGwoKCkgPT4ge1xuICBIVE1MRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlRWwgPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCh0YWc6IHN0cmluZywgYXR0cnM/OiBhbnkpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgIGlmIChhdHRycz8udGV4dCkgZWxlbWVudC50ZXh0Q29udGVudCA9IGF0dHJzLnRleHQ7XG4gICAgaWYgKGF0dHJzPy5jbHMpIGVsZW1lbnQuY2xhc3NOYW1lID0gYXR0cnMuY2xzO1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9KTtcblxuICBIVE1MRWxlbWVudC5wcm90b3R5cGUuY3JlYXRlRGl2ID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoYXR0cnM/OiBhbnkpID0+IHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgaWYgKGF0dHJzPy5jbHMpIGVsZW1lbnQuY2xhc3NOYW1lID0gYXR0cnMuY2xzO1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9KTtcblxuICBIVE1MRWxlbWVudC5wcm90b3R5cGUuZW1wdHkgPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAvLyBNb2NrIGVtcHR5IGltcGxlbWVudGF0aW9uIC0gaW4gcmVhbCBPYnNpZGlhbiB0aGlzIGNsZWFycyB0aGUgZWxlbWVudFxuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnQ3JlYXRlQXNzZXRNb2RhbCcsICgpID0+IHtcbiAgbGV0IGFwcDogQXBwO1xuICBsZXQgbW9kYWw6IENyZWF0ZUFzc2V0TW9kYWw7XG4gIGxldCBtb2NrQ3JlYXRlQXNzZXRVc2VDYXNlOiBqZXN0Lk1vY2tlZDxDcmVhdGVBc3NldFVzZUNhc2U+O1xuICBsZXQgbW9ja0NvbnRhaW5lcjogamVzdC5Nb2NrZWQ8RElDb250YWluZXI+O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIC8vIFNldHVwIGFwcCBtb2NrIHdpdGggdmF1bHQgYW5kIG1ldGFkYXRhQ2FjaGVcbiAgICBhcHAgPSBuZXcgQXBwKCk7XG4gICAgKGFwcCBhcyBhbnkpLnZhdWx0ID0ge1xuICAgICAgZ2V0TWFya2Rvd25GaWxlczogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbXSksXG4gICAgICByZWFkOiBqZXN0LmZuKClcbiAgICB9O1xuICAgIChhcHAgYXMgYW55KS5tZXRhZGF0YUNhY2hlID0ge1xuICAgICAgZ2V0RmlsZUNhY2hlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKG51bGwpXG4gICAgfTtcblxuICAgIC8vIFNldHVwIENyZWF0ZUFzc2V0VXNlQ2FzZSBtb2NrXG4gICAgbW9ja0NyZWF0ZUFzc2V0VXNlQ2FzZSA9IHtcbiAgICAgIGV4ZWN1dGU6IGplc3QuZm4oKVxuICAgIH0gYXMgYW55O1xuXG4gICAgLy8gU2V0dXAgRElDb250YWluZXIgbW9ja1xuICAgIG1vY2tDb250YWluZXIgPSB7XG4gICAgICBnZXRDcmVhdGVBc3NldFVzZUNhc2U6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUobW9ja0NyZWF0ZUFzc2V0VXNlQ2FzZSksXG4gICAgICBnZXRJbnN0YW5jZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICByZXNvbHZlOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCh0b2tlbjogc3RyaW5nKSA9PiB7XG4gICAgICAgIC8vIFJldHVybiBlbXB0eSBtb2NrIHJlcG9zaXRvcmllc1xuICAgICAgICByZXR1cm4ge307XG4gICAgICB9KVxuICAgIH0gYXMgYW55O1xuXG4gICAgKERJQ29udGFpbmVyLmdldEluc3RhbmNlIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG1vY2tDb250YWluZXIpO1xuXG4gICAgLy8gQ3JlYXRlIG1vZGFsIGluc3RhbmNlXG4gICAgbW9kYWwgPSBuZXcgQ3JlYXRlQXNzZXRNb2RhbChhcHApO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICB9KTtcblxuICBkZXNjcmliZSgnTW9kYWwgSW5pdGlhbGl6YXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBtb2RhbCB3aXRoIGRlZmF1bHQgdmFsdWVzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KG1vZGFsKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KG1vZGFsLmFwcCkudG9CZShhcHApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGluaXRpYWxpemUgd2l0aCBESUNvbnRhaW5lcicsICgpID0+IHtcbiAgICAgIGV4cGVjdChESUNvbnRhaW5lci5nZXRJbnN0YW5jZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tDb250YWluZXIuZ2V0Q3JlYXRlQXNzZXRVc2VDYXNlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBkZWZhdWx0IGFzc2V0IHZhbHVlcycsICgpID0+IHtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5hc3NldFRpdGxlKS50b0JlKCcnKTtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5hc3NldENsYXNzKS50b0JlKCdleG9fX0Fzc2V0Jyk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkuYXNzZXRPbnRvbG9neSkudG9CZSgnJyk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMpLnRvQmVJbnN0YW5jZU9mKE1hcCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaW5pdGlhbGl6ZSBlbXB0eSBwcm9wZXJ0aWVzIGxpc3QnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydGllcykudG9FcXVhbChbXSk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydGllc0NvbnRhaW5lcikudG9CZU51bGwoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ01vZGFsIE9wZW5pbmcnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHNldHVwIFVJIGVsZW1lbnRzIHdoZW4gb3BlbmVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NvbnRlbnRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgKG1vZGFsIGFzIGFueSkuY29udGVudEVsID0gbW9ja0NvbnRlbnRFbDtcblxuICAgICAgYXdhaXQgbW9kYWwub25PcGVuKCk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ29udGVudEVsLmNyZWF0ZUVsKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnaDInLCB7IHRleHQ6ICdDcmVhdGUgRXhvQXNzZXQnIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHNldHVwIGFsbCByZXF1aXJlZCBmaWVsZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQ29udGVudEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAobW9kYWwgYXMgYW55KS5jb250ZW50RWwgPSBtb2NrQ29udGVudEVsO1xuXG4gICAgICBjb25zdCBzZXR1cFRpdGxlRmllbGRTcHkgPSBqZXN0LnNweU9uKG1vZGFsIGFzIGFueSwgJ3NldHVwVGl0bGVGaWVsZCcpO1xuICAgICAgY29uc3Qgc2V0dXBDbGFzc0ZpZWxkU3B5ID0gamVzdC5zcHlPbihtb2RhbCBhcyBhbnksICdzZXR1cENsYXNzRmllbGQnKTtcbiAgICAgIGNvbnN0IHNldHVwT250b2xvZ3lGaWVsZFNweSA9IGplc3Quc3B5T24obW9kYWwgYXMgYW55LCAnc2V0dXBPbnRvbG9neUZpZWxkJyk7XG4gICAgICBjb25zdCBzZXR1cFByb3BlcnRpZXNTZWN0aW9uU3B5ID0gamVzdC5zcHlPbihtb2RhbCBhcyBhbnksICdzZXR1cFByb3BlcnRpZXNTZWN0aW9uJyk7XG4gICAgICBjb25zdCBzZXR1cEFjdGlvbkJ1dHRvbnNTcHkgPSBqZXN0LnNweU9uKG1vZGFsIGFzIGFueSwgJ3NldHVwQWN0aW9uQnV0dG9ucycpO1xuXG4gICAgICBhd2FpdCBtb2RhbC5vbk9wZW4oKTtcblxuICAgICAgZXhwZWN0KHNldHVwVGl0bGVGaWVsZFNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KHNldHVwQ2xhc3NGaWVsZFNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KHNldHVwT250b2xvZ3lGaWVsZFNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KHNldHVwUHJvcGVydGllc1NlY3Rpb25TcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChzZXR1cEFjdGlvbkJ1dHRvbnNTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZXJyb3JzIGR1cmluZyBtb2RhbCBvcGVuaW5nIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQ29udGVudEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAobW9kYWwgYXMgYW55KS5jb250ZW50RWwgPSBtb2NrQ29udGVudEVsO1xuXG4gICAgICAvLyBNb2NrIHNldHVwQ2xhc3NGaWVsZCB0byB0aHJvdyBlcnJvclxuICAgICAgamVzdC5zcHlPbihtb2RhbCBhcyBhbnksICdzZXR1cENsYXNzRmllbGQnKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1NldHVwIGZhaWxlZCcpKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KG1vZGFsLm9uT3BlbigpKS5yZWplY3RzLnRvVGhyb3coJ1NldHVwIGZhaWxlZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVGl0bGUgRmllbGQgU2V0dXAnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHNldHVwIHRpdGxlIGZpZWxkIGNvcnJlY3RseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBcbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnNldHVwVGl0bGVGaWVsZChjb250YWluZXJFbCk7XG5cbiAgICAgIGV4cGVjdChTZXR0aW5nKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdXBkYXRlIGFzc2V0VGl0bGUgd2hlbiB0aXRsZSBjaGFuZ2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGFpbmVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIFxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuc2V0dXBUaXRsZUZpZWxkKGNvbnRhaW5lckVsKTtcblxuICAgICAgLy8gU2ltdWxhdGUgdGl0bGUgY2hhbmdlXG4gICAgICBjb25zdCB0ZXN0VGl0bGUgPSAnVGVzdCBBc3NldCBUaXRsZSc7XG4gICAgICAobW9kYWwgYXMgYW55KS5hc3NldFRpdGxlID0gdGVzdFRpdGxlO1xuXG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkuYXNzZXRUaXRsZSkudG9CZSh0ZXN0VGl0bGUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBsb25nIHRpdGxlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS5zZXR1cFRpdGxlRmllbGQoY29udGFpbmVyRWwpO1xuXG4gICAgICBjb25zdCBsb25nVGl0bGUgPSAnQScucmVwZWF0KDEwMDApO1xuICAgICAgKG1vZGFsIGFzIGFueSkuYXNzZXRUaXRsZSA9IGxvbmdUaXRsZTtcblxuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLmFzc2V0VGl0bGUpLnRvQmUobG9uZ1RpdGxlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgc3BlY2lhbCBjaGFyYWN0ZXJzIGluIHRpdGxlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS5zZXR1cFRpdGxlRmllbGQoY29udGFpbmVyRWwpO1xuXG4gICAgICBjb25zdCBzcGVjaWFsVGl0bGUgPSAnVGVzdCFAIyQlXiYqKClfK3t9fDpcIjw+P1tdXFxcXDtcXCcsLi8gQXNzZXQnO1xuICAgICAgKG1vZGFsIGFzIGFueSkuYXNzZXRUaXRsZSA9IHNwZWNpYWxUaXRsZTtcblxuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLmFzc2V0VGl0bGUpLnRvQmUoc3BlY2lhbFRpdGxlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NsYXNzIEZpZWxkIFNldHVwJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBzZXR1cCBjbGFzcyBmaWVsZCBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250YWluZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgXG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS5zZXR1cENsYXNzRmllbGQoY29udGFpbmVyRWwpO1xuXG4gICAgICBleHBlY3QoU2V0dGluZykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhdmUgZGVmYXVsdCBjbGFzcyB2YWx1ZScsICgpID0+IHtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5hc3NldENsYXNzKS50b0JlKCdleG9fX0Fzc2V0Jyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZGlzY292ZXIgY2xhc3NlcyBmcm9tIHZhdWx0IGZpbGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0ZpbGVzID0gW1xuICAgICAgICB7IGJhc2VuYW1lOiAnVGVzdENsYXNzJywgbmFtZTogJ1Rlc3RDbGFzcy5tZCcgfSxcbiAgICAgICAgeyBiYXNlbmFtZTogJ0Fub3RoZXJDbGFzcycsIG5hbWU6ICdBbm90aGVyQ2xhc3MubWQnIH1cbiAgICAgIF07XG5cbiAgICAgIChhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrRmlsZXMpO1xuICAgICAgKGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSBhcyBqZXN0Lk1vY2spXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKHtcbiAgICAgICAgICBmcm9udG1hdHRlcjoge1xuICAgICAgICAgICAgJ2V4b19fSW5zdGFuY2VfY2xhc3MnOiAnZXhvX19DbGFzcycsXG4gICAgICAgICAgICAncmRmc19fbGFiZWwnOiAnVGVzdCBDbGFzcydcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKHtcbiAgICAgICAgICBmcm9udG1hdHRlcjoge1xuICAgICAgICAgICAgJ2V4b19fSW5zdGFuY2VfY2xhc3MnOiAnW1tleG9fX0NsYXNzXV0nLFxuICAgICAgICAgICAgJ3JkZnNfX2xhYmVsJzogJ0Fub3RoZXIgQ2xhc3MnXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgY29udGFpbmVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnNldHVwQ2xhc3NGaWVsZChjb250YWluZXJFbCk7XG5cbiAgICAgIGV4cGVjdChhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDIpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHByb3ZpZGUgZGVmYXVsdCBjbGFzc2VzIHdoZW4gbm9uZSBmb3VuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIChhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShbXSk7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS5zZXR1cENsYXNzRmllbGQoY29udGFpbmVyRWwpO1xuXG4gICAgICBleHBlY3QoU2V0dGluZykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB2YXVsdCBhY2Nlc3MgZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzIGFzIGplc3QuTW9jaykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdWYXVsdCBhY2Nlc3MgZXJyb3InKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb250YWluZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgYXdhaXQgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnNldHVwQ2xhc3NGaWVsZChjb250YWluZXJFbCkpLnJlamVjdHMudG9UaHJvdygnVmF1bHQgYWNjZXNzIGVycm9yJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdXBkYXRlIHByb3BlcnRpZXMgd2hlbiBjbGFzcyBjaGFuZ2VzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGFpbmVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGNvbnN0IHVwZGF0ZVByb3BlcnRpZXNGb3JDbGFzc1NweSA9IGplc3Quc3B5T24obW9kYWwgYXMgYW55LCAndXBkYXRlUHJvcGVydGllc0ZvckNsYXNzJykubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcbiAgICAgIFxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuc2V0dXBDbGFzc0ZpZWxkKGNvbnRhaW5lckVsKTtcblxuICAgICAgLy8gU2ltdWxhdGUgY2xhc3MgY2hhbmdlXG4gICAgICBjb25zdCBuZXdDbGFzcyA9ICdleG9fX1Rhc2snO1xuICAgICAgKG1vZGFsIGFzIGFueSkuYXNzZXRDbGFzcyA9IG5ld0NsYXNzO1xuXG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkuYXNzZXRDbGFzcykudG9CZShuZXdDbGFzcyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdPbnRvbG9neSBGaWVsZCBTZXR1cCcsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgc2V0dXAgb250b2xvZ3kgZmllbGQgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGFpbmVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIFxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuc2V0dXBPbnRvbG9neUZpZWxkKGNvbnRhaW5lckVsKTtcblxuICAgICAgZXhwZWN0KFNldHRpbmcpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBkaXNjb3ZlciBvbnRvbG9naWVzIGZyb20gdmF1bHQgZmlsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRmlsZXMgPSBbXG4gICAgICAgIHsgbmFtZTogJyF0ZXN0LW9udG9sb2d5Lm1kJywgYmFzZW5hbWU6ICchdGVzdC1vbnRvbG9neScgfSxcbiAgICAgICAgeyBuYW1lOiAnIWFub3RoZXItb250by5tZCcsIGJhc2VuYW1lOiAnIWFub3RoZXItb250bycgfVxuICAgICAgXTtcblxuICAgICAgKGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG1vY2tGaWxlcyk7XG4gICAgICAoYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlIGFzIGplc3QuTW9jaylcbiAgICAgICAgLm1vY2tSZXR1cm5WYWx1ZU9uY2Uoe1xuICAgICAgICAgIGZyb250bWF0dGVyOiB7XG4gICAgICAgICAgICAnZXhvX19PbnRvbG9neV9wcmVmaXgnOiAndGVzdCcsXG4gICAgICAgICAgICAncmRmc19fbGFiZWwnOiAnVGVzdCBPbnRvbG9neSdcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKHtcbiAgICAgICAgICBmcm9udG1hdHRlcjoge1xuICAgICAgICAgICAgJ2V4b19fT250b2xvZ3lfcHJlZml4JzogJ2Fub3RoZXInLFxuICAgICAgICAgICAgJ3JkZnNfX2xhYmVsJzogJ0Fub3RoZXIgT250b2xvZ3knXG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgY29udGFpbmVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnNldHVwT250b2xvZ3lGaWVsZChjb250YWluZXJFbCk7XG5cbiAgICAgIGV4cGVjdChhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBvbnRvbG9neSBsaXN0JywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKFtdKTtcbiAgICAgIFxuICAgICAgY29uc3QgY29udGFpbmVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnNldHVwT250b2xvZ3lGaWVsZChjb250YWluZXJFbCk7XG5cbiAgICAgIGV4cGVjdChjb250YWluZXJFbCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBzZXQgZGVmYXVsdCBvbnRvbG9neSBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICAoYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoW10pO1xuXG4gICAgICBjb25zdCBjb250YWluZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuc2V0dXBPbnRvbG9neUZpZWxkKGNvbnRhaW5lckVsKTtcblxuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLmFzc2V0T250b2xvZ3kpLnRvQmUoJ2V4bycpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUHJvcGVydGllcyBTZWN0aW9uIFNldHVwJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBzZXR1cCBwcm9wZXJ0aWVzIHNlY3Rpb24gY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGFpbmVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIFxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuc2V0dXBQcm9wZXJ0aWVzU2VjdGlvbihjb250YWluZXJFbCk7XG5cbiAgICAgIGV4cGVjdChjb250YWluZXJFbC5jcmVhdGVFbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2gzJywge1xuICAgICAgICB0ZXh0OiAnUHJvcGVydGllcycsXG4gICAgICAgIGNsczogJ2V4b2NvcnRleC1wcm9wZXJ0aWVzLWhlYWRlcidcbiAgICAgIH0pO1xuICAgICAgZXhwZWN0KGNvbnRhaW5lckVsLmNyZWF0ZURpdikudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICBjbHM6ICdleG9jb3J0ZXgtcHJvcGVydGllcy1jb250YWluZXInXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB1cGRhdGUgcHJvcGVydGllcyBmb3IgZGVmYXVsdCBjbGFzcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBjb25zdCB1cGRhdGVQcm9wZXJ0aWVzRm9yQ2xhc3NTcHkgPSBqZXN0LnNweU9uKG1vZGFsIGFzIGFueSwgJ3VwZGF0ZVByb3BlcnRpZXNGb3JDbGFzcycpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgICBcbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnNldHVwUHJvcGVydGllc1NlY3Rpb24oY29udGFpbmVyRWwpO1xuXG4gICAgICBleHBlY3QodXBkYXRlUHJvcGVydGllc0ZvckNsYXNzU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnZXhvX19Bc3NldCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBwcm9wZXJ0aWVzIGNvbnRhaW5lciB3aXRoIGNvcnJlY3QgY2xhc3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb250YWluZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuc2V0dXBQcm9wZXJ0aWVzU2VjdGlvbihjb250YWluZXJFbCk7XG5cbiAgICAgIGV4cGVjdChjb250YWluZXJFbC5jcmVhdGVEaXYpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgY2xzOiAnZXhvY29ydGV4LXByb3BlcnRpZXMtY29udGFpbmVyJ1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQcm9wZXJ0aWVzIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUHJvcGVydGllc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgbW9ja1Byb3BlcnRpZXNDb250YWluZXIuZW1wdHkgPSBqZXN0LmZuKCk7XG4gICAgICBtb2NrUHJvcGVydGllc0NvbnRhaW5lci5jcmVhdGVFbCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpKTtcbiAgICAgIChtb2RhbCBhcyBhbnkpLnByb3BlcnRpZXNDb250YWluZXIgPSBtb2NrUHJvcGVydGllc0NvbnRhaW5lcjtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjbGVhciBleGlzdGluZyBwcm9wZXJ0aWVzIHdoZW4gdXBkYXRpbmcgZm9yIG5ldyBjbGFzcycsIGFzeW5jICgpID0+IHtcbiAgICAgIChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLnNldCgndGVzdCcsICd2YWx1ZScpO1xuICAgICAgKGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKFtdKTtcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkudXBkYXRlUHJvcGVydGllc0ZvckNsYXNzKCdleG9fX1Rhc2snKTtcblxuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnRpZXNDb250YWluZXIuZW1wdHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5zaXplKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGFkZCBkZWZhdWx0IHByb3BlcnRpZXMgZm9yIGV4b19fQXNzZXQgY2xhc3MnLCBhc3luYyAoKSA9PiB7XG4gICAgICAoYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoW10pO1xuXG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS51cGRhdGVQcm9wZXJ0aWVzRm9yQ2xhc3MoJ2V4b19fQXNzZXQnKTtcblxuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnRpZXMpLnRvSGF2ZUxlbmd0aCgyKTsgLy8gZGVzY3JpcHRpb24gYW5kIHRhZ3NcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5wcm9wZXJ0aWVzWzBdLm5hbWUpLnRvQmUoJ2Rlc2NyaXB0aW9uJyk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydGllc1sxXS5uYW1lKS50b0JlKCd0YWdzJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZGlzY292ZXIgcHJvcGVydGllcyBmcm9tIHZhdWx0IGZvciBzcGVjaWZpYyBjbGFzcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tGaWxlcyA9IFtcbiAgICAgICAgeyBiYXNlbmFtZTogJ3Byb3BlcnR5TmFtZScsIG5hbWU6ICdwcm9wZXJ0eU5hbWUubWQnIH1cbiAgICAgIF07XG5cbiAgICAgIChhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrRmlsZXMpO1xuICAgICAgKGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGZyb250bWF0dGVyOiB7XG4gICAgICAgICAgJ2V4b19fSW5zdGFuY2VfY2xhc3MnOiAnZXhvX19Qcm9wZXJ0eScsXG4gICAgICAgICAgJ3JkZnNfX2RvbWFpbic6ICdUZXN0Q2xhc3MnLFxuICAgICAgICAgICdyZGZzX19sYWJlbCc6ICdUZXN0IFByb3BlcnR5JyxcbiAgICAgICAgICAncmRmc19fY29tbWVudCc6ICdBIHRlc3QgcHJvcGVydHknLFxuICAgICAgICAgICdyZGZzX19yYW5nZSc6ICdzdHJpbmcnLFxuICAgICAgICAgICdleG9fX1Byb3BlcnR5X2lzUmVxdWlyZWQnOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS51cGRhdGVQcm9wZXJ0aWVzRm9yQ2xhc3MoJ1Rlc3RDbGFzcycpO1xuXG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydGllcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnRpZXNbMF0ubmFtZSkudG9CZSgncHJvcGVydHlOYW1lJyk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydGllc1swXS5pc1JlcXVpcmVkKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBwcm9wZXJ0aWVzIHdpdGggYXJyYXkgZG9tYWlucycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tGaWxlcyA9IFtcbiAgICAgICAgeyBiYXNlbmFtZTogJ211bHRpRG9tYWluUHJvcCcsIG5hbWU6ICdtdWx0aURvbWFpblByb3AubWQnIH1cbiAgICAgIF07XG5cbiAgICAgIChhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrRmlsZXMpO1xuICAgICAgKGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGZyb250bWF0dGVyOiB7XG4gICAgICAgICAgJ2V4b19fSW5zdGFuY2VfY2xhc3MnOiAnZXhvX19Qcm9wZXJ0eScsXG4gICAgICAgICAgJ3JkZnNfX2RvbWFpbic6IFsnVGVzdENsYXNzJywgJ0Fub3RoZXJDbGFzcyddLFxuICAgICAgICAgICdyZGZzX19sYWJlbCc6ICdNdWx0aSBEb21haW4gUHJvcGVydHknLFxuICAgICAgICAgICdyZGZzX19yYW5nZSc6ICdzdHJpbmcnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS51cGRhdGVQcm9wZXJ0aWVzRm9yQ2xhc3MoJ1Rlc3RDbGFzcycpO1xuXG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydGllcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnRpZXNbMF0ubmFtZSkudG9CZSgnbXVsdGlEb21haW5Qcm9wJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgbWFwIGRpZmZlcmVudCByYW5nZXMgdG8gY29ycmVjdCB0eXBlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAobW9kYWwgYXMgYW55KS5wcm9wZXJ0aWVzQ29udGFpbmVyID0gY29udGFpbmVyRWw7XG5cbiAgICAgIC8vIFRlc3QgZGlmZmVyZW50IHJhbmdlIG1hcHBpbmdzXG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkubWFwUmFuZ2VUb1R5cGUoJ3NlbGVjdCcpKS50b0JlKCdlbnVtJyk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkubWFwUmFuZ2VUb1R5cGUoJ2Jvb2xlYW4nKSkudG9CZSgnYm9vbGVhbicpO1xuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLm1hcFJhbmdlVG9UeXBlKCdkYXRlJykpLnRvQmUoJ2RhdGUnKTtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5tYXBSYW5nZVRvVHlwZSgnaW50ZWdlcicpKS50b0JlKCdudW1iZXInKTtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5tYXBSYW5nZVRvVHlwZSgnc3RyaW5nW10nKSkudG9CZSgnYXJyYXknKTtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5tYXBSYW5nZVRvVHlwZSgndGV4dCcpKS50b0JlKCd0ZXh0Jyk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkubWFwUmFuZ2VUb1R5cGUoJ3Vua25vd24nKSkudG9CZSgnc3RyaW5nJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVudW0gcHJvcGVydGllcyB3aXRoIG9wdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRmlsZXMgPSBbXG4gICAgICAgIHsgYmFzZW5hbWU6ICdzdGF0dXNQcm9wJywgbmFtZTogJ3N0YXR1c1Byb3AubWQnIH1cbiAgICAgIF07XG5cbiAgICAgIChhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrRmlsZXMpO1xuICAgICAgKGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGZyb250bWF0dGVyOiB7XG4gICAgICAgICAgJ2V4b19fSW5zdGFuY2VfY2xhc3MnOiAnZXhvX19Qcm9wZXJ0eScsXG4gICAgICAgICAgJ3JkZnNfX2RvbWFpbic6ICdUZXN0Q2xhc3MnLFxuICAgICAgICAgICdyZGZzX19yYW5nZSc6ICdzZWxlY3QnLFxuICAgICAgICAgICdleG9fX1Byb3BlcnR5X29wdGlvbnMnOiBbJ2FjdGl2ZScsICdpbmFjdGl2ZScsICdwZW5kaW5nJ11cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnVwZGF0ZVByb3BlcnRpZXNGb3JDbGFzcygnVGVzdENsYXNzJyk7XG5cbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5wcm9wZXJ0aWVzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydGllc1swXS50eXBlKS50b0JlKCdlbnVtJyk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydGllc1swXS5vcHRpb25zKS50b0VxdWFsKFsnYWN0aXZlJywgJ2luYWN0aXZlJywgJ3BlbmRpbmcnXSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgc2hvdyBubyBwcm9wZXJ0aWVzIG1lc3NhZ2Ugd2hlbiBub25lIGZvdW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgKGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKFtdKTtcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkudXBkYXRlUHJvcGVydGllc0ZvckNsYXNzKCdVbmtub3duQ2xhc3MnKTtcblxuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnRpZXNDb250YWluZXIuY3JlYXRlRWwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdwJywge1xuICAgICAgICB0ZXh0OiAnTm8gc3BlY2lmaWMgcHJvcGVydGllcyBmb3IgdGhpcyBjbGFzcycsXG4gICAgICAgIGNsczogJ2V4b2NvcnRleC1uby1wcm9wZXJ0aWVzJ1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQcm9wZXJ0eSBGaWVsZCBDcmVhdGlvbicsICgpID0+IHtcbiAgICBsZXQgbW9ja1Byb3BlcnRpZXNDb250YWluZXI6IEhUTUxFbGVtZW50O1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrUHJvcGVydGllc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydGllc0NvbnRhaW5lciA9IG1vY2tQcm9wZXJ0aWVzQ29udGFpbmVyO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSB0ZXh0IGZpZWxkIGZvciBzdHJpbmcgcHJvcGVydHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHtcbiAgICAgICAgbmFtZTogJ2Rlc2NyaXB0aW9uJyxcbiAgICAgICAgbGFiZWw6ICdEZXNjcmlwdGlvbicsXG4gICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVzY3JpcHRpb246ICdBc3NldCBkZXNjcmlwdGlvbidcbiAgICAgIH07XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmNyZWF0ZVByb3BlcnR5RmllbGQocHJvcGVydHkpO1xuXG4gICAgICBleHBlY3QoU2V0dGluZykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSB0ZXh0IGFyZWEgZmllbGQgZm9yIHRleHQgcHJvcGVydHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHtcbiAgICAgICAgbmFtZTogJ25vdGVzJyxcbiAgICAgICAgbGFiZWw6ICdOb3RlcycsXG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQXNzZXQgbm90ZXMnXG4gICAgICB9O1xuXG4gICAgICAobW9kYWwgYXMgYW55KS5jcmVhdGVQcm9wZXJ0eUZpZWxkKHByb3BlcnR5KTtcblxuICAgICAgZXhwZWN0KFNldHRpbmcpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgZW51bSBmaWVsZCBmb3IgZW51bSBwcm9wZXJ0eScsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiAnc3RhdHVzJyxcbiAgICAgICAgbGFiZWw6ICdTdGF0dXMnLFxuICAgICAgICB0eXBlOiAnZW51bScsXG4gICAgICAgIG9wdGlvbnM6IFsnYWN0aXZlJywgJ2luYWN0aXZlJ10sXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQXNzZXQgc3RhdHVzJ1xuICAgICAgfTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuY3JlYXRlUHJvcGVydHlGaWVsZChwcm9wZXJ0eSk7XG5cbiAgICAgIGV4cGVjdChTZXR0aW5nKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGJvb2xlYW4gZmllbGQgZm9yIGJvb2xlYW4gcHJvcGVydHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHtcbiAgICAgICAgbmFtZTogJ2NvbXBsZXRlZCcsXG4gICAgICAgIGxhYmVsOiAnQ29tcGxldGVkJyxcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVzY3JpcHRpb246ICdXaGV0aGVyIHRhc2sgaXMgY29tcGxldGVkJ1xuICAgICAgfTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuY3JlYXRlUHJvcGVydHlGaWVsZChwcm9wZXJ0eSk7XG5cbiAgICAgIGV4cGVjdChTZXR0aW5nKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGRhdGUgZmllbGQgZm9yIGRhdGUgcHJvcGVydHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHtcbiAgICAgICAgbmFtZTogJ2R1ZURhdGUnLFxuICAgICAgICBsYWJlbDogJ0R1ZSBEYXRlJyxcbiAgICAgICAgdHlwZTogJ2RhdGUnLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVzY3JpcHRpb246ICdUYXNrIGR1ZSBkYXRlJ1xuICAgICAgfTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuY3JlYXRlUHJvcGVydHlGaWVsZChwcm9wZXJ0eSk7XG5cbiAgICAgIGV4cGVjdChTZXR0aW5nKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIG51bWJlciBmaWVsZCBmb3IgbnVtYmVyIHByb3BlcnR5JywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSB7XG4gICAgICAgIG5hbWU6ICdlZmZvcnQnLFxuICAgICAgICBsYWJlbDogJ0VmZm9ydCcsXG4gICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVzY3JpcHRpb246ICdFc3RpbWF0ZWQgZWZmb3J0IGluIGhvdXJzJ1xuICAgICAgfTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuY3JlYXRlUHJvcGVydHlGaWVsZChwcm9wZXJ0eSk7XG5cbiAgICAgIGV4cGVjdChTZXR0aW5nKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGFycmF5IGZpZWxkIGZvciBhcnJheSBwcm9wZXJ0eScsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiAndGFncycsXG4gICAgICAgIGxhYmVsOiAnVGFncycsXG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0Fzc2V0IHRhZ3MnXG4gICAgICB9O1xuXG4gICAgICAobW9kYWwgYXMgYW55KS5jcmVhdGVQcm9wZXJ0eUZpZWxkKHByb3BlcnR5KTtcblxuICAgICAgZXhwZWN0KFNldHRpbmcpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBzaG93IHJlcXVpcmVkIGluZGljYXRvciBmb3IgcmVxdWlyZWQgZmllbGRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSB7XG4gICAgICAgIG5hbWU6ICd0aXRsZScsXG4gICAgICAgIGxhYmVsOiAnVGl0bGUnLFxuICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVzY3JpcHRpb246ICdBc3NldCB0aXRsZSdcbiAgICAgIH07XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmNyZWF0ZVByb3BlcnR5RmllbGQocHJvcGVydHkpO1xuXG4gICAgICBleHBlY3QoU2V0dGluZykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW5kaXZpZHVhbCBGaWVsZCBUeXBlIFRlc3RzJywgKCkgPT4ge1xuICAgIGxldCBtb2NrU2V0dGluZzogYW55O1xuXG4gICAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgICBtb2NrU2V0dGluZyA9IHtcbiAgICAgICAgYWRkRHJvcGRvd246IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgY29uc3QgZHJvcGRvd24gPSB7IGFkZE9wdGlvbjogamVzdC5mbigpLCBvbkNoYW5nZTogamVzdC5mbigpIH07XG4gICAgICAgICAgY2FsbGJhY2soZHJvcGRvd24pO1xuICAgICAgICAgIHJldHVybiBtb2NrU2V0dGluZztcbiAgICAgICAgfSksXG4gICAgICAgIGFkZFRvZ2dsZTogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoY2FsbGJhY2spID0+IHtcbiAgICAgICAgICBjb25zdCB0b2dnbGUgPSB7IG9uQ2hhbmdlOiBqZXN0LmZuKCkgfTtcbiAgICAgICAgICBjYWxsYmFjayh0b2dnbGUpO1xuICAgICAgICAgIHJldHVybiBtb2NrU2V0dGluZztcbiAgICAgICAgfSksXG4gICAgICAgIGFkZFRleHQ6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgY29uc3QgdGV4dCA9IHsgXG4gICAgICAgICAgICBzZXRQbGFjZWhvbGRlcjogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICAgICAgICBvbkNoYW5nZTogamVzdC5mbigpLFxuICAgICAgICAgICAgaW5wdXRFbDogeyB0eXBlOiAndGV4dCcgfVxuICAgICAgICAgIH07XG4gICAgICAgICAgY2FsbGJhY2sodGV4dCk7XG4gICAgICAgICAgcmV0dXJuIG1vY2tTZXR0aW5nO1xuICAgICAgICB9KSxcbiAgICAgICAgYWRkVGV4dEFyZWE6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgY29uc3QgdGV4dEFyZWEgPSB7IFxuICAgICAgICAgICAgc2V0UGxhY2Vob2xkZXI6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgICAgICAgb25DaGFuZ2U6IGplc3QuZm4oKVxuICAgICAgICAgIH07XG4gICAgICAgICAgY2FsbGJhY2sodGV4dEFyZWEpO1xuICAgICAgICAgIHJldHVybiBtb2NrU2V0dGluZztcbiAgICAgICAgfSlcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGVudW0gZmllbGQgd2l0aCBhbGwgb3B0aW9ucycsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiAncHJpb3JpdHknLFxuICAgICAgICBsYWJlbDogJ1ByaW9yaXR5JyxcbiAgICAgICAgdHlwZTogJ2VudW0nLFxuICAgICAgICBvcHRpb25zOiBbJ2xvdycsICdtZWRpdW0nLCAnaGlnaCddLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZVxuICAgICAgfTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuY3JlYXRlRW51bUZpZWxkKG1vY2tTZXR0aW5nLCBwcm9wZXJ0eSk7XG5cbiAgICAgIGV4cGVjdChtb2NrU2V0dGluZy5hZGREcm9wZG93bikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBlbnVtIGZpZWxkIHNlbGVjdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiAncHJpb3JpdHknLFxuICAgICAgICBsYWJlbDogJ1ByaW9yaXR5JyxcbiAgICAgICAgdHlwZTogJ2VudW0nLFxuICAgICAgICBvcHRpb25zOiBbJ2xvdycsICdtZWRpdW0nLCAnaGlnaCddLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZVxuICAgICAgfTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuY3JlYXRlRW51bUZpZWxkKG1vY2tTZXR0aW5nLCBwcm9wZXJ0eSk7XG5cbiAgICAgIC8vIFNpbXVsYXRlIHNlbGVjdGlvblxuICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuc2V0KCdwcmlvcml0eScsICdoaWdoJyk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuZ2V0KCdwcmlvcml0eScpKS50b0JlKCdoaWdoJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGJvb2xlYW4gZmllbGQgd2l0aCB0b2dnbGUnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHtcbiAgICAgICAgbmFtZTogJ2FjdGl2ZScsXG4gICAgICAgIGxhYmVsOiAnQWN0aXZlJyxcbiAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZVxuICAgICAgfTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuY3JlYXRlQm9vbGVhbkZpZWxkKG1vY2tTZXR0aW5nLCBwcm9wZXJ0eSk7XG5cbiAgICAgIGV4cGVjdChtb2NrU2V0dGluZy5hZGRUb2dnbGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgYm9vbGVhbiBmaWVsZCBjaGFuZ2VzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSB7XG4gICAgICAgIG5hbWU6ICdhY3RpdmUnLFxuICAgICAgICBsYWJlbDogJ0FjdGl2ZScsXG4gICAgICAgIHR5cGU6ICdib29sZWFuJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2VcbiAgICAgIH07XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmNyZWF0ZUJvb2xlYW5GaWVsZChtb2NrU2V0dGluZywgcHJvcGVydHkpO1xuXG4gICAgICAvLyBTaW11bGF0ZSB0b2dnbGVcbiAgICAgIChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLnNldCgnYWN0aXZlJywgdHJ1ZSk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuZ2V0KCdhY3RpdmUnKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgZGF0ZSBmaWVsZCB3aXRoIGNvcnJlY3QgaW5wdXQgdHlwZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiAnZHVlRGF0ZScsXG4gICAgICAgIGxhYmVsOiAnRHVlIERhdGUnLFxuICAgICAgICB0eXBlOiAnZGF0ZScsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgICAobW9kYWwgYXMgYW55KS5jcmVhdGVEYXRlRmllbGQobW9ja1NldHRpbmcsIHByb3BlcnR5KTtcblxuICAgICAgZXhwZWN0KG1vY2tTZXR0aW5nLmFkZFRleHQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgbnVtYmVyIGZpZWxkIHdpdGggdmFsaWRhdGlvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiAnY291bnQnLFxuICAgICAgICBsYWJlbDogJ0NvdW50JyxcbiAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlXG4gICAgICB9O1xuXG4gICAgICAobW9kYWwgYXMgYW55KS5jcmVhdGVOdW1iZXJGaWVsZChtb2NrU2V0dGluZywgcHJvcGVydHkpO1xuXG4gICAgICBleHBlY3QobW9ja1NldHRpbmcuYWRkVGV4dCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSB0ZXh0IGFyZWEgZmllbGQnLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHtcbiAgICAgICAgbmFtZTogJ2Rlc2NyaXB0aW9uJyxcbiAgICAgICAgbGFiZWw6ICdEZXNjcmlwdGlvbicsXG4gICAgICAgIHR5cGU6ICd0ZXh0JyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2VcbiAgICAgIH07XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmNyZWF0ZVRleHRBcmVhRmllbGQobW9ja1NldHRpbmcsIHByb3BlcnR5KTtcblxuICAgICAgZXhwZWN0KG1vY2tTZXR0aW5nLmFkZFRleHRBcmVhKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGFycmF5IGZpZWxkIGZvciB0YWdzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSB7XG4gICAgICAgIG5hbWU6ICd0YWdzJyxcbiAgICAgICAgbGFiZWw6ICdUYWdzJyxcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2VcbiAgICAgIH07XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmNyZWF0ZUFycmF5RmllbGQobW9ja1NldHRpbmcsIHByb3BlcnR5KTtcblxuICAgICAgZXhwZWN0KG1vY2tTZXR0aW5nLmFkZFRleHQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgYmFzaWMgdGV4dCBmaWVsZCBhcyBmYWxsYmFjaycsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiAnZ2VuZXJpYycsXG4gICAgICAgIGxhYmVsOiAnR2VuZXJpYycsXG4gICAgICAgIHR5cGU6ICd1bmtub3duJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2VcbiAgICAgIH07XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmNyZWF0ZVRleHRGaWVsZChtb2NrU2V0dGluZywgcHJvcGVydHkpO1xuXG4gICAgICBleHBlY3QobW9ja1NldHRpbmcuYWRkVGV4dCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQWN0aW9uIEJ1dHRvbnMgU2V0dXAnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHNldHVwIGNyZWF0ZSBidXR0b24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjb250YWluZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgICAobW9kYWwgYXMgYW55KS5zZXR1cEFjdGlvbkJ1dHRvbnMoY29udGFpbmVyRWwpO1xuXG4gICAgICBleHBlY3QoU2V0dGluZykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNhbGwgY3JlYXRlQXNzZXQgd2hlbiBjcmVhdGUgYnV0dG9uIGlzIGNsaWNrZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjcmVhdGVBc3NldFNweSA9IGplc3Quc3B5T24obW9kYWwgYXMgYW55LCAnY3JlYXRlQXNzZXQnKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuICAgICAgY29uc3QgY29udGFpbmVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuc2V0dXBBY3Rpb25CdXR0b25zKGNvbnRhaW5lckVsKTtcblxuICAgICAgLy8gVGhlIGJ1dHRvbiBjbGljayBpcyBoYW5kbGVkIHRocm91Z2ggdGhlIFNldHRpbmcgbW9ja1xuICAgICAgZXhwZWN0KFNldHRpbmcpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0Fzc2V0IENyZWF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBjYWxsIGNyZWF0ZUFzc2V0VXNlQ2FzZS5leGVjdXRlIHdoZW4gY3JlYXRpbmcgYXNzZXQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ3JlYXRlQXNzZXRVc2VDYXNlLmV4ZWN1dGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBhc3NldElkOiAndGVzdC1pZCcsXG4gICAgICAgIG1lc3NhZ2U6ICdBc3NldCBjcmVhdGVkIHN1Y2Nlc3NmdWxseSdcbiAgICAgIH0pO1xuXG4gICAgICAobW9kYWwgYXMgYW55KS5hc3NldFRpdGxlID0gJ1Rlc3QgQXNzZXQnO1xuICAgICAgKG1vZGFsIGFzIGFueSkuYXNzZXRDbGFzcyA9ICdleG9fX1Rhc2snO1xuICAgICAgKG1vZGFsIGFzIGFueSkuYXNzZXRPbnRvbG9neSA9ICdleG8nO1xuICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuc2V0KCdwcmlvcml0eScsICdoaWdoJyk7XG5cbiAgICAgIGNvbnN0IGNsb3NlU3B5ID0gamVzdC5zcHlPbihtb2RhbCwgJ2Nsb3NlJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuY3JlYXRlQXNzZXQoKTtcblxuICAgICAgZXhwZWN0KG1vY2tDcmVhdGVBc3NldFVzZUNhc2UuZXhlY3V0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB0aXRsZTogJ1Rlc3QgQXNzZXQnLFxuICAgICAgICBjbGFzc05hbWU6ICdleG9fX1Rhc2snLFxuICAgICAgICBvbnRvbG9neVByZWZpeDogJ2V4bycsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBwcmlvcml0eTogJ2hpZ2gnXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoTm90aWNlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnQXNzZXQgY3JlYXRlZCBzdWNjZXNzZnVsbHknKTtcbiAgICAgIGV4cGVjdChjbG9zZVNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIHNob3cgZXJyb3Igbm90aWNlIHdoZW4gYXNzZXQgY3JlYXRpb24gZmFpbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ3JlYXRlQXNzZXRVc2VDYXNlLmV4ZWN1dGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgYXNzZXRJZDogJycsXG4gICAgICAgIG1lc3NhZ2U6ICdDcmVhdGlvbiBmYWlsZWQnXG4gICAgICB9KTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuYXNzZXRUaXRsZSA9ICdUZXN0IEFzc2V0JztcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuY3JlYXRlQXNzZXQoKTtcblxuICAgICAgZXhwZWN0KE5vdGljZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ0ZhaWxlZCB0byBjcmVhdGUgYXNzZXQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZXJyb3JzIGR1cmluZyBhc3NldCBjcmVhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdOZXR3b3JrIGVycm9yJyk7XG4gICAgICBtb2NrQ3JlYXRlQXNzZXRVc2VDYXNlLmV4ZWN1dGUubW9ja1JlamVjdGVkVmFsdWUoZXJyb3IpO1xuXG4gICAgICAobW9kYWwgYXMgYW55KS5hc3NldFRpdGxlID0gJ1Rlc3QgQXNzZXQnO1xuXG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS5jcmVhdGVBc3NldCgpO1xuXG4gICAgICBleHBlY3QoTm90aWNlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnRXJyb3I6IE5ldHdvcmsgZXJyb3InKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjb252ZXJ0IHByb3BlcnR5IHZhbHVlcyB0byBwbGFpbiBvYmplY3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ3JlYXRlQXNzZXRVc2VDYXNlLmV4ZWN1dGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBhc3NldElkOiAndGVzdC1pZCcsXG4gICAgICAgIG1lc3NhZ2U6ICdTdWNjZXNzJ1xuICAgICAgfSk7XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmFzc2V0VGl0bGUgPSAnVGVzdCBBc3NldCc7XG4gICAgICAobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5zZXQoJ3Byb3AxJywgJ3ZhbHVlMScpO1xuICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuc2V0KCdwcm9wMicsICd2YWx1ZTInKTtcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuY3JlYXRlQXNzZXQoKTtcblxuICAgICAgZXhwZWN0KG1vY2tDcmVhdGVBc3NldFVzZUNhc2UuZXhlY3V0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBwcm9wMTogJ3ZhbHVlMScsXG4gICAgICAgICAgICBwcm9wMjogJ3ZhbHVlMidcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSBwcm9wZXJ0eSB2YWx1ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ3JlYXRlQXNzZXRVc2VDYXNlLmV4ZWN1dGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBhc3NldElkOiAndGVzdC1pZCcsXG4gICAgICAgIG1lc3NhZ2U6ICdTdWNjZXNzJ1xuICAgICAgfSk7XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmFzc2V0VGl0bGUgPSAnVGVzdCBBc3NldCc7XG5cbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLmNyZWF0ZUFzc2V0KCk7XG5cbiAgICAgIGV4cGVjdChtb2NrQ3JlYXRlQXNzZXRVc2VDYXNlLmV4ZWN1dGUpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgcHJvcGVydGllczoge31cbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdNb2RhbCBDbGVhbnVwJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBjbGVhciBjb250ZW50IG9uIGNsb3NlJywgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NvbnRlbnRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29uc3QgZW1wdHlTcHkgPSBqZXN0LnNweU9uKG1vY2tDb250ZW50RWwsICdlbXB0eScpO1xuICAgICAgKG1vZGFsIGFzIGFueSkuY29udGVudEVsID0gbW9ja0NvbnRlbnRFbDtcblxuICAgICAgbW9kYWwub25DbG9zZSgpO1xuXG4gICAgICBleHBlY3QoZW1wdHlTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgRE9NIGNsZWFudXAgZmFsbGJhY2snLCAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQ29udGVudEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAvLyBSZW1vdmUgdGhlIGVtcHR5IG1ldGhvZCB0byB0ZXN0IGZhbGxiYWNrXG4gICAgICBkZWxldGUgKG1vY2tDb250ZW50RWwgYXMgYW55KS5lbXB0eTtcbiAgICAgIFxuICAgICAgY29uc3QgY2hpbGQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIG1vY2tDb250ZW50RWwuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgICAgKG1vZGFsIGFzIGFueSkuY29udGVudEVsID0gbW9ja0NvbnRlbnRFbDtcblxuICAgICAgbW9kYWwub25DbG9zZSgpO1xuXG4gICAgICAvLyBTaG91bGQgc3RpbGwgY29tcGxldGUgd2l0aG91dCBlcnJvclxuICAgICAgZXhwZWN0KG1vY2tDb250ZW50RWwuY2hpbGRyZW4ubGVuZ3RoKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnSW5wdXQgVmFsaWRhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHRpdGxlIGZpZWxkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NyZWF0ZUFzc2V0VXNlQ2FzZS5leGVjdXRlLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignQXNzZXQgdGl0bGUgaXMgcmVxdWlyZWQnKSk7XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmFzc2V0VGl0bGUgPSAnJztcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuY3JlYXRlQXNzZXQoKTtcblxuICAgICAgZXhwZWN0KE5vdGljZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ0Vycm9yOiBBc3NldCB0aXRsZSBpcyByZXF1aXJlZCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBtaXNzaW5nIGNsYXNzIGZpZWxkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NyZWF0ZUFzc2V0VXNlQ2FzZS5leGVjdXRlLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignQXNzZXQgY2xhc3MgaXMgcmVxdWlyZWQnKSk7XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmFzc2V0VGl0bGUgPSAnVGVzdCc7XG4gICAgICAobW9kYWwgYXMgYW55KS5hc3NldENsYXNzID0gJyc7XG5cbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLmNyZWF0ZUFzc2V0KCk7XG5cbiAgICAgIGV4cGVjdChOb3RpY2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdFcnJvcjogQXNzZXQgY2xhc3MgaXMgcmVxdWlyZWQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbWlzc2luZyBvbnRvbG9neSBmaWVsZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDcmVhdGVBc3NldFVzZUNhc2UuZXhlY3V0ZS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ09udG9sb2d5IHByZWZpeCBpcyByZXF1aXJlZCcpKTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuYXNzZXRUaXRsZSA9ICdUZXN0JztcbiAgICAgIChtb2RhbCBhcyBhbnkpLmFzc2V0T250b2xvZ3kgPSAnJztcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuY3JlYXRlQXNzZXQoKTtcblxuICAgICAgZXhwZWN0KE5vdGljZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ0Vycm9yOiBPbnRvbG9neSBwcmVmaXggaXMgcmVxdWlyZWQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgd2hpdGVzcGFjZS1vbmx5IHRpdGxlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NyZWF0ZUFzc2V0VXNlQ2FzZS5leGVjdXRlLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignQXNzZXQgdGl0bGUgaXMgcmVxdWlyZWQnKSk7XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmFzc2V0VGl0bGUgPSAnICAgXFx0XFxuICAgJztcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuY3JlYXRlQXNzZXQoKTtcblxuICAgICAgZXhwZWN0KE5vdGljZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ0Vycm9yOiBBc3NldCB0aXRsZSBpcyByZXF1aXJlZCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUHJvcGVydHkgVmFsdWUgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBhcnJheSB2YWx1ZXMgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSB7XG4gICAgICAgIG5hbWU6ICd0YWdzJyxcbiAgICAgICAgbGFiZWw6ICdUYWdzJyxcbiAgICAgICAgdHlwZTogJ2FycmF5JyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnQXNzZXQgdGFncydcbiAgICAgIH07XG5cbiAgICAgIC8vIFNpbXVsYXRlIGFycmF5IGlucHV0IHByb2Nlc3NpbmdcbiAgICAgIChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLnNldChwcm9wZXJ0eS5uYW1lLCBbJ3RhZzEnLCAndGFnMicsICd0YWczJ10pO1xuXG4gICAgICBjb25zdCB2YWx1ZXMgPSAobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5nZXQoJ3RhZ3MnKTtcbiAgICAgIGV4cGVjdCh2YWx1ZXMpLnRvRXF1YWwoWyd0YWcxJywgJ3RhZzInLCAndGFnMyddKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgd2lraSBsaW5rIHZhbHVlcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHtcbiAgICAgICAgbmFtZTogJ3JlbGF0ZWRUYXNrcycsXG4gICAgICAgIGxhYmVsOiAnUmVsYXRlZCBUYXNrcycsXG4gICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1JlbGF0ZWQgdGFzayBsaW5rcydcbiAgICAgIH07XG5cbiAgICAgIC8vIFNpbXVsYXRlIHdpa2kgbGluayBwcm9jZXNzaW5nXG4gICAgICAobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5zZXQocHJvcGVydHkubmFtZSwgWydbW1Rhc2sgMV1dJywgJ1tbVGFzayAyXV0nXSk7XG5cbiAgICAgIGNvbnN0IHZhbHVlcyA9IChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLmdldCgncmVsYXRlZFRhc2tzJyk7XG4gICAgICBleHBlY3QodmFsdWVzKS50b0VxdWFsKFsnW1tUYXNrIDFdXScsICdbW1Rhc2sgMl1dJ10pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBudW1iZXIgcGFyc2luZyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHtcbiAgICAgICAgbmFtZTogJ2VmZm9ydCcsXG4gICAgICAgIGxhYmVsOiAnRWZmb3J0JyxcbiAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0VmZm9ydCBpbiBob3VycydcbiAgICAgIH07XG5cbiAgICAgIC8vIFNpbXVsYXRlIG51bWJlciBpbnB1dFxuICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuc2V0KHByb3BlcnR5Lm5hbWUsIDQyKTtcblxuICAgICAgY29uc3QgdmFsdWUgPSAobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5nZXQoJ2VmZm9ydCcpO1xuICAgICAgZXhwZWN0KHZhbHVlKS50b0JlKDQyKTtcbiAgICAgIGV4cGVjdCh0eXBlb2YgdmFsdWUpLnRvQmUoJ251bWJlcicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBpbnZhbGlkIG51bWJlciBpbnB1dCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiAnZWZmb3J0JyxcbiAgICAgICAgbGFiZWw6ICdFZmZvcnQnLFxuICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2VcbiAgICAgIH07XG5cbiAgICAgIC8vIFNob3VsZCBub3Qgc2V0IGludmFsaWQgbnVtYmVyc1xuICAgICAgY29uc3QgaW52YWxpZE51bWJlciA9ICdub3QtYS1udW1iZXInO1xuICAgICAgaWYgKGlzTmFOKHBhcnNlRmxvYXQoaW52YWxpZE51bWJlcikpKSB7XG4gICAgICAgIC8vIFByb3BlcnR5IHNob3VsZCBub3QgYmUgc2V0XG4gICAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5oYXMoJ2VmZm9ydCcpKS50b0JlKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjbGVhciBwcm9wZXJ0eSB2YWx1ZXMgd2hlbiBlbXB0eScsICgpID0+IHtcbiAgICAgIChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLnNldCgndGVzdCcsICd2YWx1ZScpO1xuXG4gICAgICAvLyBTaW11bGF0ZSBjbGVhcmluZyBhIGZpZWxkXG4gICAgICAobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5kZWxldGUoJ3Rlc3QnKTtcblxuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLmhhcygndGVzdCcpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZGF0ZSBpbnB1dCB2YWxpZGF0aW9uJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSB7XG4gICAgICAgIG5hbWU6ICdkdWVEYXRlJyxcbiAgICAgICAgbGFiZWw6ICdEdWUgRGF0ZScsXG4gICAgICAgIHR5cGU6ICdkYXRlJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2VcbiAgICAgIH07XG5cbiAgICAgIC8vIFZhbGlkIGRhdGVcbiAgICAgIChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLnNldChwcm9wZXJ0eS5uYW1lLCAnMjAyNC0xMi0zMScpO1xuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLmdldCgnZHVlRGF0ZScpKS50b0JlKCcyMDI0LTEyLTMxJyk7XG5cbiAgICAgIC8vIEludmFsaWQgZGF0ZSBzaG91bGQgbm90IGJlIHNldFxuICAgICAgY29uc3QgaW52YWxpZERhdGUgPSAnbm90LWEtZGF0ZSc7XG4gICAgICBpZiAoaXNOYU4oRGF0ZS5wYXJzZShpbnZhbGlkRGF0ZSkpKSB7XG4gICAgICAgIChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLmRlbGV0ZSgnZHVlRGF0ZScpO1xuICAgICAgfVxuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLmhhcygnZHVlRGF0ZScpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgYm9vbGVhbiB0b2dnbGUgdmFsdWVzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSB7XG4gICAgICAgIG5hbWU6ICdhY3RpdmUnLFxuICAgICAgICBsYWJlbDogJ0FjdGl2ZScsXG4gICAgICAgIHR5cGU6ICdib29sZWFuJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2VcbiAgICAgIH07XG5cbiAgICAgIC8vIFRlc3QgdHJ1ZSB2YWx1ZVxuICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuc2V0KHByb3BlcnR5Lm5hbWUsIHRydWUpO1xuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLmdldCgnYWN0aXZlJykpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIC8vIFRlc3QgZmFsc2UgdmFsdWVcbiAgICAgIChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLnNldChwcm9wZXJ0eS5uYW1lLCBmYWxzZSk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuZ2V0KCdhY3RpdmUnKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXggYXJyYXkgcGFyc2luZycsICgpID0+IHtcbiAgICAgIGNvbnN0IGlucHV0ID0gJ1tbTGluayAxXV0sIFtbTGluayAyXV0sIHNpbXBsZSwgXCJxdW90ZWQgaXRlbVwiJztcbiAgICAgIGNvbnN0IGxpbmtzID0gaW5wdXQubWF0Y2goL1xcW1xcWyhbXlxcXV0rKVxcXVxcXS9nKSB8fCBbXTtcbiAgICAgIGNvbnN0IGl0ZW1zID0gaW5wdXQuc3BsaXQoJywnKS5tYXAocyA9PiBzLnRyaW0oKSkuZmlsdGVyKHMgPT4gcyk7XG5cbiAgICAgIGlmIChsaW5rcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLnNldCgndGVzdCcsIGxpbmtzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLnNldCgndGVzdCcsIGl0ZW1zKTtcbiAgICAgIH1cblxuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLmdldCgndGVzdCcpKS50b0VxdWFsKFsnW1tMaW5rIDFdXScsICdbW0xpbmsgMl1dJ10pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29udGFpbmVyIENsZWFudXAgU2NlbmFyaW9zJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgcHJvcGVydGllcyBjb250YWluZXIgY2xlYW51cCB3aXRoIE9ic2lkaWFuIG1ldGhvZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIG1vY2tDb250YWluZXIuZW1wdHkgPSBqZXN0LmZuKCk7XG4gICAgICAobW9kYWwgYXMgYW55KS5wcm9wZXJ0aWVzQ29udGFpbmVyID0gbW9ja0NvbnRhaW5lcjtcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkudXBkYXRlUHJvcGVydGllc0ZvckNsYXNzKCdUZXN0Q2xhc3MnKTtcblxuICAgICAgZXhwZWN0KG1vY2tDb250YWluZXIuZW1wdHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgcHJvcGVydGllcyBjb250YWluZXIgY2xlYW51cCB3aXRoIERPTSBmYWxsYmFjaycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGNvbnN0IGNoaWxkMSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgY29uc3QgY2hpbGQyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICBtb2NrQ29udGFpbmVyLmFwcGVuZENoaWxkKGNoaWxkMSk7XG4gICAgICBtb2NrQ29udGFpbmVyLmFwcGVuZENoaWxkKGNoaWxkMik7XG5cbiAgICAgIC8vIFJlbW92ZSBPYnNpZGlhbiBlbXB0eSBtZXRob2QgdG8gdGVzdCBmYWxsYmFja1xuICAgICAgZGVsZXRlIChtb2NrQ29udGFpbmVyIGFzIGFueSkuZW1wdHk7XG4gICAgICBcbiAgICAgIChtb2RhbCBhcyBhbnkpLnByb3BlcnRpZXNDb250YWluZXIgPSBtb2NrQ29udGFpbmVyO1xuICAgICAgKGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKFtdKTtcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkudXBkYXRlUHJvcGVydGllc0ZvckNsYXNzKCdUZXN0Q2xhc3MnKTtcblxuICAgICAgZXhwZWN0KG1vY2tDb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoKS50b0JlKDEpOyAvLyBTaG91bGQgaGF2ZSB0aGUgXCJubyBwcm9wZXJ0aWVzXCIgbWVzc2FnZVxuICAgIH0pO1xuICB9KTtcbn0pOyJdLCJ2ZXJzaW9uIjozfQ==