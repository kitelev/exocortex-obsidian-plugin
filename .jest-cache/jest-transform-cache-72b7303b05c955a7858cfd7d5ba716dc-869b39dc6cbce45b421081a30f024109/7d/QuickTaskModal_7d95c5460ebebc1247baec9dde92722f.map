{"file":"/Users/kitelev/Documents/exocortex-obsidian-plugin/src/presentation/modals/QuickTaskModal.ts","mappings":"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","names":[],"sources":["/Users/kitelev/Documents/exocortex-obsidian-plugin/src/presentation/modals/QuickTaskModal.ts"],"sourcesContent":["import { App, Modal, Setting, Notice } from \"obsidian\";\nimport { CreateTaskFromProjectUseCase } from \"../../application/use-cases/CreateTaskFromProjectUseCase\";\nimport { GetCurrentProjectUseCase } from \"../../application/use-cases/GetCurrentProjectUseCase\";\nimport {\n  CreateTaskRequest,\n  GetCurrentProjectResponse,\n} from \"../../application/dtos/CreateTaskRequest\";\n\n/**\n * Modal for quick task creation with project context\n * Provides streamlined UI for creating tasks linked to current project\n */\nexport class QuickTaskModal extends Modal {\n  private taskTitle: string = \"\";\n  private taskDescription: string = \"\";\n  private taskPriority: \"low\" | \"medium\" | \"high\" | \"urgent\" = \"medium\";\n  private taskStatus: \"todo\" | \"in-progress\" | \"done\" | \"cancelled\" = \"todo\";\n  private taskDueDate: string = \"\";\n  private taskEstimatedHours: number | undefined;\n  private taskTags: string[] = [];\n  private currentProject:\n    | GetCurrentProjectResponse[\"currentProject\"]\n    | undefined;\n  private selectedProjectId: string | undefined;\n  private availableProjects: GetCurrentProjectResponse[\"availableProjects\"] =\n    [];\n\n  constructor(\n    app: App,\n    private readonly createTaskUseCase: CreateTaskFromProjectUseCase,\n    private readonly getCurrentProjectUseCase: GetCurrentProjectUseCase,\n    private readonly activeFile?: string,\n  ) {\n    super(app);\n  }\n\n  async onOpen() {\n    const { contentEl } = this;\n    contentEl.empty();\n\n    // Add modal title\n    contentEl.createEl(\"h2\", { text: \"Create New Task\" });\n\n    // Load current project context\n    await this.loadProjectContext();\n\n    // Project selection\n    if (this.currentProject) {\n      const projectDiv = contentEl.createDiv({ cls: \"quick-task-project\" });\n      projectDiv.createEl(\"div\", {\n        text: `Project: ${this.currentProject.title}`,\n        cls: \"quick-task-project-current\",\n      });\n      this.selectedProjectId = this.currentProject.id;\n    }\n\n    // Show available projects if multiple found\n    if (this.availableProjects.length > 1) {\n      new Setting(contentEl)\n        .setName(\"Project\")\n        .setDesc(\"Select the project for this task\")\n        .addDropdown((dropdown) => {\n          // Add empty option\n          dropdown.addOption(\"\", \"No project\");\n\n          // Add all available projects\n          this.availableProjects.forEach((project) => {\n            dropdown.addOption(project.id, project.title);\n          });\n\n          // Set current selection\n          if (this.currentProject) {\n            dropdown.setValue(this.currentProject.id);\n          }\n\n          dropdown.onChange((value) => {\n            this.selectedProjectId = value || undefined;\n          });\n        });\n    }\n\n    // Task title\n    new Setting(contentEl)\n      .setName(\"Title\")\n      .setDesc(\"Enter the task title (required)\")\n      .addText((text) => {\n        text.inputEl.addClass(\"quick-task-title-input\");\n        text.setPlaceholder(\"Task title...\");\n        text.onChange((value) => {\n          this.taskTitle = value;\n        });\n        // Focus on title input\n        text.inputEl.focus();\n        // Select all text for quick replacement\n        text.inputEl.select();\n      });\n\n    // Task description\n    new Setting(contentEl)\n      .setName(\"Description\")\n      .setDesc(\"Optional task description\")\n      .addTextArea((text) => {\n        text.inputEl.addClass(\"quick-task-description-input\");\n        text.setPlaceholder(\"Task description...\");\n        text.inputEl.rows = 3;\n        text.onChange((value) => {\n          this.taskDescription = value;\n        });\n      });\n\n    // Priority and Status row\n    const priorityStatusDiv = contentEl.createDiv({ cls: \"quick-task-row\" });\n\n    // Priority\n    new Setting(priorityStatusDiv)\n      .setName(\"Priority\")\n      .addDropdown((dropdown) => {\n        dropdown\n          .addOption(\"low\", \"ðŸŸ¢ Low\")\n          .addOption(\"medium\", \"ðŸŸ¡ Medium\")\n          .addOption(\"high\", \"ðŸŸ  High\")\n          .addOption(\"urgent\", \"ðŸ”´ Urgent\")\n          .setValue(this.taskPriority)\n          .onChange((value) => {\n            this.taskPriority = value as any;\n          });\n      });\n\n    // Status\n    new Setting(priorityStatusDiv).setName(\"Status\").addDropdown((dropdown) => {\n      dropdown\n        .addOption(\"todo\", \"ðŸ“‹ Todo\")\n        .addOption(\"in-progress\", \"ðŸ”„ In Progress\")\n        .addOption(\"done\", \"âœ… Done\")\n        .addOption(\"cancelled\", \"âŒ Cancelled\")\n        .setValue(this.taskStatus)\n        .onChange((value) => {\n          this.taskStatus = value as any;\n        });\n    });\n\n    // Due date and estimated hours row\n    const dateHoursDiv = contentEl.createDiv({ cls: \"quick-task-row\" });\n\n    // Due date\n    new Setting(dateHoursDiv).setName(\"Due Date\").addText((text) => {\n      text.inputEl.type = \"date\";\n      text.onChange((value) => {\n        this.taskDueDate = value;\n      });\n      // Set default to tomorrow\n      const tomorrow = new Date();\n      tomorrow.setDate(tomorrow.getDate() + 1);\n      text.setValue(tomorrow.toISOString().split(\"T\")[0]);\n      this.taskDueDate = tomorrow.toISOString().split(\"T\")[0];\n    });\n\n    // Estimated hours\n    new Setting(dateHoursDiv).setName(\"Est. Hours\").addText((text) => {\n      text.inputEl.type = \"number\";\n      text.inputEl.min = \"0\";\n      text.inputEl.step = \"0.5\";\n      text.setPlaceholder(\"0\");\n      text.onChange((value) => {\n        const hours = parseFloat(value);\n        this.taskEstimatedHours = isNaN(hours) ? undefined : hours;\n      });\n    });\n\n    // Tags\n    new Setting(contentEl)\n      .setName(\"Tags\")\n      .setDesc(\"Enter tags separated by commas\")\n      .addText((text) => {\n        text.inputEl.addClass(\"quick-task-tags-input\");\n        text.setPlaceholder(\"tag1, tag2, tag3\");\n        text.onChange((value) => {\n          this.taskTags = value\n            .split(\",\")\n            .map((tag) => tag.trim())\n            .filter((tag) => tag.length > 0);\n        });\n      });\n\n    // Action buttons\n    const buttonDiv = contentEl.createDiv({ cls: \"quick-task-buttons\" });\n\n    // Create button\n    const createBtn = buttonDiv.createEl(\"button\", {\n      text: \"Create Task\",\n      cls: \"mod-cta\",\n    });\n    createBtn.addEventListener(\"click\", async () => {\n      await this.createTask();\n    });\n\n    // Create and continue button\n    const createContinueBtn = buttonDiv.createEl(\"button\", {\n      text: \"Create & Continue\",\n      cls: \"mod-primary\",\n    });\n    createContinueBtn.addEventListener(\"click\", async () => {\n      const success = await this.createTask();\n      if (success) {\n        // Clear form for next task\n        this.resetForm();\n        // Reopen modal\n        this.onOpen();\n      }\n    });\n\n    // Cancel button\n    const cancelBtn = buttonDiv.createEl(\"button\", {\n      text: \"Cancel\",\n    });\n    cancelBtn.addEventListener(\"click\", () => {\n      this.close();\n    });\n\n    // Add styles\n    this.addStyles();\n\n    // Handle Enter key to create task\n    contentEl.addEventListener(\"keydown\", async (e: KeyboardEvent) => {\n      if (e.key === \"Enter\" && e.ctrlKey) {\n        await this.createTask();\n      }\n    });\n  }\n\n  onClose() {\n    const { contentEl } = this;\n    contentEl.empty();\n  }\n\n  /**\n   * Load current project context\n   */\n  private async loadProjectContext() {\n    try {\n      const response = await this.getCurrentProjectUseCase.execute({\n        activeFile: this.activeFile,\n        preferences: {\n          includeCompleted: false,\n          maxResults: 10,\n          selectionStrategy: \"context\",\n        },\n      });\n\n      if (response.success && response.currentProject) {\n        this.currentProject = response.currentProject;\n      }\n\n      if (response.availableProjects && response.availableProjects.length > 0) {\n        this.availableProjects = response.availableProjects;\n      }\n    } catch (error) {\n      console.error(\"Failed to load project context:\", error);\n    }\n  }\n\n  /**\n   * Create the task\n   */\n  private async createTask(): Promise<boolean> {\n    // Validate required fields\n    if (!this.taskTitle || this.taskTitle.trim().length === 0) {\n      new Notice(\"Task title is required\");\n      return false;\n    }\n\n    try {\n      // Build request\n      const request: CreateTaskRequest = {\n        title: this.taskTitle.trim(),\n        description: this.taskDescription.trim() || undefined,\n        priority: this.taskPriority,\n        status: this.taskStatus,\n        projectId: this.selectedProjectId,\n        dueDate: this.taskDueDate || undefined,\n        estimatedHours: this.taskEstimatedHours,\n        tags: this.taskTags,\n        context: {\n          activeFile: this.activeFile,\n        },\n      };\n\n      // Execute use case\n      const response = await this.createTaskUseCase.execute(request);\n\n      if (response.success) {\n        new Notice(`Task \"${response.task?.title}\" created successfully`);\n        this.close();\n        return true;\n      } else {\n        new Notice(`Failed to create task: ${response.message}`);\n        console.error(\"Task creation failed:\", response.errors);\n        return false;\n      }\n    } catch (error) {\n      new Notice(`Error creating task: ${error.message}`);\n      console.error(\"Task creation error:\", error);\n      return false;\n    }\n  }\n\n  /**\n   * Reset form fields\n   */\n  private resetForm() {\n    this.taskTitle = \"\";\n    this.taskDescription = \"\";\n    this.taskPriority = \"medium\";\n    this.taskStatus = \"todo\";\n    this.taskDueDate = \"\";\n    this.taskEstimatedHours = undefined;\n    this.taskTags = [];\n    // Keep project context\n  }\n\n  /**\n   * Add custom styles\n   */\n  private addStyles() {\n    const style = document.createElement(\"style\");\n    style.textContent = `\n      .quick-task-project {\n        padding: 10px;\n        margin-bottom: 15px;\n        background: var(--background-secondary);\n        border-radius: 5px;\n      }\n\n      .quick-task-project-current {\n        font-weight: bold;\n        color: var(--text-accent);\n      }\n\n      .quick-task-row {\n        display: flex;\n        gap: 15px;\n        margin-bottom: 15px;\n      }\n\n      .quick-task-row .setting-item {\n        flex: 1;\n        margin-bottom: 0;\n      }\n\n      .quick-task-title-input {\n        font-size: 1.1em;\n        font-weight: bold;\n      }\n\n      .quick-task-description-input {\n        font-family: var(--font-monospace);\n        min-height: 60px;\n      }\n\n      .quick-task-tags-input {\n        font-family: var(--font-monospace);\n      }\n\n      .quick-task-buttons {\n        display: flex;\n        justify-content: flex-end;\n        gap: 10px;\n        margin-top: 20px;\n        padding-top: 15px;\n        border-top: 1px solid var(--background-modifier-border);\n      }\n\n      .quick-task-buttons button {\n        padding: 8px 16px;\n      }\n    `;\n    document.head.appendChild(style);\n  }\n}\n"],"version":3}