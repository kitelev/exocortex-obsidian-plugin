9079a0104ab27d0f28bb41ec48cf96a6
"use strict";
/**
 * Integration tests for SPARQLEngine caching functionality
 */
Object.defineProperty(exports, "__esModule", { value: true });
const SPARQLEngine_1 = require("../../src/application/SPARQLEngine");
const Graph_1 = require("../../src/domain/semantic/core/Graph");
const Triple_1 = require("../../src/domain/semantic/core/Triple");
describe('SPARQLEngine Caching Integration', () => {
    let engine;
    let graph;
    beforeEach(() => {
        graph = new Graph_1.Graph();
        // Add test data
        graph.add(new Triple_1.Triple(new Triple_1.IRI('file://test1'), new Triple_1.IRI('dc:title'), Triple_1.Literal.string('Test Document 1')));
        graph.add(new Triple_1.Triple(new Triple_1.IRI('file://test1'), new Triple_1.IRI('rdf:type'), Triple_1.Literal.string('Document')));
        graph.add(new Triple_1.Triple(new Triple_1.IRI('file://test1'), new Triple_1.IRI('ex:priority'), Triple_1.Literal.string('high')));
        graph.add(new Triple_1.Triple(new Triple_1.IRI('file://test2'), new Triple_1.IRI('dc:title'), Triple_1.Literal.string('Test Document 2')));
        graph.add(new Triple_1.Triple(new Triple_1.IRI('file://test2'), new Triple_1.IRI('rdf:type'), Triple_1.Literal.string('Note')));
        graph.add(new Triple_1.Triple(new Triple_1.IRI('file://test2'), new Triple_1.IRI('ex:priority'), Triple_1.Literal.string('low')));
        graph.add(new Triple_1.Triple(new Triple_1.IRI('file://test3'), new Triple_1.IRI('dc:title'), Triple_1.Literal.string('Test Document 3')));
        graph.add(new Triple_1.Triple(new Triple_1.IRI('file://test3'), new Triple_1.IRI('rdf:type'), Triple_1.Literal.string('Document')));
        graph.add(new Triple_1.Triple(new Triple_1.IRI('file://test3'), new Triple_1.IRI('ex:status'), Triple_1.Literal.string('complete')));
        // Initialize engine with cache enabled
        engine = new SPARQLEngine_1.SPARQLEngine(graph, {
            enabled: true,
            maxSize: 100,
            defaultTTL: 60000 // 1 minute
        });
    });
    afterEach(() => {
        engine.destroy();
    });
    describe('SELECT query caching', () => {
        it('should cache SELECT query results', () => {
            const query = 'SELECT ?s ?title WHERE { ?s dc:title ?title }';
            // First execution - should miss cache
            const result1 = engine.select(query);
            expect(result1.cached).toBe(false);
            expect(result1.results.length).toBe(3);
            // Second execution - should hit cache
            const result2 = engine.select(query);
            expect(result2.cached).toBe(true);
            expect(result2.results).toEqual(result1.results);
        });
        it('should cache different SELECT queries separately', () => {
            const query1 = 'SELECT ?s WHERE { ?s rdf:type "Document" }';
            const query2 = 'SELECT ?s WHERE { ?s rdf:type "Note" }';
            const result1 = engine.select(query1);
            const result2 = engine.select(query2);
            expect(result1.cached).toBe(false);
            expect(result2.cached).toBe(false);
            expect(result1.results.length).toBe(2); // test1 and test3
            expect(result2.results.length).toBe(1); // test2
            // Cache should work for both queries independently
            const cachedResult1 = engine.select(query1);
            const cachedResult2 = engine.select(query2);
            expect(cachedResult1.cached).toBe(true);
            expect(cachedResult2.cached).toBe(true);
        });
        it('should handle query normalization for caching', () => {
            const query1 = 'SELECT ?s ?title WHERE { ?s dc:title ?title }';
            const query2 = '  SELECT   ?s   ?title   WHERE   {   ?s   dc:title   ?title   }  ';
            const query3 = 'SELECT\n?s\n?title\nWHERE\n{\n?s\ndc:title\n?title\n}';
            // Debug cache key generation
            const cache = engine.queryCache;
            const key1 = cache.createCacheKey(`SELECT:${query1}`);
            const key2 = cache.createCacheKey(`SELECT:${query2}`);
            const key3 = cache.createCacheKey(`SELECT:${query3}`);
            console.log('Cache key 1:', key1);
            console.log('Cache key 2:', key2);
            console.log('Cache key 3:', key3);
            console.log('Keys match?', key1 === key2, key1 === key3);
            const result1 = engine.select(query1);
            expect(result1.cached).toBe(false);
            // These should all hit the same cache entry
            const result2 = engine.select(query2);
            const result3 = engine.select(query3);
            expect(result2.cached).toBe(true);
            expect(result3.cached).toBe(true);
            expect(result2.results).toEqual(result1.results);
            expect(result3.results).toEqual(result1.results);
        });
        it('should cache empty results', () => {
            const query = 'SELECT ?s WHERE { ?s ex:nonexistent_predicate ?o }';
            const result1 = engine.select(query);
            expect(result1.cached).toBe(false);
            expect(result1.results.length).toBe(0);
            const result2 = engine.select(query);
            expect(result2.cached).toBe(true);
            expect(result2.results.length).toBe(0);
        });
        it('should cache queries with LIMIT', () => {
            const query = 'SELECT ?s ?title WHERE { ?s dc:title ?title } LIMIT 2';
            const result1 = engine.select(query);
            expect(result1.cached).toBe(false);
            expect(result1.results.length).toBe(2);
            const result2 = engine.select(query);
            expect(result2.cached).toBe(true);
            expect(result2.results.length).toBe(2);
            expect(result2.results).toEqual(result1.results);
        });
    });
    describe('CONSTRUCT query caching', () => {
        it('should cache CONSTRUCT query results', () => {
            const query = 'CONSTRUCT { ?s ex:hasType ?type } WHERE { ?s rdf:type ?type }';
            const result1 = engine.construct(query);
            expect(result1.cached).toBe(false);
            expect(result1.triples.length).toBe(3);
            const result2 = engine.construct(query);
            expect(result2.cached).toBe(true);
            expect(result2.triples.length).toBe(3);
            // Results should be identical
            expect(result2.triples).toEqual(result1.triples);
        });
        it('should not add cached triples to graph again', () => {
            const query = 'CONSTRUCT { ?s ex:derived_type ?type } WHERE { ?s rdf:type ?type }';
            const originalSize = graph.size();
            // First execution - CONSTRUCT doesn't modify the graph
            const result1 = engine.construct(query);
            expect(result1.cached).toBe(false);
            // There are 3 triples with 'type' predicate (Document, Note, Document)
            expect(result1.triples.length).toBe(3);
            expect(graph.size()).toBe(originalSize); // Graph unchanged
            // Second execution should use cache
            const result2 = engine.construct(query);
            expect(result2.cached).toBe(true);
            expect(graph.size()).toBe(originalSize); // Still unchanged
            expect(result2.triples).toEqual(result1.triples);
        });
        it('should cache CONSTRUCT queries with LIMIT', () => {
            const query = 'CONSTRUCT { ?s ex:limited_type ?type } WHERE { ?s rdf:type ?type } LIMIT 2';
            const result1 = engine.construct(query);
            expect(result1.cached).toBe(false);
            expect(result1.triples.length).toBe(2);
            const result2 = engine.construct(query);
            expect(result2.cached).toBe(true);
            expect(result2.triples.length).toBe(2);
            expect(result2.triples).toEqual(result1.triples);
        });
        it('should handle empty CONSTRUCT results', () => {
            const query = 'CONSTRUCT { ?s ex:empty_construct ?value } WHERE { ?s ex:nonexistent ?value }';
            const result1 = engine.construct(query);
            expect(result1.cached).toBe(false);
            expect(result1.triples.length).toBe(0);
            const result2 = engine.construct(query);
            expect(result2.cached).toBe(true);
            expect(result2.triples.length).toBe(0);
        });
    });
    describe('cache key generation', () => {
        it('should distinguish between SELECT and CONSTRUCT queries', () => {
            const baseQuery = '{ ?s rdf:type ?type }';
            const selectQuery = `SELECT ?s ?type WHERE ${baseQuery}`;
            const constructQuery = `CONSTRUCT { ?s ex:hasType ?type } WHERE ${baseQuery}`;
            const selectResult = engine.select(selectQuery);
            const constructResult = engine.construct(constructQuery);
            expect(selectResult.cached).toBe(false);
            expect(constructResult.cached).toBe(false);
            // Should cache separately
            const selectResult2 = engine.select(selectQuery);
            const constructResult2 = engine.construct(constructQuery);
            expect(selectResult2.cached).toBe(true);
            expect(constructResult2.cached).toBe(true);
        });
        it('should handle case insensitive caching', () => {
            const query1 = 'SELECT ?s WHERE { ?s rdf:type "Document" }';
            const query2 = 'select ?s where { ?s rdf:type "document" }';
            const result1 = engine.select(query1);
            expect(result1.cached).toBe(false);
            const result2 = engine.select(query2);
            expect(result2.cached).toBe(true);
        });
    });
    describe('cache statistics and management', () => {
        it('should track cache statistics correctly', () => {
            const query = 'SELECT ?s WHERE { ?s rdf:type "Document" }';
            let stats = engine.getCacheStatistics();
            expect(stats.hits).toBe(0);
            expect(stats.misses).toBe(0);
            expect(stats.totalQueries).toBe(0);
            // First query - cache miss
            engine.select(query);
            stats = engine.getCacheStatistics();
            expect(stats.hits).toBe(0);
            expect(stats.misses).toBe(1);
            expect(stats.totalQueries).toBe(1);
            // Second query - cache hit
            engine.select(query);
            stats = engine.getCacheStatistics();
            expect(stats.hits).toBe(1);
            expect(stats.misses).toBe(1);
            expect(stats.totalQueries).toBe(2);
            expect(stats.hitRate).toBe(50);
        });
        it('should invalidate cache properly', () => {
            const query = 'SELECT ?s WHERE { ?s rdf:type "Document" }';
            // Cache the query
            const result1 = engine.select(query);
            expect(result1.cached).toBe(false);
            const result2 = engine.select(query);
            expect(result2.cached).toBe(true);
            // Invalidate cache
            engine.invalidateCache();
            // Should miss cache after invalidation
            const result3 = engine.select(query);
            expect(result3.cached).toBe(false);
        });
        it('should cleanup expired entries', () => {
            jest.useFakeTimers();
            const shortTTLEngine = new SPARQLEngine_1.SPARQLEngine(graph, {
                enabled: true,
                defaultTTL: 1000 // 1 second
            });
            const query = 'SELECT ?s WHERE { ?s rdf:type "Document" }';
            // Cache query
            const result1 = shortTTLEngine.select(query);
            expect(result1.cached).toBe(false);
            // Should hit cache immediately
            const result2 = shortTTLEngine.select(query);
            expect(result2.cached).toBe(true);
            // Advance time past TTL
            jest.advanceTimersByTime(2000);
            // Should miss cache after expiration
            const result3 = shortTTLEngine.select(query);
            expect(result3.cached).toBe(false);
            shortTTLEngine.destroy();
            jest.useRealTimers();
        });
        it('should update cache configuration', () => {
            const query = 'SELECT ?s WHERE { ?s rdf:type "Document" }';
            // Cache with original config
            engine.select(query);
            // Update config to disable caching
            engine.updateCacheConfig({ enabled: false });
            // Should not hit cache when disabled
            const result = engine.select(query);
            expect(result.cached).toBe(false);
            // Re-enable and should miss cache (was cleared when disabled)
            engine.updateCacheConfig({ enabled: true });
            const result2 = engine.select(query);
            expect(result2.cached).toBe(false);
        });
    });
    describe('performance impact', () => {
        it('should improve performance for repeated queries', () => {
            const complexQuery = `
                SELECT ?s ?title ?type ?priority WHERE {
                    ?s dc:title ?title .
                    ?s rdf:type ?type .
                    ?s ex:priority ?priority
                }
            `;
            // First execution (cache miss)
            const start1 = Date.now();
            const result1 = engine.select(complexQuery);
            const time1 = Date.now() - start1;
            expect(result1.cached).toBe(false);
            // Second execution (cache hit)
            const start2 = Date.now();
            const result2 = engine.select(complexQuery);
            const time2 = Date.now() - start2;
            expect(result2.cached).toBe(true);
            // Cached execution should be faster (though this is timing-dependent)
            // We mainly verify that the cache works correctly
            expect(result2.results).toEqual(result1.results);
        });
    });
    describe('error handling with cache', () => {
        it('should not cache invalid queries', () => {
            const invalidQuery = 'INVALID SPARQL SYNTAX';
            expect(() => engine.select(invalidQuery)).toThrow();
            // Cache should remain unaffected - but the cache miss is still counted
            const stats = engine.getCacheStatistics();
            expect(stats.totalQueries).toBe(1);
            expect(stats.hits).toBe(0);
            expect(stats.misses).toBe(1);
        });
        it('should handle cache operations when engine is destroyed', () => {
            const query = 'SELECT ?s WHERE { ?s rdf:type "Document" }';
            // Cache a query
            engine.select(query);
            // Destroy engine
            engine.destroy();
            // Should not throw errors
            expect(() => engine.getCacheStatistics()).not.toThrow();
            expect(() => engine.invalidateCache()).not.toThrow();
            expect(() => engine.cleanupCache()).not.toThrow();
        });
    });
    describe('cache with graph modifications', () => {
        it('should work correctly with graph that changes over time', () => {
            const query = 'SELECT ?s WHERE { ?s rdf:type "NewType" }';
            // Initially no results
            const result1 = engine.select(query);
            expect(result1.cached).toBe(false);
            expect(result1.results.length).toBe(0);
            // Cache hit for same query
            const result2 = engine.select(query);
            expect(result2.cached).toBe(true);
            expect(result2.results.length).toBe(0);
            // Note: In real usage, cache would be invalidated when graph changes
            // This test just verifies that cache works with graph state at time of caching
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvaW50ZWdyYXRpb24vU1BBUlFMRW5naW5lLmNhY2hlLnRlc3QudHMiLCJtYXBwaW5ncyI6IjtBQUFBOztHQUVHOztBQUVILHFFQUFpRztBQUNqRyxnRUFBNkQ7QUFDN0Qsa0VBQTZFO0FBRTdFLFFBQVEsQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7SUFDOUMsSUFBSSxNQUFvQixDQUFDO0lBQ3pCLElBQUksS0FBWSxDQUFDO0lBRWpCLFVBQVUsQ0FBQyxHQUFHLEVBQUU7UUFDWixLQUFLLEdBQUcsSUFBSSxhQUFLLEVBQUUsQ0FBQztRQUVwQixnQkFBZ0I7UUFDaEIsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJLGVBQU0sQ0FBQyxJQUFJLFlBQUcsQ0FBQyxjQUFjLENBQUMsRUFBRSxJQUFJLFlBQUcsQ0FBQyxVQUFVLENBQUMsRUFBRSxnQkFBTyxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUN2RyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksZUFBTSxDQUFDLElBQUksWUFBRyxDQUFDLGNBQWMsQ0FBQyxFQUFFLElBQUksWUFBRyxDQUFDLFVBQVUsQ0FBQyxFQUFFLGdCQUFPLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUNoRyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksZUFBTSxDQUFDLElBQUksWUFBRyxDQUFDLGNBQWMsQ0FBQyxFQUFFLElBQUksWUFBRyxDQUFDLGFBQWEsQ0FBQyxFQUFFLGdCQUFPLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUUvRixLQUFLLENBQUMsR0FBRyxDQUFDLElBQUksZUFBTSxDQUFDLElBQUksWUFBRyxDQUFDLGNBQWMsQ0FBQyxFQUFFLElBQUksWUFBRyxDQUFDLFVBQVUsQ0FBQyxFQUFFLGdCQUFPLENBQUMsTUFBTSxDQUFDLGlCQUFpQixDQUFD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LEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNyQyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNuQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFdkMsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNyQyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0MsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsaUNBQWlDLEVBQUUsR0FBRyxFQUFFO1lBQ3ZDLE1BQU0sS0FBSyxHQUFHLHVEQUF1RCxDQUFDO1lBRXRFLE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDbkMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRXZDLE1BQU0sT0FBTyxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7WUFDckMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbEMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3ZDLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxD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QyxZQUFZLEVBQUUsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUN0RCxDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGdDQUFnQyxFQUFFLEdBQUcsRUFBRTtRQUM1QyxFQUFFLENBQUMseURBQXlELEVBQUUsR0FBRyxFQUFFO1lBQy9ELE1BQU0sS0FBSyxHQUFHLDJDQUEyQyxDQUFDO1lBRTFELHVCQUF1QjtZQUN2QixNQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ3JDLE1BQU0sQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ25DLE1BQU0sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztZQUV2QywyQkFBMkI7WUFDM0IsTUFBTSxPQUFPLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNyQyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsQyxNQUFNLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUM7WUFFdkMscUVBQXFFO1lBQ3JFLCtFQUErRTtRQUNuRixDQUFDLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvaW50ZWdyYXRpb24vU1BBUlFMRW5naW5lLmNhY2hlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBJbnRlZ3JhdGlvbiB0ZXN0cyBmb3IgU1BBUlFMRW5naW5lIGNhY2hpbmcgZnVuY3Rpb25hbGl0eVxuICovXG5cbmltcG9ydCB7IFNQQVJRTEVuZ2luZSwgQ29uc3RydWN0UmVzdWx0LCBTZWxlY3RSZXN1bHQgfSBmcm9tICcuLi8uLi9zcmMvYXBwbGljYXRpb24vU1BBUlFMRW5naW5lJztcbmltcG9ydCB7IEdyYXBoIH0gZnJvbSAnLi4vLi4vc3JjL2RvbWFpbi9zZW1hbnRpYy9jb3JlL0dyYXBoJztcbmltcG9ydCB7IFRyaXBsZSwgSVJJLCBMaXRlcmFsIH0gZnJvbSAnLi4vLi4vc3JjL2RvbWFpbi9zZW1hbnRpYy9jb3JlL1RyaXBsZSc7XG5cbmRlc2NyaWJlKCdTUEFSUUxFbmdpbmUgQ2FjaGluZyBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBsZXQgZW5naW5lOiBTUEFSUUxFbmdpbmU7XG4gICAgbGV0IGdyYXBoOiBHcmFwaDtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgICBncmFwaCA9IG5ldyBHcmFwaCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHRlc3QgZGF0YVxuICAgICAgICBncmFwaC5hZGQobmV3IFRyaXBsZShuZXcgSVJJKCdmaWxlOi8vdGVzdDEnKSwgbmV3IElSSSgnZGM6dGl0bGUnKSwgTGl0ZXJhbC5zdHJpbmcoJ1Rlc3QgRG9jdW1lbnQgMScpKSk7XG4gICAgICAgIGdyYXBoLmFkZChuZXcgVHJpcGxlKG5ldyBJUkkoJ2ZpbGU6Ly90ZXN0MScpLCBuZXcgSVJJKCdyZGY6dHlwZScpLCBMaXRlcmFsLnN0cmluZygnRG9jdW1lbnQnKSkpO1xuICAgICAgICBncmFwaC5hZGQobmV3IFRyaXBsZShuZXcgSVJJKCdmaWxlOi8vdGVzdDEnKSwgbmV3IElSSSgnZXg6cHJpb3JpdHknKSwgTGl0ZXJhbC5zdHJpbmcoJ2hpZ2gnKSkpO1xuICAgICAgICBcbiAgICAgICAgZ3JhcGguYWRkKG5ldyBUcmlwbGUobmV3IElSSSgnZmlsZTovL3Rlc3QyJyksIG5ldyBJUkkoJ2RjOnRpdGxlJyksIExpdGVyYWwuc3RyaW5nKCdUZXN0IERvY3VtZW50IDInKSkpO1xuICAgICAgICBncmFwaC5hZGQobmV3IFRyaXBsZShuZXcgSVJJKCdmaWxlOi8vdGVzdDInKSwgbmV3IElSSSgncmRmOnR5cGUnKSwgTGl0ZXJhbC5zdHJpbmcoJ05vdGUnKSkpO1xuICAgICAgICBncmFwaC5hZGQobmV3IFRyaXBsZShuZXcgSVJJKCdmaWxlOi8vdGVzdDInKSwgbmV3IElSSSgnZXg6cHJpb3JpdHknKSwgTGl0ZXJhbC5zdHJpbmcoJ2xvdycpKSk7XG4gICAgICAgIFxuICAgICAgICBncmFwaC5hZGQobmV3IFRyaXBsZShuZXcgSVJJKCdmaWxlOi8vdGVzdDMnKSwgbmV3IElSSSgnZGM6dGl0bGUnKSwgTGl0ZXJhbC5zdHJpbmcoJ1Rlc3QgRG9jdW1lbnQgMycpKSk7XG4gICAgICAgIGdyYXBoLmFkZChuZXcgVHJpcGxlKG5ldyBJUkkoJ2ZpbGU6Ly90ZXN0MycpLCBuZXcgSVJJKCdyZGY6dHlwZScpLCBMaXRlcmFsLnN0cmluZygnRG9jdW1lbnQnKSkpO1xuICAgICAgICBncmFwaC5hZGQobmV3IFRyaXBsZShuZXcgSVJJKCdmaWxlOi8vdGVzdDMnKSwgbmV3IElSSSgnZXg6c3RhdHVzJyksIExpdGVyYWwuc3RyaW5nKCdjb21wbGV0ZScpKSk7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBlbmdpbmUgd2l0aCBjYWNoZSBlbmFibGVkXG4gICAgICAgIGVuZ2luZSA9IG5ldyBTUEFSUUxFbmdpbmUoZ3JhcGgsIHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICBtYXhTaXplOiAxMDAsXG4gICAgICAgICAgICBkZWZhdWx0VFRMOiA2MDAwMCAvLyAxIG1pbnV0ZVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgICAgIGVuZ2luZS5kZXN0cm95KCk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnU0VMRUNUIHF1ZXJ5IGNhY2hpbmcnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgY2FjaGUgU0VMRUNUIHF1ZXJ5IHJlc3VsdHMnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeSA9ICdTRUxFQ1QgP3MgP3RpdGxlIFdIRVJFIHsgP3MgZGM6dGl0bGUgP3RpdGxlIH0nO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGaXJzdCBleGVjdXRpb24gLSBzaG91bGQgbWlzcyBjYWNoZVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0MSA9IGVuZ2luZS5zZWxlY3QocXVlcnkpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDEuY2FjaGVkKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQxLnJlc3VsdHMubGVuZ3RoKS50b0JlKDMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTZWNvbmQgZXhlY3V0aW9uIC0gc2hvdWxkIGhpdCBjYWNoZVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0MiA9IGVuZ2luZS5zZWxlY3QocXVlcnkpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDIuY2FjaGVkKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDIucmVzdWx0cykudG9FcXVhbChyZXN1bHQxLnJlc3VsdHMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGNhY2hlIGRpZmZlcmVudCBTRUxFQ1QgcXVlcmllcyBzZXBhcmF0ZWx5JywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcXVlcnkxID0gJ1NFTEVDVCA/cyBXSEVSRSB7ID9zIHJkZjp0eXBlIFwiRG9jdW1lbnRcIiB9JztcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5MiA9ICdTRUxFQ1QgP3MgV0hFUkUgeyA/cyByZGY6dHlwZSBcIk5vdGVcIiB9JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0MSA9IGVuZ2luZS5zZWxlY3QocXVlcnkxKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdDIgPSBlbmdpbmUuc2VsZWN0KHF1ZXJ5Mik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQxLmNhY2hlZCkudG9CZShmYWxzZSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Mi5jYWNoZWQpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDEucmVzdWx0cy5sZW5ndGgpLnRvQmUoMik7IC8vIHRlc3QxIGFuZCB0ZXN0M1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDIucmVzdWx0cy5sZW5ndGgpLnRvQmUoMSk7IC8vIHRlc3QyXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENhY2hlIHNob3VsZCB3b3JrIGZvciBib3RoIHF1ZXJpZXMgaW5kZXBlbmRlbnRseVxuICAgICAgICAgICAgY29uc3QgY2FjaGVkUmVzdWx0MSA9IGVuZ2luZS5zZWxlY3QocXVlcnkxKTtcbiAgICAgICAgICAgIGNvbnN0IGNhY2hlZFJlc3VsdDIgPSBlbmdpbmUuc2VsZWN0KHF1ZXJ5Mik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChjYWNoZWRSZXN1bHQxLmNhY2hlZCkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdChjYWNoZWRSZXN1bHQyLmNhY2hlZCkudG9CZSh0cnVlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBoYW5kbGUgcXVlcnkgbm9ybWFsaXphdGlvbiBmb3IgY2FjaGluZycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5MSA9ICdTRUxFQ1QgP3MgP3RpdGxlIFdIRVJFIHsgP3MgZGM6dGl0bGUgP3RpdGxlIH0nO1xuICAgICAgICAgICAgY29uc3QgcXVlcnkyID0gJyAgU0VMRUNUICAgP3MgICA/dGl0bGUgICBXSEVSRSAgIHsgICA/cyAgIGRjOnRpdGxlICAgP3RpdGxlICAgfSAgJztcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5MyA9ICdTRUxFQ1RcXG4/c1xcbj90aXRsZVxcbldIRVJFXFxue1xcbj9zXFxuZGM6dGl0bGVcXG4/dGl0bGVcXG59JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRGVidWcgY2FjaGUga2V5IGdlbmVyYXRpb25cbiAgICAgICAgICAgIGNvbnN0IGNhY2hlID0gKGVuZ2luZSBhcyBhbnkpLnF1ZXJ5Q2FjaGU7XG4gICAgICAgICAgICBjb25zdCBrZXkxID0gY2FjaGUuY3JlYXRlQ2FjaGVLZXkoYFNFTEVDVDoke3F1ZXJ5MX1gKTtcbiAgICAgICAgICAgIGNvbnN0IGtleTIgPSBjYWNoZS5jcmVhdGVDYWNoZUtleShgU0VMRUNUOiR7cXVlcnkyfWApO1xuICAgICAgICAgICAgY29uc3Qga2V5MyA9IGNhY2hlLmNyZWF0ZUNhY2hlS2V5KGBTRUxFQ1Q6JHtxdWVyeTN9YCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDYWNoZSBrZXkgMTonLCBrZXkxKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDYWNoZSBrZXkgMjonLCBrZXkyKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDYWNoZSBrZXkgMzonLCBrZXkzKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdLZXlzIG1hdGNoPycsIGtleTEgPT09IGtleTIsIGtleTEgPT09IGtleTMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQxID0gZW5naW5lLnNlbGVjdChxdWVyeTEpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDEuY2FjaGVkKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gVGhlc2Ugc2hvdWxkIGFsbCBoaXQgdGhlIHNhbWUgY2FjaGUgZW50cnlcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdDIgPSBlbmdpbmUuc2VsZWN0KHF1ZXJ5Mik7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQzID0gZW5naW5lLnNlbGVjdChxdWVyeTMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Mi5jYWNoZWQpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0My5jYWNoZWQpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Mi5yZXN1bHRzKS50b0VxdWFsKHJlc3VsdDEucmVzdWx0cyk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0My5yZXN1bHRzKS50b0VxdWFsKHJlc3VsdDEucmVzdWx0cyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgY2FjaGUgZW1wdHkgcmVzdWx0cycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5ID0gJ1NFTEVDVCA/cyBXSEVSRSB7ID9zIGV4Om5vbmV4aXN0ZW50X3ByZWRpY2F0ZSA/byB9JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0MSA9IGVuZ2luZS5zZWxlY3QocXVlcnkpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDEuY2FjaGVkKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQxLnJlc3VsdHMubGVuZ3RoKS50b0JlKDApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQyID0gZW5naW5lLnNlbGVjdChxdWVyeSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Mi5jYWNoZWQpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Mi5yZXN1bHRzLmxlbmd0aCkudG9CZSgwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBjYWNoZSBxdWVyaWVzIHdpdGggTElNSVQnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeSA9ICdTRUxFQ1QgP3MgP3RpdGxlIFdIRVJFIHsgP3MgZGM6dGl0bGUgP3RpdGxlIH0gTElNSVQgMic7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdDEgPSBlbmdpbmUuc2VsZWN0KHF1ZXJ5KTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQxLmNhY2hlZCkudG9CZShmYWxzZSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0MS5yZXN1bHRzLmxlbmd0aCkudG9CZSgyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0MiA9IGVuZ2luZS5zZWxlY3QocXVlcnkpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDIuY2FjaGVkKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDIucmVzdWx0cy5sZW5ndGgpLnRvQmUoMik7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Mi5yZXN1bHRzKS50b0VxdWFsKHJlc3VsdDEucmVzdWx0cyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0NPTlNUUlVDVCBxdWVyeSBjYWNoaW5nJywgKCkgPT4ge1xuICAgICAgICBpdCgnc2hvdWxkIGNhY2hlIENPTlNUUlVDVCBxdWVyeSByZXN1bHRzJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcXVlcnkgPSAnQ09OU1RSVUNUIHsgP3MgZXg6aGFzVHlwZSA/dHlwZSB9IFdIRVJFIHsgP3MgcmRmOnR5cGUgP3R5cGUgfSc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdDEgPSBlbmdpbmUuY29uc3RydWN0KHF1ZXJ5KTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQxLmNhY2hlZCkudG9CZShmYWxzZSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0MS50cmlwbGVzLmxlbmd0aCkudG9CZSgzKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0MiA9IGVuZ2luZS5jb25zdHJ1Y3QocXVlcnkpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDIuY2FjaGVkKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDIudHJpcGxlcy5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlc3VsdHMgc2hvdWxkIGJlIGlkZW50aWNhbFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDIudHJpcGxlcykudG9FcXVhbChyZXN1bHQxLnRyaXBsZXMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIG5vdCBhZGQgY2FjaGVkIHRyaXBsZXMgdG8gZ3JhcGggYWdhaW4nLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeSA9ICdDT05TVFJVQ1QgeyA/cyBleDpkZXJpdmVkX3R5cGUgP3R5cGUgfSBXSEVSRSB7ID9zIHJkZjp0eXBlID90eXBlIH0nO1xuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxTaXplID0gZ3JhcGguc2l6ZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBGaXJzdCBleGVjdXRpb24gLSBDT05TVFJVQ1QgZG9lc24ndCBtb2RpZnkgdGhlIGdyYXBoXG4gICAgICAgICAgICBjb25zdCByZXN1bHQxID0gZW5naW5lLmNvbnN0cnVjdChxdWVyeSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0MS5jYWNoZWQpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgLy8gVGhlcmUgYXJlIDMgdHJpcGxlcyB3aXRoICd0eXBlJyBwcmVkaWNhdGUgKERvY3VtZW50LCBOb3RlLCBEb2N1bWVudClcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQxLnRyaXBsZXMubGVuZ3RoKS50b0JlKDMpO1xuICAgICAgICAgICAgZXhwZWN0KGdyYXBoLnNpemUoKSkudG9CZShvcmlnaW5hbFNpemUpOyAvLyBHcmFwaCB1bmNoYW5nZWRcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2Vjb25kIGV4ZWN1dGlvbiBzaG91bGQgdXNlIGNhY2hlXG4gICAgICAgICAgICBjb25zdCByZXN1bHQyID0gZW5naW5lLmNvbnN0cnVjdChxdWVyeSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Mi5jYWNoZWQpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QoZ3JhcGguc2l6ZSgpKS50b0JlKG9yaWdpbmFsU2l6ZSk7IC8vIFN0aWxsIHVuY2hhbmdlZFxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDIudHJpcGxlcykudG9FcXVhbChyZXN1bHQxLnRyaXBsZXMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGNhY2hlIENPTlNUUlVDVCBxdWVyaWVzIHdpdGggTElNSVQnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeSA9ICdDT05TVFJVQ1QgeyA/cyBleDpsaW1pdGVkX3R5cGUgP3R5cGUgfSBXSEVSRSB7ID9zIHJkZjp0eXBlID90eXBlIH0gTElNSVQgMic7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdDEgPSBlbmdpbmUuY29uc3RydWN0KHF1ZXJ5KTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQxLmNhY2hlZCkudG9CZShmYWxzZSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0MS50cmlwbGVzLmxlbmd0aCkudG9CZSgyKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0MiA9IGVuZ2luZS5jb25zdHJ1Y3QocXVlcnkpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDIuY2FjaGVkKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDIudHJpcGxlcy5sZW5ndGgpLnRvQmUoMik7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Mi50cmlwbGVzKS50b0VxdWFsKHJlc3VsdDEudHJpcGxlcyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGVtcHR5IENPTlNUUlVDVCByZXN1bHRzJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcXVlcnkgPSAnQ09OU1RSVUNUIHsgP3MgZXg6ZW1wdHlfY29uc3RydWN0ID92YWx1ZSB9IFdIRVJFIHsgP3MgZXg6bm9uZXhpc3RlbnQgP3ZhbHVlIH0nO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQxID0gZW5naW5lLmNvbnN0cnVjdChxdWVyeSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0MS5jYWNoZWQpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDEudHJpcGxlcy5sZW5ndGgpLnRvQmUoMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdDIgPSBlbmdpbmUuY29uc3RydWN0KHF1ZXJ5KTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQyLmNhY2hlZCkudG9CZSh0cnVlKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQyLnRyaXBsZXMubGVuZ3RoKS50b0JlKDApO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdjYWNoZSBrZXkgZ2VuZXJhdGlvbicsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCBkaXN0aW5ndWlzaCBiZXR3ZWVuIFNFTEVDVCBhbmQgQ09OU1RSVUNUIHF1ZXJpZXMnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBiYXNlUXVlcnkgPSAneyA/cyByZGY6dHlwZSA/dHlwZSB9JztcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdFF1ZXJ5ID0gYFNFTEVDVCA/cyA/dHlwZSBXSEVSRSAke2Jhc2VRdWVyeX1gO1xuICAgICAgICAgICAgY29uc3QgY29uc3RydWN0UXVlcnkgPSBgQ09OU1RSVUNUIHsgP3MgZXg6aGFzVHlwZSA/dHlwZSB9IFdIRVJFICR7YmFzZVF1ZXJ5fWA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdFJlc3VsdCA9IGVuZ2luZS5zZWxlY3Qoc2VsZWN0UXVlcnkpO1xuICAgICAgICAgICAgY29uc3QgY29uc3RydWN0UmVzdWx0ID0gZW5naW5lLmNvbnN0cnVjdChjb25zdHJ1Y3RRdWVyeSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGV4cGVjdChzZWxlY3RSZXN1bHQuY2FjaGVkKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChjb25zdHJ1Y3RSZXN1bHQuY2FjaGVkKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2hvdWxkIGNhY2hlIHNlcGFyYXRlbHlcbiAgICAgICAgICAgIGNvbnN0IHNlbGVjdFJlc3VsdDIgPSBlbmdpbmUuc2VsZWN0KHNlbGVjdFF1ZXJ5KTtcbiAgICAgICAgICAgIGNvbnN0IGNvbnN0cnVjdFJlc3VsdDIgPSBlbmdpbmUuY29uc3RydWN0KGNvbnN0cnVjdFF1ZXJ5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgZXhwZWN0KHNlbGVjdFJlc3VsdDIuY2FjaGVkKS50b0JlKHRydWUpO1xuICAgICAgICAgICAgZXhwZWN0KGNvbnN0cnVjdFJlc3VsdDIuY2FjaGVkKS50b0JlKHRydWUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGhhbmRsZSBjYXNlIGluc2Vuc2l0aXZlIGNhY2hpbmcnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeTEgPSAnU0VMRUNUID9zIFdIRVJFIHsgP3MgcmRmOnR5cGUgXCJEb2N1bWVudFwiIH0nO1xuICAgICAgICAgICAgY29uc3QgcXVlcnkyID0gJ3NlbGVjdCA/cyB3aGVyZSB7ID9zIHJkZjp0eXBlIFwiZG9jdW1lbnRcIiB9JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0MSA9IGVuZ2luZS5zZWxlY3QocXVlcnkxKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQxLmNhY2hlZCkudG9CZShmYWxzZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdDIgPSBlbmdpbmUuc2VsZWN0KHF1ZXJ5Mik7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Mi5jYWNoZWQpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2NhY2hlIHN0YXRpc3RpY3MgYW5kIG1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgdHJhY2sgY2FjaGUgc3RhdGlzdGljcyBjb3JyZWN0bHknLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeSA9ICdTRUxFQ1QgP3MgV0hFUkUgeyA/cyByZGY6dHlwZSBcIkRvY3VtZW50XCIgfSc7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxldCBzdGF0cyA9IGVuZ2luZS5nZXRDYWNoZVN0YXRpc3RpY3MoKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGF0cy5oaXRzKS50b0JlKDApO1xuICAgICAgICAgICAgZXhwZWN0KHN0YXRzLm1pc3NlcykudG9CZSgwKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGF0cy50b3RhbFF1ZXJpZXMpLnRvQmUoMCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZpcnN0IHF1ZXJ5IC0gY2FjaGUgbWlzc1xuICAgICAgICAgICAgZW5naW5lLnNlbGVjdChxdWVyeSk7XG4gICAgICAgICAgICBzdGF0cyA9IGVuZ2luZS5nZXRDYWNoZVN0YXRpc3RpY3MoKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGF0cy5oaXRzKS50b0JlKDApO1xuICAgICAgICAgICAgZXhwZWN0KHN0YXRzLm1pc3NlcykudG9CZSgxKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGF0cy50b3RhbFF1ZXJpZXMpLnRvQmUoMSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNlY29uZCBxdWVyeSAtIGNhY2hlIGhpdFxuICAgICAgICAgICAgZW5naW5lLnNlbGVjdChxdWVyeSk7XG4gICAgICAgICAgICBzdGF0cyA9IGVuZ2luZS5nZXRDYWNoZVN0YXRpc3RpY3MoKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGF0cy5oaXRzKS50b0JlKDEpO1xuICAgICAgICAgICAgZXhwZWN0KHN0YXRzLm1pc3NlcykudG9CZSgxKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGF0cy50b3RhbFF1ZXJpZXMpLnRvQmUoMik7XG4gICAgICAgICAgICBleHBlY3Qoc3RhdHMuaGl0UmF0ZSkudG9CZSg1MCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgaW52YWxpZGF0ZSBjYWNoZSBwcm9wZXJseScsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5ID0gJ1NFTEVDVCA/cyBXSEVSRSB7ID9zIHJkZjp0eXBlIFwiRG9jdW1lbnRcIiB9JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2FjaGUgdGhlIHF1ZXJ5XG4gICAgICAgICAgICBjb25zdCByZXN1bHQxID0gZW5naW5lLnNlbGVjdChxdWVyeSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0MS5jYWNoZWQpLnRvQmUoZmFsc2UpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQyID0gZW5naW5lLnNlbGVjdChxdWVyeSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Mi5jYWNoZWQpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEludmFsaWRhdGUgY2FjaGVcbiAgICAgICAgICAgIGVuZ2luZS5pbnZhbGlkYXRlQ2FjaGUoKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2hvdWxkIG1pc3MgY2FjaGUgYWZ0ZXIgaW52YWxpZGF0aW9uXG4gICAgICAgICAgICBjb25zdCByZXN1bHQzID0gZW5naW5lLnNlbGVjdChxdWVyeSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0My5jYWNoZWQpLnRvQmUoZmFsc2UpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGNsZWFudXAgZXhwaXJlZCBlbnRyaWVzJywgKCkgPT4ge1xuICAgICAgICAgICAgamVzdC51c2VGYWtlVGltZXJzKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHNob3J0VFRMRW5naW5lID0gbmV3IFNQQVJRTEVuZ2luZShncmFwaCwge1xuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgZGVmYXVsdFRUTDogMTAwMCAvLyAxIHNlY29uZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHF1ZXJ5ID0gJ1NFTEVDVCA/cyBXSEVSRSB7ID9zIHJkZjp0eXBlIFwiRG9jdW1lbnRcIiB9JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2FjaGUgcXVlcnlcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdDEgPSBzaG9ydFRUTEVuZ2luZS5zZWxlY3QocXVlcnkpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDEuY2FjaGVkKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2hvdWxkIGhpdCBjYWNoZSBpbW1lZGlhdGVseVxuICAgICAgICAgICAgY29uc3QgcmVzdWx0MiA9IHNob3J0VFRMRW5naW5lLnNlbGVjdChxdWVyeSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Mi5jYWNoZWQpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEFkdmFuY2UgdGltZSBwYXN0IFRUTFxuICAgICAgICAgICAgamVzdC5hZHZhbmNlVGltZXJzQnlUaW1lKDIwMDApO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBTaG91bGQgbWlzcyBjYWNoZSBhZnRlciBleHBpcmF0aW9uXG4gICAgICAgICAgICBjb25zdCByZXN1bHQzID0gc2hvcnRUVExFbmdpbmUuc2VsZWN0KHF1ZXJ5KTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQzLmNhY2hlZCkudG9CZShmYWxzZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHNob3J0VFRMRW5naW5lLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIGplc3QudXNlUmVhbFRpbWVycygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHVwZGF0ZSBjYWNoZSBjb25maWd1cmF0aW9uJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcXVlcnkgPSAnU0VMRUNUID9zIFdIRVJFIHsgP3MgcmRmOnR5cGUgXCJEb2N1bWVudFwiIH0nO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDYWNoZSB3aXRoIG9yaWdpbmFsIGNvbmZpZ1xuICAgICAgICAgICAgZW5naW5lLnNlbGVjdChxdWVyeSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjb25maWcgdG8gZGlzYWJsZSBjYWNoaW5nXG4gICAgICAgICAgICBlbmdpbmUudXBkYXRlQ2FjaGVDb25maWcoeyBlbmFibGVkOiBmYWxzZSB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2hvdWxkIG5vdCBoaXQgY2FjaGUgd2hlbiBkaXNhYmxlZFxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gZW5naW5lLnNlbGVjdChxdWVyeSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmNhY2hlZCkudG9CZShmYWxzZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFJlLWVuYWJsZSBhbmQgc2hvdWxkIG1pc3MgY2FjaGUgKHdhcyBjbGVhcmVkIHdoZW4gZGlzYWJsZWQpXG4gICAgICAgICAgICBlbmdpbmUudXBkYXRlQ2FjaGVDb25maWcoeyBlbmFibGVkOiB0cnVlIH0pO1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0MiA9IGVuZ2luZS5zZWxlY3QocXVlcnkpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDIuY2FjaGVkKS50b0JlKGZhbHNlKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgncGVyZm9ybWFuY2UgaW1wYWN0JywgKCkgPT4ge1xuICAgICAgICBpdCgnc2hvdWxkIGltcHJvdmUgcGVyZm9ybWFuY2UgZm9yIHJlcGVhdGVkIHF1ZXJpZXMnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBjb21wbGV4UXVlcnkgPSBgXG4gICAgICAgICAgICAgICAgU0VMRUNUID9zID90aXRsZSA/dHlwZSA/cHJpb3JpdHkgV0hFUkUge1xuICAgICAgICAgICAgICAgICAgICA/cyBkYzp0aXRsZSA/dGl0bGUgLlxuICAgICAgICAgICAgICAgICAgICA/cyByZGY6dHlwZSA/dHlwZSAuXG4gICAgICAgICAgICAgICAgICAgID9zIGV4OnByaW9yaXR5ID9wcmlvcml0eVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEZpcnN0IGV4ZWN1dGlvbiAoY2FjaGUgbWlzcylcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0MSA9IERhdGUubm93KCk7XG4gICAgICAgICAgICBjb25zdCByZXN1bHQxID0gZW5naW5lLnNlbGVjdChjb21wbGV4UXVlcnkpO1xuICAgICAgICAgICAgY29uc3QgdGltZTEgPSBEYXRlLm5vdygpIC0gc3RhcnQxO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdDEuY2FjaGVkKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gU2Vjb25kIGV4ZWN1dGlvbiAoY2FjaGUgaGl0KVxuICAgICAgICAgICAgY29uc3Qgc3RhcnQyID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdDIgPSBlbmdpbmUuc2VsZWN0KGNvbXBsZXhRdWVyeSk7XG4gICAgICAgICAgICBjb25zdCB0aW1lMiA9IERhdGUubm93KCkgLSBzdGFydDI7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Mi5jYWNoZWQpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENhY2hlZCBleGVjdXRpb24gc2hvdWxkIGJlIGZhc3RlciAodGhvdWdoIHRoaXMgaXMgdGltaW5nLWRlcGVuZGVudClcbiAgICAgICAgICAgIC8vIFdlIG1haW5seSB2ZXJpZnkgdGhhdCB0aGUgY2FjaGUgd29ya3MgY29ycmVjdGx5XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Mi5yZXN1bHRzKS50b0VxdWFsKHJlc3VsdDEucmVzdWx0cyk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2Vycm9yIGhhbmRsaW5nIHdpdGggY2FjaGUnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgbm90IGNhY2hlIGludmFsaWQgcXVlcmllcycsICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGludmFsaWRRdWVyeSA9ICdJTlZBTElEIFNQQVJRTCBTWU5UQVgnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBleHBlY3QoKCkgPT4gZW5naW5lLnNlbGVjdChpbnZhbGlkUXVlcnkpKS50b1Rocm93KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIENhY2hlIHNob3VsZCByZW1haW4gdW5hZmZlY3RlZCAtIGJ1dCB0aGUgY2FjaGUgbWlzcyBpcyBzdGlsbCBjb3VudGVkXG4gICAgICAgICAgICBjb25zdCBzdGF0cyA9IGVuZ2luZS5nZXRDYWNoZVN0YXRpc3RpY3MoKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGF0cy50b3RhbFF1ZXJpZXMpLnRvQmUoMSk7XG4gICAgICAgICAgICBleHBlY3Qoc3RhdHMuaGl0cykudG9CZSgwKTtcbiAgICAgICAgICAgIGV4cGVjdChzdGF0cy5taXNzZXMpLnRvQmUoMSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgaGFuZGxlIGNhY2hlIG9wZXJhdGlvbnMgd2hlbiBlbmdpbmUgaXMgZGVzdHJveWVkJywgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcXVlcnkgPSAnU0VMRUNUID9zIFdIRVJFIHsgP3MgcmRmOnR5cGUgXCJEb2N1bWVudFwiIH0nO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDYWNoZSBhIHF1ZXJ5XG4gICAgICAgICAgICBlbmdpbmUuc2VsZWN0KHF1ZXJ5KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gRGVzdHJveSBlbmdpbmVcbiAgICAgICAgICAgIGVuZ2luZS5kZXN0cm95KCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIFNob3VsZCBub3QgdGhyb3cgZXJyb3JzXG4gICAgICAgICAgICBleHBlY3QoKCkgPT4gZW5naW5lLmdldENhY2hlU3RhdGlzdGljcygpKS5ub3QudG9UaHJvdygpO1xuICAgICAgICAgICAgZXhwZWN0KCgpID0+IGVuZ2luZS5pbnZhbGlkYXRlQ2FjaGUoKSkubm90LnRvVGhyb3coKTtcbiAgICAgICAgICAgIGV4cGVjdCgoKSA9PiBlbmdpbmUuY2xlYW51cENhY2hlKCkpLm5vdC50b1Rocm93KCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ2NhY2hlIHdpdGggZ3JhcGggbW9kaWZpY2F0aW9ucycsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCB3b3JrIGNvcnJlY3RseSB3aXRoIGdyYXBoIHRoYXQgY2hhbmdlcyBvdmVyIHRpbWUnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBxdWVyeSA9ICdTRUxFQ1QgP3MgV0hFUkUgeyA/cyByZGY6dHlwZSBcIk5ld1R5cGVcIiB9JztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gSW5pdGlhbGx5IG5vIHJlc3VsdHNcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdDEgPSBlbmdpbmUuc2VsZWN0KHF1ZXJ5KTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQxLmNhY2hlZCkudG9CZShmYWxzZSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0MS5yZXN1bHRzLmxlbmd0aCkudG9CZSgwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2FjaGUgaGl0IGZvciBzYW1lIHF1ZXJ5XG4gICAgICAgICAgICBjb25zdCByZXN1bHQyID0gZW5naW5lLnNlbGVjdChxdWVyeSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Mi5jYWNoZWQpLnRvQmUodHJ1ZSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0Mi5yZXN1bHRzLmxlbmd0aCkudG9CZSgwKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gTm90ZTogSW4gcmVhbCB1c2FnZSwgY2FjaGUgd291bGQgYmUgaW52YWxpZGF0ZWQgd2hlbiBncmFwaCBjaGFuZ2VzXG4gICAgICAgICAgICAvLyBUaGlzIHRlc3QganVzdCB2ZXJpZmllcyB0aGF0IGNhY2hlIHdvcmtzIHdpdGggZ3JhcGggc3RhdGUgYXQgdGltZSBvZiBjYWNoaW5nXG4gICAgICAgIH0pO1xuICAgIH0pO1xufSk7Il0sInZlcnNpb24iOjN9