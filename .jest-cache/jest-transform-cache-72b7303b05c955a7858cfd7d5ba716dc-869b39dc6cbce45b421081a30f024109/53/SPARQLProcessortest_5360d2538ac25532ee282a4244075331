b3ff1ca5fc83d919b93e0cd6f703b27b
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
// Result will be mocked through the SPARQLSanitizer mock
// Mock dependencies
jest.mock('../../../../src/application/SPARQLEngine');
jest.mock('../../../../src/domain/semantic/core/Graph');
jest.mock('../../../../src/application/services/ExoFocusService');
jest.mock('../../../../src/application/services/RDFService');
jest.mock('../../../../src/application/services/SPARQLSanitizer');
jest.mock('../../../../src/presentation/modals/ExportRDFModal');
const SPARQLProcessor_1 = require("../../../../src/presentation/processors/SPARQLProcessor");
const Graph_1 = require("../../../../src/domain/semantic/core/Graph");
const SPARQLEngine_1 = require("../../../../src/application/SPARQLEngine");
const ExoFocusService_1 = require("../../../../src/application/services/ExoFocusService");
const RDFService_1 = require("../../../../src/application/services/RDFService");
const SPARQLSanitizer_1 = require("../../../../src/application/services/SPARQLSanitizer");
describe('SPARQLProcessor', () => {
    let processor;
    let mockPlugin;
    let mockGraph;
    let mockEngine;
    let mockFocusService;
    let mockRDFService;
    let mockSanitizer;
    let mockApp;
    let container;
    let context;
    beforeEach(() => {
        // Setup DOM environment
        document.body.innerHTML = '<div id="test-container"></div>';
        container = document.getElementById('test-container');
        // Mock app
        mockApp = {
            workspace: {
                openLinkText: jest.fn()
            }
        };
        // Mock plugin
        mockPlugin = {
            app: mockApp
        };
        // Mock graph
        mockGraph = new Graph_1.Graph();
        // Create default mock responses
        const defaultSelectResult = {
            results: [
                { s: 'subject1', p: 'predicate1', o: 'object1' },
                { s: 'subject2', p: 'predicate2', o: 'object2' }
            ],
            cached: false
        };
        const defaultConstructResult = {
            triples: [],
            cached: false,
            provenance: 'test'
        };
        // Create mock engine instance
        mockEngine = {
            select: jest.fn().mockReturnValue(defaultSelectResult),
            construct: jest.fn().mockReturnValue(defaultConstructResult),
            getCacheStatistics: jest.fn().mockReturnValue({
                hits: 0,
                misses: 0,
                hitRate: 0,
                size: 0,
                maxSize: 100,
                totalQueries: 0,
                evictions: 0
            }),
            invalidateCache: jest.fn(),
            cleanupCache: jest.fn().mockReturnValue(0),
            destroy: jest.fn()
        };
        // Mock the SPARQLEngine constructor to return our mock instance
        SPARQLEngine_1.SPARQLEngine.mockImplementation(() => {
            console.log('SPARQLEngine constructor called, returning mock engine');
            return mockEngine;
        });
        // Mock services
        mockFocusService = new ExoFocusService_1.ExoFocusService(mockApp, mockGraph);
        mockRDFService = new RDFService_1.RDFService(mockApp);
        mockSanitizer = new SPARQLSanitizer_1.SPARQLSanitizer();
        // Mock the filterSPARQLResults method to return results unchanged
        mockFocusService.filterSPARQLResults = jest.fn().mockImplementation((results) => results);
        // Setup service mocks
        RDFService_1.RDFService.mockImplementation(() => mockRDFService);
        SPARQLSanitizer_1.SPARQLSanitizer.mockImplementation(() => mockSanitizer);
        mockRDFService.getNamespaceManager = jest.fn().mockReturnValue({
            getPrefix: jest.fn().mockReturnValue('exo'),
            expand: jest.fn().mockReturnValue('http://example.org/exo#')
        });
        // Mock sanitizer - should return the input query as sanitized
        mockSanitizer.sanitize = jest.fn().mockImplementation((input) => ({
            isSuccess: true,
            isFailure: false,
            getValue: () => ({
                query: input,
                warnings: []
            }),
            errorValue: () => null
        }));
        // Create processor
        processor = new SPARQLProcessor_1.SPARQLProcessor(mockPlugin, mockGraph, mockFocusService);
        // Mock context
        context = {
            sourcePath: 'test.md',
            frontmatter: {},
            addChild: jest.fn(),
            getSectionInfo: jest.fn()
        };
        // Mock Notice
        jest.spyOn(require('obsidian'), 'Notice').mockImplementation(() => ({}));
    });
    afterEach(() => {
        jest.clearAllMocks();
        document.body.innerHTML = '';
    });
    describe('Initialization', () => {
        test('should initialize with all required dependencies', () => {
            expect(processor).toBeDefined();
            expect(processor['plugin']).toBe(mockPlugin);
            expect(processor['graph']).toBe(mockGraph);
            expect(processor['engine']).toBe(mockEngine);
            expect(processor['focusService']).toBe(mockFocusService);
        });
        test('should initialize without focus service', () => {
            const processorNoFocus = new SPARQLProcessor_1.SPARQLProcessor(mockPlugin, mockGraph);
            expect(processorNoFocus).toBeDefined();
            expect(processorNoFocus['focusService']).toBeUndefined();
        });
        test('should initialize with cache configuration', () => {
            const cacheConfig = {
                maxSize: 100,
                defaultTTL: 60000,
                enabled: true
            };
            const processorWithCache = new SPARQLProcessor_1.SPARQLProcessor(mockPlugin, mockGraph, mockFocusService, cacheConfig);
            expect(processorWithCache).toBeDefined();
            expect(SPARQLEngine_1.SPARQLEngine).toHaveBeenCalledWith(mockGraph, cacheConfig);
        });
    });
    describe('processCodeBlock', () => {
        test('should process simple SELECT query successfully', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            var _a, _b;
            const selectResults = [
                { s: 'subject1', p: 'predicate1', o: 'object1' },
                { s: 'subject2', p: 'predicate2', o: 'object2' }
            ];
            // Set up the mock engine for this specific test
            mockEngine.select.mockReturnValue({
                results: selectResults,
                cached: false
            });
            const source = 'SELECT ?s ?p ?o WHERE { ?s ?p ?o } LIMIT 10';
            yield processor.processCodeBlock(source, container, context);
            expect(mockSanitizer.sanitize).toHaveBeenCalledWith(source);
            expect(mockEngine.select).toHaveBeenCalledWith(source);
            // Check DOM structure
            const sparqlContainer = container.querySelector('.exocortex-sparql-container');
            expect(sparqlContainer).toBeTruthy();
            expect((_a = sparqlContainer === null || sparqlContainer === void 0 ? void 0 : sparqlContainer.querySelector('h3')) === null || _a === void 0 ? void 0 : _a.textContent).toBe('SPARQL Query Results');
            expect((_b = sparqlContainer === null || sparqlContainer === void 0 ? void 0 : sparqlContainer.querySelector('pre')) === null || _b === void 0 ? void 0 : _b.textContent).toBe(source);
            expect(sparqlContainer === null || sparqlContainer === void 0 ? void 0 : sparqlContainer.querySelector('table')).toBeTruthy();
        }));
        test('should process CONSTRUCT query successfully', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            var _c;
            const mockTriples = [
                {
                    getSubject: () => ({ toString: () => 'http://example.org/s1' }),
                    getPredicate: () => ({ toString: () => 'http://example.org/p1' }),
                    getObject: () => ({ toString: () => 'http://example.org/o1' })
                },
                {
                    getSubject: () => ({ toString: () => 'http://example.org/s2' }),
                    getPredicate: () => ({ toString: () => 'http://example.org/p2' }),
                    getObject: () => ({ toString: () => 'http://example.org/o2' })
                }
            ];
            mockEngine.construct = jest.fn().mockReturnValue({
                triples: mockTriples,
                cached: false,
                provenance: 'test-query'
            });
            mockGraph.add = jest.fn();
            const source = 'CONSTRUCT { ?s ?p ?o } WHERE { ?s ?p ?o }';
            yield processor.processCodeBlock(source, container, context);
            // Debug the HTML structure to understand the table layout
            console.log('CONSTRUCT HTML:', container.innerHTML);
            expect(mockSanitizer.sanitize).toHaveBeenCalledWith(source);
            expect(mockEngine.construct).toHaveBeenCalledWith(source);
            expect(mockGraph.add).toHaveBeenCalledTimes(2);
            // Check results formatting
            const sparqlContainer = container.querySelector('.exocortex-sparql-container');
            expect(sparqlContainer).toBeTruthy();
            expect(sparqlContainer === null || sparqlContainer === void 0 ? void 0 : sparqlContainer.querySelector('table')).toBeTruthy();
            expect((_c = sparqlContainer === null || sparqlContainer === void 0 ? void 0 : sparqlContainer.querySelector('td')) === null || _c === void 0 ? void 0 : _c.textContent).toContain('http://example.org/');
        }));
        test('should handle empty results', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            var _d;
            mockEngine.select = jest.fn().mockReturnValue({
                results: [],
                cached: false
            });
            const source = 'SELECT ?s ?p ?o WHERE { ?s ?p ?o }';
            yield processor.processCodeBlock(source, container, context);
            expect(container.querySelector('.sparql-empty-result')).toBeTruthy();
            expect((_d = container.querySelector('.sparql-empty-result')) === null || _d === void 0 ? void 0 : _d.textContent).toBe('No results found');
        }));
        test('should handle cached results', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            var _e;
            const selectResults = [
                { s: 'cached1', p: 'cached2', o: 'cached3' }
            ];
            mockEngine.select = jest.fn().mockReturnValue({
                results: selectResults,
                cached: true
            });
            const source = 'SELECT ?s ?p ?o WHERE { ?s ?p ?o }';
            yield processor.processCodeBlock(source, container, context);
            expect(container.querySelector('.sparql-cache-indicator')).toBeTruthy();
            expect((_e = container.querySelector('.sparql-cache-indicator')) === null || _e === void 0 ? void 0 : _e.textContent).toContain('Cached Result');
        }));
        test('should display loading indicator', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            var _f;
            let resolvePromise;
            const slowPromise = new Promise(resolve => {
                resolvePromise = resolve;
            });
            mockEngine.select = jest.fn().mockReturnValue({
                results: [],
                cached: false
            });
            // Mock processCodeBlock to be slow
            const originalExecuteQuery = processor.executeQuery;
            processor.executeQuery = jest.fn().mockImplementation(() => slowPromise);
            const source = 'SELECT ?s ?p ?o WHERE { ?s ?p ?o }';
            const processPromise = processor.processCodeBlock(source, container, context);
            // Check loading indicator appears
            yield new Promise(resolve => setTimeout(resolve, 10));
            expect(container.querySelector('.sparql-loading')).toBeTruthy();
            expect((_f = container.querySelector('.sparql-loading')) === null || _f === void 0 ? void 0 : _f.textContent).toBe('Executing query...');
            // Complete the promise
            resolvePromise({ results: [], cached: false });
            yield processPromise;
            // Loading indicator should be removed
            expect(container.querySelector('.sparql-loading')).toBeFalsy();
            processor.executeQuery = originalExecuteQuery;
        }));
        test('should handle query execution errors', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            var _g;
            const source = 'INVALID SPARQL QUERY';
            // Mock sanitizer to return error
            mockSanitizer.sanitize = jest.fn().mockReturnValue({
                isSuccess: false,
                isFailure: true,
                getValue: () => null,
                errorValue: () => 'Invalid SPARQL syntax'
            });
            yield processor.processCodeBlock(source, container, context);
            expect(container.querySelector('.sparql-error')).toBeTruthy();
            expect((_g = container.querySelector('.sparql-error')) === null || _g === void 0 ? void 0 : _g.textContent).toContain('Query validation failed');
        }));
        test('should apply ExoFocus filtering when available', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const originalResults = [
                { s: 'subject1', p: 'predicate1', o: 'object1' },
                { s: 'subject2', p: 'predicate2', o: 'object2' },
                { s: 'subject3', p: 'predicate3', o: 'object3' }
            ];
            const filteredResults = [
                { s: 'subject1', p: 'predicate1', o: 'object1' }
            ];
            mockEngine.select = jest.fn().mockReturnValue({
                results: originalResults,
                cached: false
            });
            mockFocusService.filterSPARQLResults = jest.fn().mockReturnValue(filteredResults);
            const source = 'SELECT ?s ?p ?o WHERE { ?s ?p ?o }';
            yield processor.processCodeBlock(source, container, context);
            expect(mockFocusService.filterSPARQLResults).toHaveBeenCalledWith(originalResults);
            // Check that filtered results are displayed
            const rows = container.querySelectorAll('tbody tr');
            expect(rows).toHaveLength(1);
        }));
    });
    describe('executeQuery', () => {
        test('should reject empty queries', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield expect(processor.executeQuery('')).rejects.toThrow('Empty query');
            yield expect(processor.executeQuery('   ')).rejects.toThrow('Empty query');
        }));
        test('should handle query sanitization failures', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockSanitizer.sanitize = jest.fn().mockReturnValue({
                isSuccess: false,
                isFailure: true,
                getValue: () => null,
                errorValue: () => 'Malicious query detected'
            });
            yield expect(processor.executeQuery('DROP TABLE users;')).rejects.toThrow('Query validation failed');
        }));
        test('should show warnings from sanitizer', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockNotice = jest.spyOn(require('obsidian'), 'Notice');
            mockSanitizer.sanitize = jest.fn().mockReturnValue({
                isSuccess: true,
                isFailure: false,
                getValue: () => ({
                    query: 'SELECT ?s ?p ?o WHERE { ?s ?p ?o }',
                    warnings: ['Query contains deprecated syntax']
                }),
                errorValue: () => null
            });
            mockEngine.select = jest.fn().mockReturnValue({
                results: [],
                cached: false
            });
            yield processor.executeQuery('SELECT ?s ?p ?o WHERE { ?s ?p ?o }');
            expect(mockNotice).toHaveBeenCalledWith('Query executed with warnings: Query contains deprecated syntax');
        }));
        test('should reject unsupported query types', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockSanitizer.sanitize = jest.fn().mockReturnValue({
                isSuccess: true,
                isFailure: false,
                getValue: () => ({
                    query: 'DELETE WHERE { ?s ?p ?o }',
                    warnings: []
                }),
                errorValue: () => null
            });
            yield expect(processor.executeQuery('DELETE WHERE { ?s ?p ?o }')).rejects.toThrow('Only SELECT and CONSTRUCT queries are currently supported');
        }));
        test('should handle CONSTRUCT query with duplicate prevention', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockTriples = [
                {
                    getSubject: () => ({ toString: () => 'http://example.org/s1' }),
                    getPredicate: () => ({ toString: () => 'http://example.org/p1' }),
                    getObject: () => ({ toString: () => 'http://example.org/o1' })
                }
            ];
            // Test cached result - should not add to graph
            mockEngine.construct = jest.fn().mockReturnValue({
                triples: mockTriples,
                cached: true,
                provenance: 'test-query'
            });
            const result = yield processor.executeQuery('CONSTRUCT { ?s ?p ?o } WHERE { ?s ?p ?o }');
            expect(mockGraph.add).not.toHaveBeenCalled();
            expect(result.cached).toBe(true);
            expect(result.results).toHaveLength(1);
        }));
    });
    describe('Table Creation', () => {
        test('should create table with headers', () => {
            const results = [
                { name: 'John', age: '25', city: 'New York' },
                { name: 'Jane', age: '30', city: 'Boston' }
            ];
            const table = processor['createResultTable'](results);
            expect(table.tagName).toBe('TABLE');
            expect(table.className).toBe('sparql-results-table');
            // Check headers
            const headers = table.querySelectorAll('th');
            expect(headers).toHaveLength(3);
            expect(headers[0].textContent).toBe('name');
            expect(headers[1].textContent).toBe('age');
            expect(headers[2].textContent).toBe('city');
            // Check data rows
            const dataRows = table.querySelectorAll('tbody tr');
            expect(dataRows).toHaveLength(2);
            expect(dataRows[0].cells[0].textContent).toBe('John');
            expect(dataRows[1].cells[0].textContent).toBe('Jane');
        });
        test('should create empty table for no results', () => {
            const table = processor['createResultTable']([]);
            expect(table.tagName).toBe('TABLE');
            expect(table.querySelectorAll('tr')).toHaveLength(0);
        });
        test('should handle file links in results', () => {
            const results = [
                { file: 'file://test-note.md', content: 'some content' },
                { file: '/path/to/note.md', content: 'more content' }
            ];
            const table = processor['createResultTable'](results);
            const links = table.querySelectorAll('a.internal-link');
            expect(links).toHaveLength(2);
            expect(links[0].textContent).toBe('test-note.md');
            expect(links[1].textContent).toBe('note.md');
        });
        test('should handle click events on note links', () => {
            const results = [{ file: 'file://test-note.md' }];
            const table = processor['createResultTable'](results);
            const link = table.querySelector('a.internal-link');
            expect(link).toBeTruthy();
            // Mock click event
            const clickEvent = new Event('click');
            jest.spyOn(clickEvent, 'preventDefault');
            link.dispatchEvent(clickEvent);
            expect(clickEvent.preventDefault).toHaveBeenCalled();
            expect(mockApp.workspace.openLinkText).toHaveBeenCalledWith('test-note.md', '');
        });
    });
    describe('Cache Management', () => {
        test('should return cache statistics', () => {
            const mockStats = {
                hits: 15,
                misses: 8,
                hitRate: 65.2,
                size: 12,
                maxSize: 100,
                totalQueries: 23,
                evictions: 2
            };
            mockEngine.getCacheStatistics = jest.fn().mockReturnValue(mockStats);
            const stats = processor.getCacheStatistics();
            expect(stats).toEqual(mockStats);
            expect(mockEngine.getCacheStatistics).toHaveBeenCalled();
        });
        test('should invalidate cache', () => {
            mockEngine.invalidateCache = jest.fn();
            processor.invalidateCache();
            expect(mockEngine.invalidateCache).toHaveBeenCalled();
        });
        test('should cleanup cache', () => {
            mockEngine.cleanupCache = jest.fn().mockReturnValue(5);
            const result = processor.cleanupCache();
            expect(result).toBe(5);
            expect(mockEngine.cleanupCache).toHaveBeenCalled();
        });
        test('should destroy resources', () => {
            mockEngine.destroy = jest.fn();
            processor.destroy();
            expect(mockEngine.destroy).toHaveBeenCalled();
        });
    });
    describe('UI Elements', () => {
        test('should create loading indicator', () => {
            const loading = processor['createLoadingIndicator']();
            expect(loading.className).toBe('sparql-loading');
            expect(loading.textContent).toBe('Executing query...');
        });
        test('should create error message', () => {
            const error = new Error('Test error message');
            const errorEl = processor['createErrorMessage'](error);
            expect(errorEl.className).toBe('sparql-error');
            expect(errorEl.textContent).toContain('Query Error:');
            expect(errorEl.textContent).toContain('Test error message');
        });
        test('should create stats element without cache info', () => {
            const stats = processor['createStatsElement'](5, 150);
            expect(stats.className).toBe('sparql-stats');
            expect(stats.textContent).toBe('Executed in 150ms - 5 results');
        });
        test('should create stats element with cache info', () => {
            const stats = processor['createStatsElement'](5, 150, true);
            expect(stats.textContent).toBe('Executed in 150ms - 5 results (cached result)');
        });
        test('should create cache indicator for cached results', () => {
            const indicator = processor['createCacheIndicator'](true);
            expect(indicator.className).toBe('sparql-cache-indicator');
            expect(indicator.textContent).toBe('ðŸ“‹ Cached Result');
            expect(indicator.style.background).toContain('rgb(232, 245, 232)');
        });
        test('should create cache indicator for fresh results', () => {
            const indicator = processor['createCacheIndicator'](false);
            expect(indicator.textContent).toBe('ðŸ”„ Fresh Result');
            expect(indicator.style.background).toContain('rgb(227, 242, 253)');
        });
    });
    describe('Export Controls', () => {
        test('should create export controls with format buttons', () => {
            const results = [{ s: 'test', p: 'test', o: 'test' }];
            const query = 'SELECT ?s ?p ?o WHERE { ?s ?p ?o }';
            const controls = processor['createExportControls'](results, query);
            expect(controls.className).toBe('sparql-export-controls');
            expect(controls.textContent).toContain('Export results:');
            // Check format buttons
            const buttons = controls.querySelectorAll('.sparql-export-button');
            expect(buttons).toHaveLength(4); // Turtle, JSON-LD, N-Triples, RDF/XML
            expect(buttons[0].textContent).toBe('Turtle');
            expect(buttons[1].textContent).toBe('JSON-LD');
            expect(buttons[2].textContent).toBe('N-Triples');
            expect(buttons[3].textContent).toBe('RDF/XML');
        });
        test('should create advanced export button', () => {
            const results = [{ s: 'test', p: 'test', o: 'test' }];
            const query = 'SELECT ?s ?p ?o WHERE { ?s ?p ?o }';
            const controls = processor['createExportControls'](results, query);
            const advancedButton = controls.querySelector('.sparql-export-advanced');
            expect(advancedButton).toBeTruthy();
            expect(advancedButton.textContent).toBe('Advanced...');
        });
        test('should handle export button clicks', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockRDFService.exportQueryResults = jest.fn().mockResolvedValue({
                isSuccess: true,
                isFailure: false,
                getValue: () => ({
                    tripleCount: 10,
                    fileName: 'test-export.ttl',
                    content: 'mock turtle content'
                }),
                errorValue: () => null
            });
            const results = [{ s: 'test', p: 'test', o: 'test' }];
            const query = 'SELECT ?s ?p ?o WHERE { ?s ?p ?o }';
            const controls = processor['createExportControls'](results, query);
            const turtleButton = controls.querySelector('.sparql-export-button');
            // Simulate click
            turtleButton.click();
            // Wait for async operation
            yield new Promise(resolve => setTimeout(resolve, 10));
            expect(mockRDFService.exportQueryResults).toHaveBeenCalledWith(results, 'turtle', expect.any(String));
        }));
        test('should handle export errors', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockRDFService.exportQueryResults = jest.fn().mockResolvedValue({
                isSuccess: false,
                isFailure: true,
                getValue: () => null,
                errorValue: () => 'Export failed'
            });
            const mockNotice = jest.spyOn(require('obsidian'), 'Notice');
            const results = [{ s: 'test', p: 'test', o: 'test' }];
            const query = 'SELECT ?s ?p ?o WHERE { ?s ?p ?o }';
            const controls = processor['createExportControls'](results, query);
            const turtleButton = controls.querySelector('.sparql-export-button');
            // Simulate click
            turtleButton.click();
            // Wait for async operation
            yield new Promise(resolve => setTimeout(resolve, 10));
            expect(mockNotice).toHaveBeenCalledWith('Export failed: Export failed');
        }));
    });
    describe('Performance Tests', () => {
        test('should handle large result sets efficiently', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const largeResults = Array.from({ length: 1000 }, (_, i) => ({
                id: `item-${i}`,
                name: `Name ${i}`,
                value: `Value ${i}`
            }));
            mockEngine.select = jest.fn().mockReturnValue({
                results: largeResults,
                cached: false
            });
            const source = 'SELECT ?id ?name ?value WHERE { ?id ?name ?value }';
            const startTime = Date.now();
            yield processor.processCodeBlock(source, container, context);
            const endTime = Date.now();
            expect(endTime - startTime).toBeLessThan(1000); // Should complete within 1 second
            // Verify table was created
            const table = container.querySelector('table');
            expect(table).toBeTruthy();
            const rows = table.querySelectorAll('tbody tr');
            expect(rows).toHaveLength(1000);
        }));
        test('should handle complex queries with multiple variables', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const complexResults = [
                {
                    subject: 'http://example.org/person1',
                    name: 'John Doe',
                    age: '30',
                    email: 'john@example.org',
                    department: 'Engineering',
                    manager: 'http://example.org/person2',
                    projects: 'Project A, Project B',
                    skills: 'JavaScript, TypeScript, React'
                }
            ];
            mockEngine.select = jest.fn().mockReturnValue({
                results: complexResults,
                cached: false
            });
            const source = `
        SELECT ?subject ?name ?age ?email ?department ?manager ?projects ?skills
        WHERE {
          ?subject foaf:name ?name ;
                   foaf:age ?age ;
                   foaf:mbox ?email ;
                   org:department ?department ;
                   org:manager ?manager ;
                   proj:projects ?projects ;
                   skill:has ?skills .
        }
      `;
            yield processor.processCodeBlock(source, container, context);
            const table = container.querySelector('table');
            expect(table).toBeTruthy();
            const headers = table.querySelectorAll('th');
            expect(headers).toHaveLength(8);
            const dataRow = table.querySelector('tbody tr');
            expect(dataRow).toBeTruthy();
            expect(dataRow.cells).toHaveLength(8);
        }));
    });
    describe('Edge Cases', () => {
        test('should handle null and undefined values in results', () => {
            const results = [
                { name: 'John', age: null, city: undefined },
                { name: null, age: '25', city: '' },
                { name: undefined, age: undefined, city: 'Boston' }
            ];
            const table = processor['createResultTable'](results);
            const cells = table.querySelectorAll('td');
            // Should display empty string for null/undefined
            expect(cells[1].textContent).toBe(''); // null age
            expect(cells[2].textContent).toBe(''); // undefined city
            expect(cells[3].textContent).toBe(''); // null name
            expect(cells[5].textContent).toBe(''); // empty city
        });
        test('should handle results with inconsistent column structure', () => {
            const results = [
                { name: 'John', age: '30' },
                { name: 'Jane', city: 'Boston' },
                { age: '25', city: 'New York', country: 'USA' }
            ];
            // Should use columns from first result
            const table = processor['createResultTable'](results);
            const headers = table.querySelectorAll('th');
            expect(headers).toHaveLength(2);
            expect(headers[0].textContent).toBe('name');
            expect(headers[1].textContent).toBe('age');
        });
        test('should handle very long query strings', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            var _a;
            const longQuery = `
        SELECT ?s ?p ?o WHERE {
          ?s ?p ?o .
          ${Array.from({ length: 100 }, (_, i) => `OPTIONAL { ?s ex:prop${i} ?val${i} }`).join(' ')}
        }
      `.trim();
            mockEngine.select = jest.fn().mockReturnValue({
                results: [],
                cached: false
            });
            yield processor.processCodeBlock(longQuery, container, context);
            expect((_a = container.querySelector('pre')) === null || _a === void 0 ? void 0 : _a.textContent).toBe(longQuery);
            expect(mockEngine.select).toHaveBeenCalledWith(longQuery);
        }));
        test('should handle special characters in query and results', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const results = [
                { name: 'JÃ¶hn DÃ¶e', description: 'Special chars: Ã Ã¡Ã¢Ã£Ã¤Ã¥' },
                { name: 'Ð¡Ð¼Ð¸Ñ‚', description: 'Cyrillic: Ñ€ÑƒÑÑÐºÐ¸Ð¹ Ñ‚ÐµÐºÑÑ‚' },
                { name: 'ç”°ä¸­å¤ªéƒŽ', description: 'Japanese: ã“ã‚“ã«ã¡ã¯' }
            ];
            mockEngine.select = jest.fn().mockReturnValue({
                results: results,
                cached: false
            });
            const query = 'SELECT ?name ?description WHERE { ?person rdfs:label ?name ; dc:description ?description }';
            yield processor.processCodeBlock(query, container, context);
            const table = container.querySelector('table');
            const cells = table.querySelectorAll('td');
            expect(cells[0].textContent).toBe('JÃ¶hn DÃ¶e');
            expect(cells[1].textContent).toBe('Special chars: Ã Ã¡Ã¢Ã£Ã¤Ã¥');
            expect(cells[2].textContent).toBe('Ð¡Ð¼Ð¸Ñ‚');
            expect(cells[4].textContent).toBe('ç”°ä¸­å¤ªéƒŽ');
        }));
    });
});
// Test utilities
function createMockTriple(s, p, o) {
    return {
        getSubject: () => ({ toString: () => s }),
        getPredicate: () => ({ toString: () => p }),
        getObject: () => ({ toString: () => o })
    };
}
function createMockContext(sourcePath = 'test.md') {
    return {
        sourcePath,
        frontmatter: {},
        addChild: jest.fn(),
        getSectionInfo: jest.fn()
    };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvdW5pdC9wcmVzZW50YXRpb24vcHJvY2Vzc29ycy9TUEFSUUxQcm9jZXNzb3IudGVzdC50cyIsIm1hcHBpbmdzIjoiOzs7QUFRQSx5REFBeUQ7QUFFekQsb0JBQW9CO0FBQ3BCLElBQUksQ0FBQyxJQUFJLENBQUMsMENBQTBDLENBQUMsQ0FBQztBQUN0RCxJQUFJLENBQUMsSUFBSSxDQUFDLDRDQUE0QyxDQUFDLENBQUM7QUFDeEQsSUFBSSxDQUFDLElBQUksQ0FBQyxzREFBc0QsQ0FBQyxDQUFDO0FBQ2xFLElBQUksQ0FBQyxJQUFJLENBQUMsaURBQWlELENBQUMsQ0FBQztBQUM3RCxJQUFJLENBQUMsSUFBSSxDQUFDLHNEQUFzRCxDQUFDLENBQUM7QUFDbEUsSUFBSSxDQUFDLElBQUksQ0FBQyxvREFBb0QsQ0FBQyxDQUFDO0FBZmhFLDZGQUEwRjtBQUMxRixzRUFBbUU7QUFFbkUsMkVBQXVHO0FBQ3ZHLDBGQUF1RjtBQUN2RixnRkFBNkU7QUFDN0UsMEZBQXVGO0FBV3ZGLFFBQVEsQ0FBQyxpQkFBaUIsRUFBRSxHQUFHLEVBQUU7SUFDL0IsSUFBSSxTQUEwQixDQUFDO0lBQy9CLElBQUksVUFBK0IsQ0FBQztJQUNwQyxJQUFJLFNBQTZCLENBQUM7SUFDbEMsSUFBSSxVQUFxQyxDQUFDO0lBQzFDLElBQUksZ0JBQThDLENBQUM7SUFDbkQsSUFBSSxjQUF1QyxDQUFDO0lBQzVDLElBQUksYUFBMkMsQ0FBQztJQUNoRCxJQUFJLE9BQXlCLENBQUM7SUFDOUIsSUFBSSxTQUFzQixDQUFDO0lBQzNCLElBQUksT0FBcUMsQ0FBQztJQUUxQyxVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2Qsd0JBQXdCO1FBQ3hCLFFBQVEsQ0FBQyxJQUFJLENBQUMsU0FBUyxHQUFHLGlDQUFpQyxDQUFDO1FBQzVELFNBQVMsR0FBRyxRQUFRLENBQUMsY0FBYyxDQUFDLGdCQUFnQixDQUFFLENBQUM7UUFFdkQs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cUIsU0FBUztJQUN2RCxPQUFPO1FBQ0wsVUFBVTtRQUNWLFdBQVcsRUFBRSxFQUFFO1FBQ2YsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7UUFDbkIsY0FBYyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7S0FDMUIsQ0FBQztBQUNKLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvdW5pdC9wcmVzZW50YXRpb24vcHJvY2Vzc29ycy9TUEFSUUxQcm9jZXNzb3IudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0LCBQbHVnaW4sIEFwcCwgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgU1BBUlFMUHJvY2Vzc29yIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL3ByZXNlbnRhdGlvbi9wcm9jZXNzb3JzL1NQQVJRTFByb2Nlc3Nvcic7XG5pbXBvcnQgeyBHcmFwaCB9IGZyb20gJy4uLy4uLy4uLy4uL3NyYy9kb21haW4vc2VtYW50aWMvY29yZS9HcmFwaCc7XG5pbXBvcnQgeyBUcmlwbGUsIElSSSwgTGl0ZXJhbCB9IGZyb20gJy4uLy4uLy4uLy4uL3NyYy9kb21haW4vc2VtYW50aWMvY29yZS9UcmlwbGUnO1xuaW1wb3J0IHsgU1BBUlFMRW5naW5lLCBTZWxlY3RSZXN1bHQsIENvbnN0cnVjdFJlc3VsdCB9IGZyb20gJy4uLy4uLy4uLy4uL3NyYy9hcHBsaWNhdGlvbi9TUEFSUUxFbmdpbmUnO1xuaW1wb3J0IHsgRXhvRm9jdXNTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2FwcGxpY2F0aW9uL3NlcnZpY2VzL0V4b0ZvY3VzU2VydmljZSc7XG5pbXBvcnQgeyBSREZTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2FwcGxpY2F0aW9uL3NlcnZpY2VzL1JERlNlcnZpY2UnO1xuaW1wb3J0IHsgU1BBUlFMU2FuaXRpemVyIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2FwcGxpY2F0aW9uL3NlcnZpY2VzL1NQQVJRTFNhbml0aXplcic7XG4vLyBSZXN1bHQgd2lsbCBiZSBtb2NrZWQgdGhyb3VnaCB0aGUgU1BBUlFMU2FuaXRpemVyIG1vY2tcblxuLy8gTW9jayBkZXBlbmRlbmNpZXNcbmplc3QubW9jaygnLi4vLi4vLi4vLi4vc3JjL2FwcGxpY2F0aW9uL1NQQVJRTEVuZ2luZScpO1xuamVzdC5tb2NrKCcuLi8uLi8uLi8uLi9zcmMvZG9tYWluL3NlbWFudGljL2NvcmUvR3JhcGgnKTtcbmplc3QubW9jaygnLi4vLi4vLi4vLi4vc3JjL2FwcGxpY2F0aW9uL3NlcnZpY2VzL0V4b0ZvY3VzU2VydmljZScpO1xuamVzdC5tb2NrKCcuLi8uLi8uLi8uLi9zcmMvYXBwbGljYXRpb24vc2VydmljZXMvUkRGU2VydmljZScpO1xuamVzdC5tb2NrKCcuLi8uLi8uLi8uLi9zcmMvYXBwbGljYXRpb24vc2VydmljZXMvU1BBUlFMU2FuaXRpemVyJyk7XG5qZXN0Lm1vY2soJy4uLy4uLy4uLy4uL3NyYy9wcmVzZW50YXRpb24vbW9kYWxzL0V4cG9ydFJERk1vZGFsJyk7XG5cbmRlc2NyaWJlKCdTUEFSUUxQcm9jZXNzb3InLCAoKSA9PiB7XG4gIGxldCBwcm9jZXNzb3I6IFNQQVJRTFByb2Nlc3NvcjtcbiAgbGV0IG1vY2tQbHVnaW46IGplc3QuTW9ja2VkPFBsdWdpbj47XG4gIGxldCBtb2NrR3JhcGg6IGplc3QuTW9ja2VkPEdyYXBoPjtcbiAgbGV0IG1vY2tFbmdpbmU6IGplc3QuTW9ja2VkPFNQQVJRTEVuZ2luZT47XG4gIGxldCBtb2NrRm9jdXNTZXJ2aWNlOiBqZXN0Lk1vY2tlZDxFeG9Gb2N1c1NlcnZpY2U+O1xuICBsZXQgbW9ja1JERlNlcnZpY2U6IGplc3QuTW9ja2VkPFJERlNlcnZpY2U+O1xuICBsZXQgbW9ja1Nhbml0aXplcjogamVzdC5Nb2NrZWQ8U1BBUlFMU2FuaXRpemVyPjtcbiAgbGV0IG1vY2tBcHA6IGplc3QuTW9ja2VkPEFwcD47XG4gIGxldCBjb250YWluZXI6IEhUTUxFbGVtZW50O1xuICBsZXQgY29udGV4dDogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dDtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAvLyBTZXR1cCBET00gZW52aXJvbm1lbnRcbiAgICBkb2N1bWVudC5ib2R5LmlubmVySFRNTCA9ICc8ZGl2IGlkPVwidGVzdC1jb250YWluZXJcIj48L2Rpdj4nO1xuICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd0ZXN0LWNvbnRhaW5lcicpITtcblxuICAgIC8vIE1vY2sgYXBwXG4gICAgbW9ja0FwcCA9IHtcbiAgICAgIHdvcmtzcGFjZToge1xuICAgICAgICBvcGVuTGlua1RleHQ6IGplc3QuZm4oKVxuICAgICAgfVxuICAgIH0gYXMgYW55O1xuXG4gICAgLy8gTW9jayBwbHVnaW5cbiAgICBtb2NrUGx1Z2luID0ge1xuICAgICAgYXBwOiBtb2NrQXBwXG4gICAgfSBhcyBhbnk7XG5cbiAgICAvLyBNb2NrIGdyYXBoXG4gICAgbW9ja0dyYXBoID0gbmV3IEdyYXBoKCkgYXMgamVzdC5Nb2NrZWQ8R3JhcGg+O1xuXG4gICAgLy8gQ3JlYXRlIGRlZmF1bHQgbW9jayByZXNwb25zZXNcbiAgICBjb25zdCBkZWZhdWx0U2VsZWN0UmVzdWx0ID0ge1xuICAgICAgcmVzdWx0czogW1xuICAgICAgICB7IHM6ICdzdWJqZWN0MScsIHA6ICdwcmVkaWNhdGUxJywgbzogJ29iamVjdDEnIH0sXG4gICAgICAgIHsgczogJ3N1YmplY3QyJywgcDogJ3ByZWRpY2F0ZTInLCBvOiAnb2JqZWN0MicgfVxuICAgICAgXSxcbiAgICAgIGNhY2hlZDogZmFsc2VcbiAgICB9O1xuICAgIFxuICAgIGNvbnN0IGRlZmF1bHRDb25zdHJ1Y3RSZXN1bHQgPSB7XG4gICAgICB0cmlwbGVzOiBbXSxcbiAgICAgIGNhY2hlZDogZmFsc2UsXG4gICAgICBwcm92ZW5hbmNlOiAndGVzdCdcbiAgICB9O1xuICAgIFxuICAgIC8vIENyZWF0ZSBtb2NrIGVuZ2luZSBpbnN0YW5jZVxuICAgIG1vY2tFbmdpbmUgPSB7XG4gICAgICBzZWxlY3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoZGVmYXVsdFNlbGVjdFJlc3VsdCksXG4gICAgICBjb25zdHJ1Y3Q6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoZGVmYXVsdENvbnN0cnVjdFJlc3VsdCksXG4gICAgICBnZXRDYWNoZVN0YXRpc3RpY3M6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBoaXRzOiAwLFxuICAgICAgICBtaXNzZXM6IDAsXG4gICAgICAgIGhpdFJhdGU6IDAsXG4gICAgICAgIHNpemU6IDAsXG4gICAgICAgIG1heFNpemU6IDEwMCxcbiAgICAgICAgdG90YWxRdWVyaWVzOiAwLFxuICAgICAgICBldmljdGlvbnM6IDBcbiAgICAgIH0pLFxuICAgICAgaW52YWxpZGF0ZUNhY2hlOiBqZXN0LmZuKCksXG4gICAgICBjbGVhbnVwQ2FjaGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoMCksXG4gICAgICBkZXN0cm95OiBqZXN0LmZuKClcbiAgICB9IGFzIGplc3QuTW9ja2VkPFNQQVJRTEVuZ2luZT47XG4gICAgXG4gICAgLy8gTW9jayB0aGUgU1BBUlFMRW5naW5lIGNvbnN0cnVjdG9yIHRvIHJldHVybiBvdXIgbW9jayBpbnN0YW5jZVxuICAgIChTUEFSUUxFbmdpbmUgYXMgamVzdC5Nb2NrZWRDbGFzczx0eXBlb2YgU1BBUlFMRW5naW5lPikubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKCdTUEFSUUxFbmdpbmUgY29uc3RydWN0b3IgY2FsbGVkLCByZXR1cm5pbmcgbW9jayBlbmdpbmUnKTtcbiAgICAgIHJldHVybiBtb2NrRW5naW5lO1xuICAgIH0pO1xuXG4gICAgLy8gTW9jayBzZXJ2aWNlc1xuICAgIG1vY2tGb2N1c1NlcnZpY2UgPSBuZXcgRXhvRm9jdXNTZXJ2aWNlKG1vY2tBcHAsIG1vY2tHcmFwaCkgYXMgamVzdC5Nb2NrZWQ8RXhvRm9jdXNTZXJ2aWNlPjtcbiAgICBtb2NrUkRGU2VydmljZSA9IG5ldyBSREZTZXJ2aWNlKG1vY2tBcHApIGFzIGplc3QuTW9ja2VkPFJERlNlcnZpY2U+O1xuICAgIG1vY2tTYW5pdGl6ZXIgPSBuZXcgU1BBUlFMU2FuaXRpemVyKCkgYXMgamVzdC5Nb2NrZWQ8U1BBUlFMU2FuaXRpemVyPjtcbiAgICBcbiAgICAvLyBNb2NrIHRoZSBmaWx0ZXJTUEFSUUxSZXN1bHRzIG1ldGhvZCB0byByZXR1cm4gcmVzdWx0cyB1bmNoYW5nZWRcbiAgICBtb2NrRm9jdXNTZXJ2aWNlLmZpbHRlclNQQVJRTFJlc3VsdHMgPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKChyZXN1bHRzKSA9PiByZXN1bHRzKTtcblxuICAgIC8vIFNldHVwIHNlcnZpY2UgbW9ja3NcbiAgICAoUkRGU2VydmljZSBhcyBqZXN0Lk1vY2tlZENsYXNzPHR5cGVvZiBSREZTZXJ2aWNlPikubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IG1vY2tSREZTZXJ2aWNlKTtcbiAgICAoU1BBUlFMU2FuaXRpemVyIGFzIGplc3QuTW9ja2VkQ2xhc3M8dHlwZW9mIFNQQVJRTFNhbml0aXplcj4pLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiBtb2NrU2FuaXRpemVyKTtcbiAgICBcbiAgICBtb2NrUkRGU2VydmljZS5nZXROYW1lc3BhY2VNYW5hZ2VyID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBnZXRQcmVmaXg6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ2V4bycpLFxuICAgICAgZXhwYW5kOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdodHRwOi8vZXhhbXBsZS5vcmcvZXhvIycpXG4gICAgfSk7XG5cbiAgICAvLyBNb2NrIHNhbml0aXplciAtIHNob3VsZCByZXR1cm4gdGhlIGlucHV0IHF1ZXJ5IGFzIHNhbml0aXplZFxuICAgIG1vY2tTYW5pdGl6ZXIuc2FuaXRpemUgPSBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKChpbnB1dDogc3RyaW5nKSA9PiAoe1xuICAgICAgaXNTdWNjZXNzOiB0cnVlLFxuICAgICAgaXNGYWlsdXJlOiBmYWxzZSxcbiAgICAgIGdldFZhbHVlOiAoKSA9PiAoe1xuICAgICAgICBxdWVyeTogaW5wdXQsIC8vIFJldHVybiB0aGUgc2FtZSBxdWVyeSB0aGF0IHdhcyBwYXNzZWQgaW5cbiAgICAgICAgd2FybmluZ3M6IFtdXG4gICAgICB9KSxcbiAgICAgIGVycm9yVmFsdWU6ICgpID0+IG51bGxcbiAgICB9KSk7XG5cbiAgICAvLyBDcmVhdGUgcHJvY2Vzc29yXG4gICAgcHJvY2Vzc29yID0gbmV3IFNQQVJRTFByb2Nlc3Nvcihtb2NrUGx1Z2luLCBtb2NrR3JhcGgsIG1vY2tGb2N1c1NlcnZpY2UpO1xuXG4gICAgLy8gTW9jayBjb250ZXh0XG4gICAgY29udGV4dCA9IHtcbiAgICAgIHNvdXJjZVBhdGg6ICd0ZXN0Lm1kJyxcbiAgICAgIGZyb250bWF0dGVyOiB7fSxcbiAgICAgIGFkZENoaWxkOiBqZXN0LmZuKCksXG4gICAgICBnZXRTZWN0aW9uSW5mbzogamVzdC5mbigpXG4gICAgfTtcblxuICAgIC8vIE1vY2sgTm90aWNlXG4gICAgamVzdC5zcHlPbihyZXF1aXJlKCdvYnNpZGlhbicpLCAnTm90aWNlJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7fSkpO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgIGRvY3VtZW50LmJvZHkuaW5uZXJIVE1MID0gJyc7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdJbml0aWFsaXphdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIGFsbCByZXF1aXJlZCBkZXBlbmRlbmNpZXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QocHJvY2Vzc29yKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHByb2Nlc3NvclsncGx1Z2luJ10pLnRvQmUobW9ja1BsdWdpbik7XG4gICAgICBleHBlY3QocHJvY2Vzc29yWydncmFwaCddKS50b0JlKG1vY2tHcmFwaCk7XG4gICAgICBleHBlY3QocHJvY2Vzc29yWydlbmdpbmUnXSkudG9CZShtb2NrRW5naW5lKTtcbiAgICAgIGV4cGVjdChwcm9jZXNzb3JbJ2ZvY3VzU2VydmljZSddKS50b0JlKG1vY2tGb2N1c1NlcnZpY2UpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGluaXRpYWxpemUgd2l0aG91dCBmb2N1cyBzZXJ2aWNlJywgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvY2Vzc29yTm9Gb2N1cyA9IG5ldyBTUEFSUUxQcm9jZXNzb3IobW9ja1BsdWdpbiwgbW9ja0dyYXBoKTtcbiAgICAgIGV4cGVjdChwcm9jZXNzb3JOb0ZvY3VzKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHByb2Nlc3Nvck5vRm9jdXNbJ2ZvY3VzU2VydmljZSddKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaW5pdGlhbGl6ZSB3aXRoIGNhY2hlIGNvbmZpZ3VyYXRpb24nLCAoKSA9PiB7XG4gICAgICBjb25zdCBjYWNoZUNvbmZpZyA9IHtcbiAgICAgICAgbWF4U2l6ZTogMTAwLFxuICAgICAgICBkZWZhdWx0VFRMOiA2MDAwMCxcbiAgICAgICAgZW5hYmxlZDogdHJ1ZVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgY29uc3QgcHJvY2Vzc29yV2l0aENhY2hlID0gbmV3IFNQQVJRTFByb2Nlc3Nvcihtb2NrUGx1Z2luLCBtb2NrR3JhcGgsIG1vY2tGb2N1c1NlcnZpY2UsIGNhY2hlQ29uZmlnKTtcbiAgICAgIGV4cGVjdChwcm9jZXNzb3JXaXRoQ2FjaGUpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoU1BBUlFMRW5naW5lKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtb2NrR3JhcGgsIGNhY2hlQ29uZmlnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3Byb2Nlc3NDb2RlQmxvY2snLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHByb2Nlc3Mgc2ltcGxlIFNFTEVDVCBxdWVyeSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzZWxlY3RSZXN1bHRzID0gW1xuICAgICAgICB7IHM6ICdzdWJqZWN0MScsIHA6ICdwcmVkaWNhdGUxJywgbzogJ29iamVjdDEnIH0sXG4gICAgICAgIHsgczogJ3N1YmplY3QyJywgcDogJ3ByZWRpY2F0ZTInLCBvOiAnb2JqZWN0MicgfVxuICAgICAgXTtcblxuICAgICAgLy8gU2V0IHVwIHRoZSBtb2NrIGVuZ2luZSBmb3IgdGhpcyBzcGVjaWZpYyB0ZXN0XG4gICAgICBtb2NrRW5naW5lLnNlbGVjdC5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICByZXN1bHRzOiBzZWxlY3RSZXN1bHRzLFxuICAgICAgICBjYWNoZWQ6IGZhbHNlXG4gICAgICB9IGFzIFNlbGVjdFJlc3VsdCk7XG5cbiAgICAgIGNvbnN0IHNvdXJjZSA9ICdTRUxFQ1QgP3MgP3AgP28gV0hFUkUgeyA/cyA/cCA/byB9IExJTUlUIDEwJztcbiAgICAgIFxuICAgICAgYXdhaXQgcHJvY2Vzc29yLnByb2Nlc3NDb2RlQmxvY2soc291cmNlLCBjb250YWluZXIsIGNvbnRleHQpO1xuICAgICAgXG4gICAgICBleHBlY3QobW9ja1Nhbml0aXplci5zYW5pdGl6ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoc291cmNlKTtcbiAgICAgIGV4cGVjdChtb2NrRW5naW5lLnNlbGVjdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoc291cmNlKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgRE9NIHN0cnVjdHVyZVxuICAgICAgY29uc3Qgc3BhcnFsQ29udGFpbmVyID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5leG9jb3J0ZXgtc3BhcnFsLWNvbnRhaW5lcicpO1xuICAgICAgZXhwZWN0KHNwYXJxbENvbnRhaW5lcikudG9CZVRydXRoeSgpO1xuICAgICAgZXhwZWN0KHNwYXJxbENvbnRhaW5lcj8ucXVlcnlTZWxlY3RvcignaDMnKT8udGV4dENvbnRlbnQpLnRvQmUoJ1NQQVJRTCBRdWVyeSBSZXN1bHRzJyk7XG4gICAgICBleHBlY3Qoc3BhcnFsQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKCdwcmUnKT8udGV4dENvbnRlbnQpLnRvQmUoc291cmNlKTtcbiAgICAgIGV4cGVjdChzcGFycWxDb250YWluZXI/LnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJykpLnRvQmVUcnV0aHkoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBwcm9jZXNzIENPTlNUUlVDVCBxdWVyeSBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrVHJpcGxlcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGdldFN1YmplY3Q6ICgpID0+ICh7IHRvU3RyaW5nOiAoKSA9PiAnaHR0cDovL2V4YW1wbGUub3JnL3MxJyB9KSxcbiAgICAgICAgICBnZXRQcmVkaWNhdGU6ICgpID0+ICh7IHRvU3RyaW5nOiAoKSA9PiAnaHR0cDovL2V4YW1wbGUub3JnL3AxJyB9KSxcbiAgICAgICAgICBnZXRPYmplY3Q6ICgpID0+ICh7IHRvU3RyaW5nOiAoKSA9PiAnaHR0cDovL2V4YW1wbGUub3JnL28xJyB9KVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZ2V0U3ViamVjdDogKCkgPT4gKHsgdG9TdHJpbmc6ICgpID0+ICdodHRwOi8vZXhhbXBsZS5vcmcvczInIH0pLFxuICAgICAgICAgIGdldFByZWRpY2F0ZTogKCkgPT4gKHsgdG9TdHJpbmc6ICgpID0+ICdodHRwOi8vZXhhbXBsZS5vcmcvcDInIH0pLFxuICAgICAgICAgIGdldE9iamVjdDogKCkgPT4gKHsgdG9TdHJpbmc6ICgpID0+ICdodHRwOi8vZXhhbXBsZS5vcmcvbzInIH0pXG4gICAgICAgIH1cbiAgICAgIF07XG5cbiAgICAgIG1vY2tFbmdpbmUuY29uc3RydWN0ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHRyaXBsZXM6IG1vY2tUcmlwbGVzLFxuICAgICAgICBjYWNoZWQ6IGZhbHNlLFxuICAgICAgICBwcm92ZW5hbmNlOiAndGVzdC1xdWVyeSdcbiAgICAgIH0gYXMgQ29uc3RydWN0UmVzdWx0KTtcblxuICAgICAgbW9ja0dyYXBoLmFkZCA9IGplc3QuZm4oKTtcblxuICAgICAgY29uc3Qgc291cmNlID0gJ0NPTlNUUlVDVCB7ID9zID9wID9vIH0gV0hFUkUgeyA/cyA/cCA/byB9JztcbiAgICAgIFxuICAgICAgYXdhaXQgcHJvY2Vzc29yLnByb2Nlc3NDb2RlQmxvY2soc291cmNlLCBjb250YWluZXIsIGNvbnRleHQpO1xuXG4gICAgICAvLyBEZWJ1ZyB0aGUgSFRNTCBzdHJ1Y3R1cmUgdG8gdW5kZXJzdGFuZCB0aGUgdGFibGUgbGF5b3V0XG4gICAgICBjb25zb2xlLmxvZygnQ09OU1RSVUNUIEhUTUw6JywgY29udGFpbmVyLmlubmVySFRNTCk7XG5cbiAgICAgIGV4cGVjdChtb2NrU2FuaXRpemVyLnNhbml0aXplKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChzb3VyY2UpO1xuICAgICAgZXhwZWN0KG1vY2tFbmdpbmUuY29uc3RydWN0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChzb3VyY2UpO1xuICAgICAgZXhwZWN0KG1vY2tHcmFwaC5hZGQpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgcmVzdWx0cyBmb3JtYXR0aW5nXG4gICAgICBjb25zdCBzcGFycWxDb250YWluZXIgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmV4b2NvcnRleC1zcGFycWwtY29udGFpbmVyJyk7XG4gICAgICBleHBlY3Qoc3BhcnFsQ29udGFpbmVyKS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3Qoc3BhcnFsQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKCd0YWJsZScpKS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3Qoc3BhcnFsQ29udGFpbmVyPy5xdWVyeVNlbGVjdG9yKCd0ZCcpPy50ZXh0Q29udGVudCkudG9Db250YWluKCdodHRwOi8vZXhhbXBsZS5vcmcvJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGVtcHR5IHJlc3VsdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrRW5naW5lLnNlbGVjdCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICByZXN1bHRzOiBbXSxcbiAgICAgICAgY2FjaGVkOiBmYWxzZVxuICAgICAgfSBhcyBTZWxlY3RSZXN1bHQpO1xuXG4gICAgICBjb25zdCBzb3VyY2UgPSAnU0VMRUNUID9zID9wID9vIFdIRVJFIHsgP3MgP3AgP28gfSc7XG4gICAgICBcbiAgICAgIGF3YWl0IHByb2Nlc3Nvci5wcm9jZXNzQ29kZUJsb2NrKHNvdXJjZSwgY29udGFpbmVyLCBjb250ZXh0KTtcblxuICAgICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc3BhcnFsLWVtcHR5LXJlc3VsdCcpKS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zcGFycWwtZW1wdHktcmVzdWx0Jyk/LnRleHRDb250ZW50KS50b0JlKCdObyByZXN1bHRzIGZvdW5kJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGNhY2hlZCByZXN1bHRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2VsZWN0UmVzdWx0cyA9IFtcbiAgICAgICAgeyBzOiAnY2FjaGVkMScsIHA6ICdjYWNoZWQyJywgbzogJ2NhY2hlZDMnIH1cbiAgICAgIF07XG5cbiAgICAgIG1vY2tFbmdpbmUuc2VsZWN0ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHJlc3VsdHM6IHNlbGVjdFJlc3VsdHMsXG4gICAgICAgIGNhY2hlZDogdHJ1ZVxuICAgICAgfSBhcyBTZWxlY3RSZXN1bHQpO1xuXG4gICAgICBjb25zdCBzb3VyY2UgPSAnU0VMRUNUID9zID9wID9vIFdIRVJFIHsgP3MgP3AgP28gfSc7XG4gICAgICBcbiAgICAgIGF3YWl0IHByb2Nlc3Nvci5wcm9jZXNzQ29kZUJsb2NrKHNvdXJjZSwgY29udGFpbmVyLCBjb250ZXh0KTtcblxuICAgICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc3BhcnFsLWNhY2hlLWluZGljYXRvcicpKS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zcGFycWwtY2FjaGUtaW5kaWNhdG9yJyk/LnRleHRDb250ZW50KS50b0NvbnRhaW4oJ0NhY2hlZCBSZXN1bHQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBkaXNwbGF5IGxvYWRpbmcgaW5kaWNhdG9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IHJlc29sdmVQcm9taXNlOiBGdW5jdGlvbjtcbiAgICAgIGNvbnN0IHNsb3dQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIHJlc29sdmVQcm9taXNlID0gcmVzb2x2ZTtcbiAgICAgIH0pO1xuXG4gICAgICBtb2NrRW5naW5lLnNlbGVjdCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICByZXN1bHRzOiBbXSxcbiAgICAgICAgY2FjaGVkOiBmYWxzZVxuICAgICAgfSBhcyBTZWxlY3RSZXN1bHQpO1xuXG4gICAgICAvLyBNb2NrIHByb2Nlc3NDb2RlQmxvY2sgdG8gYmUgc2xvd1xuICAgICAgY29uc3Qgb3JpZ2luYWxFeGVjdXRlUXVlcnkgPSBwcm9jZXNzb3IuZXhlY3V0ZVF1ZXJ5O1xuICAgICAgcHJvY2Vzc29yLmV4ZWN1dGVRdWVyeSA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gc2xvd1Byb21pc2UpO1xuXG4gICAgICBjb25zdCBzb3VyY2UgPSAnU0VMRUNUID9zID9wID9vIFdIRVJFIHsgP3MgP3AgP28gfSc7XG4gICAgICBjb25zdCBwcm9jZXNzUHJvbWlzZSA9IHByb2Nlc3Nvci5wcm9jZXNzQ29kZUJsb2NrKHNvdXJjZSwgY29udGFpbmVyLCBjb250ZXh0KTtcblxuICAgICAgLy8gQ2hlY2sgbG9hZGluZyBpbmRpY2F0b3IgYXBwZWFyc1xuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwKSk7XG4gICAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zcGFycWwtbG9hZGluZycpKS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3QoY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5zcGFycWwtbG9hZGluZycpPy50ZXh0Q29udGVudCkudG9CZSgnRXhlY3V0aW5nIHF1ZXJ5Li4uJyk7XG5cbiAgICAgIC8vIENvbXBsZXRlIHRoZSBwcm9taXNlXG4gICAgICByZXNvbHZlUHJvbWlzZSEoeyByZXN1bHRzOiBbXSwgY2FjaGVkOiBmYWxzZSB9KTtcbiAgICAgIGF3YWl0IHByb2Nlc3NQcm9taXNlO1xuXG4gICAgICAvLyBMb2FkaW5nIGluZGljYXRvciBzaG91bGQgYmUgcmVtb3ZlZFxuICAgICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc3BhcnFsLWxvYWRpbmcnKSkudG9CZUZhbHN5KCk7XG5cbiAgICAgIHByb2Nlc3Nvci5leGVjdXRlUXVlcnkgPSBvcmlnaW5hbEV4ZWN1dGVRdWVyeTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgcXVlcnkgZXhlY3V0aW9uIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNvdXJjZSA9ICdJTlZBTElEIFNQQVJRTCBRVUVSWSc7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgc2FuaXRpemVyIHRvIHJldHVybiBlcnJvclxuICAgICAgbW9ja1Nhbml0aXplci5zYW5pdGl6ZSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpc1N1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBpc0ZhaWx1cmU6IHRydWUsXG4gICAgICAgIGdldFZhbHVlOiAoKSA9PiBudWxsLFxuICAgICAgICBlcnJvclZhbHVlOiAoKSA9PiAnSW52YWxpZCBTUEFSUUwgc3ludGF4J1xuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHByb2Nlc3Nvci5wcm9jZXNzQ29kZUJsb2NrKHNvdXJjZSwgY29udGFpbmVyLCBjb250ZXh0KTtcblxuICAgICAgZXhwZWN0KGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuc3BhcnFsLWVycm9yJykpLnRvQmVUcnV0aHkoKTtcbiAgICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvcignLnNwYXJxbC1lcnJvcicpPy50ZXh0Q29udGVudCkudG9Db250YWluKCdRdWVyeSB2YWxpZGF0aW9uIGZhaWxlZCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGFwcGx5IEV4b0ZvY3VzIGZpbHRlcmluZyB3aGVuIGF2YWlsYWJsZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG9yaWdpbmFsUmVzdWx0cyA9IFtcbiAgICAgICAgeyBzOiAnc3ViamVjdDEnLCBwOiAncHJlZGljYXRlMScsIG86ICdvYmplY3QxJyB9LFxuICAgICAgICB7IHM6ICdzdWJqZWN0MicsIHA6ICdwcmVkaWNhdGUyJywgbzogJ29iamVjdDInIH0sXG4gICAgICAgIHsgczogJ3N1YmplY3QzJywgcDogJ3ByZWRpY2F0ZTMnLCBvOiAnb2JqZWN0MycgfVxuICAgICAgXTtcblxuICAgICAgY29uc3QgZmlsdGVyZWRSZXN1bHRzID0gW1xuICAgICAgICB7IHM6ICdzdWJqZWN0MScsIHA6ICdwcmVkaWNhdGUxJywgbzogJ29iamVjdDEnIH1cbiAgICAgIF07XG5cbiAgICAgIG1vY2tFbmdpbmUuc2VsZWN0ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHJlc3VsdHM6IG9yaWdpbmFsUmVzdWx0cyxcbiAgICAgICAgY2FjaGVkOiBmYWxzZVxuICAgICAgfSBhcyBTZWxlY3RSZXN1bHQpO1xuXG4gICAgICBtb2NrRm9jdXNTZXJ2aWNlLmZpbHRlclNQQVJRTFJlc3VsdHMgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKGZpbHRlcmVkUmVzdWx0cyk7XG5cbiAgICAgIGNvbnN0IHNvdXJjZSA9ICdTRUxFQ1QgP3MgP3AgP28gV0hFUkUgeyA/cyA/cCA/byB9JztcbiAgICAgIFxuICAgICAgYXdhaXQgcHJvY2Vzc29yLnByb2Nlc3NDb2RlQmxvY2soc291cmNlLCBjb250YWluZXIsIGNvbnRleHQpO1xuXG4gICAgICBleHBlY3QobW9ja0ZvY3VzU2VydmljZS5maWx0ZXJTUEFSUUxSZXN1bHRzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChvcmlnaW5hbFJlc3VsdHMpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayB0aGF0IGZpbHRlcmVkIHJlc3VsdHMgYXJlIGRpc3BsYXllZFxuICAgICAgY29uc3Qgcm93cyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCd0Ym9keSB0cicpO1xuICAgICAgZXhwZWN0KHJvd3MpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2V4ZWN1dGVRdWVyeScsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgcmVqZWN0IGVtcHR5IHF1ZXJpZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBleHBlY3QocHJvY2Vzc29yLmV4ZWN1dGVRdWVyeSgnJykpLnJlamVjdHMudG9UaHJvdygnRW1wdHkgcXVlcnknKTtcbiAgICAgIGF3YWl0IGV4cGVjdChwcm9jZXNzb3IuZXhlY3V0ZVF1ZXJ5KCcgICAnKSkucmVqZWN0cy50b1Rocm93KCdFbXB0eSBxdWVyeScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBxdWVyeSBzYW5pdGl6YXRpb24gZmFpbHVyZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrU2FuaXRpemVyLnNhbml0aXplID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzU3VjY2VzczogZmFsc2UsXG4gICAgICAgIGlzRmFpbHVyZTogdHJ1ZSxcbiAgICAgICAgZ2V0VmFsdWU6ICgpID0+IG51bGwsXG4gICAgICAgIGVycm9yVmFsdWU6ICgpID0+ICdNYWxpY2lvdXMgcXVlcnkgZGV0ZWN0ZWQnXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHByb2Nlc3Nvci5leGVjdXRlUXVlcnkoJ0RST1AgVEFCTEUgdXNlcnM7JykpLnJlamVjdHMudG9UaHJvdygnUXVlcnkgdmFsaWRhdGlvbiBmYWlsZWQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBzaG93IHdhcm5pbmdzIGZyb20gc2FuaXRpemVyJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja05vdGljZSA9IGplc3Quc3B5T24ocmVxdWlyZSgnb2JzaWRpYW4nKSwgJ05vdGljZScpO1xuICAgICAgXG4gICAgICBtb2NrU2FuaXRpemVyLnNhbml0aXplID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGlzU3VjY2VzczogdHJ1ZSxcbiAgICAgICAgaXNGYWlsdXJlOiBmYWxzZSxcbiAgICAgICAgZ2V0VmFsdWU6ICgpID0+ICh7XG4gICAgICAgICAgcXVlcnk6ICdTRUxFQ1QgP3MgP3AgP28gV0hFUkUgeyA/cyA/cCA/byB9JyxcbiAgICAgICAgICB3YXJuaW5nczogWydRdWVyeSBjb250YWlucyBkZXByZWNhdGVkIHN5bnRheCddXG4gICAgICAgIH0pLFxuICAgICAgICBlcnJvclZhbHVlOiAoKSA9PiBudWxsXG4gICAgICB9KTtcblxuICAgICAgbW9ja0VuZ2luZS5zZWxlY3QgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgcmVzdWx0czogW10sXG4gICAgICAgIGNhY2hlZDogZmFsc2VcbiAgICAgIH0gYXMgU2VsZWN0UmVzdWx0KTtcblxuICAgICAgYXdhaXQgcHJvY2Vzc29yLmV4ZWN1dGVRdWVyeSgnU0VMRUNUID9zID9wID9vIFdIRVJFIHsgP3MgP3AgP28gfScpO1xuXG4gICAgICBleHBlY3QobW9ja05vdGljZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ1F1ZXJ5IGV4ZWN1dGVkIHdpdGggd2FybmluZ3M6IFF1ZXJ5IGNvbnRhaW5zIGRlcHJlY2F0ZWQgc3ludGF4Jyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmVqZWN0IHVuc3VwcG9ydGVkIHF1ZXJ5IHR5cGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1Nhbml0aXplci5zYW5pdGl6ZSA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICBpc1N1Y2Nlc3M6IHRydWUsXG4gICAgICAgIGlzRmFpbHVyZTogZmFsc2UsXG4gICAgICAgIGdldFZhbHVlOiAoKSA9PiAoe1xuICAgICAgICAgIHF1ZXJ5OiAnREVMRVRFIFdIRVJFIHsgP3MgP3AgP28gfScsXG4gICAgICAgICAgd2FybmluZ3M6IFtdXG4gICAgICAgIH0pLFxuICAgICAgICBlcnJvclZhbHVlOiAoKSA9PiBudWxsXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHByb2Nlc3Nvci5leGVjdXRlUXVlcnkoJ0RFTEVURSBXSEVSRSB7ID9zID9wID9vIH0nKSkucmVqZWN0cy50b1Rocm93KCdPbmx5IFNFTEVDVCBhbmQgQ09OU1RSVUNUIHF1ZXJpZXMgYXJlIGN1cnJlbnRseSBzdXBwb3J0ZWQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgQ09OU1RSVUNUIHF1ZXJ5IHdpdGggZHVwbGljYXRlIHByZXZlbnRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrVHJpcGxlcyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIGdldFN1YmplY3Q6ICgpID0+ICh7IHRvU3RyaW5nOiAoKSA9PiAnaHR0cDovL2V4YW1wbGUub3JnL3MxJyB9KSxcbiAgICAgICAgICBnZXRQcmVkaWNhdGU6ICgpID0+ICh7IHRvU3RyaW5nOiAoKSA9PiAnaHR0cDovL2V4YW1wbGUub3JnL3AxJyB9KSxcbiAgICAgICAgICBnZXRPYmplY3Q6ICgpID0+ICh7IHRvU3RyaW5nOiAoKSA9PiAnaHR0cDovL2V4YW1wbGUub3JnL28xJyB9KVxuICAgICAgICB9XG4gICAgICBdO1xuXG4gICAgICAvLyBUZXN0IGNhY2hlZCByZXN1bHQgLSBzaG91bGQgbm90IGFkZCB0byBncmFwaFxuICAgICAgbW9ja0VuZ2luZS5jb25zdHJ1Y3QgPSBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgdHJpcGxlczogbW9ja1RyaXBsZXMsXG4gICAgICAgIGNhY2hlZDogdHJ1ZSxcbiAgICAgICAgcHJvdmVuYW5jZTogJ3Rlc3QtcXVlcnknXG4gICAgICB9IGFzIENvbnN0cnVjdFJlc3VsdCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb2Nlc3Nvci5leGVjdXRlUXVlcnkoJ0NPTlNUUlVDVCB7ID9zID9wID9vIH0gV0hFUkUgeyA/cyA/cCA/byB9Jyk7XG5cbiAgICAgIGV4cGVjdChtb2NrR3JhcGguYWRkKS5ub3QudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5jYWNoZWQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LnJlc3VsdHMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1RhYmxlIENyZWF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgdGFibGUgd2l0aCBoZWFkZXJzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0cyA9IFtcbiAgICAgICAgeyBuYW1lOiAnSm9obicsIGFnZTogJzI1JywgY2l0eTogJ05ldyBZb3JrJyB9LFxuICAgICAgICB7IG5hbWU6ICdKYW5lJywgYWdlOiAnMzAnLCBjaXR5OiAnQm9zdG9uJyB9XG4gICAgICBdO1xuXG4gICAgICBjb25zdCB0YWJsZSA9IHByb2Nlc3NvclsnY3JlYXRlUmVzdWx0VGFibGUnXShyZXN1bHRzKTtcblxuICAgICAgZXhwZWN0KHRhYmxlLnRhZ05hbWUpLnRvQmUoJ1RBQkxFJyk7XG4gICAgICBleHBlY3QodGFibGUuY2xhc3NOYW1lKS50b0JlKCdzcGFycWwtcmVzdWx0cy10YWJsZScpO1xuICAgICAgXG4gICAgICAvLyBDaGVjayBoZWFkZXJzXG4gICAgICBjb25zdCBoZWFkZXJzID0gdGFibGUucXVlcnlTZWxlY3RvckFsbCgndGgnKTtcbiAgICAgIGV4cGVjdChoZWFkZXJzKS50b0hhdmVMZW5ndGgoMyk7XG4gICAgICBleHBlY3QoaGVhZGVyc1swXS50ZXh0Q29udGVudCkudG9CZSgnbmFtZScpO1xuICAgICAgZXhwZWN0KGhlYWRlcnNbMV0udGV4dENvbnRlbnQpLnRvQmUoJ2FnZScpO1xuICAgICAgZXhwZWN0KGhlYWRlcnNbMl0udGV4dENvbnRlbnQpLnRvQmUoJ2NpdHknKTtcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgZGF0YSByb3dzXG4gICAgICBjb25zdCBkYXRhUm93cyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3Rib2R5IHRyJyk7XG4gICAgICBleHBlY3QoZGF0YVJvd3MpLnRvSGF2ZUxlbmd0aCgyKTtcbiAgICAgIGV4cGVjdChkYXRhUm93c1swXS5jZWxsc1swXS50ZXh0Q29udGVudCkudG9CZSgnSm9obicpO1xuICAgICAgZXhwZWN0KGRhdGFSb3dzWzFdLmNlbGxzWzBdLnRleHRDb250ZW50KS50b0JlKCdKYW5lJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGVtcHR5IHRhYmxlIGZvciBubyByZXN1bHRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgdGFibGUgPSBwcm9jZXNzb3JbJ2NyZWF0ZVJlc3VsdFRhYmxlJ10oW10pO1xuICAgICAgZXhwZWN0KHRhYmxlLnRhZ05hbWUpLnRvQmUoJ1RBQkxFJyk7XG4gICAgICBleHBlY3QodGFibGUucXVlcnlTZWxlY3RvckFsbCgndHInKSkudG9IYXZlTGVuZ3RoKDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBmaWxlIGxpbmtzIGluIHJlc3VsdHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHRzID0gW1xuICAgICAgICB7IGZpbGU6ICdmaWxlOi8vdGVzdC1ub3RlLm1kJywgY29udGVudDogJ3NvbWUgY29udGVudCcgfSxcbiAgICAgICAgeyBmaWxlOiAnL3BhdGgvdG8vbm90ZS5tZCcsIGNvbnRlbnQ6ICdtb3JlIGNvbnRlbnQnIH1cbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IHRhYmxlID0gcHJvY2Vzc29yWydjcmVhdGVSZXN1bHRUYWJsZSddKHJlc3VsdHMpO1xuICAgICAgXG4gICAgICBjb25zdCBsaW5rcyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ2EuaW50ZXJuYWwtbGluaycpO1xuICAgICAgZXhwZWN0KGxpbmtzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QobGlua3NbMF0udGV4dENvbnRlbnQpLnRvQmUoJ3Rlc3Qtbm90ZS5tZCcpO1xuICAgICAgZXhwZWN0KGxpbmtzWzFdLnRleHRDb250ZW50KS50b0JlKCdub3RlLm1kJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGNsaWNrIGV2ZW50cyBvbiBub3RlIGxpbmtzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0cyA9IFt7IGZpbGU6ICdmaWxlOi8vdGVzdC1ub3RlLm1kJyB9XTtcbiAgICAgIGNvbnN0IHRhYmxlID0gcHJvY2Vzc29yWydjcmVhdGVSZXN1bHRUYWJsZSddKHJlc3VsdHMpO1xuICAgICAgY29uc3QgbGluayA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3IoJ2EuaW50ZXJuYWwtbGluaycpIGFzIEhUTUxBbmNob3JFbGVtZW50O1xuICAgICAgXG4gICAgICBleHBlY3QobGluaykudG9CZVRydXRoeSgpO1xuICAgICAgXG4gICAgICAvLyBNb2NrIGNsaWNrIGV2ZW50XG4gICAgICBjb25zdCBjbGlja0V2ZW50ID0gbmV3IEV2ZW50KCdjbGljaycpO1xuICAgICAgamVzdC5zcHlPbihjbGlja0V2ZW50LCAncHJldmVudERlZmF1bHQnKTtcbiAgICAgIFxuICAgICAgbGluay5kaXNwYXRjaEV2ZW50KGNsaWNrRXZlbnQpO1xuICAgICAgXG4gICAgICBleHBlY3QoY2xpY2tFdmVudC5wcmV2ZW50RGVmYXVsdCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tBcHAud29ya3NwYWNlLm9wZW5MaW5rVGV4dCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3Rlc3Qtbm90ZS5tZCcsICcnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0NhY2hlIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBjYWNoZSBzdGF0aXN0aWNzJywgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1N0YXRzID0ge1xuICAgICAgICBoaXRzOiAxNSxcbiAgICAgICAgbWlzc2VzOiA4LFxuICAgICAgICBoaXRSYXRlOiA2NS4yLFxuICAgICAgICBzaXplOiAxMixcbiAgICAgICAgbWF4U2l6ZTogMTAwLFxuICAgICAgICB0b3RhbFF1ZXJpZXM6IDIzLFxuICAgICAgICBldmljdGlvbnM6IDJcbiAgICAgIH07XG5cbiAgICAgIG1vY2tFbmdpbmUuZ2V0Q2FjaGVTdGF0aXN0aWNzID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShtb2NrU3RhdHMpO1xuXG4gICAgICBjb25zdCBzdGF0cyA9IHByb2Nlc3Nvci5nZXRDYWNoZVN0YXRpc3RpY3MoKTtcbiAgICAgIGV4cGVjdChzdGF0cykudG9FcXVhbChtb2NrU3RhdHMpO1xuICAgICAgZXhwZWN0KG1vY2tFbmdpbmUuZ2V0Q2FjaGVTdGF0aXN0aWNzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaW52YWxpZGF0ZSBjYWNoZScsICgpID0+IHtcbiAgICAgIG1vY2tFbmdpbmUuaW52YWxpZGF0ZUNhY2hlID0gamVzdC5mbigpO1xuICAgICAgcHJvY2Vzc29yLmludmFsaWRhdGVDYWNoZSgpO1xuICAgICAgZXhwZWN0KG1vY2tFbmdpbmUuaW52YWxpZGF0ZUNhY2hlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY2xlYW51cCBjYWNoZScsICgpID0+IHtcbiAgICAgIG1vY2tFbmdpbmUuY2xlYW51cENhY2hlID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSg1KTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHByb2Nlc3Nvci5jbGVhbnVwQ2FjaGUoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoNSk7XG4gICAgICBleHBlY3QobW9ja0VuZ2luZS5jbGVhbnVwQ2FjaGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBkZXN0cm95IHJlc291cmNlcycsICgpID0+IHtcbiAgICAgIG1vY2tFbmdpbmUuZGVzdHJveSA9IGplc3QuZm4oKTtcbiAgICAgIHByb2Nlc3Nvci5kZXN0cm95KCk7XG4gICAgICBleHBlY3QobW9ja0VuZ2luZS5kZXN0cm95KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdVSSBFbGVtZW50cycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGxvYWRpbmcgaW5kaWNhdG9yJywgKCkgPT4ge1xuICAgICAgY29uc3QgbG9hZGluZyA9IHByb2Nlc3NvclsnY3JlYXRlTG9hZGluZ0luZGljYXRvciddKCk7XG4gICAgICBleHBlY3QobG9hZGluZy5jbGFzc05hbWUpLnRvQmUoJ3NwYXJxbC1sb2FkaW5nJyk7XG4gICAgICBleHBlY3QobG9hZGluZy50ZXh0Q29udGVudCkudG9CZSgnRXhlY3V0aW5nIHF1ZXJ5Li4uJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGVycm9yIG1lc3NhZ2UnLCAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcignVGVzdCBlcnJvciBtZXNzYWdlJyk7XG4gICAgICBjb25zdCBlcnJvckVsID0gcHJvY2Vzc29yWydjcmVhdGVFcnJvck1lc3NhZ2UnXShlcnJvcik7XG4gICAgICBcbiAgICAgIGV4cGVjdChlcnJvckVsLmNsYXNzTmFtZSkudG9CZSgnc3BhcnFsLWVycm9yJyk7XG4gICAgICBleHBlY3QoZXJyb3JFbC50ZXh0Q29udGVudCkudG9Db250YWluKCdRdWVyeSBFcnJvcjonKTtcbiAgICAgIGV4cGVjdChlcnJvckVsLnRleHRDb250ZW50KS50b0NvbnRhaW4oJ1Rlc3QgZXJyb3IgbWVzc2FnZScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBzdGF0cyBlbGVtZW50IHdpdGhvdXQgY2FjaGUgaW5mbycsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXRzID0gcHJvY2Vzc29yWydjcmVhdGVTdGF0c0VsZW1lbnQnXSg1LCAxNTApO1xuICAgICAgZXhwZWN0KHN0YXRzLmNsYXNzTmFtZSkudG9CZSgnc3BhcnFsLXN0YXRzJyk7XG4gICAgICBleHBlY3Qoc3RhdHMudGV4dENvbnRlbnQpLnRvQmUoJ0V4ZWN1dGVkIGluIDE1MG1zIC0gNSByZXN1bHRzJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIHN0YXRzIGVsZW1lbnQgd2l0aCBjYWNoZSBpbmZvJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdHMgPSBwcm9jZXNzb3JbJ2NyZWF0ZVN0YXRzRWxlbWVudCddKDUsIDE1MCwgdHJ1ZSk7XG4gICAgICBleHBlY3Qoc3RhdHMudGV4dENvbnRlbnQpLnRvQmUoJ0V4ZWN1dGVkIGluIDE1MG1zIC0gNSByZXN1bHRzIChjYWNoZWQgcmVzdWx0KScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBjYWNoZSBpbmRpY2F0b3IgZm9yIGNhY2hlZCByZXN1bHRzJywgKCkgPT4ge1xuICAgICAgY29uc3QgaW5kaWNhdG9yID0gcHJvY2Vzc29yWydjcmVhdGVDYWNoZUluZGljYXRvciddKHRydWUpO1xuICAgICAgZXhwZWN0KGluZGljYXRvci5jbGFzc05hbWUpLnRvQmUoJ3NwYXJxbC1jYWNoZS1pbmRpY2F0b3InKTtcbiAgICAgIGV4cGVjdChpbmRpY2F0b3IudGV4dENvbnRlbnQpLnRvQmUoJ/Cfk4sgQ2FjaGVkIFJlc3VsdCcpO1xuICAgICAgZXhwZWN0KGluZGljYXRvci5zdHlsZS5iYWNrZ3JvdW5kKS50b0NvbnRhaW4oJ3JnYigyMzIsIDI0NSwgMjMyKScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNyZWF0ZSBjYWNoZSBpbmRpY2F0b3IgZm9yIGZyZXNoIHJlc3VsdHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCBpbmRpY2F0b3IgPSBwcm9jZXNzb3JbJ2NyZWF0ZUNhY2hlSW5kaWNhdG9yJ10oZmFsc2UpO1xuICAgICAgZXhwZWN0KGluZGljYXRvci50ZXh0Q29udGVudCkudG9CZSgn8J+UhCBGcmVzaCBSZXN1bHQnKTtcbiAgICAgIGV4cGVjdChpbmRpY2F0b3Iuc3R5bGUuYmFja2dyb3VuZCkudG9Db250YWluKCdyZ2IoMjI3LCAyNDIsIDI1MyknKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0V4cG9ydCBDb250cm9scycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgY3JlYXRlIGV4cG9ydCBjb250cm9scyB3aXRoIGZvcm1hdCBidXR0b25zJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0cyA9IFt7IHM6ICd0ZXN0JywgcDogJ3Rlc3QnLCBvOiAndGVzdCcgfV07XG4gICAgICBjb25zdCBxdWVyeSA9ICdTRUxFQ1QgP3MgP3AgP28gV0hFUkUgeyA/cyA/cCA/byB9JztcbiAgICAgIFxuICAgICAgY29uc3QgY29udHJvbHMgPSBwcm9jZXNzb3JbJ2NyZWF0ZUV4cG9ydENvbnRyb2xzJ10ocmVzdWx0cywgcXVlcnkpO1xuICAgICAgXG4gICAgICBleHBlY3QoY29udHJvbHMuY2xhc3NOYW1lKS50b0JlKCdzcGFycWwtZXhwb3J0LWNvbnRyb2xzJyk7XG4gICAgICBleHBlY3QoY29udHJvbHMudGV4dENvbnRlbnQpLnRvQ29udGFpbignRXhwb3J0IHJlc3VsdHM6Jyk7XG4gICAgICBcbiAgICAgIC8vIENoZWNrIGZvcm1hdCBidXR0b25zXG4gICAgICBjb25zdCBidXR0b25zID0gY29udHJvbHMucXVlcnlTZWxlY3RvckFsbCgnLnNwYXJxbC1leHBvcnQtYnV0dG9uJyk7XG4gICAgICBleHBlY3QoYnV0dG9ucykudG9IYXZlTGVuZ3RoKDQpOyAvLyBUdXJ0bGUsIEpTT04tTEQsIE4tVHJpcGxlcywgUkRGL1hNTFxuICAgICAgXG4gICAgICBleHBlY3QoYnV0dG9uc1swXS50ZXh0Q29udGVudCkudG9CZSgnVHVydGxlJyk7XG4gICAgICBleHBlY3QoYnV0dG9uc1sxXS50ZXh0Q29udGVudCkudG9CZSgnSlNPTi1MRCcpO1xuICAgICAgZXhwZWN0KGJ1dHRvbnNbMl0udGV4dENvbnRlbnQpLnRvQmUoJ04tVHJpcGxlcycpO1xuICAgICAgZXhwZWN0KGJ1dHRvbnNbM10udGV4dENvbnRlbnQpLnRvQmUoJ1JERi9YTUwnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjcmVhdGUgYWR2YW5jZWQgZXhwb3J0IGJ1dHRvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBbeyBzOiAndGVzdCcsIHA6ICd0ZXN0JywgbzogJ3Rlc3QnIH1dO1xuICAgICAgY29uc3QgcXVlcnkgPSAnU0VMRUNUID9zID9wID9vIFdIRVJFIHsgP3MgP3AgP28gfSc7XG4gICAgICBcbiAgICAgIGNvbnN0IGNvbnRyb2xzID0gcHJvY2Vzc29yWydjcmVhdGVFeHBvcnRDb250cm9scyddKHJlc3VsdHMsIHF1ZXJ5KTtcbiAgICAgIGNvbnN0IGFkdmFuY2VkQnV0dG9uID0gY29udHJvbHMucXVlcnlTZWxlY3RvcignLnNwYXJxbC1leHBvcnQtYWR2YW5jZWQnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGFkdmFuY2VkQnV0dG9uKS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3QoYWR2YW5jZWRCdXR0b24hLnRleHRDb250ZW50KS50b0JlKCdBZHZhbmNlZC4uLicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBleHBvcnQgYnV0dG9uIGNsaWNrcycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSREZTZXJ2aWNlLmV4cG9ydFF1ZXJ5UmVzdWx0cyA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGlzU3VjY2VzczogdHJ1ZSxcbiAgICAgICAgaXNGYWlsdXJlOiBmYWxzZSxcbiAgICAgICAgZ2V0VmFsdWU6ICgpID0+ICh7XG4gICAgICAgICAgdHJpcGxlQ291bnQ6IDEwLFxuICAgICAgICAgIGZpbGVOYW1lOiAndGVzdC1leHBvcnQudHRsJyxcbiAgICAgICAgICBjb250ZW50OiAnbW9jayB0dXJ0bGUgY29udGVudCdcbiAgICAgICAgfSksXG4gICAgICAgIGVycm9yVmFsdWU6ICgpID0+IG51bGxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXN1bHRzID0gW3sgczogJ3Rlc3QnLCBwOiAndGVzdCcsIG86ICd0ZXN0JyB9XTtcbiAgICAgIGNvbnN0IHF1ZXJ5ID0gJ1NFTEVDVCA/cyA/cCA/byBXSEVSRSB7ID9zID9wID9vIH0nO1xuICAgICAgXG4gICAgICBjb25zdCBjb250cm9scyA9IHByb2Nlc3NvclsnY3JlYXRlRXhwb3J0Q29udHJvbHMnXShyZXN1bHRzLCBxdWVyeSk7XG4gICAgICBjb25zdCB0dXJ0bGVCdXR0b24gPSBjb250cm9scy5xdWVyeVNlbGVjdG9yKCcuc3BhcnFsLWV4cG9ydC1idXR0b24nKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICAgIFxuICAgICAgLy8gU2ltdWxhdGUgY2xpY2tcbiAgICAgIHR1cnRsZUJ1dHRvbi5jbGljaygpO1xuXG4gICAgICAvLyBXYWl0IGZvciBhc3luYyBvcGVyYXRpb25cbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMCkpO1xuXG4gICAgICBleHBlY3QobW9ja1JERlNlcnZpY2UuZXhwb3J0UXVlcnlSZXN1bHRzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgcmVzdWx0cyxcbiAgICAgICAgJ3R1cnRsZScsXG4gICAgICAgIGV4cGVjdC5hbnkoU3RyaW5nKVxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZXhwb3J0IGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tSREZTZXJ2aWNlLmV4cG9ydFF1ZXJ5UmVzdWx0cyA9IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIGlzU3VjY2VzczogZmFsc2UsXG4gICAgICAgIGlzRmFpbHVyZTogdHJ1ZSxcbiAgICAgICAgZ2V0VmFsdWU6ICgpID0+IG51bGwsXG4gICAgICAgIGVycm9yVmFsdWU6ICgpID0+ICdFeHBvcnQgZmFpbGVkJ1xuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IG1vY2tOb3RpY2UgPSBqZXN0LnNweU9uKHJlcXVpcmUoJ29ic2lkaWFuJyksICdOb3RpY2UnKTtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IFt7IHM6ICd0ZXN0JywgcDogJ3Rlc3QnLCBvOiAndGVzdCcgfV07XG4gICAgICBjb25zdCBxdWVyeSA9ICdTRUxFQ1QgP3MgP3AgP28gV0hFUkUgeyA/cyA/cCA/byB9JztcbiAgICAgIFxuICAgICAgY29uc3QgY29udHJvbHMgPSBwcm9jZXNzb3JbJ2NyZWF0ZUV4cG9ydENvbnRyb2xzJ10ocmVzdWx0cywgcXVlcnkpO1xuICAgICAgY29uc3QgdHVydGxlQnV0dG9uID0gY29udHJvbHMucXVlcnlTZWxlY3RvcignLnNwYXJxbC1leHBvcnQtYnV0dG9uJykgYXMgSFRNTEJ1dHRvbkVsZW1lbnQ7XG4gICAgICBcbiAgICAgIC8vIFNpbXVsYXRlIGNsaWNrXG4gICAgICB0dXJ0bGVCdXR0b24uY2xpY2soKTtcblxuICAgICAgLy8gV2FpdCBmb3IgYXN5bmMgb3BlcmF0aW9uXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTApKTtcblxuICAgICAgZXhwZWN0KG1vY2tOb3RpY2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdFeHBvcnQgZmFpbGVkOiBFeHBvcnQgZmFpbGVkJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQZXJmb3JtYW5jZSBUZXN0cycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGxhcmdlIHJlc3VsdCBzZXRzIGVmZmljaWVudGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbGFyZ2VSZXN1bHRzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAwMCB9LCAoXywgaSkgPT4gKHtcbiAgICAgICAgaWQ6IGBpdGVtLSR7aX1gLFxuICAgICAgICBuYW1lOiBgTmFtZSAke2l9YCxcbiAgICAgICAgdmFsdWU6IGBWYWx1ZSAke2l9YFxuICAgICAgfSkpO1xuXG4gICAgICBtb2NrRW5naW5lLnNlbGVjdCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICByZXN1bHRzOiBsYXJnZVJlc3VsdHMsXG4gICAgICAgIGNhY2hlZDogZmFsc2VcbiAgICAgIH0gYXMgU2VsZWN0UmVzdWx0KTtcblxuICAgICAgY29uc3Qgc291cmNlID0gJ1NFTEVDVCA/aWQgP25hbWUgP3ZhbHVlIFdIRVJFIHsgP2lkID9uYW1lID92YWx1ZSB9JztcbiAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICBcbiAgICAgIGF3YWl0IHByb2Nlc3Nvci5wcm9jZXNzQ29kZUJsb2NrKHNvdXJjZSwgY29udGFpbmVyLCBjb250ZXh0KTtcbiAgICAgIFxuICAgICAgY29uc3QgZW5kVGltZSA9IERhdGUubm93KCk7XG4gICAgICBleHBlY3QoZW5kVGltZSAtIHN0YXJ0VGltZSkudG9CZUxlc3NUaGFuKDEwMDApOyAvLyBTaG91bGQgY29tcGxldGUgd2l0aGluIDEgc2Vjb25kXG5cbiAgICAgIC8vIFZlcmlmeSB0YWJsZSB3YXMgY3JlYXRlZFxuICAgICAgY29uc3QgdGFibGUgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcigndGFibGUnKTtcbiAgICAgIGV4cGVjdCh0YWJsZSkudG9CZVRydXRoeSgpO1xuICAgICAgXG4gICAgICBjb25zdCByb3dzID0gdGFibGUhLnF1ZXJ5U2VsZWN0b3JBbGwoJ3Rib2R5IHRyJyk7XG4gICAgICBleHBlY3Qocm93cykudG9IYXZlTGVuZ3RoKDEwMDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjb21wbGV4IHF1ZXJpZXMgd2l0aCBtdWx0aXBsZSB2YXJpYWJsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21wbGV4UmVzdWx0cyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIHN1YmplY3Q6ICdodHRwOi8vZXhhbXBsZS5vcmcvcGVyc29uMScsXG4gICAgICAgICAgbmFtZTogJ0pvaG4gRG9lJyxcbiAgICAgICAgICBhZ2U6ICczMCcsXG4gICAgICAgICAgZW1haWw6ICdqb2huQGV4YW1wbGUub3JnJyxcbiAgICAgICAgICBkZXBhcnRtZW50OiAnRW5naW5lZXJpbmcnLFxuICAgICAgICAgIG1hbmFnZXI6ICdodHRwOi8vZXhhbXBsZS5vcmcvcGVyc29uMicsXG4gICAgICAgICAgcHJvamVjdHM6ICdQcm9qZWN0IEEsIFByb2plY3QgQicsXG4gICAgICAgICAgc2tpbGxzOiAnSmF2YVNjcmlwdCwgVHlwZVNjcmlwdCwgUmVhY3QnXG4gICAgICAgIH1cbiAgICAgIF07XG5cbiAgICAgIG1vY2tFbmdpbmUuc2VsZWN0ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHJlc3VsdHM6IGNvbXBsZXhSZXN1bHRzLFxuICAgICAgICBjYWNoZWQ6IGZhbHNlXG4gICAgICB9IGFzIFNlbGVjdFJlc3VsdCk7XG5cbiAgICAgIGNvbnN0IHNvdXJjZSA9IGBcbiAgICAgICAgU0VMRUNUID9zdWJqZWN0ID9uYW1lID9hZ2UgP2VtYWlsID9kZXBhcnRtZW50ID9tYW5hZ2VyID9wcm9qZWN0cyA/c2tpbGxzXG4gICAgICAgIFdIRVJFIHtcbiAgICAgICAgICA/c3ViamVjdCBmb2FmOm5hbWUgP25hbWUgO1xuICAgICAgICAgICAgICAgICAgIGZvYWY6YWdlID9hZ2UgO1xuICAgICAgICAgICAgICAgICAgIGZvYWY6bWJveCA/ZW1haWwgO1xuICAgICAgICAgICAgICAgICAgIG9yZzpkZXBhcnRtZW50ID9kZXBhcnRtZW50IDtcbiAgICAgICAgICAgICAgICAgICBvcmc6bWFuYWdlciA/bWFuYWdlciA7XG4gICAgICAgICAgICAgICAgICAgcHJvajpwcm9qZWN0cyA/cHJvamVjdHMgO1xuICAgICAgICAgICAgICAgICAgIHNraWxsOmhhcyA/c2tpbGxzIC5cbiAgICAgICAgfVxuICAgICAgYDtcbiAgICAgIFxuICAgICAgYXdhaXQgcHJvY2Vzc29yLnByb2Nlc3NDb2RlQmxvY2soc291cmNlLCBjb250YWluZXIsIGNvbnRleHQpO1xuXG4gICAgICBjb25zdCB0YWJsZSA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCd0YWJsZScpO1xuICAgICAgZXhwZWN0KHRhYmxlKS50b0JlVHJ1dGh5KCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGhlYWRlcnMgPSB0YWJsZSEucXVlcnlTZWxlY3RvckFsbCgndGgnKTtcbiAgICAgIGV4cGVjdChoZWFkZXJzKS50b0hhdmVMZW5ndGgoOCk7XG4gICAgICBcbiAgICAgIGNvbnN0IGRhdGFSb3cgPSB0YWJsZSEucXVlcnlTZWxlY3RvcigndGJvZHkgdHInKTtcbiAgICAgIGV4cGVjdChkYXRhUm93KS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3QoZGF0YVJvdyEuY2VsbHMpLnRvSGF2ZUxlbmd0aCg4KTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0VkZ2UgQ2FzZXMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBudWxsIGFuZCB1bmRlZmluZWQgdmFsdWVzIGluIHJlc3VsdHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHRzID0gW1xuICAgICAgICB7IG5hbWU6ICdKb2huJywgYWdlOiBudWxsLCBjaXR5OiB1bmRlZmluZWQgfSxcbiAgICAgICAgeyBuYW1lOiBudWxsLCBhZ2U6ICcyNScsIGNpdHk6ICcnIH0sXG4gICAgICAgIHsgbmFtZTogdW5kZWZpbmVkLCBhZ2U6IHVuZGVmaW5lZCwgY2l0eTogJ0Jvc3RvbicgfVxuICAgICAgXTtcblxuICAgICAgY29uc3QgdGFibGUgPSBwcm9jZXNzb3JbJ2NyZWF0ZVJlc3VsdFRhYmxlJ10ocmVzdWx0cyk7XG4gICAgICBjb25zdCBjZWxscyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RkJyk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBkaXNwbGF5IGVtcHR5IHN0cmluZyBmb3IgbnVsbC91bmRlZmluZWRcbiAgICAgIGV4cGVjdChjZWxsc1sxXS50ZXh0Q29udGVudCkudG9CZSgnJyk7IC8vIG51bGwgYWdlXG4gICAgICBleHBlY3QoY2VsbHNbMl0udGV4dENvbnRlbnQpLnRvQmUoJycpOyAvLyB1bmRlZmluZWQgY2l0eVxuICAgICAgZXhwZWN0KGNlbGxzWzNdLnRleHRDb250ZW50KS50b0JlKCcnKTsgLy8gbnVsbCBuYW1lXG4gICAgICBleHBlY3QoY2VsbHNbNV0udGV4dENvbnRlbnQpLnRvQmUoJycpOyAvLyBlbXB0eSBjaXR5XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHJlc3VsdHMgd2l0aCBpbmNvbnNpc3RlbnQgY29sdW1uIHN0cnVjdHVyZScsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBbXG4gICAgICAgIHsgbmFtZTogJ0pvaG4nLCBhZ2U6ICczMCcgfSxcbiAgICAgICAgeyBuYW1lOiAnSmFuZScsIGNpdHk6ICdCb3N0b24nIH0sXG4gICAgICAgIHsgYWdlOiAnMjUnLCBjaXR5OiAnTmV3IFlvcmsnLCBjb3VudHJ5OiAnVVNBJyB9XG4gICAgICBdO1xuXG4gICAgICAvLyBTaG91bGQgdXNlIGNvbHVtbnMgZnJvbSBmaXJzdCByZXN1bHRcbiAgICAgIGNvbnN0IHRhYmxlID0gcHJvY2Vzc29yWydjcmVhdGVSZXN1bHRUYWJsZSddKHJlc3VsdHMpO1xuICAgICAgY29uc3QgaGVhZGVycyA9IHRhYmxlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RoJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChoZWFkZXJzKS50b0hhdmVMZW5ndGgoMik7XG4gICAgICBleHBlY3QoaGVhZGVyc1swXS50ZXh0Q29udGVudCkudG9CZSgnbmFtZScpO1xuICAgICAgZXhwZWN0KGhlYWRlcnNbMV0udGV4dENvbnRlbnQpLnRvQmUoJ2FnZScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB2ZXJ5IGxvbmcgcXVlcnkgc3RyaW5ncycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGxvbmdRdWVyeSA9IGBcbiAgICAgICAgU0VMRUNUID9zID9wID9vIFdIRVJFIHtcbiAgICAgICAgICA/cyA/cCA/byAuXG4gICAgICAgICAgJHtBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAgfSwgKF8sIGkpID0+IGBPUFRJT05BTCB7ID9zIGV4OnByb3Ake2l9ID92YWwke2l9IH1gKS5qb2luKCcgJyl9XG4gICAgICAgIH1cbiAgICAgIGAudHJpbSgpO1xuXG4gICAgICBtb2NrRW5naW5lLnNlbGVjdCA9IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICByZXN1bHRzOiBbXSxcbiAgICAgICAgY2FjaGVkOiBmYWxzZVxuICAgICAgfSBhcyBTZWxlY3RSZXN1bHQpO1xuXG4gICAgICBhd2FpdCBwcm9jZXNzb3IucHJvY2Vzc0NvZGVCbG9jayhsb25nUXVlcnksIGNvbnRhaW5lciwgY29udGV4dCk7XG5cbiAgICAgIGV4cGVjdChjb250YWluZXIucXVlcnlTZWxlY3RvcigncHJlJyk/LnRleHRDb250ZW50KS50b0JlKGxvbmdRdWVyeSk7XG4gICAgICBleHBlY3QobW9ja0VuZ2luZS5zZWxlY3QpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGxvbmdRdWVyeSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIHNwZWNpYWwgY2hhcmFjdGVycyBpbiBxdWVyeSBhbmQgcmVzdWx0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBbXG4gICAgICAgIHsgbmFtZTogJ0rDtmhuIETDtmUnLCBkZXNjcmlwdGlvbjogJ1NwZWNpYWwgY2hhcnM6IMOgw6HDosOjw6TDpScgfSxcbiAgICAgICAgeyBuYW1lOiAn0KHQvNC40YInLCBkZXNjcmlwdGlvbjogJ0N5cmlsbGljOiDRgNGD0YHRgdC60LjQuSDRgtC10LrRgdGCJyB9LFxuICAgICAgICB7IG5hbWU6ICfnlLDkuK3lpKrpg44nLCBkZXNjcmlwdGlvbjogJ0phcGFuZXNlOiDjgZPjgpPjgavjgaHjga8nIH1cbiAgICAgIF07XG5cbiAgICAgIG1vY2tFbmdpbmUuc2VsZWN0ID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIHJlc3VsdHM6IHJlc3VsdHMsXG4gICAgICAgIGNhY2hlZDogZmFsc2VcbiAgICAgIH0gYXMgU2VsZWN0UmVzdWx0KTtcblxuICAgICAgY29uc3QgcXVlcnkgPSAnU0VMRUNUID9uYW1lID9kZXNjcmlwdGlvbiBXSEVSRSB7ID9wZXJzb24gcmRmczpsYWJlbCA/bmFtZSA7IGRjOmRlc2NyaXB0aW9uID9kZXNjcmlwdGlvbiB9JztcbiAgICAgIFxuICAgICAgYXdhaXQgcHJvY2Vzc29yLnByb2Nlc3NDb2RlQmxvY2socXVlcnksIGNvbnRhaW5lciwgY29udGV4dCk7XG5cbiAgICAgIGNvbnN0IHRhYmxlID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3RhYmxlJyk7XG4gICAgICBjb25zdCBjZWxscyA9IHRhYmxlIS5xdWVyeVNlbGVjdG9yQWxsKCd0ZCcpO1xuICAgICAgXG4gICAgICBleHBlY3QoY2VsbHNbMF0udGV4dENvbnRlbnQpLnRvQmUoJ0rDtmhuIETDtmUnKTtcbiAgICAgIGV4cGVjdChjZWxsc1sxXS50ZXh0Q29udGVudCkudG9CZSgnU3BlY2lhbCBjaGFyczogw6DDocOiw6PDpMOlJyk7XG4gICAgICBleHBlY3QoY2VsbHNbMl0udGV4dENvbnRlbnQpLnRvQmUoJ9Ch0LzQuNGCJyk7XG4gICAgICBleHBlY3QoY2VsbHNbNF0udGV4dENvbnRlbnQpLnRvQmUoJ+eUsOS4reWkqumDjicpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG4vLyBUZXN0IHV0aWxpdGllc1xuZnVuY3Rpb24gY3JlYXRlTW9ja1RyaXBsZShzOiBzdHJpbmcsIHA6IHN0cmluZywgbzogc3RyaW5nKTogYW55IHtcbiAgcmV0dXJuIHtcbiAgICBnZXRTdWJqZWN0OiAoKSA9PiAoeyB0b1N0cmluZzogKCkgPT4gcyB9KSxcbiAgICBnZXRQcmVkaWNhdGU6ICgpID0+ICh7IHRvU3RyaW5nOiAoKSA9PiBwIH0pLFxuICAgIGdldE9iamVjdDogKCkgPT4gKHsgdG9TdHJpbmc6ICgpID0+IG8gfSlcbiAgfTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTW9ja0NvbnRleHQoc291cmNlUGF0aDogc3RyaW5nID0gJ3Rlc3QubWQnKTogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCB7XG4gIHJldHVybiB7XG4gICAgc291cmNlUGF0aCxcbiAgICBmcm9udG1hdHRlcjoge30sXG4gICAgYWRkQ2hpbGQ6IGplc3QuZm4oKSxcbiAgICBnZXRTZWN0aW9uSW5mbzogamVzdC5mbigpXG4gIH07XG59Il0sInZlcnNpb24iOjN9