908382659fa6a9d29a55dd3ddd057fe8
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.TaskStatus = exports.TaskStatusType = void 0;
const Result_1 = require("../core/Result");
var TaskStatusType;
(function (TaskStatusType) {
    TaskStatusType["TODO"] = "todo";
    TaskStatusType["IN_PROGRESS"] = "in-progress";
    TaskStatusType["WAITING"] = "waiting";
    TaskStatusType["DONE"] = "done";
    TaskStatusType["CANCELLED"] = "cancelled";
})(TaskStatusType = exports.TaskStatusType || (exports.TaskStatusType = {}));
/**
 * Value object representing task status
 * Immutable and self-validating with state transition rules
 */
class TaskStatus {
    constructor(status) {
        this.status = status;
    }
    static create(value) {
        if (!value) {
            return Result_1.Result.fail("TaskStatus cannot be empty");
        }
        const normalizedValue = typeof value === "string" ? value.toLowerCase().replace("_", "-") : value;
        if (!Object.values(TaskStatusType).includes(normalizedValue)) {
            return Result_1.Result.fail("TaskStatus must be one of: todo, in-progress, waiting, done, cancelled");
        }
        return Result_1.Result.ok(new TaskStatus(normalizedValue));
    }
    static todo() {
        return new TaskStatus(TaskStatusType.TODO);
    }
    static inProgress() {
        return new TaskStatus(TaskStatusType.IN_PROGRESS);
    }
    static waiting() {
        return new TaskStatus(TaskStatusType.WAITING);
    }
    static done() {
        return new TaskStatus(TaskStatusType.DONE);
    }
    static cancelled() {
        return new TaskStatus(TaskStatusType.CANCELLED);
    }
    getStatus() {
        return this.status;
    }
    toString() {
        return this.status;
    }
    equals(other) {
        return this.status === other.status;
    }
    /**
     * Checks if transition to another status is valid
     */
    canTransitionTo(newStatus) {
        const validTransitions = {
            [TaskStatusType.TODO]: [
                TaskStatusType.IN_PROGRESS,
                TaskStatusType.WAITING,
                TaskStatusType.DONE,
                TaskStatusType.CANCELLED,
            ],
            [TaskStatusType.IN_PROGRESS]: [
                TaskStatusType.TODO,
                TaskStatusType.WAITING,
                TaskStatusType.DONE,
                TaskStatusType.CANCELLED,
            ],
            [TaskStatusType.WAITING]: [
                TaskStatusType.TODO,
                TaskStatusType.IN_PROGRESS,
                TaskStatusType.DONE,
                TaskStatusType.CANCELLED,
            ],
            [TaskStatusType.DONE]: [TaskStatusType.TODO],
            [TaskStatusType.CANCELLED]: [TaskStatusType.TODO], // Can reactivate cancelled tasks
        };
        return validTransitions[this.status].includes(newStatus.status);
    }
    /**
     * Returns if the task is in an active state (not done or cancelled)
     */
    isActive() {
        return (this.status === TaskStatusType.TODO ||
            this.status === TaskStatusType.IN_PROGRESS ||
            this.status === TaskStatusType.WAITING);
    }
    /**
     * Returns if the task is completed
     */
    isCompleted() {
        return this.status === TaskStatusType.DONE;
    }
    /**
     * Returns if the task is cancelled
     */
    isCancelled() {
        return this.status === TaskStatusType.CANCELLED;
    }
    /**
     * Returns if the task is in progress
     */
    isInProgress() {
        return this.status === TaskStatusType.IN_PROGRESS;
    }
    /**
     * Returns markdown checkbox representation
     */
    toMarkdownCheckbox() {
        switch (this.status) {
            case TaskStatusType.TODO:
                return "- [ ]";
            case TaskStatusType.IN_PROGRESS:
                return "- [/]";
            case TaskStatusType.WAITING:
                return "- [-]";
            case TaskStatusType.DONE:
                return "- [x]";
            case TaskStatusType.CANCELLED:
                return "- [~]";
        }
    }
    /**
     * Creates TaskStatus from markdown checkbox
     */
    static fromMarkdownCheckbox(checkbox) {
        const trimmed = checkbox.trim();
        if (trimmed === "- [ ]")
            return Result_1.Result.ok(TaskStatus.todo());
        if (trimmed === "- [/]")
            return Result_1.Result.ok(TaskStatus.inProgress());
        if (trimmed === "- [-]")
            return Result_1.Result.ok(TaskStatus.waiting());
        if (trimmed === "- [x]" || trimmed === "- [X]")
            return Result_1.Result.ok(TaskStatus.done());
        if (trimmed === "- [~]")
            return Result_1.Result.ok(TaskStatus.cancelled());
        return Result_1.Result.fail("Invalid markdown checkbox format");
    }
}
exports.TaskStatus = TaskStatus;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vc3JjL2RvbWFpbi92YWx1ZS1vYmplY3RzL1Rhc2tTdGF0dXMudHMiLCJtYXBwaW5ncyI6Ijs7O0FBQUEsMkNBQXdDO0FBRXhDLElBQVksY0FNWDtBQU5ELFdBQVksY0FBYztJQUN4QiwrQkFBYSxDQUFBO0lBQ2IsNkNBQTJCLENBQUE7SUFDM0IscUNBQW1CLENBQUE7SUFDbkIsK0JBQWEsQ0FBQTtJQUNiLHlDQUF1QixDQUFBO0FBQ3pCLENBQUMsRUFOVyxjQUFjLEdBQWQsc0JBQWMsS0FBZCxzQkFBYyxRQU16QjtBQUVEOzs7R0FHRztBQUNILE1BQWEsVUFBVTtJQUdyQixZQUFvQixNQUFzQjtRQUN4QyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQztJQUN2QixDQUFDO0lBRUQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUE4QjtRQUMxQyxJQUFJLENBQUMsS0FBSyxFQUFFO1lBQ1YsT0FBTyxlQUFNLENBQUMsSUFBSSxDQUFhLDRCQUE0QixDQUFDLENBQUM7U0FDOUQ7UUFFRCxNQUFNLGVBQWUsR0FDbkIsT0FBTyxLQUFLLEtBQUssUUFBUSxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsV0FBVyxFQUFFLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO1FBRTVFLElBQ0UsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxlQUFpQyxDQUFDLEVBQzFFO1lBQ0EsT0FBTyxlQUFNLENBQUMsSUFBSSxDQUNoQix3RUFBd0UsQ0FDekUsQ0FBQztTQUNIO1FBRUQsT0FBTyxlQUFNLENBQUMsRUFBRSxDQUNkLElBQUksVUFBVSxDQUFDLGVBQWlDLENBQUMsQ0FDbEQsQ0FBQztJQUNKLENBQUM7SUFFRCxNQUFNLENBQUMsSUFBSTtRQUNULE9BQU8sSUFBSSxVQUFVLENBQUMsY0FBYyxDQUFDLElBQUks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QyxPQUFPO2dCQUN6QixPQUFPLE9BQU8sQ0FBQztZQUNqQixLQUFLLGNBQWMsQ0FBQyxJQUFJO2dCQUN0QixPQUFPLE9BQU8sQ0FBQztZQUNqQixLQUFLLGNBQWMsQ0FBQyxTQUFTO2dCQUMzQixPQUFPLE9BQU8sQ0FBQztTQUNsQjtJQUNILENBQUM7SUFFRDs7T0FFRztJQUNILE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxRQUFnQjtRQUMxQyxNQUFNLE9BQU8sR0FBRyxRQUFRLENBQUMsSUFBSSxFQUFFLENBQUM7UUFFaEMsSUFBSSxPQUFPLEtBQUssT0FBTztZQUFFLE9BQU8sZUFBTSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUM3RCxJQUFJLE9BQU8sS0FBSyxPQUFPO1lBQUUsT0FBTyxlQUFNLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDO1FBQ25FLElBQUksT0FBTyxLQUFLLE9BQU87WUFBRSxPQUFPLGVBQU0sQ0FBQyxFQUFFLENBQUMsVUFBVSxDQUFDLE9BQU8sRUFBRSxDQUFDLENBQUM7UUFDaEUsSUFBSSxPQUFPLEtBQUssT0FBTyxJQUFJLE9BQU8sS0FBSyxPQUFPO1lBQzVDLE9BQU8sZUFBTSxDQUFDLEVBQUUsQ0FBQyxVQUFVLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUN0QyxJQUFJLE9BQU8sS0FBSyxPQUFPO1lBQUUsT0FBTyxlQUFNLENBQUMsRUFBRSxDQUFDLFVBQVUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDO1FBRWxFLE9BQU8sZUFBTSxDQUFDLElBQUksQ0FBYSxrQ0FBa0MsQ0FBQyxDQUFDO0lBQ3JFLENBQUM7Q0FDRjtBQTNKRCxnQ0EySkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vc3JjL2RvbWFpbi92YWx1ZS1vYmplY3RzL1Rhc2tTdGF0dXMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUmVzdWx0IH0gZnJvbSBcIi4uL2NvcmUvUmVzdWx0XCI7XG5cbmV4cG9ydCBlbnVtIFRhc2tTdGF0dXNUeXBlIHtcbiAgVE9ETyA9IFwidG9kb1wiLFxuICBJTl9QUk9HUkVTUyA9IFwiaW4tcHJvZ3Jlc3NcIixcbiAgV0FJVElORyA9IFwid2FpdGluZ1wiLFxuICBET05FID0gXCJkb25lXCIsXG4gIENBTkNFTExFRCA9IFwiY2FuY2VsbGVkXCIsXG59XG5cbi8qKlxuICogVmFsdWUgb2JqZWN0IHJlcHJlc2VudGluZyB0YXNrIHN0YXR1c1xuICogSW1tdXRhYmxlIGFuZCBzZWxmLXZhbGlkYXRpbmcgd2l0aCBzdGF0ZSB0cmFuc2l0aW9uIHJ1bGVzXG4gKi9cbmV4cG9ydCBjbGFzcyBUYXNrU3RhdHVzIHtcbiAgcHJpdmF0ZSByZWFkb25seSBzdGF0dXM6IFRhc2tTdGF0dXNUeXBlO1xuXG4gIHByaXZhdGUgY29uc3RydWN0b3Ioc3RhdHVzOiBUYXNrU3RhdHVzVHlwZSkge1xuICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZSh2YWx1ZTogc3RyaW5nIHwgVGFza1N0YXR1c1R5cGUpOiBSZXN1bHQ8VGFza1N0YXR1cz4ge1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZmFpbDxUYXNrU3RhdHVzPihcIlRhc2tTdGF0dXMgY2Fubm90IGJlIGVtcHR5XCIpO1xuICAgIH1cblxuICAgIGNvbnN0IG5vcm1hbGl6ZWRWYWx1ZSA9XG4gICAgICB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgPyB2YWx1ZS50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoXCJfXCIsIFwiLVwiKSA6IHZhbHVlO1xuXG4gICAgaWYgKFxuICAgICAgIU9iamVjdC52YWx1ZXMoVGFza1N0YXR1c1R5cGUpLmluY2x1ZGVzKG5vcm1hbGl6ZWRWYWx1ZSBhcyBUYXNrU3RhdHVzVHlwZSlcbiAgICApIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZmFpbDxUYXNrU3RhdHVzPihcbiAgICAgICAgXCJUYXNrU3RhdHVzIG11c3QgYmUgb25lIG9mOiB0b2RvLCBpbi1wcm9ncmVzcywgd2FpdGluZywgZG9uZSwgY2FuY2VsbGVkXCIsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiBSZXN1bHQub2s8VGFza1N0YXR1cz4oXG4gICAgICBuZXcgVGFza1N0YXR1cyhub3JtYWxpemVkVmFsdWUgYXMgVGFza1N0YXR1c1R5cGUpLFxuICAgICk7XG4gIH1cblxuICBzdGF0aWMgdG9kbygpOiBUYXNrU3RhdHVzIHtcbiAgICByZXR1cm4gbmV3IFRhc2tTdGF0dXMoVGFza1N0YXR1c1R5cGUuVE9ETyk7XG4gIH1cblxuICBzdGF0aWMgaW5Qcm9ncmVzcygpOiBUYXNrU3RhdHVzIHtcbiAgICByZXR1cm4gbmV3IFRhc2tTdGF0dXMoVGFza1N0YXR1c1R5cGUuSU5fUFJPR1JFU1MpO1xuICB9XG5cbiAgc3RhdGljIHdhaXRpbmcoKTogVGFza1N0YXR1cyB7XG4gICAgcmV0dXJuIG5ldyBUYXNrU3RhdHVzKFRhc2tTdGF0dXNUeXBlLldBSVRJTkcpO1xuICB9XG5cbiAgc3RhdGljIGRvbmUoKTogVGFza1N0YXR1cyB7XG4gICAgcmV0dXJuIG5ldyBUYXNrU3RhdHVzKFRhc2tTdGF0dXNUeXBlLkRPTkUpO1xuICB9XG5cbiAgc3RhdGljIGNhbmNlbGxlZCgpOiBUYXNrU3RhdHVzIHtcbiAgICByZXR1cm4gbmV3IFRhc2tTdGF0dXMoVGFza1N0YXR1c1R5cGUuQ0FOQ0VMTEVEKTtcbiAgfVxuXG4gIGdldFN0YXR1cygpOiBUYXNrU3RhdHVzVHlwZSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdHVzO1xuICB9XG5cbiAgdG9TdHJpbmcoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0dXM7XG4gIH1cblxuICBlcXVhbHMob3RoZXI6IFRhc2tTdGF0dXMpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5zdGF0dXMgPT09IG90aGVyLnN0YXR1cztcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVja3MgaWYgdHJhbnNpdGlvbiB0byBhbm90aGVyIHN0YXR1cyBpcyB2YWxpZFxuICAgKi9cbiAgY2FuVHJhbnNpdGlvblRvKG5ld1N0YXR1czogVGFza1N0YXR1cyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHZhbGlkVHJhbnNpdGlvbnM6IFJlY29yZDxUYXNrU3RhdHVzVHlwZSwgVGFza1N0YXR1c1R5cGVbXT4gPSB7XG4gICAgICBbVGFza1N0YXR1c1R5cGUuVE9ET106IFtcbiAgICAgICAgVGFza1N0YXR1c1R5cGUuSU5fUFJPR1JFU1MsXG4gICAgICAgIFRhc2tTdGF0dXNUeXBlLldBSVRJTkcsXG4gICAgICAgIFRhc2tTdGF0dXNUeXBlLkRPTkUsXG4gICAgICAgIFRhc2tTdGF0dXNUeXBlLkNBTkNFTExFRCxcbiAgICAgIF0sXG4gICAgICBbVGFza1N0YXR1c1R5cGUuSU5fUFJPR1JFU1NdOiBbXG4gICAgICAgIFRhc2tTdGF0dXNUeXBlLlRPRE8sXG4gICAgICAgIFRhc2tTdGF0dXNUeXBlLldBSVRJTkcsXG4gICAgICAgIFRhc2tTdGF0dXNUeXBlLkRPTkUsXG4gICAgICAgIFRhc2tTdGF0dXNUeXBlLkNBTkNFTExFRCxcbiAgICAgIF0sXG4gICAgICBbVGFza1N0YXR1c1R5cGUuV0FJVElOR106IFtcbiAgICAgICAgVGFza1N0YXR1c1R5cGUuVE9ETyxcbiAgICAgICAgVGFza1N0YXR1c1R5cGUuSU5fUFJPR1JFU1MsXG4gICAgICAgIFRhc2tTdGF0dXNUeXBlLkRPTkUsXG4gICAgICAgIFRhc2tTdGF0dXNUeXBlLkNBTkNFTExFRCxcbiAgICAgIF0sXG4gICAgICBbVGFza1N0YXR1c1R5cGUuRE9ORV06IFtUYXNrU3RhdHVzVHlwZS5UT0RPXSwgLy8gQ2FuIHJlb3BlbiBjb21wbGV0ZWQgdGFza3NcbiAgICAgIFtUYXNrU3RhdHVzVHlwZS5DQU5DRUxMRURdOiBbVGFza1N0YXR1c1R5cGUuVE9ET10sIC8vIENhbiByZWFjdGl2YXRlIGNhbmNlbGxlZCB0YXNrc1xuICAgIH07XG5cbiAgICByZXR1cm4gdmFsaWRUcmFuc2l0aW9uc1t0aGlzLnN0YXR1c10uaW5jbHVkZXMobmV3U3RhdHVzLnN0YXR1cyk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBpZiB0aGUgdGFzayBpcyBpbiBhbiBhY3RpdmUgc3RhdGUgKG5vdCBkb25lIG9yIGNhbmNlbGxlZClcbiAgICovXG4gIGlzQWN0aXZlKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICB0aGlzLnN0YXR1cyA9PT0gVGFza1N0YXR1c1R5cGUuVE9ETyB8fFxuICAgICAgdGhpcy5zdGF0dXMgPT09IFRhc2tTdGF0dXNUeXBlLklOX1BST0dSRVNTIHx8XG4gICAgICB0aGlzLnN0YXR1cyA9PT0gVGFza1N0YXR1c1R5cGUuV0FJVElOR1xuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBpZiB0aGUgdGFzayBpcyBjb21wbGV0ZWRcbiAgICovXG4gIGlzQ29tcGxldGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gVGFza1N0YXR1c1R5cGUuRE9ORTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGlmIHRoZSB0YXNrIGlzIGNhbmNlbGxlZFxuICAgKi9cbiAgaXNDYW5jZWxsZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuc3RhdHVzID09PSBUYXNrU3RhdHVzVHlwZS5DQU5DRUxMRUQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBpZiB0aGUgdGFzayBpcyBpbiBwcm9ncmVzc1xuICAgKi9cbiAgaXNJblByb2dyZXNzKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnN0YXR1cyA9PT0gVGFza1N0YXR1c1R5cGUuSU5fUFJPR1JFU1M7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyBtYXJrZG93biBjaGVja2JveCByZXByZXNlbnRhdGlvblxuICAgKi9cbiAgdG9NYXJrZG93bkNoZWNrYm94KCk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0aGlzLnN0YXR1cykge1xuICAgICAgY2FzZSBUYXNrU3RhdHVzVHlwZS5UT0RPOlxuICAgICAgICByZXR1cm4gXCItIFsgXVwiO1xuICAgICAgY2FzZSBUYXNrU3RhdHVzVHlwZS5JTl9QUk9HUkVTUzpcbiAgICAgICAgcmV0dXJuIFwiLSBbL11cIjtcbiAgICAgIGNhc2UgVGFza1N0YXR1c1R5cGUuV0FJVElORzpcbiAgICAgICAgcmV0dXJuIFwiLSBbLV1cIjtcbiAgICAgIGNhc2UgVGFza1N0YXR1c1R5cGUuRE9ORTpcbiAgICAgICAgcmV0dXJuIFwiLSBbeF1cIjtcbiAgICAgIGNhc2UgVGFza1N0YXR1c1R5cGUuQ0FOQ0VMTEVEOlxuICAgICAgICByZXR1cm4gXCItIFt+XVwiO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGVzIFRhc2tTdGF0dXMgZnJvbSBtYXJrZG93biBjaGVja2JveFxuICAgKi9cbiAgc3RhdGljIGZyb21NYXJrZG93bkNoZWNrYm94KGNoZWNrYm94OiBzdHJpbmcpOiBSZXN1bHQ8VGFza1N0YXR1cz4ge1xuICAgIGNvbnN0IHRyaW1tZWQgPSBjaGVja2JveC50cmltKCk7XG5cbiAgICBpZiAodHJpbW1lZCA9PT0gXCItIFsgXVwiKSByZXR1cm4gUmVzdWx0Lm9rKFRhc2tTdGF0dXMudG9kbygpKTtcbiAgICBpZiAodHJpbW1lZCA9PT0gXCItIFsvXVwiKSByZXR1cm4gUmVzdWx0Lm9rKFRhc2tTdGF0dXMuaW5Qcm9ncmVzcygpKTtcbiAgICBpZiAodHJpbW1lZCA9PT0gXCItIFstXVwiKSByZXR1cm4gUmVzdWx0Lm9rKFRhc2tTdGF0dXMud2FpdGluZygpKTtcbiAgICBpZiAodHJpbW1lZCA9PT0gXCItIFt4XVwiIHx8IHRyaW1tZWQgPT09IFwiLSBbWF1cIilcbiAgICAgIHJldHVybiBSZXN1bHQub2soVGFza1N0YXR1cy5kb25lKCkpO1xuICAgIGlmICh0cmltbWVkID09PSBcIi0gW35dXCIpIHJldHVybiBSZXN1bHQub2soVGFza1N0YXR1cy5jYW5jZWxsZWQoKSk7XG5cbiAgICByZXR1cm4gUmVzdWx0LmZhaWw8VGFza1N0YXR1cz4oXCJJbnZhbGlkIG1hcmtkb3duIGNoZWNrYm94IGZvcm1hdFwiKTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9