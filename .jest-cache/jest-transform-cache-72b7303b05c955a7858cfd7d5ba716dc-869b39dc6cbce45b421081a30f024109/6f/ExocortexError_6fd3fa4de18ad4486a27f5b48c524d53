11e86a32275ac316c5faaaec86224ebb
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.ErrorBuilder = exports.ErrorCategory = exports.ErrorSeverity = void 0;
var ErrorSeverity;
(function (ErrorSeverity) {
    ErrorSeverity["CRITICAL"] = "critical";
    ErrorSeverity["ERROR"] = "error";
    ErrorSeverity["WARNING"] = "warning";
    ErrorSeverity["INFO"] = "info";
})(ErrorSeverity = exports.ErrorSeverity || (exports.ErrorSeverity = {}));
var ErrorCategory;
(function (ErrorCategory) {
    ErrorCategory["SYNTAX"] = "syntax";
    ErrorCategory["SEMANTIC"] = "semantic";
    ErrorCategory["VALIDATION"] = "validation";
    ErrorCategory["SYSTEM"] = "system";
    ErrorCategory["NETWORK"] = "network";
    ErrorCategory["PERMISSION"] = "permission";
})(ErrorCategory = exports.ErrorCategory || (exports.ErrorCategory = {}));
class ErrorBuilder {
    constructor() {
        this.error = {};
    }
    static create() {
        return new ErrorBuilder();
    }
    withId(id) {
        this.error.id = id;
        return this;
    }
    withSeverity(severity) {
        this.error.severity = severity;
        return this;
    }
    withCategory(category) {
        this.error.category = category;
        return this;
    }
    withTitle(title) {
        this.error.title = title;
        return this;
    }
    withMessage(message) {
        this.error.message = message;
        return this;
    }
    withContext(context) {
        this.error.context = context;
        return this;
    }
    withLocation(location) {
        if (!this.error.context) {
            this.error.context = {
                operation: "Unknown",
                timestamp: new Date(),
            };
        }
        this.error.context.location = location;
        return this;
    }
    withTechnicalDetails(details) {
        this.error.technicalDetails = details;
        return this;
    }
    withSuggestions(suggestions) {
        this.error.suggestions = suggestions;
        return this;
    }
    withRecoverable(recoverable) {
        this.error.recoverable = recoverable;
        return this;
    }
    withStackTrace(stackTrace) {
        this.error.stackTrace = stackTrace;
        return this;
    }
    withInnerError(innerError) {
        this.error.innerError = innerError;
        return this;
    }
    build() {
        if (!this.error.id) {
            this.error.id = `error-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`;
        }
        if (!this.error.severity) {
            this.error.severity = ErrorSeverity.ERROR;
        }
        if (!this.error.category) {
            this.error.category = ErrorCategory.SYSTEM;
        }
        if (!this.error.title) {
            this.error.title = "Error";
        }
        if (!this.error.message) {
            this.error.message = "An error occurred";
        }
        if (!this.error.context) {
            this.error.context = {
                operation: "Unknown",
                timestamp: new Date(),
            };
        }
        return this.error;
    }
}
exports.ErrorBuilder = ErrorBuilder;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vc3JjL2RvbWFpbi9lcnJvcnMvRXhvY29ydGV4RXJyb3IudHMiLCJtYXBwaW5ncyI6Ijs7O0FBQUEsSUFBWSxhQUtYO0FBTEQsV0FBWSxhQUFhO0lBQ3ZCLHNDQUFxQixDQUFBO0lBQ3JCLGdDQUFlLENBQUE7SUFDZixvQ0FBbUIsQ0FBQTtJQUNuQiw4QkFBYSxDQUFBO0FBQ2YsQ0FBQyxFQUxXLGFBQWEsR0FBYixxQkFBYSxLQUFiLHFCQUFhLFFBS3hCO0FBRUQsSUFBWSxhQU9YO0FBUEQsV0FBWSxhQUFhO0lBQ3ZCLGtDQUFpQixDQUFBO0lBQ2pCLHNDQUFxQixDQUFBO0lBQ3JCLDBDQUF5QixDQUFBO0lBQ3pCLGtDQUFpQixDQUFBO0lBQ2pCLG9DQUFtQixDQUFBO0lBQ25CLDBDQUF5QixDQUFBO0FBQzNCLENBQUMsRUFQVyxhQUFhLEdBQWIscUJBQWEsS0FBYixxQkFBYSxRQU94QjtBQThDRCxNQUFhLFlBQVk7SUFBekI7UUFDVSxVQUFLLEdBQTRCLEVBQUUsQ0FBQztJQWlHOUMsQ0FBQztJQS9GQyxNQUFNLENBQUMsTUFBTTtRQUNYLE9BQU8sSUFBSSxZQUFZLEVBQUUsQ0FBQztJQUM1QixDQUFDO0lBRUQsTUFBTSxDQUFDLEVBQVU7UUFDZixJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUM7UUFDbkIsT0FBTyxJQUFJLENBQUM7SUFDZCxDQUFDO0lBRUQsWUFBWSxDQUFDLFFBQXVCO1FBQ2xDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztRQUMvQixPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFRCxZQUFZLENBQUMsUUFBdUI7UUFDbEMsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQy9CLE9BQU8sSUFBSSxDQUFDO0lBQ2QsQ0FBQztJQUVELFNBQVMsQ0FBQyxLQUFhO1FBQ3JCLElBQUksQ0FBQyxLQUFL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QyxLQUF1QixDQUFDO0lBQ3RDLENBQUM7Q0FDRjtBQWxHRCxvQ0FrR0MiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vc3JjL2RvbWFpbi9lcnJvcnMvRXhvY29ydGV4RXJyb3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGVudW0gRXJyb3JTZXZlcml0eSB7XG4gIENSSVRJQ0FMID0gXCJjcml0aWNhbFwiLFxuICBFUlJPUiA9IFwiZXJyb3JcIixcbiAgV0FSTklORyA9IFwid2FybmluZ1wiLFxuICBJTkZPID0gXCJpbmZvXCIsXG59XG5cbmV4cG9ydCBlbnVtIEVycm9yQ2F0ZWdvcnkge1xuICBTWU5UQVggPSBcInN5bnRheFwiLFxuICBTRU1BTlRJQyA9IFwic2VtYW50aWNcIixcbiAgVkFMSURBVElPTiA9IFwidmFsaWRhdGlvblwiLFxuICBTWVNURU0gPSBcInN5c3RlbVwiLFxuICBORVRXT1JLID0gXCJuZXR3b3JrXCIsXG4gIFBFUk1JU1NJT04gPSBcInBlcm1pc3Npb25cIixcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFcnJvckxvY2F0aW9uIHtcbiAgbGluZT86IG51bWJlcjtcbiAgY29sdW1uPzogbnVtYmVyO1xuICBmaWxlPzogc3RyaW5nO1xuICBjb250ZXh0Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yQ29udGV4dCB7XG4gIG9wZXJhdGlvbjogc3RyaW5nO1xuICB0aW1lc3RhbXA6IERhdGU7XG4gIGxvY2F0aW9uPzogRXJyb3JMb2NhdGlvbiB8IHN0cmluZztcbiAgdXNlcklkPzogc3RyaW5nO1xuICBzZXNzaW9uSWQ/OiBzdHJpbmc7XG4gIG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRml4U3VnZ2VzdGlvbiB7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGNvbmZpZGVuY2U/OiBudW1iZXI7XG4gIGFjdGlvbj86IHtcbiAgICBsYWJlbDogc3RyaW5nO1xuICAgIGhhbmRsZXI6ICgpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+O1xuICB9O1xuICBsZWFybk1vcmU/OiB7XG4gICAgdXJsOiBzdHJpbmc7XG4gICAgdGl0bGU6IHN0cmluZztcbiAgfTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBFeG9jb3J0ZXhFcnJvciB7XG4gIGlkOiBzdHJpbmc7XG4gIHNldmVyaXR5OiBFcnJvclNldmVyaXR5O1xuICBjYXRlZ29yeTogRXJyb3JDYXRlZ29yeTtcbiAgdGl0bGU6IHN0cmluZztcbiAgbWVzc2FnZTogc3RyaW5nO1xuICBjb250ZXh0OiBFcnJvckNvbnRleHQ7XG4gIHRlY2huaWNhbERldGFpbHM/OiBzdHJpbmc7XG4gIHN1Z2dlc3Rpb25zPzogRml4U3VnZ2VzdGlvbltdO1xuICByZWNvdmVyYWJsZT86IGJvb2xlYW47XG4gIHN0YWNrVHJhY2U/OiBzdHJpbmc7XG4gIGlubmVyRXJyb3I/OiBFeG9jb3J0ZXhFcnJvcjtcbn1cblxuZXhwb3J0IGNsYXNzIEVycm9yQnVpbGRlciB7XG4gIHByaXZhdGUgZXJyb3I6IFBhcnRpYWw8RXhvY29ydGV4RXJyb3I+ID0ge307XG5cbiAgc3RhdGljIGNyZWF0ZSgpOiBFcnJvckJ1aWxkZXIge1xuICAgIHJldHVybiBuZXcgRXJyb3JCdWlsZGVyKCk7XG4gIH1cblxuICB3aXRoSWQoaWQ6IHN0cmluZyk6IEVycm9yQnVpbGRlciB7XG4gICAgdGhpcy5lcnJvci5pZCA9IGlkO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgd2l0aFNldmVyaXR5KHNldmVyaXR5OiBFcnJvclNldmVyaXR5KTogRXJyb3JCdWlsZGVyIHtcbiAgICB0aGlzLmVycm9yLnNldmVyaXR5ID0gc2V2ZXJpdHk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB3aXRoQ2F0ZWdvcnkoY2F0ZWdvcnk6IEVycm9yQ2F0ZWdvcnkpOiBFcnJvckJ1aWxkZXIge1xuICAgIHRoaXMuZXJyb3IuY2F0ZWdvcnkgPSBjYXRlZ29yeTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHdpdGhUaXRsZSh0aXRsZTogc3RyaW5nKTogRXJyb3JCdWlsZGVyIHtcbiAgICB0aGlzLmVycm9yLnRpdGxlID0gdGl0bGU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB3aXRoTWVzc2FnZShtZXNzYWdlOiBzdHJpbmcpOiBFcnJvckJ1aWxkZXIge1xuICAgIHRoaXMuZXJyb3IubWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB3aXRoQ29udGV4dChjb250ZXh0OiBFcnJvckNvbnRleHQpOiBFcnJvckJ1aWxkZXIge1xuICAgIHRoaXMuZXJyb3IuY29udGV4dCA9IGNvbnRleHQ7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB3aXRoTG9jYXRpb24obG9jYXRpb246IEVycm9yTG9jYXRpb24pOiBFcnJvckJ1aWxkZXIge1xuICAgIGlmICghdGhpcy5lcnJvci5jb250ZXh0KSB7XG4gICAgICB0aGlzLmVycm9yLmNvbnRleHQgPSB7XG4gICAgICAgIG9wZXJhdGlvbjogXCJVbmtub3duXCIsXG4gICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKSxcbiAgICAgIH07XG4gICAgfVxuICAgIHRoaXMuZXJyb3IuY29udGV4dC5sb2NhdGlvbiA9IGxvY2F0aW9uO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgd2l0aFRlY2huaWNhbERldGFpbHMoZGV0YWlsczogc3RyaW5nKTogRXJyb3JCdWlsZGVyIHtcbiAgICB0aGlzLmVycm9yLnRlY2huaWNhbERldGFpbHMgPSBkZXRhaWxzO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgd2l0aFN1Z2dlc3Rpb25zKHN1Z2dlc3Rpb25zOiBGaXhTdWdnZXN0aW9uW10pOiBFcnJvckJ1aWxkZXIge1xuICAgIHRoaXMuZXJyb3Iuc3VnZ2VzdGlvbnMgPSBzdWdnZXN0aW9ucztcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHdpdGhSZWNvdmVyYWJsZShyZWNvdmVyYWJsZTogYm9vbGVhbik6IEVycm9yQnVpbGRlciB7XG4gICAgdGhpcy5lcnJvci5yZWNvdmVyYWJsZSA9IHJlY292ZXJhYmxlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgd2l0aFN0YWNrVHJhY2Uoc3RhY2tUcmFjZTogc3RyaW5nKTogRXJyb3JCdWlsZGVyIHtcbiAgICB0aGlzLmVycm9yLnN0YWNrVHJhY2UgPSBzdGFja1RyYWNlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgd2l0aElubmVyRXJyb3IoaW5uZXJFcnJvcjogRXhvY29ydGV4RXJyb3IpOiBFcnJvckJ1aWxkZXIge1xuICAgIHRoaXMuZXJyb3IuaW5uZXJFcnJvciA9IGlubmVyRXJyb3I7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBidWlsZCgpOiBFeG9jb3J0ZXhFcnJvciB7XG4gICAgaWYgKCF0aGlzLmVycm9yLmlkKSB7XG4gICAgICB0aGlzLmVycm9yLmlkID0gYGVycm9yLSR7RGF0ZS5ub3coKX0tJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmVycm9yLnNldmVyaXR5KSB7XG4gICAgICB0aGlzLmVycm9yLnNldmVyaXR5ID0gRXJyb3JTZXZlcml0eS5FUlJPUjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmVycm9yLmNhdGVnb3J5KSB7XG4gICAgICB0aGlzLmVycm9yLmNhdGVnb3J5ID0gRXJyb3JDYXRlZ29yeS5TWVNURU07XG4gICAgfVxuICAgIGlmICghdGhpcy5lcnJvci50aXRsZSkge1xuICAgICAgdGhpcy5lcnJvci50aXRsZSA9IFwiRXJyb3JcIjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmVycm9yLm1lc3NhZ2UpIHtcbiAgICAgIHRoaXMuZXJyb3IubWVzc2FnZSA9IFwiQW4gZXJyb3Igb2NjdXJyZWRcIjtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmVycm9yLmNvbnRleHQpIHtcbiAgICAgIHRoaXMuZXJyb3IuY29udGV4dCA9IHtcbiAgICAgICAgb3BlcmF0aW9uOiBcIlVua25vd25cIixcbiAgICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5lcnJvciBhcyBFeG9jb3J0ZXhFcnJvcjtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9