c4c301eb7804b2e1599e35772492e63e
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const TaskStatus_1 = require("../../../../src/domain/value-objects/TaskStatus");
describe('TaskStatus', () => {
    describe('create', () => {
        it('should create status with valid string', () => {
            const result = TaskStatus_1.TaskStatus.create('done');
            expect(result.isSuccess).toBe(true);
            expect(result.getValue().toString()).toBe('done');
        });
        it('should create status with enum value', () => {
            const result = TaskStatus_1.TaskStatus.create(TaskStatus_1.TaskStatusType.IN_PROGRESS);
            expect(result.isSuccess).toBe(true);
            expect(result.getValue().getStatus()).toBe(TaskStatus_1.TaskStatusType.IN_PROGRESS);
        });
        it('should handle underscore to dash conversion', () => {
            const result = TaskStatus_1.TaskStatus.create('in_progress');
            expect(result.isSuccess).toBe(true);
            expect(result.getValue().toString()).toBe('in-progress');
        });
        it('should reject invalid status', () => {
            const result = TaskStatus_1.TaskStatus.create('invalid');
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe('TaskStatus must be one of: todo, in-progress, waiting, done, cancelled');
        });
    });
    describe('static factory methods', () => {
        it('should create all status types', () => {
            expect(TaskStatus_1.TaskStatus.todo().getStatus()).toBe(TaskStatus_1.TaskStatusType.TODO);
            expect(TaskStatus_1.TaskStatus.inProgress().getStatus()).toBe(TaskStatus_1.TaskStatusType.IN_PROGRESS);
            expect(TaskStatus_1.TaskStatus.waiting().getStatus()).toBe(TaskStatus_1.TaskStatusType.WAITING);
            expect(TaskStatus_1.TaskStatus.done().getStatus()).toBe(TaskStatus_1.TaskStatusType.DONE);
            expect(TaskStatus_1.TaskStatus.cancelled().getStatus()).toBe(TaskStatus_1.TaskStatusType.CANCELLED);
        });
    });
    describe('state queries', () => {
        it('should identify active statuses', () => {
            expect(TaskStatus_1.TaskStatus.todo().isActive()).toBe(true);
            expect(TaskStatus_1.TaskStatus.inProgress().isActive()).toBe(true);
            expect(TaskStatus_1.TaskStatus.waiting().isActive()).toBe(true);
            expect(TaskStatus_1.TaskStatus.done().isActive()).toBe(false);
            expect(TaskStatus_1.TaskStatus.cancelled().isActive()).toBe(false);
        });
        it('should identify completed status', () => {
            expect(TaskStatus_1.TaskStatus.done().isCompleted()).toBe(true);
            expect(TaskStatus_1.TaskStatus.todo().isCompleted()).toBe(false);
        });
        it('should identify cancelled status', () => {
            expect(TaskStatus_1.TaskStatus.cancelled().isCancelled()).toBe(true);
            expect(TaskStatus_1.TaskStatus.done().isCancelled()).toBe(false);
        });
        it('should identify in-progress status', () => {
            expect(TaskStatus_1.TaskStatus.inProgress().isInProgress()).toBe(true);
            expect(TaskStatus_1.TaskStatus.todo().isInProgress()).toBe(false);
        });
    });
    describe('state transitions', () => {
        it('should allow valid transitions from todo', () => {
            const todo = TaskStatus_1.TaskStatus.todo();
            expect(todo.canTransitionTo(TaskStatus_1.TaskStatus.inProgress())).toBe(true);
            expect(todo.canTransitionTo(TaskStatus_1.TaskStatus.waiting())).toBe(true);
            expect(todo.canTransitionTo(TaskStatus_1.TaskStatus.done())).toBe(true);
            expect(todo.canTransitionTo(TaskStatus_1.TaskStatus.cancelled())).toBe(true);
        });
        it('should allow reopening completed tasks', () => {
            const done = TaskStatus_1.TaskStatus.done();
            expect(done.canTransitionTo(TaskStatus_1.TaskStatus.todo())).toBe(true);
        });
        it('should allow reactivating cancelled tasks', () => {
            const cancelled = TaskStatus_1.TaskStatus.cancelled();
            expect(cancelled.canTransitionTo(TaskStatus_1.TaskStatus.todo())).toBe(true);
        });
    });
    describe('markdown checkbox conversion', () => {
        it('should convert to markdown checkboxes', () => {
            expect(TaskStatus_1.TaskStatus.todo().toMarkdownCheckbox()).toBe('- [ ]');
            expect(TaskStatus_1.TaskStatus.inProgress().toMarkdownCheckbox()).toBe('- [/]');
            expect(TaskStatus_1.TaskStatus.waiting().toMarkdownCheckbox()).toBe('- [-]');
            expect(TaskStatus_1.TaskStatus.done().toMarkdownCheckbox()).toBe('- [x]');
            expect(TaskStatus_1.TaskStatus.cancelled().toMarkdownCheckbox()).toBe('- [~]');
        });
        it('should parse from markdown checkboxes', () => {
            expect(TaskStatus_1.TaskStatus.fromMarkdownCheckbox('- [ ]').getValue().getStatus()).toBe(TaskStatus_1.TaskStatusType.TODO);
            expect(TaskStatus_1.TaskStatus.fromMarkdownCheckbox('- [/]').getValue().getStatus()).toBe(TaskStatus_1.TaskStatusType.IN_PROGRESS);
            expect(TaskStatus_1.TaskStatus.fromMarkdownCheckbox('- [-]').getValue().getStatus()).toBe(TaskStatus_1.TaskStatusType.WAITING);
            expect(TaskStatus_1.TaskStatus.fromMarkdownCheckbox('- [x]').getValue().getStatus()).toBe(TaskStatus_1.TaskStatusType.DONE);
            expect(TaskStatus_1.TaskStatus.fromMarkdownCheckbox('- [X]').getValue().getStatus()).toBe(TaskStatus_1.TaskStatusType.DONE);
            expect(TaskStatus_1.TaskStatus.fromMarkdownCheckbox('- [~]').getValue().getStatus()).toBe(TaskStatus_1.TaskStatusType.CANCELLED);
        });
        it('should reject invalid markdown checkbox', () => {
            const result = TaskStatus_1.TaskStatus.fromMarkdownCheckbox('- [invalid]');
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe('Invalid markdown checkbox format');
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvdW5pdC9kb21haW4vdmFsdWUtb2JqZWN0cy9UYXNrU3RhdHVzLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSxnRkFBNkY7QUFFN0YsUUFBUSxDQUFDLFlBQVksRUFBRSxHQUFHLEVBQUU7SUFDMUIsUUFBUSxDQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUU7UUFDdEIsRUFBRSxDQUFDLHdDQUF3QyxFQUFFLEdBQUcsRUFBRTtZQUNoRCxNQUFNLE1BQU0sR0FBRyx1QkFBVSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUV6QyxNQUFNLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNwQyxNQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDLFFBQVEsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3BELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRTtZQUM5QyxNQUFNLE1BQU0sR0FBRyx1QkFBVSxDQUFDLE1BQU0sQ0FBQywyQkFBYyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1lBRTdELE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3BDLE1BQU0sQ0FBQyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsMkJBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUN6RSxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyw2Q0FBNkMsRUFBRSxHQUFHLEVBQUU7WUFDckQsTUFBTSxNQUFNLEdBQUcsdUJBQVUsQ0FBQyxNQUFNLENBQUMsYUFBYSxDQUFDLENBQUM7WUFFaEQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDcEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztRQUMzRCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyw4QkFBOEIsRUFBRSxHQUFHLEVBQUU7WUFDdEMsTUFBTSxNQUFNLEdBQUcsdUJBQVUsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7WUFFNUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDcEMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsd0VBQXdFLENBQUMsQ0FBQztRQUN0RyxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLHdCQUF3QixFQUFFLEdBQUcsRUFBRTtRQUN0QyxFQUFFLENBQUMsZ0NBQWdDLEVBQUUsR0FBRyxFQUFFO1lBQ3hDLE1BQU0sQ0FBQyx1QkFBVSxDQUFDLElBQUksRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLDJCQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDaEUsTUFBTSxDQUFDLHVCQUFVLENBQUMsVUFBVSxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsMkJBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUM3RSxNQUFNLENBQUMsdUJBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQywyQkFBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3RFLE1BQU0sQ0FBQyx1QkFBVSxDQUFDLElBQUksRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLDJCQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDaEUsTUFBTSxDQUFDLHVCQUFVLENBQUMsU0FBUyxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsMkJBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUM1RSxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGVBQWUsRUFBRSxHQUFHLEVBQUU7UUFDN0IsRUFBRSxDQUFDLGlDQUFpQyxFQUFFLEdBQUcsRUFBRTtZQUN6QyxNQUFNLENBQUMsdUJBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNoRCxNQUFNLENBQUMsdUJBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUN0RCxNQUFNLENBQUMsdUJBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNuRCxNQUFNLENBQUMsdUJBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUNqRCxNQUFNLENBQUMsdUJBQVUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN4RCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQyxrQ0FBa0MsRUFBRSxHQUFHLEVBQUU7WUFDMUMsTUFBTSxDQUFDLHVCQUFVLENBQUMsSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbkQsTUFBTSxDQUFDLHVCQUFVLENBQUMsSUFBSSxFQUFFLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdEQsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsa0NBQWtDLEVBQUUsR0FBRyxFQUFFO1lBQzFDLE1BQU0sQ0FBQyx1QkFBVSxDQUFDLFNBQVMsRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3hELE1BQU0sQ0FBQyx1QkFBVSxDQUFDLElBQUksRUFBRSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3RELENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLG9DQUFvQyxFQUFFLEdBQUcsRUFBRTtZQUM1QyxNQUFNLENBQUMsdUJBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUMxRCxNQUFNLENBQUMsdUJBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUN2RCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLG1CQUFtQixFQUFFLEdBQUcsRUFBRTtRQUNqQyxFQUFFLENBQUMsMENBQTBDLEVBQUUsR0FBRyxFQUFFO1lBQ2xELE1BQU0sSUFBSSxHQUFHLHVCQUFVLENBQUMsSUFBSSxFQUFFLENBQUM7WUFFL0IsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsdUJBQVUsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ2pFLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLHVCQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUM5RCxNQUFNLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQyx1QkFBVSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDM0QsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLENBQUMsdUJBQVUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2xFLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHdDQUF3QyxFQUFFLEdBQUcsRUFBRTtZQUNoRCxNQUFNLElBQUksR0FBRyx1QkFBVSxDQUFDLElBQUksRUFBRSxDQUFDO1lBRS9CLE1BQU0sQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLHVCQUFVLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM3RCxDQUFDLENBQUMsQ0FBQztRQUVILEVBQUUsQ0FBQywyQ0FBMkMsRUFBRSxHQUFHLEVBQUU7WUFDbkQsTUFBTSxTQUFTLEdBQUcsdUJBQVUsQ0FBQyxTQUFTLEVBQUUsQ0FBQztZQUV6QyxNQUFNLENBQUMsU0FBUyxDQUFDLGVBQWUsQ0FBQyx1QkFBVSxDQUFDLElBQUksRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDbEUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztJQUVILFFBQVEsQ0FBQyw4QkFBOEIsRUFBRSxHQUFHLEVBQUU7UUFDNUMsRUFBRSxDQUFDLHVDQUF1QyxFQUFFLEdBQUcsRUFBRTtZQUMvQyxNQUFNLENBQUMsdUJBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzdELE1BQU0sQ0FBQyx1QkFBVSxDQUFDLFVBQVUsRUFBRSxDQUFDLGtCQUFrQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDbkUsTUFBTSxDQUFDLHVCQUFVLENBQUMsT0FBTyxFQUFFLENBQUMsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUNoRSxNQUFNLENBQUMsdUJBQVUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQzdELE1BQU0sQ0FBQyx1QkFBVSxDQUFDLFNBQVMsRUFBRSxDQUFDLGtCQUFrQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDcEUsQ0FBQyxDQUFDLENBQUM7UUFFSCxFQUFFLENBQUMsdUNBQXVDLEVBQUUsR0FBRyxFQUFFO1lBQy9DLE1BQU0sQ0FBQyx1QkFBVSxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLDJCQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbEcsTUFBTSxDQUFDLHVCQUFVLENBQUMsb0JBQW9CLENBQUMsT0FBTyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsMkJBQWMsQ0FBQyxXQUFXLENBQUMsQ0FBQztZQUN6RyxNQUFNLENBQUMsdUJBQVUsQ0FBQyxvQkFBb0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQywyQkFBYyxDQUFDLE9BQU8sQ0FBQyxDQUFDO1lBQ3JHLE1BQU0sQ0FBQyx1QkFBVSxDQUFDLG9CQUFvQixDQUFDLE9BQU8sQ0FBQyxDQUFDLFFBQVEsRUFBRSxDQUFDLFNBQVMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLDJCQUFjLENBQUMsSUFBSSxDQUFDLENBQUM7WUFDbEcsTUFBTSxDQUFDLHVCQUFVLENBQUMsb0JBQW9CLENBQUMsT0FBTyxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUMsU0FBUyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsMkJBQWMsQ0FBQyxJQUFJLENBQUMsQ0FBQztZQUNsRyxNQUFNLENBQUMsdUJBQVUsQ0FBQyxvQkFBb0IsQ0FBQyxPQUFPLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQywyQkFBYyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3pHLENBQUMsQ0FBQyxDQUFDO1FBRUgsRUFBRSxDQUFDLHlDQUF5QyxFQUFFLEdBQUcsRUFBRTtZQUNqRCxNQUFNLE1BQU0sR0FBRyx1QkFBVSxDQUFDLG9CQUFvQixDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBRTlELE1BQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1lBQ3BDLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsSUFBSSxDQUFDLGtDQUFrQyxDQUFDLENBQUM7UUFDaEUsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9raXRlbGV2L0RvY3VtZW50cy9leG9jb3J0ZXgtb2JzaWRpYW4tcGx1Z2luL3Rlc3RzL3VuaXQvZG9tYWluL3ZhbHVlLW9iamVjdHMvVGFza1N0YXR1cy50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFRhc2tTdGF0dXMsIFRhc2tTdGF0dXNUeXBlIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2RvbWFpbi92YWx1ZS1vYmplY3RzL1Rhc2tTdGF0dXMnO1xuXG5kZXNjcmliZSgnVGFza1N0YXR1cycsICgpID0+IHtcbiAgZGVzY3JpYmUoJ2NyZWF0ZScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBzdGF0dXMgd2l0aCB2YWxpZCBzdHJpbmcnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBUYXNrU3RhdHVzLmNyZWF0ZSgnZG9uZScpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZ2V0VmFsdWUoKS50b1N0cmluZygpKS50b0JlKCdkb25lJyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGNyZWF0ZSBzdGF0dXMgd2l0aCBlbnVtIHZhbHVlJywgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gVGFza1N0YXR1cy5jcmVhdGUoVGFza1N0YXR1c1R5cGUuSU5fUFJPR1JFU1MpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZ2V0VmFsdWUoKS5nZXRTdGF0dXMoKSkudG9CZShUYXNrU3RhdHVzVHlwZS5JTl9QUk9HUkVTUyk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSB1bmRlcnNjb3JlIHRvIGRhc2ggY29udmVyc2lvbicsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFRhc2tTdGF0dXMuY3JlYXRlKCdpbl9wcm9ncmVzcycpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZ2V0VmFsdWUoKS50b1N0cmluZygpKS50b0JlKCdpbi1wcm9ncmVzcycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBzdGF0dXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBUYXNrU3RhdHVzLmNyZWF0ZSgnaW52YWxpZCcpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0LmlzRmFpbHVyZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmUoJ1Rhc2tTdGF0dXMgbXVzdCBiZSBvbmUgb2Y6IHRvZG8sIGluLXByb2dyZXNzLCB3YWl0aW5nLCBkb25lLCBjYW5jZWxsZWQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3N0YXRpYyBmYWN0b3J5IG1ldGhvZHMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgYWxsIHN0YXR1cyB0eXBlcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChUYXNrU3RhdHVzLnRvZG8oKS5nZXRTdGF0dXMoKSkudG9CZShUYXNrU3RhdHVzVHlwZS5UT0RPKTtcbiAgICAgIGV4cGVjdChUYXNrU3RhdHVzLmluUHJvZ3Jlc3MoKS5nZXRTdGF0dXMoKSkudG9CZShUYXNrU3RhdHVzVHlwZS5JTl9QUk9HUkVTUyk7XG4gICAgICBleHBlY3QoVGFza1N0YXR1cy53YWl0aW5nKCkuZ2V0U3RhdHVzKCkpLnRvQmUoVGFza1N0YXR1c1R5cGUuV0FJVElORyk7XG4gICAgICBleHBlY3QoVGFza1N0YXR1cy5kb25lKCkuZ2V0U3RhdHVzKCkpLnRvQmUoVGFza1N0YXR1c1R5cGUuRE9ORSk7XG4gICAgICBleHBlY3QoVGFza1N0YXR1cy5jYW5jZWxsZWQoKS5nZXRTdGF0dXMoKSkudG9CZShUYXNrU3RhdHVzVHlwZS5DQU5DRUxMRUQpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc3RhdGUgcXVlcmllcycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGlkZW50aWZ5IGFjdGl2ZSBzdGF0dXNlcycsICgpID0+IHtcbiAgICAgIGV4cGVjdChUYXNrU3RhdHVzLnRvZG8oKS5pc0FjdGl2ZSgpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KFRhc2tTdGF0dXMuaW5Qcm9ncmVzcygpLmlzQWN0aXZlKCkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoVGFza1N0YXR1cy53YWl0aW5nKCkuaXNBY3RpdmUoKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChUYXNrU3RhdHVzLmRvbmUoKS5pc0FjdGl2ZSgpKS50b0JlKGZhbHNlKTtcbiAgICAgIGV4cGVjdChUYXNrU3RhdHVzLmNhbmNlbGxlZCgpLmlzQWN0aXZlKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpZGVudGlmeSBjb21wbGV0ZWQgc3RhdHVzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KFRhc2tTdGF0dXMuZG9uZSgpLmlzQ29tcGxldGVkKCkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoVGFza1N0YXR1cy50b2RvKCkuaXNDb21wbGV0ZWQoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGlkZW50aWZ5IGNhbmNlbGxlZCBzdGF0dXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoVGFza1N0YXR1cy5jYW5jZWxsZWQoKS5pc0NhbmNlbGxlZCgpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KFRhc2tTdGF0dXMuZG9uZSgpLmlzQ2FuY2VsbGVkKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpZGVudGlmeSBpbi1wcm9ncmVzcyBzdGF0dXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoVGFza1N0YXR1cy5pblByb2dyZXNzKCkuaXNJblByb2dyZXNzKCkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoVGFza1N0YXR1cy50b2RvKCkuaXNJblByb2dyZXNzKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnc3RhdGUgdHJhbnNpdGlvbnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBhbGxvdyB2YWxpZCB0cmFuc2l0aW9ucyBmcm9tIHRvZG8nLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b2RvID0gVGFza1N0YXR1cy50b2RvKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdCh0b2RvLmNhblRyYW5zaXRpb25UbyhUYXNrU3RhdHVzLmluUHJvZ3Jlc3MoKSkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodG9kby5jYW5UcmFuc2l0aW9uVG8oVGFza1N0YXR1cy53YWl0aW5nKCkpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHRvZG8uY2FuVHJhbnNpdGlvblRvKFRhc2tTdGF0dXMuZG9uZSgpKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdCh0b2RvLmNhblRyYW5zaXRpb25UbyhUYXNrU3RhdHVzLmNhbmNlbGxlZCgpKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgcmVvcGVuaW5nIGNvbXBsZXRlZCB0YXNrcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGRvbmUgPSBUYXNrU3RhdHVzLmRvbmUoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGRvbmUuY2FuVHJhbnNpdGlvblRvKFRhc2tTdGF0dXMudG9kbygpKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgYWxsb3cgcmVhY3RpdmF0aW5nIGNhbmNlbGxlZCB0YXNrcycsICgpID0+IHtcbiAgICAgIGNvbnN0IGNhbmNlbGxlZCA9IFRhc2tTdGF0dXMuY2FuY2VsbGVkKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjYW5jZWxsZWQuY2FuVHJhbnNpdGlvblRvKFRhc2tTdGF0dXMudG9kbygpKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ21hcmtkb3duIGNoZWNrYm94IGNvbnZlcnNpb24nLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjb252ZXJ0IHRvIG1hcmtkb3duIGNoZWNrYm94ZXMnLCAoKSA9PiB7XG4gICAgICBleHBlY3QoVGFza1N0YXR1cy50b2RvKCkudG9NYXJrZG93bkNoZWNrYm94KCkpLnRvQmUoJy0gWyBdJyk7XG4gICAgICBleHBlY3QoVGFza1N0YXR1cy5pblByb2dyZXNzKCkudG9NYXJrZG93bkNoZWNrYm94KCkpLnRvQmUoJy0gWy9dJyk7XG4gICAgICBleHBlY3QoVGFza1N0YXR1cy53YWl0aW5nKCkudG9NYXJrZG93bkNoZWNrYm94KCkpLnRvQmUoJy0gWy1dJyk7XG4gICAgICBleHBlY3QoVGFza1N0YXR1cy5kb25lKCkudG9NYXJrZG93bkNoZWNrYm94KCkpLnRvQmUoJy0gW3hdJyk7XG4gICAgICBleHBlY3QoVGFza1N0YXR1cy5jYW5jZWxsZWQoKS50b01hcmtkb3duQ2hlY2tib3goKSkudG9CZSgnLSBbfl0nKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcGFyc2UgZnJvbSBtYXJrZG93biBjaGVja2JveGVzJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KFRhc2tTdGF0dXMuZnJvbU1hcmtkb3duQ2hlY2tib3goJy0gWyBdJykuZ2V0VmFsdWUoKS5nZXRTdGF0dXMoKSkudG9CZShUYXNrU3RhdHVzVHlwZS5UT0RPKTtcbiAgICAgIGV4cGVjdChUYXNrU3RhdHVzLmZyb21NYXJrZG93bkNoZWNrYm94KCctIFsvXScpLmdldFZhbHVlKCkuZ2V0U3RhdHVzKCkpLnRvQmUoVGFza1N0YXR1c1R5cGUuSU5fUFJPR1JFU1MpO1xuICAgICAgZXhwZWN0KFRhc2tTdGF0dXMuZnJvbU1hcmtkb3duQ2hlY2tib3goJy0gWy1dJykuZ2V0VmFsdWUoKS5nZXRTdGF0dXMoKSkudG9CZShUYXNrU3RhdHVzVHlwZS5XQUlUSU5HKTtcbiAgICAgIGV4cGVjdChUYXNrU3RhdHVzLmZyb21NYXJrZG93bkNoZWNrYm94KCctIFt4XScpLmdldFZhbHVlKCkuZ2V0U3RhdHVzKCkpLnRvQmUoVGFza1N0YXR1c1R5cGUuRE9ORSk7XG4gICAgICBleHBlY3QoVGFza1N0YXR1cy5mcm9tTWFya2Rvd25DaGVja2JveCgnLSBbWF0nKS5nZXRWYWx1ZSgpLmdldFN0YXR1cygpKS50b0JlKFRhc2tTdGF0dXNUeXBlLkRPTkUpO1xuICAgICAgZXhwZWN0KFRhc2tTdGF0dXMuZnJvbU1hcmtkb3duQ2hlY2tib3goJy0gW35dJykuZ2V0VmFsdWUoKS5nZXRTdGF0dXMoKSkudG9CZShUYXNrU3RhdHVzVHlwZS5DQU5DRUxMRUQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCByZWplY3QgaW52YWxpZCBtYXJrZG93biBjaGVja2JveCcsICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFRhc2tTdGF0dXMuZnJvbU1hcmtkb3duQ2hlY2tib3goJy0gW2ludmFsaWRdJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNGYWlsdXJlKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZSgnSW52YWxpZCBtYXJrZG93biBjaGVja2JveCBmb3JtYXQnKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=