b54d5e12daa8df2c606cb6f1e89db674
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const PropertyEditingUseCase_1 = require("../../../../src/application/use-cases/PropertyEditingUseCase");
const AssetId_1 = require("../../../../src/domain/value-objects/AssetId");
const Result_1 = require("../../../../src/domain/core/Result");
describe("PropertyEditingUseCase", () => {
    let useCase;
    let mockAssetRepository;
    let mockPlugin;
    beforeEach(() => {
        // Setup mock repository
        mockAssetRepository = {
            save: jest.fn(),
            findById: jest.fn(),
            findByFilename: jest.fn(),
            findAll: jest.fn(),
            delete: jest.fn(),
            exists: jest.fn(),
            updateFrontmatterByPath: jest.fn(),
        };
        // Setup mock plugin
        mockPlugin = {
            findPropertiesForClass: jest.fn(),
            findAssetsByClass: jest.fn(),
        };
        useCase = new PropertyEditingUseCase_1.PropertyEditingUseCase(mockAssetRepository, mockPlugin);
    });
    afterEach(() => {
        jest.clearAllMocks();
        jest.clearAllTimers();
        // Clear references to prevent memory leaks
        mockAssetRepository = null;
        mockPlugin = null;
        useCase = null;
    });
    describe("Basic Functionality", () => {
        test("should create useCase with repository and plugin", () => {
            expect(useCase).toBeDefined();
            expect(useCase.execute).toBeDefined();
        });
        test("should implement UseCase interface", () => {
            expect(typeof useCase.execute).toBe("function");
            expect(typeof useCase.getPropertiesForClass).toBe("function");
            expect(typeof useCase.getAssetsForClass).toBe("function");
        });
        test("should accept valid dependencies in constructor", () => {
            const newUseCase = new PropertyEditingUseCase_1.PropertyEditingUseCase(mockAssetRepository, mockPlugin);
            expect(newUseCase).toBeInstanceOf(PropertyEditingUseCase_1.PropertyEditingUseCase);
        });
    });
    describe("Request Validation", () => {
        test("should fail when assetId is missing", async () => {
            const request = {
                assetId: "",
                propertyName: "test",
                value: "value",
                propertyDefinition: {
                    propertyName: "test",
                    label: "Test",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Asset ID is required");
        });
        test("should fail when propertyName is missing", async () => {
            const request = {
                assetId: "test-id",
                propertyName: "",
                value: "value",
                propertyDefinition: {
                    propertyName: "test",
                    label: "Test",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Property name is required");
        });
        test("should pass validation with valid request", async () => {
            const request = {
                assetId: "valid-id.md",
                propertyName: "test",
                value: "value",
                propertyDefinition: {
                    propertyName: "test",
                    label: "Test",
                    range: "string",
                    isRequired: false,
                },
            };
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
        });
        test("should handle null assetId", async () => {
            const request = {
                assetId: null,
                propertyName: "test",
                value: "value",
                propertyDefinition: {
                    propertyName: "test",
                    label: "Test",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Asset ID is required");
        });
        test("should handle null propertyName", async () => {
            const request = {
                assetId: "test-id",
                propertyName: null,
                value: "value",
                propertyDefinition: {
                    propertyName: "test",
                    label: "Test",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Property name is required");
        });
    });
    describe("Property Value Validation", () => {
        test("should validate required properties", async () => {
            const request = {
                assetId: "test-id",
                propertyName: "requiredProp",
                value: "",
                propertyDefinition: {
                    propertyName: "requiredProp",
                    label: "Required Property",
                    range: "string",
                    isRequired: true,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Required Property is required");
        });
        test("should allow empty values for non-required properties", async () => {
            const request = {
                assetId: "test-id.md",
                propertyName: "optionalProp",
                value: "",
                propertyDefinition: {
                    propertyName: "optionalProp",
                    label: "Optional Property",
                    range: "string",
                    isRequired: false,
                },
            };
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
        });
        test("should validate number properties", async () => {
            const request = {
                assetId: "test-id.md",
                propertyName: "numberProp",
                value: "not-a-number",
                propertyDefinition: {
                    propertyName: "numberProp",
                    label: "Number Property",
                    range: "number",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Number Property must be a number");
        });
        test("should validate valid numbers", async () => {
            const request = {
                assetId: "test-id.md",
                propertyName: "numberProp",
                value: "42",
                propertyDefinition: {
                    propertyName: "numberProp",
                    label: "Number Property",
                    range: "number",
                    isRequired: false,
                },
            };
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
        });
        test("should validate date properties", async () => {
            const request = {
                assetId: "test-id.md",
                propertyName: "dateProp",
                value: "not-a-date",
                propertyDefinition: {
                    propertyName: "dateProp",
                    label: "Date Property",
                    range: "date",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Date Property must be a valid date");
        });
        test("should validate valid dates", async () => {
            const request = {
                assetId: "test-id.md",
                propertyName: "dateProp",
                value: "2024-12-31",
                propertyDefinition: {
                    propertyName: "dateProp",
                    label: "Date Property",
                    range: "date",
                    isRequired: false,
                },
            };
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
        });
        test("should validate boolean properties", async () => {
            const request = {
                assetId: "test-id.md",
                propertyName: "boolProp",
                value: "not-a-boolean",
                propertyDefinition: {
                    propertyName: "boolProp",
                    label: "Boolean Property",
                    range: "boolean",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Boolean Property must be true or false");
        });
        test("should validate valid booleans", async () => {
            const trueRequest = {
                assetId: "test-id.md",
                propertyName: "boolProp",
                value: true,
                propertyDefinition: {
                    propertyName: "boolProp",
                    label: "Boolean Property",
                    range: "boolean",
                    isRequired: false,
                },
            };
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const trueResult = await useCase.execute(trueRequest);
            expect(trueResult.isSuccess).toBe(true);
            const falseRequest = {
                assetId: "test-id.md",
                propertyName: "boolProp",
                value: false,
                propertyDefinition: {
                    propertyName: "boolProp",
                    label: "Boolean Property",
                    range: "boolean",
                    isRequired: false,
                },
            };
            const falseResult = await useCase.execute(falseRequest);
            expect(falseResult.isSuccess).toBe(true);
        });
        test("should validate enum properties", async () => {
            const request = {
                assetId: "test-id.md",
                propertyName: "enumProp",
                value: "invalid",
                propertyDefinition: {
                    propertyName: "enumProp",
                    label: "Enum Property",
                    range: "enum:low,medium,high",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Enum Property must be one of: low, medium, high");
        });
        test("should validate valid enum values", async () => {
            const request = {
                assetId: "test-id.md",
                propertyName: "enumProp",
                value: "medium",
                propertyDefinition: {
                    propertyName: "enumProp",
                    label: "Enum Property",
                    range: "enum:low,medium,high",
                    isRequired: false,
                },
            };
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
        });
        test("should validate with custom regex", async () => {
            const request = {
                assetId: "test-id.md",
                propertyName: "regexProp",
                value: "invalid-format",
                propertyDefinition: {
                    propertyName: "regexProp",
                    label: "Regex Property",
                    range: "string",
                    isRequired: false,
                    validation: "^[A-Z]{3}-\\d{3}$",
                },
            };
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Regex Property format is invalid");
        });
        test("should pass custom regex validation", async () => {
            const request = {
                assetId: "test-id.md",
                propertyName: "regexProp",
                value: "ABC-123",
                propertyDefinition: {
                    propertyName: "regexProp",
                    label: "Regex Property",
                    range: "string",
                    isRequired: false,
                    validation: "^[A-Z]{3}-\\d{3}$",
                },
            };
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
        });
        test("should handle invalid regex gracefully", async () => {
            const request = {
                assetId: "test-id.md",
                propertyName: "regexProp",
                value: "any-value",
                propertyDefinition: {
                    propertyName: "regexProp",
                    label: "Regex Property",
                    range: "string",
                    isRequired: false,
                    validation: "[invalid-regex",
                },
            };
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true); // Should skip invalid regex validation
        });
    });
    describe("Direct File Path Updates", () => {
        test("should use direct path update for file paths", async () => {
            const request = {
                assetId: "path/to/file.md",
                propertyName: "title",
                value: "New Title",
                propertyDefinition: {
                    propertyName: "title",
                    label: "Title",
                    range: "string",
                    isRequired: false,
                },
            };
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
            expect(mockAssetRepository.updateFrontmatterByPath).toHaveBeenCalledWith("path/to/file.md", { title: "New Title" });
        });
        test("should handle direct update errors", async () => {
            const request = {
                assetId: "path/to/file.md",
                propertyName: "title",
                value: "New Title",
                propertyDefinition: {
                    propertyName: "title",
                    label: "Title",
                    range: "string",
                    isRequired: false,
                },
            };
            mockAssetRepository.updateFrontmatterByPath.mockRejectedValue(new Error("File not found"));
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Failed to update property: Error: File not found");
        });
        test("should detect file paths correctly", async () => {
            const filePaths = [
                "file.md",
                "folder/file.md",
                "deep/nested/path/file.md",
                "../relative/path.md",
                "./current/path.md",
            ];
            for (const filePath of filePaths) {
                const request = {
                    assetId: filePath,
                    propertyName: "test",
                    value: "value",
                    propertyDefinition: {
                        propertyName: "test",
                        label: "Test",
                        range: "string",
                        isRequired: false,
                    },
                };
                mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
                const result = await useCase.execute(request);
                expect(result.isSuccess).toBe(true);
                expect(mockAssetRepository.updateFrontmatterByPath).toHaveBeenCalledWith(filePath, { test: "value" });
            }
        });
        test("should fallback to Asset ID lookup when direct update not available", async () => {
            const request = {
                assetId: "path/to/file.md",
                propertyName: "title",
                value: "New Title",
                propertyDefinition: {
                    propertyName: "title",
                    label: "Title",
                    range: "string",
                    isRequired: false,
                },
            };
            // Mock repository without updateFrontmatterByPath method
            const repoWithoutDirectUpdate = { ...mockAssetRepository };
            delete repoWithoutDirectUpdate.updateFrontmatterByPath;
            const useCaseWithoutDirectUpdate = new PropertyEditingUseCase_1.PropertyEditingUseCase(repoWithoutDirectUpdate, mockPlugin);
            // Mock asset creation and retrieval
            const validUUID = "123e4567-e89b-12d3-a456-426614174000";
            const assetIdResult = AssetId_1.AssetId.create(validUUID);
            const mockAsset = {
                setProperty: jest.fn().mockReturnValue(Result_1.Result.ok()),
                getId: jest.fn().mockReturnValue(assetIdResult.getValue()),
            };
            repoWithoutDirectUpdate.findByFilename.mockResolvedValue(mockAsset);
            repoWithoutDirectUpdate.save.mockResolvedValue(undefined);
            const result = await useCaseWithoutDirectUpdate.execute(request);
            expect(result.isSuccess).toBe(true);
            expect(repoWithoutDirectUpdate.findByFilename).toHaveBeenCalledWith("path/to/file.md");
            expect(mockAsset.setProperty).toHaveBeenCalledWith("title", "New Title");
        });
    });
    describe("Asset ID Based Updates", () => {
        test("should update asset by UUID", async () => {
            const validUUID = "123e4567-e89b-12d3-a456-426614174000";
            const assetIdResult = AssetId_1.AssetId.create(validUUID);
            const mockAsset = {
                setProperty: jest.fn().mockReturnValue(Result_1.Result.ok()),
                getId: jest.fn().mockReturnValue(assetIdResult.getValue()),
            };
            mockAssetRepository.findById.mockResolvedValue(mockAsset);
            mockAssetRepository.save.mockResolvedValue(undefined);
            const request = {
                assetId: validUUID,
                propertyName: "title",
                value: "New Title",
                propertyDefinition: {
                    propertyName: "title",
                    label: "Title",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
            expect(mockAssetRepository.findById).toHaveBeenCalled();
            expect(mockAsset.setProperty).toHaveBeenCalledWith("title", "New Title");
            expect(mockAssetRepository.save).toHaveBeenCalledWith(mockAsset);
        });
        test("should fallback to filename lookup when UUID lookup fails", async () => {
            const validUUID = "123e4567-e89b-12d3-a456-426614174000";
            const assetIdResult = AssetId_1.AssetId.create(validUUID);
            const mockAsset = {
                setProperty: jest.fn().mockReturnValue(Result_1.Result.ok()),
                getId: jest.fn().mockReturnValue(assetIdResult.getValue()),
            };
            mockAssetRepository.findById.mockResolvedValue(null);
            mockAssetRepository.findByFilename.mockResolvedValue(mockAsset);
            mockAssetRepository.save.mockResolvedValue(undefined);
            const request = {
                assetId: "invalid-uuid",
                propertyName: "title",
                value: "New Title",
                propertyDefinition: {
                    propertyName: "title",
                    label: "Title",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
            expect(mockAssetRepository.findByFilename).toHaveBeenCalledWith("invalid-uuid");
            expect(mockAsset.setProperty).toHaveBeenCalledWith("title", "New Title");
        });
        test("should fail when asset not found by ID or filename", async () => {
            mockAssetRepository.findById.mockResolvedValue(null);
            mockAssetRepository.findByFilename.mockResolvedValue(null);
            const request = {
                assetId: "nonexistent",
                propertyName: "title",
                value: "New Title",
                propertyDefinition: {
                    propertyName: "title",
                    label: "Title",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Asset not found: nonexistent");
        });
        test("should handle repository errors during asset lookup", async () => {
            mockAssetRepository.findById.mockRejectedValue(new Error("Database error"));
            const validUUID = "123e4567-e89b-12d3-a456-426614174000";
            const request = {
                assetId: validUUID,
                propertyName: "title",
                value: "New Title",
                propertyDefinition: {
                    propertyName: "title",
                    label: "Title",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Failed to update property: Error: Database error");
        });
        test("should handle save errors", async () => {
            const validUUID = "123e4567-e89b-12d3-a456-426614174000";
            const assetIdResult = AssetId_1.AssetId.create(validUUID);
            const mockAsset = {
                setProperty: jest.fn().mockReturnValue(Result_1.Result.ok()),
                getId: jest.fn().mockReturnValue(assetIdResult.getValue()),
            };
            mockAssetRepository.findByFilename.mockResolvedValue(mockAsset);
            mockAssetRepository.save.mockRejectedValue(new Error("Save failed"));
            const request = {
                assetId: "test-asset",
                propertyName: "title",
                value: "New Title",
                propertyDefinition: {
                    propertyName: "title",
                    label: "Title",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Failed to update property: Error: Save failed");
        });
    });
    describe("Property Value Types", () => {
        beforeEach(() => {
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
        });
        test("should handle string values", async () => {
            const request = {
                assetId: "test.md",
                propertyName: "description",
                value: "This is a description",
                propertyDefinition: {
                    propertyName: "description",
                    label: "Description",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
            expect(result.getValue().updatedValue).toBe("This is a description");
        });
        test("should handle numeric values", async () => {
            const request = {
                assetId: "test.md",
                propertyName: "count",
                value: 42,
                propertyDefinition: {
                    propertyName: "count",
                    label: "Count",
                    range: "number",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
            expect(result.getValue().updatedValue).toBe(42);
        });
        test("should handle boolean values", async () => {
            const request = {
                assetId: "test.md",
                propertyName: "active",
                value: true,
                propertyDefinition: {
                    propertyName: "active",
                    label: "Active",
                    range: "boolean",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
            expect(result.getValue().updatedValue).toBe(true);
        });
        test("should handle array values", async () => {
            const arrayValue = ["item1", "item2", "item3"];
            const request = {
                assetId: "test.md",
                propertyName: "tags",
                value: arrayValue,
                propertyDefinition: {
                    propertyName: "tags",
                    label: "Tags",
                    range: "array",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
            expect(result.getValue().updatedValue).toEqual(arrayValue);
        });
        test("should handle object values", async () => {
            const objectValue = { nested: "value", count: 5 };
            const request = {
                assetId: "test.md",
                propertyName: "metadata",
                value: objectValue,
                propertyDefinition: {
                    propertyName: "metadata",
                    label: "Metadata",
                    range: "object",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
            expect(result.getValue().updatedValue).toEqual(objectValue);
        });
        test("should handle null values for non-required properties", async () => {
            const request = {
                assetId: "test.md",
                propertyName: "optional",
                value: null,
                propertyDefinition: {
                    propertyName: "optional",
                    label: "Optional",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
            expect(result.getValue().updatedValue).toBeNull();
        });
        test("should handle undefined values for non-required properties", async () => {
            const request = {
                assetId: "test.md",
                propertyName: "optional",
                value: undefined,
                propertyDefinition: {
                    propertyName: "optional",
                    label: "Optional",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
            expect(result.getValue().updatedValue).toBeUndefined();
        });
    });
    describe("Plugin Integration", () => {
        test("should get properties for class through plugin", async () => {
            const mockProperties = [
                {
                    name: "title",
                    label: "Title",
                    range: "string",
                    isRequired: true,
                },
                {
                    name: "description",
                    label: "Description",
                    range: "text",
                    isRequired: false,
                },
            ];
            mockPlugin.findPropertiesForClass.mockResolvedValue(mockProperties);
            const result = await useCase.getPropertiesForClass("exo__Task");
            expect(result.isSuccess).toBe(true);
            expect(result.getValue()).toEqual(mockProperties);
            expect(mockPlugin.findPropertiesForClass).toHaveBeenCalledWith("exo__Task");
        });
        test("should handle plugin errors when getting properties", async () => {
            mockPlugin.findPropertiesForClass.mockRejectedValue(new Error("Plugin error"));
            const result = await useCase.getPropertiesForClass("exo__Task");
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Failed to get properties: Plugin error");
        });
        test("should get assets for class through plugin", async () => {
            const mockAssets = [
                { id: "1", title: "Asset 1" },
                { id: "2", title: "Asset 2" },
            ];
            mockPlugin.findAssetsByClass.mockResolvedValue(mockAssets);
            const result = await useCase.getAssetsForClass("exo__Task");
            expect(result.isSuccess).toBe(true);
            expect(result.getValue()).toEqual(mockAssets);
            expect(mockPlugin.findAssetsByClass).toHaveBeenCalledWith("exo__Task", true);
        });
        test("should handle plugin errors when getting assets", async () => {
            mockPlugin.findAssetsByClass.mockRejectedValue(new Error("Plugin error"));
            const result = await useCase.getAssetsForClass("exo__Task");
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Failed to get assets: Plugin error");
        });
        test("should pass correct parameters to plugin methods", async () => {
            mockPlugin.findPropertiesForClass.mockResolvedValue([]);
            mockPlugin.findAssetsByClass.mockResolvedValue([]);
            await useCase.getPropertiesForClass("custom__Class");
            await useCase.getAssetsForClass("custom__Class");
            expect(mockPlugin.findPropertiesForClass).toHaveBeenCalledWith("custom__Class");
            expect(mockPlugin.findAssetsByClass).toHaveBeenCalledWith("custom__Class", true);
        });
    });
    describe("Response Structure", () => {
        test("should return correct success response structure", async () => {
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const request = {
                assetId: "test.md",
                propertyName: "title",
                value: "New Title",
                propertyDefinition: {
                    propertyName: "title",
                    label: "Title",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
            expect(result.getValue()).toEqual({
                success: true,
                updatedValue: "New Title",
            });
        });
        test("should return correct failure response structure", async () => {
            const request = {
                assetId: "",
                propertyName: "title",
                value: "New Title",
                propertyDefinition: {
                    propertyName: "title",
                    label: "Title",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toBe("Asset ID is required");
        });
        test("should preserve original value in success response", async () => {
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const complexValue = {
                nested: {
                    array: [1, 2, 3],
                    string: "test",
                },
            };
            const request = {
                assetId: "test.md",
                propertyName: "metadata",
                value: complexValue,
                propertyDefinition: {
                    propertyName: "metadata",
                    label: "Metadata",
                    range: "object",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
            expect(result.getValue().updatedValue).toEqual(complexValue);
        });
    });
    describe("Edge Cases and Error Handling", () => {
        test("should handle extremely large property values", async () => {
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            // Reduce size for CI memory efficiency
            const largeSize = process.env.CI ? 10000 : 50000;
            const largeValue = "A".repeat(largeSize);
            const request = {
                assetId: "test.md",
                propertyName: "largeField",
                value: largeValue,
                propertyDefinition: {
                    propertyName: "largeField",
                    label: "Large Field",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
            expect(result.getValue().updatedValue).toBe(largeValue);
            // Clear large string reference
            request.value = null;
        });
        test("should handle special characters in property names", async () => {
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const specialPropName = "prop-with-special_chars$123";
            const request = {
                assetId: "test.md",
                propertyName: specialPropName,
                value: "test value",
                propertyDefinition: {
                    propertyName: specialPropName,
                    label: "Special Property",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
        });
        test("should handle circular references in object values", async () => {
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const obj1 = { name: "obj1" };
            const obj2 = { name: "obj2", ref: obj1 };
            obj1.ref = obj2; // Create circular reference
            const request = {
                assetId: "test.md",
                propertyName: "circular",
                value: obj1,
                propertyDefinition: {
                    propertyName: "circular",
                    label: "Circular",
                    range: "object",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isSuccess).toBe(true);
        });
        test("should handle concurrent updates gracefully", async () => {
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const concurrentCount = process.env.CI ? 5 : 10; // Reduce for CI
            const requests = Array(concurrentCount)
                .fill(null)
                .map((_, i) => ({
                assetId: `test${i}.md`,
                propertyName: "title",
                value: `Title ${i}`,
                propertyDefinition: {
                    propertyName: "title",
                    label: "Title",
                    range: "string",
                    isRequired: false,
                },
            }));
            const promises = requests.map((req) => useCase.execute(req));
            const results = await Promise.all(promises);
            results.forEach((result, i) => {
                expect(result.isSuccess).toBe(true);
                expect(result.getValue().updatedValue).toBe(`Title ${i}`);
            });
            // Clear references
            requests.length = 0;
            promises.length = 0;
            results.length = 0;
        });
        test("should handle timeout scenarios", async () => {
            mockAssetRepository.updateFrontmatterByPath.mockImplementation(() => new Promise((_, reject) => setTimeout(() => reject(new Error("Timeout")), 100)));
            const request = {
                assetId: "test.md",
                propertyName: "title",
                value: "New Title",
                propertyDefinition: {
                    propertyName: "title",
                    label: "Title",
                    range: "string",
                    isRequired: false,
                },
            };
            const result = await useCase.execute(request);
            expect(result.isFailure).toBe(true);
            expect(result.error).toContain("Timeout");
        });
        test("should handle malformed property definitions", async () => {
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const request = {
                assetId: "test.md",
                propertyName: "test",
                value: "value",
                propertyDefinition: {
                    propertyName: "test",
                    label: null,
                    range: undefined,
                    isRequired: null,
                },
            };
            const result = await useCase.execute(request);
            // Should handle gracefully and succeed
            expect(result.isSuccess).toBe(true);
        });
    });
    describe("Performance Tests", () => {
        test("should complete property updates within reasonable time", async () => {
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const startTime = Date.now();
            const request = {
                assetId: "test.md",
                propertyName: "title",
                value: "New Title",
                propertyDefinition: {
                    propertyName: "title",
                    label: "Title",
                    range: "string",
                    isRequired: false,
                },
            };
            await useCase.execute(request);
            const endTime = Date.now();
            const duration = endTime - startTime;
            expect(duration).toBeLessThan(100); // Should complete within 100ms
        });
        test("should handle batch updates efficiently", async () => {
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const startTime = Date.now();
            const batchSize = process.env.CI ? 10 : 25; // Reduce batch size for CI
            const requests = Array(batchSize)
                .fill(null)
                .map((_, i) => ({
                assetId: `test${i}.md`,
                propertyName: "title",
                value: `Title ${i}`,
                propertyDefinition: {
                    propertyName: "title",
                    label: "Title",
                    range: "string",
                    isRequired: false,
                },
            }));
            const promises = requests.map((req) => useCase.execute(req));
            await Promise.all(promises);
            // Clear references
            requests.length = 0;
            promises.length = 0;
            const endTime = Date.now();
            const duration = endTime - startTime;
            const timeoutLimit = process.env.CI ? 2000 : 1000; // More lenient for CI
            expect(duration).toBeLessThan(timeoutLimit);
        });
        test("should not accumulate memory over multiple executions", async () => {
            mockAssetRepository.updateFrontmatterByPath.mockResolvedValue(undefined);
            const initialMemory = process.memoryUsage().heapUsed;
            const requests = [];
            // Reduce iterations for CI memory efficiency
            const iterations = process.env.CI ? 10 : 50;
            for (let i = 0; i < iterations; i++) {
                const request = {
                    assetId: `test${i}.md`,
                    propertyName: "title",
                    value: `Title ${i}`,
                    propertyDefinition: {
                        propertyName: "title",
                        label: "Title",
                        range: "string",
                        isRequired: false,
                    },
                };
                requests.push(request);
            }
            // Execute in smaller batches to prevent memory buildup
            const batchSize = 5;
            for (let i = 0; i < requests.length; i += batchSize) {
                const batch = requests.slice(i, i + batchSize);
                await Promise.all(batch.map((req) => useCase.execute(req)));
                // Clear references after each batch
                batch.length = 0;
            }
            // Clear the requests array
            requests.length = 0;
            // Force garbage collection if possible
            if (global.gc) {
                global.gc();
            }
            const finalMemory = process.memoryUsage().heapUsed;
            const memoryIncrease = finalMemory - initialMemory;
            // Memory increase should be reasonable (less than 3MB in CI, 8MB locally)
            const memoryLimit = process.env.CI ? 3 * 1024 * 1024 : 8 * 1024 * 1024;
            expect(memoryIncrease).toBeLessThan(memoryLimit);
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvdW5pdC9hcHBsaWNhdGlvbi91c2UtY2FzZXMvUHJvcGVydHlFZGl0aW5nVXNlQ2FzZS50ZXN0LnRzIiwibWFwcGluZ3MiOiI7O0FBQUEseUdBSXNFO0FBR3RFLDBFQUF1RTtBQUd2RSwrREFBNEQ7QUFFNUQsUUFBUSxDQUFDLHdCQUF3QixFQUFFLEdBQUcsRUFBRTtJQUN0QyxJQUFJLE9BQStCLENBQUM7SUFDcEMsSUFBSSxtQkFBa0QsQ0FBQztJQUN2RCxJQUFJLFVBQWUsQ0FBQztJQUVwQixVQUFVLENBQUMsR0FBRyxFQUFFO1FBQ2Qsd0JBQXdCO1FBQ3hCLG1CQUFtQixHQUFHO1lBQ3BCLElBQUksRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO1lBQ2YsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDbkIsY0FBYyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDekIsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDbEIsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDakIsTUFBTSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDakIsdUJBQXVCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtTQUNuQyxDQUFDO1FBRUYsb0JBQW9CO1FBQ3BCLFVBQVUsR0FBRztZQUNYLHNCQUFzQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7WUFDakMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtTQUM3QixDQUFDO1FBRUYsT0FBTyxHQUFHLElBQUksK0NBQXNCLENBQUMsbUJBQW1CLEVBQUUsVUFBVSxDQUFDLENBQUM7SUFDeEUsQ0FBQyxDQUFDLENBQUM7SUFFSCxTQUFTLENBQUMsR0FBRyxFQUFFO1FBQ2IsSUFBSSxDQUFDLGFBQWEsRUFBRSxDQUFDO1FBQ3JCLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQztRQUN0QiwyQ0FBMkM7UUFDM0Ms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R0FBRyxhQUFhLENBQUM7WUFFbkQsMEVBQTBFO1lBQzFFLE1BQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLElBQUksR0FBRyxJQUFJLENBQUM7WUFDdkUsTUFBTSxDQUFDLGNBQWMsQ0FBQyxDQUFDLFlBQVksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUNuRCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvdW5pdC9hcHBsaWNhdGlvbi91c2UtY2FzZXMvUHJvcGVydHlFZGl0aW5nVXNlQ2FzZS50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIFByb3BlcnR5RWRpdGluZ1VzZUNhc2UsXG4gIFVwZGF0ZVByb3BlcnR5UmVxdWVzdCxcbiAgVXBkYXRlUHJvcGVydHlSZXNwb25zZSxcbn0gZnJvbSBcIi4uLy4uLy4uLy4uL3NyYy9hcHBsaWNhdGlvbi91c2UtY2FzZXMvUHJvcGVydHlFZGl0aW5nVXNlQ2FzZVwiO1xuaW1wb3J0IHsgSUFzc2V0UmVwb3NpdG9yeSB9IGZyb20gXCIuLi8uLi8uLi8uLi9zcmMvZG9tYWluL3JlcG9zaXRvcmllcy9JQXNzZXRSZXBvc2l0b3J5XCI7XG5pbXBvcnQgeyBBc3NldCB9IGZyb20gXCIuLi8uLi8uLi8uLi9zcmMvZG9tYWluL2VudGl0aWVzL0Fzc2V0XCI7XG5pbXBvcnQgeyBBc3NldElkIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NyYy9kb21haW4vdmFsdWUtb2JqZWN0cy9Bc3NldElkXCI7XG5pbXBvcnQgeyBDbGFzc05hbWUgfSBmcm9tIFwiLi4vLi4vLi4vLi4vc3JjL2RvbWFpbi92YWx1ZS1vYmplY3RzL0NsYXNzTmFtZVwiO1xuaW1wb3J0IHsgT250b2xvZ3lQcmVmaXggfSBmcm9tIFwiLi4vLi4vLi4vLi4vc3JjL2RvbWFpbi92YWx1ZS1vYmplY3RzL09udG9sb2d5UHJlZml4XCI7XG5pbXBvcnQgeyBSZXN1bHQgfSBmcm9tIFwiLi4vLi4vLi4vLi4vc3JjL2RvbWFpbi9jb3JlL1Jlc3VsdFwiO1xuXG5kZXNjcmliZShcIlByb3BlcnR5RWRpdGluZ1VzZUNhc2VcIiwgKCkgPT4ge1xuICBsZXQgdXNlQ2FzZTogUHJvcGVydHlFZGl0aW5nVXNlQ2FzZTtcbiAgbGV0IG1vY2tBc3NldFJlcG9zaXRvcnk6IGplc3QuTW9ja2VkPElBc3NldFJlcG9zaXRvcnk+O1xuICBsZXQgbW9ja1BsdWdpbjogYW55O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIC8vIFNldHVwIG1vY2sgcmVwb3NpdG9yeVxuICAgIG1vY2tBc3NldFJlcG9zaXRvcnkgPSB7XG4gICAgICBzYXZlOiBqZXN0LmZuKCksXG4gICAgICBmaW5kQnlJZDogamVzdC5mbigpLFxuICAgICAgZmluZEJ5RmlsZW5hbWU6IGplc3QuZm4oKSxcbiAgICAgIGZpbmRBbGw6IGplc3QuZm4oKSxcbiAgICAgIGRlbGV0ZTogamVzdC5mbigpLFxuICAgICAgZXhpc3RzOiBqZXN0LmZuKCksXG4gICAgICB1cGRhdGVGcm9udG1hdHRlckJ5UGF0aDogamVzdC5mbigpLFxuICAgIH07XG5cbiAgICAvLyBTZXR1cCBtb2NrIHBsdWdpblxuICAgIG1vY2tQbHVnaW4gPSB7XG4gICAgICBmaW5kUHJvcGVydGllc0ZvckNsYXNzOiBqZXN0LmZuKCksXG4gICAgICBmaW5kQXNzZXRzQnlDbGFzczogamVzdC5mbigpLFxuICAgIH07XG5cbiAgICB1c2VDYXNlID0gbmV3IFByb3BlcnR5RWRpdGluZ1VzZUNhc2UobW9ja0Fzc2V0UmVwb3NpdG9yeSwgbW9ja1BsdWdpbik7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgamVzdC5jbGVhckFsbFRpbWVycygpO1xuICAgIC8vIENsZWFyIHJlZmVyZW5jZXMgdG8gcHJldmVudCBtZW1vcnkgbGVha3NcbiAgICBtb2NrQXNzZXRSZXBvc2l0b3J5ID0gbnVsbCBhcyBhbnk7XG4gICAgbW9ja1BsdWdpbiA9IG51bGwgYXMgYW55O1xuICAgIHVzZUNhc2UgPSBudWxsIGFzIGFueTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJCYXNpYyBGdW5jdGlvbmFsaXR5XCIsICgpID0+IHtcbiAgICB0ZXN0KFwic2hvdWxkIGNyZWF0ZSB1c2VDYXNlIHdpdGggcmVwb3NpdG9yeSBhbmQgcGx1Z2luXCIsICgpID0+IHtcbiAgICAgIGV4cGVjdCh1c2VDYXNlKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHVzZUNhc2UuZXhlY3V0ZSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgaW1wbGVtZW50IFVzZUNhc2UgaW50ZXJmYWNlXCIsICgpID0+IHtcbiAgICAgIGV4cGVjdCh0eXBlb2YgdXNlQ2FzZS5leGVjdXRlKS50b0JlKFwiZnVuY3Rpb25cIik7XG4gICAgICBleHBlY3QodHlwZW9mIHVzZUNhc2UuZ2V0UHJvcGVydGllc0ZvckNsYXNzKS50b0JlKFwiZnVuY3Rpb25cIik7XG4gICAgICBleHBlY3QodHlwZW9mIHVzZUNhc2UuZ2V0QXNzZXRzRm9yQ2xhc3MpLnRvQmUoXCJmdW5jdGlvblwiKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgYWNjZXB0IHZhbGlkIGRlcGVuZGVuY2llcyBpbiBjb25zdHJ1Y3RvclwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBuZXdVc2VDYXNlID0gbmV3IFByb3BlcnR5RWRpdGluZ1VzZUNhc2UoXG4gICAgICAgIG1vY2tBc3NldFJlcG9zaXRvcnksXG4gICAgICAgIG1vY2tQbHVnaW4sXG4gICAgICApO1xuICAgICAgZXhwZWN0KG5ld1VzZUNhc2UpLnRvQmVJbnN0YW5jZU9mKFByb3BlcnR5RWRpdGluZ1VzZUNhc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIlJlcXVlc3QgVmFsaWRhdGlvblwiLCAoKSA9PiB7XG4gICAgdGVzdChcInNob3VsZCBmYWlsIHdoZW4gYXNzZXRJZCBpcyBtaXNzaW5nXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFVwZGF0ZVByb3BlcnR5UmVxdWVzdCA9IHtcbiAgICAgICAgYXNzZXRJZDogXCJcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcInRlc3RcIixcbiAgICAgICAgdmFsdWU6IFwidmFsdWVcIixcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcInRlc3RcIixcbiAgICAgICAgICBsYWJlbDogXCJUZXN0XCIsXG4gICAgICAgICAgcmFuZ2U6IFwic3RyaW5nXCIsXG4gICAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmV4ZWN1dGUocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNGYWlsdXJlKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZShcIkFzc2V0IElEIGlzIHJlcXVpcmVkXCIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBmYWlsIHdoZW4gcHJvcGVydHlOYW1lIGlzIG1pc3NpbmdcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcInRlc3QtaWRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcIlwiLFxuICAgICAgICB2YWx1ZTogXCJ2YWx1ZVwiLFxuICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidGVzdFwiLFxuICAgICAgICAgIGxhYmVsOiBcIlRlc3RcIixcbiAgICAgICAgICByYW5nZTogXCJzdHJpbmdcIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuZXhlY3V0ZShyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc0ZhaWx1cmUpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKFwiUHJvcGVydHkgbmFtZSBpcyByZXF1aXJlZFwiKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgcGFzcyB2YWxpZGF0aW9uIHdpdGggdmFsaWQgcmVxdWVzdFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0OiBVcGRhdGVQcm9wZXJ0eVJlcXVlc3QgPSB7XG4gICAgICAgIGFzc2V0SWQ6IFwidmFsaWQtaWQubWRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcInRlc3RcIixcbiAgICAgICAgdmFsdWU6IFwidmFsdWVcIixcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcInRlc3RcIixcbiAgICAgICAgICBsYWJlbDogXCJUZXN0XCIsXG4gICAgICAgICAgcmFuZ2U6IFwic3RyaW5nXCIsXG4gICAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrQXNzZXRSZXBvc2l0b3J5LnVwZGF0ZUZyb250bWF0dGVyQnlQYXRoLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuZXhlY3V0ZShyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGhhbmRsZSBudWxsIGFzc2V0SWRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBudWxsIGFzIGFueSxcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcInRlc3RcIixcbiAgICAgICAgdmFsdWU6IFwidmFsdWVcIixcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcInRlc3RcIixcbiAgICAgICAgICBsYWJlbDogXCJUZXN0XCIsXG4gICAgICAgICAgcmFuZ2U6IFwic3RyaW5nXCIsXG4gICAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmV4ZWN1dGUocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNGYWlsdXJlKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZShcIkFzc2V0IElEIGlzIHJlcXVpcmVkXCIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgbnVsbCBwcm9wZXJ0eU5hbWVcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcInRlc3QtaWRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBudWxsIGFzIGFueSxcbiAgICAgICAgdmFsdWU6IFwidmFsdWVcIixcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcInRlc3RcIixcbiAgICAgICAgICBsYWJlbDogXCJUZXN0XCIsXG4gICAgICAgICAgcmFuZ2U6IFwic3RyaW5nXCIsXG4gICAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmV4ZWN1dGUocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNGYWlsdXJlKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZShcIlByb3BlcnR5IG5hbWUgaXMgcmVxdWlyZWRcIik7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiUHJvcGVydHkgVmFsdWUgVmFsaWRhdGlvblwiLCAoKSA9PiB7XG4gICAgdGVzdChcInNob3VsZCB2YWxpZGF0ZSByZXF1aXJlZCBwcm9wZXJ0aWVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFVwZGF0ZVByb3BlcnR5UmVxdWVzdCA9IHtcbiAgICAgICAgYXNzZXRJZDogXCJ0ZXN0LWlkXCIsXG4gICAgICAgIHByb3BlcnR5TmFtZTogXCJyZXF1aXJlZFByb3BcIixcbiAgICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICAgIHByb3BlcnR5RGVmaW5pdGlvbjoge1xuICAgICAgICAgIHByb3BlcnR5TmFtZTogXCJyZXF1aXJlZFByb3BcIixcbiAgICAgICAgICBsYWJlbDogXCJSZXF1aXJlZCBQcm9wZXJ0eVwiLFxuICAgICAgICAgIHJhbmdlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmV4ZWN1dGUocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNGYWlsdXJlKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZShcIlJlcXVpcmVkIFByb3BlcnR5IGlzIHJlcXVpcmVkXCIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBhbGxvdyBlbXB0eSB2YWx1ZXMgZm9yIG5vbi1yZXF1aXJlZCBwcm9wZXJ0aWVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFVwZGF0ZVByb3BlcnR5UmVxdWVzdCA9IHtcbiAgICAgICAgYXNzZXRJZDogXCJ0ZXN0LWlkLm1kXCIsXG4gICAgICAgIHByb3BlcnR5TmFtZTogXCJvcHRpb25hbFByb3BcIixcbiAgICAgICAgdmFsdWU6IFwiXCIsXG4gICAgICAgIHByb3BlcnR5RGVmaW5pdGlvbjoge1xuICAgICAgICAgIHByb3BlcnR5TmFtZTogXCJvcHRpb25hbFByb3BcIixcbiAgICAgICAgICBsYWJlbDogXCJPcHRpb25hbCBQcm9wZXJ0eVwiLFxuICAgICAgICAgIHJhbmdlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja0Fzc2V0UmVwb3NpdG9yeS51cGRhdGVGcm9udG1hdHRlckJ5UGF0aC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmV4ZWN1dGUocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCB2YWxpZGF0ZSBudW1iZXIgcHJvcGVydGllc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0OiBVcGRhdGVQcm9wZXJ0eVJlcXVlc3QgPSB7XG4gICAgICAgIGFzc2V0SWQ6IFwidGVzdC1pZC5tZFwiLFxuICAgICAgICBwcm9wZXJ0eU5hbWU6IFwibnVtYmVyUHJvcFwiLFxuICAgICAgICB2YWx1ZTogXCJub3QtYS1udW1iZXJcIixcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcIm51bWJlclByb3BcIixcbiAgICAgICAgICBsYWJlbDogXCJOdW1iZXIgUHJvcGVydHlcIixcbiAgICAgICAgICByYW5nZTogXCJudW1iZXJcIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuZXhlY3V0ZShyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc0ZhaWx1cmUpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKFwiTnVtYmVyIFByb3BlcnR5IG11c3QgYmUgYSBudW1iZXJcIik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIHZhbGlkYXRlIHZhbGlkIG51bWJlcnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcInRlc3QtaWQubWRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcIm51bWJlclByb3BcIixcbiAgICAgICAgdmFsdWU6IFwiNDJcIixcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcIm51bWJlclByb3BcIixcbiAgICAgICAgICBsYWJlbDogXCJOdW1iZXIgUHJvcGVydHlcIixcbiAgICAgICAgICByYW5nZTogXCJudW1iZXJcIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tBc3NldFJlcG9zaXRvcnkudXBkYXRlRnJvbnRtYXR0ZXJCeVBhdGgubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgdmFsaWRhdGUgZGF0ZSBwcm9wZXJ0aWVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFVwZGF0ZVByb3BlcnR5UmVxdWVzdCA9IHtcbiAgICAgICAgYXNzZXRJZDogXCJ0ZXN0LWlkLm1kXCIsXG4gICAgICAgIHByb3BlcnR5TmFtZTogXCJkYXRlUHJvcFwiLFxuICAgICAgICB2YWx1ZTogXCJub3QtYS1kYXRlXCIsXG4gICAgICAgIHByb3BlcnR5RGVmaW5pdGlvbjoge1xuICAgICAgICAgIHByb3BlcnR5TmFtZTogXCJkYXRlUHJvcFwiLFxuICAgICAgICAgIGxhYmVsOiBcIkRhdGUgUHJvcGVydHlcIixcbiAgICAgICAgICByYW5nZTogXCJkYXRlXCIsXG4gICAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmV4ZWN1dGUocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNGYWlsdXJlKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZShcIkRhdGUgUHJvcGVydHkgbXVzdCBiZSBhIHZhbGlkIGRhdGVcIik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIHZhbGlkYXRlIHZhbGlkIGRhdGVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFVwZGF0ZVByb3BlcnR5UmVxdWVzdCA9IHtcbiAgICAgICAgYXNzZXRJZDogXCJ0ZXN0LWlkLm1kXCIsXG4gICAgICAgIHByb3BlcnR5TmFtZTogXCJkYXRlUHJvcFwiLFxuICAgICAgICB2YWx1ZTogXCIyMDI0LTEyLTMxXCIsXG4gICAgICAgIHByb3BlcnR5RGVmaW5pdGlvbjoge1xuICAgICAgICAgIHByb3BlcnR5TmFtZTogXCJkYXRlUHJvcFwiLFxuICAgICAgICAgIGxhYmVsOiBcIkRhdGUgUHJvcGVydHlcIixcbiAgICAgICAgICByYW5nZTogXCJkYXRlXCIsXG4gICAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrQXNzZXRSZXBvc2l0b3J5LnVwZGF0ZUZyb250bWF0dGVyQnlQYXRoLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuZXhlY3V0ZShyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIHZhbGlkYXRlIGJvb2xlYW4gcHJvcGVydGllc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0OiBVcGRhdGVQcm9wZXJ0eVJlcXVlc3QgPSB7XG4gICAgICAgIGFzc2V0SWQ6IFwidGVzdC1pZC5tZFwiLFxuICAgICAgICBwcm9wZXJ0eU5hbWU6IFwiYm9vbFByb3BcIixcbiAgICAgICAgdmFsdWU6IFwibm90LWEtYm9vbGVhblwiLFxuICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwiYm9vbFByb3BcIixcbiAgICAgICAgICBsYWJlbDogXCJCb29sZWFuIFByb3BlcnR5XCIsXG4gICAgICAgICAgcmFuZ2U6IFwiYm9vbGVhblwiLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzRmFpbHVyZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmUoXCJCb29sZWFuIFByb3BlcnR5IG11c3QgYmUgdHJ1ZSBvciBmYWxzZVwiKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgdmFsaWRhdGUgdmFsaWQgYm9vbGVhbnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdHJ1ZVJlcXVlc3Q6IFVwZGF0ZVByb3BlcnR5UmVxdWVzdCA9IHtcbiAgICAgICAgYXNzZXRJZDogXCJ0ZXN0LWlkLm1kXCIsXG4gICAgICAgIHByb3BlcnR5TmFtZTogXCJib29sUHJvcFwiLFxuICAgICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcImJvb2xQcm9wXCIsXG4gICAgICAgICAgbGFiZWw6IFwiQm9vbGVhbiBQcm9wZXJ0eVwiLFxuICAgICAgICAgIHJhbmdlOiBcImJvb2xlYW5cIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tBc3NldFJlcG9zaXRvcnkudXBkYXRlRnJvbnRtYXR0ZXJCeVBhdGgubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcblxuICAgICAgY29uc3QgdHJ1ZVJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuZXhlY3V0ZSh0cnVlUmVxdWVzdCk7XG4gICAgICBleHBlY3QodHJ1ZVJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG5cbiAgICAgIGNvbnN0IGZhbHNlUmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcInRlc3QtaWQubWRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcImJvb2xQcm9wXCIsXG4gICAgICAgIHZhbHVlOiBmYWxzZSxcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcImJvb2xQcm9wXCIsXG4gICAgICAgICAgbGFiZWw6IFwiQm9vbGVhbiBQcm9wZXJ0eVwiLFxuICAgICAgICAgIHJhbmdlOiBcImJvb2xlYW5cIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IGZhbHNlUmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKGZhbHNlUmVxdWVzdCk7XG4gICAgICBleHBlY3QoZmFsc2VSZXN1bHQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCB2YWxpZGF0ZSBlbnVtIHByb3BlcnRpZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcInRlc3QtaWQubWRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcImVudW1Qcm9wXCIsXG4gICAgICAgIHZhbHVlOiBcImludmFsaWRcIixcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcImVudW1Qcm9wXCIsXG4gICAgICAgICAgbGFiZWw6IFwiRW51bSBQcm9wZXJ0eVwiLFxuICAgICAgICAgIHJhbmdlOiBcImVudW06bG93LG1lZGl1bSxoaWdoXCIsXG4gICAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmV4ZWN1dGUocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNGYWlsdXJlKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZShcbiAgICAgICAgXCJFbnVtIFByb3BlcnR5IG11c3QgYmUgb25lIG9mOiBsb3csIG1lZGl1bSwgaGlnaFwiLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgdmFsaWRhdGUgdmFsaWQgZW51bSB2YWx1ZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcInRlc3QtaWQubWRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcImVudW1Qcm9wXCIsXG4gICAgICAgIHZhbHVlOiBcIm1lZGl1bVwiLFxuICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwiZW51bVByb3BcIixcbiAgICAgICAgICBsYWJlbDogXCJFbnVtIFByb3BlcnR5XCIsXG4gICAgICAgICAgcmFuZ2U6IFwiZW51bTpsb3csbWVkaXVtLGhpZ2hcIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tBc3NldFJlcG9zaXRvcnkudXBkYXRlRnJvbnRtYXR0ZXJCeVBhdGgubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgdmFsaWRhdGUgd2l0aCBjdXN0b20gcmVnZXhcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcInRlc3QtaWQubWRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcInJlZ2V4UHJvcFwiLFxuICAgICAgICB2YWx1ZTogXCJpbnZhbGlkLWZvcm1hdFwiLFxuICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwicmVnZXhQcm9wXCIsXG4gICAgICAgICAgbGFiZWw6IFwiUmVnZXggUHJvcGVydHlcIixcbiAgICAgICAgICByYW5nZTogXCJzdHJpbmdcIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICB2YWxpZGF0aW9uOiBcIl5bQS1aXXszfS1cXFxcZHszfSRcIixcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuZXhlY3V0ZShyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc0ZhaWx1cmUpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKFwiUmVnZXggUHJvcGVydHkgZm9ybWF0IGlzIGludmFsaWRcIik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIHBhc3MgY3VzdG9tIHJlZ2V4IHZhbGlkYXRpb25cIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcInRlc3QtaWQubWRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcInJlZ2V4UHJvcFwiLFxuICAgICAgICB2YWx1ZTogXCJBQkMtMTIzXCIsXG4gICAgICAgIHByb3BlcnR5RGVmaW5pdGlvbjoge1xuICAgICAgICAgIHByb3BlcnR5TmFtZTogXCJyZWdleFByb3BcIixcbiAgICAgICAgICBsYWJlbDogXCJSZWdleCBQcm9wZXJ0eVwiLFxuICAgICAgICAgIHJhbmdlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICAgIHZhbGlkYXRpb246IFwiXltBLVpdezN9LVxcXFxkezN9JFwiLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgbW9ja0Fzc2V0UmVwb3NpdG9yeS51cGRhdGVGcm9udG1hdHRlckJ5UGF0aC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmV4ZWN1dGUocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgaW52YWxpZCByZWdleCBncmFjZWZ1bGx5XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFVwZGF0ZVByb3BlcnR5UmVxdWVzdCA9IHtcbiAgICAgICAgYXNzZXRJZDogXCJ0ZXN0LWlkLm1kXCIsXG4gICAgICAgIHByb3BlcnR5TmFtZTogXCJyZWdleFByb3BcIixcbiAgICAgICAgdmFsdWU6IFwiYW55LXZhbHVlXCIsXG4gICAgICAgIHByb3BlcnR5RGVmaW5pdGlvbjoge1xuICAgICAgICAgIHByb3BlcnR5TmFtZTogXCJyZWdleFByb3BcIixcbiAgICAgICAgICBsYWJlbDogXCJSZWdleCBQcm9wZXJ0eVwiLFxuICAgICAgICAgIHJhbmdlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICAgIHZhbGlkYXRpb246IFwiW2ludmFsaWQtcmVnZXhcIixcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tBc3NldFJlcG9zaXRvcnkudXBkYXRlRnJvbnRtYXR0ZXJCeVBhdGgubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTsgLy8gU2hvdWxkIHNraXAgaW52YWxpZCByZWdleCB2YWxpZGF0aW9uXG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiRGlyZWN0IEZpbGUgUGF0aCBVcGRhdGVzXCIsICgpID0+IHtcbiAgICB0ZXN0KFwic2hvdWxkIHVzZSBkaXJlY3QgcGF0aCB1cGRhdGUgZm9yIGZpbGUgcGF0aHNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcInBhdGgvdG8vZmlsZS5tZFwiLFxuICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidGl0bGVcIixcbiAgICAgICAgdmFsdWU6IFwiTmV3IFRpdGxlXCIsXG4gICAgICAgIHByb3BlcnR5RGVmaW5pdGlvbjoge1xuICAgICAgICAgIHByb3BlcnR5TmFtZTogXCJ0aXRsZVwiLFxuICAgICAgICAgIGxhYmVsOiBcIlRpdGxlXCIsXG4gICAgICAgICAgcmFuZ2U6IFwic3RyaW5nXCIsXG4gICAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBtb2NrQXNzZXRSZXBvc2l0b3J5LnVwZGF0ZUZyb250bWF0dGVyQnlQYXRoLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuZXhlY3V0ZShyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QobW9ja0Fzc2V0UmVwb3NpdG9yeS51cGRhdGVGcm9udG1hdHRlckJ5UGF0aCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFwicGF0aC90by9maWxlLm1kXCIsXG4gICAgICAgIHsgdGl0bGU6IFwiTmV3IFRpdGxlXCIgfSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGhhbmRsZSBkaXJlY3QgdXBkYXRlIGVycm9yc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0OiBVcGRhdGVQcm9wZXJ0eVJlcXVlc3QgPSB7XG4gICAgICAgIGFzc2V0SWQ6IFwicGF0aC90by9maWxlLm1kXCIsXG4gICAgICAgIHByb3BlcnR5TmFtZTogXCJ0aXRsZVwiLFxuICAgICAgICB2YWx1ZTogXCJOZXcgVGl0bGVcIixcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcInRpdGxlXCIsXG4gICAgICAgICAgbGFiZWw6IFwiVGl0bGVcIixcbiAgICAgICAgICByYW5nZTogXCJzdHJpbmdcIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIG1vY2tBc3NldFJlcG9zaXRvcnkudXBkYXRlRnJvbnRtYXR0ZXJCeVBhdGgubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcihcIkZpbGUgbm90IGZvdW5kXCIpLFxuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzRmFpbHVyZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmUoXG4gICAgICAgIFwiRmFpbGVkIHRvIHVwZGF0ZSBwcm9wZXJ0eTogRXJyb3I6IEZpbGUgbm90IGZvdW5kXCIsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBkZXRlY3QgZmlsZSBwYXRocyBjb3JyZWN0bHlcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZmlsZVBhdGhzID0gW1xuICAgICAgICBcImZpbGUubWRcIixcbiAgICAgICAgXCJmb2xkZXIvZmlsZS5tZFwiLFxuICAgICAgICBcImRlZXAvbmVzdGVkL3BhdGgvZmlsZS5tZFwiLFxuICAgICAgICBcIi4uL3JlbGF0aXZlL3BhdGgubWRcIixcbiAgICAgICAgXCIuL2N1cnJlbnQvcGF0aC5tZFwiLFxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCBmaWxlUGF0aCBvZiBmaWxlUGF0aHMpIHtcbiAgICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICAgIGFzc2V0SWQ6IGZpbGVQYXRoLFxuICAgICAgICAgIHByb3BlcnR5TmFtZTogXCJ0ZXN0XCIsXG4gICAgICAgICAgdmFsdWU6IFwidmFsdWVcIixcbiAgICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZTogXCJ0ZXN0XCIsXG4gICAgICAgICAgICBsYWJlbDogXCJUZXN0XCIsXG4gICAgICAgICAgICByYW5nZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG5cbiAgICAgICAgbW9ja0Fzc2V0UmVwb3NpdG9yeS51cGRhdGVGcm9udG1hdHRlckJ5UGF0aC5tb2NrUmVzb2x2ZWRWYWx1ZShcbiAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICk7XG5cbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKHJlcXVlc3QpO1xuXG4gICAgICAgIGV4cGVjdChyZXN1bHQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgICBleHBlY3QoXG4gICAgICAgICAgbW9ja0Fzc2V0UmVwb3NpdG9yeS51cGRhdGVGcm9udG1hdHRlckJ5UGF0aCxcbiAgICAgICAgKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChmaWxlUGF0aCwgeyB0ZXN0OiBcInZhbHVlXCIgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGZhbGxiYWNrIHRvIEFzc2V0IElEIGxvb2t1cCB3aGVuIGRpcmVjdCB1cGRhdGUgbm90IGF2YWlsYWJsZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0OiBVcGRhdGVQcm9wZXJ0eVJlcXVlc3QgPSB7XG4gICAgICAgIGFzc2V0SWQ6IFwicGF0aC90by9maWxlLm1kXCIsXG4gICAgICAgIHByb3BlcnR5TmFtZTogXCJ0aXRsZVwiLFxuICAgICAgICB2YWx1ZTogXCJOZXcgVGl0bGVcIixcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcInRpdGxlXCIsXG4gICAgICAgICAgbGFiZWw6IFwiVGl0bGVcIixcbiAgICAgICAgICByYW5nZTogXCJzdHJpbmdcIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIC8vIE1vY2sgcmVwb3NpdG9yeSB3aXRob3V0IHVwZGF0ZUZyb250bWF0dGVyQnlQYXRoIG1ldGhvZFxuICAgICAgY29uc3QgcmVwb1dpdGhvdXREaXJlY3RVcGRhdGUgPSB7IC4uLm1vY2tBc3NldFJlcG9zaXRvcnkgfTtcbiAgICAgIGRlbGV0ZSAocmVwb1dpdGhvdXREaXJlY3RVcGRhdGUgYXMgYW55KS51cGRhdGVGcm9udG1hdHRlckJ5UGF0aDtcblxuICAgICAgY29uc3QgdXNlQ2FzZVdpdGhvdXREaXJlY3RVcGRhdGUgPSBuZXcgUHJvcGVydHlFZGl0aW5nVXNlQ2FzZShcbiAgICAgICAgcmVwb1dpdGhvdXREaXJlY3RVcGRhdGUsXG4gICAgICAgIG1vY2tQbHVnaW4sXG4gICAgICApO1xuXG4gICAgICAvLyBNb2NrIGFzc2V0IGNyZWF0aW9uIGFuZCByZXRyaWV2YWxcbiAgICAgIGNvbnN0IHZhbGlkVVVJRCA9IFwiMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwXCI7XG4gICAgICBjb25zdCBhc3NldElkUmVzdWx0ID0gQXNzZXRJZC5jcmVhdGUodmFsaWRVVUlEKTtcbiAgICAgIGNvbnN0IG1vY2tBc3NldCA9IHtcbiAgICAgICAgc2V0UHJvcGVydHk6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoUmVzdWx0Lm9rKCkpLFxuICAgICAgICBnZXRJZDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShhc3NldElkUmVzdWx0LmdldFZhbHVlKCkpLFxuICAgICAgfSBhcyBhbnk7XG5cbiAgICAgIHJlcG9XaXRob3V0RGlyZWN0VXBkYXRlLmZpbmRCeUZpbGVuYW1lLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tBc3NldCk7XG4gICAgICByZXBvV2l0aG91dERpcmVjdFVwZGF0ZS5zYXZlLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2VXaXRob3V0RGlyZWN0VXBkYXRlLmV4ZWN1dGUocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlcG9XaXRob3V0RGlyZWN0VXBkYXRlLmZpbmRCeUZpbGVuYW1lKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgXCJwYXRoL3RvL2ZpbGUubWRcIixcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja0Fzc2V0LnNldFByb3BlcnR5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcInRpdGxlXCIsIFwiTmV3IFRpdGxlXCIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIkFzc2V0IElEIEJhc2VkIFVwZGF0ZXNcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJzaG91bGQgdXBkYXRlIGFzc2V0IGJ5IFVVSURcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWRVVUlEID0gXCIxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDBcIjtcbiAgICAgIGNvbnN0IGFzc2V0SWRSZXN1bHQgPSBBc3NldElkLmNyZWF0ZSh2YWxpZFVVSUQpO1xuICAgICAgY29uc3QgbW9ja0Fzc2V0ID0ge1xuICAgICAgICBzZXRQcm9wZXJ0eTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShSZXN1bHQub2soKSksXG4gICAgICAgIGdldElkOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKGFzc2V0SWRSZXN1bHQuZ2V0VmFsdWUoKSksXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgbW9ja0Fzc2V0UmVwb3NpdG9yeS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQXNzZXQpO1xuICAgICAgbW9ja0Fzc2V0UmVwb3NpdG9yeS5zYXZlLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFVwZGF0ZVByb3BlcnR5UmVxdWVzdCA9IHtcbiAgICAgICAgYXNzZXRJZDogdmFsaWRVVUlELFxuICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidGl0bGVcIixcbiAgICAgICAgdmFsdWU6IFwiTmV3IFRpdGxlXCIsXG4gICAgICAgIHByb3BlcnR5RGVmaW5pdGlvbjoge1xuICAgICAgICAgIHByb3BlcnR5TmFtZTogXCJ0aXRsZVwiLFxuICAgICAgICAgIGxhYmVsOiBcIlRpdGxlXCIsXG4gICAgICAgICAgcmFuZ2U6IFwic3RyaW5nXCIsXG4gICAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmV4ZWN1dGUocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KG1vY2tBc3NldFJlcG9zaXRvcnkuZmluZEJ5SWQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrQXNzZXQuc2V0UHJvcGVydHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwidGl0bGVcIiwgXCJOZXcgVGl0bGVcIik7XG4gICAgICBleHBlY3QobW9ja0Fzc2V0UmVwb3NpdG9yeS5zYXZlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtb2NrQXNzZXQpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBmYWxsYmFjayB0byBmaWxlbmFtZSBsb29rdXAgd2hlbiBVVUlEIGxvb2t1cCBmYWlsc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB2YWxpZFVVSUQgPSBcIjEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMFwiO1xuICAgICAgY29uc3QgYXNzZXRJZFJlc3VsdCA9IEFzc2V0SWQuY3JlYXRlKHZhbGlkVVVJRCk7XG4gICAgICBjb25zdCBtb2NrQXNzZXQgPSB7XG4gICAgICAgIHNldFByb3BlcnR5OiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKFJlc3VsdC5vaygpKSxcbiAgICAgICAgZ2V0SWQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoYXNzZXRJZFJlc3VsdC5nZXRWYWx1ZSgpKSxcbiAgICAgIH0gYXMgYW55O1xuXG4gICAgICBtb2NrQXNzZXRSZXBvc2l0b3J5LmZpbmRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuICAgICAgbW9ja0Fzc2V0UmVwb3NpdG9yeS5maW5kQnlGaWxlbmFtZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQXNzZXQpO1xuICAgICAgbW9ja0Fzc2V0UmVwb3NpdG9yeS5zYXZlLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFVwZGF0ZVByb3BlcnR5UmVxdWVzdCA9IHtcbiAgICAgICAgYXNzZXRJZDogXCJpbnZhbGlkLXV1aWRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcInRpdGxlXCIsXG4gICAgICAgIHZhbHVlOiBcIk5ldyBUaXRsZVwiLFxuICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidGl0bGVcIixcbiAgICAgICAgICBsYWJlbDogXCJUaXRsZVwiLFxuICAgICAgICAgIHJhbmdlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2NrQXNzZXRSZXBvc2l0b3J5LmZpbmRCeUZpbGVuYW1lKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgXCJpbnZhbGlkLXV1aWRcIixcbiAgICAgICk7XG4gICAgICBleHBlY3QobW9ja0Fzc2V0LnNldFByb3BlcnR5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcInRpdGxlXCIsIFwiTmV3IFRpdGxlXCIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBmYWlsIHdoZW4gYXNzZXQgbm90IGZvdW5kIGJ5IElEIG9yIGZpbGVuYW1lXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tBc3NldFJlcG9zaXRvcnkuZmluZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUobnVsbCk7XG4gICAgICBtb2NrQXNzZXRSZXBvc2l0b3J5LmZpbmRCeUZpbGVuYW1lLm1vY2tSZXNvbHZlZFZhbHVlKG51bGwpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0OiBVcGRhdGVQcm9wZXJ0eVJlcXVlc3QgPSB7XG4gICAgICAgIGFzc2V0SWQ6IFwibm9uZXhpc3RlbnRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcInRpdGxlXCIsXG4gICAgICAgIHZhbHVlOiBcIk5ldyBUaXRsZVwiLFxuICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidGl0bGVcIixcbiAgICAgICAgICBsYWJlbDogXCJUaXRsZVwiLFxuICAgICAgICAgIHJhbmdlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzRmFpbHVyZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmUoXCJBc3NldCBub3QgZm91bmQ6IG5vbmV4aXN0ZW50XCIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgcmVwb3NpdG9yeSBlcnJvcnMgZHVyaW5nIGFzc2V0IGxvb2t1cFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQXNzZXRSZXBvc2l0b3J5LmZpbmRCeUlkLm1vY2tSZWplY3RlZFZhbHVlKFxuICAgICAgICBuZXcgRXJyb3IoXCJEYXRhYmFzZSBlcnJvclwiKSxcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IHZhbGlkVVVJRCA9IFwiMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwXCI7XG4gICAgICBjb25zdCByZXF1ZXN0OiBVcGRhdGVQcm9wZXJ0eVJlcXVlc3QgPSB7XG4gICAgICAgIGFzc2V0SWQ6IHZhbGlkVVVJRCxcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcInRpdGxlXCIsXG4gICAgICAgIHZhbHVlOiBcIk5ldyBUaXRsZVwiLFxuICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidGl0bGVcIixcbiAgICAgICAgICBsYWJlbDogXCJUaXRsZVwiLFxuICAgICAgICAgIHJhbmdlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzRmFpbHVyZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmUoXG4gICAgICAgIFwiRmFpbGVkIHRvIHVwZGF0ZSBwcm9wZXJ0eTogRXJyb3I6IERhdGFiYXNlIGVycm9yXCIsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgc2F2ZSBlcnJvcnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdmFsaWRVVUlEID0gXCIxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDBcIjtcbiAgICAgIGNvbnN0IGFzc2V0SWRSZXN1bHQgPSBBc3NldElkLmNyZWF0ZSh2YWxpZFVVSUQpO1xuICAgICAgY29uc3QgbW9ja0Fzc2V0ID0ge1xuICAgICAgICBzZXRQcm9wZXJ0eTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShSZXN1bHQub2soKSksXG4gICAgICAgIGdldElkOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKGFzc2V0SWRSZXN1bHQuZ2V0VmFsdWUoKSksXG4gICAgICB9IGFzIGFueTtcblxuICAgICAgbW9ja0Fzc2V0UmVwb3NpdG9yeS5maW5kQnlGaWxlbmFtZS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQXNzZXQpO1xuICAgICAgbW9ja0Fzc2V0UmVwb3NpdG9yeS5zYXZlLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcihcIlNhdmUgZmFpbGVkXCIpKTtcblxuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcInRlc3QtYXNzZXRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcInRpdGxlXCIsXG4gICAgICAgIHZhbHVlOiBcIk5ldyBUaXRsZVwiLFxuICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidGl0bGVcIixcbiAgICAgICAgICBsYWJlbDogXCJUaXRsZVwiLFxuICAgICAgICAgIHJhbmdlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzRmFpbHVyZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQmUoXG4gICAgICAgIFwiRmFpbGVkIHRvIHVwZGF0ZSBwcm9wZXJ0eTogRXJyb3I6IFNhdmUgZmFpbGVkXCIsXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIlByb3BlcnR5IFZhbHVlIFR5cGVzXCIsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIG1vY2tBc3NldFJlcG9zaXRvcnkudXBkYXRlRnJvbnRtYXR0ZXJCeVBhdGgubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgaGFuZGxlIHN0cmluZyB2YWx1ZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcInRlc3QubWRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcImRlc2NyaXB0aW9uXCIsXG4gICAgICAgIHZhbHVlOiBcIlRoaXMgaXMgYSBkZXNjcmlwdGlvblwiLFxuICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwiZGVzY3JpcHRpb25cIixcbiAgICAgICAgICBsYWJlbDogXCJEZXNjcmlwdGlvblwiLFxuICAgICAgICAgIHJhbmdlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZ2V0VmFsdWUoKS51cGRhdGVkVmFsdWUpLnRvQmUoXCJUaGlzIGlzIGEgZGVzY3JpcHRpb25cIik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGhhbmRsZSBudW1lcmljIHZhbHVlc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0OiBVcGRhdGVQcm9wZXJ0eVJlcXVlc3QgPSB7XG4gICAgICAgIGFzc2V0SWQ6IFwidGVzdC5tZFwiLFxuICAgICAgICBwcm9wZXJ0eU5hbWU6IFwiY291bnRcIixcbiAgICAgICAgdmFsdWU6IDQyLFxuICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwiY291bnRcIixcbiAgICAgICAgICBsYWJlbDogXCJDb3VudFwiLFxuICAgICAgICAgIHJhbmdlOiBcIm51bWJlclwiLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZ2V0VmFsdWUoKS51cGRhdGVkVmFsdWUpLnRvQmUoNDIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgYm9vbGVhbiB2YWx1ZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcInRlc3QubWRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcImFjdGl2ZVwiLFxuICAgICAgICB2YWx1ZTogdHJ1ZSxcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcImFjdGl2ZVwiLFxuICAgICAgICAgIGxhYmVsOiBcIkFjdGl2ZVwiLFxuICAgICAgICAgIHJhbmdlOiBcImJvb2xlYW5cIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuZXhlY3V0ZShyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmdldFZhbHVlKCkudXBkYXRlZFZhbHVlKS50b0JlKHRydWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgYXJyYXkgdmFsdWVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFycmF5VmFsdWUgPSBbXCJpdGVtMVwiLCBcIml0ZW0yXCIsIFwiaXRlbTNcIl07XG4gICAgICBjb25zdCByZXF1ZXN0OiBVcGRhdGVQcm9wZXJ0eVJlcXVlc3QgPSB7XG4gICAgICAgIGFzc2V0SWQ6IFwidGVzdC5tZFwiLFxuICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidGFnc1wiLFxuICAgICAgICB2YWx1ZTogYXJyYXlWYWx1ZSxcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcInRhZ3NcIixcbiAgICAgICAgICBsYWJlbDogXCJUYWdzXCIsXG4gICAgICAgICAgcmFuZ2U6IFwiYXJyYXlcIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuZXhlY3V0ZShyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmdldFZhbHVlKCkudXBkYXRlZFZhbHVlKS50b0VxdWFsKGFycmF5VmFsdWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgb2JqZWN0IHZhbHVlc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBvYmplY3RWYWx1ZSA9IHsgbmVzdGVkOiBcInZhbHVlXCIsIGNvdW50OiA1IH07XG4gICAgICBjb25zdCByZXF1ZXN0OiBVcGRhdGVQcm9wZXJ0eVJlcXVlc3QgPSB7XG4gICAgICAgIGFzc2V0SWQ6IFwidGVzdC5tZFwiLFxuICAgICAgICBwcm9wZXJ0eU5hbWU6IFwibWV0YWRhdGFcIixcbiAgICAgICAgdmFsdWU6IG9iamVjdFZhbHVlLFxuICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwibWV0YWRhdGFcIixcbiAgICAgICAgICBsYWJlbDogXCJNZXRhZGF0YVwiLFxuICAgICAgICAgIHJhbmdlOiBcIm9iamVjdFwiLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZ2V0VmFsdWUoKS51cGRhdGVkVmFsdWUpLnRvRXF1YWwob2JqZWN0VmFsdWUpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgbnVsbCB2YWx1ZXMgZm9yIG5vbi1yZXF1aXJlZCBwcm9wZXJ0aWVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFVwZGF0ZVByb3BlcnR5UmVxdWVzdCA9IHtcbiAgICAgICAgYXNzZXRJZDogXCJ0ZXN0Lm1kXCIsXG4gICAgICAgIHByb3BlcnR5TmFtZTogXCJvcHRpb25hbFwiLFxuICAgICAgICB2YWx1ZTogbnVsbCxcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcIm9wdGlvbmFsXCIsXG4gICAgICAgICAgbGFiZWw6IFwiT3B0aW9uYWxcIixcbiAgICAgICAgICByYW5nZTogXCJzdHJpbmdcIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuZXhlY3V0ZShyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmdldFZhbHVlKCkudXBkYXRlZFZhbHVlKS50b0JlTnVsbCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgdW5kZWZpbmVkIHZhbHVlcyBmb3Igbm9uLXJlcXVpcmVkIHByb3BlcnRpZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcInRlc3QubWRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcIm9wdGlvbmFsXCIsXG4gICAgICAgIHZhbHVlOiB1bmRlZmluZWQsXG4gICAgICAgIHByb3BlcnR5RGVmaW5pdGlvbjoge1xuICAgICAgICAgIHByb3BlcnR5TmFtZTogXCJvcHRpb25hbFwiLFxuICAgICAgICAgIGxhYmVsOiBcIk9wdGlvbmFsXCIsXG4gICAgICAgICAgcmFuZ2U6IFwic3RyaW5nXCIsXG4gICAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmV4ZWN1dGUocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5nZXRWYWx1ZSgpLnVwZGF0ZWRWYWx1ZSkudG9CZVVuZGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIlBsdWdpbiBJbnRlZ3JhdGlvblwiLCAoKSA9PiB7XG4gICAgdGVzdChcInNob3VsZCBnZXQgcHJvcGVydGllcyBmb3IgY2xhc3MgdGhyb3VnaCBwbHVnaW5cIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Byb3BlcnRpZXMgPSBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiBcInRpdGxlXCIsXG4gICAgICAgICAgbGFiZWw6IFwiVGl0bGVcIixcbiAgICAgICAgICByYW5nZTogXCJzdHJpbmdcIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogXCJkZXNjcmlwdGlvblwiLFxuICAgICAgICAgIGxhYmVsOiBcIkRlc2NyaXB0aW9uXCIsXG4gICAgICAgICAgcmFuZ2U6IFwidGV4dFwiLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgXTtcblxuICAgICAgbW9ja1BsdWdpbi5maW5kUHJvcGVydGllc0ZvckNsYXNzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tQcm9wZXJ0aWVzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5nZXRQcm9wZXJ0aWVzRm9yQ2xhc3MoXCJleG9fX1Rhc2tcIik7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5nZXRWYWx1ZSgpKS50b0VxdWFsKG1vY2tQcm9wZXJ0aWVzKTtcbiAgICAgIGV4cGVjdChtb2NrUGx1Z2luLmZpbmRQcm9wZXJ0aWVzRm9yQ2xhc3MpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBcImV4b19fVGFza1wiLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgaGFuZGxlIHBsdWdpbiBlcnJvcnMgd2hlbiBnZXR0aW5nIHByb3BlcnRpZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1BsdWdpbi5maW5kUHJvcGVydGllc0ZvckNsYXNzLm1vY2tSZWplY3RlZFZhbHVlKFxuICAgICAgICBuZXcgRXJyb3IoXCJQbHVnaW4gZXJyb3JcIiksXG4gICAgICApO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmdldFByb3BlcnRpZXNGb3JDbGFzcyhcImV4b19fVGFza1wiKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc0ZhaWx1cmUpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKFwiRmFpbGVkIHRvIGdldCBwcm9wZXJ0aWVzOiBQbHVnaW4gZXJyb3JcIik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGdldCBhc3NldHMgZm9yIGNsYXNzIHRocm91Z2ggcGx1Z2luXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tBc3NldHMgPSBbXG4gICAgICAgIHsgaWQ6IFwiMVwiLCB0aXRsZTogXCJBc3NldCAxXCIgfSxcbiAgICAgICAgeyBpZDogXCIyXCIsIHRpdGxlOiBcIkFzc2V0IDJcIiB9LFxuICAgICAgXTtcblxuICAgICAgbW9ja1BsdWdpbi5maW5kQXNzZXRzQnlDbGFzcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQXNzZXRzKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5nZXRBc3NldHNGb3JDbGFzcyhcImV4b19fVGFza1wiKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmdldFZhbHVlKCkpLnRvRXF1YWwobW9ja0Fzc2V0cyk7XG4gICAgICBleHBlY3QobW9ja1BsdWdpbi5maW5kQXNzZXRzQnlDbGFzcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFwiZXhvX19UYXNrXCIsXG4gICAgICAgIHRydWUsXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgcGx1Z2luIGVycm9ycyB3aGVuIGdldHRpbmcgYXNzZXRzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tQbHVnaW4uZmluZEFzc2V0c0J5Q2xhc3MubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKFwiUGx1Z2luIGVycm9yXCIpKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5nZXRBc3NldHNGb3JDbGFzcyhcImV4b19fVGFza1wiKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc0ZhaWx1cmUpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmVycm9yKS50b0JlKFwiRmFpbGVkIHRvIGdldCBhc3NldHM6IFBsdWdpbiBlcnJvclwiKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgcGFzcyBjb3JyZWN0IHBhcmFtZXRlcnMgdG8gcGx1Z2luIG1ldGhvZHNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja1BsdWdpbi5maW5kUHJvcGVydGllc0ZvckNsYXNzLm1vY2tSZXNvbHZlZFZhbHVlKFtdKTtcbiAgICAgIG1vY2tQbHVnaW4uZmluZEFzc2V0c0J5Q2xhc3MubW9ja1Jlc29sdmVkVmFsdWUoW10pO1xuXG4gICAgICBhd2FpdCB1c2VDYXNlLmdldFByb3BlcnRpZXNGb3JDbGFzcyhcImN1c3RvbV9fQ2xhc3NcIik7XG4gICAgICBhd2FpdCB1c2VDYXNlLmdldEFzc2V0c0ZvckNsYXNzKFwiY3VzdG9tX19DbGFzc1wiKTtcblxuICAgICAgZXhwZWN0KG1vY2tQbHVnaW4uZmluZFByb3BlcnRpZXNGb3JDbGFzcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIFwiY3VzdG9tX19DbGFzc1wiLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChtb2NrUGx1Z2luLmZpbmRBc3NldHNCeUNsYXNzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgXCJjdXN0b21fX0NsYXNzXCIsXG4gICAgICAgIHRydWUsXG4gICAgICApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIlJlc3BvbnNlIFN0cnVjdHVyZVwiLCAoKSA9PiB7XG4gICAgdGVzdChcInNob3VsZCByZXR1cm4gY29ycmVjdCBzdWNjZXNzIHJlc3BvbnNlIHN0cnVjdHVyZVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQXNzZXRSZXBvc2l0b3J5LnVwZGF0ZUZyb250bWF0dGVyQnlQYXRoLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFVwZGF0ZVByb3BlcnR5UmVxdWVzdCA9IHtcbiAgICAgICAgYXNzZXRJZDogXCJ0ZXN0Lm1kXCIsXG4gICAgICAgIHByb3BlcnR5TmFtZTogXCJ0aXRsZVwiLFxuICAgICAgICB2YWx1ZTogXCJOZXcgVGl0bGVcIixcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcInRpdGxlXCIsXG4gICAgICAgICAgbGFiZWw6IFwiVGl0bGVcIixcbiAgICAgICAgICByYW5nZTogXCJzdHJpbmdcIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuZXhlY3V0ZShyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmdldFZhbHVlKCkpLnRvRXF1YWwoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICB1cGRhdGVkVmFsdWU6IFwiTmV3IFRpdGxlXCIsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgcmV0dXJuIGNvcnJlY3QgZmFpbHVyZSByZXNwb25zZSBzdHJ1Y3R1cmVcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcIlwiLFxuICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidGl0bGVcIixcbiAgICAgICAgdmFsdWU6IFwiTmV3IFRpdGxlXCIsXG4gICAgICAgIHByb3BlcnR5RGVmaW5pdGlvbjoge1xuICAgICAgICAgIHByb3BlcnR5TmFtZTogXCJ0aXRsZVwiLFxuICAgICAgICAgIGxhYmVsOiBcIlRpdGxlXCIsXG4gICAgICAgICAgcmFuZ2U6IFwic3RyaW5nXCIsXG4gICAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmV4ZWN1dGUocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNGYWlsdXJlKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5lcnJvcikudG9CZShcIkFzc2V0IElEIGlzIHJlcXVpcmVkXCIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBwcmVzZXJ2ZSBvcmlnaW5hbCB2YWx1ZSBpbiBzdWNjZXNzIHJlc3BvbnNlXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tBc3NldFJlcG9zaXRvcnkudXBkYXRlRnJvbnRtYXR0ZXJCeVBhdGgubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcblxuICAgICAgY29uc3QgY29tcGxleFZhbHVlID0ge1xuICAgICAgICBuZXN0ZWQ6IHtcbiAgICAgICAgICBhcnJheTogWzEsIDIsIDNdLFxuICAgICAgICAgIHN0cmluZzogXCJ0ZXN0XCIsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXF1ZXN0OiBVcGRhdGVQcm9wZXJ0eVJlcXVlc3QgPSB7XG4gICAgICAgIGFzc2V0SWQ6IFwidGVzdC5tZFwiLFxuICAgICAgICBwcm9wZXJ0eU5hbWU6IFwibWV0YWRhdGFcIixcbiAgICAgICAgdmFsdWU6IGNvbXBsZXhWYWx1ZSxcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcIm1ldGFkYXRhXCIsXG4gICAgICAgICAgbGFiZWw6IFwiTWV0YWRhdGFcIixcbiAgICAgICAgICByYW5nZTogXCJvYmplY3RcIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuZXhlY3V0ZShyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzdWx0LmdldFZhbHVlKCkudXBkYXRlZFZhbHVlKS50b0VxdWFsKGNvbXBsZXhWYWx1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiRWRnZSBDYXNlcyBhbmQgRXJyb3IgSGFuZGxpbmdcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJzaG91bGQgaGFuZGxlIGV4dHJlbWVseSBsYXJnZSBwcm9wZXJ0eSB2YWx1ZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0Fzc2V0UmVwb3NpdG9yeS51cGRhdGVGcm9udG1hdHRlckJ5UGF0aC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuXG4gICAgICAvLyBSZWR1Y2Ugc2l6ZSBmb3IgQ0kgbWVtb3J5IGVmZmljaWVuY3lcbiAgICAgIGNvbnN0IGxhcmdlU2l6ZSA9IHByb2Nlc3MuZW52LkNJID8gMTAwMDAgOiA1MDAwMDtcbiAgICAgIGNvbnN0IGxhcmdlVmFsdWUgPSBcIkFcIi5yZXBlYXQobGFyZ2VTaXplKTtcbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFVwZGF0ZVByb3BlcnR5UmVxdWVzdCA9IHtcbiAgICAgICAgYXNzZXRJZDogXCJ0ZXN0Lm1kXCIsXG4gICAgICAgIHByb3BlcnR5TmFtZTogXCJsYXJnZUZpZWxkXCIsXG4gICAgICAgIHZhbHVlOiBsYXJnZVZhbHVlLFxuICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwibGFyZ2VGaWVsZFwiLFxuICAgICAgICAgIGxhYmVsOiBcIkxhcmdlIEZpZWxkXCIsXG4gICAgICAgICAgcmFuZ2U6IFwic3RyaW5nXCIsXG4gICAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmV4ZWN1dGUocmVxdWVzdCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQuaXNTdWNjZXNzKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3VsdC5nZXRWYWx1ZSgpLnVwZGF0ZWRWYWx1ZSkudG9CZShsYXJnZVZhbHVlKTtcblxuICAgICAgLy8gQ2xlYXIgbGFyZ2Ugc3RyaW5nIHJlZmVyZW5jZVxuICAgICAgcmVxdWVzdC52YWx1ZSA9IG51bGw7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGhhbmRsZSBzcGVjaWFsIGNoYXJhY3RlcnMgaW4gcHJvcGVydHkgbmFtZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0Fzc2V0UmVwb3NpdG9yeS51cGRhdGVGcm9udG1hdHRlckJ5UGF0aC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuXG4gICAgICBjb25zdCBzcGVjaWFsUHJvcE5hbWUgPSBcInByb3Atd2l0aC1zcGVjaWFsX2NoYXJzJDEyM1wiO1xuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcInRlc3QubWRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBzcGVjaWFsUHJvcE5hbWUsXG4gICAgICAgIHZhbHVlOiBcInRlc3QgdmFsdWVcIixcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBzcGVjaWFsUHJvcE5hbWUsXG4gICAgICAgICAgbGFiZWw6IFwiU3BlY2lhbCBQcm9wZXJ0eVwiLFxuICAgICAgICAgIHJhbmdlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgaGFuZGxlIGNpcmN1bGFyIHJlZmVyZW5jZXMgaW4gb2JqZWN0IHZhbHVlc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQXNzZXRSZXBvc2l0b3J5LnVwZGF0ZUZyb250bWF0dGVyQnlQYXRoLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGNvbnN0IG9iajE6IGFueSA9IHsgbmFtZTogXCJvYmoxXCIgfTtcbiAgICAgIGNvbnN0IG9iajI6IGFueSA9IHsgbmFtZTogXCJvYmoyXCIsIHJlZjogb2JqMSB9O1xuICAgICAgb2JqMS5yZWYgPSBvYmoyOyAvLyBDcmVhdGUgY2lyY3VsYXIgcmVmZXJlbmNlXG5cbiAgICAgIGNvbnN0IHJlcXVlc3Q6IFVwZGF0ZVByb3BlcnR5UmVxdWVzdCA9IHtcbiAgICAgICAgYXNzZXRJZDogXCJ0ZXN0Lm1kXCIsXG4gICAgICAgIHByb3BlcnR5TmFtZTogXCJjaXJjdWxhclwiLFxuICAgICAgICB2YWx1ZTogb2JqMSxcbiAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcImNpcmN1bGFyXCIsXG4gICAgICAgICAgbGFiZWw6IFwiQ2lyY3VsYXJcIixcbiAgICAgICAgICByYW5nZTogXCJvYmplY3RcIixcbiAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuZXhlY3V0ZShyZXF1ZXN0KTtcblxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGhhbmRsZSBjb25jdXJyZW50IHVwZGF0ZXMgZ3JhY2VmdWxseVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQXNzZXRSZXBvc2l0b3J5LnVwZGF0ZUZyb250bWF0dGVyQnlQYXRoLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGNvbnN0IGNvbmN1cnJlbnRDb3VudCA9IHByb2Nlc3MuZW52LkNJID8gNSA6IDEwOyAvLyBSZWR1Y2UgZm9yIENJXG4gICAgICBjb25zdCByZXF1ZXN0cyA9IEFycmF5KGNvbmN1cnJlbnRDb3VudClcbiAgICAgICAgLmZpbGwobnVsbClcbiAgICAgICAgLm1hcCgoXywgaSkgPT4gKHtcbiAgICAgICAgICBhc3NldElkOiBgdGVzdCR7aX0ubWRgLFxuICAgICAgICAgIHByb3BlcnR5TmFtZTogXCJ0aXRsZVwiLFxuICAgICAgICAgIHZhbHVlOiBgVGl0bGUgJHtpfWAsXG4gICAgICAgICAgcHJvcGVydHlEZWZpbml0aW9uOiB7XG4gICAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidGl0bGVcIixcbiAgICAgICAgICAgIGxhYmVsOiBcIlRpdGxlXCIsXG4gICAgICAgICAgICByYW5nZTogXCJzdHJpbmdcIixcbiAgICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pKTtcblxuICAgICAgY29uc3QgcHJvbWlzZXMgPSByZXF1ZXN0cy5tYXAoKHJlcSkgPT4gdXNlQ2FzZS5leGVjdXRlKHJlcSkpO1xuICAgICAgY29uc3QgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHByb21pc2VzKTtcblxuICAgICAgcmVzdWx0cy5mb3JFYWNoKChyZXN1bHQsIGkpID0+IHtcbiAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1N1Y2Nlc3MpLnRvQmUodHJ1ZSk7XG4gICAgICAgIGV4cGVjdChyZXN1bHQuZ2V0VmFsdWUoKS51cGRhdGVkVmFsdWUpLnRvQmUoYFRpdGxlICR7aX1gKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDbGVhciByZWZlcmVuY2VzXG4gICAgICByZXF1ZXN0cy5sZW5ndGggPSAwO1xuICAgICAgcHJvbWlzZXMubGVuZ3RoID0gMDtcbiAgICAgIHJlc3VsdHMubGVuZ3RoID0gMDtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgaGFuZGxlIHRpbWVvdXQgc2NlbmFyaW9zXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tBc3NldFJlcG9zaXRvcnkudXBkYXRlRnJvbnRtYXR0ZXJCeVBhdGgubW9ja0ltcGxlbWVudGF0aW9uKFxuICAgICAgICAoKSA9PlxuICAgICAgICAgIG5ldyBQcm9taXNlKChfLCByZWplY3QpID0+XG4gICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHJlamVjdChuZXcgRXJyb3IoXCJUaW1lb3V0XCIpKSwgMTAwKSxcbiAgICAgICAgICApLFxuICAgICAgKTtcblxuICAgICAgY29uc3QgcmVxdWVzdDogVXBkYXRlUHJvcGVydHlSZXF1ZXN0ID0ge1xuICAgICAgICBhc3NldElkOiBcInRlc3QubWRcIixcbiAgICAgICAgcHJvcGVydHlOYW1lOiBcInRpdGxlXCIsXG4gICAgICAgIHZhbHVlOiBcIk5ldyBUaXRsZVwiLFxuICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidGl0bGVcIixcbiAgICAgICAgICBsYWJlbDogXCJUaXRsZVwiLFxuICAgICAgICAgIHJhbmdlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leGVjdXRlKHJlcXVlc3QpO1xuXG4gICAgICBleHBlY3QocmVzdWx0LmlzRmFpbHVyZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3IpLnRvQ29udGFpbihcIlRpbWVvdXRcIik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGhhbmRsZSBtYWxmb3JtZWQgcHJvcGVydHkgZGVmaW5pdGlvbnNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0Fzc2V0UmVwb3NpdG9yeS51cGRhdGVGcm9udG1hdHRlckJ5UGF0aC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0OiBVcGRhdGVQcm9wZXJ0eVJlcXVlc3QgPSB7XG4gICAgICAgIGFzc2V0SWQ6IFwidGVzdC5tZFwiLFxuICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidGVzdFwiLFxuICAgICAgICB2YWx1ZTogXCJ2YWx1ZVwiLFxuICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidGVzdFwiLFxuICAgICAgICAgIGxhYmVsOiBudWxsIGFzIGFueSxcbiAgICAgICAgICByYW5nZTogdW5kZWZpbmVkIGFzIGFueSxcbiAgICAgICAgICBpc1JlcXVpcmVkOiBudWxsIGFzIGFueSxcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuZXhlY3V0ZShyZXF1ZXN0KTtcblxuICAgICAgLy8gU2hvdWxkIGhhbmRsZSBncmFjZWZ1bGx5IGFuZCBzdWNjZWVkXG4gICAgICBleHBlY3QocmVzdWx0LmlzU3VjY2VzcykudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJQZXJmb3JtYW5jZSBUZXN0c1wiLCAoKSA9PiB7XG4gICAgdGVzdChcInNob3VsZCBjb21wbGV0ZSBwcm9wZXJ0eSB1cGRhdGVzIHdpdGhpbiByZWFzb25hYmxlIHRpbWVcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0Fzc2V0UmVwb3NpdG9yeS51cGRhdGVGcm9udG1hdHRlckJ5UGF0aC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuXG4gICAgICBjb25zdCBzdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgICBjb25zdCByZXF1ZXN0OiBVcGRhdGVQcm9wZXJ0eVJlcXVlc3QgPSB7XG4gICAgICAgIGFzc2V0SWQ6IFwidGVzdC5tZFwiLFxuICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidGl0bGVcIixcbiAgICAgICAgdmFsdWU6IFwiTmV3IFRpdGxlXCIsXG4gICAgICAgIHByb3BlcnR5RGVmaW5pdGlvbjoge1xuICAgICAgICAgIHByb3BlcnR5TmFtZTogXCJ0aXRsZVwiLFxuICAgICAgICAgIGxhYmVsOiBcIlRpdGxlXCIsXG4gICAgICAgICAgcmFuZ2U6IFwic3RyaW5nXCIsXG4gICAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICBhd2FpdCB1c2VDYXNlLmV4ZWN1dGUocmVxdWVzdCk7XG5cbiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgY29uc3QgZHVyYXRpb24gPSBlbmRUaW1lIC0gc3RhcnRUaW1lO1xuXG4gICAgICBleHBlY3QoZHVyYXRpb24pLnRvQmVMZXNzVGhhbigxMDApOyAvLyBTaG91bGQgY29tcGxldGUgd2l0aGluIDEwMG1zXG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGhhbmRsZSBiYXRjaCB1cGRhdGVzIGVmZmljaWVudGx5XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tBc3NldFJlcG9zaXRvcnkudXBkYXRlRnJvbnRtYXR0ZXJCeVBhdGgubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcblxuICAgICAgY29uc3Qgc3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IGJhdGNoU2l6ZSA9IHByb2Nlc3MuZW52LkNJID8gMTAgOiAyNTsgLy8gUmVkdWNlIGJhdGNoIHNpemUgZm9yIENJXG5cbiAgICAgIGNvbnN0IHJlcXVlc3RzID0gQXJyYXkoYmF0Y2hTaXplKVxuICAgICAgICAuZmlsbChudWxsKVxuICAgICAgICAubWFwKChfLCBpKSA9PiAoe1xuICAgICAgICAgIGFzc2V0SWQ6IGB0ZXN0JHtpfS5tZGAsXG4gICAgICAgICAgcHJvcGVydHlOYW1lOiBcInRpdGxlXCIsXG4gICAgICAgICAgdmFsdWU6IGBUaXRsZSAke2l9YCxcbiAgICAgICAgICBwcm9wZXJ0eURlZmluaXRpb246IHtcbiAgICAgICAgICAgIHByb3BlcnR5TmFtZTogXCJ0aXRsZVwiLFxuICAgICAgICAgICAgbGFiZWw6IFwiVGl0bGVcIixcbiAgICAgICAgICAgIHJhbmdlOiBcInN0cmluZ1wiLFxuICAgICAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSkpO1xuXG4gICAgICBjb25zdCBwcm9taXNlcyA9IHJlcXVlc3RzLm1hcCgocmVxKSA9PiB1c2VDYXNlLmV4ZWN1dGUocmVxKSk7XG4gICAgICBhd2FpdCBQcm9taXNlLmFsbChwcm9taXNlcyk7XG5cbiAgICAgIC8vIENsZWFyIHJlZmVyZW5jZXNcbiAgICAgIHJlcXVlc3RzLmxlbmd0aCA9IDA7XG4gICAgICBwcm9taXNlcy5sZW5ndGggPSAwO1xuXG4gICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIGNvbnN0IGR1cmF0aW9uID0gZW5kVGltZSAtIHN0YXJ0VGltZTtcblxuICAgICAgY29uc3QgdGltZW91dExpbWl0ID0gcHJvY2Vzcy5lbnYuQ0kgPyAyMDAwIDogMTAwMDsgLy8gTW9yZSBsZW5pZW50IGZvciBDSVxuICAgICAgZXhwZWN0KGR1cmF0aW9uKS50b0JlTGVzc1RoYW4odGltZW91dExpbWl0KTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgbm90IGFjY3VtdWxhdGUgbWVtb3J5IG92ZXIgbXVsdGlwbGUgZXhlY3V0aW9uc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQXNzZXRSZXBvc2l0b3J5LnVwZGF0ZUZyb250bWF0dGVyQnlQYXRoLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGNvbnN0IGluaXRpYWxNZW1vcnkgPSBwcm9jZXNzLm1lbW9yeVVzYWdlKCkuaGVhcFVzZWQ7XG4gICAgICBjb25zdCByZXF1ZXN0czogVXBkYXRlUHJvcGVydHlSZXF1ZXN0W10gPSBbXTtcblxuICAgICAgLy8gUmVkdWNlIGl0ZXJhdGlvbnMgZm9yIENJIG1lbW9yeSBlZmZpY2llbmN5XG4gICAgICBjb25zdCBpdGVyYXRpb25zID0gcHJvY2Vzcy5lbnYuQ0kgPyAxMCA6IDUwO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZXJhdGlvbnM7IGkrKykge1xuICAgICAgICBjb25zdCByZXF1ZXN0OiBVcGRhdGVQcm9wZXJ0eVJlcXVlc3QgPSB7XG4gICAgICAgICAgYXNzZXRJZDogYHRlc3Qke2l9Lm1kYCxcbiAgICAgICAgICBwcm9wZXJ0eU5hbWU6IFwidGl0bGVcIixcbiAgICAgICAgICB2YWx1ZTogYFRpdGxlICR7aX1gLFxuICAgICAgICAgIHByb3BlcnR5RGVmaW5pdGlvbjoge1xuICAgICAgICAgICAgcHJvcGVydHlOYW1lOiBcInRpdGxlXCIsXG4gICAgICAgICAgICBsYWJlbDogXCJUaXRsZVwiLFxuICAgICAgICAgICAgcmFuZ2U6IFwic3RyaW5nXCIsXG4gICAgICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgICByZXF1ZXN0cy5wdXNoKHJlcXVlc3QpO1xuICAgICAgfVxuXG4gICAgICAvLyBFeGVjdXRlIGluIHNtYWxsZXIgYmF0Y2hlcyB0byBwcmV2ZW50IG1lbW9yeSBidWlsZHVwXG4gICAgICBjb25zdCBiYXRjaFNpemUgPSA1O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZXF1ZXN0cy5sZW5ndGg7IGkgKz0gYmF0Y2hTaXplKSB7XG4gICAgICAgIGNvbnN0IGJhdGNoID0gcmVxdWVzdHMuc2xpY2UoaSwgaSArIGJhdGNoU2l6ZSk7XG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKGJhdGNoLm1hcCgocmVxKSA9PiB1c2VDYXNlLmV4ZWN1dGUocmVxKSkpO1xuXG4gICAgICAgIC8vIENsZWFyIHJlZmVyZW5jZXMgYWZ0ZXIgZWFjaCBiYXRjaFxuICAgICAgICBiYXRjaC5sZW5ndGggPSAwO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciB0aGUgcmVxdWVzdHMgYXJyYXlcbiAgICAgIHJlcXVlc3RzLmxlbmd0aCA9IDA7XG5cbiAgICAgIC8vIEZvcmNlIGdhcmJhZ2UgY29sbGVjdGlvbiBpZiBwb3NzaWJsZVxuICAgICAgaWYgKGdsb2JhbC5nYykge1xuICAgICAgICBnbG9iYWwuZ2MoKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZmluYWxNZW1vcnkgPSBwcm9jZXNzLm1lbW9yeVVzYWdlKCkuaGVhcFVzZWQ7XG4gICAgICBjb25zdCBtZW1vcnlJbmNyZWFzZSA9IGZpbmFsTWVtb3J5IC0gaW5pdGlhbE1lbW9yeTtcblxuICAgICAgLy8gTWVtb3J5IGluY3JlYXNlIHNob3VsZCBiZSByZWFzb25hYmxlIChsZXNzIHRoYW4gM01CIGluIENJLCA4TUIgbG9jYWxseSlcbiAgICAgIGNvbnN0IG1lbW9yeUxpbWl0ID0gcHJvY2Vzcy5lbnYuQ0kgPyAzICogMTAyNCAqIDEwMjQgOiA4ICogMTAyNCAqIDEwMjQ7XG4gICAgICBleHBlY3QobWVtb3J5SW5jcmVhc2UpLnRvQmVMZXNzVGhhbihtZW1vcnlMaW1pdCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=