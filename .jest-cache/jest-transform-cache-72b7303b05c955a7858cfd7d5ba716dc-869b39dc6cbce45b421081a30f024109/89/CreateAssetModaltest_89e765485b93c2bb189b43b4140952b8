feca03fbf0b52757aaeee3e3a71b489d
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
// Mock DIContainer
jest.mock("../../../../src/infrastructure/container/DIContainer");
// Mock Notice
jest.mock("obsidian", () => {
    const actual = jest.requireActual("obsidian");
    return {
        ...actual,
        Notice: jest.fn(),
        Setting: jest.fn().mockImplementation(() => ({
            setName: jest.fn().mockReturnThis(),
            setDesc: jest.fn().mockReturnThis(),
            addText: jest.fn().mockReturnThis(),
            addDropdown: jest.fn().mockReturnThis(),
            addToggle: jest.fn().mockReturnThis(),
            addTextArea: jest.fn().mockReturnThis(),
            addButton: jest.fn().mockReturnThis(),
        })),
    };
});
const obsidian_1 = require("obsidian");
const CreateAssetModal_1 = require("../../../../src/presentation/modals/CreateAssetModal");
const DIContainer_1 = require("../../../../src/infrastructure/container/DIContainer");
// Add Obsidian DOM extensions to HTMLElement prototype
beforeAll(() => {
    HTMLElement.prototype.createEl = jest.fn().mockImplementation(function (tag, attrs) {
        const element = document.createElement(tag);
        if (attrs?.text)
            element.textContent = attrs.text;
        if (attrs?.cls)
            element.className = attrs.cls;
        // Append to parent (this) like real Obsidian createEl does
        this.appendChild(element);
        return element;
    });
    HTMLElement.prototype.createDiv = jest.fn().mockImplementation(function (attrs) {
        const element = document.createElement("div");
        if (attrs?.cls)
            element.className = attrs.cls;
        // Append to parent (this) like real Obsidian createDiv does
        this.appendChild(element);
        return element;
    });
    HTMLElement.prototype.empty = jest.fn().mockImplementation(() => {
        // Mock empty implementation - in real Obsidian this clears the element
    });
});
describe("CreateAssetModal", () => {
    let app;
    let modal;
    let mockCreateAssetUseCase;
    let mockContainer;
    beforeEach(() => {
        // Setup app mock with vault and metadataCache
        app = new obsidian_1.App();
        app.vault = {
            getMarkdownFiles: jest.fn().mockReturnValue([]),
            read: jest.fn(),
        };
        app.metadataCache = {
            getFileCache: jest.fn().mockReturnValue(null),
        };
        // Setup CreateAssetUseCase mock
        mockCreateAssetUseCase = {
            execute: jest.fn(),
        };
        // Setup DIContainer mock
        mockContainer = {
            getCreateAssetUseCase: jest.fn().mockReturnValue(mockCreateAssetUseCase),
            getInstance: jest.fn().mockReturnThis(),
            resolve: jest.fn().mockImplementation((token) => {
                // Return empty mock repositories
                return {};
            }),
        };
        DIContainer_1.DIContainer.getInstance.mockReturnValue(mockContainer);
        // Create modal instance
        modal = new CreateAssetModal_1.CreateAssetModal(app);
    });
    afterEach(() => {
        jest.clearAllMocks();
    });
    describe("Modal Initialization", () => {
        test("should create modal with default values", () => {
            expect(modal).toBeDefined();
            expect(modal.app).toBe(app);
        });
        test("should initialize with DIContainer", () => {
            expect(DIContainer_1.DIContainer.getInstance).toHaveBeenCalled();
            expect(mockContainer.getCreateAssetUseCase).toHaveBeenCalled();
        });
        test("should have default asset values", () => {
            expect(modal.assetTitle).toBe("");
            expect(modal.assetClass).toBe("exo__Asset");
            expect(modal.assetOntology).toBe("");
            expect(modal.propertyValues).toBeInstanceOf(Map);
        });
        test("should initialize empty properties list", () => {
            expect(modal.properties).toEqual([]);
            expect(modal.propertiesContainer).toBeNull();
        });
    });
    describe("Modal Opening", () => {
        test("should setup UI elements when opened", async () => {
            const mockContentEl = document.createElement("div");
            modal.contentEl = mockContentEl;
            await modal.onOpen();
            expect(mockContentEl.createEl).toHaveBeenCalledWith("h2", {
                text: "Create ExoAsset",
            });
        });
        test("should setup all required fields", async () => {
            const mockContentEl = document.createElement("div");
            modal.contentEl = mockContentEl;
            const setupTitleFieldSpy = jest.spyOn(modal, "setupTitleField");
            const setupClassFieldSpy = jest.spyOn(modal, "setupClassField");
            const setupOntologyFieldSpy = jest.spyOn(modal, "setupOntologyField");
            const setupPropertiesSectionSpy = jest.spyOn(modal, "setupPropertiesSection");
            const setupActionButtonsSpy = jest.spyOn(modal, "setupActionButtons");
            await modal.onOpen();
            expect(setupTitleFieldSpy).toHaveBeenCalled();
            expect(setupClassFieldSpy).toHaveBeenCalled();
            expect(setupOntologyFieldSpy).toHaveBeenCalled();
            expect(setupPropertiesSectionSpy).toHaveBeenCalled();
            expect(setupActionButtonsSpy).toHaveBeenCalled();
        });
        test("should handle errors during modal opening gracefully", async () => {
            const mockContentEl = document.createElement("div");
            modal.contentEl = mockContentEl;
            // Mock setupClassField to throw error
            jest
                .spyOn(modal, "setupClassField")
                .mockRejectedValue(new Error("Setup failed"));
            await expect(modal.onOpen()).rejects.toThrow("Setup failed");
        });
    });
    describe("Title Field Setup", () => {
        test("should setup title field correctly", async () => {
            const containerEl = document.createElement("div");
            await modal.setupTitleField(containerEl);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test("should update assetTitle when title changes", async () => {
            const containerEl = document.createElement("div");
            await modal.setupTitleField(containerEl);
            // Simulate title change
            const testTitle = "Test Asset Title";
            modal.assetTitle = testTitle;
            expect(modal.assetTitle).toBe(testTitle);
        });
        test("should handle long titles", async () => {
            const containerEl = document.createElement("div");
            await modal.setupTitleField(containerEl);
            const longTitle = "A".repeat(1000);
            modal.assetTitle = longTitle;
            expect(modal.assetTitle).toBe(longTitle);
        });
        test("should handle special characters in titles", async () => {
            const containerEl = document.createElement("div");
            await modal.setupTitleField(containerEl);
            const specialTitle = "Test!@#$%^&*()_+{}|:\"<>?[]\\;',./ Asset";
            modal.assetTitle = specialTitle;
            expect(modal.assetTitle).toBe(specialTitle);
        });
    });
    describe("Class Field Setup", () => {
        test("should setup class field correctly", async () => {
            const containerEl = document.createElement("div");
            await modal.setupClassField(containerEl);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test("should have default class value", () => {
            expect(modal.assetClass).toBe("exo__Asset");
        });
        test("should discover classes from vault files", async () => {
            const mockFiles = [
                { basename: "TestClass", name: "TestClass.md" },
                { basename: "AnotherClass", name: "AnotherClass.md" },
            ];
            app.vault.getMarkdownFiles.mockReturnValue(mockFiles);
            app.metadataCache.getFileCache
                .mockReturnValueOnce({
                frontmatter: {
                    exo__Instance_class: "exo__Class",
                    rdfs__label: "Test Class",
                },
            })
                .mockReturnValueOnce({
                frontmatter: {
                    exo__Instance_class: "[[exo__Class]]",
                    rdfs__label: "Another Class",
                },
            });
            const containerEl = document.createElement("div");
            await modal.setupClassField(containerEl);
            expect(app.vault.getMarkdownFiles).toHaveBeenCalled();
            expect(app.metadataCache.getFileCache).toHaveBeenCalledTimes(2);
        });
        test("should provide default classes when none found", async () => {
            app.vault.getMarkdownFiles.mockReturnValue([]);
            const containerEl = document.createElement("div");
            await modal.setupClassField(containerEl);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test("should handle vault access errors", async () => {
            app.vault.getMarkdownFiles.mockImplementation(() => {
                throw new Error("Vault access error");
            });
            const containerEl = document.createElement("div");
            await expect(modal.setupClassField(containerEl)).rejects.toThrow("Vault access error");
        });
        test("should update properties when class changes", async () => {
            const containerEl = document.createElement("div");
            const updatePropertiesForClassSpy = jest
                .spyOn(modal, "updatePropertiesForClass")
                .mockResolvedValue(undefined);
            await modal.setupClassField(containerEl);
            // Simulate class change
            const newClass = "exo__Task";
            modal.assetClass = newClass;
            expect(modal.assetClass).toBe(newClass);
        });
    });
    describe("Ontology Field Setup", () => {
        test("should setup ontology field correctly", async () => {
            const containerEl = document.createElement("div");
            await modal.setupOntologyField(containerEl);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test("should discover ontologies from vault files", async () => {
            const mockFiles = [
                { name: "!test-ontology.md", basename: "!test-ontology" },
                { name: "!another-onto.md", basename: "!another-onto" },
            ];
            app.vault.getMarkdownFiles.mockReturnValue(mockFiles);
            app.metadataCache.getFileCache
                .mockReturnValueOnce({
                frontmatter: {
                    exo__Ontology_prefix: "test",
                    rdfs__label: "Test Ontology",
                },
            })
                .mockReturnValueOnce({
                frontmatter: {
                    exo__Ontology_prefix: "another",
                    rdfs__label: "Another Ontology",
                },
            });
            const containerEl = document.createElement("div");
            await modal.setupOntologyField(containerEl);
            expect(app.vault.getMarkdownFiles).toHaveBeenCalled();
        });
        test("should handle empty ontology list", async () => {
            app.vault.getMarkdownFiles.mockReturnValue([]);
            const containerEl = document.createElement("div");
            await modal.setupOntologyField(containerEl);
            expect(containerEl).toBeDefined();
        });
        test("should set default ontology correctly", async () => {
            app.vault.getMarkdownFiles.mockReturnValue([]);
            const containerEl = document.createElement("div");
            await modal.setupOntologyField(containerEl);
            expect(modal.assetOntology).toBe("exo");
        });
    });
    describe("Properties Section Setup", () => {
        test("should setup properties section correctly", async () => {
            const containerEl = document.createElement("div");
            await modal.setupPropertiesSection(containerEl);
            expect(containerEl.createEl).toHaveBeenCalledWith("h3", {
                text: "Properties",
                cls: "exocortex-properties-header",
            });
            expect(containerEl.createDiv).toHaveBeenCalledWith({
                cls: "exocortex-properties-container",
            });
        });
        test("should update properties for default class", async () => {
            const containerEl = document.createElement("div");
            const updatePropertiesForClassSpy = jest
                .spyOn(modal, "updatePropertiesForClass")
                .mockResolvedValue(undefined);
            await modal.setupPropertiesSection(containerEl);
            expect(updatePropertiesForClassSpy).toHaveBeenCalledWith("exo__Asset");
        });
        test("should create properties container with correct class", async () => {
            const containerEl = document.createElement("div");
            await modal.setupPropertiesSection(containerEl);
            expect(containerEl.createDiv).toHaveBeenCalledWith({
                cls: "exocortex-properties-container",
            });
        });
    });
    describe("Properties Management", () => {
        beforeEach(() => {
            const mockPropertiesContainer = document.createElement("div");
            mockPropertiesContainer.empty = jest.fn();
            mockPropertiesContainer.createEl = jest
                .fn()
                .mockReturnValue(document.createElement("p"));
            modal.propertiesContainer = mockPropertiesContainer;
        });
        test("should clear existing properties when updating for new class", async () => {
            modal.propertyValues.set("test", "value");
            app.vault.getMarkdownFiles.mockReturnValue([]);
            await modal.updatePropertiesForClass("exo__Task");
            expect(modal.propertiesContainer.empty).toHaveBeenCalled();
            expect(modal.propertyValues.size).toBe(0);
        });
        test("should add default properties for exo__Asset class", async () => {
            app.vault.getMarkdownFiles.mockReturnValue([]);
            await modal.updatePropertiesForClass("exo__Asset");
            expect(modal.properties).toHaveLength(2); // description and tags
            expect(modal.properties[0].name).toBe("description");
            expect(modal.properties[1].name).toBe("tags");
        });
        test("should discover properties from vault for specific class", async () => {
            const mockFiles = [{ basename: "propertyName", name: "propertyName.md" }];
            app.vault.getMarkdownFiles.mockReturnValue(mockFiles);
            app.metadataCache.getFileCache.mockReturnValue({
                frontmatter: {
                    exo__Instance_class: "exo__Property",
                    rdfs__domain: "TestClass",
                    rdfs__label: "Test Property",
                    rdfs__comment: "A test property",
                    rdfs__range: "string",
                    exo__Property_isRequired: true,
                },
            });
            await modal.updatePropertiesForClass("TestClass");
            expect(modal.properties).toHaveLength(1);
            expect(modal.properties[0].name).toBe("propertyName");
            expect(modal.properties[0].isRequired).toBe(true);
        });
        test("should handle properties with array domains", async () => {
            const mockFiles = [
                { basename: "multiDomainProp", name: "multiDomainProp.md" },
            ];
            app.vault.getMarkdownFiles.mockReturnValue(mockFiles);
            app.metadataCache.getFileCache.mockReturnValue({
                frontmatter: {
                    exo__Instance_class: "exo__Property",
                    rdfs__domain: ["TestClass", "AnotherClass"],
                    rdfs__label: "Multi Domain Property",
                    rdfs__range: "string",
                },
            });
            await modal.updatePropertiesForClass("TestClass");
            expect(modal.properties).toHaveLength(1);
            expect(modal.properties[0].name).toBe("multiDomainProp");
        });
        test("should map different ranges to correct types", async () => {
            const containerEl = document.createElement("div");
            modal.propertiesContainer = containerEl;
            // Test different range mappings
            expect(modal.mapRangeToType("select")).toBe("enum");
            expect(modal.mapRangeToType("boolean")).toBe("boolean");
            expect(modal.mapRangeToType("date")).toBe("date");
            expect(modal.mapRangeToType("integer")).toBe("number");
            expect(modal.mapRangeToType("string[]")).toBe("array");
            expect(modal.mapRangeToType("text")).toBe("text");
            expect(modal.mapRangeToType("unknown")).toBe("string");
        });
        test("should handle enum properties with options", async () => {
            const mockFiles = [{ basename: "statusProp", name: "statusProp.md" }];
            app.vault.getMarkdownFiles.mockReturnValue(mockFiles);
            app.metadataCache.getFileCache.mockReturnValue({
                frontmatter: {
                    exo__Instance_class: "exo__Property",
                    rdfs__domain: "TestClass",
                    rdfs__range: "select",
                    exo__Property_options: ["active", "inactive", "pending"],
                },
            });
            await modal.updatePropertiesForClass("TestClass");
            expect(modal.properties).toHaveLength(1);
            expect(modal.properties[0].type).toBe("enum");
            expect(modal.properties[0].options).toEqual([
                "active",
                "inactive",
                "pending",
            ]);
        });
        test("should show no properties message when none found", async () => {
            app.vault.getMarkdownFiles.mockReturnValue([]);
            await modal.updatePropertiesForClass("UnknownClass");
            expect(modal.propertiesContainer.createEl).toHaveBeenCalledWith("p", {
                text: "No specific properties for this class",
                cls: "exocortex-no-properties",
            });
        });
    });
    describe("Property Field Creation", () => {
        let mockPropertiesContainer;
        beforeEach(() => {
            mockPropertiesContainer = document.createElement("div");
            modal.propertiesContainer = mockPropertiesContainer;
        });
        test("should create text field for string property", () => {
            const property = {
                name: "description",
                label: "Description",
                type: "string",
                isRequired: false,
                description: "Asset description",
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test("should create text area field for text property", () => {
            const property = {
                name: "notes",
                label: "Notes",
                type: "text",
                isRequired: false,
                description: "Asset notes",
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test("should create enum field for enum property", () => {
            const property = {
                name: "status",
                label: "Status",
                type: "enum",
                options: ["active", "inactive"],
                isRequired: true,
                description: "Asset status",
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test("should create boolean field for boolean property", () => {
            const property = {
                name: "completed",
                label: "Completed",
                type: "boolean",
                isRequired: false,
                description: "Whether task is completed",
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test("should create date field for date property", () => {
            const property = {
                name: "dueDate",
                label: "Due Date",
                type: "date",
                isRequired: false,
                description: "Task due date",
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test("should create number field for number property", () => {
            const property = {
                name: "effort",
                label: "Effort",
                type: "number",
                isRequired: false,
                description: "Estimated effort in hours",
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test("should create array field for array property", () => {
            const property = {
                name: "tags",
                label: "Tags",
                type: "array",
                isRequired: false,
                description: "Asset tags",
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test("should show required indicator for required fields", () => {
            const property = {
                name: "title",
                label: "Title",
                type: "string",
                isRequired: true,
                description: "Asset title",
            };
            modal.createPropertyField(property);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
    });
    describe("Individual Field Type Tests", () => {
        let mockSetting;
        beforeEach(() => {
            mockSetting = {
                addDropdown: jest.fn().mockImplementation((callback) => {
                    const dropdown = { addOption: jest.fn(), onChange: jest.fn() };
                    callback(dropdown);
                    return mockSetting;
                }),
                addToggle: jest.fn().mockImplementation((callback) => {
                    const toggle = { onChange: jest.fn() };
                    callback(toggle);
                    return mockSetting;
                }),
                addText: jest.fn().mockImplementation((callback) => {
                    const text = {
                        setPlaceholder: jest.fn().mockReturnThis(),
                        onChange: jest.fn(),
                        inputEl: { type: "text" },
                    };
                    callback(text);
                    return mockSetting;
                }),
                addTextArea: jest.fn().mockImplementation((callback) => {
                    const textArea = {
                        setPlaceholder: jest.fn().mockReturnThis(),
                        onChange: jest.fn(),
                    };
                    callback(textArea);
                    return mockSetting;
                }),
            };
        });
        test("should create enum field with all options", () => {
            const property = {
                name: "priority",
                label: "Priority",
                type: "enum",
                options: ["low", "medium", "high"],
                isRequired: false,
            };
            modal.createEnumField(mockSetting, property);
            expect(mockSetting.addDropdown).toHaveBeenCalled();
        });
        test("should handle enum field selection", () => {
            const property = {
                name: "priority",
                label: "Priority",
                type: "enum",
                options: ["low", "medium", "high"],
                isRequired: false,
            };
            modal.createEnumField(mockSetting, property);
            // Simulate selection
            modal.propertyValues.set("priority", "high");
            expect(modal.propertyValues.get("priority")).toBe("high");
        });
        test("should create boolean field with toggle", () => {
            const property = {
                name: "active",
                label: "Active",
                type: "boolean",
                isRequired: false,
            };
            modal.createBooleanField(mockSetting, property);
            expect(mockSetting.addToggle).toHaveBeenCalled();
        });
        test("should handle boolean field changes", () => {
            const property = {
                name: "active",
                label: "Active",
                type: "boolean",
                isRequired: false,
            };
            modal.createBooleanField(mockSetting, property);
            // Simulate toggle
            modal.propertyValues.set("active", true);
            expect(modal.propertyValues.get("active")).toBe(true);
        });
        test("should create date field with correct input type", () => {
            const property = {
                name: "dueDate",
                label: "Due Date",
                type: "date",
                isRequired: false,
            };
            modal.createDateField(mockSetting, property);
            expect(mockSetting.addText).toHaveBeenCalled();
        });
        test("should create number field with validation", () => {
            const property = {
                name: "count",
                label: "Count",
                type: "number",
                isRequired: false,
            };
            modal.createNumberField(mockSetting, property);
            expect(mockSetting.addText).toHaveBeenCalled();
        });
        test("should create text area field", () => {
            const property = {
                name: "description",
                label: "Description",
                type: "text",
                isRequired: false,
            };
            modal.createTextAreaField(mockSetting, property);
            expect(mockSetting.addTextArea).toHaveBeenCalled();
        });
        test("should create array field for tags", () => {
            const property = {
                name: "tags",
                label: "Tags",
                type: "array",
                isRequired: false,
            };
            modal.createArrayField(mockSetting, property);
            expect(mockSetting.addText).toHaveBeenCalled();
        });
        test("should create basic text field as fallback", () => {
            const property = {
                name: "generic",
                label: "Generic",
                type: "unknown",
                isRequired: false,
            };
            modal.createTextField(mockSetting, property);
            expect(mockSetting.addText).toHaveBeenCalled();
        });
    });
    describe("Action Buttons Setup", () => {
        test("should setup create button", () => {
            const containerEl = document.createElement("div");
            modal.setupActionButtons(containerEl);
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
        test("should call createAsset when create button is clicked", async () => {
            const createAssetSpy = jest
                .spyOn(modal, "createAsset")
                .mockResolvedValue(undefined);
            const containerEl = document.createElement("div");
            modal.setupActionButtons(containerEl);
            // The button click is handled through the Setting mock
            expect(obsidian_1.Setting).toHaveBeenCalled();
        });
    });
    describe("Asset Creation", () => {
        test("should call createAssetUseCase.execute when creating asset", async () => {
            mockCreateAssetUseCase.execute.mockResolvedValue({
                success: true,
                assetId: "test-id",
                message: "Asset created successfully",
            });
            modal.assetTitle = "Test Asset";
            modal.assetClass = "exo__Task";
            modal.assetOntology = "exo";
            modal.propertyValues.set("priority", "high");
            const closeSpy = jest.spyOn(modal, "close").mockImplementation(() => { });
            await modal.createAsset();
            expect(mockCreateAssetUseCase.execute).toHaveBeenCalledWith({
                title: "Test Asset",
                className: "exo__Task",
                ontologyPrefix: "exo",
                properties: {
                    priority: "high",
                },
            });
            expect(obsidian_1.Notice).toHaveBeenCalledWith("Asset created successfully");
            expect(closeSpy).toHaveBeenCalled();
        });
        test("should show error notice when asset creation fails", async () => {
            mockCreateAssetUseCase.execute.mockResolvedValue({
                success: false,
                assetId: "",
                message: "Creation failed",
            });
            modal.assetTitle = "Test Asset";
            await modal.createAsset();
            expect(obsidian_1.Notice).toHaveBeenCalledWith("Failed to create asset");
        });
        test("should handle errors during asset creation", async () => {
            const error = new Error("Network error");
            mockCreateAssetUseCase.execute.mockRejectedValue(error);
            modal.assetTitle = "Test Asset";
            await modal.createAsset();
            expect(obsidian_1.Notice).toHaveBeenCalledWith("Error: Network error");
        });
        test("should convert property values to plain object", async () => {
            mockCreateAssetUseCase.execute.mockResolvedValue({
                success: true,
                assetId: "test-id",
                message: "Success",
            });
            modal.assetTitle = "Test Asset";
            modal.propertyValues.set("prop1", "value1");
            modal.propertyValues.set("prop2", "value2");
            await modal.createAsset();
            expect(mockCreateAssetUseCase.execute).toHaveBeenCalledWith(expect.objectContaining({
                properties: {
                    prop1: "value1",
                    prop2: "value2",
                },
            }));
        });
        test("should handle empty property values", async () => {
            mockCreateAssetUseCase.execute.mockResolvedValue({
                success: true,
                assetId: "test-id",
                message: "Success",
            });
            modal.assetTitle = "Test Asset";
            await modal.createAsset();
            expect(mockCreateAssetUseCase.execute).toHaveBeenCalledWith(expect.objectContaining({
                properties: {},
            }));
        });
    });
    describe("Modal Cleanup", () => {
        test("should clear content on close", () => {
            const mockContentEl = document.createElement("div");
            const emptySpy = jest.spyOn(mockContentEl, "empty");
            modal.contentEl = mockContentEl;
            modal.onClose();
            expect(emptySpy).toHaveBeenCalled();
        });
        test("should handle DOM cleanup fallback", () => {
            const mockContentEl = document.createElement("div");
            // Remove the empty method to test fallback
            mockContentEl.empty = undefined;
            const child = document.createElement("div");
            mockContentEl.appendChild(child);
            modal.contentEl = mockContentEl;
            modal.onClose();
            // Should still complete without error
            expect(mockContentEl.children.length).toBe(0);
        });
    });
    describe("Input Validation", () => {
        test("should handle empty title field", async () => {
            mockCreateAssetUseCase.execute.mockRejectedValue(new Error("Asset title is required"));
            modal.assetTitle = "";
            await modal.createAsset();
            expect(obsidian_1.Notice).toHaveBeenCalledWith("Error: Asset title is required");
        });
        test("should handle missing class field", async () => {
            mockCreateAssetUseCase.execute.mockRejectedValue(new Error("Asset class is required"));
            modal.assetTitle = "Test";
            modal.assetClass = "";
            await modal.createAsset();
            expect(obsidian_1.Notice).toHaveBeenCalledWith("Error: Asset class is required");
        });
        test("should handle missing ontology field", async () => {
            mockCreateAssetUseCase.execute.mockRejectedValue(new Error("Ontology prefix is required"));
            modal.assetTitle = "Test";
            modal.assetOntology = "";
            await modal.createAsset();
            expect(obsidian_1.Notice).toHaveBeenCalledWith("Error: Ontology prefix is required");
        });
        test("should handle whitespace-only title", async () => {
            mockCreateAssetUseCase.execute.mockRejectedValue(new Error("Asset title is required"));
            modal.assetTitle = "   \t\n   ";
            await modal.createAsset();
            expect(obsidian_1.Notice).toHaveBeenCalledWith("Error: Asset title is required");
        });
    });
    describe("Property Value Handling", () => {
        test("should handle array values correctly", () => {
            const property = {
                name: "tags",
                label: "Tags",
                type: "array",
                isRequired: false,
                description: "Asset tags",
            };
            // Simulate array input processing
            modal.propertyValues.set(property.name, [
                "tag1",
                "tag2",
                "tag3",
            ]);
            const values = modal.propertyValues.get("tags");
            expect(values).toEqual(["tag1", "tag2", "tag3"]);
        });
        test("should handle wiki link values correctly", () => {
            const property = {
                name: "relatedTasks",
                label: "Related Tasks",
                type: "array",
                isRequired: false,
                description: "Related task links",
            };
            // Simulate wiki link processing
            modal.propertyValues.set(property.name, [
                "[[Task 1]]",
                "[[Task 2]]",
            ]);
            const values = modal.propertyValues.get("relatedTasks");
            expect(values).toEqual(["[[Task 1]]", "[[Task 2]]"]);
        });
        test("should handle number parsing correctly", () => {
            const property = {
                name: "effort",
                label: "Effort",
                type: "number",
                isRequired: false,
                description: "Effort in hours",
            };
            // Simulate number input
            modal.propertyValues.set(property.name, 42);
            const value = modal.propertyValues.get("effort");
            expect(value).toBe(42);
            expect(typeof value).toBe("number");
        });
        test("should handle invalid number input", () => {
            const property = {
                name: "effort",
                label: "Effort",
                type: "number",
                isRequired: false,
            };
            // Should not set invalid numbers
            const invalidNumber = "not-a-number";
            if (isNaN(parseFloat(invalidNumber))) {
                // Property should not be set
                expect(modal.propertyValues.has("effort")).toBe(false);
            }
        });
        test("should clear property values when empty", () => {
            modal.propertyValues.set("test", "value");
            // Simulate clearing a field
            modal.propertyValues.delete("test");
            expect(modal.propertyValues.has("test")).toBe(false);
        });
        test("should handle date input validation", () => {
            const property = {
                name: "dueDate",
                label: "Due Date",
                type: "date",
                isRequired: false,
            };
            // Valid date
            modal.propertyValues.set(property.name, "2024-12-31");
            expect(modal.propertyValues.get("dueDate")).toBe("2024-12-31");
            // Invalid date should not be set
            const invalidDate = "not-a-date";
            if (isNaN(Date.parse(invalidDate))) {
                modal.propertyValues.delete("dueDate");
            }
            expect(modal.propertyValues.has("dueDate")).toBe(false);
        });
        test("should handle boolean toggle values", () => {
            const property = {
                name: "active",
                label: "Active",
                type: "boolean",
                isRequired: false,
            };
            // Test true value
            modal.propertyValues.set(property.name, true);
            expect(modal.propertyValues.get("active")).toBe(true);
            // Test false value
            modal.propertyValues.set(property.name, false);
            expect(modal.propertyValues.get("active")).toBe(false);
        });
        test("should handle complex array parsing", () => {
            const input = '[[Link 1]], [[Link 2]], simple, "quoted item"';
            const links = input.match(/\[\[([^\]]+)\]\]/g) || [];
            const items = input
                .split(",")
                .map((s) => s.trim())
                .filter((s) => s);
            if (links.length > 0) {
                modal.propertyValues.set("test", links);
            }
            else {
                modal.propertyValues.set("test", items);
            }
            expect(modal.propertyValues.get("test")).toEqual([
                "[[Link 1]]",
                "[[Link 2]]",
            ]);
        });
    });
    describe("Container Cleanup Scenarios", () => {
        test("should handle properties container cleanup with Obsidian method", async () => {
            const mockContainer = document.createElement("div");
            mockContainer.empty = jest.fn();
            modal.propertiesContainer = mockContainer;
            await modal.updatePropertiesForClass("TestClass");
            expect(mockContainer.empty).toHaveBeenCalled();
        });
        test("should handle properties container cleanup with DOM fallback", async () => {
            const mockContainer = document.createElement("div");
            const child1 = document.createElement("div");
            const child2 = document.createElement("div");
            mockContainer.appendChild(child1);
            mockContainer.appendChild(child2);
            // Remove Obsidian empty method to test fallback
            mockContainer.empty = undefined;
            modal.propertiesContainer = mockContainer;
            app.vault.getMarkdownFiles.mockReturnValue([]);
            await modal.updatePropertiesForClass("TestClass");
            expect(mockContainer.children.length).toBe(1); // Should have the "no properties" message
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvdW5pdC9wcmVzZW50YXRpb24vbW9kYWxzL0NyZWF0ZUFzc2V0TW9kYWwudGVzdC50cyIsIm1hcHBpbmdzIjoiOztBQUtBLG1CQUFtQjtBQUNuQixJQUFJLENBQUMsSUFBSSxDQUFDLHNEQUFzRCxDQUFDLENBQUM7QUFFbEUsY0FBYztBQUNkLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFLEdBQUcsRUFBRTtJQUN6QixNQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0lBQzlDLE9BQU87UUFDTCxHQUFHLE1BQU07UUFDVCxNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtRQUNqQixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7WUFDM0MsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7WUFDbkMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7WUFDbkMsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7WUFDbkMsV0FBVyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7WUFDdkMsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7WUFDckMsV0FBVyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7WUFDdkMsU0FBUyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxjQUFjLEVBQUU7U0FDdEMsQ0FBQyxDQUFDO0tBQ0osQ0FBQztBQUNKLENBQUMsQ0FBQyxDQUFDO0FBeEJILHVDQUFnRDtBQUNoRCwyRkFBd0Y7QUFFeEYsc0ZBQW1GO0FBZ0NuRix1REFBdUQ7QUFDdkQsU0FBUyxD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Q0FBQyxtQkFBbUIsR0FBRyxhQUFhLENBQUM7WUFDbEQsR0FBRyxDQUFDLEtBQUssQ0FBQyxnQkFBOEIsQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDLENBQUM7WUFFOUQsTUFBTyxLQUFhLENBQUMsd0JBQXdCLENBQUMsV0FBVyxDQUFDLENBQUM7WUFFM0QsTUFBTSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsMENBQTBDO1FBQzNGLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvVXNlcnMva2l0ZWxldi9Eb2N1bWVudHMvZXhvY29ydGV4LW9ic2lkaWFuLXBsdWdpbi90ZXN0cy91bml0L3ByZXNlbnRhdGlvbi9tb2RhbHMvQ3JlYXRlQXNzZXRNb2RhbC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcCwgU2V0dGluZywgTm90aWNlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBDcmVhdGVBc3NldE1vZGFsIH0gZnJvbSBcIi4uLy4uLy4uLy4uL3NyYy9wcmVzZW50YXRpb24vbW9kYWxzL0NyZWF0ZUFzc2V0TW9kYWxcIjtcbmltcG9ydCB7IENyZWF0ZUFzc2V0VXNlQ2FzZSB9IGZyb20gXCIuLi8uLi8uLi8uLi9zcmMvYXBwbGljYXRpb24vdXNlLWNhc2VzL0NyZWF0ZUFzc2V0VXNlQ2FzZVwiO1xuaW1wb3J0IHsgRElDb250YWluZXIgfSBmcm9tIFwiLi4vLi4vLi4vLi4vc3JjL2luZnJhc3RydWN0dXJlL2NvbnRhaW5lci9ESUNvbnRhaW5lclwiO1xuXG4vLyBNb2NrIERJQ29udGFpbmVyXG5qZXN0Lm1vY2soXCIuLi8uLi8uLi8uLi9zcmMvaW5mcmFzdHJ1Y3R1cmUvY29udGFpbmVyL0RJQ29udGFpbmVyXCIpO1xuXG4vLyBNb2NrIE5vdGljZVxuamVzdC5tb2NrKFwib2JzaWRpYW5cIiwgKCkgPT4ge1xuICBjb25zdCBhY3R1YWwgPSBqZXN0LnJlcXVpcmVBY3R1YWwoXCJvYnNpZGlhblwiKTtcbiAgcmV0dXJuIHtcbiAgICAuLi5hY3R1YWwsXG4gICAgTm90aWNlOiBqZXN0LmZuKCksXG4gICAgU2V0dGluZzogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xuICAgICAgc2V0TmFtZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICBzZXREZXNjOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGFkZFRleHQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgYWRkRHJvcGRvd246IGplc3QuZm4oKS5tb2NrUmV0dXJuVGhpcygpLFxuICAgICAgYWRkVG9nZ2xlOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGFkZFRleHRBcmVhOiBqZXN0LmZuKCkubW9ja1JldHVyblRoaXMoKSxcbiAgICAgIGFkZEJ1dHRvbjogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgfSkpLFxuICB9O1xufSk7XG5cbi8vIEV4dGVuZCBIVE1MRWxlbWVudCB0byBpbmNsdWRlIE9ic2lkaWFuLXNwZWNpZmljIG1ldGhvZHNcbmRlY2xhcmUgZ2xvYmFsIHtcbiAgaW50ZXJmYWNlIEhUTUxFbGVtZW50IHtcbiAgICBjcmVhdGVFbCh0YWc6IHN0cmluZywgYXR0cnM/OiBhbnkpOiBIVE1MRWxlbWVudDtcbiAgICBjcmVhdGVEaXYoYXR0cnM/OiBhbnkpOiBIVE1MRWxlbWVudDtcbiAgICBlbXB0eSgpOiB2b2lkO1xuICB9XG59XG5cbi8vIEFkZCBPYnNpZGlhbiBET00gZXh0ZW5zaW9ucyB0byBIVE1MRWxlbWVudCBwcm90b3R5cGVcbmJlZm9yZUFsbCgoKSA9PiB7XG4gIEhUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVFbCA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oZnVuY3Rpb24gKFxuICAgIHRoaXM6IEhUTUxFbGVtZW50LFxuICAgIHRhZzogc3RyaW5nLFxuICAgIGF0dHJzPzogYW55LFxuICApIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgIGlmIChhdHRycz8udGV4dCkgZWxlbWVudC50ZXh0Q29udGVudCA9IGF0dHJzLnRleHQ7XG4gICAgaWYgKGF0dHJzPy5jbHMpIGVsZW1lbnQuY2xhc3NOYW1lID0gYXR0cnMuY2xzO1xuICAgIC8vIEFwcGVuZCB0byBwYXJlbnQgKHRoaXMpIGxpa2UgcmVhbCBPYnNpZGlhbiBjcmVhdGVFbCBkb2VzXG4gICAgdGhpcy5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfSk7XG5cbiAgSFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZURpdiA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oZnVuY3Rpb24gKFxuICAgIHRoaXM6IEhUTUxFbGVtZW50LFxuICAgIGF0dHJzPzogYW55LFxuICApIHtcbiAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBpZiAoYXR0cnM/LmNscykgZWxlbWVudC5jbGFzc05hbWUgPSBhdHRycy5jbHM7XG4gICAgLy8gQXBwZW5kIHRvIHBhcmVudCAodGhpcykgbGlrZSByZWFsIE9ic2lkaWFuIGNyZWF0ZURpdiBkb2VzXG4gICAgdGhpcy5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfSk7XG5cbiAgSFRNTEVsZW1lbnQucHJvdG90eXBlLmVtcHR5ID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgLy8gTW9jayBlbXB0eSBpbXBsZW1lbnRhdGlvbiAtIGluIHJlYWwgT2JzaWRpYW4gdGhpcyBjbGVhcnMgdGhlIGVsZW1lbnRcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoXCJDcmVhdGVBc3NldE1vZGFsXCIsICgpID0+IHtcbiAgbGV0IGFwcDogQXBwO1xuICBsZXQgbW9kYWw6IENyZWF0ZUFzc2V0TW9kYWw7XG4gIGxldCBtb2NrQ3JlYXRlQXNzZXRVc2VDYXNlOiBqZXN0Lk1vY2tlZDxDcmVhdGVBc3NldFVzZUNhc2U+O1xuICBsZXQgbW9ja0NvbnRhaW5lcjogamVzdC5Nb2NrZWQ8RElDb250YWluZXI+O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIC8vIFNldHVwIGFwcCBtb2NrIHdpdGggdmF1bHQgYW5kIG1ldGFkYXRhQ2FjaGVcbiAgICBhcHAgPSBuZXcgQXBwKCk7XG4gICAgKGFwcCBhcyBhbnkpLnZhdWx0ID0ge1xuICAgICAgZ2V0TWFya2Rvd25GaWxlczogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbXSksXG4gICAgICByZWFkOiBqZXN0LmZuKCksXG4gICAgfTtcbiAgICAoYXBwIGFzIGFueSkubWV0YWRhdGFDYWNoZSA9IHtcbiAgICAgIGdldEZpbGVDYWNoZTogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShudWxsKSxcbiAgICB9O1xuXG4gICAgLy8gU2V0dXAgQ3JlYXRlQXNzZXRVc2VDYXNlIG1vY2tcbiAgICBtb2NrQ3JlYXRlQXNzZXRVc2VDYXNlID0ge1xuICAgICAgZXhlY3V0ZTogamVzdC5mbigpLFxuICAgIH0gYXMgYW55O1xuXG4gICAgLy8gU2V0dXAgRElDb250YWluZXIgbW9ja1xuICAgIG1vY2tDb250YWluZXIgPSB7XG4gICAgICBnZXRDcmVhdGVBc3NldFVzZUNhc2U6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUobW9ja0NyZWF0ZUFzc2V0VXNlQ2FzZSksXG4gICAgICBnZXRJbnN0YW5jZTogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICByZXNvbHZlOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCh0b2tlbjogc3RyaW5nKSA9PiB7XG4gICAgICAgIC8vIFJldHVybiBlbXB0eSBtb2NrIHJlcG9zaXRvcmllc1xuICAgICAgICByZXR1cm4ge307XG4gICAgICB9KSxcbiAgICB9IGFzIGFueTtcblxuICAgIChESUNvbnRhaW5lci5nZXRJbnN0YW5jZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrQ29udGFpbmVyKTtcblxuICAgIC8vIENyZWF0ZSBtb2RhbCBpbnN0YW5jZVxuICAgIG1vZGFsID0gbmV3IENyZWF0ZUFzc2V0TW9kYWwoYXBwKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJNb2RhbCBJbml0aWFsaXphdGlvblwiLCAoKSA9PiB7XG4gICAgdGVzdChcInNob3VsZCBjcmVhdGUgbW9kYWwgd2l0aCBkZWZhdWx0IHZhbHVlc1wiLCAoKSA9PiB7XG4gICAgICBleHBlY3QobW9kYWwpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QobW9kYWwuYXBwKS50b0JlKGFwcCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGluaXRpYWxpemUgd2l0aCBESUNvbnRhaW5lclwiLCAoKSA9PiB7XG4gICAgICBleHBlY3QoRElDb250YWluZXIuZ2V0SW5zdGFuY2UpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrQ29udGFpbmVyLmdldENyZWF0ZUFzc2V0VXNlQ2FzZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYXZlIGRlZmF1bHQgYXNzZXQgdmFsdWVzXCIsICgpID0+IHtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5hc3NldFRpdGxlKS50b0JlKFwiXCIpO1xuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLmFzc2V0Q2xhc3MpLnRvQmUoXCJleG9fX0Fzc2V0XCIpO1xuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLmFzc2V0T250b2xvZ3kpLnRvQmUoXCJcIik7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMpLnRvQmVJbnN0YW5jZU9mKE1hcCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGluaXRpYWxpemUgZW1wdHkgcHJvcGVydGllcyBsaXN0XCIsICgpID0+IHtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5wcm9wZXJ0aWVzKS50b0VxdWFsKFtdKTtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5wcm9wZXJ0aWVzQ29udGFpbmVyKS50b0JlTnVsbCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIk1vZGFsIE9wZW5pbmdcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJzaG91bGQgc2V0dXAgVUkgZWxlbWVudHMgd2hlbiBvcGVuZWRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NvbnRlbnRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAobW9kYWwgYXMgYW55KS5jb250ZW50RWwgPSBtb2NrQ29udGVudEVsO1xuXG4gICAgICBhd2FpdCBtb2RhbC5vbk9wZW4oKTtcblxuICAgICAgZXhwZWN0KG1vY2tDb250ZW50RWwuY3JlYXRlRWwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwiaDJcIiwge1xuICAgICAgICB0ZXh0OiBcIkNyZWF0ZSBFeG9Bc3NldFwiLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIHNldHVwIGFsbCByZXF1aXJlZCBmaWVsZHNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NvbnRlbnRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAobW9kYWwgYXMgYW55KS5jb250ZW50RWwgPSBtb2NrQ29udGVudEVsO1xuXG4gICAgICBjb25zdCBzZXR1cFRpdGxlRmllbGRTcHkgPSBqZXN0LnNweU9uKG1vZGFsIGFzIGFueSwgXCJzZXR1cFRpdGxlRmllbGRcIik7XG4gICAgICBjb25zdCBzZXR1cENsYXNzRmllbGRTcHkgPSBqZXN0LnNweU9uKG1vZGFsIGFzIGFueSwgXCJzZXR1cENsYXNzRmllbGRcIik7XG4gICAgICBjb25zdCBzZXR1cE9udG9sb2d5RmllbGRTcHkgPSBqZXN0LnNweU9uKFxuICAgICAgICBtb2RhbCBhcyBhbnksXG4gICAgICAgIFwic2V0dXBPbnRvbG9neUZpZWxkXCIsXG4gICAgICApO1xuICAgICAgY29uc3Qgc2V0dXBQcm9wZXJ0aWVzU2VjdGlvblNweSA9IGplc3Quc3B5T24oXG4gICAgICAgIG1vZGFsIGFzIGFueSxcbiAgICAgICAgXCJzZXR1cFByb3BlcnRpZXNTZWN0aW9uXCIsXG4gICAgICApO1xuICAgICAgY29uc3Qgc2V0dXBBY3Rpb25CdXR0b25zU3B5ID0gamVzdC5zcHlPbihcbiAgICAgICAgbW9kYWwgYXMgYW55LFxuICAgICAgICBcInNldHVwQWN0aW9uQnV0dG9uc1wiLFxuICAgICAgKTtcblxuICAgICAgYXdhaXQgbW9kYWwub25PcGVuKCk7XG5cbiAgICAgIGV4cGVjdChzZXR1cFRpdGxlRmllbGRTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChzZXR1cENsYXNzRmllbGRTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChzZXR1cE9udG9sb2d5RmllbGRTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChzZXR1cFByb3BlcnRpZXNTZWN0aW9uU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3Qoc2V0dXBBY3Rpb25CdXR0b25zU3B5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGhhbmRsZSBlcnJvcnMgZHVyaW5nIG1vZGFsIG9wZW5pbmcgZ3JhY2VmdWxseVwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrQ29udGVudEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIChtb2RhbCBhcyBhbnkpLmNvbnRlbnRFbCA9IG1vY2tDb250ZW50RWw7XG5cbiAgICAgIC8vIE1vY2sgc2V0dXBDbGFzc0ZpZWxkIHRvIHRocm93IGVycm9yXG4gICAgICBqZXN0XG4gICAgICAgIC5zcHlPbihtb2RhbCBhcyBhbnksIFwic2V0dXBDbGFzc0ZpZWxkXCIpXG4gICAgICAgIC5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoXCJTZXR1cCBmYWlsZWRcIikpO1xuXG4gICAgICBhd2FpdCBleHBlY3QobW9kYWwub25PcGVuKCkpLnJlamVjdHMudG9UaHJvdyhcIlNldHVwIGZhaWxlZFwiKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJUaXRsZSBGaWVsZCBTZXR1cFwiLCAoKSA9PiB7XG4gICAgdGVzdChcInNob3VsZCBzZXR1cCB0aXRsZSBmaWVsZCBjb3JyZWN0bHlcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGFpbmVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS5zZXR1cFRpdGxlRmllbGQoY29udGFpbmVyRWwpO1xuXG4gICAgICBleHBlY3QoU2V0dGluZykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCB1cGRhdGUgYXNzZXRUaXRsZSB3aGVuIHRpdGxlIGNoYW5nZXNcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGFpbmVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuXG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS5zZXR1cFRpdGxlRmllbGQoY29udGFpbmVyRWwpO1xuXG4gICAgICAvLyBTaW11bGF0ZSB0aXRsZSBjaGFuZ2VcbiAgICAgIGNvbnN0IHRlc3RUaXRsZSA9IFwiVGVzdCBBc3NldCBUaXRsZVwiO1xuICAgICAgKG1vZGFsIGFzIGFueSkuYXNzZXRUaXRsZSA9IHRlc3RUaXRsZTtcblxuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLmFzc2V0VGl0bGUpLnRvQmUodGVzdFRpdGxlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgaGFuZGxlIGxvbmcgdGl0bGVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnNldHVwVGl0bGVGaWVsZChjb250YWluZXJFbCk7XG5cbiAgICAgIGNvbnN0IGxvbmdUaXRsZSA9IFwiQVwiLnJlcGVhdCgxMDAwKTtcbiAgICAgIChtb2RhbCBhcyBhbnkpLmFzc2V0VGl0bGUgPSBsb25nVGl0bGU7XG5cbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5hc3NldFRpdGxlKS50b0JlKGxvbmdUaXRsZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGhhbmRsZSBzcGVjaWFsIGNoYXJhY3RlcnMgaW4gdGl0bGVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnNldHVwVGl0bGVGaWVsZChjb250YWluZXJFbCk7XG5cbiAgICAgIGNvbnN0IHNwZWNpYWxUaXRsZSA9IFwiVGVzdCFAIyQlXiYqKClfK3t9fDpcXFwiPD4/W11cXFxcOycsLi8gQXNzZXRcIjtcbiAgICAgIChtb2RhbCBhcyBhbnkpLmFzc2V0VGl0bGUgPSBzcGVjaWFsVGl0bGU7XG5cbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5hc3NldFRpdGxlKS50b0JlKHNwZWNpYWxUaXRsZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiQ2xhc3MgRmllbGQgU2V0dXBcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJzaG91bGQgc2V0dXAgY2xhc3MgZmllbGQgY29ycmVjdGx5XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuc2V0dXBDbGFzc0ZpZWxkKGNvbnRhaW5lckVsKTtcblxuICAgICAgZXhwZWN0KFNldHRpbmcpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgaGF2ZSBkZWZhdWx0IGNsYXNzIHZhbHVlXCIsICgpID0+IHtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5hc3NldENsYXNzKS50b0JlKFwiZXhvX19Bc3NldFwiKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgZGlzY292ZXIgY2xhc3NlcyBmcm9tIHZhdWx0IGZpbGVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tGaWxlcyA9IFtcbiAgICAgICAgeyBiYXNlbmFtZTogXCJUZXN0Q2xhc3NcIiwgbmFtZTogXCJUZXN0Q2xhc3MubWRcIiB9LFxuICAgICAgICB7IGJhc2VuYW1lOiBcIkFub3RoZXJDbGFzc1wiLCBuYW1lOiBcIkFub3RoZXJDbGFzcy5tZFwiIH0sXG4gICAgICBdO1xuXG4gICAgICAoYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobW9ja0ZpbGVzKTtcbiAgICAgIChhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUgYXMgamVzdC5Nb2NrKVxuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZSh7XG4gICAgICAgICAgZnJvbnRtYXR0ZXI6IHtcbiAgICAgICAgICAgIGV4b19fSW5zdGFuY2VfY2xhc3M6IFwiZXhvX19DbGFzc1wiLFxuICAgICAgICAgICAgcmRmc19fbGFiZWw6IFwiVGVzdCBDbGFzc1wiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWVPbmNlKHtcbiAgICAgICAgICBmcm9udG1hdHRlcjoge1xuICAgICAgICAgICAgZXhvX19JbnN0YW5jZV9jbGFzczogXCJbW2V4b19fQ2xhc3NdXVwiLFxuICAgICAgICAgICAgcmRmc19fbGFiZWw6IFwiQW5vdGhlciBDbGFzc1wiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb250YWluZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS5zZXR1cENsYXNzRmllbGQoY29udGFpbmVyRWwpO1xuXG4gICAgICBleHBlY3QoYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygyKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgcHJvdmlkZSBkZWZhdWx0IGNsYXNzZXMgd2hlbiBub25lIGZvdW5kXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIChhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShbXSk7XG5cbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnNldHVwQ2xhc3NGaWVsZChjb250YWluZXJFbCk7XG5cbiAgICAgIGV4cGVjdChTZXR0aW5nKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGhhbmRsZSB2YXVsdCBhY2Nlc3MgZXJyb3JzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIChhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcyBhcyBqZXN0Lk1vY2spLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlZhdWx0IGFjY2VzcyBlcnJvclwiKTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBjb250YWluZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBhd2FpdCBleHBlY3QoKG1vZGFsIGFzIGFueSkuc2V0dXBDbGFzc0ZpZWxkKGNvbnRhaW5lckVsKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICBcIlZhdWx0IGFjY2VzcyBlcnJvclwiLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgdXBkYXRlIHByb3BlcnRpZXMgd2hlbiBjbGFzcyBjaGFuZ2VzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNvbnN0IHVwZGF0ZVByb3BlcnRpZXNGb3JDbGFzc1NweSA9IGplc3RcbiAgICAgICAgLnNweU9uKG1vZGFsIGFzIGFueSwgXCJ1cGRhdGVQcm9wZXJ0aWVzRm9yQ2xhc3NcIilcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnNldHVwQ2xhc3NGaWVsZChjb250YWluZXJFbCk7XG5cbiAgICAgIC8vIFNpbXVsYXRlIGNsYXNzIGNoYW5nZVxuICAgICAgY29uc3QgbmV3Q2xhc3MgPSBcImV4b19fVGFza1wiO1xuICAgICAgKG1vZGFsIGFzIGFueSkuYXNzZXRDbGFzcyA9IG5ld0NsYXNzO1xuXG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkuYXNzZXRDbGFzcykudG9CZShuZXdDbGFzcyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiT250b2xvZ3kgRmllbGQgU2V0dXBcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJzaG91bGQgc2V0dXAgb250b2xvZ3kgZmllbGQgY29ycmVjdGx5XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuc2V0dXBPbnRvbG9neUZpZWxkKGNvbnRhaW5lckVsKTtcblxuICAgICAgZXhwZWN0KFNldHRpbmcpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgZGlzY292ZXIgb250b2xvZ2llcyBmcm9tIHZhdWx0IGZpbGVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tGaWxlcyA9IFtcbiAgICAgICAgeyBuYW1lOiBcIiF0ZXN0LW9udG9sb2d5Lm1kXCIsIGJhc2VuYW1lOiBcIiF0ZXN0LW9udG9sb2d5XCIgfSxcbiAgICAgICAgeyBuYW1lOiBcIiFhbm90aGVyLW9udG8ubWRcIiwgYmFzZW5hbWU6IFwiIWFub3RoZXItb250b1wiIH0sXG4gICAgICBdO1xuXG4gICAgICAoYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUobW9ja0ZpbGVzKTtcbiAgICAgIChhcHAubWV0YWRhdGFDYWNoZS5nZXRGaWxlQ2FjaGUgYXMgamVzdC5Nb2NrKVxuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZSh7XG4gICAgICAgICAgZnJvbnRtYXR0ZXI6IHtcbiAgICAgICAgICAgIGV4b19fT250b2xvZ3lfcHJlZml4OiBcInRlc3RcIixcbiAgICAgICAgICAgIHJkZnNfX2xhYmVsOiBcIlRlc3QgT250b2xvZ3lcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9KVxuICAgICAgICAubW9ja1JldHVyblZhbHVlT25jZSh7XG4gICAgICAgICAgZnJvbnRtYXR0ZXI6IHtcbiAgICAgICAgICAgIGV4b19fT250b2xvZ3lfcHJlZml4OiBcImFub3RoZXJcIixcbiAgICAgICAgICAgIHJkZnNfX2xhYmVsOiBcIkFub3RoZXIgT250b2xvZ3lcIixcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcblxuICAgICAgY29uc3QgY29udGFpbmVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuc2V0dXBPbnRvbG9neUZpZWxkKGNvbnRhaW5lckVsKTtcblxuICAgICAgZXhwZWN0KGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGhhbmRsZSBlbXB0eSBvbnRvbG9neSBsaXN0XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIChhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShbXSk7XG5cbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnNldHVwT250b2xvZ3lGaWVsZChjb250YWluZXJFbCk7XG5cbiAgICAgIGV4cGVjdChjb250YWluZXJFbCkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgc2V0IGRlZmF1bHQgb250b2xvZ3kgY29ycmVjdGx5XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIChhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShbXSk7XG5cbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnNldHVwT250b2xvZ3lGaWVsZChjb250YWluZXJFbCk7XG5cbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5hc3NldE9udG9sb2d5KS50b0JlKFwiZXhvXCIpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcIlByb3BlcnRpZXMgU2VjdGlvbiBTZXR1cFwiLCAoKSA9PiB7XG4gICAgdGVzdChcInNob3VsZCBzZXR1cCBwcm9wZXJ0aWVzIHNlY3Rpb24gY29ycmVjdGx5XCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuc2V0dXBQcm9wZXJ0aWVzU2VjdGlvbihjb250YWluZXJFbCk7XG5cbiAgICAgIGV4cGVjdChjb250YWluZXJFbC5jcmVhdGVFbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXCJoM1wiLCB7XG4gICAgICAgIHRleHQ6IFwiUHJvcGVydGllc1wiLFxuICAgICAgICBjbHM6IFwiZXhvY29ydGV4LXByb3BlcnRpZXMtaGVhZGVyXCIsXG4gICAgICB9KTtcbiAgICAgIGV4cGVjdChjb250YWluZXJFbC5jcmVhdGVEaXYpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgY2xzOiBcImV4b2NvcnRleC1wcm9wZXJ0aWVzLWNvbnRhaW5lclwiLFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIHVwZGF0ZSBwcm9wZXJ0aWVzIGZvciBkZWZhdWx0IGNsYXNzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNvbnN0IHVwZGF0ZVByb3BlcnRpZXNGb3JDbGFzc1NweSA9IGplc3RcbiAgICAgICAgLnNweU9uKG1vZGFsIGFzIGFueSwgXCJ1cGRhdGVQcm9wZXJ0aWVzRm9yQ2xhc3NcIilcbiAgICAgICAgLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnNldHVwUHJvcGVydGllc1NlY3Rpb24oY29udGFpbmVyRWwpO1xuXG4gICAgICBleHBlY3QodXBkYXRlUHJvcGVydGllc0ZvckNsYXNzU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcImV4b19fQXNzZXRcIik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGNyZWF0ZSBwcm9wZXJ0aWVzIGNvbnRhaW5lciB3aXRoIGNvcnJlY3QgY2xhc3NcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29udGFpbmVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuc2V0dXBQcm9wZXJ0aWVzU2VjdGlvbihjb250YWluZXJFbCk7XG5cbiAgICAgIGV4cGVjdChjb250YWluZXJFbC5jcmVhdGVEaXYpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKHtcbiAgICAgICAgY2xzOiBcImV4b2NvcnRleC1wcm9wZXJ0aWVzLWNvbnRhaW5lclwiLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiUHJvcGVydGllcyBNYW5hZ2VtZW50XCIsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQcm9wZXJ0aWVzQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIG1vY2tQcm9wZXJ0aWVzQ29udGFpbmVyLmVtcHR5ID0gamVzdC5mbigpO1xuICAgICAgbW9ja1Byb3BlcnRpZXNDb250YWluZXIuY3JlYXRlRWwgPSBqZXN0XG4gICAgICAgIC5mbigpXG4gICAgICAgIC5tb2NrUmV0dXJuVmFsdWUoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInBcIikpO1xuICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydGllc0NvbnRhaW5lciA9IG1vY2tQcm9wZXJ0aWVzQ29udGFpbmVyO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBjbGVhciBleGlzdGluZyBwcm9wZXJ0aWVzIHdoZW4gdXBkYXRpbmcgZm9yIG5ldyBjbGFzc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5zZXQoXCJ0ZXN0XCIsIFwidmFsdWVcIik7XG4gICAgICAoYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoW10pO1xuXG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS51cGRhdGVQcm9wZXJ0aWVzRm9yQ2xhc3MoXCJleG9fX1Rhc2tcIik7XG5cbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5wcm9wZXJ0aWVzQ29udGFpbmVyLmVtcHR5KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuc2l6ZSkudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgYWRkIGRlZmF1bHQgcHJvcGVydGllcyBmb3IgZXhvX19Bc3NldCBjbGFzc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICAoYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMgYXMgamVzdC5Nb2NrKS5tb2NrUmV0dXJuVmFsdWUoW10pO1xuXG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS51cGRhdGVQcm9wZXJ0aWVzRm9yQ2xhc3MoXCJleG9fX0Fzc2V0XCIpO1xuXG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydGllcykudG9IYXZlTGVuZ3RoKDIpOyAvLyBkZXNjcmlwdGlvbiBhbmQgdGFnc1xuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnRpZXNbMF0ubmFtZSkudG9CZShcImRlc2NyaXB0aW9uXCIpO1xuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnRpZXNbMV0ubmFtZSkudG9CZShcInRhZ3NcIik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGRpc2NvdmVyIHByb3BlcnRpZXMgZnJvbSB2YXVsdCBmb3Igc3BlY2lmaWMgY2xhc3NcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0ZpbGVzID0gW3sgYmFzZW5hbWU6IFwicHJvcGVydHlOYW1lXCIsIG5hbWU6IFwicHJvcGVydHlOYW1lLm1kXCIgfV07XG5cbiAgICAgIChhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrRmlsZXMpO1xuICAgICAgKGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGZyb250bWF0dGVyOiB7XG4gICAgICAgICAgZXhvX19JbnN0YW5jZV9jbGFzczogXCJleG9fX1Byb3BlcnR5XCIsXG4gICAgICAgICAgcmRmc19fZG9tYWluOiBcIlRlc3RDbGFzc1wiLFxuICAgICAgICAgIHJkZnNfX2xhYmVsOiBcIlRlc3QgUHJvcGVydHlcIixcbiAgICAgICAgICByZGZzX19jb21tZW50OiBcIkEgdGVzdCBwcm9wZXJ0eVwiLFxuICAgICAgICAgIHJkZnNfX3JhbmdlOiBcInN0cmluZ1wiLFxuICAgICAgICAgIGV4b19fUHJvcGVydHlfaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS51cGRhdGVQcm9wZXJ0aWVzRm9yQ2xhc3MoXCJUZXN0Q2xhc3NcIik7XG5cbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5wcm9wZXJ0aWVzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydGllc1swXS5uYW1lKS50b0JlKFwicHJvcGVydHlOYW1lXCIpO1xuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnRpZXNbMF0uaXNSZXF1aXJlZCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgaGFuZGxlIHByb3BlcnRpZXMgd2l0aCBhcnJheSBkb21haW5zXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tGaWxlcyA9IFtcbiAgICAgICAgeyBiYXNlbmFtZTogXCJtdWx0aURvbWFpblByb3BcIiwgbmFtZTogXCJtdWx0aURvbWFpblByb3AubWRcIiB9LFxuICAgICAgXTtcblxuICAgICAgKGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKG1vY2tGaWxlcyk7XG4gICAgICAoYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0RmlsZUNhY2hlIGFzIGplc3QuTW9jaykubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgZnJvbnRtYXR0ZXI6IHtcbiAgICAgICAgICBleG9fX0luc3RhbmNlX2NsYXNzOiBcImV4b19fUHJvcGVydHlcIixcbiAgICAgICAgICByZGZzX19kb21haW46IFtcIlRlc3RDbGFzc1wiLCBcIkFub3RoZXJDbGFzc1wiXSxcbiAgICAgICAgICByZGZzX19sYWJlbDogXCJNdWx0aSBEb21haW4gUHJvcGVydHlcIixcbiAgICAgICAgICByZGZzX19yYW5nZTogXCJzdHJpbmdcIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS51cGRhdGVQcm9wZXJ0aWVzRm9yQ2xhc3MoXCJUZXN0Q2xhc3NcIik7XG5cbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5wcm9wZXJ0aWVzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydGllc1swXS5uYW1lKS50b0JlKFwibXVsdGlEb21haW5Qcm9wXCIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBtYXAgZGlmZmVyZW50IHJhbmdlcyB0byBjb3JyZWN0IHR5cGVzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIChtb2RhbCBhcyBhbnkpLnByb3BlcnRpZXNDb250YWluZXIgPSBjb250YWluZXJFbDtcblxuICAgICAgLy8gVGVzdCBkaWZmZXJlbnQgcmFuZ2UgbWFwcGluZ3NcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5tYXBSYW5nZVRvVHlwZShcInNlbGVjdFwiKSkudG9CZShcImVudW1cIik7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkubWFwUmFuZ2VUb1R5cGUoXCJib29sZWFuXCIpKS50b0JlKFwiYm9vbGVhblwiKTtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5tYXBSYW5nZVRvVHlwZShcImRhdGVcIikpLnRvQmUoXCJkYXRlXCIpO1xuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLm1hcFJhbmdlVG9UeXBlKFwiaW50ZWdlclwiKSkudG9CZShcIm51bWJlclwiKTtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5tYXBSYW5nZVRvVHlwZShcInN0cmluZ1tdXCIpKS50b0JlKFwiYXJyYXlcIik7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkubWFwUmFuZ2VUb1R5cGUoXCJ0ZXh0XCIpKS50b0JlKFwidGV4dFwiKTtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5tYXBSYW5nZVRvVHlwZShcInVua25vd25cIikpLnRvQmUoXCJzdHJpbmdcIik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGhhbmRsZSBlbnVtIHByb3BlcnRpZXMgd2l0aCBvcHRpb25zXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tGaWxlcyA9IFt7IGJhc2VuYW1lOiBcInN0YXR1c1Byb3BcIiwgbmFtZTogXCJzdGF0dXNQcm9wLm1kXCIgfV07XG5cbiAgICAgIChhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShtb2NrRmlsZXMpO1xuICAgICAgKGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZSBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICAgIGZyb250bWF0dGVyOiB7XG4gICAgICAgICAgZXhvX19JbnN0YW5jZV9jbGFzczogXCJleG9fX1Byb3BlcnR5XCIsXG4gICAgICAgICAgcmRmc19fZG9tYWluOiBcIlRlc3RDbGFzc1wiLFxuICAgICAgICAgIHJkZnNfX3JhbmdlOiBcInNlbGVjdFwiLFxuICAgICAgICAgIGV4b19fUHJvcGVydHlfb3B0aW9uczogW1wiYWN0aXZlXCIsIFwiaW5hY3RpdmVcIiwgXCJwZW5kaW5nXCJdLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnVwZGF0ZVByb3BlcnRpZXNGb3JDbGFzcyhcIlRlc3RDbGFzc1wiKTtcblxuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnRpZXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5wcm9wZXJ0aWVzWzBdLnR5cGUpLnRvQmUoXCJlbnVtXCIpO1xuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnRpZXNbMF0ub3B0aW9ucykudG9FcXVhbChbXG4gICAgICAgIFwiYWN0aXZlXCIsXG4gICAgICAgIFwiaW5hY3RpdmVcIixcbiAgICAgICAgXCJwZW5kaW5nXCIsXG4gICAgICBdKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgc2hvdyBubyBwcm9wZXJ0aWVzIG1lc3NhZ2Ugd2hlbiBub25lIGZvdW5kXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIChhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShbXSk7XG5cbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnVwZGF0ZVByb3BlcnRpZXNGb3JDbGFzcyhcIlVua25vd25DbGFzc1wiKTtcblxuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnRpZXNDb250YWluZXIuY3JlYXRlRWwpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBcInBcIixcbiAgICAgICAge1xuICAgICAgICAgIHRleHQ6IFwiTm8gc3BlY2lmaWMgcHJvcGVydGllcyBmb3IgdGhpcyBjbGFzc1wiLFxuICAgICAgICAgIGNsczogXCJleG9jb3J0ZXgtbm8tcHJvcGVydGllc1wiLFxuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJQcm9wZXJ0eSBGaWVsZCBDcmVhdGlvblwiLCAoKSA9PiB7XG4gICAgbGV0IG1vY2tQcm9wZXJ0aWVzQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbW9ja1Byb3BlcnRpZXNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydGllc0NvbnRhaW5lciA9IG1vY2tQcm9wZXJ0aWVzQ29udGFpbmVyO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBjcmVhdGUgdGV4dCBmaWVsZCBmb3Igc3RyaW5nIHByb3BlcnR5XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiBcImRlc2NyaXB0aW9uXCIsXG4gICAgICAgIGxhYmVsOiBcIkRlc2NyaXB0aW9uXCIsXG4gICAgICAgIHR5cGU6IFwic3RyaW5nXCIsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJBc3NldCBkZXNjcmlwdGlvblwiLFxuICAgICAgfTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuY3JlYXRlUHJvcGVydHlGaWVsZChwcm9wZXJ0eSk7XG5cbiAgICAgIGV4cGVjdChTZXR0aW5nKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGNyZWF0ZSB0ZXh0IGFyZWEgZmllbGQgZm9yIHRleHQgcHJvcGVydHlcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSB7XG4gICAgICAgIG5hbWU6IFwibm90ZXNcIixcbiAgICAgICAgbGFiZWw6IFwiTm90ZXNcIixcbiAgICAgICAgdHlwZTogXCJ0ZXh0XCIsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJBc3NldCBub3Rlc1wiLFxuICAgICAgfTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuY3JlYXRlUHJvcGVydHlGaWVsZChwcm9wZXJ0eSk7XG5cbiAgICAgIGV4cGVjdChTZXR0aW5nKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGNyZWF0ZSBlbnVtIGZpZWxkIGZvciBlbnVtIHByb3BlcnR5XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiBcInN0YXR1c1wiLFxuICAgICAgICBsYWJlbDogXCJTdGF0dXNcIixcbiAgICAgICAgdHlwZTogXCJlbnVtXCIsXG4gICAgICAgIG9wdGlvbnM6IFtcImFjdGl2ZVwiLCBcImluYWN0aXZlXCJdLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJBc3NldCBzdGF0dXNcIixcbiAgICAgIH07XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmNyZWF0ZVByb3BlcnR5RmllbGQocHJvcGVydHkpO1xuXG4gICAgICBleHBlY3QoU2V0dGluZykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBjcmVhdGUgYm9vbGVhbiBmaWVsZCBmb3IgYm9vbGVhbiBwcm9wZXJ0eVwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHtcbiAgICAgICAgbmFtZTogXCJjb21wbGV0ZWRcIixcbiAgICAgICAgbGFiZWw6IFwiQ29tcGxldGVkXCIsXG4gICAgICAgIHR5cGU6IFwiYm9vbGVhblwiLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVzY3JpcHRpb246IFwiV2hldGhlciB0YXNrIGlzIGNvbXBsZXRlZFwiLFxuICAgICAgfTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuY3JlYXRlUHJvcGVydHlGaWVsZChwcm9wZXJ0eSk7XG5cbiAgICAgIGV4cGVjdChTZXR0aW5nKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGNyZWF0ZSBkYXRlIGZpZWxkIGZvciBkYXRlIHByb3BlcnR5XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiBcImR1ZURhdGVcIixcbiAgICAgICAgbGFiZWw6IFwiRHVlIERhdGVcIixcbiAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJUYXNrIGR1ZSBkYXRlXCIsXG4gICAgICB9O1xuXG4gICAgICAobW9kYWwgYXMgYW55KS5jcmVhdGVQcm9wZXJ0eUZpZWxkKHByb3BlcnR5KTtcblxuICAgICAgZXhwZWN0KFNldHRpbmcpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgY3JlYXRlIG51bWJlciBmaWVsZCBmb3IgbnVtYmVyIHByb3BlcnR5XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiBcImVmZm9ydFwiLFxuICAgICAgICBsYWJlbDogXCJFZmZvcnRcIixcbiAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkVzdGltYXRlZCBlZmZvcnQgaW4gaG91cnNcIixcbiAgICAgIH07XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmNyZWF0ZVByb3BlcnR5RmllbGQocHJvcGVydHkpO1xuXG4gICAgICBleHBlY3QoU2V0dGluZykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBjcmVhdGUgYXJyYXkgZmllbGQgZm9yIGFycmF5IHByb3BlcnR5XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiBcInRhZ3NcIixcbiAgICAgICAgbGFiZWw6IFwiVGFnc1wiLFxuICAgICAgICB0eXBlOiBcImFycmF5XCIsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJBc3NldCB0YWdzXCIsXG4gICAgICB9O1xuXG4gICAgICAobW9kYWwgYXMgYW55KS5jcmVhdGVQcm9wZXJ0eUZpZWxkKHByb3BlcnR5KTtcblxuICAgICAgZXhwZWN0KFNldHRpbmcpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgc2hvdyByZXF1aXJlZCBpbmRpY2F0b3IgZm9yIHJlcXVpcmVkIGZpZWxkc1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHtcbiAgICAgICAgbmFtZTogXCJ0aXRsZVwiLFxuICAgICAgICBsYWJlbDogXCJUaXRsZVwiLFxuICAgICAgICB0eXBlOiBcInN0cmluZ1wiLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZXNjcmlwdGlvbjogXCJBc3NldCB0aXRsZVwiLFxuICAgICAgfTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuY3JlYXRlUHJvcGVydHlGaWVsZChwcm9wZXJ0eSk7XG5cbiAgICAgIGV4cGVjdChTZXR0aW5nKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiSW5kaXZpZHVhbCBGaWVsZCBUeXBlIFRlc3RzXCIsICgpID0+IHtcbiAgICBsZXQgbW9ja1NldHRpbmc6IGFueTtcblxuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgbW9ja1NldHRpbmcgPSB7XG4gICAgICAgIGFkZERyb3Bkb3duOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgIGNvbnN0IGRyb3Bkb3duID0geyBhZGRPcHRpb246IGplc3QuZm4oKSwgb25DaGFuZ2U6IGplc3QuZm4oKSB9O1xuICAgICAgICAgIGNhbGxiYWNrKGRyb3Bkb3duKTtcbiAgICAgICAgICByZXR1cm4gbW9ja1NldHRpbmc7XG4gICAgICAgIH0pLFxuICAgICAgICBhZGRUb2dnbGU6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgY29uc3QgdG9nZ2xlID0geyBvbkNoYW5nZTogamVzdC5mbigpIH07XG4gICAgICAgICAgY2FsbGJhY2sodG9nZ2xlKTtcbiAgICAgICAgICByZXR1cm4gbW9ja1NldHRpbmc7XG4gICAgICAgIH0pLFxuICAgICAgICBhZGRUZXh0OiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKChjYWxsYmFjaykgPT4ge1xuICAgICAgICAgIGNvbnN0IHRleHQgPSB7XG4gICAgICAgICAgICBzZXRQbGFjZWhvbGRlcjogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICAgICAgICBvbkNoYW5nZTogamVzdC5mbigpLFxuICAgICAgICAgICAgaW5wdXRFbDogeyB0eXBlOiBcInRleHRcIiB9LFxuICAgICAgICAgIH07XG4gICAgICAgICAgY2FsbGJhY2sodGV4dCk7XG4gICAgICAgICAgcmV0dXJuIG1vY2tTZXR0aW5nO1xuICAgICAgICB9KSxcbiAgICAgICAgYWRkVGV4dEFyZWE6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKGNhbGxiYWNrKSA9PiB7XG4gICAgICAgICAgY29uc3QgdGV4dEFyZWEgPSB7XG4gICAgICAgICAgICBzZXRQbGFjZWhvbGRlcjogamVzdC5mbigpLm1vY2tSZXR1cm5UaGlzKCksXG4gICAgICAgICAgICBvbkNoYW5nZTogamVzdC5mbigpLFxuICAgICAgICAgIH07XG4gICAgICAgICAgY2FsbGJhY2sodGV4dEFyZWEpO1xuICAgICAgICAgIHJldHVybiBtb2NrU2V0dGluZztcbiAgICAgICAgfSksXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBjcmVhdGUgZW51bSBmaWVsZCB3aXRoIGFsbCBvcHRpb25zXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiBcInByaW9yaXR5XCIsXG4gICAgICAgIGxhYmVsOiBcIlByaW9yaXR5XCIsXG4gICAgICAgIHR5cGU6IFwiZW51bVwiLFxuICAgICAgICBvcHRpb25zOiBbXCJsb3dcIiwgXCJtZWRpdW1cIiwgXCJoaWdoXCJdLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmNyZWF0ZUVudW1GaWVsZChtb2NrU2V0dGluZywgcHJvcGVydHkpO1xuXG4gICAgICBleHBlY3QobW9ja1NldHRpbmcuYWRkRHJvcGRvd24pLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgaGFuZGxlIGVudW0gZmllbGQgc2VsZWN0aW9uXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiBcInByaW9yaXR5XCIsXG4gICAgICAgIGxhYmVsOiBcIlByaW9yaXR5XCIsXG4gICAgICAgIHR5cGU6IFwiZW51bVwiLFxuICAgICAgICBvcHRpb25zOiBbXCJsb3dcIiwgXCJtZWRpdW1cIiwgXCJoaWdoXCJdLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmNyZWF0ZUVudW1GaWVsZChtb2NrU2V0dGluZywgcHJvcGVydHkpO1xuXG4gICAgICAvLyBTaW11bGF0ZSBzZWxlY3Rpb25cbiAgICAgIChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLnNldChcInByaW9yaXR5XCIsIFwiaGlnaFwiKTtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5nZXQoXCJwcmlvcml0eVwiKSkudG9CZShcImhpZ2hcIik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGNyZWF0ZSBib29sZWFuIGZpZWxkIHdpdGggdG9nZ2xlXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiBcImFjdGl2ZVwiLFxuICAgICAgICBsYWJlbDogXCJBY3RpdmVcIixcbiAgICAgICAgdHlwZTogXCJib29sZWFuXCIsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuY3JlYXRlQm9vbGVhbkZpZWxkKG1vY2tTZXR0aW5nLCBwcm9wZXJ0eSk7XG5cbiAgICAgIGV4cGVjdChtb2NrU2V0dGluZy5hZGRUb2dnbGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgaGFuZGxlIGJvb2xlYW4gZmllbGQgY2hhbmdlc1wiLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHtcbiAgICAgICAgbmFtZTogXCJhY3RpdmVcIixcbiAgICAgICAgbGFiZWw6IFwiQWN0aXZlXCIsXG4gICAgICAgIHR5cGU6IFwiYm9vbGVhblwiLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmNyZWF0ZUJvb2xlYW5GaWVsZChtb2NrU2V0dGluZywgcHJvcGVydHkpO1xuXG4gICAgICAvLyBTaW11bGF0ZSB0b2dnbGVcbiAgICAgIChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLnNldChcImFjdGl2ZVwiLCB0cnVlKTtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5nZXQoXCJhY3RpdmVcIikpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGNyZWF0ZSBkYXRlIGZpZWxkIHdpdGggY29ycmVjdCBpbnB1dCB0eXBlXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiBcImR1ZURhdGVcIixcbiAgICAgICAgbGFiZWw6IFwiRHVlIERhdGVcIixcbiAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuY3JlYXRlRGF0ZUZpZWxkKG1vY2tTZXR0aW5nLCBwcm9wZXJ0eSk7XG5cbiAgICAgIGV4cGVjdChtb2NrU2V0dGluZy5hZGRUZXh0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGNyZWF0ZSBudW1iZXIgZmllbGQgd2l0aCB2YWxpZGF0aW9uXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiBcImNvdW50XCIsXG4gICAgICAgIGxhYmVsOiBcIkNvdW50XCIsXG4gICAgICAgIHR5cGU6IFwibnVtYmVyXCIsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuY3JlYXRlTnVtYmVyRmllbGQobW9ja1NldHRpbmcsIHByb3BlcnR5KTtcblxuICAgICAgZXhwZWN0KG1vY2tTZXR0aW5nLmFkZFRleHQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgY3JlYXRlIHRleHQgYXJlYSBmaWVsZFwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHtcbiAgICAgICAgbmFtZTogXCJkZXNjcmlwdGlvblwiLFxuICAgICAgICBsYWJlbDogXCJEZXNjcmlwdGlvblwiLFxuICAgICAgICB0eXBlOiBcInRleHRcIixcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICB9O1xuXG4gICAgICAobW9kYWwgYXMgYW55KS5jcmVhdGVUZXh0QXJlYUZpZWxkKG1vY2tTZXR0aW5nLCBwcm9wZXJ0eSk7XG5cbiAgICAgIGV4cGVjdChtb2NrU2V0dGluZy5hZGRUZXh0QXJlYSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBjcmVhdGUgYXJyYXkgZmllbGQgZm9yIHRhZ3NcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSB7XG4gICAgICAgIG5hbWU6IFwidGFnc1wiLFxuICAgICAgICBsYWJlbDogXCJUYWdzXCIsXG4gICAgICAgIHR5cGU6IFwiYXJyYXlcIixcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICB9O1xuXG4gICAgICAobW9kYWwgYXMgYW55KS5jcmVhdGVBcnJheUZpZWxkKG1vY2tTZXR0aW5nLCBwcm9wZXJ0eSk7XG5cbiAgICAgIGV4cGVjdChtb2NrU2V0dGluZy5hZGRUZXh0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGNyZWF0ZSBiYXNpYyB0ZXh0IGZpZWxkIGFzIGZhbGxiYWNrXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiBcImdlbmVyaWNcIixcbiAgICAgICAgbGFiZWw6IFwiR2VuZXJpY1wiLFxuICAgICAgICB0eXBlOiBcInVua25vd25cIixcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICB9O1xuXG4gICAgICAobW9kYWwgYXMgYW55KS5jcmVhdGVUZXh0RmllbGQobW9ja1NldHRpbmcsIHByb3BlcnR5KTtcblxuICAgICAgZXhwZWN0KG1vY2tTZXR0aW5nLmFkZFRleHQpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJBY3Rpb24gQnV0dG9ucyBTZXR1cFwiLCAoKSA9PiB7XG4gICAgdGVzdChcInNob3VsZCBzZXR1cCBjcmVhdGUgYnV0dG9uXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuc2V0dXBBY3Rpb25CdXR0b25zKGNvbnRhaW5lckVsKTtcblxuICAgICAgZXhwZWN0KFNldHRpbmcpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgY2FsbCBjcmVhdGVBc3NldCB3aGVuIGNyZWF0ZSBidXR0b24gaXMgY2xpY2tlZFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjcmVhdGVBc3NldFNweSA9IGplc3RcbiAgICAgICAgLnNweU9uKG1vZGFsIGFzIGFueSwgXCJjcmVhdGVBc3NldFwiKVxuICAgICAgICAubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKTtcbiAgICAgIGNvbnN0IGNvbnRhaW5lckVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuc2V0dXBBY3Rpb25CdXR0b25zKGNvbnRhaW5lckVsKTtcblxuICAgICAgLy8gVGhlIGJ1dHRvbiBjbGljayBpcyBoYW5kbGVkIHRocm91Z2ggdGhlIFNldHRpbmcgbW9ja1xuICAgICAgZXhwZWN0KFNldHRpbmcpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJBc3NldCBDcmVhdGlvblwiLCAoKSA9PiB7XG4gICAgdGVzdChcInNob3VsZCBjYWxsIGNyZWF0ZUFzc2V0VXNlQ2FzZS5leGVjdXRlIHdoZW4gY3JlYXRpbmcgYXNzZXRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NyZWF0ZUFzc2V0VXNlQ2FzZS5leGVjdXRlLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgYXNzZXRJZDogXCJ0ZXN0LWlkXCIsXG4gICAgICAgIG1lc3NhZ2U6IFwiQXNzZXQgY3JlYXRlZCBzdWNjZXNzZnVsbHlcIixcbiAgICAgIH0pO1xuXG4gICAgICAobW9kYWwgYXMgYW55KS5hc3NldFRpdGxlID0gXCJUZXN0IEFzc2V0XCI7XG4gICAgICAobW9kYWwgYXMgYW55KS5hc3NldENsYXNzID0gXCJleG9fX1Rhc2tcIjtcbiAgICAgIChtb2RhbCBhcyBhbnkpLmFzc2V0T250b2xvZ3kgPSBcImV4b1wiO1xuICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuc2V0KFwicHJpb3JpdHlcIiwgXCJoaWdoXCIpO1xuXG4gICAgICBjb25zdCBjbG9zZVNweSA9IGplc3Quc3B5T24obW9kYWwsIFwiY2xvc2VcIikubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuY3JlYXRlQXNzZXQoKTtcblxuICAgICAgZXhwZWN0KG1vY2tDcmVhdGVBc3NldFVzZUNhc2UuZXhlY3V0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoe1xuICAgICAgICB0aXRsZTogXCJUZXN0IEFzc2V0XCIsXG4gICAgICAgIGNsYXNzTmFtZTogXCJleG9fX1Rhc2tcIixcbiAgICAgICAgb250b2xvZ3lQcmVmaXg6IFwiZXhvXCIsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBwcmlvcml0eTogXCJoaWdoXCIsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KE5vdGljZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXCJBc3NldCBjcmVhdGVkIHN1Y2Nlc3NmdWxseVwiKTtcbiAgICAgIGV4cGVjdChjbG9zZVNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBzaG93IGVycm9yIG5vdGljZSB3aGVuIGFzc2V0IGNyZWF0aW9uIGZhaWxzXCIsIGFzeW5jICgpID0+IHtcbiAgICAgIG1vY2tDcmVhdGVBc3NldFVzZUNhc2UuZXhlY3V0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBhc3NldElkOiBcIlwiLFxuICAgICAgICBtZXNzYWdlOiBcIkNyZWF0aW9uIGZhaWxlZFwiLFxuICAgICAgfSk7XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmFzc2V0VGl0bGUgPSBcIlRlc3QgQXNzZXRcIjtcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuY3JlYXRlQXNzZXQoKTtcblxuICAgICAgZXhwZWN0KE5vdGljZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXCJGYWlsZWQgdG8gY3JlYXRlIGFzc2V0XCIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgZXJyb3JzIGR1cmluZyBhc3NldCBjcmVhdGlvblwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvciA9IG5ldyBFcnJvcihcIk5ldHdvcmsgZXJyb3JcIik7XG4gICAgICBtb2NrQ3JlYXRlQXNzZXRVc2VDYXNlLmV4ZWN1dGUubW9ja1JlamVjdGVkVmFsdWUoZXJyb3IpO1xuXG4gICAgICAobW9kYWwgYXMgYW55KS5hc3NldFRpdGxlID0gXCJUZXN0IEFzc2V0XCI7XG5cbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLmNyZWF0ZUFzc2V0KCk7XG5cbiAgICAgIGV4cGVjdChOb3RpY2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwiRXJyb3I6IE5ldHdvcmsgZXJyb3JcIik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGNvbnZlcnQgcHJvcGVydHkgdmFsdWVzIHRvIHBsYWluIG9iamVjdFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ3JlYXRlQXNzZXRVc2VDYXNlLmV4ZWN1dGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBhc3NldElkOiBcInRlc3QtaWRcIixcbiAgICAgICAgbWVzc2FnZTogXCJTdWNjZXNzXCIsXG4gICAgICB9KTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuYXNzZXRUaXRsZSA9IFwiVGVzdCBBc3NldFwiO1xuICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuc2V0KFwicHJvcDFcIiwgXCJ2YWx1ZTFcIik7XG4gICAgICAobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5zZXQoXCJwcm9wMlwiLCBcInZhbHVlMlwiKTtcblxuICAgICAgYXdhaXQgKG1vZGFsIGFzIGFueSkuY3JlYXRlQXNzZXQoKTtcblxuICAgICAgZXhwZWN0KG1vY2tDcmVhdGVBc3NldFVzZUNhc2UuZXhlY3V0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBwcm9wMTogXCJ2YWx1ZTFcIixcbiAgICAgICAgICAgIHByb3AyOiBcInZhbHVlMlwiLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgaGFuZGxlIGVtcHR5IHByb3BlcnR5IHZhbHVlc1wiLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ3JlYXRlQXNzZXRVc2VDYXNlLmV4ZWN1dGUubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBhc3NldElkOiBcInRlc3QtaWRcIixcbiAgICAgICAgbWVzc2FnZTogXCJTdWNjZXNzXCIsXG4gICAgICB9KTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuYXNzZXRUaXRsZSA9IFwiVGVzdCBBc3NldFwiO1xuXG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS5jcmVhdGVBc3NldCgpO1xuXG4gICAgICBleHBlY3QobW9ja0NyZWF0ZUFzc2V0VXNlQ2FzZS5leGVjdXRlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIHByb3BlcnRpZXM6IHt9LFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiTW9kYWwgQ2xlYW51cFwiLCAoKSA9PiB7XG4gICAgdGVzdChcInNob3VsZCBjbGVhciBjb250ZW50IG9uIGNsb3NlXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tDb250ZW50RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY29uc3QgZW1wdHlTcHkgPSBqZXN0LnNweU9uKG1vY2tDb250ZW50RWwsIFwiZW1wdHlcIik7XG4gICAgICAobW9kYWwgYXMgYW55KS5jb250ZW50RWwgPSBtb2NrQ29udGVudEVsO1xuXG4gICAgICBtb2RhbC5vbkNsb3NlKCk7XG5cbiAgICAgIGV4cGVjdChlbXB0eVNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgRE9NIGNsZWFudXAgZmFsbGJhY2tcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NvbnRlbnRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICAvLyBSZW1vdmUgdGhlIGVtcHR5IG1ldGhvZCB0byB0ZXN0IGZhbGxiYWNrXG4gICAgICAobW9ja0NvbnRlbnRFbCBhcyBhbnkpLmVtcHR5ID0gdW5kZWZpbmVkO1xuXG4gICAgICBjb25zdCBjaGlsZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBtb2NrQ29udGVudEVsLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICAgIChtb2RhbCBhcyBhbnkpLmNvbnRlbnRFbCA9IG1vY2tDb250ZW50RWw7XG5cbiAgICAgIG1vZGFsLm9uQ2xvc2UoKTtcblxuICAgICAgLy8gU2hvdWxkIHN0aWxsIGNvbXBsZXRlIHdpdGhvdXQgZXJyb3JcbiAgICAgIGV4cGVjdChtb2NrQ29udGVudEVsLmNoaWxkcmVuLmxlbmd0aCkudG9CZSgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJJbnB1dCBWYWxpZGF0aW9uXCIsICgpID0+IHtcbiAgICB0ZXN0KFwic2hvdWxkIGhhbmRsZSBlbXB0eSB0aXRsZSBmaWVsZFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ3JlYXRlQXNzZXRVc2VDYXNlLmV4ZWN1dGUubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcihcIkFzc2V0IHRpdGxlIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgKTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuYXNzZXRUaXRsZSA9IFwiXCI7XG5cbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLmNyZWF0ZUFzc2V0KCk7XG5cbiAgICAgIGV4cGVjdChOb3RpY2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwiRXJyb3I6IEFzc2V0IHRpdGxlIGlzIHJlcXVpcmVkXCIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgbWlzc2luZyBjbGFzcyBmaWVsZFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ3JlYXRlQXNzZXRVc2VDYXNlLmV4ZWN1dGUubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcihcIkFzc2V0IGNsYXNzIGlzIHJlcXVpcmVkXCIpLFxuICAgICAgKTtcblxuICAgICAgKG1vZGFsIGFzIGFueSkuYXNzZXRUaXRsZSA9IFwiVGVzdFwiO1xuICAgICAgKG1vZGFsIGFzIGFueSkuYXNzZXRDbGFzcyA9IFwiXCI7XG5cbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLmNyZWF0ZUFzc2V0KCk7XG5cbiAgICAgIGV4cGVjdChOb3RpY2UpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwiRXJyb3I6IEFzc2V0IGNsYXNzIGlzIHJlcXVpcmVkXCIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgbWlzc2luZyBvbnRvbG9neSBmaWVsZFwiLCBhc3luYyAoKSA9PiB7XG4gICAgICBtb2NrQ3JlYXRlQXNzZXRVc2VDYXNlLmV4ZWN1dGUubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcihcIk9udG9sb2d5IHByZWZpeCBpcyByZXF1aXJlZFwiKSxcbiAgICAgICk7XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmFzc2V0VGl0bGUgPSBcIlRlc3RcIjtcbiAgICAgIChtb2RhbCBhcyBhbnkpLmFzc2V0T250b2xvZ3kgPSBcIlwiO1xuXG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS5jcmVhdGVBc3NldCgpO1xuXG4gICAgICBleHBlY3QoTm90aWNlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcIkVycm9yOiBPbnRvbG9neSBwcmVmaXggaXMgcmVxdWlyZWRcIik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGhhbmRsZSB3aGl0ZXNwYWNlLW9ubHkgdGl0bGVcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgbW9ja0NyZWF0ZUFzc2V0VXNlQ2FzZS5leGVjdXRlLm1vY2tSZWplY3RlZFZhbHVlKFxuICAgICAgICBuZXcgRXJyb3IoXCJBc3NldCB0aXRsZSBpcyByZXF1aXJlZFwiKSxcbiAgICAgICk7XG5cbiAgICAgIChtb2RhbCBhcyBhbnkpLmFzc2V0VGl0bGUgPSBcIiAgIFxcdFxcbiAgIFwiO1xuXG4gICAgICBhd2FpdCAobW9kYWwgYXMgYW55KS5jcmVhdGVBc3NldCgpO1xuXG4gICAgICBleHBlY3QoTm90aWNlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcIkVycm9yOiBBc3NldCB0aXRsZSBpcyByZXF1aXJlZFwiKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJQcm9wZXJ0eSBWYWx1ZSBIYW5kbGluZ1wiLCAoKSA9PiB7XG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgYXJyYXkgdmFsdWVzIGNvcnJlY3RseVwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9wZXJ0eSA9IHtcbiAgICAgICAgbmFtZTogXCJ0YWdzXCIsXG4gICAgICAgIGxhYmVsOiBcIlRhZ3NcIixcbiAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVzY3JpcHRpb246IFwiQXNzZXQgdGFnc1wiLFxuICAgICAgfTtcblxuICAgICAgLy8gU2ltdWxhdGUgYXJyYXkgaW5wdXQgcHJvY2Vzc2luZ1xuICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuc2V0KHByb3BlcnR5Lm5hbWUsIFtcbiAgICAgICAgXCJ0YWcxXCIsXG4gICAgICAgIFwidGFnMlwiLFxuICAgICAgICBcInRhZzNcIixcbiAgICAgIF0pO1xuXG4gICAgICBjb25zdCB2YWx1ZXMgPSAobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5nZXQoXCJ0YWdzXCIpO1xuICAgICAgZXhwZWN0KHZhbHVlcykudG9FcXVhbChbXCJ0YWcxXCIsIFwidGFnMlwiLCBcInRhZzNcIl0pO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgd2lraSBsaW5rIHZhbHVlcyBjb3JyZWN0bHlcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSB7XG4gICAgICAgIG5hbWU6IFwicmVsYXRlZFRhc2tzXCIsXG4gICAgICAgIGxhYmVsOiBcIlJlbGF0ZWQgVGFza3NcIixcbiAgICAgICAgdHlwZTogXCJhcnJheVwiLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVzY3JpcHRpb246IFwiUmVsYXRlZCB0YXNrIGxpbmtzXCIsXG4gICAgICB9O1xuXG4gICAgICAvLyBTaW11bGF0ZSB3aWtpIGxpbmsgcHJvY2Vzc2luZ1xuICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuc2V0KHByb3BlcnR5Lm5hbWUsIFtcbiAgICAgICAgXCJbW1Rhc2sgMV1dXCIsXG4gICAgICAgIFwiW1tUYXNrIDJdXVwiLFxuICAgICAgXSk7XG5cbiAgICAgIGNvbnN0IHZhbHVlcyA9IChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLmdldChcInJlbGF0ZWRUYXNrc1wiKTtcbiAgICAgIGV4cGVjdCh2YWx1ZXMpLnRvRXF1YWwoW1wiW1tUYXNrIDFdXVwiLCBcIltbVGFzayAyXV1cIl0pO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgbnVtYmVyIHBhcnNpbmcgY29ycmVjdGx5XCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiBcImVmZm9ydFwiLFxuICAgICAgICBsYWJlbDogXCJFZmZvcnRcIixcbiAgICAgICAgdHlwZTogXCJudW1iZXJcIixcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBcIkVmZm9ydCBpbiBob3Vyc1wiLFxuICAgICAgfTtcblxuICAgICAgLy8gU2ltdWxhdGUgbnVtYmVyIGlucHV0XG4gICAgICAobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5zZXQocHJvcGVydHkubmFtZSwgNDIpO1xuXG4gICAgICBjb25zdCB2YWx1ZSA9IChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLmdldChcImVmZm9ydFwiKTtcbiAgICAgIGV4cGVjdCh2YWx1ZSkudG9CZSg0Mik7XG4gICAgICBleHBlY3QodHlwZW9mIHZhbHVlKS50b0JlKFwibnVtYmVyXCIpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgaW52YWxpZCBudW1iZXIgaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgcHJvcGVydHkgPSB7XG4gICAgICAgIG5hbWU6IFwiZWZmb3J0XCIsXG4gICAgICAgIGxhYmVsOiBcIkVmZm9ydFwiLFxuICAgICAgICB0eXBlOiBcIm51bWJlclwiLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIC8vIFNob3VsZCBub3Qgc2V0IGludmFsaWQgbnVtYmVyc1xuICAgICAgY29uc3QgaW52YWxpZE51bWJlciA9IFwibm90LWEtbnVtYmVyXCI7XG4gICAgICBpZiAoaXNOYU4ocGFyc2VGbG9hdChpbnZhbGlkTnVtYmVyKSkpIHtcbiAgICAgICAgLy8gUHJvcGVydHkgc2hvdWxkIG5vdCBiZSBzZXRcbiAgICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLmhhcyhcImVmZm9ydFwiKSkudG9CZShmYWxzZSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGNsZWFyIHByb3BlcnR5IHZhbHVlcyB3aGVuIGVtcHR5XCIsICgpID0+IHtcbiAgICAgIChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLnNldChcInRlc3RcIiwgXCJ2YWx1ZVwiKTtcblxuICAgICAgLy8gU2ltdWxhdGUgY2xlYXJpbmcgYSBmaWVsZFxuICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuZGVsZXRlKFwidGVzdFwiKTtcblxuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLmhhcyhcInRlc3RcIikpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgZGF0ZSBpbnB1dCB2YWxpZGF0aW9uXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiBcImR1ZURhdGVcIixcbiAgICAgICAgbGFiZWw6IFwiRHVlIERhdGVcIixcbiAgICAgICAgdHlwZTogXCJkYXRlXCIsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfTtcblxuICAgICAgLy8gVmFsaWQgZGF0ZVxuICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuc2V0KHByb3BlcnR5Lm5hbWUsIFwiMjAyNC0xMi0zMVwiKTtcbiAgICAgIGV4cGVjdCgobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5nZXQoXCJkdWVEYXRlXCIpKS50b0JlKFwiMjAyNC0xMi0zMVwiKTtcblxuICAgICAgLy8gSW52YWxpZCBkYXRlIHNob3VsZCBub3QgYmUgc2V0XG4gICAgICBjb25zdCBpbnZhbGlkRGF0ZSA9IFwibm90LWEtZGF0ZVwiO1xuICAgICAgaWYgKGlzTmFOKERhdGUucGFyc2UoaW52YWxpZERhdGUpKSkge1xuICAgICAgICAobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5kZWxldGUoXCJkdWVEYXRlXCIpO1xuICAgICAgfVxuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLmhhcyhcImR1ZURhdGVcIikpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcInNob3VsZCBoYW5kbGUgYm9vbGVhbiB0b2dnbGUgdmFsdWVzXCIsICgpID0+IHtcbiAgICAgIGNvbnN0IHByb3BlcnR5ID0ge1xuICAgICAgICBuYW1lOiBcImFjdGl2ZVwiLFxuICAgICAgICBsYWJlbDogXCJBY3RpdmVcIixcbiAgICAgICAgdHlwZTogXCJib29sZWFuXCIsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgfTtcblxuICAgICAgLy8gVGVzdCB0cnVlIHZhbHVlXG4gICAgICAobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5zZXQocHJvcGVydHkubmFtZSwgdHJ1ZSk7XG4gICAgICBleHBlY3QoKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuZ2V0KFwiYWN0aXZlXCIpKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyBUZXN0IGZhbHNlIHZhbHVlXG4gICAgICAobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5zZXQocHJvcGVydHkubmFtZSwgZmFsc2UpO1xuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLmdldChcImFjdGl2ZVwiKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KFwic2hvdWxkIGhhbmRsZSBjb21wbGV4IGFycmF5IHBhcnNpbmdcIiwgKCkgPT4ge1xuICAgICAgY29uc3QgaW5wdXQgPSAnW1tMaW5rIDFdXSwgW1tMaW5rIDJdXSwgc2ltcGxlLCBcInF1b3RlZCBpdGVtXCInO1xuICAgICAgY29uc3QgbGlua3MgPSBpbnB1dC5tYXRjaCgvXFxbXFxbKFteXFxdXSspXFxdXFxdL2cpIHx8IFtdO1xuICAgICAgY29uc3QgaXRlbXMgPSBpbnB1dFxuICAgICAgICAuc3BsaXQoXCIsXCIpXG4gICAgICAgIC5tYXAoKHMpID0+IHMudHJpbSgpKVxuICAgICAgICAuZmlsdGVyKChzKSA9PiBzKTtcblxuICAgICAgaWYgKGxpbmtzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydHlWYWx1ZXMuc2V0KFwidGVzdFwiLCBsaW5rcyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAobW9kYWwgYXMgYW55KS5wcm9wZXJ0eVZhbHVlcy5zZXQoXCJ0ZXN0XCIsIGl0ZW1zKTtcbiAgICAgIH1cblxuICAgICAgZXhwZWN0KChtb2RhbCBhcyBhbnkpLnByb3BlcnR5VmFsdWVzLmdldChcInRlc3RcIikpLnRvRXF1YWwoW1xuICAgICAgICBcIltbTGluayAxXV1cIixcbiAgICAgICAgXCJbW0xpbmsgMl1dXCIsXG4gICAgICBdKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJDb250YWluZXIgQ2xlYW51cCBTY2VuYXJpb3NcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJzaG91bGQgaGFuZGxlIHByb3BlcnRpZXMgY29udGFpbmVyIGNsZWFudXAgd2l0aCBPYnNpZGlhbiBtZXRob2RcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBtb2NrQ29udGFpbmVyLmVtcHR5ID0gamVzdC5mbigpO1xuICAgICAgKG1vZGFsIGFzIGFueSkucHJvcGVydGllc0NvbnRhaW5lciA9IG1vY2tDb250YWluZXI7XG5cbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnVwZGF0ZVByb3BlcnRpZXNGb3JDbGFzcyhcIlRlc3RDbGFzc1wiKTtcblxuICAgICAgZXhwZWN0KG1vY2tDb250YWluZXIuZW1wdHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJzaG91bGQgaGFuZGxlIHByb3BlcnRpZXMgY29udGFpbmVyIGNsZWFudXAgd2l0aCBET00gZmFsbGJhY2tcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICBjb25zdCBjaGlsZDEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY29uc3QgY2hpbGQyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIG1vY2tDb250YWluZXIuYXBwZW5kQ2hpbGQoY2hpbGQxKTtcbiAgICAgIG1vY2tDb250YWluZXIuYXBwZW5kQ2hpbGQoY2hpbGQyKTtcblxuICAgICAgLy8gUmVtb3ZlIE9ic2lkaWFuIGVtcHR5IG1ldGhvZCB0byB0ZXN0IGZhbGxiYWNrXG4gICAgICAobW9ja0NvbnRhaW5lciBhcyBhbnkpLmVtcHR5ID0gdW5kZWZpbmVkO1xuXG4gICAgICAobW9kYWwgYXMgYW55KS5wcm9wZXJ0aWVzQ29udGFpbmVyID0gbW9ja0NvbnRhaW5lcjtcbiAgICAgIChhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcyBhcyBqZXN0Lk1vY2spLm1vY2tSZXR1cm5WYWx1ZShbXSk7XG5cbiAgICAgIGF3YWl0IChtb2RhbCBhcyBhbnkpLnVwZGF0ZVByb3BlcnRpZXNGb3JDbGFzcyhcIlRlc3RDbGFzc1wiKTtcblxuICAgICAgZXhwZWN0KG1vY2tDb250YWluZXIuY2hpbGRyZW4ubGVuZ3RoKS50b0JlKDEpOyAvLyBTaG91bGQgaGF2ZSB0aGUgXCJubyBwcm9wZXJ0aWVzXCIgbWVzc2FnZVxuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sInZlcnNpb24iOjN9