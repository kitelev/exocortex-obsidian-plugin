f5d4dd2613d6c0692dc463124f854dd7
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.moment = exports.debounce = exports.requestUrl = exports.normalizePath = exports.FileManager = exports.MarkdownRenderer = exports.Component = exports.MetadataCache = exports.Workspace = exports.Vault = exports.App = exports.WorkspaceLeaf = exports.TFile = exports.MarkdownView = exports.Notice = exports.DropdownComponent = exports.ButtonComponent = exports.ToggleComponent = exports.TextAreaComponent = exports.TextComponent = exports.Setting = exports.PluginSettingTab = exports.Modal = exports.Plugin = void 0;
const tslib_1 = require("tslib");
// Setup DOM extensions
if (typeof document !== 'undefined') {
    const proto = HTMLElement.prototype;
    if (!proto.createEl) {
        proto.createEl = function (tag, options) {
            const el = document.createElement(tag);
            if (options === null || options === void 0 ? void 0 : options.text)
                el.textContent = options.text;
            if (options === null || options === void 0 ? void 0 : options.cls)
                el.className = options.cls;
            this.appendChild(el);
            return el;
        };
    }
    if (!proto.createDiv) {
        proto.createDiv = function (options) {
            const el = document.createElement('div');
            if (options === null || options === void 0 ? void 0 : options.cls)
                el.className = options.cls;
            this.appendChild(el);
            return el;
        };
    }
    if (!proto.empty) {
        proto.empty = function () {
            while (this.firstChild) {
                this.removeChild(this.firstChild);
            }
        };
    }
}
class Plugin {
    constructor(app, manifest) {
        this.app = app;
        this.manifest = manifest;
    }
    loadData() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            return {};
        });
    }
    saveData(data) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () { });
    }
    addCommand(command) { }
    addRibbonIcon(icon, title, callback) {
        const el = document.createElement('div');
        el.addClass = jest.fn();
        return el;
    }
    addSettingTab(settingTab) { }
    registerEvent(event) { }
    registerInterval(interval) {
        return interval;
    }
    registerMarkdownCodeBlockProcessor(language, handler) {
        // Mock implementation for SPARQL processor registration
        // Store the handler for potential testing
        this.codeBlockProcessor = handler;
    }
    registerMarkdownPostProcessor(processor) {
        this.markdownPostProcessor = processor;
    }
    registerView(type, viewCreator) {
        this.registeredViews = this.registeredViews || {};
        this.registeredViews[type] = viewCreator;
    }
    addStatusBarItem() {
        return document.createElement('div');
    }
    onload() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            // Override in actual plugin
        });
    }
    onunload() {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            // Override in actual plugin
        });
    }
}
exports.Plugin = Plugin;
class Modal {
    constructor(app) {
        this.app = app;
        this.contentEl = document.createElement('div');
    }
    open() { }
    close() { }
    onOpen() { }
    onClose() { }
}
exports.Modal = Modal;
class PluginSettingTab {
    constructor(app, plugin) {
        this.app = app;
        this.containerEl = document.createElement('div');
    }
    display() { }
    hide() { }
}
exports.PluginSettingTab = PluginSettingTab;
class Setting {
    constructor(containerEl) {
        this.containerEl = containerEl;
        this.nameEl = document.createElement('div');
        this.descEl = document.createElement('div');
        this.controlEl = document.createElement('div');
        // Add Obsidian-specific methods to container
        this.setupContainerMethods(containerEl);
    }
    setupContainerMethods(el) {
        if (!el.createEl) {
            el.createEl = function (tag, options) {
                const element = document.createElement(tag);
                if (options === null || options === void 0 ? void 0 : options.text)
                    element.textContent = options.text;
                if (options === null || options === void 0 ? void 0 : options.cls)
                    element.className = options.cls;
                this.appendChild(element);
                return element;
            };
        }
        if (!el.createDiv) {
            el.createDiv = function (options) {
                const element = document.createElement('div');
                if (options === null || options === void 0 ? void 0 : options.cls)
                    element.className = options.cls;
                this.appendChild(element);
                return element;
            };
        }
        if (!el.empty) {
            el.empty = function () {
                while (this.firstChild) {
                    this.removeChild(this.firstChild);
                }
            };
        }
    }
    setName(name) {
        return this;
    }
    setDesc(desc) {
        return this;
    }
    addText(cb) {
        cb(new TextComponent(this.containerEl));
        return this;
    }
    addTextArea(cb) {
        cb(new TextAreaComponent(this.containerEl));
        return this;
    }
    addToggle(cb) {
        cb(new ToggleComponent(this.containerEl));
        return this;
    }
    addButton(cb) {
        cb(new ButtonComponent(this.containerEl));
        return this;
    }
    addDropdown(cb) {
        cb(new DropdownComponent(this.containerEl));
        return this;
    }
}
exports.Setting = Setting;
class TextComponent {
    constructor(containerEl) {
        this.containerEl = containerEl;
        this.inputEl = document.createElement('input');
    }
    setPlaceholder(placeholder) {
        return this;
    }
    setValue(value) {
        this.inputEl.value = value;
        return this;
    }
    onChange(callback) {
        return this;
    }
}
exports.TextComponent = TextComponent;
class TextAreaComponent {
    constructor(containerEl) {
        this.containerEl = containerEl;
        this.inputEl = document.createElement('textarea');
    }
    setPlaceholder(placeholder) {
        return this;
    }
    setValue(value) {
        this.inputEl.value = value;
        return this;
    }
    onChange(callback) {
        return this;
    }
}
exports.TextAreaComponent = TextAreaComponent;
class ToggleComponent {
    constructor(containerEl) {
        this.containerEl = containerEl;
        this.toggleEl = document.createElement('input');
    }
    setValue(value) {
        return this;
    }
    onChange(callback) {
        return this;
    }
}
exports.ToggleComponent = ToggleComponent;
class ButtonComponent {
    constructor(containerEl) {
        this.containerEl = containerEl;
        this.buttonEl = document.createElement('button');
    }
    setButtonText(text) {
        return this;
    }
    setCta() {
        return this;
    }
    onClick(callback) {
        return this;
    }
}
exports.ButtonComponent = ButtonComponent;
class DropdownComponent {
    constructor(containerEl) {
        this.containerEl = containerEl;
        this.selectEl = document.createElement('select');
        containerEl.appendChild(this.selectEl);
    }
    addOption(value, display) {
        const option = document.createElement('option');
        option.value = value;
        option.textContent = display || value;
        this.selectEl.appendChild(option);
        return this;
    }
    setValue(value) {
        this.selectEl.value = value;
        return this;
    }
    onChange(callback) {
        this.selectEl.addEventListener('change', () => callback(this.selectEl.value));
        return this;
    }
}
exports.DropdownComponent = DropdownComponent;
class Notice {
    constructor(message) { }
}
exports.Notice = Notice;
class MarkdownView {
    constructor() {
        this.previewMode = {
            rerender: jest.fn()
        };
    }
}
exports.MarkdownView = MarkdownView;
class TFile {
    constructor(path) {
        var _a;
        this.path = path || '';
        this.basename = path ? (((_a = path.split('/').pop()) === null || _a === void 0 ? void 0 : _a.replace(/\.[^/.]+$/, '')) || '') : '';
        this.extension = path ? (path.split('.').pop() || '') : '';
    }
}
exports.TFile = TFile;
class WorkspaceLeaf {
    constructor() {
        this.view = null;
    }
    openFile(file) {
        return Promise.resolve();
    }
}
exports.WorkspaceLeaf = WorkspaceLeaf;
class App {
    constructor() {
        this.vault = new Vault();
        this.workspace = new Workspace();
        this.metadataCache = new MetadataCache();
    }
}
exports.App = App;
class Vault {
    constructor() {
        this.mockFiles = [];
        this.adapter = {
            read: jest.fn().mockRejectedValue(new Error('File not found')),
            write: jest.fn().mockResolvedValue(undefined),
            exists: jest.fn().mockResolvedValue(false),
            mkdir: jest.fn().mockResolvedValue(undefined),
            remove: jest.fn().mockResolvedValue(undefined),
            list: jest.fn().mockResolvedValue({ files: [], folders: [] })
        };
    }
    getFiles() {
        return this.mockFiles;
    }
    getMarkdownFiles() {
        return this.mockFiles.filter(file => file.extension === 'md');
    }
    getAbstractFileByPath(path) {
        return this.mockFiles.find(file => file.path === path) || null;
    }
    create(path, content) {
        const file = new TFile(path);
        this.mockFiles.push(file);
        return Promise.resolve(file);
    }
    read(file) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            if (typeof file === 'string') {
                // Mock reading by path
                return Promise.resolve('Mock file content');
            }
            // Mock reading from TFile
            return Promise.resolve('Mock file content');
        });
    }
    modify(file, content) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            // Mock file modification
            return Promise.resolve();
        });
    }
    delete(file) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const index = this.mockFiles.indexOf(file);
            if (index > -1) {
                this.mockFiles.splice(index, 1);
            }
            return Promise.resolve();
        });
    }
    exists(path) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            return this.mockFiles.some(file => file.path === path);
        });
    }
    on(event, callback) {
        // Return an EventRef-like object that registerEvent expects
        return {
            e: {
                target: this,
                fn: callback,
                event: event
            }
        };
    }
    off(event, callback) {
        // Mock implementation for removing event listeners
    }
    // Helper method for testing
    __addMockFile(path, content) {
        const file = new TFile(path);
        this.mockFiles.push(file);
        return file;
    }
    // Helper method to clear mock files for tests
    __clearMockFiles() {
        this.mockFiles = [];
    }
}
exports.Vault = Vault;
class Workspace {
    constructor() {
        this.activeFile = null;
        this.leaves = [];
    }
    getActiveFile() {
        return this.activeFile;
    }
    getLeaf(newLeaf) {
        if (newLeaf || this.leaves.length === 0) {
            const leaf = new WorkspaceLeaf();
            this.leaves.push(leaf);
            return leaf;
        }
        return this.leaves[0];
    }
    iterateAllLeaves(callback) {
        this.leaves.forEach(callback);
    }
    getActiveViewOfType(type) {
        return null;
    }
    openLinkText(linkText, sourcePath) {
        // Mock implementation for opening links
    }
    on(name, callback) {
        // Mock event listener
    }
    off(name, callback) {
        // Mock event listener removal
    }
    trigger(name, ...data) {
        // Mock event triggering
    }
    // Helper method for testing
    __setActiveFile(file) {
        this.activeFile = file;
    }
}
exports.Workspace = Workspace;
class MetadataCache {
    constructor() {
        this.cache = new Map();
    }
    getFileCache(file) {
        return this.cache.get(file.path) || {
            frontmatter: {},
            sections: [],
            headings: [],
            links: [],
            embeds: [],
            tags: []
        };
    }
    getBacklinksForFile(file) {
        return {
            data: new Map(),
            count: () => 0,
            keys: () => []
        };
    }
    getFrontmatterPropertyValue(file, property) {
        var _a;
        const cache = this.getFileCache(file);
        return (_a = cache.frontmatter) === null || _a === void 0 ? void 0 : _a[property];
    }
    on(name, callback) {
        // Mock event listener
    }
    off(name, callback) {
        // Mock event listener removal
    }
    // Helper method for testing
    __setFileCache(path, cache) {
        this.cache.set(path, cache);
    }
    // Helper method to clear cache for tests
    __clearCache() {
        this.cache.clear();
    }
}
exports.MetadataCache = MetadataCache;
class Component {
    load() { }
    onload() { }
    unload() { }
    onunload() { }
    addChild(component) {
        return component;
    }
    removeChild(component) {
        return component;
    }
}
exports.Component = Component;
class MarkdownRenderer {
    static renderMarkdown(markdown, el, sourcePath, component) {
        el.innerHTML = markdown;
        return Promise.resolve();
    }
}
exports.MarkdownRenderer = MarkdownRenderer;
class FileManager {
    generateMarkdownLink(file, sourcePath) {
        return `[[${file.basename}]]`;
    }
}
exports.FileManager = FileManager;
// Mock normalizePath function
function normalizePath(path) {
    return path.replace(/\\/g, '/');
}
exports.normalizePath = normalizePath;
// Mock requestUrl function
function requestUrl(request) {
    return Promise.resolve({
        status: 200,
        json: {},
        text: '',
        arrayBuffer: new ArrayBuffer(0)
    });
}
exports.requestUrl = requestUrl;
// Mock debounce function
function debounce(func, wait, immediate) {
    return func; // Simplified mock - just return the function as-is for testing
}
exports.debounce = debounce;
// Mock moment if needed
exports.moment = {
    now: () => Date.now(),
    unix: (timestamp) => ({
        format: (format) => new Date(timestamp * 1000).toISOString()
    })
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvX19tb2Nrc19fL29ic2lkaWFuLnRzIiwibWFwcGluZ3MiOiI7Ozs7QUFTQSx1QkFBdUI7QUFDdkIsSUFBSSxPQUFPLFFBQVEsS0FBSyxXQUFXLEVBQUU7SUFDbkMsTUFBTSxLQUFLLEdBQUcsV0FBVyxDQUFDLFNBQWdCLENBQUM7SUFDM0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUU7UUFDbkIsS0FBSyxDQUFDLFFBQVEsR0FBRyxVQUFTLEdBQVcsRUFBRSxPQUFhO1lBQ2xELE1BQU0sRUFBRSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDdkMsSUFBSSxPQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsSUFBSTtnQkFBRSxFQUFFLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUM7WUFDakQsSUFBSSxPQUFPLGFBQVAsT0FBTyx1QkFBUCxPQUFPLENBQUUsR0FBRztnQkFBRSxFQUFFLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUM7WUFDN0MsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQztZQUNyQixPQUFPLEVBQUUsQ0FBQztRQUNaLENBQUMsQ0FBQztLQUNIO0lBQ0QsSUFBSSxDQUFDLEtBQUssQ0FBQyxTQUFTLEVBQUU7UUFDcEIsS0FBSyxDQUFDLFNBQVMsR0FBRyxVQUFTLE9BQWE7WUFDdEMsTUFBTSxFQUFFLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztZQUN6QyxJQUFJLE9BQU8sYUFBUCxPQUFPLHVCQUFQLE9BQU8sQ0FBRSxHQUFHO2dCQUFFLEVBQUUsQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQztZQUM3QyxJQUFJLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ3JCLE9BQU8sRUFBRSxDQUFDO1FBQ1osQ0FBQyxDQUFDO0tB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dGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvX19tb2Nrc19fL29ic2lkaWFuLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIEFkZCBPYnNpZGlhbi1zcGVjaWZpYyBtZXRob2RzIHRvIEhUTUxFbGVtZW50IGdsb2JhbGx5XG5kZWNsYXJlIGdsb2JhbCB7XG4gIGludGVyZmFjZSBIVE1MRWxlbWVudCB7XG4gICAgY3JlYXRlRWw/OiAodGFnOiBzdHJpbmcsIG9wdGlvbnM/OiBhbnkpID0+IEhUTUxFbGVtZW50O1xuICAgIGNyZWF0ZURpdj86IChvcHRpb25zPzogYW55KSA9PiBIVE1MRWxlbWVudDtcbiAgICBlbXB0eT86ICgpID0+IHZvaWQ7XG4gIH1cbn1cblxuLy8gU2V0dXAgRE9NIGV4dGVuc2lvbnNcbmlmICh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnKSB7XG4gIGNvbnN0IHByb3RvID0gSFRNTEVsZW1lbnQucHJvdG90eXBlIGFzIGFueTtcbiAgaWYgKCFwcm90by5jcmVhdGVFbCkge1xuICAgIHByb3RvLmNyZWF0ZUVsID0gZnVuY3Rpb24odGFnOiBzdHJpbmcsIG9wdGlvbnM/OiBhbnkpIHtcbiAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgICAgaWYgKG9wdGlvbnM/LnRleHQpIGVsLnRleHRDb250ZW50ID0gb3B0aW9ucy50ZXh0O1xuICAgICAgaWYgKG9wdGlvbnM/LmNscykgZWwuY2xhc3NOYW1lID0gb3B0aW9ucy5jbHM7XG4gICAgICB0aGlzLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgIHJldHVybiBlbDtcbiAgICB9O1xuICB9XG4gIGlmICghcHJvdG8uY3JlYXRlRGl2KSB7XG4gICAgcHJvdG8uY3JlYXRlRGl2ID0gZnVuY3Rpb24ob3B0aW9ucz86IGFueSkge1xuICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIGlmIChvcHRpb25zPy5jbHMpIGVsLmNsYXNzTmFtZSA9IG9wdGlvbnMuY2xzO1xuICAgICAgdGhpcy5hcHBlbmRDaGlsZChlbCk7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfTtcbiAgfVxuICBpZiAoIXByb3RvLmVtcHR5KSB7XG4gICAgcHJvdG8uZW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgICAgIHdoaWxlICh0aGlzLmZpcnN0Q2hpbGQpIHtcbiAgICAgICAgdGhpcy5yZW1vdmVDaGlsZCh0aGlzLmZpcnN0Q2hpbGQpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFBsdWdpbiB7XG4gIGFwcDogQXBwO1xuICBtYW5pZmVzdDogYW55O1xuICBcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIG1hbmlmZXN0OiBhbnkpIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB0aGlzLm1hbmlmZXN0ID0gbWFuaWZlc3Q7XG4gIH1cbiAgXG4gIGFzeW5jIGxvYWREYXRhKCk6IFByb21pc2U8YW55PiB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIFxuICBhc3luYyBzYXZlRGF0YShkYXRhOiBhbnkpOiBQcm9taXNlPHZvaWQ+IHt9XG4gIFxuICBhZGRDb21tYW5kKGNvbW1hbmQ6IGFueSk6IHZvaWQge31cbiAgXG4gIGFkZFJpYmJvbkljb24oaWNvbjogc3RyaW5nLCB0aXRsZTogc3RyaW5nLCBjYWxsYmFjazogKGV2dDogTW91c2VFdmVudCkgPT4gdm9pZCk6IEhUTUxFbGVtZW50IHtcbiAgICBjb25zdCBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGVsLmFkZENsYXNzID0gamVzdC5mbigpO1xuICAgIHJldHVybiBlbDtcbiAgfVxuICBcbiAgYWRkU2V0dGluZ1RhYihzZXR0aW5nVGFiOiBhbnkpOiB2b2lkIHt9XG4gIFxuICByZWdpc3RlckV2ZW50KGV2ZW50OiBhbnkpOiB2b2lkIHt9XG4gIFxuICByZWdpc3RlckludGVydmFsKGludGVydmFsOiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBpbnRlcnZhbDtcbiAgfVxuICBcbiAgcmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcihsYW5ndWFnZTogc3RyaW5nLCBoYW5kbGVyOiBGdW5jdGlvbik6IHZvaWQge1xuICAgIC8vIE1vY2sgaW1wbGVtZW50YXRpb24gZm9yIFNQQVJRTCBwcm9jZXNzb3IgcmVnaXN0cmF0aW9uXG4gICAgLy8gU3RvcmUgdGhlIGhhbmRsZXIgZm9yIHBvdGVudGlhbCB0ZXN0aW5nXG4gICAgKHRoaXMgYXMgYW55KS5jb2RlQmxvY2tQcm9jZXNzb3IgPSBoYW5kbGVyO1xuICB9XG5cbiAgcmVnaXN0ZXJNYXJrZG93blBvc3RQcm9jZXNzb3IocHJvY2Vzc29yOiBGdW5jdGlvbik6IHZvaWQge1xuICAgICh0aGlzIGFzIGFueSkubWFya2Rvd25Qb3N0UHJvY2Vzc29yID0gcHJvY2Vzc29yO1xuICB9XG5cbiAgcmVnaXN0ZXJWaWV3KHR5cGU6IHN0cmluZywgdmlld0NyZWF0b3I6IEZ1bmN0aW9uKTogdm9pZCB7XG4gICAgKHRoaXMgYXMgYW55KS5yZWdpc3RlcmVkVmlld3MgPSAodGhpcyBhcyBhbnkpLnJlZ2lzdGVyZWRWaWV3cyB8fCB7fTtcbiAgICAodGhpcyBhcyBhbnkpLnJlZ2lzdGVyZWRWaWV3c1t0eXBlXSA9IHZpZXdDcmVhdG9yO1xuICB9XG5cbiAgYWRkU3RhdHVzQmFySXRlbSgpOiBIVE1MRWxlbWVudCB7XG4gICAgcmV0dXJuIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB9XG5cbiAgYXN5bmMgb25sb2FkKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIE92ZXJyaWRlIGluIGFjdHVhbCBwbHVnaW5cbiAgfVxuICBcbiAgYXN5bmMgb251bmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gT3ZlcnJpZGUgaW4gYWN0dWFsIHBsdWdpblxuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb2RhbCB7XG4gIGFwcDogQXBwO1xuICBjb250ZW50RWw6IEhUTUxFbGVtZW50O1xuICBcbiAgY29uc3RydWN0b3IoYXBwOiBBcHApIHtcbiAgICB0aGlzLmFwcCA9IGFwcDtcbiAgICB0aGlzLmNvbnRlbnRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB9XG4gIFxuICBvcGVuKCk6IHZvaWQge31cbiAgY2xvc2UoKTogdm9pZCB7fVxuICBvbk9wZW4oKTogdm9pZCB7fVxuICBvbkNsb3NlKCk6IHZvaWQge31cbn1cblxuZXhwb3J0IGNsYXNzIFBsdWdpblNldHRpbmdUYWIge1xuICBhcHA6IEFwcDtcbiAgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xuICBcbiAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogYW55KSB7XG4gICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgdGhpcy5jb250YWluZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICB9XG4gIFxuICBkaXNwbGF5KCk6IHZvaWQge31cbiAgaGlkZSgpOiB2b2lkIHt9XG59XG5cbmV4cG9ydCBjbGFzcyBTZXR0aW5nIHtcbiAgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xuICBuYW1lRWw6IEhUTUxFbGVtZW50O1xuICBkZXNjRWw6IEhUTUxFbGVtZW50O1xuICBjb250cm9sRWw6IEhUTUxFbGVtZW50O1xuICBcbiAgY29uc3RydWN0b3IoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgdGhpcy5jb250YWluZXJFbCA9IGNvbnRhaW5lckVsO1xuICAgIHRoaXMubmFtZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgdGhpcy5kZXNjRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB0aGlzLmNvbnRyb2xFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIFxuICAgIC8vIEFkZCBPYnNpZGlhbi1zcGVjaWZpYyBtZXRob2RzIHRvIGNvbnRhaW5lclxuICAgIHRoaXMuc2V0dXBDb250YWluZXJNZXRob2RzKGNvbnRhaW5lckVsKTtcbiAgfVxuICBcbiAgcHJpdmF0ZSBzZXR1cENvbnRhaW5lck1ldGhvZHMoZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XG4gICAgaWYgKCFlbC5jcmVhdGVFbCkge1xuICAgICAgKGVsIGFzIGFueSkuY3JlYXRlRWwgPSBmdW5jdGlvbih0YWc6IHN0cmluZywgb3B0aW9ucz86IGFueSkge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0YWcpO1xuICAgICAgICBpZiAob3B0aW9ucz8udGV4dCkgZWxlbWVudC50ZXh0Q29udGVudCA9IG9wdGlvbnMudGV4dDtcbiAgICAgICAgaWYgKG9wdGlvbnM/LmNscykgZWxlbWVudC5jbGFzc05hbWUgPSBvcHRpb25zLmNscztcbiAgICAgICAgdGhpcy5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XG4gICAgICB9O1xuICAgIH1cbiAgICBpZiAoIWVsLmNyZWF0ZURpdikge1xuICAgICAgKGVsIGFzIGFueSkuY3JlYXRlRGl2ID0gZnVuY3Rpb24ob3B0aW9ucz86IGFueSkge1xuICAgICAgICBjb25zdCBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGlmIChvcHRpb25zPy5jbHMpIGVsZW1lbnQuY2xhc3NOYW1lID0gb3B0aW9ucy5jbHM7XG4gICAgICAgIHRoaXMuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgIHJldHVybiBlbGVtZW50O1xuICAgICAgfTtcbiAgICB9XG4gICAgaWYgKCFlbC5lbXB0eSkge1xuICAgICAgKGVsIGFzIGFueSkuZW1wdHkgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgd2hpbGUgKHRoaXMuZmlyc3RDaGlsZCkge1xuICAgICAgICAgIHRoaXMucmVtb3ZlQ2hpbGQodGhpcy5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9XG4gIH1cbiAgXG4gIHNldE5hbWUobmFtZTogc3RyaW5nKTogdGhpcyB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHNldERlc2MoZGVzYzogc3RyaW5nKTogdGhpcyB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIGFkZFRleHQoY2I6ICh0ZXh0OiBUZXh0Q29tcG9uZW50KSA9PiB2b2lkKTogdGhpcyB7XG4gICAgY2IobmV3IFRleHRDb21wb25lbnQodGhpcy5jb250YWluZXJFbCkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBhZGRUZXh0QXJlYShjYjogKHRleHQ6IFRleHRBcmVhQ29tcG9uZW50KSA9PiB2b2lkKTogdGhpcyB7XG4gICAgY2IobmV3IFRleHRBcmVhQ29tcG9uZW50KHRoaXMuY29udGFpbmVyRWwpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgYWRkVG9nZ2xlKGNiOiAodG9nZ2xlOiBUb2dnbGVDb21wb25lbnQpID0+IHZvaWQpOiB0aGlzIHtcbiAgICBjYihuZXcgVG9nZ2xlQ29tcG9uZW50KHRoaXMuY29udGFpbmVyRWwpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgYWRkQnV0dG9uKGNiOiAoYnV0dG9uOiBCdXR0b25Db21wb25lbnQpID0+IHZvaWQpOiB0aGlzIHtcbiAgICBjYihuZXcgQnV0dG9uQ29tcG9uZW50KHRoaXMuY29udGFpbmVyRWwpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgYWRkRHJvcGRvd24oY2I6IChkcm9wZG93bjogRHJvcGRvd25Db21wb25lbnQpID0+IHZvaWQpOiB0aGlzIHtcbiAgICBjYihuZXcgRHJvcGRvd25Db21wb25lbnQodGhpcy5jb250YWluZXJFbCkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUZXh0Q29tcG9uZW50IHtcbiAgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50O1xuICBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50O1xuICBcbiAgY29uc3RydWN0b3IoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgdGhpcy5jb250YWluZXJFbCA9IGNvbnRhaW5lckVsO1xuICAgIHRoaXMuaW5wdXRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gIH1cbiAgXG4gIHNldFBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyOiBzdHJpbmcpOiB0aGlzIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgc2V0VmFsdWUodmFsdWU6IHN0cmluZyk6IHRoaXMge1xuICAgIHRoaXMuaW5wdXRFbC52YWx1ZSA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBvbkNoYW5nZShjYWxsYmFjazogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQpOiB0aGlzIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVGV4dEFyZWFDb21wb25lbnQge1xuICBjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XG4gIGlucHV0RWw6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XG4gIFxuICBjb25zdHJ1Y3Rvcihjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcbiAgICB0aGlzLmNvbnRhaW5lckVsID0gY29udGFpbmVyRWw7XG4gICAgdGhpcy5pbnB1dEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcbiAgfVxuICBcbiAgc2V0UGxhY2Vob2xkZXIocGxhY2Vob2xkZXI6IHN0cmluZyk6IHRoaXMge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBzZXRWYWx1ZSh2YWx1ZTogc3RyaW5nKTogdGhpcyB7XG4gICAgdGhpcy5pbnB1dEVsLnZhbHVlID0gdmFsdWU7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIG9uQ2hhbmdlKGNhbGxiYWNrOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZCk6IHRoaXMge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBUb2dnbGVDb21wb25lbnQge1xuICBjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XG4gIHRvZ2dsZUVsOiBIVE1MRWxlbWVudDtcbiAgXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xuICAgIHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcbiAgICB0aGlzLnRvZ2dsZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgfVxuICBcbiAgc2V0VmFsdWUodmFsdWU6IGJvb2xlYW4pOiB0aGlzIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgb25DaGFuZ2UoY2FsbGJhY2s6ICh2YWx1ZTogYm9vbGVhbikgPT4gdm9pZCk6IHRoaXMge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCdXR0b25Db21wb25lbnQge1xuICBjb250YWluZXJFbDogSFRNTEVsZW1lbnQ7XG4gIGJ1dHRvbkVsOiBIVE1MQnV0dG9uRWxlbWVudDtcbiAgXG4gIGNvbnN0cnVjdG9yKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xuICAgIHRoaXMuY29udGFpbmVyRWwgPSBjb250YWluZXJFbDtcbiAgICB0aGlzLmJ1dHRvbkVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XG4gIH1cbiAgXG4gIHNldEJ1dHRvblRleHQodGV4dDogc3RyaW5nKTogdGhpcyB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cbiAgXG4gIHNldEN0YSgpOiB0aGlzIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuICBcbiAgb25DbGljayhjYWxsYmFjazogKCkgPT4gdm9pZCk6IHRoaXMge1xuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBEcm9wZG93bkNvbXBvbmVudCB7XG4gIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudDtcbiAgc2VsZWN0RWw6IEhUTUxTZWxlY3RFbGVtZW50O1xuICBcbiAgY29uc3RydWN0b3IoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XG4gICAgdGhpcy5jb250YWluZXJFbCA9IGNvbnRhaW5lckVsO1xuICAgIHRoaXMuc2VsZWN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzZWxlY3QnKTtcbiAgICBjb250YWluZXJFbC5hcHBlbmRDaGlsZCh0aGlzLnNlbGVjdEVsKTtcbiAgfVxuICBcbiAgYWRkT3B0aW9uKHZhbHVlOiBzdHJpbmcsIGRpc3BsYXk6IHN0cmluZyk6IHRoaXMge1xuICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ29wdGlvbicpO1xuICAgIG9wdGlvbi52YWx1ZSA9IHZhbHVlO1xuICAgIG9wdGlvbi50ZXh0Q29udGVudCA9IGRpc3BsYXkgfHwgdmFsdWU7XG4gICAgdGhpcy5zZWxlY3RFbC5hcHBlbmRDaGlsZChvcHRpb24pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBzZXRWYWx1ZSh2YWx1ZTogc3RyaW5nKTogdGhpcyB7XG4gICAgdGhpcy5zZWxlY3RFbC52YWx1ZSA9IHZhbHVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG4gIFxuICBvbkNoYW5nZShjYWxsYmFjazogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQpOiB0aGlzIHtcbiAgICB0aGlzLnNlbGVjdEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsICgpID0+IGNhbGxiYWNrKHRoaXMuc2VsZWN0RWwudmFsdWUpKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTm90aWNlIHtcbiAgY29uc3RydWN0b3IobWVzc2FnZTogc3RyaW5nKSB7fVxufVxuXG5leHBvcnQgY2xhc3MgTWFya2Rvd25WaWV3IHtcbiAgcHJldmlld01vZGU6IHtcbiAgICByZXJlbmRlcjogKGZvcmNlOiBib29sZWFuKSA9PiB2b2lkO1xuICB9O1xuICBcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5wcmV2aWV3TW9kZSA9IHtcbiAgICAgIHJlcmVuZGVyOiBqZXN0LmZuKClcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBURmlsZSB7XG4gIHBhdGg6IHN0cmluZztcbiAgYmFzZW5hbWU6IHN0cmluZztcbiAgZXh0ZW5zaW9uOiBzdHJpbmc7XG4gIFxuICBjb25zdHJ1Y3RvcihwYXRoPzogc3RyaW5nKSB7XG4gICAgdGhpcy5wYXRoID0gcGF0aCB8fCAnJztcbiAgICB0aGlzLmJhc2VuYW1lID0gcGF0aCA/IChwYXRoLnNwbGl0KCcvJykucG9wKCk/LnJlcGxhY2UoL1xcLlteLy5dKyQvLCAnJykgfHwgJycpIDogJyc7XG4gICAgdGhpcy5leHRlbnNpb24gPSBwYXRoID8gKHBhdGguc3BsaXQoJy4nKS5wb3AoKSB8fCAnJykgOiAnJztcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgV29ya3NwYWNlTGVhZiB7XG4gIHZpZXc6IGFueTtcbiAgXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMudmlldyA9IG51bGw7XG4gIH1cbiAgXG4gIG9wZW5GaWxlKGZpbGU6IFRGaWxlKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBcHAge1xuICB2YXVsdDogVmF1bHQ7XG4gIHdvcmtzcGFjZTogV29ya3NwYWNlO1xuICBtZXRhZGF0YUNhY2hlOiBNZXRhZGF0YUNhY2hlO1xuICBcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy52YXVsdCA9IG5ldyBWYXVsdCgpO1xuICAgIHRoaXMud29ya3NwYWNlID0gbmV3IFdvcmtzcGFjZSgpO1xuICAgIHRoaXMubWV0YWRhdGFDYWNoZSA9IG5ldyBNZXRhZGF0YUNhY2hlKCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZhdWx0IHtcbiAgcHJpdmF0ZSBtb2NrRmlsZXM6IFRGaWxlW10gPSBbXTtcbiAgYWRhcHRlcjogYW55ID0ge1xuICAgIHJlYWQ6IGplc3QuZm4oKS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ0ZpbGUgbm90IGZvdW5kJykpLFxuICAgIHdyaXRlOiBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUodW5kZWZpbmVkKSxcbiAgICBleGlzdHM6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShmYWxzZSksXG4gICAgbWtkaXI6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpLFxuICAgIHJlbW92ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCksXG4gICAgbGlzdDogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZmlsZXM6IFtdLCBmb2xkZXJzOiBbXSB9KVxuICB9O1xuXG4gIGdldEZpbGVzKCk6IFRGaWxlW10ge1xuICAgIHJldHVybiB0aGlzLm1vY2tGaWxlcztcbiAgfVxuXG4gIGdldE1hcmtkb3duRmlsZXMoKTogVEZpbGVbXSB7XG4gICAgcmV0dXJuIHRoaXMubW9ja0ZpbGVzLmZpbHRlcihmaWxlID0+IGZpbGUuZXh0ZW5zaW9uID09PSAnbWQnKTtcbiAgfVxuICBcbiAgZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGg6IHN0cmluZyk6IFRGaWxlIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMubW9ja0ZpbGVzLmZpbmQoZmlsZSA9PiBmaWxlLnBhdGggPT09IHBhdGgpIHx8IG51bGw7XG4gIH1cbiAgXG4gIGNyZWF0ZShwYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8VEZpbGU+IHtcbiAgICBjb25zdCBmaWxlID0gbmV3IFRGaWxlKHBhdGgpO1xuICAgIHRoaXMubW9ja0ZpbGVzLnB1c2goZmlsZSk7XG4gICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmaWxlKTtcbiAgfVxuXG4gIGFzeW5jIHJlYWQoZmlsZTogVEZpbGUgfCBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGlmICh0eXBlb2YgZmlsZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIC8vIE1vY2sgcmVhZGluZyBieSBwYXRoXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCdNb2NrIGZpbGUgY29udGVudCcpO1xuICAgIH1cbiAgICAvLyBNb2NrIHJlYWRpbmcgZnJvbSBURmlsZVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoJ01vY2sgZmlsZSBjb250ZW50Jyk7XG4gIH1cblxuICBhc3luYyBtb2RpZnkoZmlsZTogVEZpbGUsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIE1vY2sgZmlsZSBtb2RpZmljYXRpb25cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cblxuICBhc3luYyBkZWxldGUoZmlsZTogVEZpbGUpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBpbmRleCA9IHRoaXMubW9ja0ZpbGVzLmluZGV4T2YoZmlsZSk7XG4gICAgaWYgKGluZGV4ID4gLTEpIHtcbiAgICAgIHRoaXMubW9ja0ZpbGVzLnNwbGljZShpbmRleCwgMSk7XG4gICAgfVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIGFzeW5jIGV4aXN0cyhwYXRoOiBzdHJpbmcpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gdGhpcy5tb2NrRmlsZXMuc29tZShmaWxlID0+IGZpbGUucGF0aCA9PT0gcGF0aCk7XG4gIH1cbiAgXG4gIG9uKGV2ZW50OiBzdHJpbmcsIGNhbGxiYWNrOiBhbnkpOiBhbnkge1xuICAgIC8vIFJldHVybiBhbiBFdmVudFJlZi1saWtlIG9iamVjdCB0aGF0IHJlZ2lzdGVyRXZlbnQgZXhwZWN0c1xuICAgIHJldHVybiB7IFxuICAgICAgZTogeyBcbiAgICAgICAgdGFyZ2V0OiB0aGlzLFxuICAgICAgICBmbjogY2FsbGJhY2ssXG4gICAgICAgIGV2ZW50OiBldmVudCBcbiAgICAgIH1cbiAgICB9O1xuICB9XG4gIFxuICBvZmYoZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6IGFueSk6IHZvaWQge1xuICAgIC8vIE1vY2sgaW1wbGVtZW50YXRpb24gZm9yIHJlbW92aW5nIGV2ZW50IGxpc3RlbmVyc1xuICB9XG5cbiAgLy8gSGVscGVyIG1ldGhvZCBmb3IgdGVzdGluZ1xuICBfX2FkZE1vY2tGaWxlKHBhdGg6IHN0cmluZywgY29udGVudD86IHN0cmluZyk6IFRGaWxlIHtcbiAgICBjb25zdCBmaWxlID0gbmV3IFRGaWxlKHBhdGgpO1xuICAgIHRoaXMubW9ja0ZpbGVzLnB1c2goZmlsZSk7XG4gICAgcmV0dXJuIGZpbGU7XG4gIH1cblxuICAvLyBIZWxwZXIgbWV0aG9kIHRvIGNsZWFyIG1vY2sgZmlsZXMgZm9yIHRlc3RzXG4gIF9fY2xlYXJNb2NrRmlsZXMoKTogdm9pZCB7XG4gICAgdGhpcy5tb2NrRmlsZXMgPSBbXTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgV29ya3NwYWNlIHtcbiAgcHJpdmF0ZSBhY3RpdmVGaWxlOiBURmlsZSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGxlYXZlczogV29ya3NwYWNlTGVhZltdID0gW107XG5cbiAgZ2V0QWN0aXZlRmlsZSgpOiBURmlsZSB8IG51bGwge1xuICAgIHJldHVybiB0aGlzLmFjdGl2ZUZpbGU7XG4gIH1cbiAgXG4gIGdldExlYWYobmV3TGVhZj86IGJvb2xlYW4pOiBXb3Jrc3BhY2VMZWFmIHtcbiAgICBpZiAobmV3TGVhZiB8fCB0aGlzLmxlYXZlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGNvbnN0IGxlYWYgPSBuZXcgV29ya3NwYWNlTGVhZigpO1xuICAgICAgdGhpcy5sZWF2ZXMucHVzaChsZWFmKTtcbiAgICAgIHJldHVybiBsZWFmO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5sZWF2ZXNbMF07XG4gIH1cbiAgXG4gIGl0ZXJhdGVBbGxMZWF2ZXMoY2FsbGJhY2s6IChsZWFmOiBXb3Jrc3BhY2VMZWFmKSA9PiB2b2lkKTogdm9pZCB7XG4gICAgdGhpcy5sZWF2ZXMuZm9yRWFjaChjYWxsYmFjayk7XG4gIH1cblxuICBnZXRBY3RpdmVWaWV3T2ZUeXBlPFQ+KHR5cGU6IGFueSk6IFQgfCBudWxsIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIG9wZW5MaW5rVGV4dChsaW5rVGV4dDogc3RyaW5nLCBzb3VyY2VQYXRoOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBNb2NrIGltcGxlbWVudGF0aW9uIGZvciBvcGVuaW5nIGxpbmtzXG4gIH1cblxuICBvbihuYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xuICAgIC8vIE1vY2sgZXZlbnQgbGlzdGVuZXJcbiAgfVxuXG4gIG9mZihuYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xuICAgIC8vIE1vY2sgZXZlbnQgbGlzdGVuZXIgcmVtb3ZhbFxuICB9XG5cbiAgdHJpZ2dlcihuYW1lOiBzdHJpbmcsIC4uLmRhdGE6IGFueVtdKTogdm9pZCB7XG4gICAgLy8gTW9jayBldmVudCB0cmlnZ2VyaW5nXG4gIH1cblxuICAvLyBIZWxwZXIgbWV0aG9kIGZvciB0ZXN0aW5nXG4gIF9fc2V0QWN0aXZlRmlsZShmaWxlOiBURmlsZSB8IG51bGwpOiB2b2lkIHtcbiAgICB0aGlzLmFjdGl2ZUZpbGUgPSBmaWxlO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNZXRhZGF0YUNhY2hlIHtcbiAgcHJpdmF0ZSBjYWNoZTogTWFwPHN0cmluZywgYW55PiA9IG5ldyBNYXAoKTtcblxuICBnZXRGaWxlQ2FjaGUoZmlsZTogVEZpbGUpOiBhbnkge1xuICAgIHJldHVybiB0aGlzLmNhY2hlLmdldChmaWxlLnBhdGgpIHx8IHtcbiAgICAgIGZyb250bWF0dGVyOiB7fSxcbiAgICAgIHNlY3Rpb25zOiBbXSxcbiAgICAgIGhlYWRpbmdzOiBbXSxcbiAgICAgIGxpbmtzOiBbXSxcbiAgICAgIGVtYmVkczogW10sXG4gICAgICB0YWdzOiBbXVxuICAgIH07XG4gIH1cbiAgXG4gIGdldEJhY2tsaW5rc0ZvckZpbGUoZmlsZTogVEZpbGUpOiBhbnkge1xuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiBuZXcgTWFwKCksXG4gICAgICBjb3VudDogKCkgPT4gMCxcbiAgICAgIGtleXM6ICgpID0+IFtdXG4gICAgfTtcbiAgfVxuXG4gIGdldEZyb250bWF0dGVyUHJvcGVydHlWYWx1ZShmaWxlOiBURmlsZSwgcHJvcGVydHk6IHN0cmluZyk6IGFueSB7XG4gICAgY29uc3QgY2FjaGUgPSB0aGlzLmdldEZpbGVDYWNoZShmaWxlKTtcbiAgICByZXR1cm4gY2FjaGUuZnJvbnRtYXR0ZXI/Lltwcm9wZXJ0eV07XG4gIH1cblxuICBvbihuYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xuICAgIC8vIE1vY2sgZXZlbnQgbGlzdGVuZXJcbiAgfVxuXG4gIG9mZihuYW1lOiBzdHJpbmcsIGNhbGxiYWNrOiBGdW5jdGlvbik6IHZvaWQge1xuICAgIC8vIE1vY2sgZXZlbnQgbGlzdGVuZXIgcmVtb3ZhbFxuICB9XG5cbiAgLy8gSGVscGVyIG1ldGhvZCBmb3IgdGVzdGluZ1xuICBfX3NldEZpbGVDYWNoZShwYXRoOiBzdHJpbmcsIGNhY2hlOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLmNhY2hlLnNldChwYXRoLCBjYWNoZSk7XG4gIH1cblxuICAvLyBIZWxwZXIgbWV0aG9kIHRvIGNsZWFyIGNhY2hlIGZvciB0ZXN0c1xuICBfX2NsZWFyQ2FjaGUoKTogdm9pZCB7XG4gICAgdGhpcy5jYWNoZS5jbGVhcigpO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRWRpdG9yIHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCB7XG4gIHNvdXJjZVBhdGg6IHN0cmluZztcbiAgZnJvbnRtYXR0ZXI/OiBhbnk7XG4gIGFkZENoaWxkKGNvbXBvbmVudDogYW55KTogdm9pZDtcbiAgZ2V0U2VjdGlvbkluZm8oZWw6IEhUTUxFbGVtZW50KTogYW55O1xufVxuXG4vLyBBZGRpdGlvbmFsIGNvbW1vbmx5IHVzZWQgdHlwZXMgYW5kIGludGVyZmFjZXNcbmV4cG9ydCBpbnRlcmZhY2UgRmlsZVN5c3RlbUFkYXB0ZXIge1xuICBwYXRoOiB7XG4gICAgam9pbiguLi5wYXRoczogc3RyaW5nW10pOiBzdHJpbmc7XG4gICAgZGlybmFtZShwYXRoOiBzdHJpbmcpOiBzdHJpbmc7XG4gICAgYmFzZW5hbWUocGF0aDogc3RyaW5nKTogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgY2xhc3MgQ29tcG9uZW50IHtcbiAgbG9hZCgpOiB2b2lkIHt9XG4gIG9ubG9hZCgpOiB2b2lkIHt9XG4gIHVubG9hZCgpOiB2b2lkIHt9XG4gIG9udW5sb2FkKCk6IHZvaWQge31cbiAgYWRkQ2hpbGQ8VCBleHRlbmRzIENvbXBvbmVudD4oY29tcG9uZW50OiBUKTogVCB7XG4gICAgcmV0dXJuIGNvbXBvbmVudDtcbiAgfVxuICByZW1vdmVDaGlsZDxUIGV4dGVuZHMgQ29tcG9uZW50Pihjb21wb25lbnQ6IFQpOiBUIHtcbiAgICByZXR1cm4gY29tcG9uZW50O1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNYXJrZG93blJlbmRlcmVyIHtcbiAgc3RhdGljIHJlbmRlck1hcmtkb3duKG1hcmtkb3duOiBzdHJpbmcsIGVsOiBIVE1MRWxlbWVudCwgc291cmNlUGF0aDogc3RyaW5nLCBjb21wb25lbnQ6IENvbXBvbmVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGVsLmlubmVySFRNTCA9IG1hcmtkb3duO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgRmlsZU1hbmFnZXIge1xuICBnZW5lcmF0ZU1hcmtkb3duTGluayhmaWxlOiBURmlsZSwgc291cmNlUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFtbJHtmaWxlLmJhc2VuYW1lfV1dYDtcbiAgfVxufVxuXG4vLyBNb2NrIG5vcm1hbGl6ZVBhdGggZnVuY3Rpb25cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVQYXRoKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBwYXRoLnJlcGxhY2UoL1xcXFwvZywgJy8nKTtcbn1cblxuLy8gTW9jayByZXF1ZXN0VXJsIGZ1bmN0aW9uXG5leHBvcnQgZnVuY3Rpb24gcmVxdWVzdFVybChyZXF1ZXN0OiB7IHVybDogc3RyaW5nOyBba2V5OiBzdHJpbmddOiBhbnkgfSk6IFByb21pc2U8YW55PiB7XG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUoe1xuICAgIHN0YXR1czogMjAwLFxuICAgIGpzb246IHt9LFxuICAgIHRleHQ6ICcnLFxuICAgIGFycmF5QnVmZmVyOiBuZXcgQXJyYXlCdWZmZXIoMClcbiAgfSk7XG59XG5cbi8vIE1vY2sgZGVib3VuY2UgZnVuY3Rpb25cbmV4cG9ydCBmdW5jdGlvbiBkZWJvdW5jZTxUIGV4dGVuZHMgKC4uLmFyZ3M6IGFueVtdKSA9PiBhbnk+KFxuICBmdW5jOiBULFxuICB3YWl0OiBudW1iZXIsXG4gIGltbWVkaWF0ZT86IGJvb2xlYW5cbik6IFQge1xuICByZXR1cm4gZnVuYzsgLy8gU2ltcGxpZmllZCBtb2NrIC0ganVzdCByZXR1cm4gdGhlIGZ1bmN0aW9uIGFzLWlzIGZvciB0ZXN0aW5nXG59XG5cbi8vIE1vY2sgbW9tZW50IGlmIG5lZWRlZFxuZXhwb3J0IGNvbnN0IG1vbWVudCA9IHtcbiAgbm93OiAoKSA9PiBEYXRlLm5vdygpLFxuICB1bml4OiAodGltZXN0YW1wOiBudW1iZXIpID0+ICh7XG4gICAgZm9ybWF0OiAoZm9ybWF0Pzogc3RyaW5nKSA9PiBuZXcgRGF0ZSh0aW1lc3RhbXAgKiAxMDAwKS50b0lTT1N0cmluZygpXG4gIH0pXG59OyJdLCJ2ZXJzaW9uIjozfQ==