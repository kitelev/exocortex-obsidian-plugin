ab0daabd188f324a2a17e92ed58e2a74
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DIContainer = void 0;
const Container_1 = require("../../application/core/Container");
// Infrastructure Adapters
const ObsidianNotificationService_1 = require("../adapters/ObsidianNotificationService");
const ObsidianFileSystemAdapter_1 = require("../adapters/ObsidianFileSystemAdapter");
const ObsidianUIAdapter_1 = require("../adapters/ObsidianUIAdapter");
const ObsidianVaultAdapter_1 = require("../adapters/ObsidianVaultAdapter");
const ObsidianAssetRepository_1 = require("../repositories/ObsidianAssetRepository");
const ObsidianOntologyRepository_1 = require("../repositories/ObsidianOntologyRepository");
const ObsidianClassViewRepository_1 = require("../repositories/ObsidianClassViewRepository");
const ObsidianButtonRepository_1 = require("../repositories/ObsidianButtonRepository");
const ObsidianClassLayoutRepository_1 = require("../repositories/ObsidianClassLayoutRepository");
// Use Cases
const CreateAssetUseCase_1 = require("../../application/use-cases/CreateAssetUseCase");
const CreateChildTaskUseCase_1 = require("../../application/use-cases/CreateChildTaskUseCase");
const CreateChildAreaUseCase_1 = require("../../application/use-cases/CreateChildAreaUseCase");
const RenderClassButtonsUseCase_1 = require("../../application/use-cases/RenderClassButtonsUseCase");
const ExecuteButtonCommandUseCase_1 = require("../../application/use-cases/ExecuteButtonCommandUseCase");
const PropertyEditingUseCase_1 = require("../../application/use-cases/PropertyEditingUseCase");
const QueryTemplateUseCase_1 = require("../../application/use-cases/QueryTemplateUseCase");
const ObsidianCommandExecutor_1 = require("../services/ObsidianCommandExecutor");
const ErrorHandlerService_1 = require("../../application/services/ErrorHandlerService");
const SPARQLAutocompleteService_1 = require("../../application/services/SPARQLAutocompleteService");
const OntologyProvisioningService_1 = require("../../domain/services/OntologyProvisioningService");
const PropertyCacheService_1 = require("../../domain/services/PropertyCacheService");
const CircuitBreakerService_1 = require("../resilience/CircuitBreakerService");
const GraphSuggestionRepository_1 = require("../repositories/GraphSuggestionRepository");
const ObsidianQueryTemplateRepository_1 = require("../repositories/ObsidianQueryTemplateRepository");
const QueryEngineFactory_1 = require("../query-engines/QueryEngineFactory");
const QueryEngineService_1 = require("../../application/services/QueryEngineService");
const QueryEngineConfig_1 = require("../../domain/entities/QueryEngineConfig");
const RDFService_1 = require("../../application/services/RDFService");
// Presentation
const ButtonRenderer_1 = require("../../presentation/components/ButtonRenderer");
const PropertyRenderer_1 = require("../../presentation/components/PropertyRenderer");
const LayoutRenderer_1 = require("../../presentation/renderers/LayoutRenderer");
// Mobile Components
const MobileUIComponents_1 = require("../../presentation/components/MobileUIComponents");
const TouchGraphController_1 = require("../../presentation/mobile/TouchGraphController");
const MobileModalAdapter_1 = require("../../presentation/mobile/MobileModalAdapter");
const MobilePerformanceOptimizer_1 = require("../optimizers/MobilePerformanceOptimizer");
const OfflineDataManager_1 = require("../offline/OfflineDataManager");
const PlatformDetector_1 = require("../utils/PlatformDetector");
/**
 * Dependency Injection Container Setup
 * Following Clean Architecture - wires up all dependencies
 */
class DIContainer {
    constructor(app) {
        this.app = app;
        this.container = Container_1.Container.getInstance();
        this.registerDependencies();
    }
    static initialize(app, plugin) {
        if (!DIContainer.instance) {
            DIContainer.instance = new DIContainer(app);
        }
        else {
            // Always update app and plugin references
            DIContainer.instance.app = app;
            if (plugin) {
                DIContainer.instance.plugin = plugin;
            }
            // Re-register dependencies to ensure they use the new app instance
            DIContainer.instance.container.clear();
            DIContainer.instance.registerDependencies();
        }
        if (plugin && !DIContainer.instance.plugin) {
            DIContainer.instance.plugin = plugin;
        }
        return DIContainer.instance;
    }
    static getInstance() {
        if (!DIContainer.instance) {
            throw new Error("DIContainer not initialized. Call initialize(app) first.");
        }
        return DIContainer.instance;
    }
    /**
     * Async initialize method for backward compatibility
     */
    async initialize(app) {
        // Already initialized in constructor, this is for backward compatibility
        return Promise.resolve();
    }
    /**
     * Reset the container instance (for testing purposes)
     */
    static reset() {
        DIContainer.instance = null;
    }
    registerDependencies() {
        // Register Obsidian App
        this.container.register("App", () => this.app);
        // Register Port Implementations
        this.container.register("INotificationService", () => new ObsidianNotificationService_1.ObsidianNotificationService());
        this.container.register("IFileSystemAdapter", () => new ObsidianFileSystemAdapter_1.ObsidianFileSystemAdapter(this.app));
        this.container.register("IUIAdapter", () => new ObsidianUIAdapter_1.ObsidianUIAdapter(this.app));
        this.container.register("IVaultAdapter", () => new ObsidianVaultAdapter_1.ObsidianVaultAdapter(this.app.vault, this.app.metadataCache));
        // Register Repositories
        this.container.register("IAssetRepository", () => new ObsidianAssetRepository_1.ObsidianAssetRepository(this.app));
        this.container.register("IOntologyRepository", () => new ObsidianOntologyRepository_1.ObsidianOntologyRepository(this.app));
        this.container.register("IClassViewRepository", () => new ObsidianClassViewRepository_1.ObsidianClassViewRepository(this.app));
        this.container.register("IButtonRepository", () => new ObsidianButtonRepository_1.ObsidianButtonRepository(this.app));
        this.container.register("IClassLayoutRepository", () => new ObsidianClassLayoutRepository_1.ObsidianClassLayoutRepository(this.app, this.plugin?.settings?.layoutsFolderPath || "layouts"));
        this.container.register("IQueryTemplateRepository", () => new ObsidianQueryTemplateRepository_1.ObsidianQueryTemplateRepository(this.app, this.plugin?.settings?.templatesPath || ".exocortex/templates", this.plugin?.settings?.templateUsageDataPath ||
            ".exocortex/template-usage.json"));
        // Register Services
        this.container.register("ICommandExecutor", () => new ObsidianCommandExecutor_1.ObsidianCommandExecutor(this.app, this.container.resolve("IAssetRepository"), this.container.resolve("CreateChildTaskUseCase")));
        // Register Error Handler Service
        this.container.register("ErrorHandlerService", () => new ErrorHandlerService_1.ErrorHandlerService({
            showUserNotification: true,
            logToConsole: true,
            trackMetrics: true,
            autoRecover: false,
        }, this.container.resolve("INotificationService")));
        // Register Autocomplete Services
        this.container.register("ISuggestionRepository", () => {
            // Need to get graph instance - will be provided by plugin
            const graph = this.plugin?.graph || null;
            return new GraphSuggestionRepository_1.GraphSuggestionRepository(graph);
        });
        this.container.register("SPARQLAutocompleteService", () => new SPARQLAutocompleteService_1.SPARQLAutocompleteService(this.container.resolve("ISuggestionRepository"), this.plugin?.graph || null));
        // Register Query Engine Services
        this.container.register("QueryEngineFactory", () => {
            const factory = new QueryEngineFactory_1.QueryEngineFactory(this.app);
            // Try to get Dataview and Datacore APIs if available
            const plugins = this.app.plugins;
            const dataviewApi = plugins?.plugins?.dataview?.api;
            const datacoreApi = plugins?.plugins?.datacore?.api;
            factory.updateApis(dataviewApi, datacoreApi);
            return factory;
        });
        this.container.register("QueryEngineConfig", () => {
            // Create default config, could be overridden by plugin settings
            const configResult = QueryEngineConfig_1.QueryEngineConfig.createDefault();
            return configResult.getValue();
        });
        this.container.register("QueryEngineService", () => new QueryEngineService_1.QueryEngineService(this.container.resolve("QueryEngineFactory"), this.container.resolve("QueryEngineConfig")));
        // Register RDF Service - Must be before any dependencies that use it
        this.container.register("RDFService", () => new RDFService_1.RDFService(this.container.resolve("INotificationService"), this.container.resolve("IFileSystemAdapter")));
        // Register Domain Services
        this.container.register("OntologyProvisioningService", () => new OntologyProvisioningService_1.OntologyProvisioningService(this.container.resolve("IOntologyRepository"), this.container.resolve("IVaultAdapter")));
        this.container.register("PropertyCacheService", () => PropertyCacheService_1.PropertyCacheService.getInstance());
        this.container.register("CircuitBreakerService", () => CircuitBreakerService_1.CircuitBreakerService.getInstance());
        // Register Use Cases
        this.container.register("CreateAssetUseCase", () => new CreateAssetUseCase_1.CreateAssetUseCase(this.container.resolve("IAssetRepository"), this.container.resolve("IOntologyRepository"), this.container.resolve("OntologyProvisioningService")));
        this.container.register("CreateChildTaskUseCase", () => new CreateChildTaskUseCase_1.CreateChildTaskUseCase(this.container.resolve("IAssetRepository"), this.container.resolve("CreateAssetUseCase")));
        this.container.register("CreateChildAreaUseCase", () => new CreateChildAreaUseCase_1.CreateChildAreaUseCase(this.container.resolve("IAssetRepository"), this.container.resolve("CreateAssetUseCase")));
        this.container.register("RenderClassButtonsUseCase", () => new RenderClassButtonsUseCase_1.RenderClassButtonsUseCase(this.container.resolve("IClassViewRepository"), this.container.resolve("IButtonRepository")));
        this.container.register("ExecuteButtonCommandUseCase", () => new ExecuteButtonCommandUseCase_1.ExecuteButtonCommandUseCase(this.container.resolve("IButtonRepository"), this.container.resolve("ICommandExecutor")));
        this.container.register("PropertyEditingUseCase", () => new PropertyEditingUseCase_1.PropertyEditingUseCase(this.container.resolve("IAssetRepository"), this.plugin || this.app));
        this.container.register("QueryTemplateUseCase", () => new QueryTemplateUseCase_1.QueryTemplateUseCase(this.container.resolve("IQueryTemplateRepository")));
        // Register Presentation Components
        this.container.register("ButtonRenderer", () => new ButtonRenderer_1.ButtonRenderer(this.app, this.container.resolve("RenderClassButtonsUseCase"), this.container.resolve("ExecuteButtonCommandUseCase")));
        this.container.register("PropertyRenderer", () => new PropertyRenderer_1.PropertyRenderer(this.app, this.container.resolve("PropertyEditingUseCase")));
        this.container.register("LayoutRenderer", () => new LayoutRenderer_1.LayoutRenderer(this.app, this.container.resolve("IClassLayoutRepository")));
        // Register Mobile Components
        this.container.register("MobilePerformanceOptimizer", () => MobilePerformanceOptimizer_1.MobilePerformanceOptimizer.getInstance({
            maxMemoryMB: PlatformDetector_1.PlatformDetector.isMobile() ? 50 : 200,
            maxCacheEntries: PlatformDetector_1.PlatformDetector.isMobile() ? 100 : 500,
            batchSize: PlatformDetector_1.PlatformDetector.isMobile() ? 10 : 50,
            debounceMs: PlatformDetector_1.PlatformDetector.isMobile() ? 500 : 200,
            enableGCHints: PlatformDetector_1.PlatformDetector.isMobile(),
            enableLazyLoading: true,
            virtualScrollThreshold: 100,
        }));
        this.container.register("OfflineDataManager", () => new OfflineDataManager_1.OfflineDataManager({
            strategy: "indexeddb",
            maxStorageMB: PlatformDetector_1.PlatformDetector.isMobile() ? 50 : 200,
            maxAge: 7 * 24 * 60 * 60 * 1000,
            autoSync: true,
            syncIntervalMs: 30000,
            enableConflictResolution: true,
            enableCompression: PlatformDetector_1.PlatformDetector.isMobile(),
        }));
        this.container.register("MobileUIComponents", () => new MobileUIComponents_1.MobileUIComponents(this.container.resolve("MobilePerformanceOptimizer")));
        // TouchGraphController is typically created per graph instance,
        // so we register a factory function
        this.container.register("TouchGraphControllerClass", () => TouchGraphController_1.TouchGraphController);
        // MobileModalAdapter is typically created per modal,
        // so we register a factory function
        this.container.register("MobileModalAdapterClass", () => MobileModalAdapter_1.MobileModalAdapter);
    }
    /**
     * Resolve a dependency from the container
     */
    resolve(token) {
        return this.container.resolve(token);
    }
    /**
     * Get specific use cases for common operations
     */
    getCreateAssetUseCase() {
        return this.resolve("CreateAssetUseCase");
    }
    getRenderButtonsUseCase() {
        return this.resolve("RenderClassButtonsUseCase");
    }
    getExecuteButtonCommandUseCase() {
        return this.resolve("ExecuteButtonCommandUseCase");
    }
    getButtonRenderer() {
        return this.resolve("ButtonRenderer");
    }
    getPropertyRenderer() {
        return this.resolve("PropertyRenderer");
    }
    getLayoutRenderer() {
        return this.resolve("LayoutRenderer");
    }
    getPropertyEditingUseCase() {
        return this.resolve("PropertyEditingUseCase");
    }
    getQueryTemplateUseCase() {
        return this.resolve("QueryTemplateUseCase");
    }
    getQueryTemplateRepository() {
        return this.resolve("IQueryTemplateRepository");
    }
    getQueryEngineService() {
        return this.resolve("QueryEngineService");
    }
    getQueryEngineFactory() {
        return this.resolve("QueryEngineFactory");
    }
    getRDFService() {
        return this.resolve("RDFService");
    }
    // Mobile Components Getters
    getMobilePerformanceOptimizer() {
        return this.resolve("MobilePerformanceOptimizer");
    }
    getOfflineDataManager() {
        return this.resolve("OfflineDataManager");
    }
    getMobileUIComponents() {
        return this.resolve("MobileUIComponents");
    }
    getTouchGraphControllerClass() {
        return this.resolve("TouchGraphControllerClass");
    }
    getMobileModalAdapterClass() {
        return this.resolve("MobileModalAdapterClass");
    }
    /**
     * Clean up resources
     */
    dispose() {
        // Clean up any resources if needed
        this.container.clear();
    }
}
exports.DIContainer = DIContainer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vc3JjL2luZnJhc3RydWN0dXJlL2NvbnRhaW5lci9ESUNvbnRhaW5lci50cyIsIm1hcHBpbmdzIjoiOzs7QUFDQSxnRUFBNkQ7QUFRN0QsMEJBQTBCO0FBQzFCLHlGQUFzRjtBQUN0RixxRkFBa0Y7QUFDbEYscUVBQWtFO0FBQ2xFLDJFQUF3RTtBQVF4RSxxRkFBa0Y7QUFDbEYsMkZBQXdGO0FBQ3hGLDZGQUEwRjtBQUMxRix1RkFBb0Y7QUFDcEYsaUdBQThGO0FBRTlGLFlBQVk7QUFDWix1RkFBb0Y7QUFDcEYsK0ZBQTRGO0FBQzVGLCtGQUE0RjtBQUM1RixxR0FBa0c7QUFDbEcseUdBQXNHO0FBQ3RHLCtGQUE0RjtBQUM1RiwyRkFBd0Y7QUFJeEYsaUZBQThFO0FBQzlFLHdGQUFxRjtBQUNyRixvR0FBaUc7QUFDakcsbUdBQWdHO0FBQ2hHLHFGQUFrRjtBQUNsRiwrRUFBNEU7QUFFNUUseUZBQXNGO0FBRXRGLHFHQUFrRztBQUNsRyw0RUFBeUU7QUFDekUsc0ZBQW1GO0FBQ25GLCtFQUE0RTtBQUM1RSxzRUFBbUU7QUFFbkUsZUFBZTtBQUNmLGlGQUE4RTtBQUM5RSxxRkFBa0Y7QUFDbEYsZ0ZBQTZFO0FBRTdFLG9CQUFvQjtBQUNwQix5RkFBc0Y7QUFDdEYseUZBQXNGO0FBQ3RGLHFGQUFrRjtBQUNsRix5RkFBc0Y7QUFDdEYsc0VBQW1FO0FBQ25FLGdFQUE2RDtBQUU3RDs7O0dBR0c7QUFDSCxNQUFhLFdBQVc7SUFNdEIsWUFBNEIsR0FBUTtRQUFSLFFBQUcsR0FBSCxHQUFHLENBQUs7UUFDbEMsSUFBSSxDQUFDLFNBQVMsR0FBRyxxQkFBUyxDQUFDLFdBQVcsRUFBRSxDQUFDO1FBQ3pDLElBQUksQ0FBQyxvQkFBb0IsRUFBRSxDQUFDO0lBQzlCLENBQUM7SUFFTSxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQVEsRUFBRSxNQUFZO1FBQzdDLElBQUksQ0FBQyxXQUFXLENBQUMsUUFBUSxFQUFF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QixDQUFDO0NBQ0Y7QUE1ZEQsa0NBNGRDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9raXRlbGV2L0RvY3VtZW50cy9leG9jb3J0ZXgtb2JzaWRpYW4tcGx1Z2luL3NyYy9pbmZyYXN0cnVjdHVyZS9jb250YWluZXIvRElDb250YWluZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBDb250YWluZXIgfSBmcm9tIFwiLi4vLi4vYXBwbGljYXRpb24vY29yZS9Db250YWluZXJcIjtcblxuLy8gUG9ydCBJbnRlcmZhY2VzXG5pbXBvcnQgeyBJTm90aWZpY2F0aW9uU2VydmljZSB9IGZyb20gXCIuLi8uLi9hcHBsaWNhdGlvbi9wb3J0cy9JTm90aWZpY2F0aW9uU2VydmljZVwiO1xuaW1wb3J0IHsgSUZpbGVTeXN0ZW1BZGFwdGVyIH0gZnJvbSBcIi4uLy4uL2FwcGxpY2F0aW9uL3BvcnRzL0lGaWxlU3lzdGVtQWRhcHRlclwiO1xuaW1wb3J0IHsgSVVJQWRhcHRlciB9IGZyb20gXCIuLi8uLi9hcHBsaWNhdGlvbi9wb3J0cy9JVUlBZGFwdGVyXCI7XG5pbXBvcnQgeyBJVmF1bHRBZGFwdGVyIH0gZnJvbSBcIi4uLy4uL2FwcGxpY2F0aW9uL3BvcnRzL0lWYXVsdEFkYXB0ZXJcIjtcblxuLy8gSW5mcmFzdHJ1Y3R1cmUgQWRhcHRlcnNcbmltcG9ydCB7IE9ic2lkaWFuTm90aWZpY2F0aW9uU2VydmljZSB9IGZyb20gXCIuLi9hZGFwdGVycy9PYnNpZGlhbk5vdGlmaWNhdGlvblNlcnZpY2VcIjtcbmltcG9ydCB7IE9ic2lkaWFuRmlsZVN5c3RlbUFkYXB0ZXIgfSBmcm9tIFwiLi4vYWRhcHRlcnMvT2JzaWRpYW5GaWxlU3lzdGVtQWRhcHRlclwiO1xuaW1wb3J0IHsgT2JzaWRpYW5VSUFkYXB0ZXIgfSBmcm9tIFwiLi4vYWRhcHRlcnMvT2JzaWRpYW5VSUFkYXB0ZXJcIjtcbmltcG9ydCB7IE9ic2lkaWFuVmF1bHRBZGFwdGVyIH0gZnJvbSBcIi4uL2FkYXB0ZXJzL09ic2lkaWFuVmF1bHRBZGFwdGVyXCI7XG5cbi8vIFJlcG9zaXRvcmllc1xuaW1wb3J0IHsgSUFzc2V0UmVwb3NpdG9yeSB9IGZyb20gXCIuLi8uLi9kb21haW4vcmVwb3NpdG9yaWVzL0lBc3NldFJlcG9zaXRvcnlcIjtcbmltcG9ydCB7IElPbnRvbG9neVJlcG9zaXRvcnkgfSBmcm9tIFwiLi4vLi4vZG9tYWluL3JlcG9zaXRvcmllcy9JT250b2xvZ3lSZXBvc2l0b3J5XCI7XG5pbXBvcnQgeyBJQ2xhc3NWaWV3UmVwb3NpdG9yeSB9IGZyb20gXCIuLi8uLi9kb21haW4vcmVwb3NpdG9yaWVzL0lDbGFzc1ZpZXdSZXBvc2l0b3J5XCI7XG5pbXBvcnQgeyBJQnV0dG9uUmVwb3NpdG9yeSB9IGZyb20gXCIuLi8uLi9kb21haW4vcmVwb3NpdG9yaWVzL0lCdXR0b25SZXBvc2l0b3J5XCI7XG5pbXBvcnQgeyBJQ2xhc3NMYXlvdXRSZXBvc2l0b3J5IH0gZnJvbSBcIi4uLy4uL2RvbWFpbi9yZXBvc2l0b3JpZXMvSUNsYXNzTGF5b3V0UmVwb3NpdG9yeVwiO1xuaW1wb3J0IHsgT2JzaWRpYW5Bc3NldFJlcG9zaXRvcnkgfSBmcm9tIFwiLi4vcmVwb3NpdG9yaWVzL09ic2lkaWFuQXNzZXRSZXBvc2l0b3J5XCI7XG5pbXBvcnQgeyBPYnNpZGlhbk9udG9sb2d5UmVwb3NpdG9yeSB9IGZyb20gXCIuLi9yZXBvc2l0b3JpZXMvT2JzaWRpYW5PbnRvbG9neVJlcG9zaXRvcnlcIjtcbmltcG9ydCB7IE9ic2lkaWFuQ2xhc3NWaWV3UmVwb3NpdG9yeSB9IGZyb20gXCIuLi9yZXBvc2l0b3JpZXMvT2JzaWRpYW5DbGFzc1ZpZXdSZXBvc2l0b3J5XCI7XG5pbXBvcnQgeyBPYnNpZGlhbkJ1dHRvblJlcG9zaXRvcnkgfSBmcm9tIFwiLi4vcmVwb3NpdG9yaWVzL09ic2lkaWFuQnV0dG9uUmVwb3NpdG9yeVwiO1xuaW1wb3J0IHsgT2JzaWRpYW5DbGFzc0xheW91dFJlcG9zaXRvcnkgfSBmcm9tIFwiLi4vcmVwb3NpdG9yaWVzL09ic2lkaWFuQ2xhc3NMYXlvdXRSZXBvc2l0b3J5XCI7XG5cbi8vIFVzZSBDYXNlc1xuaW1wb3J0IHsgQ3JlYXRlQXNzZXRVc2VDYXNlIH0gZnJvbSBcIi4uLy4uL2FwcGxpY2F0aW9uL3VzZS1jYXNlcy9DcmVhdGVBc3NldFVzZUNhc2VcIjtcbmltcG9ydCB7IENyZWF0ZUNoaWxkVGFza1VzZUNhc2UgfSBmcm9tIFwiLi4vLi4vYXBwbGljYXRpb24vdXNlLWNhc2VzL0NyZWF0ZUNoaWxkVGFza1VzZUNhc2VcIjtcbmltcG9ydCB7IENyZWF0ZUNoaWxkQXJlYVVzZUNhc2UgfSBmcm9tIFwiLi4vLi4vYXBwbGljYXRpb24vdXNlLWNhc2VzL0NyZWF0ZUNoaWxkQXJlYVVzZUNhc2VcIjtcbmltcG9ydCB7IFJlbmRlckNsYXNzQnV0dG9uc1VzZUNhc2UgfSBmcm9tIFwiLi4vLi4vYXBwbGljYXRpb24vdXNlLWNhc2VzL1JlbmRlckNsYXNzQnV0dG9uc1VzZUNhc2VcIjtcbmltcG9ydCB7IEV4ZWN1dGVCdXR0b25Db21tYW5kVXNlQ2FzZSB9IGZyb20gXCIuLi8uLi9hcHBsaWNhdGlvbi91c2UtY2FzZXMvRXhlY3V0ZUJ1dHRvbkNvbW1hbmRVc2VDYXNlXCI7XG5pbXBvcnQgeyBQcm9wZXJ0eUVkaXRpbmdVc2VDYXNlIH0gZnJvbSBcIi4uLy4uL2FwcGxpY2F0aW9uL3VzZS1jYXNlcy9Qcm9wZXJ0eUVkaXRpbmdVc2VDYXNlXCI7XG5pbXBvcnQgeyBRdWVyeVRlbXBsYXRlVXNlQ2FzZSB9IGZyb20gXCIuLi8uLi9hcHBsaWNhdGlvbi91c2UtY2FzZXMvUXVlcnlUZW1wbGF0ZVVzZUNhc2VcIjtcblxuLy8gU2VydmljZXNcbmltcG9ydCB7IElDb21tYW5kRXhlY3V0b3IgfSBmcm9tIFwiLi4vLi4vYXBwbGljYXRpb24vc2VydmljZXMvSUNvbW1hbmRFeGVjdXRvclwiO1xuaW1wb3J0IHsgT2JzaWRpYW5Db21tYW5kRXhlY3V0b3IgfSBmcm9tIFwiLi4vc2VydmljZXMvT2JzaWRpYW5Db21tYW5kRXhlY3V0b3JcIjtcbmltcG9ydCB7IEVycm9ySGFuZGxlclNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vYXBwbGljYXRpb24vc2VydmljZXMvRXJyb3JIYW5kbGVyU2VydmljZVwiO1xuaW1wb3J0IHsgU1BBUlFMQXV0b2NvbXBsZXRlU2VydmljZSB9IGZyb20gXCIuLi8uLi9hcHBsaWNhdGlvbi9zZXJ2aWNlcy9TUEFSUUxBdXRvY29tcGxldGVTZXJ2aWNlXCI7XG5pbXBvcnQgeyBPbnRvbG9neVByb3Zpc2lvbmluZ1NlcnZpY2UgfSBmcm9tIFwiLi4vLi4vZG9tYWluL3NlcnZpY2VzL09udG9sb2d5UHJvdmlzaW9uaW5nU2VydmljZVwiO1xuaW1wb3J0IHsgUHJvcGVydHlDYWNoZVNlcnZpY2UgfSBmcm9tIFwiLi4vLi4vZG9tYWluL3NlcnZpY2VzL1Byb3BlcnR5Q2FjaGVTZXJ2aWNlXCI7XG5pbXBvcnQgeyBDaXJjdWl0QnJlYWtlclNlcnZpY2UgfSBmcm9tIFwiLi4vcmVzaWxpZW5jZS9DaXJjdWl0QnJlYWtlclNlcnZpY2VcIjtcbmltcG9ydCB7IElTdWdnZXN0aW9uUmVwb3NpdG9yeSB9IGZyb20gXCIuLi8uLi9kb21haW4vcmVwb3NpdG9yaWVzL0lTdWdnZXN0aW9uUmVwb3NpdG9yeVwiO1xuaW1wb3J0IHsgR3JhcGhTdWdnZXN0aW9uUmVwb3NpdG9yeSB9IGZyb20gXCIuLi9yZXBvc2l0b3JpZXMvR3JhcGhTdWdnZXN0aW9uUmVwb3NpdG9yeVwiO1xuaW1wb3J0IHsgSVF1ZXJ5VGVtcGxhdGVSZXBvc2l0b3J5IH0gZnJvbSBcIi4uLy4uL2RvbWFpbi9yZXBvc2l0b3JpZXMvSVF1ZXJ5VGVtcGxhdGVSZXBvc2l0b3J5XCI7XG5pbXBvcnQgeyBPYnNpZGlhblF1ZXJ5VGVtcGxhdGVSZXBvc2l0b3J5IH0gZnJvbSBcIi4uL3JlcG9zaXRvcmllcy9PYnNpZGlhblF1ZXJ5VGVtcGxhdGVSZXBvc2l0b3J5XCI7XG5pbXBvcnQgeyBRdWVyeUVuZ2luZUZhY3RvcnkgfSBmcm9tIFwiLi4vcXVlcnktZW5naW5lcy9RdWVyeUVuZ2luZUZhY3RvcnlcIjtcbmltcG9ydCB7IFF1ZXJ5RW5naW5lU2VydmljZSB9IGZyb20gXCIuLi8uLi9hcHBsaWNhdGlvbi9zZXJ2aWNlcy9RdWVyeUVuZ2luZVNlcnZpY2VcIjtcbmltcG9ydCB7IFF1ZXJ5RW5naW5lQ29uZmlnIH0gZnJvbSBcIi4uLy4uL2RvbWFpbi9lbnRpdGllcy9RdWVyeUVuZ2luZUNvbmZpZ1wiO1xuaW1wb3J0IHsgUkRGU2VydmljZSB9IGZyb20gXCIuLi8uLi9hcHBsaWNhdGlvbi9zZXJ2aWNlcy9SREZTZXJ2aWNlXCI7XG5cbi8vIFByZXNlbnRhdGlvblxuaW1wb3J0IHsgQnV0dG9uUmVuZGVyZXIgfSBmcm9tIFwiLi4vLi4vcHJlc2VudGF0aW9uL2NvbXBvbmVudHMvQnV0dG9uUmVuZGVyZXJcIjtcbmltcG9ydCB7IFByb3BlcnR5UmVuZGVyZXIgfSBmcm9tIFwiLi4vLi4vcHJlc2VudGF0aW9uL2NvbXBvbmVudHMvUHJvcGVydHlSZW5kZXJlclwiO1xuaW1wb3J0IHsgTGF5b3V0UmVuZGVyZXIgfSBmcm9tIFwiLi4vLi4vcHJlc2VudGF0aW9uL3JlbmRlcmVycy9MYXlvdXRSZW5kZXJlclwiO1xuXG4vLyBNb2JpbGUgQ29tcG9uZW50c1xuaW1wb3J0IHsgTW9iaWxlVUlDb21wb25lbnRzIH0gZnJvbSBcIi4uLy4uL3ByZXNlbnRhdGlvbi9jb21wb25lbnRzL01vYmlsZVVJQ29tcG9uZW50c1wiO1xuaW1wb3J0IHsgVG91Y2hHcmFwaENvbnRyb2xsZXIgfSBmcm9tIFwiLi4vLi4vcHJlc2VudGF0aW9uL21vYmlsZS9Ub3VjaEdyYXBoQ29udHJvbGxlclwiO1xuaW1wb3J0IHsgTW9iaWxlTW9kYWxBZGFwdGVyIH0gZnJvbSBcIi4uLy4uL3ByZXNlbnRhdGlvbi9tb2JpbGUvTW9iaWxlTW9kYWxBZGFwdGVyXCI7XG5pbXBvcnQgeyBNb2JpbGVQZXJmb3JtYW5jZU9wdGltaXplciB9IGZyb20gXCIuLi9vcHRpbWl6ZXJzL01vYmlsZVBlcmZvcm1hbmNlT3B0aW1pemVyXCI7XG5pbXBvcnQgeyBPZmZsaW5lRGF0YU1hbmFnZXIgfSBmcm9tIFwiLi4vb2ZmbGluZS9PZmZsaW5lRGF0YU1hbmFnZXJcIjtcbmltcG9ydCB7IFBsYXRmb3JtRGV0ZWN0b3IgfSBmcm9tIFwiLi4vdXRpbHMvUGxhdGZvcm1EZXRlY3RvclwiO1xuXG4vKipcbiAqIERlcGVuZGVuY3kgSW5qZWN0aW9uIENvbnRhaW5lciBTZXR1cFxuICogRm9sbG93aW5nIENsZWFuIEFyY2hpdGVjdHVyZSAtIHdpcmVzIHVwIGFsbCBkZXBlbmRlbmNpZXNcbiAqL1xuZXhwb3J0IGNsYXNzIERJQ29udGFpbmVyIHtcbiAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IERJQ29udGFpbmVyO1xuICBwcml2YXRlIGNvbnRhaW5lcjogQ29udGFpbmVyO1xuXG4gIHByaXZhdGUgcGx1Z2luOiBhbnk7XG5cbiAgcHJpdmF0ZSBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwcDogQXBwKSB7XG4gICAgdGhpcy5jb250YWluZXIgPSBDb250YWluZXIuZ2V0SW5zdGFuY2UoKTtcbiAgICB0aGlzLnJlZ2lzdGVyRGVwZW5kZW5jaWVzKCk7XG4gIH1cblxuICBwdWJsaWMgc3RhdGljIGluaXRpYWxpemUoYXBwOiBBcHAsIHBsdWdpbj86IGFueSk6IERJQ29udGFpbmVyIHtcbiAgICBpZiAoIURJQ29udGFpbmVyLmluc3RhbmNlKSB7XG4gICAgICBESUNvbnRhaW5lci5pbnN0YW5jZSA9IG5ldyBESUNvbnRhaW5lcihhcHApO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBBbHdheXMgdXBkYXRlIGFwcCBhbmQgcGx1Z2luIHJlZmVyZW5jZXNcbiAgICAgIERJQ29udGFpbmVyLmluc3RhbmNlLmFwcCA9IGFwcDtcbiAgICAgIGlmIChwbHVnaW4pIHtcbiAgICAgICAgRElDb250YWluZXIuaW5zdGFuY2UucGx1Z2luID0gcGx1Z2luO1xuICAgICAgfVxuICAgICAgLy8gUmUtcmVnaXN0ZXIgZGVwZW5kZW5jaWVzIHRvIGVuc3VyZSB0aGV5IHVzZSB0aGUgbmV3IGFwcCBpbnN0YW5jZVxuICAgICAgRElDb250YWluZXIuaW5zdGFuY2UuY29udGFpbmVyLmNsZWFyKCk7XG4gICAgICBESUNvbnRhaW5lci5pbnN0YW5jZS5yZWdpc3RlckRlcGVuZGVuY2llcygpO1xuICAgIH1cbiAgICBpZiAocGx1Z2luICYmICFESUNvbnRhaW5lci5pbnN0YW5jZS5wbHVnaW4pIHtcbiAgICAgIERJQ29udGFpbmVyLmluc3RhbmNlLnBsdWdpbiA9IHBsdWdpbjtcbiAgICB9XG4gICAgcmV0dXJuIERJQ29udGFpbmVyLmluc3RhbmNlO1xuICB9XG5cbiAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBESUNvbnRhaW5lciB7XG4gICAgaWYgKCFESUNvbnRhaW5lci5pbnN0YW5jZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICBcIkRJQ29udGFpbmVyIG5vdCBpbml0aWFsaXplZC4gQ2FsbCBpbml0aWFsaXplKGFwcCkgZmlyc3QuXCIsXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gRElDb250YWluZXIuaW5zdGFuY2U7XG4gIH1cblxuICAvKipcbiAgICogQXN5bmMgaW5pdGlhbGl6ZSBtZXRob2QgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHlcbiAgICovXG4gIHB1YmxpYyBhc3luYyBpbml0aWFsaXplKGFwcDogQXBwKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQWxyZWFkeSBpbml0aWFsaXplZCBpbiBjb25zdHJ1Y3RvciwgdGhpcyBpcyBmb3IgYmFja3dhcmQgY29tcGF0aWJpbGl0eVxuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCB0aGUgY29udGFpbmVyIGluc3RhbmNlIChmb3IgdGVzdGluZyBwdXJwb3NlcylcbiAgICovXG4gIHB1YmxpYyBzdGF0aWMgcmVzZXQoKTogdm9pZCB7XG4gICAgRElDb250YWluZXIuaW5zdGFuY2UgPSBudWxsIGFzIGFueTtcbiAgfVxuXG4gIHByaXZhdGUgcmVnaXN0ZXJEZXBlbmRlbmNpZXMoKTogdm9pZCB7XG4gICAgLy8gUmVnaXN0ZXIgT2JzaWRpYW4gQXBwXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXIoXCJBcHBcIiwgKCkgPT4gdGhpcy5hcHApO1xuXG4gICAgLy8gUmVnaXN0ZXIgUG9ydCBJbXBsZW1lbnRhdGlvbnNcbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxJTm90aWZpY2F0aW9uU2VydmljZT4oXG4gICAgICBcIklOb3RpZmljYXRpb25TZXJ2aWNlXCIsXG4gICAgICAoKSA9PiBuZXcgT2JzaWRpYW5Ob3RpZmljYXRpb25TZXJ2aWNlKCksXG4gICAgKTtcblxuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPElGaWxlU3lzdGVtQWRhcHRlcj4oXG4gICAgICBcIklGaWxlU3lzdGVtQWRhcHRlclwiLFxuICAgICAgKCkgPT4gbmV3IE9ic2lkaWFuRmlsZVN5c3RlbUFkYXB0ZXIodGhpcy5hcHApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxJVUlBZGFwdGVyPihcbiAgICAgIFwiSVVJQWRhcHRlclwiLFxuICAgICAgKCkgPT4gbmV3IE9ic2lkaWFuVUlBZGFwdGVyKHRoaXMuYXBwKSxcbiAgICApO1xuXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8SVZhdWx0QWRhcHRlcj4oXG4gICAgICBcIklWYXVsdEFkYXB0ZXJcIixcbiAgICAgICgpID0+IG5ldyBPYnNpZGlhblZhdWx0QWRhcHRlcih0aGlzLmFwcC52YXVsdCwgdGhpcy5hcHAubWV0YWRhdGFDYWNoZSksXG4gICAgKTtcblxuICAgIC8vIFJlZ2lzdGVyIFJlcG9zaXRvcmllc1xuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPElBc3NldFJlcG9zaXRvcnk+KFxuICAgICAgXCJJQXNzZXRSZXBvc2l0b3J5XCIsXG4gICAgICAoKSA9PiBuZXcgT2JzaWRpYW5Bc3NldFJlcG9zaXRvcnkodGhpcy5hcHApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxJT250b2xvZ3lSZXBvc2l0b3J5PihcbiAgICAgIFwiSU9udG9sb2d5UmVwb3NpdG9yeVwiLFxuICAgICAgKCkgPT4gbmV3IE9ic2lkaWFuT250b2xvZ3lSZXBvc2l0b3J5KHRoaXMuYXBwKSxcbiAgICApO1xuXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8SUNsYXNzVmlld1JlcG9zaXRvcnk+KFxuICAgICAgXCJJQ2xhc3NWaWV3UmVwb3NpdG9yeVwiLFxuICAgICAgKCkgPT4gbmV3IE9ic2lkaWFuQ2xhc3NWaWV3UmVwb3NpdG9yeSh0aGlzLmFwcCksXG4gICAgKTtcblxuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPElCdXR0b25SZXBvc2l0b3J5PihcbiAgICAgIFwiSUJ1dHRvblJlcG9zaXRvcnlcIixcbiAgICAgICgpID0+IG5ldyBPYnNpZGlhbkJ1dHRvblJlcG9zaXRvcnkodGhpcy5hcHApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxJQ2xhc3NMYXlvdXRSZXBvc2l0b3J5PihcbiAgICAgIFwiSUNsYXNzTGF5b3V0UmVwb3NpdG9yeVwiLFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IE9ic2lkaWFuQ2xhc3NMYXlvdXRSZXBvc2l0b3J5KFxuICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgIHRoaXMucGx1Z2luPy5zZXR0aW5ncz8ubGF5b3V0c0ZvbGRlclBhdGggfHwgXCJsYXlvdXRzXCIsXG4gICAgICAgICksXG4gICAgKTtcblxuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPElRdWVyeVRlbXBsYXRlUmVwb3NpdG9yeT4oXG4gICAgICBcIklRdWVyeVRlbXBsYXRlUmVwb3NpdG9yeVwiLFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IE9ic2lkaWFuUXVlcnlUZW1wbGF0ZVJlcG9zaXRvcnkoXG4gICAgICAgICAgdGhpcy5hcHAsXG4gICAgICAgICAgdGhpcy5wbHVnaW4/LnNldHRpbmdzPy50ZW1wbGF0ZXNQYXRoIHx8IFwiLmV4b2NvcnRleC90ZW1wbGF0ZXNcIixcbiAgICAgICAgICB0aGlzLnBsdWdpbj8uc2V0dGluZ3M/LnRlbXBsYXRlVXNhZ2VEYXRhUGF0aCB8fFxuICAgICAgICAgICAgXCIuZXhvY29ydGV4L3RlbXBsYXRlLXVzYWdlLmpzb25cIixcbiAgICAgICAgKSxcbiAgICApO1xuXG4gICAgLy8gUmVnaXN0ZXIgU2VydmljZXNcbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxJQ29tbWFuZEV4ZWN1dG9yPihcbiAgICAgIFwiSUNvbW1hbmRFeGVjdXRvclwiLFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IE9ic2lkaWFuQ29tbWFuZEV4ZWN1dG9yKFxuICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlc29sdmU8SUFzc2V0UmVwb3NpdG9yeT4oXCJJQXNzZXRSZXBvc2l0b3J5XCIpLFxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlc29sdmU8Q3JlYXRlQ2hpbGRUYXNrVXNlQ2FzZT4oXG4gICAgICAgICAgICBcIkNyZWF0ZUNoaWxkVGFza1VzZUNhc2VcIixcbiAgICAgICAgICApLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICAvLyBSZWdpc3RlciBFcnJvciBIYW5kbGVyIFNlcnZpY2VcbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxFcnJvckhhbmRsZXJTZXJ2aWNlPihcbiAgICAgIFwiRXJyb3JIYW5kbGVyU2VydmljZVwiLFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IEVycm9ySGFuZGxlclNlcnZpY2UoXG4gICAgICAgICAge1xuICAgICAgICAgICAgc2hvd1VzZXJOb3RpZmljYXRpb246IHRydWUsXG4gICAgICAgICAgICBsb2dUb0NvbnNvbGU6IHRydWUsXG4gICAgICAgICAgICB0cmFja01ldHJpY3M6IHRydWUsXG4gICAgICAgICAgICBhdXRvUmVjb3ZlcjogZmFsc2UsXG4gICAgICAgICAgfSxcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPElOb3RpZmljYXRpb25TZXJ2aWNlPihcIklOb3RpZmljYXRpb25TZXJ2aWNlXCIpLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICAvLyBSZWdpc3RlciBBdXRvY29tcGxldGUgU2VydmljZXNcbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxJU3VnZ2VzdGlvblJlcG9zaXRvcnk+KFxuICAgICAgXCJJU3VnZ2VzdGlvblJlcG9zaXRvcnlcIixcbiAgICAgICgpID0+IHtcbiAgICAgICAgLy8gTmVlZCB0byBnZXQgZ3JhcGggaW5zdGFuY2UgLSB3aWxsIGJlIHByb3ZpZGVkIGJ5IHBsdWdpblxuICAgICAgICBjb25zdCBncmFwaCA9ICh0aGlzLnBsdWdpbiBhcyBhbnkpPy5ncmFwaCB8fCBudWxsO1xuICAgICAgICByZXR1cm4gbmV3IEdyYXBoU3VnZ2VzdGlvblJlcG9zaXRvcnkoZ3JhcGgpO1xuICAgICAgfSxcbiAgICApO1xuXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8U1BBUlFMQXV0b2NvbXBsZXRlU2VydmljZT4oXG4gICAgICBcIlNQQVJRTEF1dG9jb21wbGV0ZVNlcnZpY2VcIixcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBTUEFSUUxBdXRvY29tcGxldGVTZXJ2aWNlKFxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlc29sdmU8SVN1Z2dlc3Rpb25SZXBvc2l0b3J5PihcbiAgICAgICAgICAgIFwiSVN1Z2dlc3Rpb25SZXBvc2l0b3J5XCIsXG4gICAgICAgICAgKSxcbiAgICAgICAgICAodGhpcy5wbHVnaW4gYXMgYW55KT8uZ3JhcGggfHwgbnVsbCxcbiAgICAgICAgKSxcbiAgICApO1xuXG4gICAgLy8gUmVnaXN0ZXIgUXVlcnkgRW5naW5lIFNlcnZpY2VzXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8UXVlcnlFbmdpbmVGYWN0b3J5PihcIlF1ZXJ5RW5naW5lRmFjdG9yeVwiLCAoKSA9PiB7XG4gICAgICBjb25zdCBmYWN0b3J5ID0gbmV3IFF1ZXJ5RW5naW5lRmFjdG9yeSh0aGlzLmFwcCk7XG5cbiAgICAgIC8vIFRyeSB0byBnZXQgRGF0YXZpZXcgYW5kIERhdGFjb3JlIEFQSXMgaWYgYXZhaWxhYmxlXG4gICAgICBjb25zdCBwbHVnaW5zID0gKHRoaXMuYXBwIGFzIGFueSkucGx1Z2lucztcbiAgICAgIGNvbnN0IGRhdGF2aWV3QXBpID0gcGx1Z2lucz8ucGx1Z2lucz8uZGF0YXZpZXc/LmFwaTtcbiAgICAgIGNvbnN0IGRhdGFjb3JlQXBpID0gcGx1Z2lucz8ucGx1Z2lucz8uZGF0YWNvcmU/LmFwaTtcblxuICAgICAgZmFjdG9yeS51cGRhdGVBcGlzKGRhdGF2aWV3QXBpLCBkYXRhY29yZUFwaSk7XG4gICAgICByZXR1cm4gZmFjdG9yeTtcbiAgICB9KTtcblxuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPFF1ZXJ5RW5naW5lQ29uZmlnPihcIlF1ZXJ5RW5naW5lQ29uZmlnXCIsICgpID0+IHtcbiAgICAgIC8vIENyZWF0ZSBkZWZhdWx0IGNvbmZpZywgY291bGQgYmUgb3ZlcnJpZGRlbiBieSBwbHVnaW4gc2V0dGluZ3NcbiAgICAgIGNvbnN0IGNvbmZpZ1Jlc3VsdCA9IFF1ZXJ5RW5naW5lQ29uZmlnLmNyZWF0ZURlZmF1bHQoKTtcbiAgICAgIHJldHVybiBjb25maWdSZXN1bHQuZ2V0VmFsdWUoKSE7XG4gICAgfSk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxRdWVyeUVuZ2luZVNlcnZpY2U+KFxuICAgICAgXCJRdWVyeUVuZ2luZVNlcnZpY2VcIixcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBRdWVyeUVuZ2luZVNlcnZpY2UoXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxRdWVyeUVuZ2luZUZhY3Rvcnk+KFwiUXVlcnlFbmdpbmVGYWN0b3J5XCIpLFxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlc29sdmU8UXVlcnlFbmdpbmVDb25maWc+KFwiUXVlcnlFbmdpbmVDb25maWdcIiksXG4gICAgICAgICksXG4gICAgKTtcblxuICAgIC8vIFJlZ2lzdGVyIFJERiBTZXJ2aWNlIC0gTXVzdCBiZSBiZWZvcmUgYW55IGRlcGVuZGVuY2llcyB0aGF0IHVzZSBpdFxuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPFJERlNlcnZpY2U+KFxuICAgICAgXCJSREZTZXJ2aWNlXCIsXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgUkRGU2VydmljZShcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPElOb3RpZmljYXRpb25TZXJ2aWNlPihcIklOb3RpZmljYXRpb25TZXJ2aWNlXCIpLFxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlc29sdmU8SUZpbGVTeXN0ZW1BZGFwdGVyPihcIklGaWxlU3lzdGVtQWRhcHRlclwiKSxcbiAgICAgICAgKSxcbiAgICApO1xuXG4gICAgLy8gUmVnaXN0ZXIgRG9tYWluIFNlcnZpY2VzXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8T250b2xvZ3lQcm92aXNpb25pbmdTZXJ2aWNlPihcbiAgICAgIFwiT250b2xvZ3lQcm92aXNpb25pbmdTZXJ2aWNlXCIsXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgT250b2xvZ3lQcm92aXNpb25pbmdTZXJ2aWNlKFxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlc29sdmU8SU9udG9sb2d5UmVwb3NpdG9yeT4oXCJJT250b2xvZ3lSZXBvc2l0b3J5XCIpLFxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlc29sdmU8SVZhdWx0QWRhcHRlcj4oXCJJVmF1bHRBZGFwdGVyXCIpLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxQcm9wZXJ0eUNhY2hlU2VydmljZT4oXG4gICAgICBcIlByb3BlcnR5Q2FjaGVTZXJ2aWNlXCIsXG4gICAgICAoKSA9PiBQcm9wZXJ0eUNhY2hlU2VydmljZS5nZXRJbnN0YW5jZSgpLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxDaXJjdWl0QnJlYWtlclNlcnZpY2U+KFxuICAgICAgXCJDaXJjdWl0QnJlYWtlclNlcnZpY2VcIixcbiAgICAgICgpID0+IENpcmN1aXRCcmVha2VyU2VydmljZS5nZXRJbnN0YW5jZSgpLFxuICAgICk7XG5cbiAgICAvLyBSZWdpc3RlciBVc2UgQ2FzZXNcbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxDcmVhdGVBc3NldFVzZUNhc2U+KFxuICAgICAgXCJDcmVhdGVBc3NldFVzZUNhc2VcIixcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBDcmVhdGVBc3NldFVzZUNhc2UoXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxJQXNzZXRSZXBvc2l0b3J5PihcIklBc3NldFJlcG9zaXRvcnlcIiksXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxJT250b2xvZ3lSZXBvc2l0b3J5PihcIklPbnRvbG9neVJlcG9zaXRvcnlcIiksXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxPbnRvbG9neVByb3Zpc2lvbmluZ1NlcnZpY2U+KFwiT250b2xvZ3lQcm92aXNpb25pbmdTZXJ2aWNlXCIpLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxDcmVhdGVDaGlsZFRhc2tVc2VDYXNlPihcbiAgICAgIFwiQ3JlYXRlQ2hpbGRUYXNrVXNlQ2FzZVwiLFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IENyZWF0ZUNoaWxkVGFza1VzZUNhc2UoXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxJQXNzZXRSZXBvc2l0b3J5PihcIklBc3NldFJlcG9zaXRvcnlcIiksXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxDcmVhdGVBc3NldFVzZUNhc2U+KFwiQ3JlYXRlQXNzZXRVc2VDYXNlXCIpLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxDcmVhdGVDaGlsZEFyZWFVc2VDYXNlPihcbiAgICAgIFwiQ3JlYXRlQ2hpbGRBcmVhVXNlQ2FzZVwiLFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IENyZWF0ZUNoaWxkQXJlYVVzZUNhc2UoXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxJQXNzZXRSZXBvc2l0b3J5PihcIklBc3NldFJlcG9zaXRvcnlcIiksXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxDcmVhdGVBc3NldFVzZUNhc2U+KFwiQ3JlYXRlQXNzZXRVc2VDYXNlXCIpLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxSZW5kZXJDbGFzc0J1dHRvbnNVc2VDYXNlPihcbiAgICAgIFwiUmVuZGVyQ2xhc3NCdXR0b25zVXNlQ2FzZVwiLFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IFJlbmRlckNsYXNzQnV0dG9uc1VzZUNhc2UoXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxJQ2xhc3NWaWV3UmVwb3NpdG9yeT4oXCJJQ2xhc3NWaWV3UmVwb3NpdG9yeVwiKSxcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPElCdXR0b25SZXBvc2l0b3J5PihcIklCdXR0b25SZXBvc2l0b3J5XCIpLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxFeGVjdXRlQnV0dG9uQ29tbWFuZFVzZUNhc2U+KFxuICAgICAgXCJFeGVjdXRlQnV0dG9uQ29tbWFuZFVzZUNhc2VcIixcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBFeGVjdXRlQnV0dG9uQ29tbWFuZFVzZUNhc2UoXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxJQnV0dG9uUmVwb3NpdG9yeT4oXCJJQnV0dG9uUmVwb3NpdG9yeVwiKSxcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPElDb21tYW5kRXhlY3V0b3I+KFwiSUNvbW1hbmRFeGVjdXRvclwiKSxcbiAgICAgICAgKSxcbiAgICApO1xuXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8UHJvcGVydHlFZGl0aW5nVXNlQ2FzZT4oXG4gICAgICBcIlByb3BlcnR5RWRpdGluZ1VzZUNhc2VcIixcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBQcm9wZXJ0eUVkaXRpbmdVc2VDYXNlKFxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlc29sdmU8SUFzc2V0UmVwb3NpdG9yeT4oXCJJQXNzZXRSZXBvc2l0b3J5XCIpLFxuICAgICAgICAgIHRoaXMucGx1Z2luIHx8IHRoaXMuYXBwLCAvLyBVc2UgcGx1Z2luIGlmIGF2YWlsYWJsZSwgb3RoZXJ3aXNlIGFwcFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICB0aGlzLmNvbnRhaW5lci5yZWdpc3RlcjxRdWVyeVRlbXBsYXRlVXNlQ2FzZT4oXG4gICAgICBcIlF1ZXJ5VGVtcGxhdGVVc2VDYXNlXCIsXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgUXVlcnlUZW1wbGF0ZVVzZUNhc2UoXG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVzb2x2ZTxJUXVlcnlUZW1wbGF0ZVJlcG9zaXRvcnk+KFxuICAgICAgICAgICAgXCJJUXVlcnlUZW1wbGF0ZVJlcG9zaXRvcnlcIixcbiAgICAgICAgICApLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICAvLyBSZWdpc3RlciBQcmVzZW50YXRpb24gQ29tcG9uZW50c1xuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPEJ1dHRvblJlbmRlcmVyPihcbiAgICAgIFwiQnV0dG9uUmVuZGVyZXJcIixcbiAgICAgICgpID0+XG4gICAgICAgIG5ldyBCdXR0b25SZW5kZXJlcihcbiAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPFJlbmRlckNsYXNzQnV0dG9uc1VzZUNhc2U+KFxuICAgICAgICAgICAgXCJSZW5kZXJDbGFzc0J1dHRvbnNVc2VDYXNlXCIsXG4gICAgICAgICAgKSxcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPEV4ZWN1dGVCdXR0b25Db21tYW5kVXNlQ2FzZT4oXG4gICAgICAgICAgICBcIkV4ZWN1dGVCdXR0b25Db21tYW5kVXNlQ2FzZVwiLFxuICAgICAgICAgICksXG4gICAgICAgICksXG4gICAgKTtcblxuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPFByb3BlcnR5UmVuZGVyZXI+KFxuICAgICAgXCJQcm9wZXJ0eVJlbmRlcmVyXCIsXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgUHJvcGVydHlSZW5kZXJlcihcbiAgICAgICAgICB0aGlzLmFwcCxcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPFByb3BlcnR5RWRpdGluZ1VzZUNhc2U+KFxuICAgICAgICAgICAgXCJQcm9wZXJ0eUVkaXRpbmdVc2VDYXNlXCIsXG4gICAgICAgICAgKSxcbiAgICAgICAgKSxcbiAgICApO1xuXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8TGF5b3V0UmVuZGVyZXI+KFxuICAgICAgXCJMYXlvdXRSZW5kZXJlclwiLFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IExheW91dFJlbmRlcmVyKFxuICAgICAgICAgIHRoaXMuYXBwLFxuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlc29sdmU8SUNsYXNzTGF5b3V0UmVwb3NpdG9yeT4oXG4gICAgICAgICAgICBcIklDbGFzc0xheW91dFJlcG9zaXRvcnlcIixcbiAgICAgICAgICApLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICAvLyBSZWdpc3RlciBNb2JpbGUgQ29tcG9uZW50c1xuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPE1vYmlsZVBlcmZvcm1hbmNlT3B0aW1pemVyPihcbiAgICAgIFwiTW9iaWxlUGVyZm9ybWFuY2VPcHRpbWl6ZXJcIixcbiAgICAgICgpID0+XG4gICAgICAgIE1vYmlsZVBlcmZvcm1hbmNlT3B0aW1pemVyLmdldEluc3RhbmNlKHtcbiAgICAgICAgICBtYXhNZW1vcnlNQjogUGxhdGZvcm1EZXRlY3Rvci5pc01vYmlsZSgpID8gNTAgOiAyMDAsXG4gICAgICAgICAgbWF4Q2FjaGVFbnRyaWVzOiBQbGF0Zm9ybURldGVjdG9yLmlzTW9iaWxlKCkgPyAxMDAgOiA1MDAsXG4gICAgICAgICAgYmF0Y2hTaXplOiBQbGF0Zm9ybURldGVjdG9yLmlzTW9iaWxlKCkgPyAxMCA6IDUwLFxuICAgICAgICAgIGRlYm91bmNlTXM6IFBsYXRmb3JtRGV0ZWN0b3IuaXNNb2JpbGUoKSA/IDUwMCA6IDIwMCxcbiAgICAgICAgICBlbmFibGVHQ0hpbnRzOiBQbGF0Zm9ybURldGVjdG9yLmlzTW9iaWxlKCksXG4gICAgICAgICAgZW5hYmxlTGF6eUxvYWRpbmc6IHRydWUsXG4gICAgICAgICAgdmlydHVhbFNjcm9sbFRocmVzaG9sZDogMTAwLFxuICAgICAgICB9KSxcbiAgICApO1xuXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8T2ZmbGluZURhdGFNYW5hZ2VyPihcbiAgICAgIFwiT2ZmbGluZURhdGFNYW5hZ2VyXCIsXG4gICAgICAoKSA9PlxuICAgICAgICBuZXcgT2ZmbGluZURhdGFNYW5hZ2VyKHtcbiAgICAgICAgICBzdHJhdGVneTogXCJpbmRleGVkZGJcIixcbiAgICAgICAgICBtYXhTdG9yYWdlTUI6IFBsYXRmb3JtRGV0ZWN0b3IuaXNNb2JpbGUoKSA/IDUwIDogMjAwLFxuICAgICAgICAgIG1heEFnZTogNyAqIDI0ICogNjAgKiA2MCAqIDEwMDAsIC8vIDcgZGF5c1xuICAgICAgICAgIGF1dG9TeW5jOiB0cnVlLFxuICAgICAgICAgIHN5bmNJbnRlcnZhbE1zOiAzMDAwMCxcbiAgICAgICAgICBlbmFibGVDb25mbGljdFJlc29sdXRpb246IHRydWUsXG4gICAgICAgICAgZW5hYmxlQ29tcHJlc3Npb246IFBsYXRmb3JtRGV0ZWN0b3IuaXNNb2JpbGUoKSxcbiAgICAgICAgfSksXG4gICAgKTtcblxuICAgIHRoaXMuY29udGFpbmVyLnJlZ2lzdGVyPE1vYmlsZVVJQ29tcG9uZW50cz4oXG4gICAgICBcIk1vYmlsZVVJQ29tcG9uZW50c1wiLFxuICAgICAgKCkgPT5cbiAgICAgICAgbmV3IE1vYmlsZVVJQ29tcG9uZW50cyhcbiAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZXNvbHZlPE1vYmlsZVBlcmZvcm1hbmNlT3B0aW1pemVyPihcbiAgICAgICAgICAgIFwiTW9iaWxlUGVyZm9ybWFuY2VPcHRpbWl6ZXJcIixcbiAgICAgICAgICApLFxuICAgICAgICApLFxuICAgICk7XG5cbiAgICAvLyBUb3VjaEdyYXBoQ29udHJvbGxlciBpcyB0eXBpY2FsbHkgY3JlYXRlZCBwZXIgZ3JhcGggaW5zdGFuY2UsXG4gICAgLy8gc28gd2UgcmVnaXN0ZXIgYSBmYWN0b3J5IGZ1bmN0aW9uXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8dHlwZW9mIFRvdWNoR3JhcGhDb250cm9sbGVyPihcbiAgICAgIFwiVG91Y2hHcmFwaENvbnRyb2xsZXJDbGFzc1wiLFxuICAgICAgKCkgPT4gVG91Y2hHcmFwaENvbnRyb2xsZXIsXG4gICAgKTtcblxuICAgIC8vIE1vYmlsZU1vZGFsQWRhcHRlciBpcyB0eXBpY2FsbHkgY3JlYXRlZCBwZXIgbW9kYWwsXG4gICAgLy8gc28gd2UgcmVnaXN0ZXIgYSBmYWN0b3J5IGZ1bmN0aW9uXG4gICAgdGhpcy5jb250YWluZXIucmVnaXN0ZXI8dHlwZW9mIE1vYmlsZU1vZGFsQWRhcHRlcj4oXG4gICAgICBcIk1vYmlsZU1vZGFsQWRhcHRlckNsYXNzXCIsXG4gICAgICAoKSA9PiBNb2JpbGVNb2RhbEFkYXB0ZXIsXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNvbHZlIGEgZGVwZW5kZW5jeSBmcm9tIHRoZSBjb250YWluZXJcbiAgICovXG4gIHB1YmxpYyByZXNvbHZlPFQ+KHRva2VuOiBzdHJpbmcpOiBUIHtcbiAgICByZXR1cm4gdGhpcy5jb250YWluZXIucmVzb2x2ZTxUPih0b2tlbik7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHNwZWNpZmljIHVzZSBjYXNlcyBmb3IgY29tbW9uIG9wZXJhdGlvbnNcbiAgICovXG4gIHB1YmxpYyBnZXRDcmVhdGVBc3NldFVzZUNhc2UoKTogQ3JlYXRlQXNzZXRVc2VDYXNlIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlPENyZWF0ZUFzc2V0VXNlQ2FzZT4oXCJDcmVhdGVBc3NldFVzZUNhc2VcIik7XG4gIH1cblxuICBwdWJsaWMgZ2V0UmVuZGVyQnV0dG9uc1VzZUNhc2UoKTogUmVuZGVyQ2xhc3NCdXR0b25zVXNlQ2FzZSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxSZW5kZXJDbGFzc0J1dHRvbnNVc2VDYXNlPihcIlJlbmRlckNsYXNzQnV0dG9uc1VzZUNhc2VcIik7XG4gIH1cblxuICBwdWJsaWMgZ2V0RXhlY3V0ZUJ1dHRvbkNvbW1hbmRVc2VDYXNlKCk6IEV4ZWN1dGVCdXR0b25Db21tYW5kVXNlQ2FzZSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxFeGVjdXRlQnV0dG9uQ29tbWFuZFVzZUNhc2U+KFxuICAgICAgXCJFeGVjdXRlQnV0dG9uQ29tbWFuZFVzZUNhc2VcIixcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGdldEJ1dHRvblJlbmRlcmVyKCk6IEJ1dHRvblJlbmRlcmVyIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlPEJ1dHRvblJlbmRlcmVyPihcIkJ1dHRvblJlbmRlcmVyXCIpO1xuICB9XG5cbiAgcHVibGljIGdldFByb3BlcnR5UmVuZGVyZXIoKTogUHJvcGVydHlSZW5kZXJlciB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxQcm9wZXJ0eVJlbmRlcmVyPihcIlByb3BlcnR5UmVuZGVyZXJcIik7XG4gIH1cblxuICBwdWJsaWMgZ2V0TGF5b3V0UmVuZGVyZXIoKTogTGF5b3V0UmVuZGVyZXIge1xuICAgIHJldHVybiB0aGlzLnJlc29sdmU8TGF5b3V0UmVuZGVyZXI+KFwiTGF5b3V0UmVuZGVyZXJcIik7XG4gIH1cblxuICBwdWJsaWMgZ2V0UHJvcGVydHlFZGl0aW5nVXNlQ2FzZSgpOiBQcm9wZXJ0eUVkaXRpbmdVc2VDYXNlIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlPFByb3BlcnR5RWRpdGluZ1VzZUNhc2U+KFwiUHJvcGVydHlFZGl0aW5nVXNlQ2FzZVwiKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRRdWVyeVRlbXBsYXRlVXNlQ2FzZSgpOiBRdWVyeVRlbXBsYXRlVXNlQ2FzZSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxRdWVyeVRlbXBsYXRlVXNlQ2FzZT4oXCJRdWVyeVRlbXBsYXRlVXNlQ2FzZVwiKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRRdWVyeVRlbXBsYXRlUmVwb3NpdG9yeSgpOiBJUXVlcnlUZW1wbGF0ZVJlcG9zaXRvcnkge1xuICAgIHJldHVybiB0aGlzLnJlc29sdmU8SVF1ZXJ5VGVtcGxhdGVSZXBvc2l0b3J5PihcIklRdWVyeVRlbXBsYXRlUmVwb3NpdG9yeVwiKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRRdWVyeUVuZ2luZVNlcnZpY2UoKTogUXVlcnlFbmdpbmVTZXJ2aWNlIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlPFF1ZXJ5RW5naW5lU2VydmljZT4oXCJRdWVyeUVuZ2luZVNlcnZpY2VcIik7XG4gIH1cblxuICBwdWJsaWMgZ2V0UXVlcnlFbmdpbmVGYWN0b3J5KCk6IFF1ZXJ5RW5naW5lRmFjdG9yeSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxRdWVyeUVuZ2luZUZhY3Rvcnk+KFwiUXVlcnlFbmdpbmVGYWN0b3J5XCIpO1xuICB9XG5cbiAgcHVibGljIGdldFJERlNlcnZpY2UoKTogUkRGU2VydmljZSB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxSREZTZXJ2aWNlPihcIlJERlNlcnZpY2VcIik7XG4gIH1cblxuICAvLyBNb2JpbGUgQ29tcG9uZW50cyBHZXR0ZXJzXG4gIHB1YmxpYyBnZXRNb2JpbGVQZXJmb3JtYW5jZU9wdGltaXplcigpOiBNb2JpbGVQZXJmb3JtYW5jZU9wdGltaXplciB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxNb2JpbGVQZXJmb3JtYW5jZU9wdGltaXplcj4oXG4gICAgICBcIk1vYmlsZVBlcmZvcm1hbmNlT3B0aW1pemVyXCIsXG4gICAgKTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRPZmZsaW5lRGF0YU1hbmFnZXIoKTogT2ZmbGluZURhdGFNYW5hZ2VyIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlPE9mZmxpbmVEYXRhTWFuYWdlcj4oXCJPZmZsaW5lRGF0YU1hbmFnZXJcIik7XG4gIH1cblxuICBwdWJsaWMgZ2V0TW9iaWxlVUlDb21wb25lbnRzKCk6IE1vYmlsZVVJQ29tcG9uZW50cyB7XG4gICAgcmV0dXJuIHRoaXMucmVzb2x2ZTxNb2JpbGVVSUNvbXBvbmVudHM+KFwiTW9iaWxlVUlDb21wb25lbnRzXCIpO1xuICB9XG5cbiAgcHVibGljIGdldFRvdWNoR3JhcGhDb250cm9sbGVyQ2xhc3MoKTogdHlwZW9mIFRvdWNoR3JhcGhDb250cm9sbGVyIHtcbiAgICByZXR1cm4gdGhpcy5yZXNvbHZlPHR5cGVvZiBUb3VjaEdyYXBoQ29udHJvbGxlcj4oXG4gICAgICBcIlRvdWNoR3JhcGhDb250cm9sbGVyQ2xhc3NcIixcbiAgICApO1xuICB9XG5cbiAgcHVibGljIGdldE1vYmlsZU1vZGFsQWRhcHRlckNsYXNzKCk6IHR5cGVvZiBNb2JpbGVNb2RhbEFkYXB0ZXIge1xuICAgIHJldHVybiB0aGlzLnJlc29sdmU8dHlwZW9mIE1vYmlsZU1vZGFsQWRhcHRlcj4oXCJNb2JpbGVNb2RhbEFkYXB0ZXJDbGFzc1wiKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhbiB1cCByZXNvdXJjZXNcbiAgICovXG4gIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xuICAgIC8vIENsZWFuIHVwIGFueSByZXNvdXJjZXMgaWYgbmVlZGVkXG4gICAgdGhpcy5jb250YWluZXIuY2xlYXIoKTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9