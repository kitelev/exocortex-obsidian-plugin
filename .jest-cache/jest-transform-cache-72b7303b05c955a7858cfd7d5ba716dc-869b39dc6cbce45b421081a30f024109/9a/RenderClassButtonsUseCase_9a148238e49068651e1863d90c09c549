274c7b1bd8958d25116891c9cb22d5e4
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.RenderClassButtonsUseCase = void 0;
const Result_1 = require("../../domain/core/Result");
const ClassName_1 = require("../../domain/value-objects/ClassName");
class RenderClassButtonsUseCase {
    constructor(classViewRepository, buttonRepository) {
        this.classViewRepository = classViewRepository;
        this.buttonRepository = buttonRepository;
    }
    async execute(request) {
        // Validate request
        if (!request.className) {
            return Result_1.Result.fail("Class name is required");
        }
        // Create ClassName value object
        const classNameResult = ClassName_1.ClassName.create(request.className);
        if (classNameResult.isFailure) {
            return Result_1.Result.fail(classNameResult.error);
        }
        const className = classNameResult.getValue();
        // Find ClassView configuration
        const classViewResult = await this.classViewRepository.findByClassName(className);
        if (classViewResult.isFailure) {
            return Result_1.Result.fail(`Failed to load class view: ${classViewResult.error}`);
        }
        const classView = classViewResult.getValue();
        // If no ClassView configured, return empty buttons
        if (!classView) {
            return Result_1.Result.ok({
                buttons: [],
                displayOptions: {
                    position: "top",
                    showButtons: false,
                },
            });
        }
        // Check if buttons should be shown
        if (!classView.displayOptions.showButtons) {
            return Result_1.Result.ok({
                buttons: [],
                displayOptions: {
                    position: classView.displayOptions.buttonPosition,
                    showButtons: false,
                },
            });
        }
        // Get enabled buttons
        const enabledButtons = classView.getEnabledButtons();
        // Load commands for each button
        const buttonRenderData = [];
        for (const button of enabledButtons) {
            const commandResult = await this.buttonRepository.findCommandById(button.commandId);
            if (commandResult.isFailure) {
                console.warn(`Failed to load command for button ${button.id}: ${commandResult.error}`);
                continue;
            }
            const command = commandResult.getValue();
            if (!command) {
                console.warn(`Command not found for button ${button.id}`);
                continue;
            }
            // Check if command can be executed in current context
            const canExecute = command.canExecute({
                currentClass: request.className,
                hasSelection: request.context?.hasSelection || false,
            });
            // Only include button if it can be executed
            if (canExecute) {
                buttonRenderData.push({
                    buttonId: button.id.toString(),
                    label: button.label,
                    tooltip: button.tooltip,
                    isEnabled: button.isEnabled,
                    order: button.order,
                    command: {
                        id: command.id.toString(),
                        type: command.type,
                        requiresInput: command.requiresInput,
                        parameters: command.parameters,
                    },
                });
            }
        }
        // Sort buttons by order
        buttonRenderData.sort((a, b) => a.order - b.order);
        return Result_1.Result.ok({
            buttons: buttonRenderData,
            displayOptions: {
                position: classView.displayOptions.buttonPosition,
                showButtons: true,
            },
        });
    }
}
exports.RenderClassButtonsUseCase = RenderClassButtonsUseCase;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vc3JjL2FwcGxpY2F0aW9uL3VzZS1jYXNlcy9SZW5kZXJDbGFzc0J1dHRvbnNVc2VDYXNlLnRzIiwibWFwcGluZ3MiOiI7OztBQUNBLHFEQUFrRDtBQUdsRCxvRUFBaUU7QUF1Q2pFLE1BQWEseUJBQXlCO0lBR3BDLFlBQ1UsbUJBQXlDLEVBQ3pDLGdCQUFtQztRQURuQyx3QkFBbUIsR0FBbkIsbUJBQW1CLENBQXNCO1FBQ3pDLHFCQUFnQixHQUFoQixnQkFBZ0IsQ0FBbUI7SUFDMUMsQ0FBQztJQUVKLEtBQUssQ0FBQyxPQUFPLENBQ1gsT0FBa0M7UUFFbEMsbUJBQW1CO1FBQ25CLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFO1lBQ3RCLE9BQU8sZUFBTSxDQUFDLElBQUksQ0FBNkIsd0JBQXdCLENBQUMsQ0FBQztTQUMxRTtRQUVELGdDQUFnQztRQUNoQyxNQUFNLGVBQWUsR0FBRyxxQkFBUyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDNUQsSUFBSSxlQUFlLENBQUMsU0FBUyxFQUFFO1lBQzdCLE9BQU8sZUFBTSxDQUFDLElBQUksQ0FBNkIsZUFBZSxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQ3ZFO1FBQ0QsTUFBTSxTQUFTLEdBQUcsZUFBZSxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBRTdDLCtCQUErQjtRQUMvQixNQUFNLGVBQWUsR0FDbkIsTUFBTSxJQUFJLENBQUMsbUJBQW1CLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzVELElBQUksZUFBZSxDQUFDLFNBQVMsRUFBRTtZQUM3QixPQUFPLGVBQU0sQ0FBQyxJQUFJLENBQ2hCLDhCQUE4QixlQUFlLENBQUMsS0FBSyxFQUFFLENBQ3RELENBQUM7U0FDSDtRQUVELE1BQU0sU0FBUyxHQUFHLGVBQWUsQ0FBQyxRQUFRLEVBQUUsQ0FBQztRQUU3QyxtREFBbUQ7UUFDbkQsSUFBSSxDQUFDLFNBQVMsRUFBRTtZQUNkLE9BQU8sZUFBTSxDQUFDLEVBQUUsQ0FBNkI7Z0JBQzNDLE9BQU8sRUFBRSxFQUFFO2dCQUNYLGNBQWMsRUFBRTtvQkFDZCxRQUFRLEVBQUUsS0FBSztvQkFDZixXQUFXLEVBQUUsS0FBSztpQkFDbkI7YUFDRixDQUFDLENBQUM7U0FDSjtRQUVELG1DQUFtQztRQUNuQyxJQUFJLENBQUMsU0FBUyxDQUFDLGNBQWMsQ0FBQyxXQUFXLEVBQUU7WUFDekMsT0FBTyxlQUFNLENBQUMsRUFBRSxDQUE2QjtnQkFDM0MsT0FBTyxFQUFFLEVBQUU7Z0JBQ1gsY0FBYyxFQUFFO29CQUNkLFFBQVEsRUFBRSxTQUFTLENBQUMsY0FBYyxDQUFDLGNBQWM7b0JBQ2pELFdBQVcsRUFBRSxLQUFLO2lCQUNuQjthQUNGLENBQUMsQ0FBQztTQUNKO1FBRUQsc0JBQXNCO1FBQ3RCLE1BQU0sY0FBYyxHQUFHLFNBQVMsQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1FBRXJELGdDQUFnQztRQUNoQyxNQUFNLGdCQUFnQixHQUF1QixFQUFFLENBQUM7UUFFaEQsS0FBSyxNQUFNLE1BQU0sSUFBSSxjQUFjLEVBQUU7WUFDbkMsTUFBTSxhQUFhLEdBQUcsTUFBTSxJQUFJLENBQUMsZ0JBQWdCLENBQUMsZUFBZSxDQUMvRCxNQUFNLENBQUMsU0FBUyxDQUNqQixDQUFDO1lBRUYsSUFBSSxhQUFhLENBQUMsU0FBUyxFQUFFO2dCQUMzQixPQUFPLENBQUMsSUFBSSxDQUNWLHFDQUFxQyxNQUFNLENBQUMsRUFBRSxLQUFLLGFBQWEsQ0FBQyxLQUFLLEVBQUUsQ0FDekUsQ0FBQztnQkFDRixTQUFTO2FBQ1Y7WUFFRCxNQUFNLE9BQU8sR0FBRyxhQUFhLENBQUMsUUFBUSxFQUFFLENBQUM7WUFDekMsSUFBSSxDQUFDLE9BQU8sRUFBRTtnQkFDWixPQUFPLENBQUMsSUFBSSxDQUFDLGdDQUFnQyxNQUFNLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztnQkFDMUQsU0FBUzthQUNWO1lBRUQsc0RBQXNEO1lBQ3RELE1BQU0sVUFBVSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUM7Z0JBQ3BDLFlBQVksRUFBRSxPQUFPLENBQUMsU0FBUztnQkFDL0IsWUFBWSxFQUFFLE9BQU8sQ0FBQyxPQUFPLEVBQUUsWUFBWSxJQUFJLEtBQUs7YUFDckQsQ0FBQyxDQUFDO1lBRUgsNENBQTRDO1lBQzVDLElBQUksVUFBVSxFQUFFO2dCQUNkLGdCQUFnQixDQUFDLElBQUksQ0FBQztvQkFDcEIsUUFBUSxFQUFFLE1BQU0sQ0FBQyxFQUFFLENBQUMsUUFBUSxFQUFFO29CQUM5QixLQUFLLEVBQUUsTUFBTSxDQUFDLEtBQUs7b0JBQ25CLE9BQU8sRUFBRSxNQUFNLENBQUMsT0FBTztvQkFDdkIsU0FBUyxFQUFFLE1BQU0sQ0FBQyxTQUFTO29CQUMzQixLQUFLLEVBQUUsTUFBTSxDQUFDLEtBQUs7b0JBQ25CLE9BQU8sRUFBRTt3QkFDUCxFQUFFLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQyxRQUFRLEVBQUU7d0JBQ3pCLElBQUksRUFBRSxPQUFPLENBQUMsSUFBSTt3QkFDbEIsYUFBYSxFQUFFLE9BQU8sQ0FBQyxhQUFhO3dCQUNwQyxVQUFVLEVBQUUsT0FBTyxDQUFDLFVBQVU7cUJBQy9CO2lCQUNGLENBQUMsQ0FBQzthQUNKO1NBQ0Y7UUFFRCx3QkFBd0I7UUFDeEIsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUM7UUFFbkQsT0FBTyxlQUFNLENBQUMsRUFBRSxDQUE2QjtZQUMzQyxPQUFPLEVBQUUsZ0JBQWdCO1lBQ3pCLGNBQWMsRUFBRTtnQkFDZCxRQUFRLEVBQUUsU0FBUyxDQUFDLGNBQWMsQ0FBQyxjQUFjO2dCQUNqRCxXQUFXLEVBQUUsSUFBSTthQUNsQjtTQUNGLENBQUMsQ0FBQztJQUNMLENBQUM7Q0FDRjtBQW5IRCw4REFtSEMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vc3JjL2FwcGxpY2F0aW9uL3VzZS1jYXNlcy9SZW5kZXJDbGFzc0J1dHRvbnNVc2VDYXNlLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFVzZUNhc2UgfSBmcm9tIFwiLi4vY29yZS9Vc2VDYXNlXCI7XG5pbXBvcnQgeyBSZXN1bHQgfSBmcm9tIFwiLi4vLi4vZG9tYWluL2NvcmUvUmVzdWx0XCI7XG5pbXBvcnQgeyBJQ2xhc3NWaWV3UmVwb3NpdG9yeSB9IGZyb20gXCIuLi8uLi9kb21haW4vcmVwb3NpdG9yaWVzL0lDbGFzc1ZpZXdSZXBvc2l0b3J5XCI7XG5pbXBvcnQgeyBJQnV0dG9uUmVwb3NpdG9yeSB9IGZyb20gXCIuLi8uLi9kb21haW4vcmVwb3NpdG9yaWVzL0lCdXR0b25SZXBvc2l0b3J5XCI7XG5pbXBvcnQgeyBDbGFzc05hbWUgfSBmcm9tIFwiLi4vLi4vZG9tYWluL3ZhbHVlLW9iamVjdHMvQ2xhc3NOYW1lXCI7XG5pbXBvcnQgeyBVSUJ1dHRvbiB9IGZyb20gXCIuLi8uLi9kb21haW4vZW50aXRpZXMvVUlCdXR0b25cIjtcbmltcG9ydCB7IEJ1dHRvbkNvbW1hbmQgfSBmcm9tIFwiLi4vLi4vZG9tYWluL2VudGl0aWVzL0J1dHRvbkNvbW1hbmRcIjtcblxuLyoqXG4gKiBVc2UgQ2FzZSBmb3IgcmVuZGVyaW5nIGJ1dHRvbnMgaW4gYW4gYXNzZXQgdmlld1xuICogRm9sbG93aW5nIENsZWFuIEFyY2hpdGVjdHVyZSAtIG9yY2hlc3RyYXRlcyBkb21haW4gbG9naWNcbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZW5kZXJDbGFzc0J1dHRvbnNSZXF1ZXN0IHtcbiAgY2xhc3NOYW1lOiBzdHJpbmc7XG4gIGFzc2V0SWQ/OiBzdHJpbmc7XG4gIGNvbnRleHQ/OiB7XG4gICAgaGFzU2VsZWN0aW9uOiBib29sZWFuO1xuICAgIGN1cnJlbnRVc2VyPzogc3RyaW5nO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJ1dHRvblJlbmRlckRhdGEge1xuICBidXR0b25JZDogc3RyaW5nO1xuICBsYWJlbDogc3RyaW5nO1xuICB0b29sdGlwPzogc3RyaW5nO1xuICBpc0VuYWJsZWQ6IGJvb2xlYW47XG4gIG9yZGVyOiBudW1iZXI7XG4gIGNvbW1hbmQ6IHtcbiAgICBpZDogc3RyaW5nO1xuICAgIHR5cGU6IHN0cmluZztcbiAgICByZXF1aXJlc0lucHV0OiBib29sZWFuO1xuICAgIHBhcmFtZXRlcnM6IGFueVtdO1xuICB9O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJlbmRlckNsYXNzQnV0dG9uc1Jlc3BvbnNlIHtcbiAgYnV0dG9uczogQnV0dG9uUmVuZGVyRGF0YVtdO1xuICBkaXNwbGF5T3B0aW9uczoge1xuICAgIHBvc2l0aW9uOiBcInRvcFwiIHwgXCJib3R0b21cIiB8IFwiZmxvYXRpbmdcIjtcbiAgICBzaG93QnV0dG9uczogYm9vbGVhbjtcbiAgfTtcbn1cblxuZXhwb3J0IGNsYXNzIFJlbmRlckNsYXNzQnV0dG9uc1VzZUNhc2VcbiAgaW1wbGVtZW50cyBVc2VDYXNlPFJlbmRlckNsYXNzQnV0dG9uc1JlcXVlc3QsIFJlbmRlckNsYXNzQnV0dG9uc1Jlc3BvbnNlPlxue1xuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGNsYXNzVmlld1JlcG9zaXRvcnk6IElDbGFzc1ZpZXdSZXBvc2l0b3J5LFxuICAgIHByaXZhdGUgYnV0dG9uUmVwb3NpdG9yeTogSUJ1dHRvblJlcG9zaXRvcnksXG4gICkge31cblxuICBhc3luYyBleGVjdXRlKFxuICAgIHJlcXVlc3Q6IFJlbmRlckNsYXNzQnV0dG9uc1JlcXVlc3QsXG4gICk6IFByb21pc2U8UmVzdWx0PFJlbmRlckNsYXNzQnV0dG9uc1Jlc3BvbnNlPj4ge1xuICAgIC8vIFZhbGlkYXRlIHJlcXVlc3RcbiAgICBpZiAoIXJlcXVlc3QuY2xhc3NOYW1lKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmZhaWw8UmVuZGVyQ2xhc3NCdXR0b25zUmVzcG9uc2U+KFwiQ2xhc3MgbmFtZSBpcyByZXF1aXJlZFwiKTtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgQ2xhc3NOYW1lIHZhbHVlIG9iamVjdFxuICAgIGNvbnN0IGNsYXNzTmFtZVJlc3VsdCA9IENsYXNzTmFtZS5jcmVhdGUocmVxdWVzdC5jbGFzc05hbWUpO1xuICAgIGlmIChjbGFzc05hbWVSZXN1bHQuaXNGYWlsdXJlKSB7XG4gICAgICByZXR1cm4gUmVzdWx0LmZhaWw8UmVuZGVyQ2xhc3NCdXR0b25zUmVzcG9uc2U+KGNsYXNzTmFtZVJlc3VsdC5lcnJvcik7XG4gICAgfVxuICAgIGNvbnN0IGNsYXNzTmFtZSA9IGNsYXNzTmFtZVJlc3VsdC5nZXRWYWx1ZSgpO1xuXG4gICAgLy8gRmluZCBDbGFzc1ZpZXcgY29uZmlndXJhdGlvblxuICAgIGNvbnN0IGNsYXNzVmlld1Jlc3VsdCA9XG4gICAgICBhd2FpdCB0aGlzLmNsYXNzVmlld1JlcG9zaXRvcnkuZmluZEJ5Q2xhc3NOYW1lKGNsYXNzTmFtZSk7XG4gICAgaWYgKGNsYXNzVmlld1Jlc3VsdC5pc0ZhaWx1cmUpIHtcbiAgICAgIHJldHVybiBSZXN1bHQuZmFpbDxSZW5kZXJDbGFzc0J1dHRvbnNSZXNwb25zZT4oXG4gICAgICAgIGBGYWlsZWQgdG8gbG9hZCBjbGFzcyB2aWV3OiAke2NsYXNzVmlld1Jlc3VsdC5lcnJvcn1gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCBjbGFzc1ZpZXcgPSBjbGFzc1ZpZXdSZXN1bHQuZ2V0VmFsdWUoKTtcblxuICAgIC8vIElmIG5vIENsYXNzVmlldyBjb25maWd1cmVkLCByZXR1cm4gZW1wdHkgYnV0dG9uc1xuICAgIGlmICghY2xhc3NWaWV3KSB7XG4gICAgICByZXR1cm4gUmVzdWx0Lm9rPFJlbmRlckNsYXNzQnV0dG9uc1Jlc3BvbnNlPih7XG4gICAgICAgIGJ1dHRvbnM6IFtdLFxuICAgICAgICBkaXNwbGF5T3B0aW9uczoge1xuICAgICAgICAgIHBvc2l0aW9uOiBcInRvcFwiLFxuICAgICAgICAgIHNob3dCdXR0b25zOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGJ1dHRvbnMgc2hvdWxkIGJlIHNob3duXG4gICAgaWYgKCFjbGFzc1ZpZXcuZGlzcGxheU9wdGlvbnMuc2hvd0J1dHRvbnMpIHtcbiAgICAgIHJldHVybiBSZXN1bHQub2s8UmVuZGVyQ2xhc3NCdXR0b25zUmVzcG9uc2U+KHtcbiAgICAgICAgYnV0dG9uczogW10sXG4gICAgICAgIGRpc3BsYXlPcHRpb25zOiB7XG4gICAgICAgICAgcG9zaXRpb246IGNsYXNzVmlldy5kaXNwbGF5T3B0aW9ucy5idXR0b25Qb3NpdGlvbixcbiAgICAgICAgICBzaG93QnV0dG9uczogZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBHZXQgZW5hYmxlZCBidXR0b25zXG4gICAgY29uc3QgZW5hYmxlZEJ1dHRvbnMgPSBjbGFzc1ZpZXcuZ2V0RW5hYmxlZEJ1dHRvbnMoKTtcblxuICAgIC8vIExvYWQgY29tbWFuZHMgZm9yIGVhY2ggYnV0dG9uXG4gICAgY29uc3QgYnV0dG9uUmVuZGVyRGF0YTogQnV0dG9uUmVuZGVyRGF0YVtdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGJ1dHRvbiBvZiBlbmFibGVkQnV0dG9ucykge1xuICAgICAgY29uc3QgY29tbWFuZFJlc3VsdCA9IGF3YWl0IHRoaXMuYnV0dG9uUmVwb3NpdG9yeS5maW5kQ29tbWFuZEJ5SWQoXG4gICAgICAgIGJ1dHRvbi5jb21tYW5kSWQsXG4gICAgICApO1xuXG4gICAgICBpZiAoY29tbWFuZFJlc3VsdC5pc0ZhaWx1cmUpIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIGBGYWlsZWQgdG8gbG9hZCBjb21tYW5kIGZvciBidXR0b24gJHtidXR0b24uaWR9OiAke2NvbW1hbmRSZXN1bHQuZXJyb3J9YCxcbiAgICAgICAgKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGNvbW1hbmQgPSBjb21tYW5kUmVzdWx0LmdldFZhbHVlKCk7XG4gICAgICBpZiAoIWNvbW1hbmQpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGBDb21tYW5kIG5vdCBmb3VuZCBmb3IgYnV0dG9uICR7YnV0dG9uLmlkfWApO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2hlY2sgaWYgY29tbWFuZCBjYW4gYmUgZXhlY3V0ZWQgaW4gY3VycmVudCBjb250ZXh0XG4gICAgICBjb25zdCBjYW5FeGVjdXRlID0gY29tbWFuZC5jYW5FeGVjdXRlKHtcbiAgICAgICAgY3VycmVudENsYXNzOiByZXF1ZXN0LmNsYXNzTmFtZSxcbiAgICAgICAgaGFzU2VsZWN0aW9uOiByZXF1ZXN0LmNvbnRleHQ/Lmhhc1NlbGVjdGlvbiB8fCBmYWxzZSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPbmx5IGluY2x1ZGUgYnV0dG9uIGlmIGl0IGNhbiBiZSBleGVjdXRlZFxuICAgICAgaWYgKGNhbkV4ZWN1dGUpIHtcbiAgICAgICAgYnV0dG9uUmVuZGVyRGF0YS5wdXNoKHtcbiAgICAgICAgICBidXR0b25JZDogYnV0dG9uLmlkLnRvU3RyaW5nKCksXG4gICAgICAgICAgbGFiZWw6IGJ1dHRvbi5sYWJlbCxcbiAgICAgICAgICB0b29sdGlwOiBidXR0b24udG9vbHRpcCxcbiAgICAgICAgICBpc0VuYWJsZWQ6IGJ1dHRvbi5pc0VuYWJsZWQsXG4gICAgICAgICAgb3JkZXI6IGJ1dHRvbi5vcmRlcixcbiAgICAgICAgICBjb21tYW5kOiB7XG4gICAgICAgICAgICBpZDogY29tbWFuZC5pZC50b1N0cmluZygpLFxuICAgICAgICAgICAgdHlwZTogY29tbWFuZC50eXBlLFxuICAgICAgICAgICAgcmVxdWlyZXNJbnB1dDogY29tbWFuZC5yZXF1aXJlc0lucHV0LFxuICAgICAgICAgICAgcGFyYW1ldGVyczogY29tbWFuZC5wYXJhbWV0ZXJzLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNvcnQgYnV0dG9ucyBieSBvcmRlclxuICAgIGJ1dHRvblJlbmRlckRhdGEuc29ydCgoYSwgYikgPT4gYS5vcmRlciAtIGIub3JkZXIpO1xuXG4gICAgcmV0dXJuIFJlc3VsdC5vazxSZW5kZXJDbGFzc0J1dHRvbnNSZXNwb25zZT4oe1xuICAgICAgYnV0dG9uczogYnV0dG9uUmVuZGVyRGF0YSxcbiAgICAgIGRpc3BsYXlPcHRpb25zOiB7XG4gICAgICAgIHBvc2l0aW9uOiBjbGFzc1ZpZXcuZGlzcGxheU9wdGlvbnMuYnV0dG9uUG9zaXRpb24sXG4gICAgICAgIHNob3dCdXR0b25zOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxufVxuIl0sInZlcnNpb24iOjN9