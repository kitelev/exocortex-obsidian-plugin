1a43f57dbc5fd2abe3b3d5890894dc0c
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
// Mock all external dependencies
jest.mock('../../src/infrastructure/container/DIContainer', () => {
    const mockContainer = {
        getCreateAssetUseCase: jest.fn().mockReturnValue({
            execute: jest.fn().mockResolvedValue({
                success: true,
                message: 'Asset created'
            })
        }),
        getPropertyEditingUseCase: jest.fn().mockReturnValue({
            execute: jest.fn().mockResolvedValue({
                success: true,
                message: 'Property edited'
            })
        }),
        resolve: jest.fn().mockImplementation(() => ({})),
        dispose: jest.fn()
    };
    return {
        DIContainer: {
            initialize: jest.fn((app, plugin) => mockContainer),
            getInstance: jest.fn(() => mockContainer)
        }
    };
});
jest.mock('../../src/domain/semantic/core/Graph', () => ({
    Graph: jest.fn().mockImplementation(() => mockGraphMethods)
}));
// Mock SPARQLProcessor
jest.mock('../../src/presentation/processors/SPARQLProcessor', () => ({
    SPARQLProcessor: jest.fn().mockImplementation(() => ({
        processCodeBlock: jest.fn().mockResolvedValue(undefined),
        getCacheStatistics: jest.fn().mockReturnValue({
            hits: 10,
            misses: 5,
            hitRate: 66.7,
            size: 8,
            maxSize: 500,
            totalQueries: 15,
            evictions: 0
        }),
        invalidateCache: jest.fn(),
        destroy: jest.fn()
    }))
}));
// Mock GraphVisualizationProcessor
jest.mock('../../src/presentation/processors/GraphVisualizationProcessor', () => ({
    GraphVisualizationProcessor: jest.fn().mockImplementation(() => ({
        processCodeBlock: jest.fn().mockResolvedValue(undefined)
    }))
}));
// Mock RDFService
jest.mock('../../src/application/services/RDFService', () => ({
    RDFService: jest.fn().mockImplementation(() => ({
        getNamespaceManager: jest.fn().mockReturnValue({
            getPrefix: jest.fn().mockReturnValue('exo'),
            expand: jest.fn().mockReturnValue('http://example.org/exo#')
        })
    }))
}));
// Mock all modals
jest.mock('../../src/presentation/modals/CreateAssetModal', () => ({
    CreateAssetModal: jest.fn().mockImplementation(() => ({
        open: jest.fn()
    }))
}));
jest.mock('../../src/presentation/modals/ExportRDFModal', () => ({
    ExportRDFModal: jest.fn().mockImplementation(() => ({
        open: jest.fn()
    }))
}));
jest.mock('../../src/presentation/modals/ImportRDFModal', () => ({
    ImportRDFModal: jest.fn().mockImplementation(() => ({
        open: jest.fn()
    }))
}));
jest.mock('../../src/presentation/modals/QuickTaskModal', () => ({
    QuickTaskModal: jest.fn().mockImplementation(() => ({
        open: jest.fn()
    }))
}));
// Mock repositories and use cases
jest.mock('../../src/infrastructure/repositories/ObsidianTaskRepository');
jest.mock('../../src/infrastructure/repositories/ObsidianAssetRepository');
jest.mock('../../src/application/use-cases/CreateTaskFromProjectUseCase');
jest.mock('../../src/application/use-cases/GetCurrentProjectUseCase');
jest.mock('../../src/domain/semantic/core/IndexedGraph');
jest.mock('../../src/application/services/ExoFocusService');
const obsidian_1 = require("obsidian");
const main_1 = tslib_1.__importDefault(require("../../src/main"));
// Mock Graph
const mockGraphMethods = {
    add: jest.fn(),
    remove: jest.fn(),
    clear: jest.fn(),
    match: jest.fn().mockReturnValue([]),
    merge: jest.fn(),
    size: jest.fn().mockReturnValue(0)
};
describe('ExocortexPlugin - Comprehensive Tests', () => {
    let app;
    let plugin;
    let mockNotice;
    beforeEach(() => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
        // Setup comprehensive app mock
        app = {
            vault: {
                getMarkdownFiles: jest.fn().mockReturnValue([
                    { basename: 'test-file', path: 'test-file.md', name: 'test-file.md', extension: 'md' },
                    { basename: 'project', path: 'project.md', name: 'project.md', extension: 'md' }
                ]),
                read: jest.fn().mockResolvedValue(`---
exo__Asset_uid: test-uid
exo__Asset_label: Test Asset
exo__Instance_class: "[[exo__Class]]"
tags: [project, active]
---

# Test File
This is test content with [[links]] and metadata.`),
                on: jest.fn().mockReturnValue({ event: 'mock', callback: jest.fn() }),
                create: jest.fn().mockResolvedValue(new obsidian_1.TFile('new-file.md')),
                modify: jest.fn().mockResolvedValue(undefined),
                delete: jest.fn().mockResolvedValue(undefined)
            },
            workspace: {
                openLinkText: jest.fn(),
                getActiveFile: jest.fn().mockReturnValue({
                    path: 'current-file.md',
                    basename: 'current-file',
                    name: 'current-file.md'
                }),
                on: jest.fn()
            },
            metadataCache: {
                getFileCache: jest.fn().mockReturnValue({
                    frontmatter: {
                        'exo__Asset_uid': 'test-uid',
                        'exo__Asset_label': 'Test Asset'
                    },
                    sections: [],
                    headings: [],
                    links: []
                }),
                on: jest.fn()
            }
        };
        // Mock Notice to avoid console noise
        mockNotice = jest.spyOn(require('obsidian'), 'Notice').mockImplementation(() => ({}));
        plugin = new main_1.default(app, {
            id: 'exocortex',
            name: 'Exocortex',
            version: '2.11.0',
            minAppVersion: '1.0.0',
            description: 'Knowledge management with semantic web technologies',
            author: 'M.K. Khromov',
            authorUrl: 'https://github.com/kitelev',
            isDesktopOnly: false
        });
        // Mock plugin methods for testing
        jest.spyOn(plugin, 'addCommand').mockImplementation(() => { });
        jest.spyOn(plugin, 'addRibbonIcon').mockImplementation(() => document.createElement('div'));
        jest.spyOn(plugin, 'registerEvent').mockImplementation(() => { });
        jest.spyOn(plugin, 'registerMarkdownCodeBlockProcessor').mockImplementation(() => { });
    }));
    afterEach(() => {
        if (mockNotice) {
            mockNotice.mockRestore();
        }
        jest.clearAllMocks();
    });
    describe('Plugin Lifecycle', () => {
        test('should initialize all core components during load', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            // Verify core components are initialized
            expect(plugin['graph']).toBeDefined();
            expect(plugin['sparqlProcessor']).toBeDefined();
            expect(plugin['graphVisualizationProcessor']).toBeDefined();
            expect(plugin['container']).toBeDefined();
            expect(plugin['rdfService']).toBeDefined();
        }));
        test('should register all markdown processors', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const registerSpy = jest.spyOn(plugin, 'registerMarkdownCodeBlockProcessor');
            yield plugin.onload();
            expect(registerSpy).toHaveBeenCalledWith('sparql', expect.any(Function));
            expect(registerSpy).toHaveBeenCalledWith('graph', expect.any(Function));
        }));
        test('should register all commands during load', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const commandSpy = jest.spyOn(plugin, 'addCommand');
            yield plugin.onload();
            // Verify all commands are registered
            expect(commandSpy).toHaveBeenCalledWith(expect.objectContaining({
                id: 'create-exo-asset',
                name: 'Create new ExoAsset'
            }));
            expect(commandSpy).toHaveBeenCalledWith(expect.objectContaining({
                id: 'view-sparql-cache-stats'
            }));
            expect(commandSpy).toHaveBeenCalledWith(expect.objectContaining({
                id: 'clear-sparql-cache'
            }));
            expect(commandSpy).toHaveBeenCalledWith(expect.objectContaining({
                id: 'export-knowledge-graph'
            }));
            expect(commandSpy).toHaveBeenCalledWith(expect.objectContaining({
                id: 'import-rdf-data'
            }));
            expect(commandSpy).toHaveBeenCalledWith(expect.objectContaining({
                id: 'quick-create-task'
            }));
            expect(commandSpy).toHaveBeenCalledTimes(6);
        }));
        test('should register ribbon icon', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const ribbonSpy = jest.spyOn(plugin, 'addRibbonIcon');
            yield plugin.onload();
            expect(ribbonSpy).toHaveBeenCalledWith('plus-circle', 'Create ExoAsset', expect.any(Function));
        }));
        test('should register vault event handlers', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            expect(app.vault.on).toHaveBeenCalledWith('modify', expect.any(Function));
            expect(app.vault.on).toHaveBeenCalledWith('create', expect.any(Function));
            expect(app.vault.on).toHaveBeenCalledWith('delete', expect.any(Function));
        }));
        test('should load vault data into graph', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            expect(app.vault.getMarkdownFiles).toHaveBeenCalled();
            expect(app.vault.read).toHaveBeenCalled();
        }));
        test('should handle load errors gracefully', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            app.vault.getMarkdownFiles = jest.fn().mockImplementation(() => {
                throw new Error('Vault access failed');
            });
            // Should not throw during plugin load - error should be caught and handled
            yield expect(plugin.onload()).resolves.not.toThrow();
            // Verify components are still initialized despite vault error
            expect(plugin['graph']).toBeDefined();
            expect(plugin['container']).toBeDefined();
            expect(plugin['rdfService']).toBeDefined();
        }));
        test('should cleanup resources during unload', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const mockSparqlProcessor = plugin['sparqlProcessor'];
            const mockGraph = plugin['graph'];
            yield plugin.onunload();
            // Verify cleanup was called
            expect(mockGraph.clear).toHaveBeenCalled();
            expect(mockSparqlProcessor.destroy).toHaveBeenCalled();
        }));
        test('should handle unload when components are not initialized', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Don't call onload, test unload with uninitialized state
            yield expect(plugin.onunload()).resolves.not.toThrow();
        }));
    });
    describe('SPARQL Cache Management', () => {
        beforeEach(() => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
        }));
        test('should initialize SPARQL processor with cache configuration', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const processor = plugin['sparqlProcessor'];
            expect(processor).toBeDefined();
            // Verify cache statistics are available
            const stats = processor.getCacheStatistics();
            expect(stats).toEqual(expect.objectContaining({
                hits: expect.any(Number),
                misses: expect.any(Number),
                hitRate: expect.any(Number),
                size: expect.any(Number),
                maxSize: expect.any(Number),
                totalQueries: expect.any(Number),
                evictions: expect.any(Number)
            }));
        }));
        test('should provide cache statistics through command', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const commands = plugin['addCommand'].mock.calls;
            const cacheStatsCommand = commands.find(call => call[0].id === 'view-sparql-cache-stats');
            expect(cacheStatsCommand).toBeDefined();
            expect(cacheStatsCommand[0].callback).toBeInstanceOf(Function);
        }));
        test('should provide cache clearing functionality', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const commands = plugin['addCommand'].mock.calls;
            const clearCacheCommand = commands.find(call => call[0].id === 'clear-sparql-cache');
            expect(clearCacheCommand).toBeDefined();
            expect(clearCacheCommand[0].callback).toBeInstanceOf(Function);
            // Execute the clear cache command
            clearCacheCommand[0].callback();
            expect(plugin['sparqlProcessor'].invalidateCache).toHaveBeenCalled();
        }));
    });
    describe('File Management and Graph Updates', () => {
        beforeEach(() => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
        }));
        test('should extract triples from frontmatter', () => {
            const mockFile = new obsidian_1.TFile('test.md');
            const content = `---
title: Test Note
tags: [project, active]
author: John Doe
---

# Test Content`;
            const triples = plugin['extractTriplesFromFile'](mockFile, content);
            expect(triples).toHaveLength(5); // title, 2 tags, author, file_path, file_name
            expect(triples.some(t => t.getPredicate().toString() === 'title')).toBe(true);
            expect(triples.some(t => t.getPredicate().toString() === 'author')).toBe(true);
        });
        test('should parse complex frontmatter correctly', () => {
            const mockFile = new obsidian_1.TFile('complex.md');
            const content = `---
project:
  - Project A
  - Project B
status: active
nested:
  value: test
---

# Complex Note`;
            const triples = plugin['extractTriplesFromFile'](mockFile, content);
            // Should handle array values and nested objects
            expect(triples.length).toBeGreaterThan(2);
        });
        test('should handle file without frontmatter', () => {
            const mockFile = new obsidian_1.TFile('simple.md');
            const content = `# Simple Note

Just content, no frontmatter.`;
            const triples = plugin['extractTriplesFromFile'](mockFile, content);
            // Should still create basic file metadata triples
            expect(triples).toHaveLength(2); // file_path, file_name
        });
        test('should update graph when file is modified', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockFile = new obsidian_1.TFile('modified.md');
            const eventHandlers = app.vault.on.mock.calls;
            const modifyHandler = eventHandlers.find(call => call[0] === 'modify')[1];
            // Simulate file modification
            yield modifyHandler(mockFile);
            expect(app.vault.read).toHaveBeenCalledWith(mockFile);
            expect(plugin['sparqlProcessor'].invalidateCache).toHaveBeenCalled();
        }));
        test('should handle file creation events', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockFile = new obsidian_1.TFile('new.md');
            const eventHandlers = app.vault.on.mock.calls;
            const createHandler = eventHandlers.find(call => call[0] === 'create')[1];
            // Simulate file creation
            yield createHandler(mockFile);
            expect(app.vault.read).toHaveBeenCalledWith(mockFile);
            expect(plugin['sparqlProcessor'].invalidateCache).toHaveBeenCalled();
        }));
        test('should handle file deletion events', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockFile = new obsidian_1.TFile('deleted.md');
            const eventHandlers = app.vault.on.mock.calls;
            const deleteHandler = eventHandlers.find(call => call[0] === 'delete')[1];
            // Simulate file deletion
            yield deleteHandler(mockFile);
            expect(plugin['sparqlProcessor'].invalidateCache).toHaveBeenCalled();
        }));
    });
    describe('Command Integration', () => {
        beforeEach(() => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
        }));
        test('should execute create asset command', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const commands = plugin['addCommand'].mock.calls;
            const createCommand = commands.find(call => call[0].id === 'create-exo-asset');
            expect(createCommand).toBeDefined();
            expect(createCommand[0].hotkeys).toEqual([{ modifiers: ["Mod", "Shift"], key: "n" }]);
            // Execute command should open modal
            createCommand[0].callback();
            const { CreateAssetModal } = require('../../src/presentation/modals/CreateAssetModal');
            expect(CreateAssetModal).toHaveBeenCalledWith(app);
        }));
        test('should execute export graph command', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const commands = plugin['addCommand'].mock.calls;
            const exportCommand = commands.find(call => call[0].id === 'export-knowledge-graph');
            expect(exportCommand).toBeDefined();
            // Execute command should open modal
            exportCommand[0].callback();
            const { ExportRDFModal } = require('../../src/presentation/modals/ExportRDFModal');
            expect(ExportRDFModal).toHaveBeenCalledWith(app, plugin['graph'], expect.any(Object), expect.any(Function));
        }));
        test('should execute import RDF command', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const commands = plugin['addCommand'].mock.calls;
            const importCommand = commands.find(call => call[0].id === 'import-rdf-data');
            expect(importCommand).toBeDefined();
            // Execute command should open modal
            importCommand[0].callback();
            const { ImportRDFModal } = require('../../src/presentation/modals/ImportRDFModal');
            expect(ImportRDFModal).toHaveBeenCalledWith(app, plugin['graph'], expect.any(Object), expect.any(Function));
        }));
        test('should execute quick task creation command', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const commands = plugin['addCommand'].mock.calls;
            const taskCommand = commands.find(call => call[0].id === 'quick-create-task');
            expect(taskCommand).toBeDefined();
            expect(taskCommand[0].hotkeys).toEqual([{ modifiers: ["Mod", "Shift"], key: "t" }]);
            // Execute command should open task modal
            yield taskCommand[0].callback();
            const { QuickTaskModal } = require('../../src/presentation/modals/QuickTaskModal');
            expect(QuickTaskModal).toHaveBeenCalled();
        }));
    });
    describe('Error Handling', () => {
        test('should handle processor registration failures gracefully', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            plugin.registerMarkdownCodeBlockProcessor = jest.fn().mockImplementation(() => {
                throw new Error('Registration failed');
            });
            // Should not fail plugin loading
            yield expect(plugin.onload()).resolves.not.toThrow();
        }));
        test('should handle vault read failures during graph loading', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            app.vault.read = jest.fn().mockRejectedValue(new Error('Read failed'));
            // Should not fail plugin loading
            yield expect(plugin.onload()).resolves.not.toThrow();
        }));
        test('should handle quick task command errors', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const commands = plugin['addCommand'].mock.calls;
            const taskCommand = commands.find(call => call[0].id === 'quick-create-task');
            // Should handle error gracefully and show notice
            yield expect(taskCommand[0].callback()).resolves.not.toThrow();
        }));
    });
    describe('Integration Tests', () => {
        test('should have all components working together after load', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            // Verify all critical components are initialized and connected
            expect(plugin['graph']).toBeDefined();
            expect(plugin['sparqlProcessor']).toBeDefined();
            expect(plugin['graphVisualizationProcessor']).toBeDefined();
            expect(plugin['rdfService']).toBeDefined();
            expect(plugin['container']).toBeDefined();
            // Verify processors are connected to the graph
            const sparqlProcessor = plugin['sparqlProcessor'];
            expect(sparqlProcessor).toBeDefined();
        }));
        test('should maintain data consistency across file operations', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            yield plugin.onload();
            const mockFile = new obsidian_1.TFile('consistency-test.md');
            const processor = plugin['sparqlProcessor'];
            // Reset mocks to track calls from this test specifically
            jest.clearAllMocks();
            // Mock file content for update operation
            app.vault.read = jest.fn().mockResolvedValue(`---
title: Test File
tags: [project, test]
---

# Test Content

Some test content.`);
            // Mock graph.match to return existing triples that need to be removed
            const mockTriple = { subject: 'test', predicate: 'test', object: 'test' };
            mockGraphMethods.match.mockReturnValue([mockTriple]);
            // Simulate file update cycle - this should remove old triples and add new ones
            yield plugin['updateFileInGraph'](mockFile);
            // Verify old triples were removed by checking removeFileFromGraph was called
            expect(mockGraphMethods.match).toHaveBeenCalled();
            expect(mockGraphMethods.remove).toHaveBeenCalled();
            // Verify new triples were added (at least file metadata triples)
            expect(mockGraphMethods.add).toHaveBeenCalled();
            expect(app.vault.read).toHaveBeenCalledWith(mockFile);
            // Test file deletion maintains consistency
            jest.clearAllMocks();
            plugin['removeFileFromGraph'](mockFile);
            expect(mockGraphMethods.match).toHaveBeenCalled();
            expect(mockGraphMethods.remove).toHaveBeenCalled();
        }));
    });
    describe('Frontmatter Parsing', () => {
        test('should parse simple frontmatter', () => {
            const yaml = 'title: Test\nauthor: John\nstatus: active';
            const result = plugin['parseFrontmatter'](yaml);
            expect(result).toEqual({
                title: 'Test',
                author: 'John',
                status: 'active'
            });
        });
        test('should parse array frontmatter', () => {
            const yaml = 'tags:\n  - project\n  - active\nauthor: John';
            const result = plugin['parseFrontmatter'](yaml);
            expect(result).toEqual({
                tags: ['project', 'active'],
                author: 'John'
            });
        });
        test('should handle empty values', () => {
            const yaml = 'title:\nauthor: John\nempty: ""';
            const result = plugin['parseFrontmatter'](yaml);
            expect(result).toEqual({
                title: [],
                author: 'John',
                empty: ''
            });
        });
        test('should handle complex nested arrays', () => {
            const yaml = 'projects:\n  - Project A\n  - Project B\n  - Project C\nowner: Team';
            const result = plugin['parseFrontmatter'](yaml);
            expect(result).toEqual({
                projects: ['Project A', 'Project B', 'Project C'],
                owner: 'Team'
            });
        });
    });
    describe('Performance and Memory', () => {
        test('should not create memory leaks during repeated load/unload cycles', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Test multiple load/unload cycles
            for (let i = 0; i < 5; i++) {
                yield plugin.onload();
                yield plugin.onunload();
            }
            // Should complete without throwing
            expect(true).toBe(true);
        }));
        test('should handle large vault with many files', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Mock a large number of files
            const manyFiles = Array.from({ length: 1000 }, (_, i) => ({
                basename: `file-${i}`,
                path: `file-${i}.md`,
                name: `file-${i}.md`,
                extension: 'md'
            }));
            app.vault.getMarkdownFiles = jest.fn().mockReturnValue(manyFiles);
            // Should handle large vault without timing out
            yield expect(plugin.onload()).resolves.not.toThrow();
        }));
    });
});
// Additional test utilities for comprehensive testing
function createMockFile(path, content = '') {
    const file = new obsidian_1.TFile(path);
    return file;
}
function createMockFrontmatter(data) {
    const yaml = Object.entries(data)
        .map(([key, value]) => {
        if (Array.isArray(value)) {
            return `${key}:\n${value.map(v => `  - ${v}`).join('\n')}`;
        }
        return `${key}: ${value}`;
    })
        .join('\n');
    return `---\n${yaml}\n---`;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvdW5pdC9tYWluLnRlc3QudHMiLCJtYXBwaW5ncyI6Ijs7O0FBR0EsaUNBQWlDO0FBQ2pDLElBQUksQ0FBQyxJQUFJLENBQUMsZ0RBQWdELEVBQUUsR0FBRyxFQUFFO0lBQy9ELE1BQU0sYUFBYSxHQUFHO1FBQ3BCLHFCQUFxQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxlQUFlLENBQUM7WUFDL0MsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxpQkFBaUIsQ0FBQztnQkFDbkMsT0FBTyxFQUFFLElBQUk7Z0JBQ2IsT0FBTyxFQUFFLGVBQWU7YUFDekIsQ0FBQztTQUNILENBQUM7UUFDRix5QkFBeUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsZUFBZSxDQUFDO1lBQ25ELE9BQU8sRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsaUJBQWlCLENBQUM7Z0JBQ25DLE9BQU8sRUFBRSxJQUFJO2dCQUNiLE9BQU8sRUFBRSxpQkFBaUI7YUFDM0IsQ0FBQztTQUNILENBQUM7UUFDRixPQUFPLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDakQsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7S0FDbkIsQ0FBQztJQUVGLE9BQU87UUFDTCxXQUFXLEVBQUU7WUFDWCxVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxNQUFNLEVBQUUsRUFBRSxDQUFDLGFBQWEsQ0FBQztZQUNuRCxXQUFXLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxhQUFhLENBQUM7U0FDMUM7S0FDRixDQUFDO0FBQ0osQ0FBQyxDQUFDLENBQUM7QUFZSCxJQUFJLENBQUMsSUFBSSxDQUFDLHNDQUFzQyxFQUFFLEdBQUcs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LENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQztTQUM1RDtRQUNELE9BQU8sR0FBRyxHQUFHLEtBQUssS0FBSyxFQUFFLENBQUM7SUFDNUIsQ0FBQyxDQUFDO1NBQ0QsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0lBRWQsT0FBTyxRQUFRLElBQUksT0FBTyxDQUFDO0FBQzdCLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvdW5pdC9tYWluLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwLCBURmlsZSwgTm90aWNlLCBNYXJrZG93blBvc3RQcm9jZXNzb3JDb250ZXh0LCBQbHVnaW4gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgRXhvY29ydGV4UGx1Z2luIGZyb20gJy4uLy4uL3NyYy9tYWluJztcblxuLy8gTW9jayBhbGwgZXh0ZXJuYWwgZGVwZW5kZW5jaWVzXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy9pbmZyYXN0cnVjdHVyZS9jb250YWluZXIvRElDb250YWluZXInLCAoKSA9PiB7XG4gIGNvbnN0IG1vY2tDb250YWluZXIgPSB7XG4gICAgZ2V0Q3JlYXRlQXNzZXRVc2VDYXNlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIGV4ZWN1dGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdBc3NldCBjcmVhdGVkJ1xuICAgICAgfSlcbiAgICB9KSxcbiAgICBnZXRQcm9wZXJ0eUVkaXRpbmdVc2VDYXNlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgIGV4ZWN1dGU6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG1lc3NhZ2U6ICdQcm9wZXJ0eSBlZGl0ZWQnXG4gICAgICB9KVxuICAgIH0pLFxuICAgIHJlc29sdmU6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gKHt9KSksXG4gICAgZGlzcG9zZTogamVzdC5mbigpXG4gIH07XG5cbiAgcmV0dXJuIHtcbiAgICBESUNvbnRhaW5lcjoge1xuICAgICAgaW5pdGlhbGl6ZTogamVzdC5mbigoYXBwLCBwbHVnaW4pID0+IG1vY2tDb250YWluZXIpLFxuICAgICAgZ2V0SW5zdGFuY2U6IGplc3QuZm4oKCkgPT4gbW9ja0NvbnRhaW5lcilcbiAgICB9XG4gIH07XG59KTtcblxuLy8gTW9jayBHcmFwaFxuY29uc3QgbW9ja0dyYXBoTWV0aG9kcyA9IHtcbiAgYWRkOiBqZXN0LmZuKCksXG4gIHJlbW92ZTogamVzdC5mbigpLFxuICBjbGVhcjogamVzdC5mbigpLFxuICBtYXRjaDogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbXSksXG4gIG1lcmdlOiBqZXN0LmZuKCksXG4gIHNpemU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoMClcbn07XG5cbmplc3QubW9jaygnLi4vLi4vc3JjL2RvbWFpbi9zZW1hbnRpYy9jb3JlL0dyYXBoJywgKCkgPT4gKHtcbiAgR3JhcGg6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gbW9ja0dyYXBoTWV0aG9kcylcbn0pKTtcblxuLy8gTW9jayBTUEFSUUxQcm9jZXNzb3Jcbmplc3QubW9jaygnLi4vLi4vc3JjL3ByZXNlbnRhdGlvbi9wcm9jZXNzb3JzL1NQQVJRTFByb2Nlc3NvcicsICgpID0+ICh7XG4gIFNQQVJRTFByb2Nlc3NvcjogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xuICAgIHByb2Nlc3NDb2RlQmxvY2s6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpLFxuICAgIGdldENhY2hlU3RhdGlzdGljczogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBoaXRzOiAxMCxcbiAgICAgIG1pc3NlczogNSxcbiAgICAgIGhpdFJhdGU6IDY2LjcsXG4gICAgICBzaXplOiA4LFxuICAgICAgbWF4U2l6ZTogNTAwLFxuICAgICAgdG90YWxRdWVyaWVzOiAxNSxcbiAgICAgIGV2aWN0aW9uczogMFxuICAgIH0pLFxuICAgIGludmFsaWRhdGVDYWNoZTogamVzdC5mbigpLFxuICAgIGRlc3Ryb3k6IGplc3QuZm4oKVxuICB9KSlcbn0pKTtcblxuLy8gTW9jayBHcmFwaFZpc3VhbGl6YXRpb25Qcm9jZXNzb3Jcbmplc3QubW9jaygnLi4vLi4vc3JjL3ByZXNlbnRhdGlvbi9wcm9jZXNzb3JzL0dyYXBoVmlzdWFsaXphdGlvblByb2Nlc3NvcicsICgpID0+ICh7XG4gIEdyYXBoVmlzdWFsaXphdGlvblByb2Nlc3NvcjogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xuICAgIHByb2Nlc3NDb2RlQmxvY2s6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpXG4gIH0pKVxufSkpO1xuXG4vLyBNb2NrIFJERlNlcnZpY2Vcbmplc3QubW9jaygnLi4vLi4vc3JjL2FwcGxpY2F0aW9uL3NlcnZpY2VzL1JERlNlcnZpY2UnLCAoKSA9PiAoe1xuICBSREZTZXJ2aWNlOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XG4gICAgZ2V0TmFtZXNwYWNlTWFuYWdlcjogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7XG4gICAgICBnZXRQcmVmaXg6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoJ2V4bycpLFxuICAgICAgZXhwYW5kOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKCdodHRwOi8vZXhhbXBsZS5vcmcvZXhvIycpXG4gICAgfSlcbiAgfSkpXG59KSk7XG5cbi8vIE1vY2sgYWxsIG1vZGFsc1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvcHJlc2VudGF0aW9uL21vZGFscy9DcmVhdGVBc3NldE1vZGFsJywgKCkgPT4gKHtcbiAgQ3JlYXRlQXNzZXRNb2RhbDogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xuICAgIG9wZW46IGplc3QuZm4oKVxuICB9KSlcbn0pKTtcblxuamVzdC5tb2NrKCcuLi8uLi9zcmMvcHJlc2VudGF0aW9uL21vZGFscy9FeHBvcnRSREZNb2RhbCcsICgpID0+ICh7XG4gIEV4cG9ydFJERk1vZGFsOiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XG4gICAgb3BlbjogamVzdC5mbigpXG4gIH0pKVxufSkpO1xuXG5qZXN0Lm1vY2soJy4uLy4uL3NyYy9wcmVzZW50YXRpb24vbW9kYWxzL0ltcG9ydFJERk1vZGFsJywgKCkgPT4gKHtcbiAgSW1wb3J0UkRGTW9kYWw6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gKHtcbiAgICBvcGVuOiBqZXN0LmZuKClcbiAgfSkpXG59KSk7XG5cbmplc3QubW9jaygnLi4vLi4vc3JjL3ByZXNlbnRhdGlvbi9tb2RhbHMvUXVpY2tUYXNrTW9kYWwnLCAoKSA9PiAoe1xuICBRdWlja1Rhc2tNb2RhbDogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiAoe1xuICAgIG9wZW46IGplc3QuZm4oKVxuICB9KSlcbn0pKTtcblxuLy8gTW9jayByZXBvc2l0b3JpZXMgYW5kIHVzZSBjYXNlc1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvaW5mcmFzdHJ1Y3R1cmUvcmVwb3NpdG9yaWVzL09ic2lkaWFuVGFza1JlcG9zaXRvcnknKTtcbmplc3QubW9jaygnLi4vLi4vc3JjL2luZnJhc3RydWN0dXJlL3JlcG9zaXRvcmllcy9PYnNpZGlhbkFzc2V0UmVwb3NpdG9yeScpO1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvYXBwbGljYXRpb24vdXNlLWNhc2VzL0NyZWF0ZVRhc2tGcm9tUHJvamVjdFVzZUNhc2UnKTtcbmplc3QubW9jaygnLi4vLi4vc3JjL2FwcGxpY2F0aW9uL3VzZS1jYXNlcy9HZXRDdXJyZW50UHJvamVjdFVzZUNhc2UnKTtcbmplc3QubW9jaygnLi4vLi4vc3JjL2RvbWFpbi9zZW1hbnRpYy9jb3JlL0luZGV4ZWRHcmFwaCcpO1xuamVzdC5tb2NrKCcuLi8uLi9zcmMvYXBwbGljYXRpb24vc2VydmljZXMvRXhvRm9jdXNTZXJ2aWNlJyk7XG5cbmRlc2NyaWJlKCdFeG9jb3J0ZXhQbHVnaW4gLSBDb21wcmVoZW5zaXZlIFRlc3RzJywgKCkgPT4ge1xuICBsZXQgYXBwOiBBcHA7XG4gIGxldCBwbHVnaW46IEV4b2NvcnRleFBsdWdpbjtcbiAgbGV0IG1vY2tOb3RpY2U6IGplc3QuU3B5SW5zdGFuY2U7XG4gIFxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAvLyBTZXR1cCBjb21wcmVoZW5zaXZlIGFwcCBtb2NrXG4gICAgYXBwID0ge1xuICAgICAgdmF1bHQ6IHtcbiAgICAgICAgZ2V0TWFya2Rvd25GaWxlczogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShbXG4gICAgICAgICAgeyBiYXNlbmFtZTogJ3Rlc3QtZmlsZScsIHBhdGg6ICd0ZXN0LWZpbGUubWQnLCBuYW1lOiAndGVzdC1maWxlLm1kJywgZXh0ZW5zaW9uOiAnbWQnIH0sXG4gICAgICAgICAgeyBiYXNlbmFtZTogJ3Byb2plY3QnLCBwYXRoOiAncHJvamVjdC5tZCcsIG5hbWU6ICdwcm9qZWN0Lm1kJywgZXh0ZW5zaW9uOiAnbWQnIH1cbiAgICAgICAgXSksXG4gICAgICAgIHJlYWQ6IGplc3QuZm4oKS5tb2NrUmVzb2x2ZWRWYWx1ZShgLS0tXG5leG9fX0Fzc2V0X3VpZDogdGVzdC11aWRcbmV4b19fQXNzZXRfbGFiZWw6IFRlc3QgQXNzZXRcbmV4b19fSW5zdGFuY2VfY2xhc3M6IFwiW1tleG9fX0NsYXNzXV1cIlxudGFnczogW3Byb2plY3QsIGFjdGl2ZV1cbi0tLVxuXG4jIFRlc3QgRmlsZVxuVGhpcyBpcyB0ZXN0IGNvbnRlbnQgd2l0aCBbW2xpbmtzXV0gYW5kIG1ldGFkYXRhLmApLFxuICAgICAgICBvbjogamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZSh7IGV2ZW50OiAnbW9jaycsIGNhbGxiYWNrOiBqZXN0LmZuKCkgfSksXG4gICAgICAgIGNyZWF0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKG5ldyBURmlsZSgnbmV3LWZpbGUubWQnKSksXG4gICAgICAgIG1vZGlmeTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCksXG4gICAgICAgIGRlbGV0ZTogamVzdC5mbigpLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZClcbiAgICAgIH0sXG4gICAgICB3b3Jrc3BhY2U6IHtcbiAgICAgICAgb3BlbkxpbmtUZXh0OiBqZXN0LmZuKCksXG4gICAgICAgIGdldEFjdGl2ZUZpbGU6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoe1xuICAgICAgICAgIHBhdGg6ICdjdXJyZW50LWZpbGUubWQnLFxuICAgICAgICAgIGJhc2VuYW1lOiAnY3VycmVudC1maWxlJyxcbiAgICAgICAgICBuYW1lOiAnY3VycmVudC1maWxlLm1kJ1xuICAgICAgICB9KSxcbiAgICAgICAgb246IGplc3QuZm4oKVxuICAgICAgfSxcbiAgICAgIG1ldGFkYXRhQ2FjaGU6IHtcbiAgICAgICAgZ2V0RmlsZUNhY2hlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHtcbiAgICAgICAgICBmcm9udG1hdHRlcjoge1xuICAgICAgICAgICAgJ2V4b19fQXNzZXRfdWlkJzogJ3Rlc3QtdWlkJyxcbiAgICAgICAgICAgICdleG9fX0Fzc2V0X2xhYmVsJzogJ1Rlc3QgQXNzZXQnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZWN0aW9uczogW10sXG4gICAgICAgICAgaGVhZGluZ3M6IFtdLFxuICAgICAgICAgIGxpbmtzOiBbXVxuICAgICAgICB9KSxcbiAgICAgICAgb246IGplc3QuZm4oKVxuICAgICAgfVxuICAgIH0gYXMgdW5rbm93biBhcyBBcHA7XG4gICAgXG4gICAgLy8gTW9jayBOb3RpY2UgdG8gYXZvaWQgY29uc29sZSBub2lzZVxuICAgIG1vY2tOb3RpY2UgPSBqZXN0LnNweU9uKHJlcXVpcmUoJ29ic2lkaWFuJyksICdOb3RpY2UnKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gKHt9KSk7XG4gICAgXG4gICAgcGx1Z2luID0gbmV3IEV4b2NvcnRleFBsdWdpbihhcHAsIHtcbiAgICAgIGlkOiAnZXhvY29ydGV4JyxcbiAgICAgIG5hbWU6ICdFeG9jb3J0ZXgnLFxuICAgICAgdmVyc2lvbjogJzIuMTEuMCcsXG4gICAgICBtaW5BcHBWZXJzaW9uOiAnMS4wLjAnLFxuICAgICAgZGVzY3JpcHRpb246ICdLbm93bGVkZ2UgbWFuYWdlbWVudCB3aXRoIHNlbWFudGljIHdlYiB0ZWNobm9sb2dpZXMnLFxuICAgICAgYXV0aG9yOiAnTS5LLiBLaHJvbW92JyxcbiAgICAgIGF1dGhvclVybDogJ2h0dHBzOi8vZ2l0aHViLmNvbS9raXRlbGV2JyxcbiAgICAgIGlzRGVza3RvcE9ubHk6IGZhbHNlXG4gICAgfSk7XG4gICAgXG4gICAgLy8gTW9jayBwbHVnaW4gbWV0aG9kcyBmb3IgdGVzdGluZ1xuICAgIGplc3Quc3B5T24ocGx1Z2luLCAnYWRkQ29tbWFuZCcpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XG4gICAgamVzdC5zcHlPbihwbHVnaW4sICdhZGRSaWJib25JY29uJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcbiAgICBqZXN0LnNweU9uKHBsdWdpbiwgJ3JlZ2lzdGVyRXZlbnQnKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xuICAgIGplc3Quc3B5T24ocGx1Z2luLCAncmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvcicpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XG4gIH0pO1xuICBcbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBpZiAobW9ja05vdGljZSkge1xuICAgICAgbW9ja05vdGljZS5tb2NrUmVzdG9yZSgpO1xuICAgIH1cbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1BsdWdpbiBMaWZlY3ljbGUnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGluaXRpYWxpemUgYWxsIGNvcmUgY29tcG9uZW50cyBkdXJpbmcgbG9hZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHBsdWdpbi5vbmxvYWQoKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGNvcmUgY29tcG9uZW50cyBhcmUgaW5pdGlhbGl6ZWRcbiAgICAgIGV4cGVjdChwbHVnaW5bJ2dyYXBoJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocGx1Z2luWydzcGFycWxQcm9jZXNzb3InXSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChwbHVnaW5bJ2dyYXBoVmlzdWFsaXphdGlvblByb2Nlc3NvciddKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHBsdWdpblsnY29udGFpbmVyJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocGx1Z2luWydyZGZTZXJ2aWNlJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIHJlZ2lzdGVyIGFsbCBtYXJrZG93biBwcm9jZXNzb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVnaXN0ZXJTcHkgPSBqZXN0LnNweU9uKHBsdWdpbiwgJ3JlZ2lzdGVyTWFya2Rvd25Db2RlQmxvY2tQcm9jZXNzb3InKTtcbiAgICAgIFxuICAgICAgYXdhaXQgcGx1Z2luLm9ubG9hZCgpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVnaXN0ZXJTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdzcGFycWwnLCBleHBlY3QuYW55KEZ1bmN0aW9uKSk7XG4gICAgICBleHBlY3QocmVnaXN0ZXJTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdncmFwaCcsIGV4cGVjdC5hbnkoRnVuY3Rpb24pKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgcmVnaXN0ZXIgYWxsIGNvbW1hbmRzIGR1cmluZyBsb2FkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tbWFuZFNweSA9IGplc3Quc3B5T24ocGx1Z2luLCAnYWRkQ29tbWFuZCcpO1xuICAgICAgXG4gICAgICBhd2FpdCBwbHVnaW4ub25sb2FkKCk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBhbGwgY29tbWFuZHMgYXJlIHJlZ2lzdGVyZWRcbiAgICAgIGV4cGVjdChjb21tYW5kU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgIGlkOiAnY3JlYXRlLWV4by1hc3NldCcsXG4gICAgICAgIG5hbWU6ICdDcmVhdGUgbmV3IEV4b0Fzc2V0J1xuICAgICAgfSkpO1xuICAgICAgZXhwZWN0KGNvbW1hbmRTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgaWQ6ICd2aWV3LXNwYXJxbC1jYWNoZS1zdGF0cydcbiAgICAgIH0pKTtcbiAgICAgIGV4cGVjdChjb21tYW5kU3B5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgIGlkOiAnY2xlYXItc3BhcnFsLWNhY2hlJ1xuICAgICAgfSkpO1xuICAgICAgZXhwZWN0KGNvbW1hbmRTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgaWQ6ICdleHBvcnQta25vd2xlZGdlLWdyYXBoJ1xuICAgICAgfSkpO1xuICAgICAgZXhwZWN0KGNvbW1hbmRTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgaWQ6ICdpbXBvcnQtcmRmLWRhdGEnXG4gICAgICB9KSk7XG4gICAgICBleHBlY3QoY29tbWFuZFNweSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICBpZDogJ3F1aWNrLWNyZWF0ZS10YXNrJ1xuICAgICAgfSkpO1xuICAgICAgXG4gICAgICBleHBlY3QoY29tbWFuZFNweSkudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDYpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCByZWdpc3RlciByaWJib24gaWNvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJpYmJvblNweSA9IGplc3Quc3B5T24ocGx1Z2luLCAnYWRkUmliYm9uSWNvbicpO1xuICAgICAgXG4gICAgICBhd2FpdCBwbHVnaW4ub25sb2FkKCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyaWJib25TcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdwbHVzLWNpcmNsZScsICdDcmVhdGUgRXhvQXNzZXQnLCBleHBlY3QuYW55KEZ1bmN0aW9uKSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIHJlZ2lzdGVyIHZhdWx0IGV2ZW50IGhhbmRsZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcGx1Z2luLm9ubG9hZCgpO1xuICAgICAgXG4gICAgICBleHBlY3QoYXBwLnZhdWx0Lm9uKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgnbW9kaWZ5JywgZXhwZWN0LmFueShGdW5jdGlvbikpO1xuICAgICAgZXhwZWN0KGFwcC52YXVsdC5vbikudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ2NyZWF0ZScsIGV4cGVjdC5hbnkoRnVuY3Rpb24pKTtcbiAgICAgIGV4cGVjdChhcHAudmF1bHQub24pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdkZWxldGUnLCBleHBlY3QuYW55KEZ1bmN0aW9uKSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIGxvYWQgdmF1bHQgZGF0YSBpbnRvIGdyYXBoJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgcGx1Z2luLm9ubG9hZCgpO1xuICAgICAgXG4gICAgICBleHBlY3QoYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChhcHAudmF1bHQucmVhZCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgbG9hZCBlcnJvcnMgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzID0gamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignVmF1bHQgYWNjZXNzIGZhaWxlZCcpO1xuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBub3QgdGhyb3cgZHVyaW5nIHBsdWdpbiBsb2FkIC0gZXJyb3Igc2hvdWxkIGJlIGNhdWdodCBhbmQgaGFuZGxlZFxuICAgICAgYXdhaXQgZXhwZWN0KHBsdWdpbi5vbmxvYWQoKSkucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IGNvbXBvbmVudHMgYXJlIHN0aWxsIGluaXRpYWxpemVkIGRlc3BpdGUgdmF1bHQgZXJyb3JcbiAgICAgIGV4cGVjdChwbHVnaW5bJ2dyYXBoJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocGx1Z2luWydjb250YWluZXInXSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChwbHVnaW5bJ3JkZlNlcnZpY2UnXSkudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgY2xlYW51cCByZXNvdXJjZXMgZHVyaW5nIHVubG9hZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHBsdWdpbi5vbmxvYWQoKTtcbiAgICAgIFxuICAgICAgY29uc3QgbW9ja1NwYXJxbFByb2Nlc3NvciA9IHBsdWdpblsnc3BhcnFsUHJvY2Vzc29yJ107XG4gICAgICBjb25zdCBtb2NrR3JhcGggPSBwbHVnaW5bJ2dyYXBoJ107XG4gICAgICBcbiAgICAgIGF3YWl0IHBsdWdpbi5vbnVubG9hZCgpO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgY2xlYW51cCB3YXMgY2FsbGVkXG4gICAgICBleHBlY3QobW9ja0dyYXBoLmNsZWFyKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QobW9ja1NwYXJxbFByb2Nlc3Nvci5kZXN0cm95KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB1bmxvYWQgd2hlbiBjb21wb25lbnRzIGFyZSBub3QgaW5pdGlhbGl6ZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBEb24ndCBjYWxsIG9ubG9hZCwgdGVzdCB1bmxvYWQgd2l0aCB1bmluaXRpYWxpemVkIHN0YXRlXG4gICAgICBhd2FpdCBleHBlY3QocGx1Z2luLm9udW5sb2FkKCkpLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTUEFSUUwgQ2FjaGUgTWFuYWdlbWVudCcsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHBsdWdpbi5vbmxvYWQoKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgaW5pdGlhbGl6ZSBTUEFSUUwgcHJvY2Vzc29yIHdpdGggY2FjaGUgY29uZmlndXJhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHByb2Nlc3NvciA9IHBsdWdpblsnc3BhcnFsUHJvY2Vzc29yJ107XG4gICAgICBleHBlY3QocHJvY2Vzc29yKS50b0JlRGVmaW5lZCgpO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgY2FjaGUgc3RhdGlzdGljcyBhcmUgYXZhaWxhYmxlXG4gICAgICBjb25zdCBzdGF0cyA9IHByb2Nlc3Nvci5nZXRDYWNoZVN0YXRpc3RpY3MoKTtcbiAgICAgIGV4cGVjdChzdGF0cykudG9FcXVhbChleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgIGhpdHM6IGV4cGVjdC5hbnkoTnVtYmVyKSxcbiAgICAgICAgbWlzc2VzOiBleHBlY3QuYW55KE51bWJlciksXG4gICAgICAgIGhpdFJhdGU6IGV4cGVjdC5hbnkoTnVtYmVyKSxcbiAgICAgICAgc2l6ZTogZXhwZWN0LmFueShOdW1iZXIpLFxuICAgICAgICBtYXhTaXplOiBleHBlY3QuYW55KE51bWJlciksXG4gICAgICAgIHRvdGFsUXVlcmllczogZXhwZWN0LmFueShOdW1iZXIpLFxuICAgICAgICBldmljdGlvbnM6IGV4cGVjdC5hbnkoTnVtYmVyKVxuICAgICAgfSkpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBwcm92aWRlIGNhY2hlIHN0YXRpc3RpY3MgdGhyb3VnaCBjb21tYW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tbWFuZHMgPSBwbHVnaW5bJ2FkZENvbW1hbmQnXS5tb2NrLmNhbGxzO1xuICAgICAgY29uc3QgY2FjaGVTdGF0c0NvbW1hbmQgPSBjb21tYW5kcy5maW5kKGNhbGwgPT4gY2FsbFswXS5pZCA9PT0gJ3ZpZXctc3BhcnFsLWNhY2hlLXN0YXRzJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjYWNoZVN0YXRzQ29tbWFuZCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChjYWNoZVN0YXRzQ29tbWFuZFswXS5jYWxsYmFjaykudG9CZUluc3RhbmNlT2YoRnVuY3Rpb24pO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBwcm92aWRlIGNhY2hlIGNsZWFyaW5nIGZ1bmN0aW9uYWxpdHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjb21tYW5kcyA9IHBsdWdpblsnYWRkQ29tbWFuZCddLm1vY2suY2FsbHM7XG4gICAgICBjb25zdCBjbGVhckNhY2hlQ29tbWFuZCA9IGNvbW1hbmRzLmZpbmQoY2FsbCA9PiBjYWxsWzBdLmlkID09PSAnY2xlYXItc3BhcnFsLWNhY2hlJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChjbGVhckNhY2hlQ29tbWFuZCkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChjbGVhckNhY2hlQ29tbWFuZFswXS5jYWxsYmFjaykudG9CZUluc3RhbmNlT2YoRnVuY3Rpb24pO1xuICAgICAgXG4gICAgICAvLyBFeGVjdXRlIHRoZSBjbGVhciBjYWNoZSBjb21tYW5kXG4gICAgICBjbGVhckNhY2hlQ29tbWFuZFswXS5jYWxsYmFjaygpO1xuICAgICAgZXhwZWN0KHBsdWdpblsnc3BhcnFsUHJvY2Vzc29yJ10uaW52YWxpZGF0ZUNhY2hlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdGaWxlIE1hbmFnZW1lbnQgYW5kIEdyYXBoIFVwZGF0ZXMnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBwbHVnaW4ub25sb2FkKCk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIGV4dHJhY3QgdHJpcGxlcyBmcm9tIGZyb250bWF0dGVyJywgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0ZpbGUgPSBuZXcgVEZpbGUoJ3Rlc3QubWQnKTtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBgLS0tXG50aXRsZTogVGVzdCBOb3RlXG50YWdzOiBbcHJvamVjdCwgYWN0aXZlXVxuYXV0aG9yOiBKb2huIERvZVxuLS0tXG5cbiMgVGVzdCBDb250ZW50YDtcbiAgICAgIFxuICAgICAgY29uc3QgdHJpcGxlcyA9IHBsdWdpblsnZXh0cmFjdFRyaXBsZXNGcm9tRmlsZSddKG1vY2tGaWxlLCBjb250ZW50KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHRyaXBsZXMpLnRvSGF2ZUxlbmd0aCg1KTsgLy8gdGl0bGUsIDIgdGFncywgYXV0aG9yLCBmaWxlX3BhdGgsIGZpbGVfbmFtZVxuICAgICAgZXhwZWN0KHRyaXBsZXMuc29tZSh0ID0+IHQuZ2V0UHJlZGljYXRlKCkudG9TdHJpbmcoKSA9PT0gJ3RpdGxlJykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QodHJpcGxlcy5zb21lKHQgPT4gdC5nZXRQcmVkaWNhdGUoKS50b1N0cmluZygpID09PSAnYXV0aG9yJykpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIHBhcnNlIGNvbXBsZXggZnJvbnRtYXR0ZXIgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0ZpbGUgPSBuZXcgVEZpbGUoJ2NvbXBsZXgubWQnKTtcbiAgICAgIGNvbnN0IGNvbnRlbnQgPSBgLS0tXG5wcm9qZWN0OlxuICAtIFByb2plY3QgQVxuICAtIFByb2plY3QgQlxuc3RhdHVzOiBhY3RpdmVcbm5lc3RlZDpcbiAgdmFsdWU6IHRlc3Rcbi0tLVxuXG4jIENvbXBsZXggTm90ZWA7XG4gICAgICBcbiAgICAgIGNvbnN0IHRyaXBsZXMgPSBwbHVnaW5bJ2V4dHJhY3RUcmlwbGVzRnJvbUZpbGUnXShtb2NrRmlsZSwgY29udGVudCk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBoYW5kbGUgYXJyYXkgdmFsdWVzIGFuZCBuZXN0ZWQgb2JqZWN0c1xuICAgICAgZXhwZWN0KHRyaXBsZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMik7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBmaWxlIHdpdGhvdXQgZnJvbnRtYXR0ZXInLCAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRmlsZSA9IG5ldyBURmlsZSgnc2ltcGxlLm1kJyk7XG4gICAgICBjb25zdCBjb250ZW50ID0gYCMgU2ltcGxlIE5vdGVcblxuSnVzdCBjb250ZW50LCBubyBmcm9udG1hdHRlci5gO1xuICAgICAgXG4gICAgICBjb25zdCB0cmlwbGVzID0gcGx1Z2luWydleHRyYWN0VHJpcGxlc0Zyb21GaWxlJ10obW9ja0ZpbGUsIGNvbnRlbnQpO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgc3RpbGwgY3JlYXRlIGJhc2ljIGZpbGUgbWV0YWRhdGEgdHJpcGxlc1xuICAgICAgZXhwZWN0KHRyaXBsZXMpLnRvSGF2ZUxlbmd0aCgyKTsgLy8gZmlsZV9wYXRoLCBmaWxlX25hbWVcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgdXBkYXRlIGdyYXBoIHdoZW4gZmlsZSBpcyBtb2RpZmllZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tGaWxlID0gbmV3IFRGaWxlKCdtb2RpZmllZC5tZCcpO1xuICAgICAgY29uc3QgZXZlbnRIYW5kbGVycyA9IGFwcC52YXVsdC5vbi5tb2NrLmNhbGxzO1xuICAgICAgY29uc3QgbW9kaWZ5SGFuZGxlciA9IGV2ZW50SGFuZGxlcnMuZmluZChjYWxsID0+IGNhbGxbMF0gPT09ICdtb2RpZnknKVsxXTtcbiAgICAgIFxuICAgICAgLy8gU2ltdWxhdGUgZmlsZSBtb2RpZmljYXRpb25cbiAgICAgIGF3YWl0IG1vZGlmeUhhbmRsZXIobW9ja0ZpbGUpO1xuICAgICAgXG4gICAgICBleHBlY3QoYXBwLnZhdWx0LnJlYWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tGaWxlKTtcbiAgICAgIGV4cGVjdChwbHVnaW5bJ3NwYXJxbFByb2Nlc3NvciddLmludmFsaWRhdGVDYWNoZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgZmlsZSBjcmVhdGlvbiBldmVudHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrRmlsZSA9IG5ldyBURmlsZSgnbmV3Lm1kJyk7XG4gICAgICBjb25zdCBldmVudEhhbmRsZXJzID0gYXBwLnZhdWx0Lm9uLm1vY2suY2FsbHM7XG4gICAgICBjb25zdCBjcmVhdGVIYW5kbGVyID0gZXZlbnRIYW5kbGVycy5maW5kKGNhbGwgPT4gY2FsbFswXSA9PT0gJ2NyZWF0ZScpWzFdO1xuICAgICAgXG4gICAgICAvLyBTaW11bGF0ZSBmaWxlIGNyZWF0aW9uXG4gICAgICBhd2FpdCBjcmVhdGVIYW5kbGVyKG1vY2tGaWxlKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGFwcC52YXVsdC5yZWFkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChtb2NrRmlsZSk7XG4gICAgICBleHBlY3QocGx1Z2luWydzcGFycWxQcm9jZXNzb3InXS5pbnZhbGlkYXRlQ2FjaGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGZpbGUgZGVsZXRpb24gZXZlbnRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja0ZpbGUgPSBuZXcgVEZpbGUoJ2RlbGV0ZWQubWQnKTtcbiAgICAgIGNvbnN0IGV2ZW50SGFuZGxlcnMgPSBhcHAudmF1bHQub24ubW9jay5jYWxscztcbiAgICAgIGNvbnN0IGRlbGV0ZUhhbmRsZXIgPSBldmVudEhhbmRsZXJzLmZpbmQoY2FsbCA9PiBjYWxsWzBdID09PSAnZGVsZXRlJylbMV07XG4gICAgICBcbiAgICAgIC8vIFNpbXVsYXRlIGZpbGUgZGVsZXRpb25cbiAgICAgIGF3YWl0IGRlbGV0ZUhhbmRsZXIobW9ja0ZpbGUpO1xuICAgICAgXG4gICAgICBleHBlY3QocGx1Z2luWydzcGFycWxQcm9jZXNzb3InXS5pbnZhbGlkYXRlQ2FjaGUpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG4gIFxuICBkZXNjcmliZSgnQ29tbWFuZCBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHBsdWdpbi5vbmxvYWQoKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgZXhlY3V0ZSBjcmVhdGUgYXNzZXQgY29tbWFuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbW1hbmRzID0gcGx1Z2luWydhZGRDb21tYW5kJ10ubW9jay5jYWxscztcbiAgICAgIGNvbnN0IGNyZWF0ZUNvbW1hbmQgPSBjb21tYW5kcy5maW5kKGNhbGwgPT4gY2FsbFswXS5pZCA9PT0gJ2NyZWF0ZS1leG8tYXNzZXQnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGNyZWF0ZUNvbW1hbmQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QoY3JlYXRlQ29tbWFuZFswXS5ob3RrZXlzKS50b0VxdWFsKFt7IG1vZGlmaWVyczogW1wiTW9kXCIsIFwiU2hpZnRcIl0sIGtleTogXCJuXCIgfV0pO1xuICAgICAgXG4gICAgICAvLyBFeGVjdXRlIGNvbW1hbmQgc2hvdWxkIG9wZW4gbW9kYWxcbiAgICAgIGNyZWF0ZUNvbW1hbmRbMF0uY2FsbGJhY2soKTtcbiAgICAgIFxuICAgICAgY29uc3QgeyBDcmVhdGVBc3NldE1vZGFsIH0gPSByZXF1aXJlKCcuLi8uLi9zcmMvcHJlc2VudGF0aW9uL21vZGFscy9DcmVhdGVBc3NldE1vZGFsJyk7XG4gICAgICBleHBlY3QoQ3JlYXRlQXNzZXRNb2RhbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoYXBwKTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgZXhlY3V0ZSBleHBvcnQgZ3JhcGggY29tbWFuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbW1hbmRzID0gcGx1Z2luWydhZGRDb21tYW5kJ10ubW9jay5jYWxscztcbiAgICAgIGNvbnN0IGV4cG9ydENvbW1hbmQgPSBjb21tYW5kcy5maW5kKGNhbGwgPT4gY2FsbFswXS5pZCA9PT0gJ2V4cG9ydC1rbm93bGVkZ2UtZ3JhcGgnKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KGV4cG9ydENvbW1hbmQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBcbiAgICAgIC8vIEV4ZWN1dGUgY29tbWFuZCBzaG91bGQgb3BlbiBtb2RhbFxuICAgICAgZXhwb3J0Q29tbWFuZFswXS5jYWxsYmFjaygpO1xuICAgICAgXG4gICAgICBjb25zdCB7IEV4cG9ydFJERk1vZGFsIH0gPSByZXF1aXJlKCcuLi8uLi9zcmMvcHJlc2VudGF0aW9uL21vZGFscy9FeHBvcnRSREZNb2RhbCcpO1xuICAgICAgZXhwZWN0KEV4cG9ydFJERk1vZGFsKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgYXBwLFxuICAgICAgICBwbHVnaW5bJ2dyYXBoJ10sXG4gICAgICAgIGV4cGVjdC5hbnkoT2JqZWN0KSxcbiAgICAgICAgZXhwZWN0LmFueShGdW5jdGlvbilcbiAgICAgICk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIGV4ZWN1dGUgaW1wb3J0IFJERiBjb21tYW5kJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY29tbWFuZHMgPSBwbHVnaW5bJ2FkZENvbW1hbmQnXS5tb2NrLmNhbGxzO1xuICAgICAgY29uc3QgaW1wb3J0Q29tbWFuZCA9IGNvbW1hbmRzLmZpbmQoY2FsbCA9PiBjYWxsWzBdLmlkID09PSAnaW1wb3J0LXJkZi1kYXRhJyk7XG4gICAgICBcbiAgICAgIGV4cGVjdChpbXBvcnRDb21tYW5kKS50b0JlRGVmaW5lZCgpO1xuICAgICAgXG4gICAgICAvLyBFeGVjdXRlIGNvbW1hbmQgc2hvdWxkIG9wZW4gbW9kYWxcbiAgICAgIGltcG9ydENvbW1hbmRbMF0uY2FsbGJhY2soKTtcbiAgICAgIFxuICAgICAgY29uc3QgeyBJbXBvcnRSREZNb2RhbCB9ID0gcmVxdWlyZSgnLi4vLi4vc3JjL3ByZXNlbnRhdGlvbi9tb2RhbHMvSW1wb3J0UkRGTW9kYWwnKTtcbiAgICAgIGV4cGVjdChJbXBvcnRSREZNb2RhbCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGFwcCxcbiAgICAgICAgcGx1Z2luWydncmFwaCddLFxuICAgICAgICBleHBlY3QuYW55KE9iamVjdCksXG4gICAgICAgIGV4cGVjdC5hbnkoRnVuY3Rpb24pXG4gICAgICApO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBleGVjdXRlIHF1aWNrIHRhc2sgY3JlYXRpb24gY29tbWFuZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNvbW1hbmRzID0gcGx1Z2luWydhZGRDb21tYW5kJ10ubW9jay5jYWxscztcbiAgICAgIGNvbnN0IHRhc2tDb21tYW5kID0gY29tbWFuZHMuZmluZChjYWxsID0+IGNhbGxbMF0uaWQgPT09ICdxdWljay1jcmVhdGUtdGFzaycpO1xuICAgICAgXG4gICAgICBleHBlY3QodGFza0NvbW1hbmQpLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QodGFza0NvbW1hbmRbMF0uaG90a2V5cykudG9FcXVhbChbeyBtb2RpZmllcnM6IFtcIk1vZFwiLCBcIlNoaWZ0XCJdLCBrZXk6IFwidFwiIH1dKTtcbiAgICAgIFxuICAgICAgLy8gRXhlY3V0ZSBjb21tYW5kIHNob3VsZCBvcGVuIHRhc2sgbW9kYWxcbiAgICAgIGF3YWl0IHRhc2tDb21tYW5kWzBdLmNhbGxiYWNrKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IHsgUXVpY2tUYXNrTW9kYWwgfSA9IHJlcXVpcmUoJy4uLy4uL3NyYy9wcmVzZW50YXRpb24vbW9kYWxzL1F1aWNrVGFza01vZGFsJyk7XG4gICAgICBleHBlY3QoUXVpY2tUYXNrTW9kYWwpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICB9KTtcbiAgfSk7XG4gIFxuICBkZXNjcmliZSgnRXJyb3IgSGFuZGxpbmcnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBwcm9jZXNzb3IgcmVnaXN0cmF0aW9uIGZhaWx1cmVzIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBwbHVnaW4ucmVnaXN0ZXJNYXJrZG93bkNvZGVCbG9ja1Byb2Nlc3NvciA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlZ2lzdHJhdGlvbiBmYWlsZWQnKTtcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgbm90IGZhaWwgcGx1Z2luIGxvYWRpbmdcbiAgICAgIGF3YWl0IGV4cGVjdChwbHVnaW4ub25sb2FkKCkpLnJlc29sdmVzLm5vdC50b1Rocm93KCk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB2YXVsdCByZWFkIGZhaWx1cmVzIGR1cmluZyBncmFwaCBsb2FkaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXBwLnZhdWx0LnJlYWQgPSBqZXN0LmZuKCkubW9ja1JlamVjdGVkVmFsdWUobmV3IEVycm9yKCdSZWFkIGZhaWxlZCcpKTtcbiAgICAgIFxuICAgICAgLy8gU2hvdWxkIG5vdCBmYWlsIHBsdWdpbiBsb2FkaW5nXG4gICAgICBhd2FpdCBleHBlY3QocGx1Z2luLm9ubG9hZCgpKS5yZXNvbHZlcy5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgcXVpY2sgdGFzayBjb21tYW5kIGVycm9ycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHBsdWdpbi5vbmxvYWQoKTtcbiAgICAgIFxuICAgICAgY29uc3QgY29tbWFuZHMgPSBwbHVnaW5bJ2FkZENvbW1hbmQnXS5tb2NrLmNhbGxzO1xuICAgICAgY29uc3QgdGFza0NvbW1hbmQgPSBjb21tYW5kcy5maW5kKGNhbGwgPT4gY2FsbFswXS5pZCA9PT0gJ3F1aWNrLWNyZWF0ZS10YXNrJyk7XG4gICAgICBcbiAgICAgIC8vIFNob3VsZCBoYW5kbGUgZXJyb3IgZ3JhY2VmdWxseSBhbmQgc2hvdyBub3RpY2VcbiAgICAgIGF3YWl0IGV4cGVjdCh0YXNrQ29tbWFuZFswXS5jYWxsYmFjaygpKS5yZXNvbHZlcy5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuICB9KTtcbiAgXG4gIGRlc2NyaWJlKCdJbnRlZ3JhdGlvbiBUZXN0cycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgaGF2ZSBhbGwgY29tcG9uZW50cyB3b3JraW5nIHRvZ2V0aGVyIGFmdGVyIGxvYWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBwbHVnaW4ub25sb2FkKCk7XG4gICAgICBcbiAgICAgIC8vIFZlcmlmeSBhbGwgY3JpdGljYWwgY29tcG9uZW50cyBhcmUgaW5pdGlhbGl6ZWQgYW5kIGNvbm5lY3RlZFxuICAgICAgZXhwZWN0KHBsdWdpblsnZ3JhcGgnXSkudG9CZURlZmluZWQoKTtcbiAgICAgIGV4cGVjdChwbHVnaW5bJ3NwYXJxbFByb2Nlc3NvciddKS50b0JlRGVmaW5lZCgpO1xuICAgICAgZXhwZWN0KHBsdWdpblsnZ3JhcGhWaXN1YWxpemF0aW9uUHJvY2Vzc29yJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocGx1Z2luWydyZGZTZXJ2aWNlJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgICBleHBlY3QocGx1Z2luWydjb250YWluZXInXSkudG9CZURlZmluZWQoKTtcbiAgICAgIFxuICAgICAgLy8gVmVyaWZ5IHByb2Nlc3NvcnMgYXJlIGNvbm5lY3RlZCB0byB0aGUgZ3JhcGhcbiAgICAgIGNvbnN0IHNwYXJxbFByb2Nlc3NvciA9IHBsdWdpblsnc3BhcnFsUHJvY2Vzc29yJ107XG4gICAgICBleHBlY3Qoc3BhcnFsUHJvY2Vzc29yKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICAgIFxuICAgIHRlc3QoJ3Nob3VsZCBtYWludGFpbiBkYXRhIGNvbnNpc3RlbmN5IGFjcm9zcyBmaWxlIG9wZXJhdGlvbnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBwbHVnaW4ub25sb2FkKCk7XG4gICAgICBcbiAgICAgIGNvbnN0IG1vY2tGaWxlID0gbmV3IFRGaWxlKCdjb25zaXN0ZW5jeS10ZXN0Lm1kJyk7XG4gICAgICBjb25zdCBwcm9jZXNzb3IgPSBwbHVnaW5bJ3NwYXJxbFByb2Nlc3NvciddO1xuICAgICAgXG4gICAgICAvLyBSZXNldCBtb2NrcyB0byB0cmFjayBjYWxscyBmcm9tIHRoaXMgdGVzdCBzcGVjaWZpY2FsbHlcbiAgICAgIGplc3QuY2xlYXJBbGxNb2NrcygpO1xuICAgICAgXG4gICAgICAvLyBNb2NrIGZpbGUgY29udGVudCBmb3IgdXBkYXRlIG9wZXJhdGlvblxuICAgICAgYXBwLnZhdWx0LnJlYWQgPSBqZXN0LmZuKCkubW9ja1Jlc29sdmVkVmFsdWUoYC0tLVxudGl0bGU6IFRlc3QgRmlsZVxudGFnczogW3Byb2plY3QsIHRlc3RdXG4tLS1cblxuIyBUZXN0IENvbnRlbnRcblxuU29tZSB0ZXN0IGNvbnRlbnQuYCk7XG4gICAgICBcbiAgICAgIC8vIE1vY2sgZ3JhcGgubWF0Y2ggdG8gcmV0dXJuIGV4aXN0aW5nIHRyaXBsZXMgdGhhdCBuZWVkIHRvIGJlIHJlbW92ZWRcbiAgICAgIGNvbnN0IG1vY2tUcmlwbGUgPSB7IHN1YmplY3Q6ICd0ZXN0JywgcHJlZGljYXRlOiAndGVzdCcsIG9iamVjdDogJ3Rlc3QnIH07XG4gICAgICBtb2NrR3JhcGhNZXRob2RzLm1hdGNoLm1vY2tSZXR1cm5WYWx1ZShbbW9ja1RyaXBsZV0pO1xuICAgICAgXG4gICAgICAvLyBTaW11bGF0ZSBmaWxlIHVwZGF0ZSBjeWNsZSAtIHRoaXMgc2hvdWxkIHJlbW92ZSBvbGQgdHJpcGxlcyBhbmQgYWRkIG5ldyBvbmVzXG4gICAgICBhd2FpdCBwbHVnaW5bJ3VwZGF0ZUZpbGVJbkdyYXBoJ10obW9ja0ZpbGUpO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgb2xkIHRyaXBsZXMgd2VyZSByZW1vdmVkIGJ5IGNoZWNraW5nIHJlbW92ZUZpbGVGcm9tR3JhcGggd2FzIGNhbGxlZFxuICAgICAgZXhwZWN0KG1vY2tHcmFwaE1ldGhvZHMubWF0Y2gpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChtb2NrR3JhcGhNZXRob2RzLnJlbW92ZSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgXG4gICAgICAvLyBWZXJpZnkgbmV3IHRyaXBsZXMgd2VyZSBhZGRlZCAoYXQgbGVhc3QgZmlsZSBtZXRhZGF0YSB0cmlwbGVzKVxuICAgICAgZXhwZWN0KG1vY2tHcmFwaE1ldGhvZHMuYWRkKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoYXBwLnZhdWx0LnJlYWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKG1vY2tGaWxlKTtcbiAgICAgIFxuICAgICAgLy8gVGVzdCBmaWxlIGRlbGV0aW9uIG1haW50YWlucyBjb25zaXN0ZW5jeVxuICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgICBwbHVnaW5bJ3JlbW92ZUZpbGVGcm9tR3JhcGgnXShtb2NrRmlsZSk7XG4gICAgICBleHBlY3QobW9ja0dyYXBoTWV0aG9kcy5tYXRjaCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KG1vY2tHcmFwaE1ldGhvZHMucmVtb3ZlKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgfSk7XG4gIH0pO1xuICBcbiAgZGVzY3JpYmUoJ0Zyb250bWF0dGVyIFBhcnNpbmcnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHBhcnNlIHNpbXBsZSBmcm9udG1hdHRlcicsICgpID0+IHtcbiAgICAgIGNvbnN0IHlhbWwgPSAndGl0bGU6IFRlc3RcXG5hdXRob3I6IEpvaG5cXG5zdGF0dXM6IGFjdGl2ZSc7XG4gICAgICBjb25zdCByZXN1bHQgPSBwbHVnaW5bJ3BhcnNlRnJvbnRtYXR0ZXInXSh5YW1sKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh7XG4gICAgICAgIHRpdGxlOiAnVGVzdCcsXG4gICAgICAgIGF1dGhvcjogJ0pvaG4nLFxuICAgICAgICBzdGF0dXM6ICdhY3RpdmUnXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgcGFyc2UgYXJyYXkgZnJvbnRtYXR0ZXInLCAoKSA9PiB7XG4gICAgICBjb25zdCB5YW1sID0gJ3RhZ3M6XFxuICAtIHByb2plY3RcXG4gIC0gYWN0aXZlXFxuYXV0aG9yOiBKb2huJztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBsdWdpblsncGFyc2VGcm9udG1hdHRlciddKHlhbWwpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgdGFnczogWydwcm9qZWN0JywgJ2FjdGl2ZSddLFxuICAgICAgICBhdXRob3I6ICdKb2huJ1xuICAgICAgfSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBlbXB0eSB2YWx1ZXMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB5YW1sID0gJ3RpdGxlOlxcbmF1dGhvcjogSm9oblxcbmVtcHR5OiBcIlwiJztcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHBsdWdpblsncGFyc2VGcm9udG1hdHRlciddKHlhbWwpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHtcbiAgICAgICAgdGl0bGU6IFtdLFxuICAgICAgICBhdXRob3I6ICdKb2huJyxcbiAgICAgICAgZW1wdHk6ICcnXG4gICAgICB9KTtcbiAgICB9KTtcbiAgICBcbiAgICB0ZXN0KCdzaG91bGQgaGFuZGxlIGNvbXBsZXggbmVzdGVkIGFycmF5cycsICgpID0+IHtcbiAgICAgIGNvbnN0IHlhbWwgPSAncHJvamVjdHM6XFxuICAtIFByb2plY3QgQVxcbiAgLSBQcm9qZWN0IEJcXG4gIC0gUHJvamVjdCBDXFxub3duZXI6IFRlYW0nO1xuICAgICAgY29uc3QgcmVzdWx0ID0gcGx1Z2luWydwYXJzZUZyb250bWF0dGVyJ10oeWFtbCk7XG4gICAgICBcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwoe1xuICAgICAgICBwcm9qZWN0czogWydQcm9qZWN0IEEnLCAnUHJvamVjdCBCJywgJ1Byb2plY3QgQyddLFxuICAgICAgICBvd25lcjogJ1RlYW0nXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gIFxuICBkZXNjcmliZSgnUGVyZm9ybWFuY2UgYW5kIE1lbW9yeScsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgbm90IGNyZWF0ZSBtZW1vcnkgbGVha3MgZHVyaW5nIHJlcGVhdGVkIGxvYWQvdW5sb2FkIGN5Y2xlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIC8vIFRlc3QgbXVsdGlwbGUgbG9hZC91bmxvYWQgY3ljbGVzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICBhd2FpdCBwbHVnaW4ub25sb2FkKCk7XG4gICAgICAgIGF3YWl0IHBsdWdpbi5vbnVubG9hZCgpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBTaG91bGQgY29tcGxldGUgd2l0aG91dCB0aHJvd2luZ1xuICAgICAgZXhwZWN0KHRydWUpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gICAgXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBsYXJnZSB2YXVsdCB3aXRoIG1hbnkgZmlsZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAvLyBNb2NrIGEgbGFyZ2UgbnVtYmVyIG9mIGZpbGVzXG4gICAgICBjb25zdCBtYW55RmlsZXMgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAxMDAwIH0sIChfLCBpKSA9PiAoe1xuICAgICAgICBiYXNlbmFtZTogYGZpbGUtJHtpfWAsXG4gICAgICAgIHBhdGg6IGBmaWxlLSR7aX0ubWRgLFxuICAgICAgICBuYW1lOiBgZmlsZS0ke2l9Lm1kYCxcbiAgICAgICAgZXh0ZW5zaW9uOiAnbWQnXG4gICAgICB9KSk7XG4gICAgICBcbiAgICAgIGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzID0gamVzdC5mbigpLm1vY2tSZXR1cm5WYWx1ZShtYW55RmlsZXMpO1xuICAgICAgXG4gICAgICAvLyBTaG91bGQgaGFuZGxlIGxhcmdlIHZhdWx0IHdpdGhvdXQgdGltaW5nIG91dFxuICAgICAgYXdhaXQgZXhwZWN0KHBsdWdpbi5vbmxvYWQoKSkucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuLy8gQWRkaXRpb25hbCB0ZXN0IHV0aWxpdGllcyBmb3IgY29tcHJlaGVuc2l2ZSB0ZXN0aW5nXG5mdW5jdGlvbiBjcmVhdGVNb2NrRmlsZShwYXRoOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyA9ICcnKTogVEZpbGUge1xuICBjb25zdCBmaWxlID0gbmV3IFRGaWxlKHBhdGgpO1xuICByZXR1cm4gZmlsZTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlTW9ja0Zyb250bWF0dGVyKGRhdGE6IFJlY29yZDxzdHJpbmcsIGFueT4pOiBzdHJpbmcge1xuICBjb25zdCB5YW1sID0gT2JqZWN0LmVudHJpZXMoZGF0YSlcbiAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+IHtcbiAgICAgIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgICAgICByZXR1cm4gYCR7a2V5fTpcXG4ke3ZhbHVlLm1hcCh2ID0+IGAgIC0gJHt2fWApLmpvaW4oJ1xcbicpfWA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYCR7a2V5fTogJHt2YWx1ZX1gO1xuICAgIH0pXG4gICAgLmpvaW4oJ1xcbicpO1xuICBcbiAgcmV0dXJuIGAtLS1cXG4ke3lhbWx9XFxuLS0tYDtcbn0iXSwidmVyc2lvbiI6M30=