f172fe3fc5e30ae3f5eb4edc8b397974
"use strict";
/**
 * Modal for RDF Import functionality
 * Allows users to import RDF data from files and merge with existing graph
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.ImportRDFModal = void 0;
const obsidian_1 = require("obsidian");
const IndexedGraph_1 = require("../../domain/semantic/core/IndexedGraph");
const RDFParser_1 = require("../../application/services/RDFParser");
const NamespaceManager_1 = require("../../application/services/NamespaceManager");
const MemoryOptimizedImporter_1 = require("../../infrastructure/performance/MemoryOptimizedImporter");
class ImportRDFModal extends obsidian_1.Modal {
    constructor(app, graph, namespaceManager, onImport) {
        super(app);
        this.options = {
            mergeMode: "merge",
            validateInput: true,
            strictMode: false,
            useOptimizedImporter: true,
            chunkSize: 1000,
            enableMemoryPooling: false,
        };
        this.selectedFile = null;
        this.fileContent = "";
        this.graph = graph;
        this.namespaceManager = namespaceManager || new NamespaceManager_1.NamespaceManager();
        this.parser = new RDFParser_1.RDFParser(this.namespaceManager);
        this.optimizedImporter = new MemoryOptimizedImporter_1.MemoryOptimizedImporter();
        this.onImport = onImport;
    }
    onOpen() {
        const { contentEl } = this;
        contentEl.empty();
        // Title
        contentEl.createEl("h2", { text: "Import RDF Data" });
        // Current graph statistics
        const currentStatsEl = contentEl.createDiv("current-stats");
        currentStatsEl.innerHTML = `
            <h3>Current Graph</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-label">Triples:</span>
                    <span class="stat-value">${this.graph.size()}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Subjects:</span>
                    <span class="stat-value">${this.graph.subjects().size}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Predicates:</span>
                    <span class="stat-value">${this.graph.predicates().size}</span>
                </div>
            </div>
        `;
        // File selection
        const fileSection = contentEl.createDiv("file-selection");
        fileSection.createEl("h3", { text: "Select File" });
        // File input
        const fileInputContainer = fileSection.createDiv("file-input-container");
        // Option 1: Select from vault
        new obsidian_1.Setting(fileInputContainer)
            .setName("Import from vault")
            .setDesc("Select an RDF file from your vault")
            .addButton((button) => {
            button
                .setButtonText("Select File")
                .onClick(() => this.openVaultFilePicker());
        });
        // Option 2: Upload file
        const uploadContainer = fileInputContainer.createDiv("upload-container");
        uploadContainer.createEl("span", { text: "Or upload file: " });
        const fileInput = uploadContainer.createEl("input", { type: "file" });
        fileInput.accept = ".ttl,.nt,.jsonld,.rdf,.n3,.xml";
        fileInput.addEventListener("change", (e) => this.handleFileUpload(e));
        // Selected file display
        const selectedFileEl = fileSection.createDiv("selected-file");
        selectedFileEl.style.display = "none";
        // Format selection
        new obsidian_1.Setting(contentEl)
            .setName("RDF format")
            .setDesc("Specify format (auto-detected if not set)")
            .addDropdown((dropdown) => {
            dropdown
                .addOption("", "Auto-detect")
                .addOption("turtle", "Turtle (.ttl)")
                .addOption("ntriples", "N-Triples (.nt)")
                .addOption("jsonld", "JSON-LD (.jsonld)")
                .addOption("rdfxml", "RDF/XML (.rdf)")
                .setValue(this.options.format || "")
                .onChange((value) => {
                this.options.format = value ? value : undefined;
                this.updatePreview();
            });
        });
        // Merge mode
        new obsidian_1.Setting(contentEl)
            .setName("Import mode")
            .setDesc("How to handle existing data")
            .addDropdown((dropdown) => {
            dropdown
                .addOption("merge", "Merge with existing graph")
                .addOption("replace", "Replace entire graph")
                .setValue(this.options.mergeMode)
                .onChange((value) => {
                this.options.mergeMode = value;
            });
        });
        // Base IRI setting
        new obsidian_1.Setting(contentEl)
            .setName("Base IRI")
            .setDesc("Optional base IRI for relative URIs")
            .addText((text) => {
            text
                .setPlaceholder("https://example.org/data/")
                .setValue(this.options.baseIRI || "")
                .onChange((value) => {
                this.options.baseIRI = value || undefined;
                this.updatePreview();
            });
        });
        // Validation options
        new obsidian_1.Setting(contentEl)
            .setName("Validate input")
            .setDesc("Validate RDF data during import")
            .addToggle((toggle) => {
            toggle.setValue(this.options.validateInput).onChange((value) => {
                this.options.validateInput = value;
            });
        });
        new obsidian_1.Setting(contentEl)
            .setName("Strict mode")
            .setDesc("Fail import on any parsing errors")
            .addToggle((toggle) => {
            toggle.setValue(this.options.strictMode).onChange((value) => {
                this.options.strictMode = value;
            });
        });
        // Memory optimization settings
        contentEl.createEl("h3", { text: "Memory Optimization" });
        new obsidian_1.Setting(contentEl)
            .setName("Use optimized importer")
            .setDesc("Enable memory-optimized importing for large files")
            .addToggle((toggle) => {
            toggle
                .setValue(this.options.useOptimizedImporter ?? true)
                .onChange((value) => {
                this.options.useOptimizedImporter = value;
                this.updateOptimizationSettings();
            });
        });
        const optimizationContainer = contentEl.createDiv("optimization-settings");
        new obsidian_1.Setting(optimizationContainer)
            .setName("Chunk size")
            .setDesc("Number of triples to process at once")
            .addSlider((slider) => {
            slider
                .setLimits(100, 5000, 100)
                .setValue(this.options.chunkSize || 1000)
                .setDynamicTooltip()
                .onChange((value) => {
                this.options.chunkSize = value;
            });
        });
        new obsidian_1.Setting(optimizationContainer)
            .setName("Memory pooling")
            .setDesc("Reuse objects to reduce memory allocation")
            .addToggle((toggle) => {
            toggle
                .setValue(this.options.enableMemoryPooling ?? false)
                .onChange((value) => {
                this.options.enableMemoryPooling = value;
            });
        });
        // Preview section
        const previewContainer = contentEl.createDiv("import-preview");
        previewContainer.createEl("h3", { text: "Preview" });
        const previewEl = previewContainer.createEl("div", {
            cls: "preview-content",
        });
        previewEl.innerHTML = "<em>Select a file to see preview</em>";
        // Buttons
        const buttonContainer = contentEl.createDiv("import-buttons");
        buttonContainer.addClass("modal-button-container");
        // Import button
        const importButton = buttonContainer.createEl("button", {
            text: "Import",
            cls: "mod-cta",
        });
        importButton.disabled = true;
        importButton.onclick = () => this.handleImport();
        // Cancel button
        const cancelButton = buttonContainer.createEl("button", { text: "Cancel" });
        cancelButton.onclick = () => this.close();
        // Store references
        this.updateUI();
        // Add styles
        this.addStyles();
    }
    /**
     * Open vault file picker
     */
    openVaultFilePicker() {
        // Get all files that might be RDF
        const files = this.app.vault
            .getFiles()
            .filter((file) => /\.(ttl|nt|jsonld|rdf|n3|xml)$/i.test(file.extension));
        if (files.length === 0) {
            new obsidian_1.Notice("No RDF files found in vault");
            return;
        }
        // Create a simple file picker (in a real implementation, you might use a more sophisticated picker)
        const picker = document.createElement("select");
        picker.innerHTML = '<option value="">Select file...</option>';
        for (const file of files) {
            const option = document.createElement("option");
            option.value = file.path;
            option.textContent = file.path;
            picker.appendChild(option);
        }
        picker.addEventListener("change", async (e) => {
            const selectedPath = e.target.value;
            if (selectedPath) {
                const file = this.app.vault.getAbstractFileByPath(selectedPath);
                if (file instanceof obsidian_1.TFile) {
                    await this.selectVaultFile(file);
                }
            }
        });
        // Add to modal (in a real implementation, this would be better integrated)
        const container = this.contentEl.querySelector(".file-input-container");
        if (container) {
            container.appendChild(picker);
        }
    }
    /**
     * Handle file upload from computer
     */
    async handleFileUpload(event) {
        const input = event.target;
        const file = input.files?.[0];
        if (file) {
            try {
                const content = await this.readFile(file);
                this.selectedFile = file;
                this.fileContent = content;
                this.updateUI();
                this.updatePreview();
            }
            catch (error) {
                new obsidian_1.Notice(`Error reading file: ${error.message}`);
            }
        }
    }
    /**
     * Select file from vault
     */
    async selectVaultFile(file) {
        try {
            const content = await this.app.vault.read(file);
            this.selectedFile = file;
            this.fileContent = content;
            this.updateUI();
            this.updatePreview();
        }
        catch (error) {
            new obsidian_1.Notice(`Error reading vault file: ${error.message}`);
        }
    }
    /**
     * Read file content
     */
    readFile(file) {
        return new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.onload = (e) => resolve(e.target?.result);
            reader.onerror = (e) => reject(new Error("Failed to read file"));
            reader.readAsText(file);
        });
    }
    /**
     * Update UI state
     */
    updateUI() {
        // Update selected file display
        const selectedFileEl = this.contentEl.querySelector(".selected-file");
        if (selectedFileEl) {
            if (this.selectedFile) {
                const fileName = this.selectedFile instanceof obsidian_1.TFile
                    ? this.selectedFile.name
                    : this.selectedFile.name;
                selectedFileEl.innerHTML = `
                    <div class="selected-file-info">
                        <strong>Selected:</strong> ${fileName}
                        <span class="file-size">(${this.formatFileSize(this.fileContent.length)})</span>
                    </div>
                `;
                selectedFileEl.style.display = "block";
            }
            else {
                selectedFileEl.style.display = "none";
            }
        }
        // Enable/disable import button
        const importButton = this.contentEl.querySelector("button.mod-cta");
        if (importButton) {
            importButton.disabled = !this.selectedFile;
        }
    }
    /**
     * Update preview content
     */
    updatePreview() {
        const previewEl = this.contentEl.querySelector(".preview-content");
        if (!previewEl || !this.fileContent)
            return;
        try {
            const parseOptions = {
                format: this.options.format,
                baseIRI: this.options.baseIRI,
                namespaceManager: this.namespaceManager,
                validateInput: false,
                strictMode: false,
            };
            const result = this.parser.parse(this.fileContent, parseOptions);
            if (result.isSuccess) {
                const parseResult = result.getValue();
                previewEl.innerHTML = `
                    <div class="preview-stats">
                        <h4>Import Preview</h4>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">Triples:</span>
                                <span class="stat-value">${parseResult.tripleCount}</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Subjects:</span>
                                <span class="stat-value">${parseResult.graph.subjects().size}</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Predicates:</span>
                                <span class="stat-value">${parseResult.graph.predicates().size}</span>
                            </div>
                        </div>
                        ${Object.keys(parseResult.namespaces).length > 0
                    ? `
                            <div class="namespaces">
                                <strong>Namespaces found:</strong>
                                <ul>
                                    ${Object.entries(parseResult.namespaces)
                        .slice(0, 5)
                        .map(([prefix, uri]) => `<li>${prefix}: ${uri}</li>`)
                        .join("")}
                                    ${Object.keys(parseResult.namespaces).length > 5 ? "<li>... and more</li>" : ""}
                                </ul>
                            </div>
                        `
                    : ""}
                        ${parseResult.warnings?.length
                    ? `
                            <div class="warnings">
                                <strong>Warnings:</strong>
                                <ul>
                                    ${parseResult.warnings
                        .slice(0, 3)
                        .map((w) => `<li>${w}</li>`)
                        .join("")}
                                    ${parseResult.warnings.length > 3 ? "<li>... and more</li>" : ""}
                                </ul>
                            </div>
                        `
                    : ""}
                    </div>
                    <div class="sample-triples">
                        <h4>Sample Triples</h4>
                        <pre class="triple-sample">${this.formatSampleTriples(parseResult.graph)}</pre>
                    </div>
                `;
            }
            else {
                previewEl.innerHTML = `
                    <div class="preview-error">
                        <strong>Parse Error:</strong> ${result.errorValue()}
                    </div>
                `;
            }
        }
        catch (error) {
            previewEl.innerHTML = `
                <div class="preview-error">
                    <strong>Preview Error:</strong> ${error.message}
                </div>
            `;
        }
    }
    /**
     * Format sample triples for display
     */
    formatSampleTriples(graph) {
        const triples = graph.toArray().slice(0, 5);
        return (triples.map((triple) => triple.toString()).join("\n") +
            (graph.size() > 5 ? "\n... and more" : ""));
    }
    /**
     * Format file size
     */
    formatFileSize(bytes) {
        if (bytes < 1024)
            return bytes + " B";
        if (bytes < 1024 * 1024)
            return Math.round(bytes / 1024) + " KB";
        return Math.round(bytes / (1024 * 1024)) + " MB";
    }
    /**
     * Handle import action
     */
    async handleImport() {
        if (!this.selectedFile || !this.fileContent) {
            new obsidian_1.Notice("No file selected");
            return;
        }
        try {
            let finalGraph;
            let importedTripleCount = 0;
            let importTime = 0;
            if (this.options.useOptimizedImporter &&
                this.fileContent.length > 50000) {
                // Use optimized importer for large files
                const startTime = performance.now();
                // Convert graph to IndexedGraph if needed
                const targetGraph = this.graph instanceof IndexedGraph_1.IndexedGraph
                    ? this.graph
                    : this.convertToIndexedGraph(this.graph);
                if (this.options.mergeMode === "replace") {
                    targetGraph.clear();
                }
                // Configure optimized import options
                const importOptions = {
                    format: this.options.format,
                    baseIRI: this.options.baseIRI,
                    namespaceManager: this.namespaceManager,
                    validateInput: this.options.validateInput,
                    strictMode: this.options.strictMode,
                    chunkSize: this.options.chunkSize || 1000,
                    enableMemoryPooling: this.options.enableMemoryPooling,
                    enableGCHints: true,
                    progressCallback: (processed, total) => {
                        const progress = Math.round((processed / total) * 100);
                        console.log(`Import progress: ${progress}%`);
                    },
                };
                const result = await this.optimizedImporter.importRDF(this.fileContent, targetGraph, importOptions);
                importTime = performance.now() - startTime;
                if (result.isFailure) {
                    new obsidian_1.Notice(`Optimized import failed: ${result.getError()}`);
                    return;
                }
                const memoryReport = result.getValue();
                finalGraph = targetGraph;
                importedTripleCount = targetGraph.size();
                // Show memory optimization results
                const memoryReduction = Math.round((memoryReport.memoryReduction / 1024 / 1024) * 10) / 10;
                if (memoryReduction > 0) {
                    new obsidian_1.Notice(`Memory saved: ${memoryReduction}MB`, 2000);
                }
            }
            else {
                // Use standard parser for small files
                const startTime = performance.now();
                const parseOptions = {
                    format: this.options.format,
                    baseIRI: this.options.baseIRI,
                    namespaceManager: this.namespaceManager,
                    validateInput: this.options.validateInput,
                    strictMode: this.options.strictMode,
                };
                const result = this.parser.parse(this.fileContent, parseOptions);
                if (result.isFailure) {
                    new obsidian_1.Notice(`Import failed: ${result.getError()}`);
                    return;
                }
                const parseResult = result.getValue();
                importTime = performance.now() - startTime;
                // Handle merge mode
                if (this.options.mergeMode === "replace") {
                    finalGraph = parseResult.graph;
                }
                else {
                    // Merge with existing graph
                    finalGraph = this.graph.clone();
                    finalGraph.merge(parseResult.graph);
                }
                importedTripleCount = parseResult.tripleCount;
                if (parseResult.warnings?.length) {
                    new obsidian_1.Notice(`Warnings: ${parseResult.warnings.length} warnings found`, 3000);
                }
                if (parseResult.errors?.length) {
                    new obsidian_1.Notice(`Errors: ${parseResult.errors.length} errors found`, 3000);
                }
            }
            // Call onImport callback
            if (this.onImport) {
                this.onImport(finalGraph, this.options);
            }
            const message = this.options.mergeMode === "replace"
                ? `Replaced graph with ${importedTripleCount} triples in ${importTime.toFixed(0)}ms`
                : `Added ${importedTripleCount} triples to graph in ${importTime.toFixed(0)}ms`;
            new obsidian_1.Notice(message);
            this.close();
        }
        catch (error) {
            new obsidian_1.Notice(`Import error: ${error.message}`);
        }
    }
    /**
     * Convert regular Graph to IndexedGraph
     */
    convertToIndexedGraph(graph) {
        const indexedGraph = new IndexedGraph_1.IndexedGraph();
        indexedGraph.beginBatch();
        for (const triple of graph.toArray()) {
            indexedGraph.add(triple);
        }
        indexedGraph.commitBatch();
        return indexedGraph;
    }
    /**
     * Update optimization settings visibility
     */
    updateOptimizationSettings() {
        const container = this.contentEl.querySelector(".optimization-settings");
        if (container) {
            container.style.display = this.options.useOptimizedImporter
                ? "block"
                : "none";
        }
    }
    /**
     * Add custom styles
     */
    addStyles() {
        const style = document.createElement("style");
        style.textContent = `
            .current-stats, .preview-stats {
                margin-bottom: 20px;
                padding: 15px;
                background: var(--background-secondary);
                border-radius: 6px;
            }
            
            .stats-grid {
                display: flex;
                gap: 20px;
                margin-top: 10px;
            }
            
            .stat-item {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            
            .stat-label {
                font-size: 12px;
                color: var(--text-muted);
                margin-bottom: 2px;
            }
            
            .stat-value {
                font-size: 16px;
                font-weight: 600;
                color: var(--text-normal);
            }
            
            .file-selection {
                margin: 20px 0;
                padding: 15px;
                border: 1px solid var(--background-modifier-border);
                border-radius: 6px;
            }
            
            .file-input-container {
                margin: 10px 0;
            }
            
            .upload-container {
                margin: 10px 0;
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .selected-file {
                margin: 10px 0;
                padding: 10px;
                background: var(--background-primary-alt);
                border-radius: 4px;
            }
            
            .selected-file-info {
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .file-size {
                color: var(--text-muted);
                font-size: 12px;
            }
            
            .preview-content {
                max-height: 300px;
                overflow-y: auto;
                padding: 15px;
                background: var(--background-secondary);
                border-radius: 6px;
            }
            
            .preview-error {
                color: var(--text-error);
                padding: 10px;
                background: var(--background-modifier-error);
                border-radius: 4px;
            }
            
            .namespaces, .warnings {
                margin: 10px 0;
            }
            
            .namespaces ul, .warnings ul {
                margin: 5px 0 0 20px;
                font-size: 12px;
            }
            
            .warnings {
                color: var(--text-warning);
            }
            
            .sample-triples {
                margin-top: 15px;
            }
            
            .triple-sample {
                font-family: var(--font-monospace);
                font-size: 11px;
                background: var(--background-primary);
                padding: 10px;
                border-radius: 4px;
                overflow-x: auto;
                margin: 5px 0 0 0;
            }
            
            .import-buttons {
                display: flex;
                gap: 10px;
                justify-content: flex-end;
                margin-top: 20px;
                padding-top: 20px;
                border-top: 1px solid var(--background-modifier-border);
            }
            
            .modal-button-container button {
                padding: 8px 16px;
                border-radius: 4px;
                border: 1px solid var(--background-modifier-border);
                background: var(--background-primary);
                color: var(--text-normal);
                cursor: pointer;
            }
            
            .modal-button-container button:hover:not(:disabled) {
                background: var(--background-secondary);
            }
            
            .modal-button-container button:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }
            
            .modal-button-container button.mod-cta:not(:disabled) {
                background: var(--interactive-accent);
                color: var(--text-on-accent);
                border-color: var(--interactive-accent);
            }
            
            .modal-button-container button.mod-cta:hover:not(:disabled) {
                background: var(--interactive-accent-hover);
                border-color: var(--interactive-accent-hover);
            }
        `;
        document.head.appendChild(style);
    }
    onClose() {
        const { contentEl } = this;
        contentEl.empty();
    }
}
exports.ImportRDFModal = ImportRDFModal;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vc3JjL3ByZXNlbnRhdGlvbi9tb2RhbHMvSW1wb3J0UkRGTW9kYWwudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7O0FBRUgsdUNBQThEO0FBRTlELDBFQUF1RTtBQUN2RSxvRUFBK0U7QUFFL0Usa0ZBQStFO0FBQy9FLHNHQUdrRTtBQVdsRSxNQUFhLGNBQWUsU0FBUSxnQkFBSztJQWlCdkMsWUFDRSxHQUFRLEVBQ1IsS0FBWSxFQUNaLGdCQUFtQyxFQUNuQyxRQUFpRTtRQUVqRSxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7UUFyQkwsWUFBTyxHQUFrQjtZQUMvQixTQUFTLEVBQUUsT0FBTztZQUNsQixhQUFhLEVBQUUsSUFBSTtZQUNuQixVQUFVLEVBQUUsS0FBSztZQUNqQixvQkFBb0IsRUFBRSxJQUFJO1lBQzFCLFNBQVMsRUFBRSxJQUFJO1lBQ2YsbUJBQW1CLEVBQUUsS0FBSztTQUMzQixDQUFDO1FBSU0saUJBQVksR0FBd0IsSUFBSSxDQUFDO1FBQ3pDLGdCQUFXLEdBQVcsRUFBRSxDQUFDO1FBVS9CLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDO1FBQ25CLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxnQkFBZ0IsSUFBSSxJQUFJLG1DQUFnQixFQUFFLENBQUM7UUFDbkUsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLHFCQUFTLENBQUMsSUFBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7UUFDbkQsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElBQUksaURBQXVCLEVBQUUsQ0FBQztRQUN2RCxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQztJQUMzQixDQUFDO0lBRUQsTUFBTTtRQUNKLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxJQUFJLENBQUM7UUFDM0IsU0FBUyxDQUFDLEtBQUssRUFBRSxDQUFDO1FBRWxCLFFBQVE7UUFDUixTQUFTLENBQUMsUUFBUSxDQUFDLElBQUks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QUFTLENBQUMsYUFBYSxDQUM1Qyx3QkFBd0IsQ0FDVixDQUFDO1FBQ2pCLElBQUksU0FBUyxFQUFFO1lBQ2IsU0FBUyxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxvQkFBb0I7Z0JBQ3pELENBQUMsQ0FBQyxPQUFPO2dCQUNULENBQUMsQ0FBQyxNQUFNLENBQUM7U0FDWjtJQUNILENBQUM7SUFFRDs7T0FFRztJQUNLLFNBQVM7UUFDZixNQUFNLEtBQUssR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBQzlDLEtBQUssQ0FBQyxXQUFXLEdBQUc7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztTQW1KZixDQUFDO1FBRU4sUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUVELE9BQU87UUFDTCxNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQzNCLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUNwQixDQUFDO0NBQ0Y7QUF0eEJELHdDQXN4QkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vc3JjL3ByZXNlbnRhdGlvbi9tb2RhbHMvSW1wb3J0UkRGTW9kYWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNb2RhbCBmb3IgUkRGIEltcG9ydCBmdW5jdGlvbmFsaXR5XG4gKiBBbGxvd3MgdXNlcnMgdG8gaW1wb3J0IFJERiBkYXRhIGZyb20gZmlsZXMgYW5kIG1lcmdlIHdpdGggZXhpc3RpbmcgZ3JhcGhcbiAqL1xuXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBOb3RpY2UsIFRGaWxlIH0gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgeyBHcmFwaCB9IGZyb20gXCIuLi8uLi9kb21haW4vc2VtYW50aWMvY29yZS9HcmFwaFwiO1xuaW1wb3J0IHsgSW5kZXhlZEdyYXBoIH0gZnJvbSBcIi4uLy4uL2RvbWFpbi9zZW1hbnRpYy9jb3JlL0luZGV4ZWRHcmFwaFwiO1xuaW1wb3J0IHsgUkRGUGFyc2VyLCBQYXJzZU9wdGlvbnMgfSBmcm9tIFwiLi4vLi4vYXBwbGljYXRpb24vc2VydmljZXMvUkRGUGFyc2VyXCI7XG5pbXBvcnQgeyBSREZGb3JtYXQgfSBmcm9tIFwiLi4vLi4vYXBwbGljYXRpb24vc2VydmljZXMvUkRGU2VyaWFsaXplclwiO1xuaW1wb3J0IHsgTmFtZXNwYWNlTWFuYWdlciB9IGZyb20gXCIuLi8uLi9hcHBsaWNhdGlvbi9zZXJ2aWNlcy9OYW1lc3BhY2VNYW5hZ2VyXCI7XG5pbXBvcnQge1xuICBNZW1vcnlPcHRpbWl6ZWRJbXBvcnRlcixcbiAgU3RyZWFtaW5nSW1wb3J0T3B0aW9ucyxcbn0gZnJvbSBcIi4uLy4uL2luZnJhc3RydWN0dXJlL3BlcmZvcm1hbmNlL01lbW9yeU9wdGltaXplZEltcG9ydGVyXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1wb3J0T3B0aW9ucyBleHRlbmRzIFN0cmVhbWluZ0ltcG9ydE9wdGlvbnMge1xuICBmb3JtYXQ/OiBSREZGb3JtYXQ7XG4gIG1lcmdlTW9kZTogXCJtZXJnZVwiIHwgXCJyZXBsYWNlXCI7XG4gIHZhbGlkYXRlSW5wdXQ6IGJvb2xlYW47XG4gIHN0cmljdE1vZGU6IGJvb2xlYW47XG4gIGJhc2VJUkk/OiBzdHJpbmc7XG4gIHVzZU9wdGltaXplZEltcG9ydGVyPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGNsYXNzIEltcG9ydFJERk1vZGFsIGV4dGVuZHMgTW9kYWwge1xuICBwcml2YXRlIGdyYXBoOiBHcmFwaDtcbiAgcHJpdmF0ZSBvcHRpb25zOiBJbXBvcnRPcHRpb25zID0ge1xuICAgIG1lcmdlTW9kZTogXCJtZXJnZVwiLFxuICAgIHZhbGlkYXRlSW5wdXQ6IHRydWUsXG4gICAgc3RyaWN0TW9kZTogZmFsc2UsXG4gICAgdXNlT3B0aW1pemVkSW1wb3J0ZXI6IHRydWUsXG4gICAgY2h1bmtTaXplOiAxMDAwLFxuICAgIGVuYWJsZU1lbW9yeVBvb2xpbmc6IGZhbHNlLFxuICB9O1xuICBwcml2YXRlIHBhcnNlcjogUkRGUGFyc2VyO1xuICBwcml2YXRlIG9wdGltaXplZEltcG9ydGVyOiBNZW1vcnlPcHRpbWl6ZWRJbXBvcnRlcjtcbiAgcHJpdmF0ZSBuYW1lc3BhY2VNYW5hZ2VyOiBOYW1lc3BhY2VNYW5hZ2VyO1xuICBwcml2YXRlIHNlbGVjdGVkRmlsZTogRmlsZSB8IFRGaWxlIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgZmlsZUNvbnRlbnQ6IHN0cmluZyA9IFwiXCI7XG4gIHByaXZhdGUgb25JbXBvcnQ/OiAoaW1wb3J0ZWRHcmFwaDogR3JhcGgsIG9wdGlvbnM6IEltcG9ydE9wdGlvbnMpID0+IHZvaWQ7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgYXBwOiBBcHAsXG4gICAgZ3JhcGg6IEdyYXBoLFxuICAgIG5hbWVzcGFjZU1hbmFnZXI/OiBOYW1lc3BhY2VNYW5hZ2VyLFxuICAgIG9uSW1wb3J0PzogKGltcG9ydGVkR3JhcGg6IEdyYXBoLCBvcHRpb25zOiBJbXBvcnRPcHRpb25zKSA9PiB2b2lkLFxuICApIHtcbiAgICBzdXBlcihhcHApO1xuICAgIHRoaXMuZ3JhcGggPSBncmFwaDtcbiAgICB0aGlzLm5hbWVzcGFjZU1hbmFnZXIgPSBuYW1lc3BhY2VNYW5hZ2VyIHx8IG5ldyBOYW1lc3BhY2VNYW5hZ2VyKCk7XG4gICAgdGhpcy5wYXJzZXIgPSBuZXcgUkRGUGFyc2VyKHRoaXMubmFtZXNwYWNlTWFuYWdlcik7XG4gICAgdGhpcy5vcHRpbWl6ZWRJbXBvcnRlciA9IG5ldyBNZW1vcnlPcHRpbWl6ZWRJbXBvcnRlcigpO1xuICAgIHRoaXMub25JbXBvcnQgPSBvbkltcG9ydDtcbiAgfVxuXG4gIG9uT3BlbigpIHtcbiAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICBjb250ZW50RWwuZW1wdHkoKTtcblxuICAgIC8vIFRpdGxlXG4gICAgY29udGVudEVsLmNyZWF0ZUVsKFwiaDJcIiwgeyB0ZXh0OiBcIkltcG9ydCBSREYgRGF0YVwiIH0pO1xuXG4gICAgLy8gQ3VycmVudCBncmFwaCBzdGF0aXN0aWNzXG4gICAgY29uc3QgY3VycmVudFN0YXRzRWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KFwiY3VycmVudC1zdGF0c1wiKTtcbiAgICBjdXJyZW50U3RhdHNFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICA8aDM+Q3VycmVudCBHcmFwaDwvaDM+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdHMtZ3JpZFwiPlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWxhYmVsXCI+VHJpcGxlczo8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC12YWx1ZVwiPiR7dGhpcy5ncmFwaC5zaXplKCl9PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWxhYmVsXCI+U3ViamVjdHM6PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtdmFsdWVcIj4ke3RoaXMuZ3JhcGguc3ViamVjdHMoKS5zaXplfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdC1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1sYWJlbFwiPlByZWRpY2F0ZXM6PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtdmFsdWVcIj4ke3RoaXMuZ3JhcGgucHJlZGljYXRlcygpLnNpemV9PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgIGA7XG5cbiAgICAvLyBGaWxlIHNlbGVjdGlvblxuICAgIGNvbnN0IGZpbGVTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZURpdihcImZpbGUtc2VsZWN0aW9uXCIpO1xuICAgIGZpbGVTZWN0aW9uLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIlNlbGVjdCBGaWxlXCIgfSk7XG5cbiAgICAvLyBGaWxlIGlucHV0XG4gICAgY29uc3QgZmlsZUlucHV0Q29udGFpbmVyID0gZmlsZVNlY3Rpb24uY3JlYXRlRGl2KFwiZmlsZS1pbnB1dC1jb250YWluZXJcIik7XG5cbiAgICAvLyBPcHRpb24gMTogU2VsZWN0IGZyb20gdmF1bHRcbiAgICBuZXcgU2V0dGluZyhmaWxlSW5wdXRDb250YWluZXIpXG4gICAgICAuc2V0TmFtZShcIkltcG9ydCBmcm9tIHZhdWx0XCIpXG4gICAgICAuc2V0RGVzYyhcIlNlbGVjdCBhbiBSREYgZmlsZSBmcm9tIHlvdXIgdmF1bHRcIilcbiAgICAgIC5hZGRCdXR0b24oKGJ1dHRvbikgPT4ge1xuICAgICAgICBidXR0b25cbiAgICAgICAgICAuc2V0QnV0dG9uVGV4dChcIlNlbGVjdCBGaWxlXCIpXG4gICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5vcGVuVmF1bHRGaWxlUGlja2VyKCkpO1xuICAgICAgfSk7XG5cbiAgICAvLyBPcHRpb24gMjogVXBsb2FkIGZpbGVcbiAgICBjb25zdCB1cGxvYWRDb250YWluZXIgPSBmaWxlSW5wdXRDb250YWluZXIuY3JlYXRlRGl2KFwidXBsb2FkLWNvbnRhaW5lclwiKTtcbiAgICB1cGxvYWRDb250YWluZXIuY3JlYXRlRWwoXCJzcGFuXCIsIHsgdGV4dDogXCJPciB1cGxvYWQgZmlsZTogXCIgfSk7XG5cbiAgICBjb25zdCBmaWxlSW5wdXQgPSB1cGxvYWRDb250YWluZXIuY3JlYXRlRWwoXCJpbnB1dFwiLCB7IHR5cGU6IFwiZmlsZVwiIH0pO1xuICAgIGZpbGVJbnB1dC5hY2NlcHQgPSBcIi50dGwsLm50LC5qc29ubGQsLnJkZiwubjMsLnhtbFwiO1xuICAgIGZpbGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsIChlKSA9PiB0aGlzLmhhbmRsZUZpbGVVcGxvYWQoZSkpO1xuXG4gICAgLy8gU2VsZWN0ZWQgZmlsZSBkaXNwbGF5XG4gICAgY29uc3Qgc2VsZWN0ZWRGaWxlRWwgPSBmaWxlU2VjdGlvbi5jcmVhdGVEaXYoXCJzZWxlY3RlZC1maWxlXCIpO1xuICAgIHNlbGVjdGVkRmlsZUVsLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuICAgIC8vIEZvcm1hdCBzZWxlY3Rpb25cbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZShcIlJERiBmb3JtYXRcIilcbiAgICAgIC5zZXREZXNjKFwiU3BlY2lmeSBmb3JtYXQgKGF1dG8tZGV0ZWN0ZWQgaWYgbm90IHNldClcIilcbiAgICAgIC5hZGREcm9wZG93bigoZHJvcGRvd24pID0+IHtcbiAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAuYWRkT3B0aW9uKFwiXCIsIFwiQXV0by1kZXRlY3RcIilcbiAgICAgICAgICAuYWRkT3B0aW9uKFwidHVydGxlXCIsIFwiVHVydGxlICgudHRsKVwiKVxuICAgICAgICAgIC5hZGRPcHRpb24oXCJudHJpcGxlc1wiLCBcIk4tVHJpcGxlcyAoLm50KVwiKVxuICAgICAgICAgIC5hZGRPcHRpb24oXCJqc29ubGRcIiwgXCJKU09OLUxEICguanNvbmxkKVwiKVxuICAgICAgICAgIC5hZGRPcHRpb24oXCJyZGZ4bWxcIiwgXCJSREYvWE1MICgucmRmKVwiKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLm9wdGlvbnMuZm9ybWF0IHx8IFwiXCIpXG4gICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmZvcm1hdCA9IHZhbHVlID8gKHZhbHVlIGFzIFJERkZvcm1hdCkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVByZXZpZXcoKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgLy8gTWVyZ2UgbW9kZVxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKFwiSW1wb3J0IG1vZGVcIilcbiAgICAgIC5zZXREZXNjKFwiSG93IHRvIGhhbmRsZSBleGlzdGluZyBkYXRhXCIpXG4gICAgICAuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG4gICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgLmFkZE9wdGlvbihcIm1lcmdlXCIsIFwiTWVyZ2Ugd2l0aCBleGlzdGluZyBncmFwaFwiKVxuICAgICAgICAgIC5hZGRPcHRpb24oXCJyZXBsYWNlXCIsIFwiUmVwbGFjZSBlbnRpcmUgZ3JhcGhcIilcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5vcHRpb25zLm1lcmdlTW9kZSlcbiAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMubWVyZ2VNb2RlID0gdmFsdWUgYXMgXCJtZXJnZVwiIHwgXCJyZXBsYWNlXCI7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIC8vIEJhc2UgSVJJIHNldHRpbmdcbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZShcIkJhc2UgSVJJXCIpXG4gICAgICAuc2V0RGVzYyhcIk9wdGlvbmFsIGJhc2UgSVJJIGZvciByZWxhdGl2ZSBVUklzXCIpXG4gICAgICAuYWRkVGV4dCgodGV4dCkgPT4ge1xuICAgICAgICB0ZXh0XG4gICAgICAgICAgLnNldFBsYWNlaG9sZGVyKFwiaHR0cHM6Ly9leGFtcGxlLm9yZy9kYXRhL1wiKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLm9wdGlvbnMuYmFzZUlSSSB8fCBcIlwiKVxuICAgICAgICAgIC5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5iYXNlSVJJID0gdmFsdWUgfHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgdGhpcy51cGRhdGVQcmV2aWV3KCk7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIC8vIFZhbGlkYXRpb24gb3B0aW9uc1xuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKFwiVmFsaWRhdGUgaW5wdXRcIilcbiAgICAgIC5zZXREZXNjKFwiVmFsaWRhdGUgUkRGIGRhdGEgZHVyaW5nIGltcG9ydFwiKVxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgIHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLm9wdGlvbnMudmFsaWRhdGVJbnB1dCkub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLnZhbGlkYXRlSW5wdXQgPSB2YWx1ZTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgIC5zZXROYW1lKFwiU3RyaWN0IG1vZGVcIilcbiAgICAgIC5zZXREZXNjKFwiRmFpbCBpbXBvcnQgb24gYW55IHBhcnNpbmcgZXJyb3JzXCIpXG4gICAgICAuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcbiAgICAgICAgdG9nZ2xlLnNldFZhbHVlKHRoaXMub3B0aW9ucy5zdHJpY3RNb2RlKS5vbkNoYW5nZSgodmFsdWUpID0+IHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMuc3RyaWN0TW9kZSA9IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgLy8gTWVtb3J5IG9wdGltaXphdGlvbiBzZXR0aW5nc1xuICAgIGNvbnRlbnRFbC5jcmVhdGVFbChcImgzXCIsIHsgdGV4dDogXCJNZW1vcnkgT3B0aW1pemF0aW9uXCIgfSk7XG5cbiAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAuc2V0TmFtZShcIlVzZSBvcHRpbWl6ZWQgaW1wb3J0ZXJcIilcbiAgICAgIC5zZXREZXNjKFwiRW5hYmxlIG1lbW9yeS1vcHRpbWl6ZWQgaW1wb3J0aW5nIGZvciBsYXJnZSBmaWxlc1wiKVxuICAgICAgLmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG4gICAgICAgIHRvZ2dsZVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLm9wdGlvbnMudXNlT3B0aW1pemVkSW1wb3J0ZXIgPz8gdHJ1ZSlcbiAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMudXNlT3B0aW1pemVkSW1wb3J0ZXIgPSB2YWx1ZTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlT3B0aW1pemF0aW9uU2V0dGluZ3MoKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgY29uc3Qgb3B0aW1pemF0aW9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdihcIm9wdGltaXphdGlvbi1zZXR0aW5nc1wiKTtcblxuICAgIG5ldyBTZXR0aW5nKG9wdGltaXphdGlvbkNvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKFwiQ2h1bmsgc2l6ZVwiKVxuICAgICAgLnNldERlc2MoXCJOdW1iZXIgb2YgdHJpcGxlcyB0byBwcm9jZXNzIGF0IG9uY2VcIilcbiAgICAgIC5hZGRTbGlkZXIoKHNsaWRlcikgPT4ge1xuICAgICAgICBzbGlkZXJcbiAgICAgICAgICAuc2V0TGltaXRzKDEwMCwgNTAwMCwgMTAwKVxuICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLm9wdGlvbnMuY2h1bmtTaXplIHx8IDEwMDApXG4gICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcbiAgICAgICAgICAub25DaGFuZ2UoKHZhbHVlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMuY2h1bmtTaXplID0gdmFsdWU7XG4gICAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgIG5ldyBTZXR0aW5nKG9wdGltaXphdGlvbkNvbnRhaW5lcilcbiAgICAgIC5zZXROYW1lKFwiTWVtb3J5IHBvb2xpbmdcIilcbiAgICAgIC5zZXREZXNjKFwiUmV1c2Ugb2JqZWN0cyB0byByZWR1Y2UgbWVtb3J5IGFsbG9jYXRpb25cIilcbiAgICAgIC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuICAgICAgICB0b2dnbGVcbiAgICAgICAgICAuc2V0VmFsdWUodGhpcy5vcHRpb25zLmVuYWJsZU1lbW9yeVBvb2xpbmcgPz8gZmFsc2UpXG4gICAgICAgICAgLm9uQ2hhbmdlKCh2YWx1ZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLmVuYWJsZU1lbW9yeVBvb2xpbmcgPSB2YWx1ZTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgLy8gUHJldmlldyBzZWN0aW9uXG4gICAgY29uc3QgcHJldmlld0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoXCJpbXBvcnQtcHJldmlld1wiKTtcbiAgICBwcmV2aWV3Q29udGFpbmVyLmNyZWF0ZUVsKFwiaDNcIiwgeyB0ZXh0OiBcIlByZXZpZXdcIiB9KTtcblxuICAgIGNvbnN0IHByZXZpZXdFbCA9IHByZXZpZXdDb250YWluZXIuY3JlYXRlRWwoXCJkaXZcIiwge1xuICAgICAgY2xzOiBcInByZXZpZXctY29udGVudFwiLFxuICAgIH0pO1xuICAgIHByZXZpZXdFbC5pbm5lckhUTUwgPSBcIjxlbT5TZWxlY3QgYSBmaWxlIHRvIHNlZSBwcmV2aWV3PC9lbT5cIjtcblxuICAgIC8vIEJ1dHRvbnNcbiAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KFwiaW1wb3J0LWJ1dHRvbnNcIik7XG4gICAgYnV0dG9uQ29udGFpbmVyLmFkZENsYXNzKFwibW9kYWwtYnV0dG9uLWNvbnRhaW5lclwiKTtcblxuICAgIC8vIEltcG9ydCBidXR0b25cbiAgICBjb25zdCBpbXBvcnRCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoXCJidXR0b25cIiwge1xuICAgICAgdGV4dDogXCJJbXBvcnRcIixcbiAgICAgIGNsczogXCJtb2QtY3RhXCIsXG4gICAgfSk7XG4gICAgaW1wb3J0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcbiAgICBpbXBvcnRCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuaGFuZGxlSW1wb3J0KCk7XG5cbiAgICAvLyBDYW5jZWwgYnV0dG9uXG4gICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKFwiYnV0dG9uXCIsIHsgdGV4dDogXCJDYW5jZWxcIiB9KTtcbiAgICBjYW5jZWxCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuY2xvc2UoKTtcblxuICAgIC8vIFN0b3JlIHJlZmVyZW5jZXNcbiAgICB0aGlzLnVwZGF0ZVVJKCk7XG5cbiAgICAvLyBBZGQgc3R5bGVzXG4gICAgdGhpcy5hZGRTdHlsZXMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPcGVuIHZhdWx0IGZpbGUgcGlja2VyXG4gICAqL1xuICBwcml2YXRlIG9wZW5WYXVsdEZpbGVQaWNrZXIoKTogdm9pZCB7XG4gICAgLy8gR2V0IGFsbCBmaWxlcyB0aGF0IG1pZ2h0IGJlIFJERlxuICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHRcbiAgICAgIC5nZXRGaWxlcygpXG4gICAgICAuZmlsdGVyKChmaWxlKSA9PiAvXFwuKHR0bHxudHxqc29ubGR8cmRmfG4zfHhtbCkkL2kudGVzdChmaWxlLmV4dGVuc2lvbikpO1xuXG4gICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgbmV3IE5vdGljZShcIk5vIFJERiBmaWxlcyBmb3VuZCBpbiB2YXVsdFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDcmVhdGUgYSBzaW1wbGUgZmlsZSBwaWNrZXIgKGluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgeW91IG1pZ2h0IHVzZSBhIG1vcmUgc29waGlzdGljYXRlZCBwaWNrZXIpXG4gICAgY29uc3QgcGlja2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKTtcbiAgICBwaWNrZXIuaW5uZXJIVE1MID0gJzxvcHRpb24gdmFsdWU9XCJcIj5TZWxlY3QgZmlsZS4uLjwvb3B0aW9uPic7XG5cbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgZmlsZXMpIHtcbiAgICAgIGNvbnN0IG9wdGlvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIik7XG4gICAgICBvcHRpb24udmFsdWUgPSBmaWxlLnBhdGg7XG4gICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBmaWxlLnBhdGg7XG4gICAgICBwaWNrZXIuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICB9XG5cbiAgICBwaWNrZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCBhc3luYyAoZSkgPT4ge1xuICAgICAgY29uc3Qgc2VsZWN0ZWRQYXRoID0gKGUudGFyZ2V0IGFzIEhUTUxTZWxlY3RFbGVtZW50KS52YWx1ZTtcbiAgICAgIGlmIChzZWxlY3RlZFBhdGgpIHtcbiAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzZWxlY3RlZFBhdGgpO1xuICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5zZWxlY3RWYXVsdEZpbGUoZmlsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIEFkZCB0byBtb2RhbCAoaW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB0aGlzIHdvdWxkIGJlIGJldHRlciBpbnRlZ3JhdGVkKVxuICAgIGNvbnN0IGNvbnRhaW5lciA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXCIuZmlsZS1pbnB1dC1jb250YWluZXJcIik7XG4gICAgaWYgKGNvbnRhaW5lcikge1xuICAgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKHBpY2tlcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBmaWxlIHVwbG9hZCBmcm9tIGNvbXB1dGVyXG4gICAqL1xuICBwcml2YXRlIGFzeW5jIGhhbmRsZUZpbGVVcGxvYWQoZXZlbnQ6IEV2ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3QgaW5wdXQgPSBldmVudC50YXJnZXQgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgICBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXM/LlswXTtcblxuICAgIGlmIChmaWxlKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5yZWFkRmlsZShmaWxlKTtcbiAgICAgICAgdGhpcy5zZWxlY3RlZEZpbGUgPSBmaWxlO1xuICAgICAgICB0aGlzLmZpbGVDb250ZW50ID0gY29udGVudDtcbiAgICAgICAgdGhpcy51cGRhdGVVSSgpO1xuICAgICAgICB0aGlzLnVwZGF0ZVByZXZpZXcoKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIHJlYWRpbmcgZmlsZTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3QgZmlsZSBmcm9tIHZhdWx0XG4gICAqL1xuICBwcml2YXRlIGFzeW5jIHNlbGVjdFZhdWx0RmlsZShmaWxlOiBURmlsZSk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQucmVhZChmaWxlKTtcbiAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZmlsZTtcbiAgICAgIHRoaXMuZmlsZUNvbnRlbnQgPSBjb250ZW50O1xuICAgICAgdGhpcy51cGRhdGVVSSgpO1xuICAgICAgdGhpcy51cGRhdGVQcmV2aWV3KCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIG5ldyBOb3RpY2UoYEVycm9yIHJlYWRpbmcgdmF1bHQgZmlsZTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWFkIGZpbGUgY29udGVudFxuICAgKi9cbiAgcHJpdmF0ZSByZWFkRmlsZShmaWxlOiBGaWxlKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4gcmVzb2x2ZShlLnRhcmdldD8ucmVzdWx0IGFzIHN0cmluZyk7XG4gICAgICByZWFkZXIub25lcnJvciA9IChlKSA9PiByZWplY3QobmV3IEVycm9yKFwiRmFpbGVkIHRvIHJlYWQgZmlsZVwiKSk7XG4gICAgICByZWFkZXIucmVhZEFzVGV4dChmaWxlKTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgVUkgc3RhdGVcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlVUkoKTogdm9pZCB7XG4gICAgLy8gVXBkYXRlIHNlbGVjdGVkIGZpbGUgZGlzcGxheVxuICAgIGNvbnN0IHNlbGVjdGVkRmlsZUVsID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLnNlbGVjdGVkLWZpbGVcIixcbiAgICApIGFzIEhUTUxFbGVtZW50O1xuICAgIGlmIChzZWxlY3RlZEZpbGVFbCkge1xuICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRGaWxlKSB7XG4gICAgICAgIGNvbnN0IGZpbGVOYW1lID1cbiAgICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZSBpbnN0YW5jZW9mIFRGaWxlXG4gICAgICAgICAgICA/IHRoaXMuc2VsZWN0ZWRGaWxlLm5hbWVcbiAgICAgICAgICAgIDogdGhpcy5zZWxlY3RlZEZpbGUubmFtZTtcblxuICAgICAgICBzZWxlY3RlZEZpbGVFbC5pbm5lckhUTUwgPSBgXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZWxlY3RlZC1maWxlLWluZm9cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+U2VsZWN0ZWQ6PC9zdHJvbmc+ICR7ZmlsZU5hbWV9XG4gICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImZpbGUtc2l6ZVwiPigke3RoaXMuZm9ybWF0RmlsZVNpemUodGhpcy5maWxlQ29udGVudC5sZW5ndGgpfSk8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIGA7XG4gICAgICAgIHNlbGVjdGVkRmlsZUVsLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxlY3RlZEZpbGVFbC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCI7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRW5hYmxlL2Rpc2FibGUgaW1wb3J0IGJ1dHRvblxuICAgIGNvbnN0IGltcG9ydEJ1dHRvbiA9IHRoaXMuY29udGVudEVsLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcImJ1dHRvbi5tb2QtY3RhXCIsXG4gICAgKSBhcyBIVE1MQnV0dG9uRWxlbWVudDtcbiAgICBpZiAoaW1wb3J0QnV0dG9uKSB7XG4gICAgICBpbXBvcnRCdXR0b24uZGlzYWJsZWQgPSAhdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBwcmV2aWV3IGNvbnRlbnRcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlUHJldmlldygpOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2aWV3RWwgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIucHJldmlldy1jb250ZW50XCIsXG4gICAgKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoIXByZXZpZXdFbCB8fCAhdGhpcy5maWxlQ29udGVudCkgcmV0dXJuO1xuXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBhcnNlT3B0aW9uczogUGFyc2VPcHRpb25zID0ge1xuICAgICAgICBmb3JtYXQ6IHRoaXMub3B0aW9ucy5mb3JtYXQsXG4gICAgICAgIGJhc2VJUkk6IHRoaXMub3B0aW9ucy5iYXNlSVJJLFxuICAgICAgICBuYW1lc3BhY2VNYW5hZ2VyOiB0aGlzLm5hbWVzcGFjZU1hbmFnZXIsXG4gICAgICAgIHZhbGlkYXRlSW5wdXQ6IGZhbHNlLCAvLyBEb24ndCB2YWxpZGF0ZSBmb3IgcHJldmlld1xuICAgICAgICBzdHJpY3RNb2RlOiBmYWxzZSxcbiAgICAgIH07XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucGFyc2VyLnBhcnNlKHRoaXMuZmlsZUNvbnRlbnQsIHBhcnNlT3B0aW9ucyk7XG5cbiAgICAgIGlmIChyZXN1bHQuaXNTdWNjZXNzKSB7XG4gICAgICAgIGNvbnN0IHBhcnNlUmVzdWx0ID0gcmVzdWx0LmdldFZhbHVlKCk7XG5cbiAgICAgICAgcHJldmlld0VsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByZXZpZXctc3RhdHNcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxoND5JbXBvcnQgUHJldmlldzwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdHMtZ3JpZFwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWxhYmVsXCI+VHJpcGxlczo8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC12YWx1ZVwiPiR7cGFyc2VSZXN1bHQudHJpcGxlQ291bnR9PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWxhYmVsXCI+U3ViamVjdHM6PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtdmFsdWVcIj4ke3BhcnNlUmVzdWx0LmdyYXBoLnN1YmplY3RzKCkuc2l6ZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtbGFiZWxcIj5QcmVkaWNhdGVzOjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LXZhbHVlXCI+JHtwYXJzZVJlc3VsdC5ncmFwaC5wcmVkaWNhdGVzKCkuc2l6ZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICR7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHBhcnNlUmVzdWx0Lm5hbWVzcGFjZXMpLmxlbmd0aCA+IDBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA/IGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwibmFtZXNwYWNlc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPk5hbWVzcGFjZXMgZm91bmQ6PC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7T2JqZWN0LmVudHJpZXMocGFyc2VSZXN1bHQubmFtZXNwYWNlcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIDUpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKFtwcmVmaXgsIHVyaV0pID0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBgPGxpPiR7cHJlZml4fTogJHt1cml9PC9saT5gLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5qb2luKFwiXCIpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtPYmplY3Qua2V5cyhwYXJzZVJlc3VsdC5uYW1lc3BhY2VzKS5sZW5ndGggPiA1ID8gXCI8bGk+Li4uIGFuZCBtb3JlPC9saT5cIiA6IFwiXCJ9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvdWw+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICBgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgOiBcIlwiXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAke1xuICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZVJlc3VsdC53YXJuaW5ncz8ubGVuZ3RoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPyBgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cIndhcm5pbmdzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+V2FybmluZ3M6PC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDx1bD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR7cGFyc2VSZXN1bHQud2FybmluZ3NcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIDMpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKHcpID0+IGA8bGk+JHt3fTwvbGk+YClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oXCJcIil9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAke3BhcnNlUmVzdWx0Lndhcm5pbmdzLmxlbmd0aCA+IDMgPyBcIjxsaT4uLi4gYW5kIG1vcmU8L2xpPlwiIDogXCJcIn1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzYW1wbGUtdHJpcGxlc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGg0PlNhbXBsZSBUcmlwbGVzPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwcmUgY2xhc3M9XCJ0cmlwbGUtc2FtcGxlXCI+JHt0aGlzLmZvcm1hdFNhbXBsZVRyaXBsZXMocGFyc2VSZXN1bHQuZ3JhcGgpfTwvcHJlPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBgO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJldmlld0VsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInByZXZpZXctZXJyb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+UGFyc2UgRXJyb3I6PC9zdHJvbmc+ICR7cmVzdWx0LmVycm9yVmFsdWUoKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgYDtcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgcHJldmlld0VsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJldmlldy1lcnJvclwiPlxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlByZXZpZXcgRXJyb3I6PC9zdHJvbmc+ICR7ZXJyb3IubWVzc2FnZX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGA7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBzYW1wbGUgdHJpcGxlcyBmb3IgZGlzcGxheVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRTYW1wbGVUcmlwbGVzKGdyYXBoOiBHcmFwaCk6IHN0cmluZyB7XG4gICAgY29uc3QgdHJpcGxlcyA9IGdyYXBoLnRvQXJyYXkoKS5zbGljZSgwLCA1KTtcbiAgICByZXR1cm4gKFxuICAgICAgdHJpcGxlcy5tYXAoKHRyaXBsZSkgPT4gdHJpcGxlLnRvU3RyaW5nKCkpLmpvaW4oXCJcXG5cIikgK1xuICAgICAgKGdyYXBoLnNpemUoKSA+IDUgPyBcIlxcbi4uLiBhbmQgbW9yZVwiIDogXCJcIilcbiAgICApO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBmaWxlIHNpemVcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0RmlsZVNpemUoYnl0ZXM6IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKGJ5dGVzIDwgMTAyNCkgcmV0dXJuIGJ5dGVzICsgXCIgQlwiO1xuICAgIGlmIChieXRlcyA8IDEwMjQgKiAxMDI0KSByZXR1cm4gTWF0aC5yb3VuZChieXRlcyAvIDEwMjQpICsgXCIgS0JcIjtcbiAgICByZXR1cm4gTWF0aC5yb3VuZChieXRlcyAvICgxMDI0ICogMTAyNCkpICsgXCIgTUJcIjtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgaW1wb3J0IGFjdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBhc3luYyBoYW5kbGVJbXBvcnQoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKCF0aGlzLnNlbGVjdGVkRmlsZSB8fCAhdGhpcy5maWxlQ29udGVudCkge1xuICAgICAgbmV3IE5vdGljZShcIk5vIGZpbGUgc2VsZWN0ZWRcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIGxldCBmaW5hbEdyYXBoOiBHcmFwaDtcbiAgICAgIGxldCBpbXBvcnRlZFRyaXBsZUNvdW50ID0gMDtcbiAgICAgIGxldCBpbXBvcnRUaW1lID0gMDtcblxuICAgICAgaWYgKFxuICAgICAgICB0aGlzLm9wdGlvbnMudXNlT3B0aW1pemVkSW1wb3J0ZXIgJiZcbiAgICAgICAgdGhpcy5maWxlQ29udGVudC5sZW5ndGggPiA1MDAwMFxuICAgICAgKSB7XG4gICAgICAgIC8vIFVzZSBvcHRpbWl6ZWQgaW1wb3J0ZXIgZm9yIGxhcmdlIGZpbGVzXG4gICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IHBlcmZvcm1hbmNlLm5vdygpO1xuXG4gICAgICAgIC8vIENvbnZlcnQgZ3JhcGggdG8gSW5kZXhlZEdyYXBoIGlmIG5lZWRlZFxuICAgICAgICBjb25zdCB0YXJnZXRHcmFwaCA9XG4gICAgICAgICAgdGhpcy5ncmFwaCBpbnN0YW5jZW9mIEluZGV4ZWRHcmFwaFxuICAgICAgICAgICAgPyB0aGlzLmdyYXBoXG4gICAgICAgICAgICA6IHRoaXMuY29udmVydFRvSW5kZXhlZEdyYXBoKHRoaXMuZ3JhcGgpO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWVyZ2VNb2RlID09PSBcInJlcGxhY2VcIikge1xuICAgICAgICAgIHRhcmdldEdyYXBoLmNsZWFyKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDb25maWd1cmUgb3B0aW1pemVkIGltcG9ydCBvcHRpb25zXG4gICAgICAgIGNvbnN0IGltcG9ydE9wdGlvbnM6IFN0cmVhbWluZ0ltcG9ydE9wdGlvbnMgPSB7XG4gICAgICAgICAgZm9ybWF0OiB0aGlzLm9wdGlvbnMuZm9ybWF0LFxuICAgICAgICAgIGJhc2VJUkk6IHRoaXMub3B0aW9ucy5iYXNlSVJJLFxuICAgICAgICAgIG5hbWVzcGFjZU1hbmFnZXI6IHRoaXMubmFtZXNwYWNlTWFuYWdlcixcbiAgICAgICAgICB2YWxpZGF0ZUlucHV0OiB0aGlzLm9wdGlvbnMudmFsaWRhdGVJbnB1dCxcbiAgICAgICAgICBzdHJpY3RNb2RlOiB0aGlzLm9wdGlvbnMuc3RyaWN0TW9kZSxcbiAgICAgICAgICBjaHVua1NpemU6IHRoaXMub3B0aW9ucy5jaHVua1NpemUgfHwgMTAwMCxcbiAgICAgICAgICBlbmFibGVNZW1vcnlQb29saW5nOiB0aGlzLm9wdGlvbnMuZW5hYmxlTWVtb3J5UG9vbGluZyxcbiAgICAgICAgICBlbmFibGVHQ0hpbnRzOiB0cnVlLFxuICAgICAgICAgIHByb2dyZXNzQ2FsbGJhY2s6IChwcm9jZXNzZWQsIHRvdGFsKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgucm91bmQoKHByb2Nlc3NlZCAvIHRvdGFsKSAqIDEwMCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhgSW1wb3J0IHByb2dyZXNzOiAke3Byb2dyZXNzfSVgKTtcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMub3B0aW1pemVkSW1wb3J0ZXIuaW1wb3J0UkRGKFxuICAgICAgICAgIHRoaXMuZmlsZUNvbnRlbnQsXG4gICAgICAgICAgdGFyZ2V0R3JhcGgsXG4gICAgICAgICAgaW1wb3J0T3B0aW9ucyxcbiAgICAgICAgKTtcblxuICAgICAgICBpbXBvcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XG5cbiAgICAgICAgaWYgKHJlc3VsdC5pc0ZhaWx1cmUpIHtcbiAgICAgICAgICBuZXcgTm90aWNlKGBPcHRpbWl6ZWQgaW1wb3J0IGZhaWxlZDogJHtyZXN1bHQuZ2V0RXJyb3IoKX1gKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBtZW1vcnlSZXBvcnQgPSByZXN1bHQuZ2V0VmFsdWUoKTtcbiAgICAgICAgZmluYWxHcmFwaCA9IHRhcmdldEdyYXBoO1xuICAgICAgICBpbXBvcnRlZFRyaXBsZUNvdW50ID0gdGFyZ2V0R3JhcGguc2l6ZSgpO1xuXG4gICAgICAgIC8vIFNob3cgbWVtb3J5IG9wdGltaXphdGlvbiByZXN1bHRzXG4gICAgICAgIGNvbnN0IG1lbW9yeVJlZHVjdGlvbiA9XG4gICAgICAgICAgTWF0aC5yb3VuZCgobWVtb3J5UmVwb3J0Lm1lbW9yeVJlZHVjdGlvbiAvIDEwMjQgLyAxMDI0KSAqIDEwKSAvIDEwO1xuICAgICAgICBpZiAobWVtb3J5UmVkdWN0aW9uID4gMCkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoYE1lbW9yeSBzYXZlZDogJHttZW1vcnlSZWR1Y3Rpb259TUJgLCAyMDAwKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gVXNlIHN0YW5kYXJkIHBhcnNlciBmb3Igc21hbGwgZmlsZXNcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XG5cbiAgICAgICAgY29uc3QgcGFyc2VPcHRpb25zOiBQYXJzZU9wdGlvbnMgPSB7XG4gICAgICAgICAgZm9ybWF0OiB0aGlzLm9wdGlvbnMuZm9ybWF0LFxuICAgICAgICAgIGJhc2VJUkk6IHRoaXMub3B0aW9ucy5iYXNlSVJJLFxuICAgICAgICAgIG5hbWVzcGFjZU1hbmFnZXI6IHRoaXMubmFtZXNwYWNlTWFuYWdlcixcbiAgICAgICAgICB2YWxpZGF0ZUlucHV0OiB0aGlzLm9wdGlvbnMudmFsaWRhdGVJbnB1dCxcbiAgICAgICAgICBzdHJpY3RNb2RlOiB0aGlzLm9wdGlvbnMuc3RyaWN0TW9kZSxcbiAgICAgICAgfTtcblxuICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnBhcnNlci5wYXJzZSh0aGlzLmZpbGVDb250ZW50LCBwYXJzZU9wdGlvbnMpO1xuXG4gICAgICAgIGlmIChyZXN1bHQuaXNGYWlsdXJlKSB7XG4gICAgICAgICAgbmV3IE5vdGljZShgSW1wb3J0IGZhaWxlZDogJHtyZXN1bHQuZ2V0RXJyb3IoKX1gKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBwYXJzZVJlc3VsdCA9IHJlc3VsdC5nZXRWYWx1ZSgpO1xuICAgICAgICBpbXBvcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCkgLSBzdGFydFRpbWU7XG5cbiAgICAgICAgLy8gSGFuZGxlIG1lcmdlIG1vZGVcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5tZXJnZU1vZGUgPT09IFwicmVwbGFjZVwiKSB7XG4gICAgICAgICAgZmluYWxHcmFwaCA9IHBhcnNlUmVzdWx0LmdyYXBoO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE1lcmdlIHdpdGggZXhpc3RpbmcgZ3JhcGhcbiAgICAgICAgICBmaW5hbEdyYXBoID0gdGhpcy5ncmFwaC5jbG9uZSgpO1xuICAgICAgICAgIGZpbmFsR3JhcGgubWVyZ2UocGFyc2VSZXN1bHQuZ3JhcGgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaW1wb3J0ZWRUcmlwbGVDb3VudCA9IHBhcnNlUmVzdWx0LnRyaXBsZUNvdW50O1xuXG4gICAgICAgIGlmIChwYXJzZVJlc3VsdC53YXJuaW5ncz8ubGVuZ3RoKSB7XG4gICAgICAgICAgbmV3IE5vdGljZShcbiAgICAgICAgICAgIGBXYXJuaW5nczogJHtwYXJzZVJlc3VsdC53YXJuaW5ncy5sZW5ndGh9IHdhcm5pbmdzIGZvdW5kYCxcbiAgICAgICAgICAgIDMwMDAsXG4gICAgICAgICAgKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwYXJzZVJlc3VsdC5lcnJvcnM/Lmxlbmd0aCkge1xuICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yczogJHtwYXJzZVJlc3VsdC5lcnJvcnMubGVuZ3RofSBlcnJvcnMgZm91bmRgLCAzMDAwKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDYWxsIG9uSW1wb3J0IGNhbGxiYWNrXG4gICAgICBpZiAodGhpcy5vbkltcG9ydCkge1xuICAgICAgICB0aGlzLm9uSW1wb3J0KGZpbmFsR3JhcGgsIHRoaXMub3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICB0aGlzLm9wdGlvbnMubWVyZ2VNb2RlID09PSBcInJlcGxhY2VcIlxuICAgICAgICAgID8gYFJlcGxhY2VkIGdyYXBoIHdpdGggJHtpbXBvcnRlZFRyaXBsZUNvdW50fSB0cmlwbGVzIGluICR7aW1wb3J0VGltZS50b0ZpeGVkKDApfW1zYFxuICAgICAgICAgIDogYEFkZGVkICR7aW1wb3J0ZWRUcmlwbGVDb3VudH0gdHJpcGxlcyB0byBncmFwaCBpbiAke2ltcG9ydFRpbWUudG9GaXhlZCgwKX1tc2A7XG5cbiAgICAgIG5ldyBOb3RpY2UobWVzc2FnZSk7XG5cbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgbmV3IE5vdGljZShgSW1wb3J0IGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbnZlcnQgcmVndWxhciBHcmFwaCB0byBJbmRleGVkR3JhcGhcbiAgICovXG4gIHByaXZhdGUgY29udmVydFRvSW5kZXhlZEdyYXBoKGdyYXBoOiBHcmFwaCk6IEluZGV4ZWRHcmFwaCB7XG4gICAgY29uc3QgaW5kZXhlZEdyYXBoID0gbmV3IEluZGV4ZWRHcmFwaCgpO1xuXG4gICAgaW5kZXhlZEdyYXBoLmJlZ2luQmF0Y2goKTtcbiAgICBmb3IgKGNvbnN0IHRyaXBsZSBvZiBncmFwaC50b0FycmF5KCkpIHtcbiAgICAgIGluZGV4ZWRHcmFwaC5hZGQodHJpcGxlKTtcbiAgICB9XG4gICAgaW5kZXhlZEdyYXBoLmNvbW1pdEJhdGNoKCk7XG5cbiAgICByZXR1cm4gaW5kZXhlZEdyYXBoO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBvcHRpbWl6YXRpb24gc2V0dGluZ3MgdmlzaWJpbGl0eVxuICAgKi9cbiAgcHJpdmF0ZSB1cGRhdGVPcHRpbWl6YXRpb25TZXR0aW5ncygpOiB2b2lkIHtcbiAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIub3B0aW1pemF0aW9uLXNldHRpbmdzXCIsXG4gICAgKSBhcyBIVE1MRWxlbWVudDtcbiAgICBpZiAoY29udGFpbmVyKSB7XG4gICAgICBjb250YWluZXIuc3R5bGUuZGlzcGxheSA9IHRoaXMub3B0aW9ucy51c2VPcHRpbWl6ZWRJbXBvcnRlclxuICAgICAgICA/IFwiYmxvY2tcIlxuICAgICAgICA6IFwibm9uZVwiO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgY3VzdG9tIHN0eWxlc1xuICAgKi9cbiAgcHJpdmF0ZSBhZGRTdHlsZXMoKTogdm9pZCB7XG4gICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG4gICAgc3R5bGUudGV4dENvbnRlbnQgPSBgXG4gICAgICAgICAgICAuY3VycmVudC1zdGF0cywgLnByZXZpZXctc3RhdHMge1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuc3RhdHMtZ3JpZCB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBnYXA6IDIwcHg7XG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMTBweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLnN0YXQtaXRlbSB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5zdGF0LWxhYmVsIHtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbXV0ZWQpO1xuICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDJweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLnN0YXQtdmFsdWUge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgICAgICAgICBmb250LXdlaWdodDogNjAwO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5maWxlLXNlbGVjdGlvbiB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAyMHB4IDA7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuZmlsZS1pbnB1dC1jb250YWluZXIge1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAudXBsb2FkLWNvbnRhaW5lciB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyO1xuICAgICAgICAgICAgICAgIGdhcDogMTBweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLnNlbGVjdGVkLWZpbGUge1xuICAgICAgICAgICAgICAgIG1hcmdpbjogMTBweCAwO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5LWFsdCk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuc2VsZWN0ZWQtZmlsZS1pbmZvIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuZmlsZS1zaXplIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAucHJldmlldy1jb250ZW50IHtcbiAgICAgICAgICAgICAgICBtYXgtaGVpZ2h0OiAzMDBweDtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy15OiBhdXRvO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDE1cHg7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1zZWNvbmRhcnkpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDZweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLnByZXZpZXctZXJyb3Ige1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LWVycm9yKTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItZXJyb3IpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLm5hbWVzcGFjZXMsIC53YXJuaW5ncyB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5uYW1lc3BhY2VzIHVsLCAud2FybmluZ3MgdWwge1xuICAgICAgICAgICAgICAgIG1hcmdpbjogNXB4IDAgMCAyMHB4O1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLndhcm5pbmdzIHtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC13YXJuaW5nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLnNhbXBsZS10cmlwbGVzIHtcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAxNXB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAudHJpcGxlLXNhbXBsZSB7XG4gICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IHZhcigtLWZvbnQtbW9ub3NwYWNlKTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDExcHg7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxMHB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdy14OiBhdXRvO1xuICAgICAgICAgICAgICAgIG1hcmdpbjogNXB4IDAgMCAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuaW1wb3J0LWJ1dHRvbnMge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1lbmQ7XG4gICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nLXRvcDogMjBweDtcbiAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAxcHggc29saWQgdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ib3JkZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAubW9kYWwtYnV0dG9uLWNvbnRhaW5lciBidXR0b24ge1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDhweCAxNnB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcbiAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KTtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1ub3JtYWwpO1xuICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLm1vZGFsLWJ1dHRvbi1jb250YWluZXIgYnV0dG9uOmhvdmVyOm5vdCg6ZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5tb2RhbC1idXR0b24tY29udGFpbmVyIGJ1dHRvbjpkaXNhYmxlZCB7XG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC41O1xuICAgICAgICAgICAgICAgIGN1cnNvcjogbm90LWFsbG93ZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5tb2RhbC1idXR0b24tY29udGFpbmVyIGJ1dHRvbi5tb2QtY3RhOm5vdCg6ZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW9uLWFjY2VudCk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLWNvbG9yOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAubW9kYWwtYnV0dG9uLWNvbnRhaW5lciBidXR0b24ubW9kLWN0YTpob3Zlcjpub3QoOmRpc2FibGVkKSB7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50LWhvdmVyKTtcbiAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudC1ob3Zlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgIGA7XG5cbiAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHN0eWxlKTtcbiAgfVxuXG4gIG9uQ2xvc2UoKSB7XG4gICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgY29udGVudEVsLmVtcHR5KCk7XG4gIH1cbn1cbiJdLCJ2ZXJzaW9uIjozfQ==