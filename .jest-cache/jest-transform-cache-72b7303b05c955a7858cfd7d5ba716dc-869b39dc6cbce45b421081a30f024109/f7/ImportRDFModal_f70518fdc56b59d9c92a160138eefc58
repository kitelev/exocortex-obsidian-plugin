9cdd06df800552e59dfdf8eeb4291605
"use strict";
/**
 * Modal for RDF Import functionality
 * Allows users to import RDF data from files and merge with existing graph
 */
Object.defineProperty(exports, "__esModule", { value: true });
exports.ImportRDFModal = void 0;
const tslib_1 = require("tslib");
const obsidian_1 = require("obsidian");
const RDFParser_1 = require("../../application/services/RDFParser");
const NamespaceManager_1 = require("../../application/services/NamespaceManager");
class ImportRDFModal extends obsidian_1.Modal {
    constructor(app, graph, namespaceManager, onImport) {
        super(app);
        this.options = {
            mergeMode: 'merge',
            validateInput: true,
            strictMode: false
        };
        this.selectedFile = null;
        this.fileContent = '';
        this.graph = graph;
        this.namespaceManager = namespaceManager || new NamespaceManager_1.NamespaceManager();
        this.parser = new RDFParser_1.RDFParser(this.namespaceManager);
        this.onImport = onImport;
    }
    onOpen() {
        const { contentEl } = this;
        contentEl.empty();
        // Title
        contentEl.createEl('h2', { text: 'Import RDF Data' });
        // Current graph statistics
        const currentStatsEl = contentEl.createDiv('current-stats');
        currentStatsEl.innerHTML = `
            <h3>Current Graph</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-label">Triples:</span>
                    <span class="stat-value">${this.graph.size()}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Subjects:</span>
                    <span class="stat-value">${this.graph.subjects().size}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Predicates:</span>
                    <span class="stat-value">${this.graph.predicates().size}</span>
                </div>
            </div>
        `;
        // File selection
        const fileSection = contentEl.createDiv('file-selection');
        fileSection.createEl('h3', { text: 'Select File' });
        // File input
        const fileInputContainer = fileSection.createDiv('file-input-container');
        // Option 1: Select from vault
        new obsidian_1.Setting(fileInputContainer)
            .setName('Import from vault')
            .setDesc('Select an RDF file from your vault')
            .addButton(button => {
            button
                .setButtonText('Select File')
                .onClick(() => this.openVaultFilePicker());
        });
        // Option 2: Upload file
        const uploadContainer = fileInputContainer.createDiv('upload-container');
        uploadContainer.createEl('span', { text: 'Or upload file: ' });
        const fileInput = uploadContainer.createEl('input', { type: 'file' });
        fileInput.accept = '.ttl,.nt,.jsonld,.rdf,.n3,.xml';
        fileInput.addEventListener('change', (e) => this.handleFileUpload(e));
        // Selected file display
        const selectedFileEl = fileSection.createDiv('selected-file');
        selectedFileEl.style.display = 'none';
        // Format selection
        new obsidian_1.Setting(contentEl)
            .setName('RDF format')
            .setDesc('Specify format (auto-detected if not set)')
            .addDropdown(dropdown => {
            dropdown
                .addOption('', 'Auto-detect')
                .addOption('turtle', 'Turtle (.ttl)')
                .addOption('ntriples', 'N-Triples (.nt)')
                .addOption('jsonld', 'JSON-LD (.jsonld)')
                .addOption('rdfxml', 'RDF/XML (.rdf)')
                .setValue(this.options.format || '')
                .onChange(value => {
                this.options.format = value ? value : undefined;
                this.updatePreview();
            });
        });
        // Merge mode
        new obsidian_1.Setting(contentEl)
            .setName('Import mode')
            .setDesc('How to handle existing data')
            .addDropdown(dropdown => {
            dropdown
                .addOption('merge', 'Merge with existing graph')
                .addOption('replace', 'Replace entire graph')
                .setValue(this.options.mergeMode)
                .onChange(value => {
                this.options.mergeMode = value;
            });
        });
        // Base IRI setting
        new obsidian_1.Setting(contentEl)
            .setName('Base IRI')
            .setDesc('Optional base IRI for relative URIs')
            .addText(text => {
            text
                .setPlaceholder('https://example.org/data/')
                .setValue(this.options.baseIRI || '')
                .onChange(value => {
                this.options.baseIRI = value || undefined;
                this.updatePreview();
            });
        });
        // Validation options
        new obsidian_1.Setting(contentEl)
            .setName('Validate input')
            .setDesc('Validate RDF data during import')
            .addToggle(toggle => {
            toggle
                .setValue(this.options.validateInput)
                .onChange(value => {
                this.options.validateInput = value;
            });
        });
        new obsidian_1.Setting(contentEl)
            .setName('Strict mode')
            .setDesc('Fail import on any parsing errors')
            .addToggle(toggle => {
            toggle
                .setValue(this.options.strictMode)
                .onChange(value => {
                this.options.strictMode = value;
            });
        });
        // Preview section
        const previewContainer = contentEl.createDiv('import-preview');
        previewContainer.createEl('h3', { text: 'Preview' });
        const previewEl = previewContainer.createEl('div', { cls: 'preview-content' });
        previewEl.innerHTML = '<em>Select a file to see preview</em>';
        // Buttons
        const buttonContainer = contentEl.createDiv('import-buttons');
        buttonContainer.addClass('modal-button-container');
        // Import button
        const importButton = buttonContainer.createEl('button', {
            text: 'Import',
            cls: 'mod-cta'
        });
        importButton.disabled = true;
        importButton.onclick = () => this.handleImport();
        // Cancel button
        const cancelButton = buttonContainer.createEl('button', { text: 'Cancel' });
        cancelButton.onclick = () => this.close();
        // Store references
        this.updateUI();
        // Add styles
        this.addStyles();
    }
    /**
     * Open vault file picker
     */
    openVaultFilePicker() {
        // Get all files that might be RDF
        const files = this.app.vault.getFiles().filter(file => /\.(ttl|nt|jsonld|rdf|n3|xml)$/i.test(file.extension));
        if (files.length === 0) {
            new obsidian_1.Notice('No RDF files found in vault');
            return;
        }
        // Create a simple file picker (in a real implementation, you might use a more sophisticated picker)
        const picker = document.createElement('select');
        picker.innerHTML = '<option value="">Select file...</option>';
        for (const file of files) {
            const option = document.createElement('option');
            option.value = file.path;
            option.textContent = file.path;
            picker.appendChild(option);
        }
        picker.addEventListener('change', (e) => tslib_1.__awaiter(this, void 0, void 0, function* () {
            const selectedPath = e.target.value;
            if (selectedPath) {
                const file = this.app.vault.getAbstractFileByPath(selectedPath);
                if (file instanceof obsidian_1.TFile) {
                    yield this.selectVaultFile(file);
                }
            }
        }));
        // Add to modal (in a real implementation, this would be better integrated)
        const container = this.contentEl.querySelector('.file-input-container');
        if (container) {
            container.appendChild(picker);
        }
    }
    /**
     * Handle file upload from computer
     */
    handleFileUpload(event) {
        var _a;
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            const input = event.target;
            const file = (_a = input.files) === null || _a === void 0 ? void 0 : _a[0];
            if (file) {
                try {
                    const content = yield this.readFile(file);
                    this.selectedFile = file;
                    this.fileContent = content;
                    this.updateUI();
                    this.updatePreview();
                }
                catch (error) {
                    new obsidian_1.Notice(`Error reading file: ${error.message}`);
                }
            }
        });
    }
    /**
     * Select file from vault
     */
    selectVaultFile(file) {
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            try {
                const content = yield this.app.vault.read(file);
                this.selectedFile = file;
                this.fileContent = content;
                this.updateUI();
                this.updatePreview();
            }
            catch (error) {
                new obsidian_1.Notice(`Error reading vault file: ${error.message}`);
            }
        });
    }
    /**
     * Read file content
     */
    readFile(file) {
        return new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.onload = (e) => { var _a; return resolve((_a = e.target) === null || _a === void 0 ? void 0 : _a.result); };
            reader.onerror = (e) => reject(new Error('Failed to read file'));
            reader.readAsText(file);
        });
    }
    /**
     * Update UI state
     */
    updateUI() {
        // Update selected file display
        const selectedFileEl = this.contentEl.querySelector('.selected-file');
        if (selectedFileEl) {
            if (this.selectedFile) {
                const fileName = this.selectedFile instanceof obsidian_1.TFile
                    ? this.selectedFile.name
                    : this.selectedFile.name;
                selectedFileEl.innerHTML = `
                    <div class="selected-file-info">
                        <strong>Selected:</strong> ${fileName}
                        <span class="file-size">(${this.formatFileSize(this.fileContent.length)})</span>
                    </div>
                `;
                selectedFileEl.style.display = 'block';
            }
            else {
                selectedFileEl.style.display = 'none';
            }
        }
        // Enable/disable import button
        const importButton = this.contentEl.querySelector('button.mod-cta');
        if (importButton) {
            importButton.disabled = !this.selectedFile;
        }
    }
    /**
     * Update preview content
     */
    updatePreview() {
        var _a;
        const previewEl = this.contentEl.querySelector('.preview-content');
        if (!previewEl || !this.fileContent)
            return;
        try {
            const parseOptions = {
                format: this.options.format,
                baseIRI: this.options.baseIRI,
                namespaceManager: this.namespaceManager,
                validateInput: false,
                strictMode: false
            };
            const result = this.parser.parse(this.fileContent, parseOptions);
            if (result.isSuccess) {
                const parseResult = result.getValue();
                previewEl.innerHTML = `
                    <div class="preview-stats">
                        <h4>Import Preview</h4>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">Triples:</span>
                                <span class="stat-value">${parseResult.tripleCount}</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Subjects:</span>
                                <span class="stat-value">${parseResult.graph.subjects().size}</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Predicates:</span>
                                <span class="stat-value">${parseResult.graph.predicates().size}</span>
                            </div>
                        </div>
                        ${Object.keys(parseResult.namespaces).length > 0 ? `
                            <div class="namespaces">
                                <strong>Namespaces found:</strong>
                                <ul>
                                    ${Object.entries(parseResult.namespaces)
                    .slice(0, 5)
                    .map(([prefix, uri]) => `<li>${prefix}: ${uri}</li>`)
                    .join('')}
                                    ${Object.keys(parseResult.namespaces).length > 5 ? '<li>... and more</li>' : ''}
                                </ul>
                            </div>
                        ` : ''}
                        ${((_a = parseResult.warnings) === null || _a === void 0 ? void 0 : _a.length) ? `
                            <div class="warnings">
                                <strong>Warnings:</strong>
                                <ul>
                                    ${parseResult.warnings.slice(0, 3).map(w => `<li>${w}</li>`).join('')}
                                    ${parseResult.warnings.length > 3 ? '<li>... and more</li>' : ''}
                                </ul>
                            </div>
                        ` : ''}
                    </div>
                    <div class="sample-triples">
                        <h4>Sample Triples</h4>
                        <pre class="triple-sample">${this.formatSampleTriples(parseResult.graph)}</pre>
                    </div>
                `;
            }
            else {
                previewEl.innerHTML = `
                    <div class="preview-error">
                        <strong>Parse Error:</strong> ${result.errorValue()}
                    </div>
                `;
            }
        }
        catch (error) {
            previewEl.innerHTML = `
                <div class="preview-error">
                    <strong>Preview Error:</strong> ${error.message}
                </div>
            `;
        }
    }
    /**
     * Format sample triples for display
     */
    formatSampleTriples(graph) {
        const triples = graph.toArray().slice(0, 5);
        return triples.map(triple => triple.toString()).join('\n') +
            (graph.size() > 5 ? '\n... and more' : '');
    }
    /**
     * Format file size
     */
    formatFileSize(bytes) {
        if (bytes < 1024)
            return bytes + ' B';
        if (bytes < 1024 * 1024)
            return Math.round(bytes / 1024) + ' KB';
        return Math.round(bytes / (1024 * 1024)) + ' MB';
    }
    /**
     * Handle import action
     */
    handleImport() {
        var _a, _b;
        return tslib_1.__awaiter(this, void 0, void 0, function* () {
            if (!this.selectedFile || !this.fileContent) {
                new obsidian_1.Notice('No file selected');
                return;
            }
            try {
                const parseOptions = {
                    format: this.options.format,
                    baseIRI: this.options.baseIRI,
                    namespaceManager: this.namespaceManager,
                    validateInput: this.options.validateInput,
                    strictMode: this.options.strictMode
                };
                const result = this.parser.parse(this.fileContent, parseOptions);
                if (result.isFailure) {
                    new obsidian_1.Notice(`Import failed: ${result.errorValue()}`);
                    return;
                }
                const parseResult = result.getValue();
                // Handle merge mode
                let finalGraph;
                if (this.options.mergeMode === 'replace') {
                    finalGraph = parseResult.graph;
                }
                else {
                    // Merge with existing graph
                    finalGraph = this.graph.clone();
                    finalGraph.merge(parseResult.graph);
                }
                // Call onImport callback
                if (this.onImport) {
                    this.onImport(parseResult.graph, this.options);
                }
                const message = this.options.mergeMode === 'replace'
                    ? `Replaced graph with ${parseResult.tripleCount} triples`
                    : `Added ${parseResult.tripleCount} triples to graph`;
                new obsidian_1.Notice(message);
                if ((_a = parseResult.warnings) === null || _a === void 0 ? void 0 : _a.length) {
                    new obsidian_1.Notice(`Warnings: ${parseResult.warnings.length} warnings found`, 3000);
                }
                if ((_b = parseResult.errors) === null || _b === void 0 ? void 0 : _b.length) {
                    new obsidian_1.Notice(`Errors: ${parseResult.errors.length} errors found`, 3000);
                }
                this.close();
            }
            catch (error) {
                new obsidian_1.Notice(`Import error: ${error.message}`);
            }
        });
    }
    /**
     * Add custom styles
     */
    addStyles() {
        const style = document.createElement('style');
        style.textContent = `
            .current-stats, .preview-stats {
                margin-bottom: 20px;
                padding: 15px;
                background: var(--background-secondary);
                border-radius: 6px;
            }
            
            .stats-grid {
                display: flex;
                gap: 20px;
                margin-top: 10px;
            }
            
            .stat-item {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            
            .stat-label {
                font-size: 12px;
                color: var(--text-muted);
                margin-bottom: 2px;
            }
            
            .stat-value {
                font-size: 16px;
                font-weight: 600;
                color: var(--text-normal);
            }
            
            .file-selection {
                margin: 20px 0;
                padding: 15px;
                border: 1px solid var(--background-modifier-border);
                border-radius: 6px;
            }
            
            .file-input-container {
                margin: 10px 0;
            }
            
            .upload-container {
                margin: 10px 0;
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .selected-file {
                margin: 10px 0;
                padding: 10px;
                background: var(--background-primary-alt);
                border-radius: 4px;
            }
            
            .selected-file-info {
                display: flex;
                align-items: center;
                gap: 10px;
            }
            
            .file-size {
                color: var(--text-muted);
                font-size: 12px;
            }
            
            .preview-content {
                max-height: 300px;
                overflow-y: auto;
                padding: 15px;
                background: var(--background-secondary);
                border-radius: 6px;
            }
            
            .preview-error {
                color: var(--text-error);
                padding: 10px;
                background: var(--background-modifier-error);
                border-radius: 4px;
            }
            
            .namespaces, .warnings {
                margin: 10px 0;
            }
            
            .namespaces ul, .warnings ul {
                margin: 5px 0 0 20px;
                font-size: 12px;
            }
            
            .warnings {
                color: var(--text-warning);
            }
            
            .sample-triples {
                margin-top: 15px;
            }
            
            .triple-sample {
                font-family: var(--font-monospace);
                font-size: 11px;
                background: var(--background-primary);
                padding: 10px;
                border-radius: 4px;
                overflow-x: auto;
                margin: 5px 0 0 0;
            }
            
            .import-buttons {
                display: flex;
                gap: 10px;
                justify-content: flex-end;
                margin-top: 20px;
                padding-top: 20px;
                border-top: 1px solid var(--background-modifier-border);
            }
            
            .modal-button-container button {
                padding: 8px 16px;
                border-radius: 4px;
                border: 1px solid var(--background-modifier-border);
                background: var(--background-primary);
                color: var(--text-normal);
                cursor: pointer;
            }
            
            .modal-button-container button:hover:not(:disabled) {
                background: var(--background-secondary);
            }
            
            .modal-button-container button:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }
            
            .modal-button-container button.mod-cta:not(:disabled) {
                background: var(--interactive-accent);
                color: var(--text-on-accent);
                border-color: var(--interactive-accent);
            }
            
            .modal-button-container button.mod-cta:hover:not(:disabled) {
                background: var(--interactive-accent-hover);
                border-color: var(--interactive-accent-hover);
            }
        `;
        document.head.appendChild(style);
    }
    onClose() {
        const { contentEl } = this;
        contentEl.empty();
    }
}
exports.ImportRDFModal = ImportRDFModal;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vc3JjL3ByZXNlbnRhdGlvbi9tb2RhbHMvSW1wb3J0UkRGTW9kYWwudHMiLCJtYXBwaW5ncyI6IjtBQUFBOzs7R0FHRzs7OztBQUVILHVDQUE4RDtBQUU5RCxvRUFBK0U7QUFFL0Usa0ZBQStFO0FBVS9FLE1BQWEsY0FBZSxTQUFRLGdCQUFLO0lBYXJDLFlBQ0ksR0FBUSxFQUNSLEtBQVksRUFDWixnQkFBbUMsRUFDbkMsUUFBaUU7UUFFakUsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBakJQLFlBQU8sR0FBa0I7WUFDN0IsU0FBUyxFQUFFLE9BQU87WUFDbEIsYUFBYSxFQUFFLElBQUk7WUFDbkIsVUFBVSxFQUFFLEtBQUs7U0FDcEIsQ0FBQztRQUdNLGlCQUFZLEdBQXdCLElBQUksQ0FBQztRQUN6QyxnQkFBVyxHQUFXLEVBQUUsQ0FBQztRQVU3QixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztRQUNuQixJQUFJLENBQUMsZ0JBQWdCLEdBQUcsZ0JBQWdCLElBQUksSUFBSSxtQ0FBZ0IsRUFBRSxDQUFDO1FBQ25FLElBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxxQkFBUyxDQUFDLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO1FBQ25ELElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO0lBQzdCLENBQUM7SUFFRCxNQUFNO1FBQ0YsTUFBTSxFQUFFLFNBQVMsRUFBRSxHQUFHLElBQUksQ0FBQztRQUMzQixTQUFTLENBQUMsS0FBSyxFQUFFLENBQUM7UUFFbEIsUUFBUTtRQUNSLFNBQVMsQ0FBQyxRQUFRLENBQUMsSUFBSSxFQUFFLEVBQUUsSUFBSSxFQUFFLGlCQUFpQixFQUFFLENBQUMsQ0FBQztRQUV0RCwyQkFBMkI7UUFDM0IsTUFBTSxjQUFjLEdBQUcsU0FBUyxDQUFDLFNBQVMsQ0FBQyxlQUFlLENBQUMsQ0FBQztRQUM1RCxjQUFjLENBQUMsU0FBUyxHQUFHOzs7Ozsr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QUMsQ0FBQzthQUNoRDs7S0FDSjtJQUVEOztPQUVHO0lBQ0ssU0FBUztRQUNiLE1BQU0sS0FBSyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDOUMsS0FBSyxDQUFDLFdBQVcsR0FBRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1NBbUpuQixDQUFDO1FBRUYsUUFBUSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDckMsQ0FBQztJQUVELE9BQU87UUFDSCxNQUFNLEVBQUUsU0FBUyxFQUFFLEdBQUcsSUFBSSxDQUFDO1FBQzNCLFNBQVMsQ0FBQyxLQUFLLEVBQUUsQ0FBQztJQUN0QixDQUFDO0NBQ0o7QUFqbkJELHdDQWluQkMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vc3JjL3ByZXNlbnRhdGlvbi9tb2RhbHMvSW1wb3J0UkRGTW9kYWwudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNb2RhbCBmb3IgUkRGIEltcG9ydCBmdW5jdGlvbmFsaXR5XG4gKiBBbGxvd3MgdXNlcnMgdG8gaW1wb3J0IFJERiBkYXRhIGZyb20gZmlsZXMgYW5kIG1lcmdlIHdpdGggZXhpc3RpbmcgZ3JhcGhcbiAqL1xuXG5pbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBOb3RpY2UsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IHsgR3JhcGggfSBmcm9tICcuLi8uLi9kb21haW4vc2VtYW50aWMvY29yZS9HcmFwaCc7XG5pbXBvcnQgeyBSREZQYXJzZXIsIFBhcnNlT3B0aW9ucyB9IGZyb20gJy4uLy4uL2FwcGxpY2F0aW9uL3NlcnZpY2VzL1JERlBhcnNlcic7XG5pbXBvcnQgeyBSREZGb3JtYXQgfSBmcm9tICcuLi8uLi9hcHBsaWNhdGlvbi9zZXJ2aWNlcy9SREZTZXJpYWxpemVyJztcbmltcG9ydCB7IE5hbWVzcGFjZU1hbmFnZXIgfSBmcm9tICcuLi8uLi9hcHBsaWNhdGlvbi9zZXJ2aWNlcy9OYW1lc3BhY2VNYW5hZ2VyJztcblxuZXhwb3J0IGludGVyZmFjZSBJbXBvcnRPcHRpb25zIHtcbiAgICBmb3JtYXQ/OiBSREZGb3JtYXQ7XG4gICAgbWVyZ2VNb2RlOiAnbWVyZ2UnIHwgJ3JlcGxhY2UnO1xuICAgIHZhbGlkYXRlSW5wdXQ6IGJvb2xlYW47XG4gICAgc3RyaWN0TW9kZTogYm9vbGVhbjtcbiAgICBiYXNlSVJJPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgSW1wb3J0UkRGTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XG4gICAgcHJpdmF0ZSBncmFwaDogR3JhcGg7XG4gICAgcHJpdmF0ZSBvcHRpb25zOiBJbXBvcnRPcHRpb25zID0ge1xuICAgICAgICBtZXJnZU1vZGU6ICdtZXJnZScsXG4gICAgICAgIHZhbGlkYXRlSW5wdXQ6IHRydWUsXG4gICAgICAgIHN0cmljdE1vZGU6IGZhbHNlXG4gICAgfTtcbiAgICBwcml2YXRlIHBhcnNlcjogUkRGUGFyc2VyO1xuICAgIHByaXZhdGUgbmFtZXNwYWNlTWFuYWdlcjogTmFtZXNwYWNlTWFuYWdlcjtcbiAgICBwcml2YXRlIHNlbGVjdGVkRmlsZTogRmlsZSB8IFRGaWxlIHwgbnVsbCA9IG51bGw7XG4gICAgcHJpdmF0ZSBmaWxlQ29udGVudDogc3RyaW5nID0gJyc7XG4gICAgcHJpdmF0ZSBvbkltcG9ydD86IChpbXBvcnRlZEdyYXBoOiBHcmFwaCwgb3B0aW9uczogSW1wb3J0T3B0aW9ucykgPT4gdm9pZDtcbiAgICBcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgYXBwOiBBcHAsIFxuICAgICAgICBncmFwaDogR3JhcGgsIFxuICAgICAgICBuYW1lc3BhY2VNYW5hZ2VyPzogTmFtZXNwYWNlTWFuYWdlcixcbiAgICAgICAgb25JbXBvcnQ/OiAoaW1wb3J0ZWRHcmFwaDogR3JhcGgsIG9wdGlvbnM6IEltcG9ydE9wdGlvbnMpID0+IHZvaWRcbiAgICApIHtcbiAgICAgICAgc3VwZXIoYXBwKTtcbiAgICAgICAgdGhpcy5ncmFwaCA9IGdyYXBoO1xuICAgICAgICB0aGlzLm5hbWVzcGFjZU1hbmFnZXIgPSBuYW1lc3BhY2VNYW5hZ2VyIHx8IG5ldyBOYW1lc3BhY2VNYW5hZ2VyKCk7XG4gICAgICAgIHRoaXMucGFyc2VyID0gbmV3IFJERlBhcnNlcih0aGlzLm5hbWVzcGFjZU1hbmFnZXIpO1xuICAgICAgICB0aGlzLm9uSW1wb3J0ID0gb25JbXBvcnQ7XG4gICAgfVxuICAgIFxuICAgIG9uT3BlbigpIHtcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gVGl0bGVcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0ltcG9ydCBSREYgRGF0YScgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBDdXJyZW50IGdyYXBoIHN0YXRpc3RpY3NcbiAgICAgICAgY29uc3QgY3VycmVudFN0YXRzRWwgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdjdXJyZW50LXN0YXRzJyk7XG4gICAgICAgIGN1cnJlbnRTdGF0c0VsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgIDxoMz5DdXJyZW50IEdyYXBoPC9oMz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0cy1ncmlkXCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtbGFiZWxcIj5UcmlwbGVzOjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LXZhbHVlXCI+JHt0aGlzLmdyYXBoLnNpemUoKX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtbGFiZWxcIj5TdWJqZWN0czo8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC12YWx1ZVwiPiR7dGhpcy5ncmFwaC5zdWJqZWN0cygpLnNpemV9PC9zcGFuPlxuICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0LWl0ZW1cIj5cbiAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LWxhYmVsXCI+UHJlZGljYXRlczo8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC12YWx1ZVwiPiR7dGhpcy5ncmFwaC5wcmVkaWNhdGVzKCkuc2l6ZX08L3NwYW4+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgYDtcbiAgICAgICAgXG4gICAgICAgIC8vIEZpbGUgc2VsZWN0aW9uXG4gICAgICAgIGNvbnN0IGZpbGVTZWN0aW9uID0gY29udGVudEVsLmNyZWF0ZURpdignZmlsZS1zZWxlY3Rpb24nKTtcbiAgICAgICAgZmlsZVNlY3Rpb24uY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnU2VsZWN0IEZpbGUnIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gRmlsZSBpbnB1dFxuICAgICAgICBjb25zdCBmaWxlSW5wdXRDb250YWluZXIgPSBmaWxlU2VjdGlvbi5jcmVhdGVEaXYoJ2ZpbGUtaW5wdXQtY29udGFpbmVyJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBPcHRpb24gMTogU2VsZWN0IGZyb20gdmF1bHRcbiAgICAgICAgbmV3IFNldHRpbmcoZmlsZUlucHV0Q29udGFpbmVyKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0ltcG9ydCBmcm9tIHZhdWx0JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdTZWxlY3QgYW4gUkRGIGZpbGUgZnJvbSB5b3VyIHZhdWx0JylcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IHtcbiAgICAgICAgICAgICAgICBidXR0b25cbiAgICAgICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1NlbGVjdCBGaWxlJylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4gdGhpcy5vcGVuVmF1bHRGaWxlUGlja2VyKCkpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBPcHRpb24gMjogVXBsb2FkIGZpbGVcbiAgICAgICAgY29uc3QgdXBsb2FkQ29udGFpbmVyID0gZmlsZUlucHV0Q29udGFpbmVyLmNyZWF0ZURpdigndXBsb2FkLWNvbnRhaW5lcicpO1xuICAgICAgICB1cGxvYWRDb250YWluZXIuY3JlYXRlRWwoJ3NwYW4nLCB7IHRleHQ6ICdPciB1cGxvYWQgZmlsZTogJyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IGZpbGVJbnB1dCA9IHVwbG9hZENvbnRhaW5lci5jcmVhdGVFbCgnaW5wdXQnLCB7IHR5cGU6ICdmaWxlJyB9KTtcbiAgICAgICAgZmlsZUlucHV0LmFjY2VwdCA9ICcudHRsLC5udCwuanNvbmxkLC5yZGYsLm4zLC54bWwnO1xuICAgICAgICBmaWxlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHRoaXMuaGFuZGxlRmlsZVVwbG9hZChlKSk7XG4gICAgICAgIFxuICAgICAgICAvLyBTZWxlY3RlZCBmaWxlIGRpc3BsYXlcbiAgICAgICAgY29uc3Qgc2VsZWN0ZWRGaWxlRWwgPSBmaWxlU2VjdGlvbi5jcmVhdGVEaXYoJ3NlbGVjdGVkLWZpbGUnKTtcbiAgICAgICAgc2VsZWN0ZWRGaWxlRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgXG4gICAgICAgIC8vIEZvcm1hdCBzZWxlY3Rpb25cbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1JERiBmb3JtYXQnKVxuICAgICAgICAgICAgLnNldERlc2MoJ1NwZWNpZnkgZm9ybWF0IChhdXRvLWRldGVjdGVkIGlmIG5vdCBzZXQpJylcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XG4gICAgICAgICAgICAgICAgZHJvcGRvd25cbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignJywgJ0F1dG8tZGV0ZWN0JylcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbigndHVydGxlJywgJ1R1cnRsZSAoLnR0bCknKVxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdudHJpcGxlcycsICdOLVRyaXBsZXMgKC5udCknKVxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdqc29ubGQnLCAnSlNPTi1MRCAoLmpzb25sZCknKVxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdyZGZ4bWwnLCAnUkRGL1hNTCAoLnJkZiknKVxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5vcHRpb25zLmZvcm1hdCB8fCAnJylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5mb3JtYXQgPSB2YWx1ZSA/IHZhbHVlIGFzIFJERkZvcm1hdCA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlUHJldmlldygpO1xuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgLy8gTWVyZ2UgbW9kZVxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXG4gICAgICAgICAgICAuc2V0TmFtZSgnSW1wb3J0IG1vZGUnKVxuICAgICAgICAgICAgLnNldERlc2MoJ0hvdyB0byBoYW5kbGUgZXhpc3RpbmcgZGF0YScpXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xuICAgICAgICAgICAgICAgIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ21lcmdlJywgJ01lcmdlIHdpdGggZXhpc3RpbmcgZ3JhcGgnKVxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdyZXBsYWNlJywgJ1JlcGxhY2UgZW50aXJlIGdyYXBoJylcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMub3B0aW9ucy5tZXJnZU1vZGUpXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMubWVyZ2VNb2RlID0gdmFsdWUgYXMgJ21lcmdlJyB8ICdyZXBsYWNlJztcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIEJhc2UgSVJJIHNldHRpbmdcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ0Jhc2UgSVJJJylcbiAgICAgICAgICAgIC5zZXREZXNjKCdPcHRpb25hbCBiYXNlIElSSSBmb3IgcmVsYXRpdmUgVVJJcycpXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcbiAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignaHR0cHM6Ly9leGFtcGxlLm9yZy9kYXRhLycpXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLm9wdGlvbnMuYmFzZUlSSSB8fCAnJylcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKHZhbHVlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5iYXNlSVJJID0gdmFsdWUgfHwgdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQcmV2aWV3KCk7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBWYWxpZGF0aW9uIG9wdGlvbnNcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxuICAgICAgICAgICAgLnNldE5hbWUoJ1ZhbGlkYXRlIGlucHV0JylcbiAgICAgICAgICAgIC5zZXREZXNjKCdWYWxpZGF0ZSBSREYgZGF0YSBkdXJpbmcgaW1wb3J0JylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMub3B0aW9ucy52YWxpZGF0ZUlucHV0KVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnZhbGlkYXRlSW5wdXQgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcbiAgICAgICAgICAgIC5zZXROYW1lKCdTdHJpY3QgbW9kZScpXG4gICAgICAgICAgICAuc2V0RGVzYygnRmFpbCBpbXBvcnQgb24gYW55IHBhcnNpbmcgZXJyb3JzJylcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHtcbiAgICAgICAgICAgICAgICB0b2dnbGVcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMub3B0aW9ucy5zdHJpY3RNb2RlKVxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UodmFsdWUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcHRpb25zLnN0cmljdE1vZGUgPSB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIC8vIFByZXZpZXcgc2VjdGlvblxuICAgICAgICBjb25zdCBwcmV2aWV3Q29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdignaW1wb3J0LXByZXZpZXcnKTtcbiAgICAgICAgcHJldmlld0NvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdQcmV2aWV3JyB9KTtcbiAgICAgICAgXG4gICAgICAgIGNvbnN0IHByZXZpZXdFbCA9IHByZXZpZXdDb250YWluZXIuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAncHJldmlldy1jb250ZW50JyB9KTtcbiAgICAgICAgcHJldmlld0VsLmlubmVySFRNTCA9ICc8ZW0+U2VsZWN0IGEgZmlsZSB0byBzZWUgcHJldmlldzwvZW0+JztcbiAgICAgICAgXG4gICAgICAgIC8vIEJ1dHRvbnNcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdignaW1wb3J0LWJ1dHRvbnMnKTtcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLmFkZENsYXNzKCdtb2RhbC1idXR0b24tY29udGFpbmVyJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBJbXBvcnQgYnV0dG9uXG4gICAgICAgIGNvbnN0IGltcG9ydEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyBcbiAgICAgICAgICAgIHRleHQ6ICdJbXBvcnQnLFxuICAgICAgICAgICAgY2xzOiAnbW9kLWN0YSdcbiAgICAgICAgfSk7XG4gICAgICAgIGltcG9ydEJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7XG4gICAgICAgIGltcG9ydEJ1dHRvbi5vbmNsaWNrID0gKCkgPT4gdGhpcy5oYW5kbGVJbXBvcnQoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIENhbmNlbCBidXR0b25cbiAgICAgICAgY29uc3QgY2FuY2VsQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pO1xuICAgICAgICBjYW5jZWxCdXR0b24ub25jbGljayA9ICgpID0+IHRoaXMuY2xvc2UoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIFN0b3JlIHJlZmVyZW5jZXNcbiAgICAgICAgdGhpcy51cGRhdGVVSSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gQWRkIHN0eWxlc1xuICAgICAgICB0aGlzLmFkZFN0eWxlcygpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBPcGVuIHZhdWx0IGZpbGUgcGlja2VyXG4gICAgICovXG4gICAgcHJpdmF0ZSBvcGVuVmF1bHRGaWxlUGlja2VyKCk6IHZvaWQge1xuICAgICAgICAvLyBHZXQgYWxsIGZpbGVzIHRoYXQgbWlnaHQgYmUgUkRGXG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKS5maWx0ZXIoZmlsZSA9PiBcbiAgICAgICAgICAgIC9cXC4odHRsfG50fGpzb25sZHxyZGZ8bjN8eG1sKSQvaS50ZXN0KGZpbGUuZXh0ZW5zaW9uKVxuICAgICAgICApO1xuICAgICAgICBcbiAgICAgICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gUkRGIGZpbGVzIGZvdW5kIGluIHZhdWx0Jyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIENyZWF0ZSBhIHNpbXBsZSBmaWxlIHBpY2tlciAoaW4gYSByZWFsIGltcGxlbWVudGF0aW9uLCB5b3UgbWlnaHQgdXNlIGEgbW9yZSBzb3BoaXN0aWNhdGVkIHBpY2tlcilcbiAgICAgICAgY29uc3QgcGlja2VyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VsZWN0Jyk7XG4gICAgICAgIHBpY2tlci5pbm5lckhUTUwgPSAnPG9wdGlvbiB2YWx1ZT1cIlwiPlNlbGVjdCBmaWxlLi4uPC9vcHRpb24+JztcbiAgICAgICAgXG4gICAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICAgICAgY29uc3Qgb3B0aW9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnb3B0aW9uJyk7XG4gICAgICAgICAgICBvcHRpb24udmFsdWUgPSBmaWxlLnBhdGg7XG4gICAgICAgICAgICBvcHRpb24udGV4dENvbnRlbnQgPSBmaWxlLnBhdGg7XG4gICAgICAgICAgICBwaWNrZXIuYXBwZW5kQ2hpbGQob3B0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgcGlja2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jIChlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZFBhdGggPSAoZS50YXJnZXQgYXMgSFRNTFNlbGVjdEVsZW1lbnQpLnZhbHVlO1xuICAgICAgICAgICAgaWYgKHNlbGVjdGVkUGF0aCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoc2VsZWN0ZWRQYXRoKTtcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuc2VsZWN0VmF1bHRGaWxlKGZpbGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICAvLyBBZGQgdG8gbW9kYWwgKGluIGEgcmVhbCBpbXBsZW1lbnRhdGlvbiwgdGhpcyB3b3VsZCBiZSBiZXR0ZXIgaW50ZWdyYXRlZClcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLmZpbGUtaW5wdXQtY29udGFpbmVyJyk7XG4gICAgICAgIGlmIChjb250YWluZXIpIHtcbiAgICAgICAgICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChwaWNrZXIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBmaWxlIHVwbG9hZCBmcm9tIGNvbXB1dGVyXG4gICAgICovXG4gICAgcHJpdmF0ZSBhc3luYyBoYW5kbGVGaWxlVXBsb2FkKGV2ZW50OiBFdmVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBjb25zdCBpbnB1dCA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICAgICAgICBjb25zdCBmaWxlID0gaW5wdXQuZmlsZXM/LlswXTtcbiAgICAgICAgXG4gICAgICAgIGlmIChmaWxlKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLnJlYWRGaWxlKGZpbGUpO1xuICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGaWxlID0gZmlsZTtcbiAgICAgICAgICAgICAgICB0aGlzLmZpbGVDb250ZW50ID0gY29udGVudDtcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZVVJKCk7XG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVQcmV2aWV3KCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIHJlYWRpbmcgZmlsZTogJHtlcnJvci5tZXNzYWdlfWApO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8qKlxuICAgICAqIFNlbGVjdCBmaWxlIGZyb20gdmF1bHRcbiAgICAgKi9cbiAgICBwcml2YXRlIGFzeW5jIHNlbGVjdFZhdWx0RmlsZShmaWxlOiBURmlsZSk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRmlsZSA9IGZpbGU7XG4gICAgICAgICAgICB0aGlzLmZpbGVDb250ZW50ID0gY29udGVudDtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlVUkoKTtcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUHJldmlldygpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3IgcmVhZGluZyB2YXVsdCBmaWxlOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogUmVhZCBmaWxlIGNvbnRlbnRcbiAgICAgKi9cbiAgICBwcml2YXRlIHJlYWRGaWxlKGZpbGU6IEZpbGUpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTtcbiAgICAgICAgICAgIHJlYWRlci5vbmxvYWQgPSAoZSkgPT4gcmVzb2x2ZShlLnRhcmdldD8ucmVzdWx0IGFzIHN0cmluZyk7XG4gICAgICAgICAgICByZWFkZXIub25lcnJvciA9IChlKSA9PiByZWplY3QobmV3IEVycm9yKCdGYWlsZWQgdG8gcmVhZCBmaWxlJykpO1xuICAgICAgICAgICAgcmVhZGVyLnJlYWRBc1RleHQoZmlsZSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBVcGRhdGUgVUkgc3RhdGVcbiAgICAgKi9cbiAgICBwcml2YXRlIHVwZGF0ZVVJKCk6IHZvaWQge1xuICAgICAgICAvLyBVcGRhdGUgc2VsZWN0ZWQgZmlsZSBkaXNwbGF5XG4gICAgICAgIGNvbnN0IHNlbGVjdGVkRmlsZUVsID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnNlbGVjdGVkLWZpbGUnKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgaWYgKHNlbGVjdGVkRmlsZUVsKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zZWxlY3RlZEZpbGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IHRoaXMuc2VsZWN0ZWRGaWxlIGluc3RhbmNlb2YgVEZpbGUgXG4gICAgICAgICAgICAgICAgICAgID8gdGhpcy5zZWxlY3RlZEZpbGUubmFtZSBcbiAgICAgICAgICAgICAgICAgICAgOiB0aGlzLnNlbGVjdGVkRmlsZS5uYW1lO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRmlsZUVsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInNlbGVjdGVkLWZpbGUtaW5mb1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5TZWxlY3RlZDo8L3N0cm9uZz4gJHtmaWxlTmFtZX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiZmlsZS1zaXplXCI+KCR7dGhpcy5mb3JtYXRGaWxlU2l6ZSh0aGlzLmZpbGVDb250ZW50Lmxlbmd0aCl9KTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgYDtcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEZpbGVFbC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRGaWxlRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgLy8gRW5hYmxlL2Rpc2FibGUgaW1wb3J0IGJ1dHRvblxuICAgICAgICBjb25zdCBpbXBvcnRCdXR0b24gPSB0aGlzLmNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCdidXR0b24ubW9kLWN0YScpIGFzIEhUTUxCdXR0b25FbGVtZW50O1xuICAgICAgICBpZiAoaW1wb3J0QnV0dG9uKSB7XG4gICAgICAgICAgICBpbXBvcnRCdXR0b24uZGlzYWJsZWQgPSAhdGhpcy5zZWxlY3RlZEZpbGU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHByZXZpZXcgY29udGVudFxuICAgICAqL1xuICAgIHByaXZhdGUgdXBkYXRlUHJldmlldygpOiB2b2lkIHtcbiAgICAgICAgY29uc3QgcHJldmlld0VsID0gdGhpcy5jb250ZW50RWwucXVlcnlTZWxlY3RvcignLnByZXZpZXctY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBpZiAoIXByZXZpZXdFbCB8fCAhdGhpcy5maWxlQ29udGVudCkgcmV0dXJuO1xuICAgICAgICBcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlT3B0aW9uczogUGFyc2VPcHRpb25zID0ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogdGhpcy5vcHRpb25zLmZvcm1hdCxcbiAgICAgICAgICAgICAgICBiYXNlSVJJOiB0aGlzLm9wdGlvbnMuYmFzZUlSSSxcbiAgICAgICAgICAgICAgICBuYW1lc3BhY2VNYW5hZ2VyOiB0aGlzLm5hbWVzcGFjZU1hbmFnZXIsXG4gICAgICAgICAgICAgICAgdmFsaWRhdGVJbnB1dDogZmFsc2UsIC8vIERvbid0IHZhbGlkYXRlIGZvciBwcmV2aWV3XG4gICAgICAgICAgICAgICAgc3RyaWN0TW9kZTogZmFsc2VcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMucGFyc2VyLnBhcnNlKHRoaXMuZmlsZUNvbnRlbnQsIHBhcnNlT3B0aW9ucyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChyZXN1bHQuaXNTdWNjZXNzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcGFyc2VSZXN1bHQgPSByZXN1bHQuZ2V0VmFsdWUoKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBwcmV2aWV3RWwuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJldmlldy1zdGF0c1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGg0PkltcG9ydCBQcmV2aWV3PC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzdGF0cy1ncmlkXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtbGFiZWxcIj5UcmlwbGVzOjwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJzdGF0LXZhbHVlXCI+JHtwYXJzZVJlc3VsdC50cmlwbGVDb3VudH08L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzcz1cInN0YXQtaXRlbVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtbGFiZWxcIj5TdWJqZWN0czo8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC12YWx1ZVwiPiR7cGFyc2VSZXN1bHQuZ3JhcGguc3ViamVjdHMoKS5zaXplfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwic3RhdC1pdGVtXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwic3RhdC1sYWJlbFwiPlByZWRpY2F0ZXM6PC9zcGFuPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cInN0YXQtdmFsdWVcIj4ke3BhcnNlUmVzdWx0LmdyYXBoLnByZWRpY2F0ZXMoKS5zaXplfTwvc3Bhbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgJHtPYmplY3Qua2V5cyhwYXJzZVJlc3VsdC5uYW1lc3BhY2VzKS5sZW5ndGggPiAwID8gYFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJuYW1lc3BhY2VzXCI+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+TmFtZXNwYWNlcyBmb3VuZDo8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtPYmplY3QuZW50cmllcyhwYXJzZVJlc3VsdC5uYW1lc3BhY2VzKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zbGljZSgwLCA1KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKFtwcmVmaXgsIHVyaV0pID0+IGA8bGk+JHtwcmVmaXh9OiAke3VyaX08L2xpPmApXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmpvaW4oJycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtPYmplY3Qua2V5cyhwYXJzZVJlc3VsdC5uYW1lc3BhY2VzKS5sZW5ndGggPiA1ID8gJzxsaT4uLi4gYW5kIG1vcmU8L2xpPicgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIGAgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICR7cGFyc2VSZXN1bHQud2FybmluZ3M/Lmxlbmd0aCA/IGBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwid2FybmluZ3NcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5XYXJuaW5nczo8L3N0cm9uZz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHVsPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtwYXJzZVJlc3VsdC53YXJuaW5ncy5zbGljZSgwLCAzKS5tYXAodyA9PiBgPGxpPiR7d308L2xpPmApLmpvaW4oJycpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHtwYXJzZVJlc3VsdC53YXJuaW5ncy5sZW5ndGggPiAzID8gJzxsaT4uLi4gYW5kIG1vcmU8L2xpPicgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC91bD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgIGAgOiAnJ31cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJzYW1wbGUtdHJpcGxlc1wiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPGg0PlNhbXBsZSBUcmlwbGVzPC9oND5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxwcmUgY2xhc3M9XCJ0cmlwbGUtc2FtcGxlXCI+JHt0aGlzLmZvcm1hdFNhbXBsZVRyaXBsZXMocGFyc2VSZXN1bHQuZ3JhcGgpfTwvcHJlPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBgO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBwcmV2aWV3RWwuaW5uZXJIVE1MID0gYFxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJldmlldy1lcnJvclwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgPHN0cm9uZz5QYXJzZSBFcnJvcjo8L3N0cm9uZz4gJHtyZXN1bHQuZXJyb3JWYWx1ZSgpfVxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICBgO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgcHJldmlld0VsLmlubmVySFRNTCA9IGBcbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwicHJldmlldy1lcnJvclwiPlxuICAgICAgICAgICAgICAgICAgICA8c3Ryb25nPlByZXZpZXcgRXJyb3I6PC9zdHJvbmc+ICR7ZXJyb3IubWVzc2FnZX1cbiAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIGA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogRm9ybWF0IHNhbXBsZSB0cmlwbGVzIGZvciBkaXNwbGF5XG4gICAgICovXG4gICAgcHJpdmF0ZSBmb3JtYXRTYW1wbGVUcmlwbGVzKGdyYXBoOiBHcmFwaCk6IHN0cmluZyB7XG4gICAgICAgIGNvbnN0IHRyaXBsZXMgPSBncmFwaC50b0FycmF5KCkuc2xpY2UoMCwgNSk7XG4gICAgICAgIHJldHVybiB0cmlwbGVzLm1hcCh0cmlwbGUgPT4gdHJpcGxlLnRvU3RyaW5nKCkpLmpvaW4oJ1xcbicpICsgXG4gICAgICAgICAgICAgICAoZ3JhcGguc2l6ZSgpID4gNSA/ICdcXG4uLi4gYW5kIG1vcmUnIDogJycpO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBGb3JtYXQgZmlsZSBzaXplXG4gICAgICovXG4gICAgcHJpdmF0ZSBmb3JtYXRGaWxlU2l6ZShieXRlczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICAgICAgaWYgKGJ5dGVzIDwgMTAyNCkgcmV0dXJuIGJ5dGVzICsgJyBCJztcbiAgICAgICAgaWYgKGJ5dGVzIDwgMTAyNCAqIDEwMjQpIHJldHVybiBNYXRoLnJvdW5kKGJ5dGVzIC8gMTAyNCkgKyAnIEtCJztcbiAgICAgICAgcmV0dXJuIE1hdGgucm91bmQoYnl0ZXMgLyAoMTAyNCAqIDEwMjQpKSArICcgTUInO1xuICAgIH1cbiAgICBcbiAgICAvKipcbiAgICAgKiBIYW5kbGUgaW1wb3J0IGFjdGlvblxuICAgICAqL1xuICAgIHByaXZhdGUgYXN5bmMgaGFuZGxlSW1wb3J0KCk6IFByb21pc2U8dm9pZD4ge1xuICAgICAgICBpZiAoIXRoaXMuc2VsZWN0ZWRGaWxlIHx8ICF0aGlzLmZpbGVDb250ZW50KSB7XG4gICAgICAgICAgICBuZXcgTm90aWNlKCdObyBmaWxlIHNlbGVjdGVkJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBwYXJzZU9wdGlvbnM6IFBhcnNlT3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IHRoaXMub3B0aW9ucy5mb3JtYXQsXG4gICAgICAgICAgICAgICAgYmFzZUlSSTogdGhpcy5vcHRpb25zLmJhc2VJUkksXG4gICAgICAgICAgICAgICAgbmFtZXNwYWNlTWFuYWdlcjogdGhpcy5uYW1lc3BhY2VNYW5hZ2VyLFxuICAgICAgICAgICAgICAgIHZhbGlkYXRlSW5wdXQ6IHRoaXMub3B0aW9ucy52YWxpZGF0ZUlucHV0LFxuICAgICAgICAgICAgICAgIHN0cmljdE1vZGU6IHRoaXMub3B0aW9ucy5zdHJpY3RNb2RlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnBhcnNlci5wYXJzZSh0aGlzLmZpbGVDb250ZW50LCBwYXJzZU9wdGlvbnMpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocmVzdWx0LmlzRmFpbHVyZSkge1xuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEltcG9ydCBmYWlsZWQ6ICR7cmVzdWx0LmVycm9yVmFsdWUoKX1gKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlUmVzdWx0ID0gcmVzdWx0LmdldFZhbHVlKCk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEhhbmRsZSBtZXJnZSBtb2RlXG4gICAgICAgICAgICBsZXQgZmluYWxHcmFwaDogR3JhcGg7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMubWVyZ2VNb2RlID09PSAncmVwbGFjZScpIHtcbiAgICAgICAgICAgICAgICBmaW5hbEdyYXBoID0gcGFyc2VSZXN1bHQuZ3JhcGg7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vIE1lcmdlIHdpdGggZXhpc3RpbmcgZ3JhcGhcbiAgICAgICAgICAgICAgICBmaW5hbEdyYXBoID0gdGhpcy5ncmFwaC5jbG9uZSgpO1xuICAgICAgICAgICAgICAgIGZpbmFsR3JhcGgubWVyZ2UocGFyc2VSZXN1bHQuZ3JhcGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBDYWxsIG9uSW1wb3J0IGNhbGxiYWNrXG4gICAgICAgICAgICBpZiAodGhpcy5vbkltcG9ydCkge1xuICAgICAgICAgICAgICAgIHRoaXMub25JbXBvcnQocGFyc2VSZXN1bHQuZ3JhcGgsIHRoaXMub3B0aW9ucyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLm9wdGlvbnMubWVyZ2VNb2RlID09PSAncmVwbGFjZSdcbiAgICAgICAgICAgICAgICA/IGBSZXBsYWNlZCBncmFwaCB3aXRoICR7cGFyc2VSZXN1bHQudHJpcGxlQ291bnR9IHRyaXBsZXNgXG4gICAgICAgICAgICAgICAgOiBgQWRkZWQgJHtwYXJzZVJlc3VsdC50cmlwbGVDb3VudH0gdHJpcGxlcyB0byBncmFwaGA7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIG5ldyBOb3RpY2UobWVzc2FnZSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChwYXJzZVJlc3VsdC53YXJuaW5ncz8ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgV2FybmluZ3M6ICR7cGFyc2VSZXN1bHQud2FybmluZ3MubGVuZ3RofSB3YXJuaW5ncyBmb3VuZGAsIDMwMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAocGFyc2VSZXN1bHQuZXJyb3JzPy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcnM6ICR7cGFyc2VSZXN1bHQuZXJyb3JzLmxlbmd0aH0gZXJyb3JzIGZvdW5kYCwgMzAwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICAgIFxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgbmV3IE5vdGljZShgSW1wb3J0IGVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLyoqXG4gICAgICogQWRkIGN1c3RvbSBzdHlsZXNcbiAgICAgKi9cbiAgICBwcml2YXRlIGFkZFN0eWxlcygpOiB2b2lkIHtcbiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGBcbiAgICAgICAgICAgIC5jdXJyZW50LXN0YXRzLCAucHJldmlldy1zdGF0cyB7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5zdGF0cy1ncmlkIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGdhcDogMjBweDtcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAxMHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuc3RhdC1pdGVtIHtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLnN0YXQtbGFiZWwge1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcbiAgICAgICAgICAgICAgICBjb2xvcjogdmFyKC0tdGV4dC1tdXRlZCk7XG4gICAgICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMnB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuc3RhdC12YWx1ZSB7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtbm9ybWFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLmZpbGUtc2VsZWN0aW9uIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDIwcHggMDtcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAxNXB4O1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA2cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5maWxlLWlucHV0LWNvbnRhaW5lciB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC51cGxvYWQtY29udGFpbmVyIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xuICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gICAgICAgICAgICAgICAgZ2FwOiAxMHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuc2VsZWN0ZWQtZmlsZSB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiAxMHB4IDA7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTBweDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnktYWx0KTtcbiAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiA0cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5zZWxlY3RlZC1maWxlLWluZm8ge1xuICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XG4gICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcbiAgICAgICAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5maWxlLXNpemUge1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW11dGVkKTtcbiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5wcmV2aWV3LWNvbnRlbnQge1xuICAgICAgICAgICAgICAgIG1heC1oZWlnaHQ6IDMwMHB4O1xuICAgICAgICAgICAgICAgIG92ZXJmbG93LXk6IGF1dG87XG4gICAgICAgICAgICAgICAgcGFkZGluZzogMTVweDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSk7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAucHJldmlldy1lcnJvciB7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtZXJyb3IpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgICAgICAgYmFja2dyb3VuZDogdmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1lcnJvcik7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAubmFtZXNwYWNlcywgLndhcm5pbmdzIHtcbiAgICAgICAgICAgICAgICBtYXJnaW46IDEwcHggMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLm5hbWVzcGFjZXMgdWwsIC53YXJuaW5ncyB1bCB7XG4gICAgICAgICAgICAgICAgbWFyZ2luOiA1cHggMCAwIDIwcHg7XG4gICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAud2FybmluZ3Mge1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LXdhcm5pbmcpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAuc2FtcGxlLXRyaXBsZXMge1xuICAgICAgICAgICAgICAgIG1hcmdpbi10b3A6IDE1cHg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC50cmlwbGUtc2FtcGxlIHtcbiAgICAgICAgICAgICAgICBmb250LWZhbWlseTogdmFyKC0tZm9udC1tb25vc3BhY2UpO1xuICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTFweDtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgICAgIG92ZXJmbG93LXg6IGF1dG87XG4gICAgICAgICAgICAgICAgbWFyZ2luOiA1cHggMCAwIDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5pbXBvcnQtYnV0dG9ucyB7XG4gICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICAgICAgICBnYXA6IDEwcHg7XG4gICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcbiAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4O1xuICAgICAgICAgICAgICAgIHBhZGRpbmctdG9wOiAyMHB4O1xuICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlcik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5tb2RhbC1idXR0b24tY29udGFpbmVyIGJ1dHRvbiB7XG4gICAgICAgICAgICAgICAgcGFkZGluZzogOHB4IDE2cHg7XG4gICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgICAgICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKTtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpO1xuICAgICAgICAgICAgICAgIGNvbG9yOiB2YXIoLS10ZXh0LW5vcm1hbCk7XG4gICAgICAgICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICAubW9kYWwtYnV0dG9uLWNvbnRhaW5lciBidXR0b246aG92ZXI6bm90KDpkaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLm1vZGFsLWJ1dHRvbi1jb250YWluZXIgYnV0dG9uOmRpc2FibGVkIHtcbiAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgICAgICAgICAgY3Vyc29yOiBub3QtYWxsb3dlZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLm1vZGFsLWJ1dHRvbi1jb250YWluZXIgYnV0dG9uLm1vZC1jdGE6bm90KDpkaXNhYmxlZCkge1xuICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgICAgICAgY29sb3I6IHZhcigtLXRleHQtb24tYWNjZW50KTtcbiAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IHZhcigtLWludGVyYWN0aXZlLWFjY2VudCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5tb2RhbC1idXR0b24tY29udGFpbmVyIGJ1dHRvbi5tb2QtY3RhOmhvdmVyOm5vdCg6ZGlzYWJsZWQpIHtcbiAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB2YXIoLS1pbnRlcmFjdGl2ZS1hY2NlbnQtaG92ZXIpO1xuICAgICAgICAgICAgICAgIGJvcmRlci1jb2xvcjogdmFyKC0taW50ZXJhY3RpdmUtYWNjZW50LWhvdmVyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgYDtcbiAgICAgICAgXG4gICAgICAgIGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuICAgIH1cbiAgICBcbiAgICBvbkNsb3NlKCkge1xuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XG4gICAgfVxufSJdLCJ2ZXJzaW9uIjozfQ==