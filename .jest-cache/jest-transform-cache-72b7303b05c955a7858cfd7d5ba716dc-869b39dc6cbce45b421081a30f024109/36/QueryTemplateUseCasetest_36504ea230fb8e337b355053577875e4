65d1759ac3687e3f3518258b235b36d6
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const QueryTemplateUseCase_1 = require("../../../../src/application/use-cases/QueryTemplateUseCase");
const QueryTemplate_1 = require("../../../../src/domain/visual/QueryTemplate");
const VisualQueryNode_1 = require("../../../../src/domain/visual/VisualQueryNode");
// Mock repository
const mockTemplateRepository = {
    findAll: jest.fn(),
    findByCriteria: jest.fn(),
    findById: jest.fn(),
    findByCategory: jest.fn(),
    findByTags: jest.fn(),
    save: jest.fn(),
    create: jest.fn(),
    update: jest.fn(),
    delete: jest.fn(),
    exists: jest.fn(),
    importTemplates: jest.fn(),
    exportTemplates: jest.fn(),
    getBuiltInTemplates: jest.fn(),
    getCustomTemplates: jest.fn(),
    getRecentlyUsed: jest.fn(),
    recordUsage: jest.fn(),
    getUsageStats: jest.fn(),
    refresh: jest.fn()
};
describe('QueryTemplateUseCase', () => {
    let useCase;
    let mockTemplate;
    beforeEach(() => {
        jest.clearAllMocks();
        useCase = new QueryTemplateUseCase_1.QueryTemplateUseCase(mockTemplateRepository);
        // Create a mock template
        const mockMetadata = {
            name: 'Test Template',
            description: 'A test template',
            category: QueryTemplate_1.TemplateCategory.EXPLORATION,
            tags: ['test'],
            difficulty: 'beginner',
            createdAt: new Date('2024-01-01'),
            updatedAt: new Date('2024-01-01'),
            version: '1.0.0'
        };
        mockTemplate = new QueryTemplate_1.QueryTemplate({
            id: 'test-template',
            metadata: mockMetadata,
            layout: {
                nodes: [{
                        id: 'node1',
                        type: VisualQueryNode_1.NodeType.ENTITY,
                        label: 'Test Entity',
                        position: { x: 100, y: 100 }
                    }],
                edges: [],
                viewport: { x: 0, y: 0, zoom: 1 }
            }
        });
    });
    describe('Template Retrieval', () => {
        it('should get all templates', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockTemplates = [mockTemplate];
            mockTemplateRepository.findAll.mockResolvedValue(mockTemplates);
            const result = yield useCase.getAllTemplates();
            expect(mockTemplateRepository.findAll).toHaveBeenCalledTimes(1);
            expect(result).toEqual(mockTemplates);
        }));
        it('should get template by ID', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockTemplateRepository.findById.mockResolvedValue(mockTemplate);
            const result = yield useCase.getTemplateById('test-template');
            expect(mockTemplateRepository.findById).toHaveBeenCalledWith('test-template');
            expect(result).toBe(mockTemplate);
        }));
        it('should search templates with criteria', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const criteria = { category: QueryTemplate_1.TemplateCategory.EXPLORATION };
            const mockTemplates = [mockTemplate];
            mockTemplateRepository.findByCriteria.mockResolvedValue(mockTemplates);
            const result = yield useCase.searchTemplates(criteria);
            expect(mockTemplateRepository.findByCriteria).toHaveBeenCalledWith(criteria);
            expect(result).toEqual(mockTemplates);
        }));
        it('should get templates by category', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockTemplates = [mockTemplate];
            mockTemplateRepository.findByCategory.mockResolvedValue(mockTemplates);
            const result = yield useCase.getTemplatesByCategory(QueryTemplate_1.TemplateCategory.EXPLORATION);
            expect(mockTemplateRepository.findByCategory).toHaveBeenCalledWith(QueryTemplate_1.TemplateCategory.EXPLORATION);
            expect(result).toEqual(mockTemplates);
        }));
        it('should get built-in templates', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockTemplates = [mockTemplate];
            mockTemplateRepository.getBuiltInTemplates.mockResolvedValue(mockTemplates);
            const result = yield useCase.getBuiltInTemplates();
            expect(mockTemplateRepository.getBuiltInTemplates).toHaveBeenCalledTimes(1);
            expect(result).toEqual(mockTemplates);
        }));
        it('should get custom templates', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockTemplates = [mockTemplate];
            mockTemplateRepository.getCustomTemplates.mockResolvedValue(mockTemplates);
            const result = yield useCase.getCustomTemplates();
            expect(mockTemplateRepository.getCustomTemplates).toHaveBeenCalledTimes(1);
            expect(result).toEqual(mockTemplates);
        }));
        it('should get recent templates', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockTemplates = [mockTemplate];
            mockTemplateRepository.getRecentlyUsed.mockResolvedValue(mockTemplates);
            const result = yield useCase.getRecentTemplates(5);
            expect(mockTemplateRepository.getRecentlyUsed).toHaveBeenCalledWith(5);
            expect(result).toEqual(mockTemplates);
        }));
    });
    describe('Template Management', () => {
        it('should save a template', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockTemplateRepository.save.mockResolvedValue(mockTemplate);
            const result = yield useCase.saveTemplate(mockTemplate);
            expect(mockTemplateRepository.save).toHaveBeenCalledWith(mockTemplate);
            expect(result).toBe(mockTemplate);
        }));
        it('should prevent saving built-in templates', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const builtInTemplate = new QueryTemplate_1.QueryTemplate({
                id: 'builtin-test',
                metadata: mockTemplate.getMetadata(),
                layout: mockTemplate.getLayout(),
                isBuiltIn: true
            });
            yield expect(useCase.saveTemplate(builtInTemplate))
                .rejects.toThrow('Cannot save built-in templates');
        }));
        it('should create a custom template', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const nodes = new Map();
            const edges = new Map();
            const viewport = { x: 0, y: 0, zoom: 1 };
            mockTemplateRepository.create.mockResolvedValue(mockTemplate);
            const result = yield useCase.createCustomTemplate(nodes, edges, viewport, 'Custom Template', 'A custom template', QueryTemplate_1.TemplateCategory.CUSTOM, ['custom', 'test']);
            expect(mockTemplateRepository.create).toHaveBeenCalledTimes(1);
            expect(result).toBe(mockTemplate);
        }));
        it('should clone a template', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const clonedTemplate = mockTemplate.clone('cloned-id');
            mockTemplateRepository.findById.mockResolvedValue(mockTemplate);
            mockTemplateRepository.create.mockResolvedValue(clonedTemplate);
            const result = yield useCase.cloneTemplate('test-template', 'Cloned Template');
            expect(mockTemplateRepository.findById).toHaveBeenCalledWith('test-template');
            expect(mockTemplateRepository.create).toHaveBeenCalledTimes(1);
            expect(result).toBe(clonedTemplate);
        }));
        it('should throw error when cloning non-existent template', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockTemplateRepository.findById.mockResolvedValue(undefined);
            yield expect(useCase.cloneTemplate('nonexistent'))
                .rejects.toThrow('Template with ID nonexistent not found');
        }));
        it('should delete a template', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockTemplateRepository.findById.mockResolvedValue(mockTemplate);
            mockTemplateRepository.delete.mockResolvedValue(true);
            const result = yield useCase.deleteTemplate('test-template');
            expect(mockTemplateRepository.findById).toHaveBeenCalledWith('test-template');
            expect(mockTemplateRepository.delete).toHaveBeenCalledWith('test-template');
            expect(result).toBe(true);
        }));
        it('should prevent deleting built-in templates', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const builtInTemplate = new QueryTemplate_1.QueryTemplate({
                id: 'builtin-test',
                metadata: mockTemplate.getMetadata(),
                layout: mockTemplate.getLayout(),
                isBuiltIn: true
            });
            mockTemplateRepository.findById.mockResolvedValue(builtInTemplate);
            yield expect(useCase.deleteTemplate('builtin-test'))
                .rejects.toThrow('Cannot delete built-in templates');
        }));
    });
    describe('Template Instantiation', () => {
        it('should instantiate a template with valid parameters', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            // Mock a template with parameters
            const parameterizedTemplate = new QueryTemplate_1.QueryTemplate({
                id: 'param-template',
                metadata: mockTemplate.getMetadata(),
                layout: mockTemplate.getLayout(),
                parameters: [{
                        id: 'param1',
                        name: 'Test Param',
                        description: 'A test parameter',
                        type: 'entity',
                        required: true
                    }]
            });
            parameterizedTemplate.setParameterValue('param1', 'test-value');
            mockTemplateRepository.recordUsage.mockResolvedValue();
            const result = yield useCase.instantiateTemplate(parameterizedTemplate);
            expect(mockTemplateRepository.recordUsage).toHaveBeenCalledWith('param-template');
            expect(result).toHaveProperty('nodes');
            expect(result).toHaveProperty('edges');
        }));
        it('should throw error when instantiating template with invalid parameters', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const parameterizedTemplate = new QueryTemplate_1.QueryTemplate({
                id: 'param-template',
                metadata: mockTemplate.getMetadata(),
                layout: mockTemplate.getLayout(),
                parameters: [{
                        id: 'param1',
                        name: 'Test Param',
                        description: 'A test parameter',
                        type: 'entity',
                        required: true
                    }]
            });
            // Don't set the required parameter
            yield expect(useCase.instantiateTemplate(parameterizedTemplate))
                .rejects.toThrow('Template parameters are invalid');
        }));
    });
    describe('Import/Export', () => {
        it('should export templates as JSON', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockExportData = [{ id: 'test', name: 'Test' }];
            mockTemplateRepository.exportTemplates.mockResolvedValue(mockExportData);
            const result = yield useCase.exportTemplates(['test-template']);
            expect(mockTemplateRepository.exportTemplates).toHaveBeenCalledWith(['test-template']);
            expect(result).toBe(JSON.stringify(mockExportData, null, 2));
        }));
        it('should import templates from JSON', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const jsonData = JSON.stringify([{ id: 'test', name: 'Test' }]);
            const mockTemplates = [mockTemplate];
            mockTemplateRepository.importTemplates.mockResolvedValue(mockTemplates);
            const result = yield useCase.importTemplates(jsonData);
            expect(mockTemplateRepository.importTemplates).toHaveBeenCalledWith([{ id: 'test', name: 'Test' }]);
            expect(result).toEqual(mockTemplates);
        }));
        it('should throw error for invalid JSON in import', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const invalidJson = 'invalid json';
            yield expect(useCase.importTemplates(invalidJson))
                .rejects.toThrow('Failed to import templates');
        }));
        it('should throw error for non-array JSON in import', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const nonArrayJson = JSON.stringify({ not: 'array' });
            yield expect(useCase.importTemplates(nonArrayJson))
                .rejects.toThrow('Invalid JSON format: expected array of templates');
        }));
    });
    describe('Statistics and Analytics', () => {
        it('should get usage statistics', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const mockStats = {
                usageCount: 5,
                lastUsed: new Date(),
                averageParametersFilled: 2.5
            };
            mockTemplateRepository.getUsageStats.mockResolvedValue(mockStats);
            const result = yield useCase.getUsageStatistics('test-template');
            expect(mockTemplateRepository.getUsageStats).toHaveBeenCalledWith('test-template');
            expect(result).toEqual(mockStats);
        }));
        it('should get template preview information', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockTemplateRepository.findById.mockResolvedValue(mockTemplate);
            const result = yield useCase.getTemplatePreview('test-template');
            expect(result).toHaveProperty('sparqlQuery');
            expect(result).toHaveProperty('nodeCount');
            expect(result).toHaveProperty('edgeCount');
            expect(result).toHaveProperty('parameterCount');
            expect(result).toHaveProperty('complexity');
            expect(result.nodeCount).toBe(1);
            expect(result.edgeCount).toBe(0);
            expect(result.parameterCount).toBe(0);
        }));
        it('should throw error when previewing non-existent template', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockTemplateRepository.findById.mockResolvedValue(undefined);
            yield expect(useCase.getTemplatePreview('nonexistent'))
                .rejects.toThrow('Template with ID nonexistent not found');
        }));
    });
    describe('Template Validation', () => {
        it('should validate template parameters comprehensively', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            const parameterizedTemplate = new QueryTemplate_1.QueryTemplate({
                id: 'param-template',
                metadata: mockTemplate.getMetadata(),
                layout: mockTemplate.getLayout(),
                parameters: [
                    {
                        id: 'required-param',
                        name: 'Required Parameter',
                        description: 'A required parameter',
                        type: 'entity',
                        required: true
                    },
                    {
                        id: 'optional-param',
                        name: 'Optional Parameter',
                        description: 'An optional parameter',
                        type: 'literal',
                        required: false
                    }
                ]
            });
            const result = yield useCase.validateTemplateParameters(parameterizedTemplate);
            expect(result.isValid).toBe(false);
            expect(result.errors).toContain('Parameter Required Parameter is required');
            expect(result.missingParameters).toContain('Required Parameter');
            expect(result.invalidParameters).toHaveLength(0);
        }));
    });
    describe('Cache Management', () => {
        it('should refresh template cache', () => tslib_1.__awaiter(void 0, void 0, void 0, function* () {
            mockTemplateRepository.refresh.mockResolvedValue();
            yield useCase.refreshTemplateCache();
            expect(mockTemplateRepository.refresh).toHaveBeenCalledTimes(1);
        }));
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL1VzZXJzL2tpdGVsZXYvRG9jdW1lbnRzL2V4b2NvcnRleC1vYnNpZGlhbi1wbHVnaW4vdGVzdHMvdW5pdC9hcHBsaWNhdGlvbi91c2UtY2FzZXMvUXVlcnlUZW1wbGF0ZVVzZUNhc2UudGVzdC50cyIsIm1hcHBpbmdzIjoiOzs7QUFBQSxxR0FBa0c7QUFFbEcsK0VBQWdIO0FBQ2hILG1GQUF5RTtBQUV6RSxrQkFBa0I7QUFDbEIsTUFBTSxzQkFBc0IsR0FBMEM7SUFDbEUsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDbEIsY0FBYyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDekIsUUFBUSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDbkIsY0FBYyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDekIsVUFBVSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDckIsSUFBSSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDZixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNqQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNqQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNqQixNQUFNLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUNqQixlQUFlLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUMxQixlQUFlLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRTtJQUMxQixtQkFBbUIsRUFBRSxJQUFJLENBQUMsRUFBRSxFQUFFO0lBQzlCLGtCQUFrQixFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDN0IsZUFBZSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDMUIsV0FBVyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDdEIsYUFBYSxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7SUFDeEIsT0FBTyxFQUFFLElBQUksQ0FBQyxFQUFFLEVBQUU7Q0FDckIsQ0FBQztBQUVGLFFBQVEsQ0FBQyxzQkFBc0IsRUFB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QUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQ25DLE1BQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUMsU0FBUyxDQUFDLDBDQUEwQyxDQUFDLENBQUM7WUFDNUUsTUFBTSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1lBQ2pFLE1BQU0sQ0FBQyxNQUFNLENBQUMsaUJBQWlCLENBQUMsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDckQsQ0FBQyxDQUFBLENBQUMsQ0FBQztJQUNQLENBQUMsQ0FBQyxDQUFDO0lBRUgsUUFBUSxDQUFDLGtCQUFrQixFQUFFLEdBQUcsRUFBRTtRQUM5QixFQUFFLENBQUMsK0JBQStCLEVBQUUsR0FBUyxFQUFFO1lBQzNDLHNCQUFzQixDQUFDLE9BQU8sQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO1lBRW5ELE1BQU0sT0FBTyxDQUFDLG9CQUFvQixFQUFFLENBQUM7WUFFckMsTUFBTSxDQUFDLHNCQUFzQixDQUFDLE9BQU8sQ0FBQyxDQUFDLHFCQUFxQixDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3BFLENBQUMsQ0FBQSxDQUFDLENBQUM7SUFDUCxDQUFDLENBQUMsQ0FBQztBQUNQLENBQUMsQ0FBQyxDQUFDIiwibmFtZXMiOltdLCJzb3VyY2VzIjpbIi9Vc2Vycy9raXRlbGV2L0RvY3VtZW50cy9leG9jb3J0ZXgtb2JzaWRpYW4tcGx1Z2luL3Rlc3RzL3VuaXQvYXBwbGljYXRpb24vdXNlLWNhc2VzL1F1ZXJ5VGVtcGxhdGVVc2VDYXNlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUXVlcnlUZW1wbGF0ZVVzZUNhc2UgfSBmcm9tICcuLi8uLi8uLi8uLi9zcmMvYXBwbGljYXRpb24vdXNlLWNhc2VzL1F1ZXJ5VGVtcGxhdGVVc2VDYXNlJztcbmltcG9ydCB7IElRdWVyeVRlbXBsYXRlUmVwb3NpdG9yeSB9IGZyb20gJy4uLy4uLy4uLy4uL3NyYy9kb21haW4vcmVwb3NpdG9yaWVzL0lRdWVyeVRlbXBsYXRlUmVwb3NpdG9yeSc7XG5pbXBvcnQgeyBRdWVyeVRlbXBsYXRlLCBUZW1wbGF0ZUNhdGVnb3J5LCBUZW1wbGF0ZU1ldGFkYXRhIH0gZnJvbSAnLi4vLi4vLi4vLi4vc3JjL2RvbWFpbi92aXN1YWwvUXVlcnlUZW1wbGF0ZSc7XG5pbXBvcnQgeyBOb2RlVHlwZSB9IGZyb20gJy4uLy4uLy4uLy4uL3NyYy9kb21haW4vdmlzdWFsL1Zpc3VhbFF1ZXJ5Tm9kZSc7XG5cbi8vIE1vY2sgcmVwb3NpdG9yeVxuY29uc3QgbW9ja1RlbXBsYXRlUmVwb3NpdG9yeTogamVzdC5Nb2NrZWQ8SVF1ZXJ5VGVtcGxhdGVSZXBvc2l0b3J5PiA9IHtcbiAgICBmaW5kQWxsOiBqZXN0LmZuKCksXG4gICAgZmluZEJ5Q3JpdGVyaWE6IGplc3QuZm4oKSxcbiAgICBmaW5kQnlJZDogamVzdC5mbigpLFxuICAgIGZpbmRCeUNhdGVnb3J5OiBqZXN0LmZuKCksXG4gICAgZmluZEJ5VGFnczogamVzdC5mbigpLFxuICAgIHNhdmU6IGplc3QuZm4oKSxcbiAgICBjcmVhdGU6IGplc3QuZm4oKSxcbiAgICB1cGRhdGU6IGplc3QuZm4oKSxcbiAgICBkZWxldGU6IGplc3QuZm4oKSxcbiAgICBleGlzdHM6IGplc3QuZm4oKSxcbiAgICBpbXBvcnRUZW1wbGF0ZXM6IGplc3QuZm4oKSxcbiAgICBleHBvcnRUZW1wbGF0ZXM6IGplc3QuZm4oKSxcbiAgICBnZXRCdWlsdEluVGVtcGxhdGVzOiBqZXN0LmZuKCksXG4gICAgZ2V0Q3VzdG9tVGVtcGxhdGVzOiBqZXN0LmZuKCksXG4gICAgZ2V0UmVjZW50bHlVc2VkOiBqZXN0LmZuKCksXG4gICAgcmVjb3JkVXNhZ2U6IGplc3QuZm4oKSxcbiAgICBnZXRVc2FnZVN0YXRzOiBqZXN0LmZuKCksXG4gICAgcmVmcmVzaDogamVzdC5mbigpXG59O1xuXG5kZXNjcmliZSgnUXVlcnlUZW1wbGF0ZVVzZUNhc2UnLCAoKSA9PiB7XG4gICAgbGV0IHVzZUNhc2U6IFF1ZXJ5VGVtcGxhdGVVc2VDYXNlO1xuICAgIGxldCBtb2NrVGVtcGxhdGU6IFF1ZXJ5VGVtcGxhdGU7XG5cbiAgICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICAgICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gICAgICAgIHVzZUNhc2UgPSBuZXcgUXVlcnlUZW1wbGF0ZVVzZUNhc2UobW9ja1RlbXBsYXRlUmVwb3NpdG9yeSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGEgbW9jayB0ZW1wbGF0ZVxuICAgICAgICBjb25zdCBtb2NrTWV0YWRhdGE6IFRlbXBsYXRlTWV0YWRhdGEgPSB7XG4gICAgICAgICAgICBuYW1lOiAnVGVzdCBUZW1wbGF0ZScsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0EgdGVzdCB0ZW1wbGF0ZScsXG4gICAgICAgICAgICBjYXRlZ29yeTogVGVtcGxhdGVDYXRlZ29yeS5FWFBMT1JBVElPTixcbiAgICAgICAgICAgIHRhZ3M6IFsndGVzdCddLFxuICAgICAgICAgICAgZGlmZmljdWx0eTogJ2JlZ2lubmVyJyxcbiAgICAgICAgICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoJzIwMjQtMDEtMDEnKSxcbiAgICAgICAgICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoJzIwMjQtMDEtMDEnKSxcbiAgICAgICAgICAgIHZlcnNpb246ICcxLjAuMCdcbiAgICAgICAgfTtcblxuICAgICAgICBtb2NrVGVtcGxhdGUgPSBuZXcgUXVlcnlUZW1wbGF0ZSh7XG4gICAgICAgICAgICBpZDogJ3Rlc3QtdGVtcGxhdGUnLFxuICAgICAgICAgICAgbWV0YWRhdGE6IG1vY2tNZXRhZGF0YSxcbiAgICAgICAgICAgIGxheW91dDoge1xuICAgICAgICAgICAgICAgIG5vZGVzOiBbe1xuICAgICAgICAgICAgICAgICAgICBpZDogJ25vZGUxJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogTm9kZVR5cGUuRU5USVRZLFxuICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ1Rlc3QgRW50aXR5JyxcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHsgeDogMTAwLCB5OiAxMDAgfVxuICAgICAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgICAgIGVkZ2VzOiBbXSxcbiAgICAgICAgICAgICAgICB2aWV3cG9ydDogeyB4OiAwLCB5OiAwLCB6b29tOiAxIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnVGVtcGxhdGUgUmV0cmlldmFsJywgKCkgPT4ge1xuICAgICAgICBpdCgnc2hvdWxkIGdldCBhbGwgdGVtcGxhdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW9ja1RlbXBsYXRlcyA9IFttb2NrVGVtcGxhdGVdO1xuICAgICAgICAgICAgbW9ja1RlbXBsYXRlUmVwb3NpdG9yeS5maW5kQWxsLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUZW1wbGF0ZXMpO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmdldEFsbFRlbXBsYXRlcygpO1xuXG4gICAgICAgICAgICBleHBlY3QobW9ja1RlbXBsYXRlUmVwb3NpdG9yeS5maW5kQWxsKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tUZW1wbGF0ZXMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGdldCB0ZW1wbGF0ZSBieSBJRCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIG1vY2tUZW1wbGF0ZVJlcG9zaXRvcnkuZmluZEJ5SWQubW9ja1Jlc29sdmVkVmFsdWUobW9ja1RlbXBsYXRlKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5nZXRUZW1wbGF0ZUJ5SWQoJ3Rlc3QtdGVtcGxhdGUnKTtcblxuICAgICAgICAgICAgZXhwZWN0KG1vY2tUZW1wbGF0ZVJlcG9zaXRvcnkuZmluZEJ5SWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCd0ZXN0LXRlbXBsYXRlJyk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKG1vY2tUZW1wbGF0ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgc2VhcmNoIHRlbXBsYXRlcyB3aXRoIGNyaXRlcmlhJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgY3JpdGVyaWEgPSB7IGNhdGVnb3J5OiBUZW1wbGF0ZUNhdGVnb3J5LkVYUExPUkFUSU9OIH07XG4gICAgICAgICAgICBjb25zdCBtb2NrVGVtcGxhdGVzID0gW21vY2tUZW1wbGF0ZV07XG4gICAgICAgICAgICBtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LmZpbmRCeUNyaXRlcmlhLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUZW1wbGF0ZXMpO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLnNlYXJjaFRlbXBsYXRlcyhjcml0ZXJpYSk7XG5cbiAgICAgICAgICAgIGV4cGVjdChtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LmZpbmRCeUNyaXRlcmlhKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChjcml0ZXJpYSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tUZW1wbGF0ZXMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGdldCB0ZW1wbGF0ZXMgYnkgY2F0ZWdvcnknLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtb2NrVGVtcGxhdGVzID0gW21vY2tUZW1wbGF0ZV07XG4gICAgICAgICAgICBtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LmZpbmRCeUNhdGVnb3J5Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUZW1wbGF0ZXMpO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmdldFRlbXBsYXRlc0J5Q2F0ZWdvcnkoVGVtcGxhdGVDYXRlZ29yeS5FWFBMT1JBVElPTik7XG5cbiAgICAgICAgICAgIGV4cGVjdChtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LmZpbmRCeUNhdGVnb3J5KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChUZW1wbGF0ZUNhdGVnb3J5LkVYUExPUkFUSU9OKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1RlbXBsYXRlcyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgZ2V0IGJ1aWx0LWluIHRlbXBsYXRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG1vY2tUZW1wbGF0ZXMgPSBbbW9ja1RlbXBsYXRlXTtcbiAgICAgICAgICAgIG1vY2tUZW1wbGF0ZVJlcG9zaXRvcnkuZ2V0QnVpbHRJblRlbXBsYXRlcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVGVtcGxhdGVzKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5nZXRCdWlsdEluVGVtcGxhdGVzKCk7XG5cbiAgICAgICAgICAgIGV4cGVjdChtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LmdldEJ1aWx0SW5UZW1wbGF0ZXMpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1RlbXBsYXRlcyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgZ2V0IGN1c3RvbSB0ZW1wbGF0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtb2NrVGVtcGxhdGVzID0gW21vY2tUZW1wbGF0ZV07XG4gICAgICAgICAgICBtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LmdldEN1c3RvbVRlbXBsYXRlcy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVGVtcGxhdGVzKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5nZXRDdXN0b21UZW1wbGF0ZXMoKTtcblxuICAgICAgICAgICAgZXhwZWN0KG1vY2tUZW1wbGF0ZVJlcG9zaXRvcnkuZ2V0Q3VzdG9tVGVtcGxhdGVzKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tUZW1wbGF0ZXMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGdldCByZWNlbnQgdGVtcGxhdGVzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW9ja1RlbXBsYXRlcyA9IFttb2NrVGVtcGxhdGVdO1xuICAgICAgICAgICAgbW9ja1RlbXBsYXRlUmVwb3NpdG9yeS5nZXRSZWNlbnRseVVzZWQubW9ja1Jlc29sdmVkVmFsdWUobW9ja1RlbXBsYXRlcyk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuZ2V0UmVjZW50VGVtcGxhdGVzKDUpO1xuXG4gICAgICAgICAgICBleHBlY3QobW9ja1RlbXBsYXRlUmVwb3NpdG9yeS5nZXRSZWNlbnRseVVzZWQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKDUpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrVGVtcGxhdGVzKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnVGVtcGxhdGUgTWFuYWdlbWVudCcsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCBzYXZlIGEgdGVtcGxhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LnNhdmUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1RlbXBsYXRlKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5zYXZlVGVtcGxhdGUobW9ja1RlbXBsYXRlKTtcblxuICAgICAgICAgICAgZXhwZWN0KG1vY2tUZW1wbGF0ZVJlcG9zaXRvcnkuc2F2ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgobW9ja1RlbXBsYXRlKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUobW9ja1RlbXBsYXRlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBwcmV2ZW50IHNhdmluZyBidWlsdC1pbiB0ZW1wbGF0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBidWlsdEluVGVtcGxhdGUgPSBuZXcgUXVlcnlUZW1wbGF0ZSh7XG4gICAgICAgICAgICAgICAgaWQ6ICdidWlsdGluLXRlc3QnLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBtb2NrVGVtcGxhdGUuZ2V0TWV0YWRhdGEoKSxcbiAgICAgICAgICAgICAgICBsYXlvdXQ6IG1vY2tUZW1wbGF0ZS5nZXRMYXlvdXQoKSxcbiAgICAgICAgICAgICAgICBpc0J1aWx0SW46IHRydWVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBhd2FpdCBleHBlY3QodXNlQ2FzZS5zYXZlVGVtcGxhdGUoYnVpbHRJblRlbXBsYXRlKSlcbiAgICAgICAgICAgICAgICAucmVqZWN0cy50b1Rocm93KCdDYW5ub3Qgc2F2ZSBidWlsdC1pbiB0ZW1wbGF0ZXMnKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBjcmVhdGUgYSBjdXN0b20gdGVtcGxhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub2RlcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgICAgIGNvbnN0IGVkZ2VzID0gbmV3IE1hcCgpO1xuICAgICAgICAgICAgY29uc3Qgdmlld3BvcnQgPSB7IHg6IDAsIHk6IDAsIHpvb206IDEgfTtcblxuICAgICAgICAgICAgbW9ja1RlbXBsYXRlUmVwb3NpdG9yeS5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUobW9ja1RlbXBsYXRlKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5jcmVhdGVDdXN0b21UZW1wbGF0ZShcbiAgICAgICAgICAgICAgICBub2RlcyxcbiAgICAgICAgICAgICAgICBlZGdlcyxcbiAgICAgICAgICAgICAgICB2aWV3cG9ydCxcbiAgICAgICAgICAgICAgICAnQ3VzdG9tIFRlbXBsYXRlJyxcbiAgICAgICAgICAgICAgICAnQSBjdXN0b20gdGVtcGxhdGUnLFxuICAgICAgICAgICAgICAgIFRlbXBsYXRlQ2F0ZWdvcnkuQ1VTVE9NLFxuICAgICAgICAgICAgICAgIFsnY3VzdG9tJywgJ3Rlc3QnXVxuICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgZXhwZWN0KG1vY2tUZW1wbGF0ZVJlcG9zaXRvcnkuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKG1vY2tUZW1wbGF0ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgY2xvbmUgYSB0ZW1wbGF0ZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGNsb25lZFRlbXBsYXRlID0gbW9ja1RlbXBsYXRlLmNsb25lKCdjbG9uZWQtaWQnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbW9ja1RlbXBsYXRlUmVwb3NpdG9yeS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVGVtcGxhdGUpO1xuICAgICAgICAgICAgbW9ja1RlbXBsYXRlUmVwb3NpdG9yeS5jcmVhdGUubW9ja1Jlc29sdmVkVmFsdWUoY2xvbmVkVGVtcGxhdGUpO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmNsb25lVGVtcGxhdGUoJ3Rlc3QtdGVtcGxhdGUnLCAnQ2xvbmVkIFRlbXBsYXRlJyk7XG5cbiAgICAgICAgICAgIGV4cGVjdChtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LmZpbmRCeUlkKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgndGVzdC10ZW1wbGF0ZScpO1xuICAgICAgICAgICAgZXhwZWN0KG1vY2tUZW1wbGF0ZVJlcG9zaXRvcnkuY3JlYXRlKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0JlKGNsb25lZFRlbXBsYXRlKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCB0aHJvdyBlcnJvciB3aGVuIGNsb25pbmcgbm9uLWV4aXN0ZW50IHRlbXBsYXRlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgbW9ja1RlbXBsYXRlUmVwb3NpdG9yeS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuXG4gICAgICAgICAgICBhd2FpdCBleHBlY3QodXNlQ2FzZS5jbG9uZVRlbXBsYXRlKCdub25leGlzdGVudCcpKVxuICAgICAgICAgICAgICAgIC5yZWplY3RzLnRvVGhyb3coJ1RlbXBsYXRlIHdpdGggSUQgbm9uZXhpc3RlbnQgbm90IGZvdW5kJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgZGVsZXRlIGEgdGVtcGxhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LmZpbmRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUZW1wbGF0ZSk7XG4gICAgICAgICAgICBtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LmRlbGV0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh0cnVlKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5kZWxldGVUZW1wbGF0ZSgndGVzdC10ZW1wbGF0ZScpO1xuXG4gICAgICAgICAgICBleHBlY3QobW9ja1RlbXBsYXRlUmVwb3NpdG9yeS5maW5kQnlJZCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3Rlc3QtdGVtcGxhdGUnKTtcbiAgICAgICAgICAgIGV4cGVjdChtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LmRlbGV0ZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3Rlc3QtdGVtcGxhdGUnKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgcHJldmVudCBkZWxldGluZyBidWlsdC1pbiB0ZW1wbGF0ZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBidWlsdEluVGVtcGxhdGUgPSBuZXcgUXVlcnlUZW1wbGF0ZSh7XG4gICAgICAgICAgICAgICAgaWQ6ICdidWlsdGluLXRlc3QnLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBtb2NrVGVtcGxhdGUuZ2V0TWV0YWRhdGEoKSxcbiAgICAgICAgICAgICAgICBsYXlvdXQ6IG1vY2tUZW1wbGF0ZS5nZXRMYXlvdXQoKSxcbiAgICAgICAgICAgICAgICBpc0J1aWx0SW46IHRydWVcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LmZpbmRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKGJ1aWx0SW5UZW1wbGF0ZSk7XG5cbiAgICAgICAgICAgIGF3YWl0IGV4cGVjdCh1c2VDYXNlLmRlbGV0ZVRlbXBsYXRlKCdidWlsdGluLXRlc3QnKSlcbiAgICAgICAgICAgICAgICAucmVqZWN0cy50b1Rocm93KCdDYW5ub3QgZGVsZXRlIGJ1aWx0LWluIHRlbXBsYXRlcycpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdUZW1wbGF0ZSBJbnN0YW50aWF0aW9uJywgKCkgPT4ge1xuICAgICAgICBpdCgnc2hvdWxkIGluc3RhbnRpYXRlIGEgdGVtcGxhdGUgd2l0aCB2YWxpZCBwYXJhbWV0ZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gTW9jayBhIHRlbXBsYXRlIHdpdGggcGFyYW1ldGVyc1xuICAgICAgICAgICAgY29uc3QgcGFyYW1ldGVyaXplZFRlbXBsYXRlID0gbmV3IFF1ZXJ5VGVtcGxhdGUoe1xuICAgICAgICAgICAgICAgIGlkOiAncGFyYW0tdGVtcGxhdGUnLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBtb2NrVGVtcGxhdGUuZ2V0TWV0YWRhdGEoKSxcbiAgICAgICAgICAgICAgICBsYXlvdXQ6IG1vY2tUZW1wbGF0ZS5nZXRMYXlvdXQoKSxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiBbe1xuICAgICAgICAgICAgICAgICAgICBpZDogJ3BhcmFtMScsXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdUZXN0IFBhcmFtJyxcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICdBIHRlc3QgcGFyYW1ldGVyJyxcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2VudGl0eScsXG4gICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBwYXJhbWV0ZXJpemVkVGVtcGxhdGUuc2V0UGFyYW1ldGVyVmFsdWUoJ3BhcmFtMScsICd0ZXN0LXZhbHVlJyk7XG4gICAgICAgICAgICBtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LnJlY29yZFVzYWdlLm1vY2tSZXNvbHZlZFZhbHVlKCk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UuaW5zdGFudGlhdGVUZW1wbGF0ZShwYXJhbWV0ZXJpemVkVGVtcGxhdGUpO1xuXG4gICAgICAgICAgICBleHBlY3QobW9ja1RlbXBsYXRlUmVwb3NpdG9yeS5yZWNvcmRVc2FnZSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ3BhcmFtLXRlbXBsYXRlJyk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnbm9kZXMnKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdlZGdlcycpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIHdoZW4gaW5zdGFudGlhdGluZyB0ZW1wbGF0ZSB3aXRoIGludmFsaWQgcGFyYW1ldGVycycsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBhcmFtZXRlcml6ZWRUZW1wbGF0ZSA9IG5ldyBRdWVyeVRlbXBsYXRlKHtcbiAgICAgICAgICAgICAgICBpZDogJ3BhcmFtLXRlbXBsYXRlJyxcbiAgICAgICAgICAgICAgICBtZXRhZGF0YTogbW9ja1RlbXBsYXRlLmdldE1ldGFkYXRhKCksXG4gICAgICAgICAgICAgICAgbGF5b3V0OiBtb2NrVGVtcGxhdGUuZ2V0TGF5b3V0KCksXG4gICAgICAgICAgICAgICAgcGFyYW1ldGVyczogW3tcbiAgICAgICAgICAgICAgICAgICAgaWQ6ICdwYXJhbTEnLFxuICAgICAgICAgICAgICAgICAgICBuYW1lOiAnVGVzdCBQYXJhbScsXG4gICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQSB0ZXN0IHBhcmFtZXRlcicsXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlbnRpdHknLFxuICAgICAgICAgICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gRG9uJ3Qgc2V0IHRoZSByZXF1aXJlZCBwYXJhbWV0ZXJcblxuICAgICAgICAgICAgYXdhaXQgZXhwZWN0KHVzZUNhc2UuaW5zdGFudGlhdGVUZW1wbGF0ZShwYXJhbWV0ZXJpemVkVGVtcGxhdGUpKVxuICAgICAgICAgICAgICAgIC5yZWplY3RzLnRvVGhyb3coJ1RlbXBsYXRlIHBhcmFtZXRlcnMgYXJlIGludmFsaWQnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnSW1wb3J0L0V4cG9ydCcsICgpID0+IHtcbiAgICAgICAgaXQoJ3Nob3VsZCBleHBvcnQgdGVtcGxhdGVzIGFzIEpTT04nLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBtb2NrRXhwb3J0RGF0YSA9IFt7IGlkOiAndGVzdCcsIG5hbWU6ICdUZXN0JyB9XTtcbiAgICAgICAgICAgIG1vY2tUZW1wbGF0ZVJlcG9zaXRvcnkuZXhwb3J0VGVtcGxhdGVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tFeHBvcnREYXRhKTtcblxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdXNlQ2FzZS5leHBvcnRUZW1wbGF0ZXMoWyd0ZXN0LXRlbXBsYXRlJ10pO1xuXG4gICAgICAgICAgICBleHBlY3QobW9ja1RlbXBsYXRlUmVwb3NpdG9yeS5leHBvcnRUZW1wbGF0ZXMpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFsndGVzdC10ZW1wbGF0ZSddKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoSlNPTi5zdHJpbmdpZnkobW9ja0V4cG9ydERhdGEsIG51bGwsIDIpKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaXQoJ3Nob3VsZCBpbXBvcnQgdGVtcGxhdGVzIGZyb20gSlNPTicsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGpzb25EYXRhID0gSlNPTi5zdHJpbmdpZnkoW3sgaWQ6ICd0ZXN0JywgbmFtZTogJ1Rlc3QnIH1dKTtcbiAgICAgICAgICAgIGNvbnN0IG1vY2tUZW1wbGF0ZXMgPSBbbW9ja1RlbXBsYXRlXTtcbiAgICAgICAgICAgIG1vY2tUZW1wbGF0ZVJlcG9zaXRvcnkuaW1wb3J0VGVtcGxhdGVzLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tUZW1wbGF0ZXMpO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmltcG9ydFRlbXBsYXRlcyhqc29uRGF0YSk7XG5cbiAgICAgICAgICAgIGV4cGVjdChtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LmltcG9ydFRlbXBsYXRlcykudG9IYXZlQmVlbkNhbGxlZFdpdGgoW3sgaWQ6ICd0ZXN0JywgbmFtZTogJ1Rlc3QnIH1dKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1RlbXBsYXRlcyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3IgZm9yIGludmFsaWQgSlNPTiBpbiBpbXBvcnQnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpbnZhbGlkSnNvbiA9ICdpbnZhbGlkIGpzb24nO1xuXG4gICAgICAgICAgICBhd2FpdCBleHBlY3QodXNlQ2FzZS5pbXBvcnRUZW1wbGF0ZXMoaW52YWxpZEpzb24pKVxuICAgICAgICAgICAgICAgIC5yZWplY3RzLnRvVGhyb3coJ0ZhaWxlZCB0byBpbXBvcnQgdGVtcGxhdGVzJyk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGl0KCdzaG91bGQgdGhyb3cgZXJyb3IgZm9yIG5vbi1hcnJheSBKU09OIGluIGltcG9ydCcsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vbkFycmF5SnNvbiA9IEpTT04uc3RyaW5naWZ5KHsgbm90OiAnYXJyYXknIH0pO1xuXG4gICAgICAgICAgICBhd2FpdCBleHBlY3QodXNlQ2FzZS5pbXBvcnRUZW1wbGF0ZXMobm9uQXJyYXlKc29uKSlcbiAgICAgICAgICAgICAgICAucmVqZWN0cy50b1Rocm93KCdJbnZhbGlkIEpTT04gZm9ybWF0OiBleHBlY3RlZCBhcnJheSBvZiB0ZW1wbGF0ZXMnKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBkZXNjcmliZSgnU3RhdGlzdGljcyBhbmQgQW5hbHl0aWNzJywgKCkgPT4ge1xuICAgICAgICBpdCgnc2hvdWxkIGdldCB1c2FnZSBzdGF0aXN0aWNzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbW9ja1N0YXRzID0ge1xuICAgICAgICAgICAgICAgIHVzYWdlQ291bnQ6IDUsXG4gICAgICAgICAgICAgICAgbGFzdFVzZWQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgICAgICAgYXZlcmFnZVBhcmFtZXRlcnNGaWxsZWQ6IDIuNVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG1vY2tUZW1wbGF0ZVJlcG9zaXRvcnkuZ2V0VXNhZ2VTdGF0cy5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrU3RhdHMpO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmdldFVzYWdlU3RhdGlzdGljcygndGVzdC10ZW1wbGF0ZScpO1xuXG4gICAgICAgICAgICBleHBlY3QobW9ja1RlbXBsYXRlUmVwb3NpdG9yeS5nZXRVc2FnZVN0YXRzKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCgndGVzdC10ZW1wbGF0ZScpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrU3RhdHMpO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIGdldCB0ZW1wbGF0ZSBwcmV2aWV3IGluZm9ybWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgbW9ja1RlbXBsYXRlUmVwb3NpdG9yeS5maW5kQnlJZC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrVGVtcGxhdGUpO1xuXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1c2VDYXNlLmdldFRlbXBsYXRlUHJldmlldygndGVzdC10ZW1wbGF0ZScpO1xuXG4gICAgICAgICAgICBleHBlY3QocmVzdWx0KS50b0hhdmVQcm9wZXJ0eSgnc3BhcnFsUXVlcnknKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdub2RlQ291bnQnKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdlZGdlQ291bnQnKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQpLnRvSGF2ZVByb3BlcnR5KCdwYXJhbWV0ZXJDb3VudCcpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2NvbXBsZXhpdHknKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQubm9kZUNvdW50KS50b0JlKDEpO1xuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5lZGdlQ291bnQpLnRvQmUoMCk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LnBhcmFtZXRlckNvdW50KS50b0JlKDApO1xuICAgICAgICB9KTtcblxuICAgICAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIHdoZW4gcHJldmlld2luZyBub24tZXhpc3RlbnQgdGVtcGxhdGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LmZpbmRCeUlkLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgICAgICAgIGF3YWl0IGV4cGVjdCh1c2VDYXNlLmdldFRlbXBsYXRlUHJldmlldygnbm9uZXhpc3RlbnQnKSlcbiAgICAgICAgICAgICAgICAucmVqZWN0cy50b1Rocm93KCdUZW1wbGF0ZSB3aXRoIElEIG5vbmV4aXN0ZW50IG5vdCBmb3VuZCcpO1xuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGRlc2NyaWJlKCdUZW1wbGF0ZSBWYWxpZGF0aW9uJywgKCkgPT4ge1xuICAgICAgICBpdCgnc2hvdWxkIHZhbGlkYXRlIHRlbXBsYXRlIHBhcmFtZXRlcnMgY29tcHJlaGVuc2l2ZWx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcGFyYW1ldGVyaXplZFRlbXBsYXRlID0gbmV3IFF1ZXJ5VGVtcGxhdGUoe1xuICAgICAgICAgICAgICAgIGlkOiAncGFyYW0tdGVtcGxhdGUnLFxuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiBtb2NrVGVtcGxhdGUuZ2V0TWV0YWRhdGEoKSxcbiAgICAgICAgICAgICAgICBsYXlvdXQ6IG1vY2tUZW1wbGF0ZS5nZXRMYXlvdXQoKSxcbiAgICAgICAgICAgICAgICBwYXJhbWV0ZXJzOiBbXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAncmVxdWlyZWQtcGFyYW0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ1JlcXVpcmVkIFBhcmFtZXRlcicsXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0EgcmVxdWlyZWQgcGFyYW1ldGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdlbnRpdHknLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdvcHRpb25hbC1wYXJhbScsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnT3B0aW9uYWwgUGFyYW1ldGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQW4gb3B0aW9uYWwgcGFyYW1ldGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdsaXRlcmFsJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHVzZUNhc2UudmFsaWRhdGVUZW1wbGF0ZVBhcmFtZXRlcnMocGFyYW1ldGVyaXplZFRlbXBsYXRlKTtcblxuICAgICAgICAgICAgZXhwZWN0KHJlc3VsdC5pc1ZhbGlkKS50b0JlKGZhbHNlKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQuZXJyb3JzKS50b0NvbnRhaW4oJ1BhcmFtZXRlciBSZXF1aXJlZCBQYXJhbWV0ZXIgaXMgcmVxdWlyZWQnKTtcbiAgICAgICAgICAgIGV4cGVjdChyZXN1bHQubWlzc2luZ1BhcmFtZXRlcnMpLnRvQ29udGFpbignUmVxdWlyZWQgUGFyYW1ldGVyJyk7XG4gICAgICAgICAgICBleHBlY3QocmVzdWx0LmludmFsaWRQYXJhbWV0ZXJzKS50b0hhdmVMZW5ndGgoMCk7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgZGVzY3JpYmUoJ0NhY2hlIE1hbmFnZW1lbnQnLCAoKSA9PiB7XG4gICAgICAgIGl0KCdzaG91bGQgcmVmcmVzaCB0ZW1wbGF0ZSBjYWNoZScsIGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgIG1vY2tUZW1wbGF0ZVJlcG9zaXRvcnkucmVmcmVzaC5tb2NrUmVzb2x2ZWRWYWx1ZSgpO1xuXG4gICAgICAgICAgICBhd2FpdCB1c2VDYXNlLnJlZnJlc2hUZW1wbGF0ZUNhY2hlKCk7XG5cbiAgICAgICAgICAgIGV4cGVjdChtb2NrVGVtcGxhdGVSZXBvc2l0b3J5LnJlZnJlc2gpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG59KTsiXSwidmVyc2lvbiI6M30=