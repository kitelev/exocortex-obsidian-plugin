{"file":"/Users/kitelev/Documents/exocortex-obsidian-plugin/src/presentation/mobile/MobileModalAdapter.ts","mappings":"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","names":[],"sources":["/Users/kitelev/Documents/exocortex-obsidian-plugin/src/presentation/mobile/MobileModalAdapter.ts"],"sourcesContent":["import {\n  App,\n  Modal,\n  Setting,\n  TextComponent,\n  DropdownComponent,\n  ToggleComponent,\n  TextAreaComponent,\n  ButtonComponent,\n  Notice,\n} from \"obsidian\";\nimport { PlatformDetector } from \"../../infrastructure/utils/PlatformDetector\";\n\n/**\n * Interface for modal content configuration\n */\nexport interface MobileModalConfig {\n  title: string;\n  subtitle?: string;\n  content?: HTMLElement | string;\n  showCloseButton?: boolean;\n  allowDismiss?: boolean;\n  fullscreen?: boolean;\n  keyboardHandling?: \"auto\" | \"manual\" | \"none\";\n  maxHeight?: string;\n  className?: string;\n}\n\n/**\n * Interface for keyboard event handling\n */\nexport interface KeyboardHandler {\n  onShow?: () => void;\n  onHide?: () => void;\n  onHeightChange?: (height: number) => void;\n}\n\n/**\n * Mobile-optimized modal adapter for iOS and touch devices\n * Handles keyboard appearance, safe areas, and touch interactions\n */\nexport class MobileModalAdapter extends Modal {\n  private config: Required<MobileModalConfig>;\n  private keyboardHandler?: KeyboardHandler;\n  private originalViewportHeight: number;\n  private isKeyboardVisible = false;\n  private keyboardHeight = 0;\n  private resizeObserver?: ResizeObserver;\n  private touchStartY = 0;\n  private isDragging = false;\n  private dragThreshold = 100;\n\n  private readonly defaultConfig: Required<MobileModalConfig> = {\n    title: \"\",\n    subtitle: \"\",\n    content: \"\",\n    showCloseButton: true,\n    allowDismiss: true,\n    fullscreen: false,\n    keyboardHandling: \"auto\",\n    maxHeight: \"90vh\",\n    className: \"\",\n  };\n\n  constructor(\n    app: App,\n    config: MobileModalConfig,\n    keyboardHandler?: KeyboardHandler,\n  ) {\n    super(app);\n    this.config = { ...this.defaultConfig, ...config };\n    this.keyboardHandler = keyboardHandler;\n    this.originalViewportHeight = window.innerHeight;\n\n    this.setupMobileStyles();\n    this.setupKeyboardHandling();\n    this.setupGestureHandling();\n  }\n\n  /**\n   * Setup mobile-specific modal styles and behavior\n   */\n  private setupMobileStyles(): void {\n    const { modalEl } = this;\n\n    // Add mobile-specific classes\n    modalEl.addClass(\"exocortex-mobile-modal\");\n    if (this.config.className) {\n      modalEl.addClass(this.config.className);\n    }\n\n    // Apply mobile layout\n    if (PlatformDetector.isMobile()) {\n      modalEl.addClass(\"mobile-layout\");\n\n      if (this.config.fullscreen) {\n        modalEl.addClass(\"fullscreen-modal\");\n      } else {\n        modalEl.addClass(\"bottom-sheet\");\n      }\n    }\n\n    // Setup backdrop\n    this.setupBackdrop();\n\n    // Setup safe area handling for iOS devices\n    if (PlatformDetector.isIOS()) {\n      this.setupSafeAreaHandling();\n    }\n  }\n\n  /**\n   * Setup backdrop with mobile-friendly dismiss behavior\n   */\n  private setupBackdrop(): void {\n    const backdrop = this.modalEl.parentElement;\n    if (!backdrop) return;\n\n    backdrop.style.cssText = `\n            position: fixed;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            background-color: rgba(0, 0, 0, 0.5);\n            z-index: 1000;\n            display: flex;\n            align-items: ${PlatformDetector.isMobile() ? \"flex-end\" : \"center\"};\n            justify-content: center;\n            transition: opacity 0.3s ease;\n        `;\n\n    if (this.config.allowDismiss) {\n      backdrop.addEventListener(\"click\", (e) => {\n        if (e.target === backdrop) {\n          this.close();\n        }\n      });\n    }\n  }\n\n  /**\n   * Setup iOS safe area handling\n   */\n  private setupSafeAreaHandling(): void {\n    const safeAreaInsets = PlatformDetector.getSafeAreaInsets();\n\n    this.modalEl.style.paddingTop = `${safeAreaInsets.top}px`;\n    this.modalEl.style.paddingBottom = `${safeAreaInsets.bottom}px`;\n    this.modalEl.style.paddingLeft = `${safeAreaInsets.left}px`;\n    this.modalEl.style.paddingRight = `${safeAreaInsets.right}px`;\n  }\n\n  /**\n   * Setup iOS keyboard handling\n   */\n  private setupKeyboardHandling(): void {\n    if (this.config.keyboardHandling === \"none\") return;\n\n    // iOS keyboard detection using viewport height changes\n    if (PlatformDetector.isIOS()) {\n      const checkKeyboard = () => {\n        const currentHeight = window.innerHeight;\n        const heightDiff = this.originalViewportHeight - currentHeight;\n\n        if (heightDiff > 150) {\n          // Keyboard is likely visible\n          if (!this.isKeyboardVisible) {\n            this.isKeyboardVisible = true;\n            this.keyboardHeight = heightDiff;\n            this.handleKeyboardShow();\n          }\n        } else {\n          // Keyboard is likely hidden\n          if (this.isKeyboardVisible) {\n            this.isKeyboardVisible = false;\n            this.keyboardHeight = 0;\n            this.handleKeyboardHide();\n          }\n        }\n      };\n\n      // Use ResizeObserver for more reliable detection\n      if (\"ResizeObserver\" in window) {\n        this.resizeObserver = new ResizeObserver(checkKeyboard);\n        this.resizeObserver.observe(document.documentElement);\n      } else {\n        // Fallback to resize event\n        window.addEventListener(\"resize\", checkKeyboard);\n\n        // Additional iOS-specific events\n        document.addEventListener(\"focusin\", checkKeyboard);\n        document.addEventListener(\"focusout\", checkKeyboard);\n      }\n    }\n\n    // Visual Viewport API for better keyboard detection (where supported)\n    if (\"visualViewport\" in window) {\n      const visualViewport = window.visualViewport!;\n\n      visualViewport.addEventListener(\"resize\", () => {\n        const heightDiff = window.innerHeight - visualViewport.height;\n\n        if (heightDiff > 50) {\n          if (!this.isKeyboardVisible) {\n            this.isKeyboardVisible = true;\n            this.keyboardHeight = heightDiff;\n            this.handleKeyboardShow();\n          }\n        } else {\n          if (this.isKeyboardVisible) {\n            this.isKeyboardVisible = false;\n            this.keyboardHeight = 0;\n            this.handleKeyboardHide();\n          }\n        }\n      });\n    }\n  }\n\n  /**\n   * Handle keyboard appearance\n   */\n  private handleKeyboardShow(): void {\n    this.modalEl.addClass(\"keyboard-visible\");\n\n    if (this.config.keyboardHandling === \"auto\") {\n      // Adjust modal position and size\n      this.modalEl.style.transform = `translateY(-${Math.min(this.keyboardHeight * 0.5, 100)}px)`;\n      this.modalEl.style.maxHeight = `${window.innerHeight - this.keyboardHeight - 40}px`;\n\n      // Ensure focused input is visible\n      setTimeout(() => {\n        const focusedElement = document.activeElement as HTMLElement;\n        if (focusedElement && this.modalEl.contains(focusedElement)) {\n          focusedElement.scrollIntoView({\n            behavior: \"smooth\",\n            block: \"center\",\n          });\n        }\n      }, 100);\n    }\n\n    this.keyboardHandler?.onShow?.();\n    this.keyboardHandler?.onHeightChange?.(this.keyboardHeight);\n  }\n\n  /**\n   * Handle keyboard disappearance\n   */\n  private handleKeyboardHide(): void {\n    this.modalEl.removeClass(\"keyboard-visible\");\n\n    if (this.config.keyboardHandling === \"auto\") {\n      this.modalEl.style.transform = \"\";\n      this.modalEl.style.maxHeight = this.config.maxHeight;\n    }\n\n    this.keyboardHandler?.onHide?.();\n    this.keyboardHandler?.onHeightChange?.(0);\n  }\n\n  /**\n   * Setup gesture handling for touch devices\n   */\n  private setupGestureHandling(): void {\n    if (!PlatformDetector.hasTouch()) return;\n\n    // Pull-to-dismiss gesture for mobile modals\n    if (PlatformDetector.isMobile() && this.config.allowDismiss) {\n      this.setupPullToDismiss();\n    }\n\n    // Prevent background scrolling on mobile\n    this.preventBackgroundScroll();\n  }\n\n  /**\n   * Setup pull-to-dismiss gesture\n   */\n  private setupPullToDismiss(): void {\n    const modalContent = this.contentEl;\n\n    modalContent.addEventListener(\n      \"touchstart\",\n      (e) => {\n        this.touchStartY = e.touches[0].clientY;\n        this.isDragging = false;\n      },\n      { passive: true },\n    );\n\n    modalContent.addEventListener(\n      \"touchmove\",\n      (e) => {\n        if (!this.isDragging) {\n          const deltaY = e.touches[0].clientY - this.touchStartY;\n\n          if (deltaY > 10 && modalContent.scrollTop === 0) {\n            this.isDragging = true;\n            modalContent.style.touchAction = \"none\";\n          }\n        }\n\n        if (this.isDragging) {\n          const deltaY = Math.max(0, e.touches[0].clientY - this.touchStartY);\n          const progress = Math.min(deltaY / this.dragThreshold, 1);\n\n          this.modalEl.style.transform = `translateY(${deltaY}px)`;\n          this.modalEl.style.opacity = `${1 - progress * 0.5}`;\n\n          // Add visual feedback\n          if (deltaY > this.dragThreshold * 0.7) {\n            this.modalEl.addClass(\"will-dismiss\");\n          } else {\n            this.modalEl.removeClass(\"will-dismiss\");\n          }\n        }\n      },\n      { passive: false },\n    );\n\n    modalContent.addEventListener(\n      \"touchend\",\n      (e) => {\n        if (this.isDragging) {\n          const deltaY = e.changedTouches[0].clientY - this.touchStartY;\n\n          if (deltaY > this.dragThreshold) {\n            this.close();\n          } else {\n            // Snap back\n            this.modalEl.style.transition =\n              \"transform 0.3s ease, opacity 0.3s ease\";\n            this.modalEl.style.transform = \"\";\n            this.modalEl.style.opacity = \"\";\n\n            setTimeout(() => {\n              this.modalEl.style.transition = \"\";\n            }, 300);\n          }\n\n          this.modalEl.removeClass(\"will-dismiss\");\n          modalContent.style.touchAction = \"\";\n          this.isDragging = false;\n        }\n      },\n      { passive: true },\n    );\n  }\n\n  /**\n   * Prevent background scrolling when modal is open\n   */\n  private preventBackgroundScroll(): void {\n    const originalOverflow = document.body.style.overflow;\n    const originalPosition = document.body.style.position;\n\n    document.body.style.overflow = \"hidden\";\n    if (PlatformDetector.isIOS()) {\n      document.body.style.position = \"fixed\";\n      document.body.style.width = \"100%\";\n      document.body.style.height = \"100%\";\n    }\n\n    // Restore on close\n    this.modalEl.addEventListener(\"beforeunload\", () => {\n      document.body.style.overflow = originalOverflow;\n      document.body.style.position = originalPosition;\n    });\n  }\n\n  /**\n   * Override onOpen to setup mobile-specific content\n   */\n  onOpen(): void {\n    const { contentEl } = this;\n\n    this.setupModalStructure();\n    this.populateContent();\n\n    // Focus management for accessibility\n    if (PlatformDetector.hasTouch()) {\n      this.setupTouchFocusManagement();\n    }\n  }\n\n  /**\n   * Setup the modal structure with header, body, and footer\n   */\n  private setupModalStructure(): void {\n    const { contentEl } = this;\n\n    // Clear any existing content\n    contentEl.empty();\n\n    // Create header\n    if (this.config.title || this.config.showCloseButton) {\n      const header = this.createModalHeader();\n      contentEl.appendChild(header);\n    }\n\n    // Create body\n    const body = this.createModalBody();\n    contentEl.appendChild(body);\n  }\n\n  /**\n   * Create modal header with title and close button\n   */\n  private createModalHeader(): HTMLElement {\n    const header = document.createElement(\"div\");\n    header.className = \"exocortex-mobile-modal-header\";\n\n    // Add drag indicator for mobile\n    if (PlatformDetector.isMobile()) {\n      const dragIndicator = document.createElement(\"div\");\n      dragIndicator.className = \"modal-drag-indicator\";\n      header.appendChild(dragIndicator);\n    }\n\n    // Title section\n    if (this.config.title) {\n      const titleContainer = document.createElement(\"div\");\n      titleContainer.className = \"modal-title-container\";\n\n      const title = document.createElement(\"h2\");\n      title.className = \"modal-title\";\n      title.textContent = this.config.title;\n      titleContainer.appendChild(title);\n\n      if (this.config.subtitle) {\n        const subtitle = document.createElement(\"p\");\n        subtitle.className = \"modal-subtitle\";\n        subtitle.textContent = this.config.subtitle;\n        titleContainer.appendChild(subtitle);\n      }\n\n      header.appendChild(titleContainer);\n    }\n\n    // Close button\n    if (this.config.showCloseButton) {\n      const closeButton = this.createTouchCloseButton();\n      header.appendChild(closeButton);\n    }\n\n    return header;\n  }\n\n  /**\n   * Create touch-optimized close button\n   */\n  private createTouchCloseButton(): HTMLElement {\n    const button = document.createElement(\"button\");\n    button.className = \"modal-close-button\";\n    button.innerHTML = \"âœ•\";\n    button.setAttribute(\"aria-label\", \"Close modal\");\n\n    // iOS-compliant touch target\n    button.style.cssText = `\n            width: 44px;\n            height: 44px;\n            border: none;\n            background: none;\n            color: var(--text-muted);\n            font-size: 18px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            border-radius: 50%;\n            cursor: pointer;\n            transition: background-color 0.2s ease;\n            -webkit-tap-highlight-color: transparent;\n        `;\n\n    button.addEventListener(\"click\", () => this.close());\n\n    // Touch feedback\n    if (PlatformDetector.hasTouch()) {\n      button.addEventListener(\n        \"touchstart\",\n        () => {\n          button.style.backgroundColor = \"var(--background-modifier-hover)\";\n        },\n        { passive: true },\n      );\n\n      button.addEventListener(\n        \"touchend\",\n        () => {\n          setTimeout(() => {\n            button.style.backgroundColor = \"\";\n          }, 150);\n        },\n        { passive: true },\n      );\n    } else {\n      button.addEventListener(\"mouseenter\", () => {\n        button.style.backgroundColor = \"var(--background-modifier-hover)\";\n      });\n\n      button.addEventListener(\"mouseleave\", () => {\n        button.style.backgroundColor = \"\";\n      });\n    }\n\n    return button;\n  }\n\n  /**\n   * Create modal body container\n   */\n  private createModalBody(): HTMLElement {\n    const body = document.createElement(\"div\");\n    body.className = \"exocortex-mobile-modal-body\";\n\n    body.style.cssText = `\n            flex: 1;\n            overflow-y: auto;\n            -webkit-overflow-scrolling: touch;\n            padding: 0 20px 20px 20px;\n        `;\n\n    return body;\n  }\n\n  /**\n   * Populate modal content\n   */\n  private populateContent(): void {\n    const body = this.contentEl.querySelector(\n      \".exocortex-mobile-modal-body\",\n    ) as HTMLElement;\n    if (!body) return;\n\n    if (typeof this.config.content === \"string\") {\n      body.innerHTML = this.config.content;\n    } else if (this.config.content instanceof HTMLElement) {\n      body.appendChild(this.config.content);\n    }\n  }\n\n  /**\n   * Setup touch-specific focus management\n   */\n  private setupTouchFocusManagement(): void {\n    // Prevent focus outline on touch devices\n    const focusableElements = this.contentEl.querySelectorAll(\n      'button, input, select, textarea, [tabindex]:not([tabindex=\"-1\"])',\n    );\n\n    focusableElements.forEach((element) => {\n      element.addEventListener(\"touchstart\", () => {\n        element.classList.add(\"touch-active\");\n      });\n\n      element.addEventListener(\"touchend\", () => {\n        setTimeout(() => {\n          element.classList.remove(\"touch-active\");\n        }, 150);\n      });\n    });\n  }\n\n  /**\n   * Add content to modal body\n   */\n  addContent(content: HTMLElement | string): void {\n    const body = this.contentEl.querySelector(\n      \".exocortex-mobile-modal-body\",\n    ) as HTMLElement;\n    if (!body) return;\n\n    if (typeof content === \"string\") {\n      const div = document.createElement(\"div\");\n      div.innerHTML = content;\n      body.appendChild(div);\n    } else {\n      body.appendChild(content);\n    }\n  }\n\n  /**\n   * Create mobile-optimized form section\n   */\n  createFormSection(title?: string): HTMLElement {\n    const section = document.createElement(\"div\");\n    section.className = \"mobile-form-section\";\n\n    if (title) {\n      const titleEl = document.createElement(\"h3\");\n      titleEl.className = \"form-section-title\";\n      titleEl.textContent = title;\n      section.appendChild(titleEl);\n    }\n\n    const content = document.createElement(\"div\");\n    content.className = \"form-section-content\";\n    section.appendChild(content);\n\n    return section;\n  }\n\n  /**\n   * Create mobile-optimized button group\n   */\n  createButtonGroup(\n    buttons: Array<{\n      text: string;\n      onClick: () => void;\n      variant?: \"primary\" | \"secondary\" | \"danger\";\n      disabled?: boolean;\n    }>,\n  ): HTMLElement {\n    const group = document.createElement(\"div\");\n    group.className = \"mobile-button-group\";\n\n    const isVertical = PlatformDetector.isMobile();\n    group.style.cssText = `\n            display: flex;\n            flex-direction: ${isVertical ? \"column\" : \"row\"};\n            gap: 12px;\n            margin-top: 20px;\n        `;\n\n    buttons.forEach((buttonConfig) => {\n      const button = this.createTouchButton(buttonConfig);\n      group.appendChild(button);\n    });\n\n    return group;\n  }\n\n  /**\n   * Create touch-optimized button\n   */\n  private createTouchButton(config: {\n    text: string;\n    onClick: () => void;\n    variant?: \"primary\" | \"secondary\" | \"danger\";\n    disabled?: boolean;\n  }): HTMLElement {\n    const button = document.createElement(\"button\");\n    button.textContent = config.text;\n    button.className = `mobile-button mobile-button--${config.variant || \"secondary\"}`;\n\n    if (config.disabled) {\n      button.disabled = true;\n    }\n\n    button.addEventListener(\"click\", config.onClick);\n\n    return button;\n  }\n\n  /**\n   * Show mobile notification within modal context\n   */\n  showNotification(\n    message: string,\n    type: \"success\" | \"error\" | \"info\" = \"info\",\n  ): void {\n    const notification = document.createElement(\"div\");\n    notification.className = `mobile-notification mobile-notification--${type}`;\n    notification.textContent = message;\n\n    // Insert at top of modal\n    const header = this.contentEl.querySelector(\n      \".exocortex-mobile-modal-header\",\n    );\n    if (header) {\n      header.appendChild(notification);\n    } else {\n      this.contentEl.insertBefore(notification, this.contentEl.firstChild);\n    }\n\n    // Auto-remove after delay\n    setTimeout(\n      () => {\n        notification.style.opacity = \"0\";\n        setTimeout(() => notification.remove(), 300);\n      },\n      type === \"error\" ? 5000 : 3000,\n    );\n  }\n\n  /**\n   * Update modal configuration\n   */\n  updateConfig(newConfig: Partial<MobileModalConfig>): void {\n    this.config = { ...this.config, ...newConfig };\n\n    // Update title if changed\n    if (newConfig.title) {\n      const titleEl = this.contentEl.querySelector(\".modal-title\");\n      if (titleEl) {\n        titleEl.textContent = newConfig.title;\n      }\n    }\n\n    // Update subtitle if changed\n    if (newConfig.subtitle) {\n      const subtitleEl = this.contentEl.querySelector(\".modal-subtitle\");\n      if (subtitleEl) {\n        subtitleEl.textContent = newConfig.subtitle;\n      }\n    }\n  }\n\n  /**\n   * Get current keyboard height\n   */\n  getKeyboardHeight(): number {\n    return this.keyboardHeight;\n  }\n\n  /**\n   * Check if keyboard is currently visible\n   */\n  isKeyboardOpen(): boolean {\n    return this.isKeyboardVisible;\n  }\n\n  /**\n   * Override onClose to cleanup\n   */\n  onClose(): void {\n    // Cleanup keyboard handling\n    if (this.resizeObserver) {\n      this.resizeObserver.disconnect();\n    }\n\n    // Restore body styles\n    document.body.style.overflow = \"\";\n    document.body.style.position = \"\";\n    document.body.style.width = \"\";\n    document.body.style.height = \"\";\n\n    // Clear content\n    const { contentEl } = this;\n    contentEl.empty();\n  }\n\n  /**\n   * Adapt modal dimensions for different screen sizes\n   */\n  adaptModalDimensions(dimensions: { width: number; height: number }): {\n    width: number;\n    height: number;\n  } {\n    const screenWidth = window.innerWidth;\n    const screenHeight = window.innerHeight;\n\n    // Mobile adaptations\n    if (PlatformDetector.isMobile()) {\n      return {\n        width: Math.min(dimensions.width, screenWidth * 0.95),\n        height: Math.min(dimensions.height, screenHeight * 0.9),\n      };\n    }\n\n    // Tablet adaptations\n    if (screenWidth < 1024) {\n      return {\n        width: Math.min(dimensions.width, screenWidth * 0.8),\n        height: Math.min(dimensions.height, screenHeight * 0.8),\n      };\n    }\n\n    // Desktop - use original dimensions\n    return dimensions;\n  }\n\n  /**\n   * Ensure minimum touch target size (44px on iOS)\n   */\n  ensureMinimumTouchTarget(size: number): number {\n    const minTouchTarget = 44; // iOS Human Interface Guidelines\n    return Math.max(size, minTouchTarget);\n  }\n}\n"],"version":3}